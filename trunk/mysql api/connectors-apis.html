<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Chapter 20. Connectors and APIs</title><link rel="stylesheet" href="mysql-html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="MySQL 6.0 Reference Manual"><link rel="up" href="index.html" title="MySQL 6.0 Reference Manual"><link rel="prev" href="information-schema.html" title="Chapter 19. INFORMATION_SCHEMA Tables"><link rel="next" href="extending-mysql.html" title="Chapter 21. Extending MySQL"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 20. Connectors and APIs</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="information-schema.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="extending-mysql.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="connectors-apis"></a>Chapter 20. Connectors and APIs</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc">20.1. MySQL Connector/ODBC</a></span></dt><dd><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-versions">20.1.1. Connector/ODBC Versions</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-introduction">20.1.2. Connector/ODBC Introduction</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation">20.1.3. Connector/ODBC Installation</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-configuration">20.1.4. Connector/ODBC Configuration</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-examples">20.1.5. Connector/ODBC Examples</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-reference">20.1.6. Connector/ODBC Reference</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes">20.1.7. Connector/ODBC Notes and Tips</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-support">20.1.8. Connector/ODBC Support</a></span></dt></dl></dd><dt><span class="section"><a href="connectors-apis.html#connector-net">20.2. MySQL Connector/NET</a></span></dt><dd><dl><dt><span class="section"><a href="connectors-apis.html#connector-net-versions">20.2.1. Connector/NET Versions</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-installation">20.2.2. Connector/NET Installation</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-visual-studio">20.2.3. Visual Studio User Guide</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming">20.2.4. Connector/NET Programming</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connect-net-support">20.2.5. Connector/NET Support</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-faq">20.2.6. Connector/NET FAQ</a></span></dt></dl></dd><dt><span class="section"><a href="connectors-apis.html#connector-vstudio">20.3. MySQL Visual Studio Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-install">20.3.1. Installing the MySQL Visual Studio Plugin</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-creating">20.3.2. Creating a connection to the MySQL server</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-using">20.3.3. Using the MySQL Visual Studio Plugin</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-support">20.3.4. Visual Studio Plugin Support</a></span></dt></dl></dd><dt><span class="section"><a href="connectors-apis.html#connector-j">20.4. MySQL Connector/J</a></span></dt><dd><dl><dt><span class="section"><a href="connectors-apis.html#connector-j-versions">20.4.1. Connector/J Versions</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-installing">20.4.2. Connector/J Installation</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-examples">20.4.3. Connector/J Examples</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-reference">20.4.4. Connector/J (JDBC) Reference</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-usagenotes">20.4.5. Connector/J Notes and Tips</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-support">20.4.6. Connector/J Support</a></span></dt></dl></dd><dt><span class="section"><a href="connectors-apis.html#connector-mxj">20.5. MySQL Connector/MXJ</a></span></dt><dd><dl><dt><span class="section"><a href="connectors-apis.html#connector-mxj-overview">20.5.1. Connector/MXJ Overview</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-versions">20.5.2. Connector/MXJ Versions</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-install">20.5.3. Connector/MXJ Installation</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-configuration">20.5.4. Connector/MXJ Configuration</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-ref">20.5.5. Connector/MXJ Reference</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-usagenotes">20.5.6. Connector/MXJ Notes and Tips</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-support">20.5.7. Connector/MXJ Support</a></span></dt></dl></dd><dt><span class="section"><a href="connectors-apis.html#connector-cpp">20.6. MySQL Connector/C++</a></span></dt><dd><dl><dt><span class="section"><a href="connectors-apis.html#connector-cpp-installation-binary">20.6.1. MySQL Connector/C++ Binary Installation</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-installation-source">20.6.2. MySQL Connector/C++ Source Installation</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-apps-windows-visual-studio">20.6.3. MySQL Connector/C++ Building Windows applications with Microsoft Visual Studio</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-apps-linux-netbeans">20.6.4. MySQL Connector/C++ Building Linux applications with NetBeans</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-getting-started-examples">20.6.5. MySQL Connector/C++ Getting Started: Usage Examples</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-debug-tracing">20.6.6. MySQL Connector/C++ Debug Tracing</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-references">20.6.7. MySQL Connector/C++ References</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-bugs">20.6.8. MySQL Connector/C++ Known Bugs and Issues</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-requests">20.6.9. MySQL Connector/C++ Feature requests</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-support">20.6.10. MySQL Connector/C++ Support</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-faq">20.6.11. MySQL Connector/C++ FAQ</a></span></dt></dl></dd><dt><span class="section"><a href="connectors-apis.html#connector-c">20.7. MySQL Connector/C</a></span></dt><dd><dl><dt><span class="section"><a href="connectors-apis.html#connector-c-building">20.7.1. Building MySQL Connector/C from the Source Code</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-c-testing">20.7.2. Testing MySQL Connector/C</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-c-faq">20.7.3. MySQL Connector/C FAQ</a></span></dt></dl></dd><dt><span class="section"><a href="connectors-apis.html#connector-ooo">20.8. MySQL Connector/OpenOffice.org</a></span></dt><dd><dl><dt><span class="section"><a href="connectors-apis.html#connector-ooo-installation">20.8.1. Installation</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-ooo-getting-started">20.8.2. Getting Started: Connecting to MySQL</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-ooo-getting-started-examples">20.8.3. Getting Started: Usage Examples</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-ooo-references">20.8.4. References</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-ooo-bugs">20.8.5. Known Bugs</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-ooo-contact">20.8.6. Contact</a></span></dt></dl></dd><dt><span class="section"><a href="connectors-apis.html#libmysqld">20.9. libmysqld, the Embedded MySQL Server Library</a></span></dt><dd><dl><dt><span class="section"><a href="connectors-apis.html#libmysqld-compiling">20.9.1. Compiling Programs with <code class="literal">libmysqld</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#libmysqld-restrictions">20.9.2. Restrictions When Using the Embedded MySQL Server</a></span></dt><dt><span class="section"><a href="connectors-apis.html#libmysqld-options">20.9.3. Options with the Embedded Server</a></span></dt><dt><span class="section"><a href="connectors-apis.html#libmysqld-example">20.9.4. Embedded Server Examples</a></span></dt><dt><span class="section"><a href="connectors-apis.html#libmysqld-licensing">20.9.5. Licensing the Embedded Server</a></span></dt></dl></dd><dt><span class="section"><a href="connectors-apis.html#c">20.10. MySQL C API</a></span></dt><dd><dl><dt><span class="section"><a href="connectors-apis.html#c-api-datatypes">20.10.1. C API Data Types</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-function-overview">20.10.2. C API Function Overview</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-functions">20.10.3. C API Function Descriptions</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-prepared-statements">20.10.4. C API Prepared Statements</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-prepared-statement-datatypes">20.10.5. C API Prepared Statement Data types</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-prepared-statement-function-overview">20.10.6. C API Prepared Statement Function Overview</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-prepared-statement-functions">20.10.7. C API Prepared Statement Function Descriptions</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-thread-functions">20.10.8. C API Threaded Function Descriptions</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-embedded-server-functions">20.10.9. C API Embedded Server Function Descriptions</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-problems">20.10.10. Common Questions and Problems When Using the C API</a></span></dt><dt><span class="section"><a href="connectors-apis.html#auto-reconnect">20.10.11. Controlling Automatic Reconnection Behavior</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-multiple-queries">20.10.12. C API Support for Multiple Statement Execution</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-prepared-statement-problems">20.10.13. C API Prepared Statement Problems</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-prepared-statement-date-handling">20.10.14. C API Prepared Statement Handling of Date and Time Values</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-prepared-call-statements">20.10.15. C API Support for Prepared <code class="literal">CALL</code>
      Statements</a></span></dt><dt><span class="section"><a href="connectors-apis.html#building-clients">20.10.16. Building Client Programs</a></span></dt><dt><span class="section"><a href="connectors-apis.html#threaded-clients">20.10.17. How to Make a Threaded Client</a></span></dt></dl></dd><dt><span class="section"><a href="connectors-apis.html#apis-php">20.11. MySQL PHP API</a></span></dt><dd><dl><dt><span class="section"><a href="connectors-apis.html#apis-php-mysql">20.11.1. MySQL</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli">20.11.2. MySQL Improved Extension (<code class="literal">Mysqli</code>)</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-pdo-mysql">20.11.3. MySQL Functions (PDO_MYSQL)</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-php">20.11.4. Connector/PHP</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-problems">20.11.5. Common Problems with MySQL and PHP</a></span></dt><dt><span class="section"><a href="connectors-apis.html#php-mysql-mysqli">20.11.6. Enabling Both <code class="literal">mysql</code> and <code class="literal">mysqli</code> in
      PHP</a></span></dt></dl></dd><dt><span class="section"><a href="connectors-apis.html#apis-perl">20.12. MySQL Perl API</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-cplusplus">20.13. MySQL C++ API</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-python">20.14. MySQL Python API</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-ruby">20.15. MySQL Ruby APIs</a></span></dt><dd><dl><dt><span class="section"><a href="connectors-apis.html#apis-ruby-mysqlruby">20.15.1. The MySQL/Ruby API</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-ruby-rubymysql">20.15.2. The Ruby/MySQL API</a></span></dt></dl></dd><dt><span class="section"><a href="connectors-apis.html#apis-tcl">20.16. MySQL Tcl API</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-eiffel">20.17. MySQL Eiffel Wrapper</a></span></dt></dl></div><a class="indexterm" name="id3607355"></a><a class="indexterm" name="id3607367"></a><a class="indexterm" name="id3607376"></a><a class="indexterm" name="id3607385"></a><a class="indexterm" name="id3607394"></a><a class="indexterm" name="id3607404"></a><a class="indexterm" name="id3607412"></a><a class="indexterm" name="id3607422"></a><a class="indexterm" name="id3607431"></a><a class="indexterm" name="id3607440"></a><a class="indexterm" name="id3607449"></a><a class="indexterm" name="id3607458"></a><a class="indexterm" name="id3607467"></a><a class="indexterm" name="id3607479"></a><a class="indexterm" name="id3607492"></a><p>
    MySQL Connectors provide connectivity to the MySQL server for client
    programs. APIs provide low-level access to the MySQL protocol and
    MySQL resources. Both Connectors and the APIs enable you to connect
    and execute MySQL statements from another language or environment,
    including Java (JDBC), ODBC, Perl, Python, PHP, Ruby, and native C
    and embedded MySQL instances.
  </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      Connector version numbers do not correlate with MySQL Server
      version numbers. See also
      <a href="connectors-apis.html#connectors-apis-versions" title="Table 20.2. MySQL Connector versions and MySQL Server versions">Table 20.2, “MySQL Connector versions and MySQL Server versions”</a>.
    </p></div><p>
    A number of connectors are developed by MySQL:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        Connector/ODBC provides driver support for connecting to a MySQL
        server using the Open Database Connectivity (ODBC) API. Support
        is available for ODBC connectivity from Windows, Unix and Mac OS
        X platforms.
      </p></li><li><p>
        Connector/NET enables developers to create .NET applications
        that use data stored in a MySQL database. Connector/NET
        implement a fully-functional ADO.NET interface and provides
        support for use with ADO.NET aware tools. Applications that want
        to use Connector/NET can be written in any of the supported .NET
        languages.
      </p><p>
        The MySQL Visual Studio Plugin works with Connector/NET and
        Visual Studio 2005. The plugin is a MySQL DDEX Provider, which
        means that you can use the schema and data manipulation tools
        within Visual Studio to create and edit objects within a MySQL
        database.
      </p></li><li><p>
        Connector/J provides driver support for connecting to MySQL from
        a Java application using the standard Java Database Connectivity
        (JDBC) API.
      </p></li><li><p>
        Connector/MXJ is a tool that enables easy deployment and
        management of MySQL server and database through your Java
        application.
      </p></li><li><p>
        Connector/C++ is a tool that enables easy deployment and
        management of MySQL server and database through your C++
        application.
      </p></li><li><p>
        Connector/C is a stand-alone replacement for the MySQL Client
        Library (<code class="literal">libmysql</code>).
      </p></li><li><p>
        Connector/OpenOffice.org is a tool that enables OpenOffice.org
        applications to connect to MySQL server.
      </p></li></ul></div><p>
    There are two direct access methods for using MySQL natively within
    a C application:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        The C API provides low-level access to the MySQL protocol
        through the <code class="literal">libmysql</code> client library; this is
        the primary method used to connect to an instance of the MySQL
        server, and is used both by MySQL command line clients and many
        of the APIs also detailed in this section. MySQL Connector/C can now also be
        used for this purpose.
      </p></li><li><p>
        <code class="literal">libmysqld</code> is an embedded MySQL server library
        that enables you to embed an instance of the MySQL server into
        your C applications.
      </p></li></ul></div><p>
    If you need to access MySQL from a C application, or build an
    interface to MySQL for a language not supported by the Connectors or
    APIs in this chapter, the C API is where you would start. A number
    of programmers utilities are available to help with the process, and
    also covered in this section.
  </p><p>
    The remaining APIs provide an interface to MySQL from specific
    application langauges. These solutions are not developed or
    supported by MySQL. Basic information on their usage and abilities
    is provided here for reference purposes only.
  </p><p>
    All the language APIs are developed using one of two methods, using
    <code class="literal">libmysql</code> or by building a <em class="firstterm">native
    driver</em>. The two solutions offer different benefits:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        Using <span class="emphasis"><em><code class="literal">libmysql</code></em></span> offers
        complete compatibility with MySQL as it uses the same libraries
        as the MySQL client applications. However, the feature set is
        limited to the implementation and interfaces exposed through
        <code class="literal">libmysql</code> and the performance may be lower as
        data is copied between the native langiage, and the MySQL API
        components. MySQL Connector/C is a possible alternative to using
        <code class="literal">libmysql</code>.
      </p></li><li><p>
        <span class="emphasis"><em>Native drivers</em></span> are an implementation of the
        MySQL network protocol entirely within the host language or
        environment. Native drivers are fast, as there is less copying
        of data between components, and they can offer advanced
        functionality not available through the standard MySQL API.
        Native drivers are also easier to build and deploy, as you do
        not need a copy of the MySQL client libraries to build the
        native driver components.
      </p></li></ul></div><p>
    A list of many of the libraries and interfaces available for MySQL
    are shown in the table. See
    <a href="connectors-apis.html#connectors-apis-summary" title="Table 20.1. MySQL APIs and Interfaces">Table 20.1, “MySQL APIs and Interfaces”</a>.
  </p><div class="table"><a name="connectors-apis-summary"></a><p class="title"><b>Table 20.1. MySQL APIs and Interfaces</b></p><table summary="MySQL APIs and Interfaces" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Environment</th><th>API</th><th>Type</th><th>Notes</th></tr></thead><tbody><tr><td>Ada</td><td>MySQL Bindings for GNU Ada</td><td><code class="literal">libmysql</code></td><td>See <a href="http://gnade.sourceforge.net/" target="_top">MySQL Bindings for GNU
            Ada</a></td></tr><tr><td>C</td><td>Connector/C</td><td>Replacement for <code class="literal">libmysql</code></td><td>See <a href="connectors-apis.html#connector-c" title="20.7. MySQL Connector/C">Section 20.7, “MySQL Connector/C”</a>.</td></tr><tr><td>C++</td><td>Connector/C++</td><td><code class="literal">libmysql</code></td><td>See <a href="connectors-apis.html#connector-cpp" title="20.6. MySQL Connector/C++">Section 20.6, “MySQL Connector/C++”</a>.</td></tr><tr><td> </td><td>MySQL++</td><td><code class="literal">libmysql</code></td><td>See <a href="connectors-apis.html#apis-cplusplus" title="20.13. MySQL C++ API">Section 20.13, “MySQL C++ API”</a>.</td></tr><tr><td> </td><td>MySQL wrapped</td><td><code class="literal">libmysql</code></td><td>See <a href="http://www.alhem.net/project/mysql/" target="_top">MySQL
            wrapped</a>.</td></tr><tr><td>Cocoa</td><td>MySQL-Cocoa</td><td><code class="literal">libmysql</code></td><td>Compatible with the Objective-C Cocoa environment. See
            <a href="http://mysql-cocoa.sourceforge.net/" target="_top">http://mysql-cocoa.sourceforge.net/</a></td></tr><tr><td>D</td><td>MySQL for D</td><td><code class="literal">libmysql</code></td><td>See <a href="http://www.steinmole.de/d/" target="_top">MySQL for D</a>.</td></tr><tr><td>Eiffel</td><td>Eiffel MySQL</td><td><code class="literal">libmysql</code></td><td>See <a href="connectors-apis.html#apis-eiffel" title="20.17. MySQL Eiffel Wrapper">Section 20.17, “MySQL Eiffel Wrapper”</a>.</td></tr><tr><td>Erlang</td><td><code class="literal">erlang-mysql-driver</code></td><td><code class="literal">libmysql</code></td><td>See
            <a href="http://code.google.com/p/erlang-mysql-driver/" target="_top"><code class="literal">erlang-mysql-driver</code>.</a></td></tr><tr><td>Haskell</td><td>Haskell MySQL Bindings</td><td>Native Driver</td><td>See <a href="http://www.serpentine.com/software/mysql" target="_top">Brian
            O'Sullivan's pure Haskell MySQL bindings</a>.</td></tr><tr><td> </td><td><code class="literal">hsql-mysql</code></td><td><code class="literal">libmysql</code></td><td>See
            <a href="http://hackage.haskell.org/cgi-bin/hackage-scripts/package/hsql-mysql-1.7" target="_top">MySQL
            driver for Haskell </a>.</td></tr><tr><td>Java/JDBC</td><td>Connector/J</td><td>Native Driver</td><td>See <a href="connectors-apis.html#connector-j" title="20.4. MySQL Connector/J">Section 20.4, “MySQL Connector/J”</a>.</td></tr><tr><td>Kaya</td><td>MyDB</td><td><code class="literal">libmysql</code></td><td>See <a href="http://kayalang.org/library/latest/MyDB" target="_top">MyDB</a>.</td></tr><tr><td>Lua</td><td>LuaSQL</td><td><code class="literal">libmysql</code></td><td>See <a href="http://www.keplerproject.org/luasql/" target="_top">LuaSQL</a>.</td></tr><tr><td>.NET/Mono</td><td>Connector/NET</td><td>Native Driver</td><td>See <a href="connectors-apis.html#connector-net" title="20.2. MySQL Connector/NET">Section 20.2, “MySQL Connector/NET”</a>.</td></tr><tr><td>Objective Caml</td><td>MySQL Bindings for OBjective Caml</td><td><code class="literal">libmysql</code></td><td>See <a href="http://raevnos.pennmush.org/code/ocaml-mysql/" target="_top">MySQL
            Bindings for Objective Caml</a>.</td></tr><tr><td>Octave</td><td>Database bindings for GNU Octave</td><td><code class="literal">libmysql</code></td><td>See
            <a href="http://octave.sourceforge.net/database/index.html" target="_top">Database
            bindings for GNU Octave</a>.</td></tr><tr><td>ODBC</td><td>Connector/ODBC</td><td><code class="literal">libmysql</code></td><td>See <a href="connectors-apis.html#connector-odbc" title="20.1. MySQL Connector/ODBC">Section 20.1, “MySQL Connector/ODBC”</a>.</td></tr><tr><td>OpenOffice</td><td>MySQL Connector/OpenOffice.org</td><td><code class="literal">libmysql</code></td><td>Direct connectivity, without using JDBC/ODBC. See
            <a href="connectors-apis.html#connector-ooo" title="20.8. MySQL Connector/OpenOffice.org">Section 20.8, “MySQL Connector/OpenOffice.org”</a>.</td></tr><tr><td>Perl</td><td><code class="literal">DBI</code>/<code class="literal">DBD::mysql</code></td><td><code class="literal">libmysql</code></td><td>See <a href="connectors-apis.html#apis-perl" title="20.12. MySQL Perl API">Section 20.12, “MySQL Perl API”</a>.</td></tr><tr><td> </td><td><code class="literal">Net::MySQL</code></td><td>Native Driver</td><td>See
            <a href="http://search.cpan.org/dist/Net-MySQL/MySQL.pm" target="_top"><code class="literal">Net::MySQL</code></a>
            at CPAN</td></tr><tr><td>PHP</td><td><code class="literal">mysql</code>, <code class="literal">ext/mysql</code> interface
            (deprecated)</td><td><code class="literal">libmysql</code></td><td>See <a href="connectors-apis.html#apis-php-mysql" title="20.11.1. MySQL">Section 20.11.1, “MySQL”</a>.</td></tr><tr><td> </td><td><code class="literal">mysqli</code>, <code class="literal">ext/mysqli</code> interface</td><td><code class="literal">libmysql</code></td><td>See <a href="connectors-apis.html#apis-php-mysqli" title="20.11.2. MySQL Improved Extension (Mysqli)">Section 20.11.2, “MySQL Improved Extension (<code class="literal">Mysqli</code>)”</a>.</td></tr><tr><td> </td><td><code class="literal">PDO_MYSQL</code></td><td><code class="literal">libmysql</code></td><td>See <a href="connectors-apis.html#apis-php-pdo-mysql" title="20.11.3. MySQL Functions (PDO_MYSQL)">Section 20.11.3, “MySQL Functions (PDO_MYSQL)”</a>.</td></tr><tr><td> </td><td>PDO mysqlnd</td><td>Native Driver</td><td>See <a href="http://forge.mysql.com/wiki/PHP_PDO_MYSQLND" target="_top">PHP PDO
            <code class="literal">mysqlnd</code>.</a></td></tr><tr><td>Python</td><td>MySQLdb</td><td><code class="literal">libmysql</code></td><td>See <a href="connectors-apis.html#apis-python" title="20.14. MySQL Python API">Section 20.14, “MySQL Python API”</a>.</td></tr><tr><td>Ruby</td><td>MySQL/Ruby</td><td><code class="literal">libmysql</code></td><td>Uses <code class="literal">libmysql</code>. See
            <a href="connectors-apis.html#apis-ruby-mysqlruby" title="20.15.1. The MySQL/Ruby API">Section 20.15.1, “The MySQL/Ruby API”</a>.</td></tr><tr><td> </td><td>Ruby/MySQL</td><td>Native Driver</td><td>See <a href="connectors-apis.html#apis-ruby-rubymysql" title="20.15.2. The Ruby/MySQL API">Section 20.15.2, “The Ruby/MySQL API”</a>.</td></tr><tr><td>Scheme</td><td><code class="literal">Myscsh</code></td><td><code class="literal">libmysql</code></td><td>See
            <a href="http://www-pu.informatik.uni-tuebingen.de/users/knauel/myscsh/" target="_top"><code class="literal">Myscsh</code></a>.</td></tr><tr><td>SPL</td><td><code class="literal">sql_mysql</code></td><td><code class="literal">libmysql</code></td><td>See
            <a href="http://www.clifford.at/spl/spldoc/sql_mysql.html" target="_top"><code class="literal">sql_mysql</code>
            for SPL</a>.</td></tr><tr><td>Tcl</td><td>MySQLtcl</td><td><code class="literal">libmysql</code></td><td>See <a href="connectors-apis.html#apis-tcl" title="20.16. MySQL Tcl API">Section 20.16, “MySQL Tcl API”</a>.</td></tr></tbody></table></div><div class="table"><a name="connectors-apis-versions"></a><p class="title"><b>Table 20.2. MySQL Connector versions and MySQL Server versions</b></p><table summary="MySQL Connector versions and MySQL Server versions" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Connector</th><th>Connector version</th><th>MySQL Server version</th></tr></thead><tbody><tr><td>Connector/C</td><td>6.0.0 (Beta)</td><td>6.0</td></tr><tr><td>Connector/C++</td><td>1.0.5 (Beta)</td><td>5.1, 5.4, 6.0</td></tr><tr><td>Connector/OpenOffice.org</td><td>1.0 (Alpha)</td><td>5.0, 5.1, 5.4, 6.0</td></tr><tr><td>Connector/J</td><td>5.1</td><td>4.1, 5.0, 5.1, 5.4, 6.0</td></tr><tr><td>Connector/NET</td><td>1.0</td><td>4.0, 5.0</td></tr><tr><td>Connector/NET</td><td>5.2</td><td>4.0, 4.1, 5.0, 5.1, 5.4, 6.0</td></tr><tr><td>Connector/NET</td><td>5.3</td><td>4.1, 5.0, 5.1, 5.4, 6.0</td></tr><tr><td>Connector/ODBC</td><td>3.51 (Unicode not supported)</td><td>4.1, 5.0, 5.1, 5.4, 6.0</td></tr><tr><td>Connector/ODBC</td><td>5.1</td><td>4.1, 5.0, 5.1, 5.4, 6.0</td></tr></tbody></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="connector-odbc"></a>20.1. MySQL Connector/ODBC</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-versions">20.1.1. Connector/ODBC Versions</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-introduction">20.1.2. Connector/ODBC Introduction</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation">20.1.3. Connector/ODBC Installation</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-configuration">20.1.4. Connector/ODBC Configuration</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-examples">20.1.5. Connector/ODBC Examples</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-reference">20.1.6. Connector/ODBC Reference</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes">20.1.7. Connector/ODBC Notes and Tips</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-support">20.1.8. Connector/ODBC Support</a></span></dt></dl></div><a class="indexterm" name="id3608843"></a><a class="indexterm" name="id3608852"></a><a class="indexterm" name="id3608861"></a><a class="indexterm" name="id3608870"></a><a class="indexterm" name="id3608879"></a><a class="indexterm" name="id3608888"></a><p>
    The MySQL Connector/ODBC is the name for the family of MySQL ODBC
    drivers (previously called MyODBC drivers) that provide access to a
    MySQL database using the industry standard Open Database
    Connectivity (ODBC) API. This reference covers Connector/ODBC 3.51
    and Connector/ODBC 5.1. Both releases provide an ODBC compliant
    interface to MySQL Server.
  </p><p>
    MySQL Connector/ODBC provides both driver-manager based and native
    interfaces to the MySQL database, which full support for MySQL
    functionality, including stored procedures, transactions and, with
    Connector/ODBC 5.1, full Unicode compliance.
  </p><p>
    For more information on the ODBC API standard and how to use it,
    refer to <a href="http://support.microsoft.com/kb/110093" target="_top">http://support.microsoft.com/kb/110093</a>.
  </p><p>
    The application development part of this reference assumes a good
    working knowledge of C, general DBMS knowledge, and finally, but not
    least, familiarity with MySQL. For more information about MySQL
    functionality and its syntax, refer to
    <a href="http://dev.mysql.com/doc/" target="_top">http://dev.mysql.com/doc/</a>.
  </p><p>
    Typically, you need to install Connector/ODBC only on Windows
    machines. For Unix and Mac OS X you can use the native MySQL network
    or named pipe to communicate with your MySQL database. You may need
    Connector/ODBC for Unix or Mac OS X if you have an application that
    requires an ODBC interface to communicate with the database.
    Applications that require ODBC to communicate with MySQL include
    ColdFusion, Microsoft Office, and Filemaker Pro.
  </p><p>
    <span class="bold"><strong>Key topics:</strong></span>
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        For help installing Connector/ODBC see
        <a href="connectors-apis.html#connector-odbc-installation" title="20.1.3. Connector/ODBC Installation">Section 20.1.3, “Connector/ODBC Installation”</a>.
      </p></li><li><p>
        For information on the configuration options, see
        <a href="connectors-apis.html#connector-odbc-configuration-connection-parameters" title="20.1.4.2. Connector/ODBC Connection Parameters">Section 20.1.4.2, “Connector/ODBC Connection Parameters”</a>.
      </p></li><li><p>
        For more information on connecting to a MySQL database from a
        Windows host using Connector/ODBC see
        <a href="connectors-apis.html#connector-odbc-examples-walkthrough" title="20.1.5.2. Step-by-step Guide to Connecting to a MySQL Database through
        Connector/ODBC">Section 20.1.5.2, “Step-by-step Guide to Connecting to a MySQL Database through
        Connector/ODBC”</a>.
      </p></li><li><p>
        If you want to use Microsoft Access as an interface to a MySQL
        database using Connector/ODBC see
        <a href="connectors-apis.html#connector-odbc-examples-tools-with-access" title="20.1.5.4. Using Connector/ODBC with Microsoft Access">Section 20.1.5.4, “Using Connector/ODBC with Microsoft Access”</a>.
      </p></li><li><p>
        General tips on using Connector/ODBC, including obtaining the
        last auto-increment ID see
        <a href="connectors-apis.html#connector-odbc-usagenotes-functionality" title="20.1.7.1. Connector/ODBC General Functionality">Section 20.1.7.1, “Connector/ODBC General Functionality”</a>.
      </p></li><li><p>
        For tips and common questions on using Connector/ODBC with
        specific application see
        <a href="connectors-apis.html#connector-odbc-usagenotes-apptips" title="20.1.7.2. Connector/ODBC Application Specific Tips">Section 20.1.7.2, “Connector/ODBC Application Specific Tips”</a>.
      </p></li><li><p>
        For a general list of Frequently Asked Questions see
        <a href="connectors-apis.html#connector-odbc-errors" title="20.1.7.3. Connector/ODBC Errors and Resolutions (FAQ)">Section 20.1.7.3, “Connector/ODBC Errors and Resolutions (FAQ)”</a>.
      </p></li><li><p>
        Additional support when using Connector/ODBC is available, see
        <a href="connectors-apis.html#connector-odbc-support" title="20.1.8. Connector/ODBC Support">Section 20.1.8, “Connector/ODBC Support”</a>.
      </p></li></ul></div><p class="mnmas-kb"><b>MySQL Enterprise</b>
      MySQL Enterprise subscribers will find more information about
      MySQL and ODBC in the Knowledge Base articles about
      <a href="https://kb.mysql.com/search.php?cat=search&amp;category=9" target="_top">
      ODBC</a>. Access to the MySQL Knowledge Base collection of
      articles is one of the advantages of subscribing to MySQL
      Enterprise. For more information, see
      <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-odbc-versions"></a>20.1.1. Connector/ODBC Versions</h3></div></div></div><p>
      There are currently two version of Connector/ODBC available:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Connector/ODBC 5.1, currently in GA status, is a partial
          rewrite of the of the 3.51 code base and is designed to work
          with all versions of MySQL from 4.1. Connector/ODBC 5.1 will
          be a complete implementation of the ODBC Core interface,plus
          more Level 1 and Level 2 functionality of the ODBC
          specification than that currently supported by Connector/ODBC
          3.51. See <a href="connectors-apis.html#connector-odbc-roadmap" title="20.1.2.1. Connector/ODBC Roadmap">Section 20.1.2.1, “Connector/ODBC Roadmap”</a>.
        </p><p>
          Connector/ODBC 5.1 also includes the following changes and
          improvements over the 3.51 release:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              Improved support on Windows 64-bit platforms.
            </p></li><li><p>
              Full Unicode support at the driver level. This includes
              support for the <code class="literal">SQL_WCHAR</code> datatype, and
              support for Unicode login, password and DSN
              configurations. For more information,. see
              <a href="http://msdn2.microsoft.com/en-us/library/ms716246.aspx" target="_top">Microsoft
              Knowledgebase Article #716246</a>.
            </p></li><li><p>
              Support for the <code class="literal">SQL_NUMERIC_STRUCT</code>
              datatype, which provides easier access to the precise
              definition of numeric values. For more information, see
              <a href="http://msdn2.microsoft.com/en-us/library/ms714556.aspx" target="_top">Microsoft
              Knowledgebase Article #714556</a>
            </p></li><li><p>
              Native Windows setup library. This replaces the Qt library
              based interface for configuring DSN information within the
              ODBC Data Sources application.
            </p></li><li><p>
              Support for the ODBC descriptor, which improves the
              handling and metadata of columns and parameter data. For
              more information, see
              <a href="http://msdn2.microsoft.com/en-us/library/ms716339.aspx" target="_top">Microsoft
              Knowledgebase Article #716339</a>.
            </p></li></ul></div></li><li><p>
          Connector/ODBC 3.51 is the current release of the 32-bit ODBC
          driver, also known as the MySQL ODBC 3.51 driver.
          Connector/ODBC 3.51 has support for ODBC 3.5x specification
          level 1 (complete core API + level 2 features) in order to
          continue to provide all functionality of ODBC for accessing
          MySQL.
        </p></li></ul></div><p>
      The manual for versions of Connector/ODBC older than 3.51 can be
      located in the corresponding binary or source distribution. Please
      note that versions of Connector/ODBC earlier than the 3.51
      revision were not fully compliant with the ODBC specification.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Development on Connector/ODBC 5.0 was stopped due to development
        issues. Connector/ODBC 5.1 is now the current development
        release.
      </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        From this section onward, the primary focus of this guide is the
        Connector/ODBC 3.51 and Connector/ODBC 5.1 drivers.
      </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Version numbers for MySQL products are formatted as X.X.X.
        However, Windows tools (Control Panel, properties display) may
        show the version numbers as XX.XX.XX. For example, the official
        MySQL formatted version number 5.0.9 may be displayed by Windows
        tools as 5.00.09. The two versions are the same; only the number
        display format is different.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-odbc-introduction"></a>20.1.2. Connector/ODBC Introduction</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-roadmap">20.1.2.1. Connector/ODBC Roadmap</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-general-information">20.1.2.2. General Information About ODBC and Connector/ODBC</a></span></dt></dl></div><p>
      ODBC (Open Database Connectivity) provides a way for client
      programs to access a wide range of databases or data sources. ODBC
      is a standardized API that allows connections to SQL database
      servers. It was developed according to the specifications of the
      SQL Access Group and defines a set of function calls, error codes,
      and data types that can be used to develop database-independent
      applications. ODBC usually is used when database independence or
      simultaneous access to different data sources is required.
    </p><p>
      For more information about ODBC, refer to
      <a href="http://support.microsoft.com/kb/110093" target="_top">http://support.microsoft.com/kb/110093</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-roadmap"></a>20.1.2.1. Connector/ODBC Roadmap</h4></div></div></div><p>
        Connector/ODBC 5.1 is currently in development and will be a
        complete implementation of the ODBC Core interface,plus more
        Level 1 and Level 2 functionality of the ODBC specification than
        that currently supported by Connector/ODBC 3.51.
      </p><p>
        The following functionality was added or changed as part of 5.1:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Add support for SQL_NUMERIC_STRUCT:
            <a href="http://msdn2.microsoft.com/en-us/library/ms714556.aspx" target="_top">MSDN
            Article 714556</a>.
          </p></li><li><p>
            Replace installer library with new implementation (from v5
            tree).
          </p></li><li><p>
            Implement native Windows setup library.
          </p></li><li><p>
            Implement SQLCancel() (<a href="http://bugs.mysql.com/15601" target="_top">Bug#15601</a>):
            <a href="http://msdn2.microsoft.com/en-us/library/ms714112.aspx" target="_top">MSDN
            Article 714112</a>.
          </p></li></ul></div><p>
        The following functionality will be added in a version after
        5.1:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Implement native Mac OS X setup library.
          </p></li><li><p>
            Replace OPTIONS flags with individual DSN settings (but
            support OPTIONS for backwards-compatibility).
          </p></li><li><p>
            Fix support for SQLBIGINT (<a href="http://bugs.mysql.com/28887" target="_top">Bug#28887</a>):
            <a href="http://msdn2.microsoft.com/en-us/library/ms714121.aspx" target="_top">MSDN
            Article 714121</a>.
          </p></li><li><p>
            Make diagnostics support standards-compliant:
            <a href="http://msdn2.microsoft.com/en-us/library/ms711021.aspx" target="_top">MSDN
            Article 711021</a>.
          </p></li><li><p>
            Add support for SQL_ATTR_METADATA_ID:
            <a href="http://msdn2.microsoft.com/en-us/library/ms716447.aspx" target="_top">MSDN
            Article 716447</a>.
          </p></li><li><p>
            Implement SQLBrowseConnect():
            <a href="http://msdn2.microsoft.com/en-us/library/ms714565.aspx" target="_top">MSDN
            Article 714565</a>,
            <a href="http://msdn2.microsoft.com/en-us/library/ms712446.aspx" target="_top">MSDN
            Article 712446</a>.
          </p></li><li><p>
            Implement arrays of parameters:
            <a href="http://msdn2.microsoft.com/en-us/library/ms711818.aspx" target="_top">MSDN
            Article 711818</a>.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-general-information"></a>20.1.2.2. General Information About ODBC and Connector/ODBC</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-architecture">20.1.2.2.1. Connector/ODBC Architecture</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-driver-manager">20.1.2.2.2. ODBC Driver Managers</a></span></dt></dl></div><p>
        Open Database Connectivity (ODBC) is a widely accepted
        application-programming interface (API) for database access. It
        is based on the Call-Level Interface (CLI) specifications from
        X/Open and ISO/IEC for database APIs and uses Structured Query
        Language (SQL) as its database access language.
      </p><p>
        A survey of ODBC functions supported by Connector/ODBC is given
        at <a href="connectors-apis.html#connector-odbc-reference-api" title="20.1.6.1. Connector/ODBC API Reference">Section 20.1.6.1, “Connector/ODBC API Reference”</a>. For general
        information about ODBC, see
        <a href="http://support.microsoft.com/kb/110093" target="_top">http://support.microsoft.com/kb/110093</a>.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-architecture"></a>20.1.2.2.1. Connector/ODBC Architecture</h5></div></div></div><p>
          The Connector/ODBC architecture is based on five components,
          as shown in the following diagram:
        </p><div class="mediaobject"><img src="images/myarchitecture.png" width="423" height="443" alt="Connector/ODBC Architecture"></div><div class="itemizedlist"><ul type="disc"><li><p>
              <span class="bold"><strong>Application:</strong></span>
            </p><p>
              The Application uses the ODBC API to access the data from
              the MySQL server. The ODBC API in turn uses the
              communicates with the Driver Manager. The Application
              communicates with the Driver Manager using the standard
              ODBC calls. The Application does not care where the data
              is stored, how it is stored, or even how the system is
              configured to access the data. It needs to know only the
              Data Source Name (DSN).
            </p><p>
              A number of tasks are common to all applications, no
              matter how they use ODBC. These tasks are:
            </p><div class="itemizedlist"><ul type="circle"><li><p>
                  Selecting the MySQL server and connecting to it
                </p></li><li><p>
                  Submitting SQL statements for execution
                </p></li><li><p>
                  Retrieving results (if any)
                </p></li><li><p>
                  Processing errors
                </p></li><li><p>
                  Committing or rolling back the transaction enclosing
                  the SQL statement
                </p></li><li><p>
                  Disconnecting from the MySQL server
                </p></li></ul></div><p>
              Because most data access work is done with SQL, the
              primary tasks for applications that use ODBC are
              submitting SQL statements and retrieving any results
              generated by those statements.
            </p></li><li><p>
              <span class="bold"><strong>Driver manager:</strong></span>
            </p><p>
              The Driver Manager is a library that manages communication
              between application and driver or drivers. It performs the
              following tasks:
            </p><div class="itemizedlist"><ul type="circle"><li><p>
                  Resolves Data Source Names (DSN). The DSN is a
                  configuration string that identifies a given database
                  driver, database, database host and optionally
                  authentication information that enables an ODBC
                  application to connect to a database using a
                  standardized reference.
                </p><p>
                  Because the database connectivity information is
                  identified by the DSN, any ODBC compliant application
                  can connect to the data source using the same DSN
                  reference. This eliminates the need to separately
                  configure each application that needs access to a
                  given database; instead you instruct the application
                  to use a pre-configured DSN.
                </p></li><li><p>
                  Loading and unloading of the driver required to access
                  a specific database as defined within the DSN. For
                  example, if you have configured a DSN that connects to
                  a MySQL database then the driver manager will load the
                  Connector/ODBC driver to enable the ODBC API to
                  communicate with the MySQL host.
                </p></li><li><p>
                  Processes ODBC function calls or passes them to the
                  driver for processing.
                </p></li></ul></div></li><li><p>
              <span class="bold"><strong>Connector/ODBC Driver:</strong></span>
            </p><p>
              The Connector/ODBC driver is a library that implements the
              functions supported by the ODBC API. It processes ODBC
              function calls, submits SQL requests to MySQL server, and
              returns results back to the application. If necessary, the
              driver modifies an application's request so that the
              request conforms to syntax supported by MySQL.
            </p></li><li><p>
              <span class="bold"><strong>DSN Configuration:</strong></span>
            </p><p>
              The ODBC configuration file stores the driver and database
              information required to connect to the server. It is used
              by the Driver Manager to determine which driver to be
              loaded according to the definition in the DSN. The driver
              uses this to read connection parameters based on the DSN
              specified. For more information,
              <a href="connectors-apis.html#connector-odbc-configuration" title="20.1.4. Connector/ODBC Configuration">Section 20.1.4, “Connector/ODBC Configuration”</a>.
            </p></li><li><p>
              <span class="bold"><strong>MySQL Server:</strong></span>
            </p><p>
              The MySQL database where the information is stored. The
              database is used as the source of the data (during
              queries) and the destination for data (during inserts and
              updates).
            </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-driver-manager"></a>20.1.2.2.2. ODBC Driver Managers</h5></div></div></div><p>
          An ODBC Driver Manager is a library that manages communication
          between the ODBC-aware application and any drivers. Its main
          functionality includes:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Resolving Data Source Names (DSN).
            </p></li><li><p>
              Driver loading and unloading.
            </p></li><li><p>
              Processing ODBC function calls or passing them to the
              driver.
            </p></li></ul></div><p>
          Both Windows and Mac OS X include ODBC driver managers with
          the operating system. Most ODBC Driver Manager implementations
          also include an administration application that makes the
          configuration of DSN and drivers easier. Examples and
          information on these managers, including Unix ODBC driver
          managers are listed below:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Microsoft Windows ODBC Driver Manager
              (<code class="filename">odbc32.dll</code>),
              <a href="http://support.microsoft.com/kb/110093" target="_top">http://support.microsoft.com/kb/110093</a>.
            </p></li><li><p>
              Mac OS X includes <code class="filename">ODBC Administrator</code>,
              a GUI application that provides a simpler configuration
              mechanism for the Unix iODBC Driver Manager. You can
              configure DSN and driver information either through ODBC
              Administrator or through the iODBC configuration files.
              This also means that you can test ODBC Administrator
              configurations using the <code class="filename">iodbctest</code>
              command. <a href="http://www.apple.com" target="_top">http://www.apple.com</a>.
            </p></li><li><p>
              <code class="literal">unixODBC</code> Driver Manager for Unix
              (<code class="filename">libodbc.so</code>). See
              <a href="http://www.unixodbc.org" target="_top">http://www.unixodbc.org</a>, for more
              information. The <code class="literal">unixODBC</code> Driver
              Manager includes the Connector/ODBC driver 3.51 in the
              installation package, starting with version
              <code class="literal">unixODBC</code> 2.1.2.
            </p></li><li><p>
              <code class="literal">iODBC</code> ODBC Driver Manager for Unix
              (<code class="filename">libiodbc.so</code>), see
              <a href="http://www.iodbc.org" target="_top">http://www.iodbc.org</a>, for more information.
            </p></li></ul></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-odbc-installation"></a>20.1.3. Connector/ODBC Installation</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation-binary-windows">20.1.3.1. Installing Connector/ODBC from a Binary Distribution on Windows</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation-binary-unix">20.1.3.2. Installing Connector/ODBC from a Binary Distribution on Unix</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation-binary-macosx">20.1.3.3. Installing Connector/ODBC from a Binary Distribution on Mac OS X</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation-source-windows">20.1.3.4. Installing Connector/ODBC from a Source Distribution on Windows</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation-source-unix">20.1.3.5. Installing Connector/ODBC from a Source Distribution on Unix</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation-source-development">20.1.3.6. Installing Connector/ODBC from the Development Source Tree</a></span></dt></dl></div><p>
      You can install the Connector/ODBC drivers using two different
      methods, a binary installation and a source installation. The
      binary installation is the easiest and most straightforward method
      of installation. Using the source installation methods should only
      be necessary on platforms where a binary installation package is
      not available, or in situations where you want to customize or
      modify the installation process or Connector/ODBC drivers before
      installation.
    </p><p>
      <span class="bold"><strong>Where to Get Connector/ODBC</strong></span>
    </p><p>
      Sun Microsystems, Inc distributes its MySQL products under the
      General Public License (GPL). You can get a copy of the latest
      version of Connector/ODBC binaries and sources from our Web site
      at <a href="http://dev.mysql.com/downloads/" target="_top">http://dev.mysql.com/downloads/</a>.
    </p><p>
      For more information about Connector/ODBC, visit
      <a href="http://www.mysql.com/products/myodbc/" target="_top">http://www.mysql.com/products/myodbc/</a>.
    </p><p>
      For more information about licensing, visit
      <a href="http://www.mysql.com/company/legal/licensing/" target="_top">http://www.mysql.com/company/legal/licensing/</a>.
    </p><p>
      <span class="bold"><strong>Supported Platforms</strong></span>
    </p><p>
      Connector/ODBC can be used on all major platforms supported by
      MySQL. You can install it on:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Windows 95, 98, Me, NT, 2000, XP, and 2003
        </p></li><li><p>
          All Unix-like Operating Systems, including: AIX, Amiga, BSDI,
          DEC, FreeBSD, HP-UX 10/11, Linux, NetBSD, OpenBSD, OS/2, SGI
          Irix, Solaris, SunOS, SCO OpenServer, SCO UnixWare, Tru64 Unix
        </p></li><li><p>
          Mac OS X and Mac OS X Server
        </p></li></ul></div><p>
      Using a binary distribution offers the most straightforward method
      for installing Connector/ODBC. If you want more control over the
      driver, the installation location and or to customize elements of
      the driver you will need to build and install from the source.
    </p><p>
      If a binary distribution is not available for a particular
      platform build the driver from the original source code. You can
      contribute the binaries you create to MySQL by sending a mail
      message to <code class="email">&lt;<a href="mailto:myodbc@lists.mysql.com">myodbc@lists.mysql.com</a>&gt;</code>, so that it
      becomes available for other users.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        On all non-Windows platforms except Mac OS X, the driver is
        built against <code class="literal">unixODBC</code> and is expecting a
        2-byte <code class="literal">SQLWCHAR</code>, not 4 bytes as
        <code class="literal">iODBC</code> is using. For this reason, the binaries
        are <span class="bold"><strong>only</strong></span> compatible with
        <code class="literal">unixODBC</code> and you will need to recompile the
        driver against <code class="literal">iODBC</code> if you wish to use them
        together. For further information see
        <a href="connectors-apis.html#connector-odbc-driver-manager" title="20.1.2.2.2. ODBC Driver Managers">Section 20.1.2.2.2, “ODBC Driver Managers”</a>.
      </p></div><p>
      For further instructions:
    </p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Platform</th><th>Binary</th><th>Source</th></tr></thead><tbody><tr><td>Windows</td><td><a href="connectors-apis.html#connector-odbc-installation-binary-windows" title="20.1.3.1. Installing Connector/ODBC from a Binary Distribution on Windows">Installation
              Instructions</a></td><td><a href="connectors-apis.html#connector-odbc-installation-source-windows" title="20.1.3.4. Installing Connector/ODBC from a Source Distribution on Windows">Build
              Instructions</a></td></tr><tr><td>Unix/Linux</td><td><a href="connectors-apis.html#connector-odbc-installation-binary-unix" title="20.1.3.2. Installing Connector/ODBC from a Binary Distribution on Unix">Installation
              Instructions</a></td><td><a href="connectors-apis.html#connector-odbc-installation-source-unix" title="20.1.3.5. Installing Connector/ODBC from a Source Distribution on Unix">Build
              Instructions</a></td></tr><tr><td>Mac OS X</td><td><a href="connectors-apis.html#connector-odbc-installation-binary-macosx" title="20.1.3.3. Installing Connector/ODBC from a Binary Distribution on Mac OS X">Installation
              Instructions</a></td><td> </td></tr></tbody></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-installation-binary-windows"></a>20.1.3.1. Installing Connector/ODBC from a Binary Distribution on Windows</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation-binary-windows-installer">20.1.3.1.1. Installing the Windows Connector/ODBC Driver using an installer</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation-binary-windows-dll">20.1.3.1.2. Installing the Windows Connector/ODBC Driver using the Zipped DLL
          package</a></span></dt></dl></div><p>
        Before installing the Connector/ODBC drivers on Windows you
        should ensure that your Microsoft Data Access Components (MDAC)
        are up to date. You can obtain the latest version from the
        <a href="http://support.microsoft.com/kb/110093" target="_top">Microsoft
        Data Access and Storage</a> Web site.
      </p><p>
        There are three available distribution types to use when
        installing for Windows. The contents in each case are identical,
        it is only the installation method which is different.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Zipped installer consists of a Zipped package containing a
            standalone installation application. To install from this
            package, you must unzip the installer, and then run the
            installation application. See
            <a href="connectors-apis.html#connector-odbc-installation-binary-windows-installer" title="20.1.3.1.1. Installing the Windows Connector/ODBC Driver using an installer">Section 20.1.3.1.1, “Installing the Windows Connector/ODBC Driver using an installer”</a>
            to complete the installation.
          </p></li><li><p>
            MSI installer, an installation file that can be used with
            the installer included in Windows 2000, Windows XP and
            Windows Server 2003. See
            <a href="connectors-apis.html#connector-odbc-installation-binary-windows-installer" title="20.1.3.1.1. Installing the Windows Connector/ODBC Driver using an installer">Section 20.1.3.1.1, “Installing the Windows Connector/ODBC Driver using an installer”</a>
            to complete the installation.
          </p></li><li><p>
            Zipped DLL package, containing the DLL files that need must
            be manually installed. See
            <a href="connectors-apis.html#connector-odbc-installation-binary-windows-dll" title="20.1.3.1.2. Installing the Windows Connector/ODBC Driver using the Zipped DLL
          package">Section 20.1.3.1.2, “Installing the Windows Connector/ODBC Driver using the Zipped DLL
          package”</a>
            to complete the installation.
          </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          An OLEDB/ODBC driver for Windows 64-bit is available from
          <a href="http://www.microsoft.com/downloads/details.aspx?FamilyID=000364db-5e8b-44a8-b9be-ca44d18b059b&amp;displaylang=en" target="_top">Microsoft
          Downloads</a>.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-installation-binary-windows-installer"></a>20.1.3.1.1. Installing the Windows Connector/ODBC Driver using an installer</h5></div></div></div><p>
          The installer packages offer a very simple method for
          installing the Connector/ODBC drivers. If you have downloaded
          the zipped installer then you must extract the installer
          application. The basic installation process is identical for
          both installers.
        </p><p>
          You should follow these steps to complete the installation:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Double click on the standalone installer that you
              extracted, or the MSI file you downloaded.
            </p></li><li><p>
              The MySQL Connector/ODBC 3.51 - Setup Wizard will start.
              Click the <span class="guibutton">Next</span> button to begin the
              installation process.
            </p><div class="mediaobject"><img src="images/myodbc-win-install-step1.png" width="505" height="387" alt="Connector/ODBC Windows Installer -
                Welcome"></div></li><li><p>
              You will need to choose the installation type. The Typical
              installation provides the standard files you will need to
              connect to a MySQL database using ODBC. The Complete
              option installs all the available files, including debug
              and utility components. It is recommended you choose one
              of these two options to complete the installation. If
              choose one of these methods, click
              <span class="guibutton">Next</span> and then proceed to step 5.
            </p><p>
              You may also choose a Custom installation, which enables
              you to select the individual components that you want to
              install. You have chosen this method, click
              <span class="guibutton">Next</span> and then proceed to step 4.
            </p><div class="mediaobject"><img src="images/myodbc-win-install-step2.png" width="505" height="387" alt="Connector/ODBC Windows Installer -
                Choosing a Setup type welcome"></div></li><li><p>
              If you have chosen a custom installation, use the pop-ups
              to select which components to install and then click
              <span class="guibutton">Next</span> to install the necessary
              files.
            </p><div class="mediaobject"><img src="images/myodbc-win-install-step3.png" width="506" height="387" alt="Connector/ODBC Windows Installer -
                Custom Installation welcome"></div></li><li><p>
              Once the files have copied to your machine, the
              installation is complete. Click
              <span class="guibutton">Finish</span> to exit the installer.
            </p><div class="mediaobject"><img src="images/myodbc-win-install-step4.png" width="505" height="387" alt="Connector/ODBC Windows Installer -
                Completion welcome"></div></li></ol></div><p>
          Now the installation is complete, you can continue to
          configure your ODBC connections using
          <a href="connectors-apis.html#connector-odbc-configuration" title="20.1.4. Connector/ODBC Configuration">Section 20.1.4, “Connector/ODBC Configuration”</a>.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-installation-binary-windows-dll"></a>20.1.3.1.2. Installing the Windows Connector/ODBC Driver using the Zipped DLL
          package</h5></div></div></div><p>
          If you have downloaded the Zipped DLL package then you must
          install the individual files required for Connector/ODBC
          operation manually. Once you have unzipped the installation
          files, you can either perform this operation by hand,
          executing each statement individually, or you can use the
          included Batch file to perform an installation to the default
          locations.
        </p><p>
          To install using the Batch file:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Unzip the Connector/ODBC Zipped DLL package.
            </p></li><li><p>
              Open a Command Prompt.
            </p></li><li><p>
              Change to the directory created when you unzipped the
              Connector/ODBC Zipped DLL package.
            </p></li><li><p>
              Run <code class="literal">Install.bat:</code>
            </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>Install.bat</code></strong></pre><p>
              This will copy the necessary files into the default
              location, and then register the Connector/ODBC driver with
              the Windows ODBC manager.
            </p></li></ol></div><p>
          If you want to copy the files to an alternative location - for
          example, to run or test different versions of the
          Connector/ODBC driver on the same machine, then you must copy
          the files by hand. It is however not recommended to install
          these files in a non-standard location. To copy the files by
          hand to the default installation location use the following
          steps:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Unzip the Connector/ODBC Zipped DLL package.
            </p></li><li><p>
              Open a Command Prompt.
            </p></li><li><p>
              Change to the directory created when you unzipped the
              Connector/ODBC Zipped DLL package.
            </p></li><li><p>
              Copy the library files to a suitable directory. The
              default is to copy them into the default Windows system
              directory <code class="literal">\Windows\System32</code>:
            </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>copy lib\myodbc3S.dll \Windows\System32</code></strong>
C:\&gt; <strong class="userinput"><code>copy lib\myodbc3S.lib \Windows\System32</code></strong>
C:\&gt; <strong class="userinput"><code>copy lib\myodbc3.dll \Windows\System32</code></strong>
C:\&gt; <strong class="userinput"><code>copy lib\myodbc3.lib \Windows\System32</code></strong></pre></li><li><p>
              Copy the Connector/ODBC tools. These must be placed into a
              directory that is in the system <code class="literal">PATH</code>.
              The default is to install these into the Windows system
              directory <code class="literal">\Windows\System32</code>:
            </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>copy bin\myodbc3i.exe \Windows\System32</code></strong>
C:\&gt; <strong class="userinput"><code>copy bin\myodbc3m.exe \Windows\System32</code></strong>
C:\&gt; <strong class="userinput"><code>copy bin\myodbc3c.exe \Windows\System32</code></strong></pre></li><li><p>
              Optionally copy the help files. For these files to be
              accessible through the help system, they must be installed
              in the Windows system directory:
            </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>copy doc\*.hlp \Windows\System32</code></strong></pre></li><li><p>
              Finally, you must register the Connector/ODBC driver with
              the ODBC manager:
            </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>myodbc3i -a -d -t"MySQL ODBC 3.51 Driver;\
  DRIVER=myodbc3.dll;SETUP=myodbc3S.dll"</code></strong></pre><p>
              You must change the references to the DLL files and
              command location in the above statement if you have not
              installed these files into the default location.
            </p></li></ol></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-installation-binary-unix"></a>20.1.3.2. Installing Connector/ODBC from a Binary Distribution on Unix</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation-binary-unix-tarball">20.1.3.2.1. Installing Connector/ODBC from a Binary Tarball Distribution</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation-binary-unix-rpm">20.1.3.2.2. Installing Connector/ODBC from an RPM Distribution</a></span></dt></dl></div><p>
        There are two methods available for installing Connector/ODBC on
        Unix from a binary distribution. For most Unix environments you
        will need to use the tarball distribution. For Linux systems,
        there is also an RPM distribution available.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          To install Connector/ODBC 5.1 on Unix you require unixODBC
          2.2.12 or later to be installed.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-installation-binary-unix-tarball"></a>20.1.3.2.1. Installing Connector/ODBC from a Binary Tarball Distribution</h5></div></div></div><p>
          To install the driver from a tarball distribution
          (<code class="filename">.tar.gz</code> file), download the latest
          version of the driver for your operating system and follow
          these steps that demonstrate the process using the Linux
          version of the tarball:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>su root</code></strong>
shell&gt; <strong class="userinput"><code>gunzip mysql-connector-odbc-3.51.11-i686-pc-linux.tar.gz</code></strong>
shell&gt; <strong class="userinput"><code>tar xvf mysql-connector-odbc-3.51.11-i686-pc-linux.tar</code></strong>
shell&gt; <strong class="userinput"><code>cd mysql-connector-odbc-3.51.11-i686-pc-linux</code></strong></pre><p>
          Read the installation instructions in the
          <code class="filename">INSTALL</code> file and execute these commands.
        </p><p>
          Then proceed on to
          <a href="connectors-apis.html#connector-odbc-configuration-dsn-unix" title="20.1.4.5. Configuring a Connector/ODBC DSN on Unix">Section 20.1.4.5, “Configuring a Connector/ODBC DSN on Unix”</a>, to
          configure the DSN for Connector/ODBC. For more information,
          refer to the <code class="filename">INSTALL</code> file that comes with
          your distribution.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-installation-binary-unix-rpm"></a>20.1.3.2.2. Installing Connector/ODBC from an RPM Distribution</h5></div></div></div><p>
          To install or upgrade Connector/ODBC from an RPM distribution
          on Linux, simply download the RPM distribution of the latest
          version of Connector/ODBC and follow the instructions below.
          Use <span><strong class="command">su root</strong></span> to become
          <code class="literal">root</code>, then install the RPM file.
        </p><p>
          If you are installing for the first time:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>su root</code></strong>
 shell&gt; <strong class="userinput"><code>rpm -ivh mysql-connector-odbc-3.51.12.i386.rpm</code></strong></pre><p>
          If the driver exists, upgrade it like this:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>su root</code></strong>
shell&gt; <strong class="userinput"><code>rpm -Uvh mysql-connector-odbc-3.51.12.i386.rpm</code></strong></pre><p>
          If there is any dependency error for MySQL client library,
          <code class="literal">libmysqlclient</code>, simply ignore it by
          supplying the <code class="option">--nodeps</code> option, and then make
          sure the MySQL client shared library is in the path or set
          through <code class="literal">LD_LIBRARY_PATH</code>.
        </p><p>
          This installs the driver libraries and related documents to
          <code class="filename">/usr/local/lib</code> and
          <code class="filename">/usr/share/doc/MyODBC</code>, respectively.
          Proceed onto
          <a href="connectors-apis.html#connector-odbc-configuration-dsn-unix" title="20.1.4.5. Configuring a Connector/ODBC DSN on Unix">Section 20.1.4.5, “Configuring a Connector/ODBC DSN on Unix”</a>.
        </p><p>
          To <span class="bold"><strong>uninstall</strong></span> the driver,
          become <code class="literal">root</code> and execute an
          <span><strong class="command">rpm</strong></span> command:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>su root</code></strong>
shell&gt; <strong class="userinput"><code>rpm -e mysql-connector-odbc</code></strong></pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-installation-binary-macosx"></a>20.1.3.3. Installing Connector/ODBC from a Binary Distribution on Mac OS X</h4></div></div></div><p>
        Mac OS X is based on the FreeBSD operating system, and you can
        normally use the MySQL network port for connecting to MySQL
        servers on other hosts. Installing the Connector/ODBC driver
        enables you to connect to MySQL databases on any platform
        through the ODBC interface. You should only need to install the
        Connector/ODBC driver when your application requires an ODBC
        interface. Applications that require or can use ODBC (and
        therefore the Connector/ODBC driver) include ColdFusion,
        Filemaker Pro, 4th Dimension and many other applications.
      </p><p>
        Mac OS X includes its own ODBC manager, based on the
        <code class="literal">iODBC</code> manager. Mac OS X includes an
        administration tool that provides easier administration of ODBC
        drivers and configuration, updating the underlying
        <code class="literal">iODBC</code> configuration files.
      </p><p>
        The method for installing Connector/ODBC on Mac OS X depends on
        the version on Connector/ODBC you are using. For Connector/ODBC
        3.51.14 and later, the package is provided as a compressed tar
        archive that you must manually install. For Connector/ODBC
        3.51.13 and earlier the software was provided on a compressed
        disk image (<code class="filename">.dmg</code>) file and included an
        installer.
      </p><p>
        In either case, the driver is designed to work with the iODBC
        driver manager included with Mac OS X.
      </p><p>
        To install Connector/ODBC 3.51.14 and later:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Download the installation file. Note that versions are
            available for both PowerPC and Intel platforms.
          </p></li><li><p>
            Extract the archive:
          </p><pre class="programlisting">shell&gt; tar zxf mysql-connector-odbc-<em class="replaceable"><code>3.51.16</code></em>-osx10.4-x86-32bit.tar.gz</pre></li><li><p>
            The directory created will contain two subdirectories,
            <code class="filename">lib</code> and <code class="filename">bin</code>. You
            need to copy these to a suitable location such as
            <code class="filename">/usr/local</code>:
          </p><pre class="programlisting">shell&gt; cp bin/* /usr/local/bin
shell&gt; cp lib/* /usr/local/lib</pre></li><li><p>
            Finally, you must register the driver with iODBC using the
            <span><strong class="command">myodbc3i</strong></span> tool you just installed:
          </p><pre class="programlisting">shell&gt; myodbc3i -a -d -t"MySQL ODBC 3.51 Driver;Driver=/usr/local/lib/libmyodbc3.so;Setup=/usr/local/lib/libmyodbc3S.so"</pre></li></ol></div><p>
        You can verify the installed drivers either by using the ODBC
        Administrator application or the <span><strong class="command">myodbc3i</strong></span>
        utility:
      </p><pre class="programlisting">shell&gt; myodbc3i -q -d</pre><p>
        To install Connector/ODBC 3.51.13 and earlier, follow these
        steps:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Download the file to your computer and double-click on the
            downloaded image file.
          </p></li><li><p>
            Within the disk image you will find an installer package
            (with the <code class="filename">.pkg</code> extension). Double click
            on this file to start the Mac OS X installer.
          </p></li><li><p>
            You will be presented with the installer welcome message.
            Click the <span class="guibutton">Continue</span> button to begin
            the installation process.
          </p><div class="mediaobject"><img src="images/myodbc-macosx-install-step1.png" width="632" height="452" alt="Connector/ODBC Mac OS X Installer -
              Installer welcome"></div></li><li><p>
            Please take the time to read the Important Information as it
            contains guidance on how to complete the installation
            process. Once you have read the notice and collected the
            necessary information, click
            <span class="guibutton">Continue</span>.
          </p><div class="mediaobject"><img src="images/myodbc-macosx-install-step2.png" width="633" height="456" alt="Connector/ODBC Mac OS X Installer -
              Important Information"></div></li><li><p>
            Connector/ODBC drivers are made available under the GNU
            General Public License. Please read the license if you are
            not familiar with it before continuing installation. Click
            <span class="guibutton">Continue</span> to approve the license (you
            will be asked to confirm that decision) and continue the
            installation.
          </p><div class="mediaobject"><img src="images/myodbc-macosx-install-step3.png" width="636" height="455" alt="Connector/ODBC Mac OS X Installer -
              License"></div></li><li><p>
            Choose a location to install the Connector/ODBC drivers and
            the ODBC Administrator application. You must install the
            files onto a drive with an operating system and you may be
            limited in the choices available. Select the drive you want
            to use, and then click <span class="guibutton">Continue</span>.
          </p><div class="mediaobject"><img src="images/myodbc-macosx-install-step4.png" width="637" height="457" alt="Connector/ODBC Mac OS X Installer -
              Choosing a destination"></div></li><li><p>
            The installer will automatically select the files that need
            to be installed on your machine. Click
            <span class="guibutton">Install</span> to continue. The installer
            will copy the necessary files to your machine. A progress
            bar will be shown indicating the installation progress.
          </p><div class="mediaobject"><img src="images/myodbc-macosx-install-step5.png" width="634" height="456" alt="Connector/ODBC Mac OS X Installer -
              Installation type"></div></li><li><p>
            When installation has been completed you will get a window
            like the one shown below. Click <span class="guibutton">Close</span>
            to close and quit the installer.
          </p><div class="mediaobject"><img src="images/myodbc-macosx-install-step6.png" width="637" height="459" alt="Connector/ODBC Mac OS X Installer -
              Installation complete"></div></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-installation-source-windows"></a>20.1.3.4. Installing Connector/ODBC from a Source Distribution on Windows</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation-source-windows-3-51-building">20.1.3.4.1. Building Connector/ODBC 3.51</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation-source-windows-3-51-testing">20.1.3.4.2. Testing</a></span></dt></dl></div><p>
        You should only need to install Connector/ODBC from source on
        Windows if you want to change or modify the source or
        installation. If you are unsure whether to install from source,
        please use the binary installation detailed in
        <a href="connectors-apis.html#connector-odbc-installation-binary-windows" title="20.1.3.1. Installing Connector/ODBC from a Binary Distribution on Windows">Section 20.1.3.1, “Installing Connector/ODBC from a Binary Distribution on Windows”</a>.
      </p><p>
        Installing Connector/ODBC from source on Windows requires a
        number of different tools and packages:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            MDAC, Microsoft Data Access SDK from
            <a href="http://support.microsoft.com/kb/110093" target="_top">http://support.microsoft.com/kb/110093</a>.
          </p></li><li><p>
            Suitable C compiler, such as Microsoft Visual C++ or the C
            compiler included with Microsoft Visual Studio.
          </p></li><li><p>
            Compatible <code class="literal">make</code> tool. Microsoft's
            <code class="literal">nmake</code> is used in the examples in this
            section.
          </p></li><li><p>
            MySQL client libraries and include files from MySQL 4.0.0 or
            higher. (Preferably MySQL 4.0.16 or higher). This is
            required because Connector/ODBC uses new calls and
            structures that exist only starting from this version of the
            library. To get the client libraries and include files,
            visit <a href="http://dev.mysql.com/downloads/" target="_top">http://dev.mysql.com/downloads/</a>.
          </p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-installation-source-windows-3-51-building"></a>20.1.3.4.1. Building Connector/ODBC 3.51</h5></div></div></div><p>
          Connector/ODBC source distributions include
          <code class="filename">Makefiles</code> that require the
          <span><strong class="command">nmake</strong></span> or other <code class="literal">make</code>
          utility. In the distribution, you can find
          <code class="filename">Makefile</code> for building the release version
          and <code class="filename">Makefile_debug</code> for building debugging
          versions of the driver libraries and DLLs.
        </p><p>
          To build the driver, use this procedure:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Download and extract the sources to a folder, then change
              directory into that folder. The following command assumes
              the folder is named <code class="filename">myodbc3-src</code>:
            </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>cd myodbc3-src</code></strong>
</pre></li><li><p>
              Edit <code class="filename">Makefile</code> to specify the correct
              path for the MySQL client libraries and header files. Then
              use the following commands to build and install the
              release version:
            </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>nmake -f Makefile</code></strong>
C:\&gt; <strong class="userinput"><code>nmake -f Makefile install</code></strong>
</pre><p>
              <span><strong class="command">nmake -f Makefile</strong></span> builds the release
              version of the driver and places the binaries in
              subdirectory called <code class="filename">Release</code>.
            </p><p>
              <span><strong class="command">nmake -f Makefile install</strong></span> installs
              (copies) the driver DLLs and libraries
              (<code class="filename">myodbc3.dll</code>,
              <code class="filename">myodbc3.lib</code>) to your system
              directory.
            </p></li><li><p>
              To build the debug version, use
              <code class="filename">Makefile_Debug</code> rather than
              <code class="filename">Makefile</code>, as shown below:
            </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>nmake -f Makefile_debug</code></strong>
C:\&gt; <strong class="userinput"><code>nmake -f Makefile_debug install</code></strong>
</pre></li><li><p>
              You can clean and rebuild the driver by using:
            </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>nmake -f Makefile clean</code></strong>
C:\&gt; <strong class="userinput"><code>nmake -f Makefile install</code></strong>
</pre></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><div class="itemizedlist"><ul type="disc"><li><p>
                Make sure to specify the correct MySQL client libraries
                and header files path in the Makefiles (set the
                <code class="literal">MYSQL_LIB_PATH</code> and
                <code class="literal">MYSQL_INCLUDE_PATH</code> variables). The
                default header file path is assumed to be
                <code class="filename">C:\mysql\include</code>. The default
                library path is assumed to be
                <code class="filename">C:\mysql\lib\opt</code> for release DLLs
                and <code class="filename">C:\mysql\lib\debug</code> for debug
                versions.
              </p></li><li><p>
                For the complete usage of <span><strong class="command">nmake</strong></span>,
                visit
                <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dv_vcce4/html/evgrfRunningNMAKE.asp" target="_top">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dv_vcce4/html/evgrfRunningNMAKE.asp</a>.
              </p></li><li><p>
                If you are using the Subversion tree for compiling, all
                Windows-specific <code class="filename">Makefiles</code> are
                named as <code class="filename">Win_Makefile*</code>.
              </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-installation-source-windows-3-51-testing"></a>20.1.3.4.2. Testing</h5></div></div></div><p>
          After the driver libraries are copied/installed to the system
          directory, you can test whether the libraries are properly
          built by using the samples provided in the
          <code class="filename">samples</code> subdirectory:
        </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>cd samples</code></strong>
C:\&gt; <strong class="userinput"><code>nmake -f Makefile all</code></strong>
</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-installation-source-unix"></a>20.1.3.5. Installing Connector/ODBC from a Source Distribution on Unix</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation-source-unix-configure-options">20.1.3.5.1. Typical <span><strong class="command">configure</strong></span> Options</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation-source-unix-otheroptions">20.1.3.5.2. Additional configure Options</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation-source-unix-building">20.1.3.5.3. Building and Compilation</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation-source-unix-shared-libraries">20.1.3.5.4. Building Shared Libraries</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation-source-unix-installing">20.1.3.5.5. Installing Driver Libraries</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation-source-unix-testing">20.1.3.5.6. Testing Connector/ODBC on Unix</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation-source-unix-macosx">20.1.3.5.7. Building Connector/ODBC from Source on Mac OS X</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation-source-unix-hpux">20.1.3.5.8. Building Connector/ODBC from Source on HP-UX</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-installation-source-unix-aix">20.1.3.5.9. Building Connector/ODBC from Source on AIX</a></span></dt></dl></div><p>
        You need the following tools to build MySQL from source on Unix:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            A working ANSI C++ compiler. <span><strong class="command">gcc</strong></span> 2.95.2
            or later, SGI C++, and SunPro C++ are some of the compilers
            that are known to work.
          </p></li><li><p>
            A good <span><strong class="command">make</strong></span> program. GNU
            <span><strong class="command">make</strong></span> is always recommended and is
            sometimes required.
          </p></li><li><p>
            MySQL client libraries and include files from MySQL 4.0.0 or
            higher. (Preferably MySQL 4.0.16 or higher). This is
            required because Connector/ODBC uses new calls and
            structures that exist only starting from this version of the
            library. To get the client libraries and include files,
            visit <a href="http://dev.mysql.com/downloads/" target="_top">http://dev.mysql.com/downloads/</a>.
          </p><p>
            If you have built your own MySQL server and/or client
            libraries from source then you must have used the
            <a href="installing.html#option_configure_enable-thread-safe-client"><code class="option">--enable-thread-safe-client</code></a>
            option to <code class="literal">configure</code> when the libraries
            were built.
          </p><p>
            You should also ensure that the
            <code class="literal">libmysqlclient</code> library were built and
            installed as a shared library.
          </p></li><li><p>
            A compatible ODBC manager must be installed. Connector/ODBC
            is known to work with the <code class="literal">iODBC</code> and
            <code class="literal">unixODBC</code> managers. See
            <a href="connectors-apis.html#connector-odbc-driver-manager" title="20.1.2.2.2. ODBC Driver Managers">Section 20.1.2.2.2, “ODBC Driver Managers”</a>, for more
            information.
          </p></li><li><p>
            If you are using a character set that isn't compiled into
            the MySQL client library then you need to install the MySQL
            character definitions from the <code class="filename">charsets</code>
            directory into <em class="replaceable"><code>SHAREDIR</code></em> (by
            default,
            <code class="filename">/usr/local/mysql/share/mysql/charsets</code>).
            These should be in place if you have installed the MySQL
            server on the same machine. See <a href="internationalization-localization.html#charset" title="9.1. Character Set Support">Section 9.1, “Character Set Support”</a>,
            for more information on character set support.
          </p></li></ul></div><p>
        Once you have all the required files, unpack the source files to
        a separate directory, you then have to run
        <span><strong class="command">configure</strong></span> and build the library using
        <span><strong class="command">make</strong></span>.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-installation-source-unix-configure-options"></a>20.1.3.5.1. Typical <span><strong class="command">configure</strong></span> Options</h5></div></div></div><p>
          The <span><strong class="command">configure</strong></span> script gives you a great deal
          of control over how you configure your Connector/ODBC build.
          Typically you do this using options on the
          <span><strong class="command">configure</strong></span> command line. You can also affect
          <span><strong class="command">configure</strong></span> using certain environment
          variables. For a list of options and environment variables
          supported by <span><strong class="command">configure</strong></span>, run this command:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./configure --help</code></strong>
</pre><p>
          Some of the more commonly used <span><strong class="command">configure</strong></span>
          options are described here:
        </p><div class="orderedlist"><ol type="1"><li><p>
              To compile Connector/ODBC, you need to supply the MySQL
              client include and library files path using the
              <code class="option">--with-mysql-path=<em class="replaceable"><code>DIR</code></em></code>
              option, where <em class="replaceable"><code>DIR</code></em> is the
              directory where MySQL is installed.
            </p><p>
              MySQL compile options can be determined by running
              <code class="literal"><em class="replaceable"><code>DIR</code></em>/bin/mysql_config</code>.
            </p></li><li><p>
              Supply the standard header and library files path for your
              ODBC Driver Manager (<code class="literal">iODBC</code> or
              <code class="literal">unixODBC</code>).
            </p><div class="itemizedlist"><ul type="disc"><li><p>
                  If you are using <code class="literal">iODBC</code> and
                  <code class="literal">iODBC</code> is not installed in its
                  default location (<code class="filename">/usr/local</code>),
                  you might have to use the
                  <code class="option">--with-iodbc=<em class="replaceable"><code>DIR</code></em></code>
                  option, where <em class="replaceable"><code>DIR</code></em> is the
                  directory where <code class="literal">iODBC</code> is installed.
                </p><p>
                  If the <code class="literal">iODBC</code> headers do not reside
                  in
                  <code class="filename"><em class="replaceable"><code>DIR</code></em>/include</code>,
                  you can use the
                  <code class="option">--with-iodbc-includes=<em class="replaceable"><code>INCDIR</code></em></code>
                  option to specify their location.
                </p><p>
                  The applies to libraries. If they are not in
                  <code class="filename"><em class="replaceable"><code>DIR</code></em>/lib</code>,
                  you can use the
                  <code class="option">--with-iodbc-libs=<em class="replaceable"><code>LIBDIR</code></em></code>
                  option.
                </p></li><li><p>
                  If you are using <code class="literal">unixODBC</code>, use the
                  <code class="option">--with-unixODBC=<em class="replaceable"><code>DIR</code></em></code>
                  option (case sensitive) to make
                  <span><strong class="command">configure</strong></span> look for
                  <code class="literal">unixODBC</code> instead of
                  <code class="literal">iODBC</code> by default,
                  <em class="replaceable"><code>DIR</code></em> is the directory where
                  <code class="literal">unixODBC</code> is installed.
                </p><p>
                  If the <code class="literal">unixODBC</code> headers and
                  libraries aren't located in
                  <code class="filename"><em class="replaceable"><code>DIR</code></em>/include</code>
                  and
                  <code class="filename"><em class="replaceable"><code>DIR</code></em>/lib</code>,
                  use the
                  <code class="option">--with-unixODBC-includes=<em class="replaceable"><code>INCDIR</code></em></code>
                  and
                  <code class="option">--with-unixODBC-libs=<em class="replaceable"><code>LIBDIR</code></em></code>
                  options.
                </p></li></ul></div></li><li><p>
              You might want to specify an installation prefix other
              than <code class="filename">/usr/local</code>. For example, to
              install the Connector/ODBC drivers in
              <code class="filename">/usr/local/odbc/lib</code>, use the
              <code class="option">--prefix=/usr/local/odbc</code> option.
            </p></li></ol></div><p>
          The final configuration command looks something like this:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./configure --prefix=/usr/local \</code></strong>
         <strong class="userinput"><code>--with-iodbc=/usr/local \</code></strong>
         <strong class="userinput"><code>--with-mysql-path=/usr/local/mysql</code></strong>
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-installation-source-unix-otheroptions"></a>20.1.3.5.2. Additional configure Options</h5></div></div></div><p>
          There are a number of other options that you need, or want, to
          set when configuring the Connector/ODBC driver before it is
          built.
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              To link the driver with MySQL thread safe client libraries
              <code class="filename">libmysqlclient_r.so</code> or
              <code class="filename">libmysqlclient_r.a</code>, you must specify
              the following <span><strong class="command">configure</strong></span> option:
            </p><pre class="programlisting">--enable-thread-safe
</pre><p>
              and can be disabled (default) using
            </p><pre class="programlisting">--disable-thread-safe
</pre><p>
              This option enables the building of the driver thread-safe
              library <code class="filename">libmyodbc3_r.so</code> from by
              linking with MySQL thread-safe client library
              <code class="filename">libmysqlclient_r.so</code> (The extensions
              are OS dependent).
            </p><p>
              If the compilation with the thread-safe option fails, it
              may be because the correct thread-libraries on the system
              could not be located. You should set the value of
              <code class="literal">LIBS</code> to point to the correct thread
              library for your system.
            </p><pre class="programlisting">LIBS="-lpthread" ./configure ..
</pre></li><li><p>
              You can enable or disable the shared and static versions
              of Connector/ODBC using these options:
            </p><pre class="programlisting">--enable-shared[=yes/no]
--disable-shared
--enable-static[=yes/no]
--disable-static
</pre></li><li><p>
              By default, all the binary distributions are built as
              non-debugging versions (configured with
              <code class="option">--without-debug</code>).
            </p><p>
              To enable debugging information, build the driver from
              source distribution and use the
              <a href="installing.html#option_configure_with-debug"><code class="option">--with-debug</code></a> option when
              you run <span><strong class="command">configure</strong></span>.
            </p></li><li><p>
              This option is available only for source trees that have
              been obtained from the Subversion repository. This option
              does not apply to the packaged source distributions.
            </p><p>
              By default, the driver is built with the
              <code class="option">--without-docs</code> option. If you would like
              the documentation to be built, then execute
              <span><strong class="command">configure</strong></span> with:
            </p><pre class="programlisting">--with-docs
</pre></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-installation-source-unix-building"></a>20.1.3.5.3. Building and Compilation</h5></div></div></div><p>
          To build the driver libraries, you have to just execute
          <span><strong class="command">make</strong></span>.
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>make</code></strong>
</pre><p>
          If any errors occur, correct them and continue the build
          process. If you aren't able to build, then send a detailed
          email to <code class="email">&lt;<a href="mailto:myodbc@lists.mysql.com">myodbc@lists.mysql.com</a>&gt;</code> for further
          assistance.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-installation-source-unix-shared-libraries"></a>20.1.3.5.4. Building Shared Libraries</h5></div></div></div><p>
          On most platforms, MySQL does not build or support
          <code class="filename">.so</code> (shared) client libraries by default.
          This is based on our experience of problems when building
          shared libraries.
        </p><p>
          In cases like this, you have to download the MySQL
          distribution and configure it with these options:
        </p><pre class="programlisting">--without-server --enable-shared
</pre><p>
          To build shared driver libraries, you must specify the
          <code class="option">--enable-shared</code> option for
          <span><strong class="command">configure</strong></span>. By default,
          <span><strong class="command">configure</strong></span> does not enable this option.
        </p><p>
          If you have configured with the
          <code class="option">--disable-shared</code> option, you can build the
          <code class="filename">.so</code> file from the static libraries using
          the following commands:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd mysql-connector-odbc-3.51.01</code></strong>
shell&gt; <strong class="userinput"><code>make</code></strong>
shell&gt; <strong class="userinput"><code>cd driver</code></strong>
shell&gt; <strong class="userinput"><code>CC=/usr/bin/gcc \</code></strong>
          <strong class="userinput"><code>$CC -bundle -flat_namespace -undefined error \</code></strong>
          <strong class="userinput"><code>-o .libs/libmyodbc3-3.51.01.so \</code></strong>
          <strong class="userinput"><code>catalog.o connect.o cursor.o dll.o error.o execute.o \</code></strong>
          <strong class="userinput"><code>handle.o info.o misc.o myodbc3.o options.o prepare.o \</code></strong>
          <strong class="userinput"><code>results.o transact.o utility.o \</code></strong>
          <strong class="userinput"><code>-L/usr/local/mysql/lib/mysql/ \</code></strong>
          <strong class="userinput"><code>-L/usr/local/iodbc/lib/ \</code></strong>
          <strong class="userinput"><code>-lz -lc -lmysqlclient -liodbcinst</code></strong>
</pre><p>
          Make sure to change <code class="option">-liodbcinst</code> to
          <code class="option">-lodbcinst</code> if you are using
          <code class="literal">unixODBC</code> instead of
          <code class="literal">iODBC</code>, and configure the library paths
          accordingly.
        </p><p>
          This builds and places the
          <code class="filename">libmyodbc3-3.51.01.so</code> file in the
          <code class="filename">.libs</code> directory. Copy this file to the
          Connector/ODBC library installation directory
          (<code class="filename">/usr/local/lib</code> (or the
          <code class="filename">lib</code> directory under the installation
          directory that you supplied with the
          <a href="installing.html#option_configure_prefix"><code class="option">--prefix</code></a>).
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd .libs</code></strong>
shell&gt; <strong class="userinput"><code>cp libmyodbc3-3.51.01.so /usr/local/lib</code></strong>
shell&gt; <strong class="userinput"><code>cd /usr/local/lib</code></strong>
shell&gt; <strong class="userinput"><code>ln -s libmyodbc3-3.51.01.so libmyodbc3.so</code></strong>
</pre><p>
          To build the thread-safe driver library:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>CC=/usr/bin/gcc \</code></strong>
          <strong class="userinput"><code>$CC -bundle -flat_namespace -undefined error</code></strong>
          <strong class="userinput"><code>-o .libs/libmyodbc3_r-3.51.01.so</code></strong>
          <strong class="userinput"><code>catalog.o connect.o cursor.o dll.o error.o execute.o</code></strong>
          <strong class="userinput"><code>handle.o info.o misc.o myodbc3.o options.o prepare.o</code></strong>
          <strong class="userinput"><code>results.o transact.o utility.o</code></strong>
          <strong class="userinput"><code>-L/usr/local/mysql/lib/mysql/</code></strong>
          <strong class="userinput"><code>-L/usr/local/iodbc/lib/</code></strong>
          <strong class="userinput"><code>-lz -lc -lmysqlclient_r -liodbcinst</code></strong>
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-installation-source-unix-installing"></a>20.1.3.5.5. Installing Driver Libraries</h5></div></div></div><p>
          To install the driver libraries, execute the following
          command:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>make install</code></strong>
</pre><p>
          That command installs one of the following sets of libraries:
        </p><p>
          For Connector/ODBC 3.51:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              <code class="filename">libmyodbc3.so</code>
            </p></li><li><p>
              <code class="filename">libmyodbc3-3.51.01.so</code>, where 3.51.01
              is the version of the driver
            </p></li><li><p>
              <code class="filename">libmyodbc3.a</code>
            </p></li></ul></div><p>
          For thread-safe Connector/ODBC 3.51:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              <code class="filename">libmyodbc3_r.so</code>
            </p></li><li><p>
              <code class="filename">libmyodbc3-3_r.51.01.so</code>
            </p></li><li><p>
              <code class="filename">libmyodbc3_r.a</code>
            </p></li></ul></div><p>
          For more information on build process, refer to the
          <code class="filename">INSTALL</code> file that comes with the source
          distribution. Note that if you are trying to use the
          <span><strong class="command">make</strong></span> from Sun, you may end up with errors.
          On the other hand, GNU <span><strong class="command">gmake</strong></span> should work
          fine on all platforms.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-installation-source-unix-testing"></a>20.1.3.5.6. Testing Connector/ODBC on Unix</h5></div></div></div><p>
          To run the basic samples provided in the distribution with the
          libraries that you built, use the following command:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>make test</code></strong>
</pre><p>
          Before running the tests, create the DSN 'myodbc3' in
          <code class="filename">odbc.ini</code> and set the environment variable
          <code class="literal">ODBCINI</code> to the correct
          <code class="filename">odbc.ini</code> file; and MySQL server is
          running. You can find a sample <code class="filename">odbc.ini</code>
          with the driver distribution.
        </p><p>
          You can even modify the
          <code class="filename">samples/run-samples</code> script to pass the
          desired DSN, UID, and PASSWORD values as the command-line
          arguments to each sample.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-installation-source-unix-macosx"></a>20.1.3.5.7. Building Connector/ODBC from Source on Mac OS X</h5></div></div></div><p>
          To build the driver on Mac OS X (Darwin), make use of the
          following <span><strong class="command">configure</strong></span> example:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./configure --prefix=/usr/local</code></strong>
          <strong class="userinput"><code>--with-unixODBC=/usr/local</code></strong>
          <strong class="userinput"><code>--with-mysql-path=/usr/local/mysql</code></strong>
          <strong class="userinput"><code>--disable-shared</code></strong>
          <strong class="userinput"><code>--enable-gui=no</code></strong>
          <strong class="userinput"><code>--host=powerpc-apple</code></strong>
</pre><p>
          The command assumes that the <code class="literal">unixODBC</code> and
          MySQL are installed in the default locations. If not,
          configure accordingly.
        </p><p>
          On Mac OS X, <code class="option">--enable-shared</code> builds
          <code class="filename">.dylib</code> files by default. You can build
          <code class="filename">.so</code> files like this:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>make</code></strong>
shell&gt; <strong class="userinput"><code>cd driver</code></strong>
shell&gt; <strong class="userinput"><code>CC=/usr/bin/gcc \</code></strong>
          <strong class="userinput"><code>$CC -bundle -flat_namespace -undefined error</code></strong>
          <strong class="userinput"><code>-o .libs/libmyodbc3-3.51.01.so *.o</code></strong>
          <strong class="userinput"><code>-L/usr/local/mysql/lib/</code></strong>
          <strong class="userinput"><code>-L/usr/local/iodbc/lib</code></strong>
          <strong class="userinput"><code>-liodbcinst -lmysqlclient -lz -lc</code></strong>
</pre><p>
          To build the thread-safe driver library:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>CC=/usr/bin/gcc \</code></strong>
          <strong class="userinput"><code>$CC -bundle -flat_namespace -undefined error</code></strong>
          <strong class="userinput"><code>-o .libs/libmyodbc3-3.51.01.so *.o</code></strong>
          <strong class="userinput"><code>-L/usr/local/mysql/lib/</code></strong>
          <strong class="userinput"><code>-L/usr/local/iodbc/lib</code></strong>
          <strong class="userinput"><code>-liodbcinst -lmysqlclienti_r -lz -lc -lpthread</code></strong>
</pre><p>
          Make sure to change the <code class="option">-liodbcinst</code> to
          <code class="option">-lodbcinst</code> in case of using
          <code class="literal">unixODBC</code> instead of
          <code class="literal">iODBC</code> and configure the libraries path
          accordingly.
        </p><p>
          In Apple's version of GCC, both <span><strong class="command">cc</strong></span> and
          <span><strong class="command">gcc</strong></span> are actually symbolic links to
          <span><strong class="command">gcc3</strong></span>.
        </p><p>
          Copy this library to the <code class="filename">$prefix/lib</code>
          directory and symlink to <code class="filename">libmyodbc3.so</code>.
        </p><p>
          You can cross-check the output shared-library properties using
          this command:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>otool -LD .libs/libmyodbc3-3.51.01.so</code></strong>
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-installation-source-unix-hpux"></a>20.1.3.5.8. Building Connector/ODBC from Source on HP-UX</h5></div></div></div><p>
          To build the driver on HP-UX 10.x or 11.x, make use of the
          following <span><strong class="command">configure</strong></span> example:
        </p><p>
          If using <span><strong class="command">cc</strong></span>:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>CC="cc" \</code></strong>
          <strong class="userinput"><code>CFLAGS="+z" \</code></strong>
          <strong class="userinput"><code>LDFLAGS="-Wl,+b:-Wl,+s" \</code></strong>
          <strong class="userinput"><code>./configure --prefix=/usr/local</code></strong>
          <strong class="userinput"><code>--with-unixodbc=/usr/local</code></strong>
          <strong class="userinput"><code>--with-mysql-path=/usr/local/mysql/lib/mysql</code></strong>
          <strong class="userinput"><code>--enable-shared</code></strong>
          <strong class="userinput"><code>--enable-thread-safe</code></strong>
</pre><p>
          If using <span><strong class="command">gcc</strong></span>:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>CC="gcc" \</code></strong>
          <strong class="userinput"><code>LDFLAGS="-Wl,+b:-Wl,+s" \</code></strong>
          <strong class="userinput"><code>./configure --prefix=/usr/local</code></strong>
          <strong class="userinput"><code>--with-unixodbc=/usr/local</code></strong>
          <strong class="userinput"><code>--with-mysql-path=/usr/local/mysql</code></strong>
          <strong class="userinput"><code>--enable-shared</code></strong>
          <strong class="userinput"><code>--enable-thread-safe</code></strong>
</pre><p>
          Once the driver is built, cross-check its attributes using
          <span><strong class="command">chatr .libs/libmyodbc3.sl</strong></span> to determine
          whether you need to have set the MySQL client library path
          using the <code class="literal">SHLIB_PATH</code> environment variable.
          For static versions, ignore all shared-library options and run
          <span><strong class="command">configure</strong></span> with the
          <code class="option">--disable-shared</code> option.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-installation-source-unix-aix"></a>20.1.3.5.9. Building Connector/ODBC from Source on AIX</h5></div></div></div><p>
          To build the driver on AIX, make use of the following
          <span><strong class="command">configure</strong></span> example:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./configure --prefix=/usr/local</code></strong>
          <strong class="userinput"><code>--with-unixodbc=/usr/local</code></strong>
          <strong class="userinput"><code>--with-mysql-path=/usr/local/mysql</code></strong>
          <strong class="userinput"><code>--disable-shared</code></strong>
          <strong class="userinput"><code>--enable-thread-safe</code></strong>
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            For more information about how to build and set up the
            static and shared libraries across the different platforms
            refer to '
            <a href="http://www.fortran-2000.com/ArnaudRecipes/sharedlib.html" target="_top">Using
            static and shared libraries across platforms</a>'.
          </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-installation-source-development"></a>20.1.3.6. Installing Connector/ODBC from the Development Source Tree</h4></div></div></div><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>
          You should read this section only if you are interested in
          helping us test our new code. If you just want to get MySQL
          Connector/ODBC up and running on your system, you should use a
          standard release distribution.
        </p></div><p>
        To be able to access the Connector/ODBC source tree, you must
        have Subversion installed. Subversion is freely available from
        <a href="http://subversion.tigris.org/" target="_top">http://subversion.tigris.org/</a>.
      </p><p>
        To build from the source trees, you need the following tools:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            autoconf 2.52 (or newer)
          </p></li><li><p>
            automake 1.4 (or newer)
          </p></li><li><p>
            libtool 1.4 (or newer)
          </p></li><li><p>
            m4
          </p></li></ul></div><p>
        The most recent development source tree is available from our
        public Subversion trees at
        <a href="http://dev.mysql.com/tech-resources/sources.html" target="_top">http://dev.mysql.com/tech-resources/sources.html</a>.
      </p><p>
        To checkout out the Connector/ODBC sources, change to the
        directory where you want the copy of the Connector/ODBC tree to
        be stored, then use the following command:
      </p><pre class="programlisting">shell&gt; svn co http://svn.mysql.com/svnpublic/connector-odbc3</pre><p>
        You should now have a copy of the entire Connector/ODBC source
        tree in the directory <code class="filename">connector-odbc3</code>. To
        build from this source tree on Unix or Linux follow these steps:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd connector-odbc3</code></strong>
shell&gt; <strong class="userinput"><code>aclocal</code></strong>
shell&gt; <strong class="userinput"><code>autoheader</code></strong>
shell&gt; <strong class="userinput"><code>autoconf</code></strong>
shell&gt; <strong class="userinput"><code>automake;</code></strong>
shell&gt; <strong class="userinput"><code>./configure  # Add your favorite options here</code></strong>
shell&gt; <strong class="userinput"><code>make</code></strong>
</pre><p>
        For more information on how to build, refer to the
        <code class="filename">INSTALL</code> file located in the same directory.
        For more information on options to <span><strong class="command">configure</strong></span>,
        see
        <a href="connectors-apis.html#connector-odbc-installation-source-unix-configure-options" title="20.1.3.5.1. Typical configure Options">Section 20.1.3.5.1, “Typical <span><strong class="command">configure</strong></span> Options”</a>
      </p><p>
        When the build is done, run <span><strong class="command">make install</strong></span> to
        install the Connector/ODBC 3.51 driver on your system.
      </p><p>
        If you have gotten to the <span><strong class="command">make</strong></span> stage and the
        distribution does not compile, please report it to
        <code class="email">&lt;<a href="mailto:myodbc@lists.mysql.com">myodbc@lists.mysql.com</a>&gt;</code>.
      </p><p>
        On Windows, make use of Windows Makefiles
        <code class="filename">WIN-Makefile</code> and
        <code class="filename">WIN-Makefile_debug</code> in building the driver.
        For more information, see
        <a href="connectors-apis.html#connector-odbc-installation-source-windows" title="20.1.3.4. Installing Connector/ODBC from a Source Distribution on Windows">Section 20.1.3.4, “Installing Connector/ODBC from a Source Distribution on Windows”</a>.
      </p><p>
        After the initial checkout operation to get the source tree, you
        should run <span><strong class="command">svn update</strong></span> periodically update
        your source according to the latest version.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-odbc-configuration"></a>20.1.4. Connector/ODBC Configuration</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-configuration-dsn">20.1.4.1. Data Source Names</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-configuration-connection-parameters">20.1.4.2. Connector/ODBC Connection Parameters</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-configuration-dsn-windows">20.1.4.3. Configuring a Connector/ODBC DSN on Windows</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-configuration-dsn-macosx">20.1.4.4. Configuring a Connector/ODBC DSN on Mac OS X</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-configuration-dsn-unix">20.1.4.5. Configuring a Connector/ODBC DSN on Unix</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-configuration-connection-without-dsn">20.1.4.6. Connecting Without a Predefined DSN</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-configuration-connection-pooling">20.1.4.7. ODBC Connection Pooling</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-configuration-trace">20.1.4.8. Getting an ODBC Trace File</a></span></dt></dl></div><p>
      Before you connect to a MySQL database using the Connector/ODBC
      driver you must configure an ODBC <em class="firstterm">Data Source
      Name</em>. The DSN associates the various configuration
      parameters required to communicate with a database to a specific
      name. You use the DSN in an application to communicate with the
      database, rather than specifying individual parameters within the
      application itself. DSN information can be user specific, system
      specific, or provided in a special file. ODBC data source names
      are configured in different ways, depending on your platform and
      ODBC driver.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-configuration-dsn"></a>20.1.4.1. Data Source Names</h4></div></div></div><p>
        A Data Source Name associates the configuration parameters for
        communicating with a specific database. Generally a DSN consists
        of the following parameters:
      </p><div class="itemizedlist"><ul type="disc"><li>Name</li><li>Host Name</li><li>Database Name</li><li>Login</li><li>Password</li></ul></div><p>
        In addition, different ODBC drivers, including Connector/ODBC,
        may accept additional driver-specific options and parameters.
      </p><p>
        There are three types of DSN:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            A <em class="firstterm">System DSN</em> is a global DSN
            definition that is available to any user and application on
            a particular system. A System DSN can normally only be
            configured by a systems administrator, or by a user who has
            specific permissions that let them create System DSNs.
          </p></li><li><p>
            A <em class="firstterm">User DSN</em> is specific to an
            individual user, and can be used to store database
            connectivity information that the user regularly uses.
          </p></li><li><p>
            A <em class="firstterm">File DSN</em> uses a simple file to
            define the DSN configuration. File DSNs can be shared
            between users and machines and are therefore more practical
            when installing or deploying DSN information as part of an
            application across many machines.
          </p></li></ul></div><p>
        DSN information is stored in different locations depending on
        your platform and environment.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-configuration-connection-parameters"></a>20.1.4.2. Connector/ODBC Connection Parameters</h4></div></div></div><p>
        You can specify the parameters in the following tables for
        Connector/ODBC when configuring a DSN. Users on Windows can use
        the Options and Advanced panels when configuring a DSN to set
        these parameters; see the table for information on which options
        relate to which fields and checkboxes. On Unix and Mac OS X, use
        the parameter name and value as the keyword/value pair in the
        DSN configuration. Alternatively, you can set these parameters
        within the <code class="literal">InConnectionString</code> argument in the
        <code class="function">SQLDriverConnect()</code> call.
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Default Value</th><th>Comment</th></tr></thead><tbody><tr><td><code class="literal">user</code></td><td>ODBC</td><td>The user name used to connect to MySQL.</td></tr><tr><td><code class="literal">uid</code></td><td>ODBC</td><td>Synonymous with <code class="literal">user</code>. Added in 3.51.16.</td></tr><tr><td><code class="literal">server</code></td><td><code class="literal">localhost</code></td><td>The host name of the MySQL server.</td></tr><tr><td><code class="literal">database</code></td><td> </td><td>The default database.</td></tr><tr><td><code class="literal">option</code></td><td>0</td><td>Options that specify how Connector/ODBC should work. See below.</td></tr><tr><td><code class="literal">port</code></td><td>3306</td><td>The TCP/IP port to use if <code class="literal">server</code> is not
                <code class="literal">localhost</code>.</td></tr><tr><td><code class="literal">initstmt</code></td><td> </td><td>Initial statement. A statement to execute when connecting to MySQL. In
                version 3.51 the parameter is called
                <code class="literal">stmt</code>. Note, the driver supports the
                initial statement being executed only at the time of the
                initial connection.</td></tr><tr><td><code class="literal">password</code></td><td> </td><td>The password for the <code class="literal">user</code> account on
                <code class="literal">server</code>.</td></tr><tr><td><code class="literal">pwd</code></td><td> </td><td>Synonymous with <code class="literal">password</code>. Added in 3.51.16.</td></tr><tr><td><a href="server-administration.html#sysvar_socket"><code class="literal">socket</code></a></td><td> </td><td>The Unix socket file or Windows named pipe to connect to if
                <code class="literal">server</code> is
                <code class="literal">localhost</code>.</td></tr><tr><td><code class="literal">sslca</code></td><td> </td><td>The path to a file with a list of trust SSL CAs. Added in 3.51.16.</td></tr><tr><td><code class="literal">sslcapath</code></td><td> </td><td>The path to a directory that contains trusted SSL CA certificates in PEM
                format. Added in 3.51.16.</td></tr><tr><td><code class="literal">sslcert</code></td><td> </td><td>The name of the SSL certificate file to use for establishing a secure
                connection. Added in 3.51.16.</td></tr><tr><td><code class="literal">sslcipher</code></td><td> </td><td>A list of allowable ciphers to use for SSL encryption. The cipher list
                has the same format as the <code class="literal">openssl
                ciphers</code> command Added in 3.51.16.</td></tr><tr><td><code class="literal">sslkey</code></td><td> </td><td>The name of the SSL key file to use for establishing a secure
                connection. Added in 3.51.16.</td></tr><tr><td><code class="literal">charset</code></td><td> </td><td>The character set to use for the connection. Added in 3.51.17.</td></tr><tr><td><code class="literal">sslverify</code></td><td> </td><td>If set to 1, the SSL certificate will be verified when used with the
                MySQL connection. If not set, then the default behaviour
                is to ignore SSL certificate verification.</td></tr><tr><td><code class="literal">readtimeout</code></td><td> </td><td>The timeout in seconds for attempts to read from the server. Each
                attempt uses this timeout value and there are retries if
                necessary, so the total effective timeout value is three
                times the option value. You can set the value so that a
                lost connection can be detected earlier than the TCP/IP
                <code class="literal">Close_Wait_Timeout</code> value of 10
                minutes. This option works only for TCP/IP connections,
                and only for Windows prior to MySQL 5.1.12. Corresponds
                to the <code class="literal">MYSQL_OPT_READ_TIMEOUT</code> option
                of the MySQL Client Library. This option was added in
                Connector/ODBC 3.51.27.</td></tr><tr><td><code class="literal">writetimeout</code></td><td> </td><td>The timeout in seconds for attempts to write to the server. Each attempt
                uses this timeout value and there are
                <code class="literal">net_retry_count</code> retries if necessary,
                so the total effective timeout value is
                <code class="literal">net_retry_count</code> times the option
                value. This option works only for TCP/IP connections,
                and only for Windows prior to MySQL 5.1.12. Corresponds
                to the <code class="literal">MYSQL_OPT_WRITE_TIMEOUT</code> option
                of the MySQL Client Library. This option was added in
                Connector/ODBC 3.51.27.</td></tr></tbody></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The SSL configuration parameters can also be automatically
          loaded from a <code class="filename">my.ini</code> or
          <code class="filename">my.cnf</code> file.
        </p></div><p>
        The <code class="literal">option</code> argument is used to tell
        Connector/ODBC that the client isn't 100% ODBC compliant. On
        Windows, you normally select options by toggling the checkboxes
        in the connection screen, but you can also select them in the
        <code class="literal">option</code> argument. The following options are
        listed in the order in which they appear in the Connector/ODBC
        connect screen.
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Value</strong></span></td><td><span class="bold"><strong>Flagname</strong></span></td><td><span class="bold"><strong>GUI Option</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td>1</td><td><code class="literal">FLAG_FIELD_LENGTH</code></td><td>Do not Optimize Column Width</td><td>The client cannot handle that Connector/ODBC returns the real width of a
                column. This option was removed in 3.51.18.</td></tr><tr><td>2</td><td><code class="literal">FLAG_FOUND_ROWS</code></td><td>Return Matching Rows</td><td>The client cannot handle that MySQL returns the true value of affected
                rows. If this flag is set, MySQL returns “<span class="quote">found
                rows</span>” instead. You must have MySQL 3.21.14 or
                newer to get this to work.</td></tr><tr><td>4</td><td><code class="literal">FLAG_DEBUG</code></td><td>Trace Driver Calls To myodbc.log</td><td>Make a debug log in <code class="filename">C:\myodbc.log</code> on Windows, or
                <code class="filename">/tmp/myodbc.log</code> on Unix variants.
                This option was removed in Connector/ODBC 3.51.18.</td></tr><tr><td>8</td><td><code class="literal">FLAG_BIG_PACKETS</code></td><td>Allow Big Results</td><td>Do not set any packet limit for results and bind parameters. Without
                this option, parameter binding will be truncated to 255
                characters.</td></tr><tr><td>16</td><td><code class="literal">FLAG_NO_PROMPT</code></td><td>Do not Prompt Upon Connect</td><td>Do not prompt for questions even if driver would like to prompt.</td></tr><tr><td>32</td><td><code class="literal">FLAG_DYNAMIC_CURSOR</code></td><td>Enable Dynamic Cursor</td><td>Enable or disable the dynamic cursor support.</td></tr><tr><td>64</td><td><code class="literal">FLAG_NO_SCHEMA</code></td><td>Ignore # in Table Name</td><td>Ignore use of database name in
                <em class="replaceable"><code>db_name.tbl_name.col_name</code></em>.</td></tr><tr><td>128</td><td><code class="literal">FLAG_NO_DEFAULT_CURSOR</code></td><td>User Manager Cursors</td><td>Force use of ODBC manager cursors (experimental).</td></tr><tr><td>256</td><td><code class="literal">FLAG_NO_LOCALE</code></td><td>Do not Use Set Locale</td><td>Disable the use of extended fetch (experimental).</td></tr><tr><td>512</td><td><code class="literal">FLAG_PAD_SPACE</code></td><td>Pad Char To Full Length</td><td>Pad <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a> columns to full column length.</td></tr><tr><td>1024</td><td><code class="literal">FLAG_FULL_COLUMN_NAMES</code></td><td>Return Table Names for SQLDescribeCol</td><td><code class="function">SQLDescribeCol()</code> returns fully qualified column
                names.</td></tr><tr><td>2048</td><td><code class="literal">FLAG_COMPRESSED_PROTO</code></td><td>Use Compressed Protocol</td><td>Use the compressed client/server protocol.</td></tr><tr><td>4096</td><td><code class="literal">FLAG_IGNORE_SPACE</code></td><td>Ignore Space After Function Names</td><td>Tell server to ignore space after function name and before
                “<span class="quote"><code class="literal">(</code></span>” (needed by
                PowerBuilder). This makes all function names keywords.</td></tr><tr><td>8192</td><td><code class="literal">FLAG_NAMED_PIPE</code></td><td>Force Use of Named Pipes</td><td>Connect with named pipes to a <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server running
                on NT.</td></tr><tr><td>16384</td><td><code class="literal">FLAG_NO_BIGINT</code></td><td>Change BIGINT Columns to Int</td><td>Change <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIGINT</code></a> columns to
                <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">INT</code></a> columns (some
                applications cannot handle
                <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIGINT</code></a>).</td></tr><tr><td>32768</td><td><code class="literal">FLAG_NO_CATALOG</code></td><td>No Catalog</td><td>Forces results from the catalog functions, such as
                <code class="literal">SQLTables</code>, to always return
                <code class="literal">NULL</code> and the driver to report that
                catalogs are not supported.</td></tr><tr><td>65536</td><td><code class="literal">FLAG_USE_MYCNF</code></td><td>Read Options From <code class="literal">my.cnf</code></td><td>Read parameters from the <code class="literal">[client]</code> and
                <code class="literal">[odbc]</code> groups from
                <code class="filename">my.cnf</code>.</td></tr><tr><td>131072</td><td><code class="literal">FLAG_SAFE</code></td><td>Safe</td><td>Add some extra safety checks.</td></tr><tr><td>262144</td><td><code class="literal">FLAG_NO_TRANSACTIONS</code></td><td>Disable transactions</td><td>Disable transactions.</td></tr><tr><td>524288</td><td><code class="literal">FLAG_LOG_QUERY</code></td><td>Save queries to <code class="filename">myodbc.sql</code></td><td>Enable query logging to
                <code class="filename">c:\myodbc.sql</code>(<code class="filename">/tmp/myodbc.sql</code>)
                file. (Enabled only in debug mode.)</td></tr><tr><td>1048576</td><td><code class="literal">FLAG_NO_CACHE</code></td><td>Do not Cache Result (forward only cursors)</td><td>Do not cache the results locally in the driver, instead read from server
                (<a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>).
                This works only for forward-only cursors. This option is
                very important in dealing with large tables when you do
                not want the driver to cache the entire result set.</td></tr><tr><td>2097152</td><td><code class="literal">FLAG_FORWARD_CURSOR</code></td><td>Force Use Of Forward Only Cursors</td><td>Force the use of <code class="literal">Forward-only</code> cursor type. In case of
                applications setting the default static/dynamic cursor
                type, and one wants the driver to use non-cache result
                sets, then this option ensures the forward-only cursor
                behavior.</td></tr><tr><td>4194304</td><td><code class="literal">FLAG_AUTO_RECONNECT</code></td><td>Enable auto-reconnect.</td><td>Enables auto-reconnection functionality. You should not use this option
                with transactions, since a auto reconnection during a
                incomplete transaction may cause corruption. Note that
                an auto-reconnected connection will not inherit the same
                settings and environment as the original. This option
                was added in Connector/ODBC 3.51.13.</td></tr><tr><td>8388608</td><td><code class="literal">FLAG_AUTO_IS_NULL</code></td><td>Flag Auto Is Null</td><td><p>
                  When <code class="literal">FLAG_AUTO_IS_NULL</code> is set, the
                  driver does not change the default value of
                  <a href="server-administration.html#sysvar_sql_auto_is_null"><code class="literal">sql_auto_is_null</code></a>,
                  leaving it at 1, so you get the MySQL default, not the
                  SQL standard behavior.
                </p>



                <p>
                  When <code class="literal">FLAG_AUTO_IS_NULL</code> is not set,
                  the driver changes the default value of
                  <code class="literal">SQL_AUTO_IS_NULL</code> to 0 after
                  connecting, so you get the SQL standard, not the MySQL
                  default behaviour.
                </p>



                <p>
                  Thus, omitting the flag disables the compatibility
                  option and forces SQL standard behaviour.
                </p>



                <p>
                  See <a href="functions.html#operator_is-null"><code class="literal">IS NULL</code></a>. This option
                  was added in Connector/ODBC 3.51.13.
                </p></td></tr><tr><td>16777216</td><td><code class="literal">FLAG_ZERO_DATE_TO_MIN</code></td><td>Flag Zero Date to Min</td><td>Translates zero dates (<code class="literal">XXXX-00-00</code>) into the minimum
                date values supported by ODBC,
                <code class="literal">XXXX-01-01</code>. This resolves an issue
                where some statements will not work because the date
                returned and the minimum ODBC date value are
                incompatible. This option was added in Connector/ODBC
                3.51.17.</td></tr><tr><td>33554432</td><td><code class="literal">FLAG_MIN_DATE_TO_ZERO</code></td><td>Flag Min Date to Zero</td><td>Translates the minimum ODBC date value (<code class="literal">XXXX-01-01</code>)
                to the zero date format supported by MySQL
                (<code class="literal">XXXX-00-00</code>). This resolves an issue
                where some statements will not work because the date
                returned and the minimum ODBC date value are
                incompatible. This option was added in Connector/ODBC
                3.51.17.</td></tr><tr><td>67108864</td><td><code class="literal">FLAG_MULTI_STATEMENTS</code></td><td>Allow multiple statements</td><td>Enables support for batched statements. This option was added in
                Connector/ODBC 3.51.18.</td></tr><tr><td>134217728</td><td><code class="literal">FLAG_COLUMN_SIZE_S32</code></td><td>Limit column size to 32-bit value</td><td>Limits the column size to a signed 32-bit value to prevent problems with
                larger column sizes in applications that do not support
                them. This option is automatically enabled when working
                with ADO applications. This option was added in
                Connector/ODBC 3.51.22.</td></tr><tr><td>268435456</td><td><code class="literal">FLAG_NO_BINARY_RESULT</code></td><td>Always handle binary function results as character data</td><td>When set this option disables charset 63 for columns with an empty
                <code class="literal">org_table</code>. This option was added in
                Connector/ODBC 3.51.26.</td></tr></tbody></table></div><p>
        To select multiple options, add together their values. For
        example, setting <code class="literal">option</code> to 12 (4+8) gives you
        debugging without packet limits.
      </p><p>
        The following table shows some recommended
        <code class="literal">option</code> values for various configurations.
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Configuration</strong></span></td><td><span class="bold"><strong>Option Value</strong></span></td></tr><tr><td>Microsoft Access, Visual Basic</td><td>3</td></tr><tr><td>Driver trace generation (Debug mode)</td><td>4</td></tr><tr><td>Microsoft Access (with improved DELETE queries)</td><td>35</td></tr><tr><td>Large tables with too many rows</td><td>2049</td></tr><tr><td>Sybase PowerBuilder</td><td>135168</td></tr><tr><td>Query log generation (Debug mode)</td><td>524288</td></tr><tr><td>Generate driver trace as well as query log (Debug mode)</td><td>524292</td></tr><tr><td>Large tables with no-cache results</td><td>3145731</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-configuration-dsn-windows"></a>20.1.4.3. Configuring a Connector/ODBC DSN on Windows</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-configuration-dsn-windows-3-51">20.1.4.3.1. Configuring a Connector/ODBC 3.51 DSN on Windows</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-configuration-dsn-windows-5-1">20.1.4.3.2. Configuring a Connector/ODBC 5.1 DSN on Windows</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-configuration-dsn-windows-problems">20.1.4.3.3. Errors and Debugging</a></span></dt></dl></div><p>
        The <code class="literal">ODBC Data Source Administrator</code> within
        Windows enables you to create DSNs, check driver installation
        and configure ODBC systems such as tracing (used for debugging)
        and connection pooling.
      </p><p>
        Different editions and versions of Windows store the
        <code class="literal">ODBC Data Source Administrator</code> in different
        locations depending on the version of Windows that you are
        using.
      </p><p>
        To open the <code class="literal">ODBC Data Source Administrator</code> in
        Windows Server 2003:
      </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3><p>
          Because it is possible to create DSN using either the 32-bit
          or 64-bit driver, but using the same DNS identifier, it is
          advisable to include the driver being used within the DSN
          identifier. This will help you to identify the DSN when using
          it from applications such as Excel that are only compatible
          with the 32-bit driver. For example, you might add
          <code class="literal">Using32bitCODBC</code> to the DSN identifier for
          the 32-bit interface and <code class="literal">Using64bitCODBC</code>
          for those using the 64-bit Connector/ODBC driver.
        </p></div><div class="orderedlist"><ol type="1"><li><p>
            On the <code class="literal">Start</code> menu, choose
            <code class="literal">Administrative Tools</code>, and then click
            <code class="literal">Data Sources (ODBC)</code>.
          </p></li></ol></div><p>
        To open the <code class="literal">ODBC Data Source Administrator</code> in
        Windows 2000 Server or Windows 2000 Professional:
      </p><div class="orderedlist"><ol type="1"><li><p>
            On the <code class="literal">Start</code> menu, choose
            <code class="literal">Settings</code>, and then click <code class="literal">Control
            Panel</code>.
          </p></li><li><p>
            In <code class="literal">Control Panel</code>, click
            <code class="literal">Administrative Tools</code>.
          </p></li><li><p>
            In <code class="literal">Administrative Tools</code>, click
            <code class="literal">Data Sources (ODBC)</code>.
          </p></li></ol></div><p>
        To open the <code class="literal">ODBC Data Source Administrator</code> on
        Windows XP:
      </p><div class="orderedlist"><ol type="1"><li><p>
            On the <code class="literal">Start</code> menu, click <code class="literal">Control
            Panel</code>.
          </p></li><li><p>
            In the <code class="literal">Control Panel</code> when in
            <code class="literal">Category View</code> click <code class="literal">Performance
            and Maintenance</code> and then click
            <code class="literal">Administrative Tools.</code>. If you are viewing
            the <code class="literal">Control Panel</code> in <code class="literal">Classic
            View</code>, click <code class="literal">Administrative
            Tools</code>.
          </p></li><li><p>
            In <code class="literal">Administrative Tools</code>, click
            <code class="literal">Data Sources (ODBC)</code>.
          </p></li></ol></div><p>
        Irrespective of your Windows version, you should be presented
        the <code class="literal">ODBC Data Source Administrator</code> window:
      </p><div class="mediaobject"><img src="images/myodbc-win-odbcadmin-main.png" width="462" height="385" alt="ODBC Data Source
          Administrator Dialog"></div><p>
        Within Windows XP, you can add the <code class="literal">Administrative
        Tools</code> folder to your <span class="guibutton">Start</span> menu
        to make it easier to locate the ODBC Data Source Administrator.
        To do this:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Right click on the <span class="guibutton">Start</span> menu.
          </p></li><li><p>
            Select <code class="literal">Properties</code>.
          </p></li><li><p>
            Click <span class="guibutton">Customize...</span>.
          </p></li><li><p>
            Select the <span class="guibutton">Advanced</span> tab.
          </p></li><li><p>
            Within <code class="literal">Start menu items</code>, within the
            <code class="literal">System Administrative Tools</code> section,
            select <code class="literal">Display on the All Programs menu</code>.
          </p></li></ol></div><p>
        Within both Windows Server 2003 and Windows XP you may want to
        permanently add the <code class="literal">ODBC Data Source
        Administrator</code> to your <span class="guibutton">Start</span>
        menu. To do this, locate the <code class="literal">Data Sources
        (ODBC)</code> icon using the methods shown, then right-click
        on the icon and then choose <span class="guibutton">Pin to Start
        Menu</span>.
      </p><p>
        The interfaces for the 3.51 and 5.1 versions of the
        Connector/ODBC driver are different, although the fields and
        information that you need to enter remain the same.
      </p><p>
        To configure a DSN using Connector/ODBC 3.51.x or Connector/ODBC
        5.1.0, see
        <a href="connectors-apis.html#connector-odbc-configuration-dsn-windows-3-51" title="20.1.4.3.1. Configuring a Connector/ODBC 3.51 DSN on Windows">Section 20.1.4.3.1, “Configuring a Connector/ODBC 3.51 DSN on Windows”</a>.
      </p><p>
        To configure a DSN using Connector/ODBC 5.1.1 or later, see
        <a href="connectors-apis.html#connector-odbc-configuration-dsn-windows-5-1" title="20.1.4.3.2. Configuring a Connector/ODBC 5.1 DSN on Windows">Section 20.1.4.3.2, “Configuring a Connector/ODBC 5.1 DSN on Windows”</a>.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-configuration-dsn-windows-3-51"></a>20.1.4.3.1. Configuring a Connector/ODBC 3.51 DSN on Windows</h5></div></div></div><p>
          To add and configure a new Connector/ODBC data source on
          Windows, use the <code class="literal">ODBC Data Source
          Administrator</code>:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Open the <code class="literal">ODBC Data Source
              Administrator</code>.
            </p></li><li><p>
              To create a System DSN (which will be available to all
              users) , select the <code class="literal">System DSN</code> tab. To
              create a User DSN, which will be unique only to the
              current user, click the <span class="guibutton">Add...</span>
              button.
            </p></li><li><p>
              You will need to select the ODBC driver for this DSN.
            </p><div class="mediaobject"><img src="images/myodbc-win-odbcadmin-driverselect.png" width="469" height="353" alt="MySQL ODBC Driver
                Selection Dialog"></div><p>
              Select <code class="literal">MySQL ODBC 3.51 Driver</code>, then
              click <span class="guibutton">Finish</span>.
            </p></li><li><p>
              You now need to configure the specific fields for the DSN
              you are creating through the <code class="literal">Add Data Source
              Name</code> dialog.
            </p><div class="mediaobject"><img src="images/myodbc-win-odbcadmin-adddsn.png" width="597" height="455" alt="Add Data Source
                Name Dialog for Connector/ODBC 3.51.x"></div><p>
              In the <span class="guilabel">Data Source Name</span> box, enter
              the name of the data source you want to access. It can be
              any valid name that you choose.
            </p></li><li><p>
              In the <span class="guilabel">Description</span> box, enter some
              text to help identify the connection.
            </p></li><li><p>
              In the <span class="guilabel">Server</span> field, enter the name
              of the MySQL server host that you want to access. By
              default, it is <code class="literal">localhost</code>.
            </p></li><li><p>
              In the <span class="guilabel">User</span> field, enter the user
              name to use for this connection.
            </p></li><li><p>
              In the <span class="guilabel">Password</span> field, enter the
              corresponding password for this connection.
            </p></li><li><p>
              The <span class="guilabel">Database</span> pop-up should
              automatically populate with the list of databases that the
              user has permissions to access.
            </p></li><li><p>
              Click <span class="guibutton">OK</span> to save the DSN.
            </p></li></ol></div><p>
          A completed DSN configuration may look like this:
        </p><div class="mediaobject"><img src="images/myodbc-win-odbcadmin-sampledsn.png" width="510" height="435" alt="SampleMySQL ODBC DSN
            Configuration Dialog"></div><p>
          You can verify the connection using the parameters you have
          entered by clicking the <span class="guibutton">Test</span> button. If
          the connection could be made successfully, you will be
          notified with a <code class="literal">Success; connection was
          made!</code> dialog.
        </p><p>
          If the connection failed, you can obtain more information on
          the test and why it may have failed by clicking the
          <span class="guibutton">Diagnostics...</span> button to show
          additional error messages.
        </p><p>
          You can configure a number of options for a specific DSN by
          using either the <span class="guibutton">Connect Options</span> or
          <span class="guibutton">Advanced</span> tabs in the DSN configuration
          dialog.
        </p><div class="mediaobject"><img src="images/myodbc-win-odbcadmin-options.png" width="597" height="455" alt="Connector/ODBC Connect Options
            Dialog"></div><p>
          The three options you can configure are:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              <span class="guilabel">Port</span> sets the TCP/IP port number to
              use when communicating with MySQL. Communication with
              MySQL uses port 3306 by default. If your server is
              configured to use a different TCP/IP port, you must
              specify that port number here.
            </p></li><li><p>
              <span class="guilabel">Socket</span> sets the name or location of a
              specific socket or Windows pipe to use when communicating
              with MySQL.
            </p></li><li><p>
              <span class="guilabel">Initial Statement</span> defines an SQL
              statement that will be executed when the connection to
              MySQL is opened. You can use this to set MySQL options for
              your connection, such as disabling autocommit.
            </p></li><li><p>
              <span class="guilabel">Character Set</span> is a pop-up list from
              which you can select the default character set to be used
              with this connection. The Character Set option was added
              in 3.5.17.
            </p></li></ul></div><p>
          The <span class="guibutton">Advanced</span> tab enables you to
          configure Connector/ODBC connection parameters. Refer to
          <a href="connectors-apis.html#connector-odbc-configuration-connection-parameters" title="20.1.4.2. Connector/ODBC Connection Parameters">Section 20.1.4.2, “Connector/ODBC Connection Parameters”</a>,
          for information about the meaning of these options.
        </p><div class="mediaobject"><img src="images/myodbc-win-odbcadmin-advanced.png" width="597" height="455" alt="Connector/ODBC Connection Advanced
            Dialog"></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-configuration-dsn-windows-5-1"></a>20.1.4.3.2. Configuring a Connector/ODBC 5.1 DSN on Windows</h5></div></div></div><p>
          The DSN configuration when using Connector/ODBC 5.1.1 and
          later has a slightly different layout. Also, due to the native
          Unicode support within Connector/ODBC 5.1, you no longer need
          to specify the initial character set to be used with your
          connection.
        </p><p>
          To configure a DSN using the Connector/ODBC 5.1.1 or later
          driver:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Open the <code class="literal">ODBC Data Source
              Administrator</code>.
            </p></li><li><p>
              To create a System DSN (which will be available to all
              users) , select the <span class="guilabel">System DSN</span> tab.
              To create a User DSN, which will be unique only to the
              current user, click the <span class="guibutton">Add...</span>
              button.
            </p></li><li><p>
              You will need to select the ODBC driver for this DSN.
            </p><div class="mediaobject"><img src="images/myodbc-win-odbcadmin-driverselect.png" width="469" height="353" alt="MySQL ODBC Driver
                Selection Dialog"></div><p>
              Select <code class="literal">MySQL ODBC 5.1 Driver</code>, then
              click <span class="guibutton">Finish</span>.
            </p></li><li><p>
              You now need to configure the specific fields for the DSN
              you are creating through the <code class="literal">Connection
              Parameters</code> dialog.
            </p><div class="mediaobject"><img src="images/myodbc-win-odbcadmin-adddsn-5-1.png" width="427" height="411" alt="Add Data Source
                Name Dialog for Connector/ODBC 5.1"></div><p>
              In the <span class="guilabel">Data Source Name</span> box, enter
              the name of the data source you want to access. It can be
              any valid name that you choose.
            </p></li><li><p>
              In the <span class="guilabel">Description</span> box, enter some
              text to help identify the connection.
            </p></li><li><p>
              In the <span class="guilabel">Server</span> field, enter the name
              of the MySQL server host that you want to access. By
              default, it is <code class="literal">localhost</code>.
            </p></li><li><p>
              In the <span class="guilabel">User</span> field, enter the user
              name to use for this connection.
            </p></li><li><p>
              In the <span class="guilabel">Password</span> field, enter the
              corresponding password for this connection.
            </p></li><li><p>
              The <span class="guilabel">Database</span> pop-up should
              automatically populate with the list of databases that the
              user has permissions to access.
            </p></li><li><p>
              To communicate over a different TCP/IP port than the
              default (3306), change the value of the
              <span class="guilabel">Port</span>.
            </p></li><li><p>
              Click <span class="guibutton">OK</span> to save the DSN.
            </p></li></ol></div><p>
          You can verify the connection using the parameters you have
          entered by clicking the <span class="guibutton">Test</span> button. If
          the connection could be made successfully, you will be
          notified with a <code class="literal">Success; connection was
          made!</code> dialog.
        </p><p>
          You can configure a number of options for a specific DSN by
          using the <span class="guibutton">Details</span> button.
        </p><div class="mediaobject"><img src="images/myodbc-win-odbcadmin-options-5-1.png" width="426" height="691" alt="Connector/ODBC Connect Options
            Dialog"></div><p>
          The <span class="guilabel">Details</span> button opens a tabbed display
          which allows you to set additional options:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              <span class="guilabel">Flags 1</span>, <span class="guilabel">Flags
              2</span>, and <span class="guilabel">Flags 3</span> enable you
              to select the additional flags for the DSN connection. For
              more information on these flags, see
              <a href="connectors-apis.html#connector-odbc-configuration-connection-parameters" title="20.1.4.2. Connector/ODBC Connection Parameters">Section 20.1.4.2, “Connector/ODBC Connection Parameters”</a>.
            </p></li><li><p>
              <span class="guilabel">Debug</span> allows you to enable ODBC
              debugging to record the queries you execute through the
              DSN to the <code class="filename">myodbc.sql</code> file. For more
              information, see
              <a href="connectors-apis.html#connector-odbc-configuration-trace" title="20.1.4.8. Getting an ODBC Trace File">Section 20.1.4.8, “Getting an ODBC Trace File”</a>.
            </p></li><li><p>
              <span class="guilabel">SSL Settings</span> configures the
              additional options required for using the Secure Sockets
              Layer (SSL) when communicating with MySQL server. Note
              that you must have enabled SSL and configured the MySQL
              server with suitable certificates to communicate over SSL.
            </p><div class="mediaobject"><img src="images/myodbc-win-odbcadmin-ssl-5-1.png" width="396" height="268" alt="Connector/ODBC 5.1 SSL
                Configuration"></div></li></ul></div><p>
          The <span class="guibutton">Advanced</span> tab enables you to
          configure Connector/ODBC connection parameters. Refer to
          <a href="connectors-apis.html#connector-odbc-configuration-connection-parameters" title="20.1.4.2. Connector/ODBC Connection Parameters">Section 20.1.4.2, “Connector/ODBC Connection Parameters”</a>,
          for information about the meaning of these options.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-configuration-dsn-windows-problems"></a>20.1.4.3.3. Errors and Debugging</h5></div></div></div><p>
          This section answers Connector/ODBC connection-related
          questions.
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              <span class="bold"><strong>While configuring a Connector/ODBC
              DSN, a <code class="literal">Could Not Load Translator or Setup
              Library</code> error occurs</strong></span>
            </p><p>
              For more information, refer to
              <a href="http://support.microsoft.com/default.aspx?scid=kb;EN-US;q260558" target="_top">MS
              KnowledgeBase Article(Q260558)</a>. Also, make sure
              you have the latest valid <code class="filename">ctl3d32.dll</code>
              in your system directory.
            </p></li><li><p>
              On Windows, the default <code class="filename">myodbc3.dll</code>
              is compiled for optimal performance. If you want to debug
              Connector/ODBC 3.51 (for example, to enable tracing), you
              should instead use <code class="filename">myodbc3d.dll</code>. To
              install this file, copy <code class="filename">myodbc3d.dll</code>
              over the installed <code class="filename">myodbc3.dll</code> file.
              Make sure to revert back to the release version of the
              driver DLL once you are done with the debugging because
              the debug version may cause performance issues. Note that
              the <code class="filename">myodbc3d.dll</code> isn't included in
              Connector/ODBC 3.51.07 through 3.51.11. If you are using
              one of these versions, you should copy that DLL from a
              previous version (for example, 3.51.06).
            </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-configuration-dsn-macosx"></a>20.1.4.4. Configuring a Connector/ODBC DSN on Mac OS X</h4></div></div></div><p>
        To configure a DSN on Mac OS X you can either use the
        <span><strong class="command">myodbc3i</strong></span> utility, edit the
        <code class="filename">odbc.ini</code> file within the
        <code class="filename">Library/ODBC</code> directory of the user or the
        should use the ODBC Administrator. If you have Mac OS X 10.2 or
        earlier, refer to
        <a href="connectors-apis.html#connector-odbc-configuration-dsn-unix" title="20.1.4.5. Configuring a Connector/ODBC DSN on Unix">Section 20.1.4.5, “Configuring a Connector/ODBC DSN on Unix”</a>. Select
        whether you want to create a User DSN or a System DSN. If you
        want to add a System DSN, you may need to authenticate with the
        system. You must click the padlock and enter a user and password
        with administrator privileges.
      </p><p>
        For correct operation of ODBC Administrator, you should ensure
        that the <code class="filename">/Library/ODBC/odbc.ini</code> file used
        to set up ODBC connectivity and DSNs are writable by the
        <code class="literal">admin</code> group. If this file is not writable by
        this group then the ODBC Administrator may fail, or may appear
        to have worked but not generated the correct entry.
      </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          There are known issues with the OS X ODBC Administrator and
          Connector/ODBC that may prevent you from creating a DSN using
          this method. In this case you should use the command-line or
          edit the <code class="filename">odbc.ini</code> file directly. Note
          that existing DSNs or those that you create via the
          <span><strong class="command">myodbc3i</strong></span> or
          <span><strong class="command">myodbc-installer</strong></span>tool can still be checked
          and edited using ODBC Administrator.
        </p></div><p>
        To create a DSN using the <span><strong class="command">myodbc3i</strong></span> utility,
        you need only specify the DSN type and the DSN connection
        string. For example:
      </p><pre class="programlisting">shell&gt; myodbc3i -a -s -t"DSN=mydb;DRIVER=MySQL ODBC 3.51 Driver;SERVER=mysql;USER=username;PASSWORD=pass"</pre><p>
        To use ODBC Administrator:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Open the ODBC Administrator from the
            <code class="filename">Utilities</code> folder in the
            <code class="filename">Applications</code> folder.
          </p><div class="mediaobject"><img src="images/myodbc-macosx-odbcadmin-main.png" width="663" height="463" alt="ODBC Administrator Main
              Panel Dialog"></div></li><li><p>
            On the User DSN or System DSN panel, click
            <span class="guibutton">Add.</span>
          </p></li><li><p>
            Select the Connector/ODBC driver and click
            <span class="guibutton">OK</span>.
          </p></li><li><p>
            You will be presented with the <code class="literal">Data Source
            Name</code> dialog. Enter The <code class="literal">Data Source
            Name</code> and an optional
            <code class="literal">Description</code> for the DSN.
          </p><p>
            </p><div class="mediaobject"><img src="images/myodbc-macosx-odbcadmin-adddsn.png" width="664" height="463" alt="ODBC Administrator Add
                DSN Dialog"></div><p>
          </p></li><li><p>
            Click <span class="guibutton">Add</span> to add a new keyword/value
            pair to the panel. You should configure at least four pairs
            to specify the <code class="literal">server</code>,
            <code class="literal">username</code>, <code class="literal">password</code> and
            <code class="literal">database</code> connection parameters. See
            <a href="connectors-apis.html#connector-odbc-configuration-connection-parameters" title="20.1.4.2. Connector/ODBC Connection Parameters">Section 20.1.4.2, “Connector/ODBC Connection Parameters”</a>.
          </p></li><li><p>
            Click <span class="guibutton">OK</span> to add the DSN to the list
            of configured data source names.
          </p></li></ol></div><p>
        A completed DSN configuration may look like this:
      </p><div class="mediaobject"><img src="images/myodbc-macosx-odbcadmin-sampledsn.png" width="520" height="290" alt="ODBC Administrator Sample
          DSN Dialog"></div><p>
        You can configure additional ODBC options to your DSN by adding
        further keyword/value pairs and setting the corresponding
        values. See
        <a href="connectors-apis.html#connector-odbc-configuration-connection-parameters" title="20.1.4.2. Connector/ODBC Connection Parameters">Section 20.1.4.2, “Connector/ODBC Connection Parameters”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-configuration-dsn-unix"></a>20.1.4.5. Configuring a Connector/ODBC DSN on Unix</h4></div></div></div><p>
        On <code class="literal">Unix</code>, you configure DSN entries directly
        in the <code class="filename">odbc.ini</code> file. Here is a typical
        <code class="filename">odbc.ini</code> file that configures
        <code class="literal">myodbc3</code> as the DSN name for Connector/ODBC
        3.51:
      </p><pre class="programlisting">;
;  odbc.ini configuration for Connector/ODBC and Connector/ODBC 3.51 drivers
;

[ODBC Data Sources]
myodbc3     = MyODBC 3.51 Driver DSN

[myodbc3]
Driver       = /usr/local/lib/libmyodbc3.so
Description  = Connector/ODBC 3.51 Driver DSN
SERVER       = localhost
PORT         =
USER         = root
Password     =
Database     = test
OPTION       = 3
SOCKET       =

[Default]
Driver       = /usr/local/lib/libmyodbc3.so
Description  = Connector/ODBC 3.51 Driver DSN
SERVER       = localhost
PORT         =
USER         = root
Password     =
Database     = test
OPTION       = 3
SOCKET       =
</pre><p>
        Refer to the
        <a href="connectors-apis.html#connector-odbc-configuration-connection-parameters" title="20.1.4.2. Connector/ODBC Connection Parameters">Section 20.1.4.2, “Connector/ODBC Connection Parameters”</a>,
        for the list of connection parameters that can be supplied.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If you are using <code class="literal">unixODBC</code>, you can use the
          following tools to set up the DSN:
        </p></div><div class="itemizedlist"><ul type="disc"><li><p>
            ODBCConfig GUI
            tool(<a href="http://www.unixodbc.org/config.html" target="_top">HOWTO:
            ODBCConfig</a>)
          </p></li><li><p>
            odbcinst
          </p></li></ul></div><p>
        In some cases when using <code class="literal">unixODBC</code>, you might
        get this error:
      </p><pre class="programlisting">Data source name not found and no default driver specified
</pre><p>
        If this happens, make sure the <code class="literal">ODBCINI</code> and
        <code class="literal">ODBCSYSINI</code> environment variables are pointing
        to the right <code class="filename">odbc.ini</code> file. For example, if
        your <code class="filename">odbc.ini</code> file is located in
        <code class="filename">/usr/local/etc</code>, set the environment
        variables like this:
      </p><pre class="programlisting">export ODBCINI=/usr/local/etc/odbc.ini
export ODBCSYSINI=/usr/local/etc
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-configuration-connection-without-dsn"></a>20.1.4.6. Connecting Without a Predefined DSN</h4></div></div></div><p>
        You can connect to the MySQL server using SQLDriverConnect, by
        specifying the <code class="literal">DRIVER</code> name field. Here are
        the connection strings for Connector/ODBC using DSN-Less
        connections:
      </p><p>
        <span class="bold"><strong>For Connector/ODBC 3.51:</strong></span>
      </p><pre class="programlisting">ConnectionString = "DRIVER={MySQL ODBC 3.51 Driver};\
                   SERVER=localhost;\
                   DATABASE=test;\
                   USER=venu;\
                   PASSWORD=venu;\
                   OPTION=3;"</pre><p>
        If your programming language converts backslash followed by
        whitespace to a space, it is preferable to specify the
        connection string as a single long string, or to use a
        concatenation of multiple strings that does not add spaces in
        between. For example:
      </p><pre class="programlisting">ConnectionString = "DRIVER={MySQL ODBC 3.51 Driver};"
                   "SERVER=localhost;"
                   "DATABASE=test;"
                   "USER=venu;"
                   "PASSWORD=venu;"
                   "OPTION=3;"</pre><p><b>Note. </b>
          Note that on Mac OS X you may need to specify the full path to
          the Connector/ODBC driver library.
        </p><p>
        Refer to the
        <a href="connectors-apis.html#connector-odbc-configuration-connection-parameters" title="20.1.4.2. Connector/ODBC Connection Parameters">Section 20.1.4.2, “Connector/ODBC Connection Parameters”</a>,
        for the list of connection parameters that can be supplied.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-configuration-connection-pooling"></a>20.1.4.7. ODBC Connection Pooling</h4></div></div></div><p>
        Connection pooling enables the ODBC driver to re-use existing
        connections to a given database from a pool of connections,
        instead of opening a new connection each time the database is
        accessed. By enabling connection pooling you can improve the
        overall performance of your application by lowering the time
        taken to open a connection to a database in the connection pool.
      </p><p>
        For more information about connection pooling:
        <a href="http://support.microsoft.com/default.aspx?scid=kb;EN-US;q169470" target="_top">http://support.microsoft.com/default.aspx?scid=kb;EN-US;q169470</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-configuration-trace"></a>20.1.4.8. Getting an ODBC Trace File</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-configuration-trace-windows">20.1.4.8.1. Enabling ODBC Tracing on Windows</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-configuration-trace-macosx">20.1.4.8.2. Enabling ODBC Tracing on Mac OS X</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-configuration-trace-unix">20.1.4.8.3. Enabling ODBC Tracing on Unix</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-configuration-trace-log">20.1.4.8.4. Enabling a Connector/ODBC Log</a></span></dt></dl></div><p>
        If you encounter difficulties or problems with Connector/ODBC,
        you should start by making a log file from the <code class="literal">ODBC
        Manager</code> and Connector/ODBC. This is called
        <em class="firstterm">tracing</em>, and is enabled through the ODBC
        Manager. The procedure for this differs for Windows, Mac OS X
        and Unix.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-configuration-trace-windows"></a>20.1.4.8.1. Enabling ODBC Tracing on Windows</h5></div></div></div><p>
          To enable the trace option on Windows:
        </p><div class="orderedlist"><ol type="1"><li><p>
              The <code class="literal">Tracing</code> tab of the ODBC Data Source
              Administrator dialog box enables you to configure the way
              ODBC function calls are traced.
            </p><div class="mediaobject"><img src="images/myodbc-win-tracing.png" width="462" height="385" alt="ODBC Data Source Administrator Tracing
                Dialog"></div></li><li><p>
              When you activate tracing from the
              <code class="literal">Tracing</code> tab, the <code class="literal">Driver
              Manager</code> logs all ODBC function calls for all
              subsequently run applications.
            </p></li><li><p>
              ODBC function calls from applications running before
              tracing is activated are not logged. ODBC function calls
              are recorded in a log file you specify.
            </p></li><li><p>
              Tracing ceases only after you click <code class="literal">Stop Tracing
              Now</code>. Remember that while tracing is on, the log
              file continues to increase in size and that tracing
              affects the performance of all your ODBC applications.
            </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-configuration-trace-macosx"></a>20.1.4.8.2. Enabling ODBC Tracing on Mac OS X</h5></div></div></div><p>
          To enable the trace option on Mac OS X 10.3 or later you
          should use the <code class="literal">Tracing</code> tab within
          <span class="application">ODBC Administrator</span> .
        </p><div class="orderedlist"><ol type="1"><li><p>
              Open the <span class="application">ODBC Administrator.</span>
            </p></li><li><p>
              Select the <code class="literal">Tracing</code> tab.
            </p><div class="mediaobject"><img src="images/myodbc-macosx-odbcadmin-tracing.png" width="665" height="464" alt="ODBC Administrator Tracing
                Dialog"></div></li><li><p>
              Select the <code class="literal">Enable Tracing</code> checkbox.
            </p></li><li><p>
              Enter the location where you want to save the Tracing log.
              If you want to append information to an existing log file,
              click the <span class="guibutton">Choose...</span> button.
            </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-configuration-trace-unix"></a>20.1.4.8.3. Enabling ODBC Tracing on Unix</h5></div></div></div><p>
          To enable the trace option on Mac OS X 10.2 (or earlier) or
          Unix you must add the <code class="literal">trace</code> option to the
          ODBC configuration:
        </p><div class="orderedlist"><ol type="1"><li><p>
              On Unix, you need to explicitly set the
              <code class="literal">Trace</code> option in the
              <code class="filename">ODBC.INI</code> file.
            </p><p>
              Set the tracing <code class="literal">ON</code> or
              <code class="literal">OFF</code> by using
              <code class="literal">TraceFile</code> and <code class="literal">Trace</code>
              parameters in <code class="filename">odbc.ini</code> as shown
              below:
            </p><pre class="programlisting">TraceFile  = /tmp/odbc.trace
Trace      = 1
</pre><p>
              <code class="literal">TraceFile</code> specifies the name and full
              path of the trace file and <code class="literal">Trace</code> is set
              to <code class="literal">ON</code> or <code class="literal">OFF</code>. You
              can also use <code class="literal">1</code> or
              <code class="literal">YES</code> for <code class="literal">ON</code> and
              <code class="literal">0</code> or <code class="literal">NO</code> for
              <code class="literal">OFF</code>. If you are using
              <span><strong class="command">ODBCConfig</strong></span> from
              <code class="literal">unixODBC</code>, then follow the instructions
              for tracing <code class="literal">unixODBC</code> calls at
              <a href="http://www.unixodbc.org/config.html" target="_top">HOWTO-ODBCConfig</a>.
            </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-configuration-trace-log"></a>20.1.4.8.4. Enabling a Connector/ODBC Log</h5></div></div></div><p>
          To generate a Connector/ODBC log, do the following:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Within Windows, enable the <code class="literal">Trace
              Connector/ODBC</code> option flag in the Connector/ODBC
              connect/configure screen. The log is written to file
              <code class="filename">C:\myodbc.log</code>. If the trace option is
              not remembered when you are going back to the above
              screen, it means that you are not using the
              <code class="filename">myodbcd.dll</code> driver, see
              <a href="connectors-apis.html#connector-odbc-configuration-dsn-windows-problems" title="20.1.4.3.3. Errors and Debugging">Section 20.1.4.3.3, “Errors and Debugging”</a>.
            </p><p>
              On Mac OS X, Unix, or if you are using DSN-Less
              connection, then you need to supply
              <code class="literal">OPTION=4</code> in the connection string or
              set the corresponding keyword/value pair in the DSN.
            </p></li><li><p>
              Start your application and try to get it to fail. Then
              check the Connector/ODBC trace file to find out what could
              be wrong.
            </p></li></ol></div><p>
          If you need help determining what is wrong, see
          <a href="connectors-apis.html#connector-odbc-support-community" title="20.1.8.1. Connector/ODBC Community Support">Section 20.1.8.1, “Connector/ODBC Community Support”</a>.
        </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-odbc-examples"></a>20.1.5. Connector/ODBC Examples</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-examples-overview">20.1.5.1. Basic Connector/ODBC Application Steps</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-examples-walkthrough">20.1.5.2. Step-by-step Guide to Connecting to a MySQL Database through
        Connector/ODBC</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-examples-tools">20.1.5.3. Connector/ODBC and Third-Party ODBC Tools</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-examples-tools-with-access">20.1.5.4. Using Connector/ODBC with Microsoft Access</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-examples-tools-with-wordexcel">20.1.5.5. Using Connector/ODBC with Microsoft Word or Excel</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-examples-tools-with-crystalreports">20.1.5.6. Using Connector/ODBC with Crystal Reports</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-examples-programming">20.1.5.7. Connector/ODBC Programming</a></span></dt></dl></div><p>
      Once you have configured a DSN to provide access to a database,
      how you access and use that connection is dependent on the
      application or programming language. As ODBC is a standardized
      interface, any application or language that supports ODBC can use
      the DSN and connect to the configured database.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-examples-overview"></a>20.1.5.1. Basic Connector/ODBC Application Steps</h4></div></div></div><p>
        Interacting with a MySQL server from an applications using the
        Connector/ODBC typically involves the following operations:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Configure the Connector/ODBC DSN
          </p></li><li><p>
            Connect to MySQL server
          </p></li><li><p>
            Initialization operations
          </p></li><li><p>
            Execute SQL statements
          </p></li><li><p>
            Retrieve results
          </p></li><li><p>
            Perform Transactions
          </p></li><li><p>
            Disconnect from the server
          </p></li></ul></div><p>
        Most applications use some variation of these steps. The basic
        application steps are shown in the following diagram:
      </p><div class="mediaobject"><img src="images/myflowchart.png" width="598" height="737" alt="Connector/ODBC Programming
          Flowchart"></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-examples-walkthrough"></a>20.1.5.2. Step-by-step Guide to Connecting to a MySQL Database through
        Connector/ODBC</h4></div></div></div><p>
        A typical installation situation where you would install
        Connector/ODBC is when you want to access a database on a Linux
        or Unix host from a Windows machine.
      </p><p>
        As an example of the process required to set up access between
        two machines, the steps below take you through the basic steps.
        These instructions assume that you want to connect to system
        ALPHA from system BETA with a user name and password of
        <code class="literal">myuser</code> and <code class="literal">mypassword</code>.
      </p><p>
        On system ALPHA (the MySQL server) follow these steps:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Start the MySQL server.
          </p></li><li><p>
            Use <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> to set up an
            account with a user name of <code class="literal">myuser</code> that
            can connect from system BETA using a password of
            <code class="literal">myuser</code> to the database
            <code class="literal">test</code>:
          </p><pre class="programlisting">GRANT ALL ON test.* to 'myuser'@'BETA' IDENTIFIED BY 'mypassword';</pre><p>
            For more information about MySQL privileges, refer to
            <a href="server-administration.html#user-account-management" title="5.5. MySQL User Account Management">Section 5.5, “MySQL User Account Management”</a>.
          </p></li></ol></div><p>
        On system BETA (the Connector/ODBC client), follow these steps:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Configure a Connector/ODBC DSN using parameters that match
            the server, database and authentication information that you
            have just configured on system ALPHA.
          </p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Parameter</strong></span></td><td><span class="bold"><strong>Value</strong></span></td><td><span class="bold"><strong>Comment</strong></span></td></tr><tr><td>DSN</td><td>remote_test</td><td>A name to identify the connection.</td></tr><tr><td>SERVER</td><td>ALPHA</td><td>The address of the remote server.</td></tr><tr><td>DATABASE</td><td>test</td><td>The name of the default database.</td></tr><tr><td>USER</td><td>myuser</td><td>The user name configured for access to this database.</td></tr><tr><td>PASSWORD</td><td>mypassword</td><td>The password for <code class="literal">myuser</code>.</td></tr></tbody></table></div></li><li><p>
            Using an ODBC-capable application, such as Microsoft Office,
            connect to the MySQL server using the DSN you have just
            created. If the connection fails, use tracing to examine the
            connection process. See
            <a href="connectors-apis.html#connector-odbc-configuration-trace" title="20.1.4.8. Getting an ODBC Trace File">Section 20.1.4.8, “Getting an ODBC Trace File”</a>, for
            more information.
          </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-examples-tools"></a>20.1.5.3. Connector/ODBC and Third-Party ODBC Tools</h4></div></div></div><p>
        Once you have configured your Connector/ODBC DSN, you can access
        your MySQL database through any application that supports the
        ODBC interface, including programming languages and third-party
        applications. This section contains guides and help on using
        Connector/ODBC with various ODBC-compatible tools and
        applications, including Microsoft Word, Microsoft Excel and
        Adobe/Macromedia ColdFusion.
      </p><p>
        Connector/ODBC has been tested with the following applications.
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Publisher</strong></span></td><td><span class="bold"><strong>Application</strong></span></td><td><span class="bold"><strong>Notes</strong></span></td></tr><tr><td>Adobe</td><td>ColdFusion</td><td>Formerly Macromedia ColdFusion</td></tr><tr><td>Borland</td><td>C++ Builder</td><td> </td></tr><tr><td> </td><td>Builder 4</td><td> </td></tr><tr><td> </td><td>Delphi</td><td> </td></tr><tr><td>Business Objects</td><td>Crystal Reports</td><td class="auto-generated"> </td></tr><tr><td>Claris</td><td>Filemaker Pro</td><td> </td></tr><tr><td>Corel</td><td>Paradox</td><td class="auto-generated"> </td></tr><tr><td>Computer Associates</td><td>Visual Objects</td><td>Also known as CAVO</td></tr><tr><td> </td><td>AllFusion ERwin Data Modeler</td><td class="auto-generated"> </td></tr><tr><td>Gupta</td><td>Team Developer</td><td>Previously known as Centura Team Developer; Gupta SQL/Windows</td></tr><tr><td>Gensym</td><td>G2-ODBC Bridge</td><td class="auto-generated"> </td></tr><tr><td>Inline</td><td>iHTML</td><td class="auto-generated"> </td></tr><tr><td>Lotus</td><td>Notes</td><td>Versions 4.5 and 4.6</td></tr><tr><td>Microsoft</td><td>Access</td><td> </td></tr><tr><td> </td><td>Excel</td><td> </td></tr><tr><td> </td><td>Visio Enterprise</td><td> </td></tr><tr><td> </td><td>Visual C++</td><td> </td></tr><tr><td> </td><td>Visual Basic</td><td> </td></tr><tr><td> </td><td>ODBC.NET</td><td>Using C#, Visual Basic, C++</td></tr><tr><td> </td><td>FoxPro</td><td> </td></tr><tr><td> </td><td>Visual Interdev</td><td> </td></tr><tr><td>OpenOffice.org</td><td>OpenOffice.org</td><td class="auto-generated"> </td></tr><tr><td>Perl</td><td>DBD::ODBC</td><td class="auto-generated"> </td></tr><tr><td>Pervasive Software</td><td>DataJunction</td><td class="auto-generated"> </td></tr><tr><td>Sambar Technologies</td><td>Sambar Server</td><td class="auto-generated"> </td></tr><tr><td>SPSS</td><td>SPSS</td><td class="auto-generated"> </td></tr><tr><td>SoftVelocity</td><td>Clarion</td><td class="auto-generated"> </td></tr><tr><td>SQLExpress</td><td>SQLExpress for Xbase++</td><td class="auto-generated"> </td></tr><tr><td>Sun</td><td>StarOffice</td><td class="auto-generated"> </td></tr><tr><td>SunSystems</td><td>Vision</td><td class="auto-generated"> </td></tr><tr><td>Sybase</td><td>PowerBuilder</td><td class="auto-generated"> </td></tr><tr><td> </td><td>PowerDesigner</td><td class="auto-generated"> </td></tr><tr><td>theKompany.com</td><td>Data Architect</td><td class="auto-generated"> </td></tr></tbody></table></div><p>
        If you know of any other applications that work with
        Connector/ODBC, please send mail to
        <code class="email">&lt;<a href="mailto:myodbc@lists.mysql.com">myodbc@lists.mysql.com</a>&gt;</code> about them.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-examples-tools-with-access"></a>20.1.5.4. Using Connector/ODBC with Microsoft Access</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-examples-tools-with-access-export">20.1.5.4.1. Exporting Access Data to MySQL</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-examples-tools-with-access-import">20.1.5.4.2. Importing MySQL Data to Access</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-examples-tools-with-access-linked-tables">20.1.5.4.3. Using Microsoft Access as a Front-end to MySQL</a></span></dt></dl></div><p>
        You can use MySQL database with Microsoft Access using
        Connector/ODBC. The MySQL database can be used as an import
        source, an export source, or as a linked table for direct use
        within an Access application, so you can use Access as the
        front-end interface to a MySQL database.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-examples-tools-with-access-export"></a>20.1.5.4.1. Exporting Access Data to MySQL</h5></div></div></div><p>
          To export a table of data from an Access database to MySQL,
          follow these instructions:
        </p><div class="orderedlist"><ol type="1"><li><p>
              When you open an Access database or an Access project, a
              Database window appears. It displays shortcuts for
              creating new database objects and opening existing
              objects.
            </p><div class="mediaobject"><img src="images/myaccess.png" width="533" height="391" alt="Access Database"></div></li><li><p>
              Click the name of the <code class="literal">table</code> or
              <code class="literal">query</code> you want to export, and then in
              the <code class="literal">File</code> menu, select
              <code class="literal">Export</code>.
            </p></li><li><p>
              In the <code class="literal">Export Object Type <em class="replaceable"><code>Object
              name</code></em> To</code> dialog box, in the
              <code class="literal">Save As Type</code> box, select <code class="literal">ODBC
              Databases ()</code> as shown here:
            </p><div class="mediaobject"><img src="images/myaccess-odbc.png" width="382" height="120" alt="Selecting an ODBC Database"></div></li><li><p>
              In the <code class="literal">Export</code> dialog box, enter a name
              for the file (or use the suggested name), and then select
              <code class="literal">OK</code>.
            </p></li><li><p>
              The Select Data Source dialog box is displayed; it lists
              the defined data sources for any ODBC drivers installed on
              your computer. Click either the File Data Source or
              Machine Data Source tab, and then double-click the
              Connector/ODBC or Connector/ODBC 3.51 data source that you
              want to export to. To define a new data source for
              Connector/ODBC, please
              <a href="connectors-apis.html#connector-odbc-configuration-dsn-windows" title="20.1.4.3. Configuring a Connector/ODBC DSN on Windows">Section 20.1.4.3, “Configuring a Connector/ODBC DSN on Windows”</a>.
            </p></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            Ensure that the information that you are exporting to the
            MySQL table is valid for the corresponding MySQL data types.
            Values that are outside of the supported range of the MySQL
            data type but valid within Access may trigger an
            “<span class="quote">overflow</span>” error during the export.
          </p></div><p>
          Microsoft Access connects to the MySQL Server through this
          data source and exports new tables and or data.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-examples-tools-with-access-import"></a>20.1.5.4.2. Importing MySQL Data to Access</h5></div></div></div><p>
          To import a table or tables from MySQL to Access, follow these
          instructions:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Open a database, or switch to the Database window for the
              open database.
            </p></li><li><p>
              To import tables, on the <code class="literal">File</code> menu,
              point to <code class="literal">Get External Data</code>, and then
              click <code class="literal">Import</code>.
            </p></li><li><p>
              In the <code class="literal">Import</code> dialog box, in the Files
              Of Type box, select <span class="guilabel">ODBC Databases
              ()</span>. The Select Data Source dialog box lists the
              defined data sources <span class="guilabel">The Select Data
              Source</span> dialog box is displayed; it lists the
              defined data source names.
            </p></li><li><p>
              If the ODBC data source that you selected requires you to
              log on, enter your login ID and password (additional
              information might also be required), and then click
              <code class="literal">OK</code>.
            </p></li><li><p>
              Microsoft Access connects to the MySQL server through
              <code class="literal">ODBC data source </code> and displays the list
              of tables that you can <code class="literal">import</code>.
            </p></li><li><p>
              Click each table that you want to
              <code class="literal">import</code>, and then click
              <code class="literal">OK</code>.
            </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-examples-tools-with-access-linked-tables"></a>20.1.5.4.3. Using Microsoft Access as a Front-end to MySQL</h5></div></div></div><p>
          You can use Microsoft Access as a front end to a MySQL
          database by linking tables within your Microsoft Access
          database to tables that exist within your MySQL database. When
          a query is requested on a table within Access, ODBC is used to
          execute the queries on the MySQL database instead.
        </p><p>
          <span class="bold"><strong>To create a linked table</strong></span>:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Open the Access database that you want to link to MySQL.
            </p></li><li><p>
              From the <span class="guimenu">File</span>, choose <span class="guimenu">Get
              External Data-&gt;Link Tables</span>.
            </p><div class="mediaobject"><img src="images/myodbc-link-step1.png" width="450" height="289" alt="Linking Microsoft Access tables to
                MySQL tables"></div></li><li><p>
              From the browser, choose <span class="guilabel">ODBC Databases
              ()</span> from the <span class="guilabel">Files of type</span>
              pop-up.
            </p></li><li><p>
              In the <span class="guilabel">Select Data Source</span> window,
              choose an existing DSN, either from a <span class="guilabel">File Data
              Source</span> or <span class="guilabel">Machine Data
              Source</span>.You can also create a new DSN using the
              <span class="guibutton">New...</span> button. For more information
              on creating a DSN see
              <a href="connectors-apis.html#connector-odbc-configuration-dsn-windows" title="20.1.4.3. Configuring a Connector/ODBC DSN on Windows">Section 20.1.4.3, “Configuring a Connector/ODBC DSN on Windows”</a>.
            </p><div class="mediaobject"><img src="images/myodbc-link-step3.png" width="449" height="395" alt="Linking Microsoft Access tables to
                MySQL tables, choosing a DSN"></div></li><li><p>
              In the <span class="guilabel">Link Tables</span> dialog, select one
              or more tables from the MySQL database. A link will be
              created to each table that you select from this list.
            </p><div class="mediaobject"><img src="images/myodbc-link-step4.png" width="468" height="249" alt="Linking Microsoft Access tables to
                MySQL tables, table selection"></div></li><li><p>
              If Microsoft Access is unable to determine the unique
              record identifier for a table automatically then it may
              ask you to confirm the column, or combination of columns,
              to be used to uniquely identify each row from the source
              table. Select the columns you want to use and click
              <span class="guibutton">OK</span>.
            </p><div class="mediaobject"><img src="images/myodbc-link-step5.png" width="376" height="249" alt="Linking Microsoft Access tables to
                MySQL tables, choosing unique record identifier"></div></li></ol></div><p>
          Once the process has been completed, you can now build
          interfaces and queries to the linked tables just as you would
          for any Access database.
        </p><p>
          Use the following procedure to view or to refresh links when
          the structure or location of a linked table has changed. The
          Linked Table Manager lists the paths to all currently linked
          tables.
        </p><p>
          <span class="bold"><strong>To view or refresh links</strong></span>:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Open the database that contains links to MySQL tables.
            </p></li><li><p>
              On the <code class="literal">Tools</code> menu, point to
              <code class="literal">Add-ins</code> (<code class="literal">Database
              Utilities</code> in Access 2000 or newer), and then
              click <code class="literal">Linked Table Manager</code>.
            </p></li><li><p>
              Select the check box for the tables whose links you want
              to refresh.
            </p></li><li><p>
              Click OK to refresh the links.
            </p></li></ol></div><p>
          Microsoft Access confirms a successful refresh or, if the
          table wasn't found, displays the <code class="literal">Select New Location
          of</code> &lt;table name&gt; dialog box in which you can
          specify its the table's new location. If several selected
          tables have moved to the new location that you specify, the
          Linked Table Manager searches that location for all selected
          tables, and updates all links in one step.
        </p><p>
          <span class="bold"><strong>To change the path for a set of linked
          tables</strong></span>:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Open the database that contains links to tables.
            </p></li><li><p>
              On the <code class="literal">Tools</code> menu, point to
              <code class="literal">Add-ins</code> (<code class="literal">Database
              Utilities</code> in Access 2000 or newer), and then
              click <code class="literal">Linked Table Manager</code>.
            </p></li><li><p>
              Select the <code class="literal">Always Prompt For A New
              Location</code> check box.
            </p></li><li><p>
              Select the check box for the tables whose links you want
              to change, and then click <code class="literal">OK</code>.
            </p></li><li><p>
              In the <code class="literal">Select New Location of</code> &lt;table
              name&gt; dialog box, specify the new location, click
              <code class="literal">Open</code>, and then click
              <code class="literal">OK</code>.
            </p></li></ol></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-examples-tools-with-wordexcel"></a>20.1.5.5. Using Connector/ODBC with Microsoft Word or Excel</h4></div></div></div><p>
        You can use Microsoft Word and Microsoft Excel to access
        information from a MySQL database using Connector/ODBC. Within
        Microsoft Word, this facility is most useful when importing data
        for mailmerge, or for tables and data to be included in reports.
        Within Microsoft Excel, you can execute queries on your MySQL
        server and import the data directly into an Excel Worksheet,
        presenting the data as a series of rows and columns.
      </p><p>
        With both applications, data is accessed and imported into the
        application using <span class="application">Microsoft Query</span> ,
        which enables you to execute a query though an ODBC source. You
        use Microsoft Query to build the SQL statement to be executed,
        selecting the tables, fields, selection criteria and sort order.
        For example, to insert information from a table in the World
        test database into an Excel spreadsheet, using the DSN samples
        shown in <a href="connectors-apis.html#connector-odbc-configuration" title="20.1.4. Connector/ODBC Configuration">Section 20.1.4, “Connector/ODBC Configuration”</a>:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Create a new Worksheet.
          </p></li><li><p>
            From the <code class="literal">Data</code> menu, choose
            <code class="literal">Import External Data</code>, and then select
            <code class="literal">New Database Query</code>.
          </p></li><li><p>
            <span class="application">Microsoft Query</span> will start.
            First, you need to choose the data source, by selecting an
            existing Data Source Name.
          </p><div class="mediaobject"><img src="images/myodbc-excel-step1.png" width="460" height="238" alt="Microsoft Query, Choose Data
              Source"></div></li><li><p>
            Within the <code class="literal">Query Wizard</code>, you must choose
            the columns that you want to import. The list of tables
            available to the user configured through the DSN is shown on
            the left, the columns that will be added to your query are
            shown on the right. The columns you choose are equivalent to
            those in the first section of a
            <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> query. Click
            <span class="guibutton">Next</span> to continue.
          </p><div class="mediaobject"><img src="images/myodbc-excel-step2.png" width="498" height="308" alt="Microsoft Query, Choose Columns"></div></li><li><p>
            You can filter rows from the query (the equivalent of a
            <code class="literal">WHERE</code> clause) using the <code class="literal">Filter
            Data</code> dialog. Click <span class="guibutton">Next</span> to
            continue.
          </p><div class="mediaobject"><img src="images/myodbc-excel-step3.png" width="499" height="310" alt="Microsoft Query, Filter Data"></div></li><li><p>
            Select an (optional) sort order for the data. This is
            equivalent to using a <code class="literal">ORDER BY</code> clause in
            your SQL query. You can select up to three fields for
            sorting the information returned by the query. Click
            <span class="guibutton">Next</span> to continue.
          </p><div class="mediaobject"><img src="images/myodbc-excel-step4.png" width="497" height="306" alt="Microsoft Query, Sort Order"></div></li><li><p>
            Select the destination for your query. You can select to
            return the data Microsoft Excel, where you can choose a
            worksheet and cell where the data will be inserted; you can
            continue to view the query and results within Microsoft
            Query, where you can edit the SQL query and further filter
            and sort the information returned; or you can create an OLAP
            Cube from the query, which can then be used directly within
            Microsoft Excel. Click <span class="guibutton">Finish</span>.
          </p><div class="mediaobject"><img src="images/myodbc-excel-step5.png" width="498" height="307" alt="Microsoft Query, Selecting a
              destination"></div></li></ol></div><p>
        The same process can be used to import data into a Word
        document, where the data will be inserted as a table. This can
        be used for mail merge purposes (where the field data is read
        from a Word table), or where you want to include data and
        reports within a report or other document.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-examples-tools-with-crystalreports"></a>20.1.5.6. Using Connector/ODBC with Crystal Reports</h4></div></div></div><p>
        Crystal Reports can use an ODBC DSN to connect to a database
        from which you to extract data and information for reporting
        purposes.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          There is a known issue with certain versions of Crystal
          Reports where the application is unable to open and browse
          tables and fields through an ODBC connection. Before using
          Crystal Reports with MySQL, please ensure that you have update
          to the latest version, including any outstanding service packs
          and hotfixes. For more information on this issue, see the
          <a href="http://support.crystaldecisions.com/library/kbase/new_articles/c2013269.asp" target="_top">Business)
          Objects Knowledgebase</a> for more information.
        </p></div><p>
        For example, to create a simple crosstab report within Crystal
        Reports XI, you should follow these steps:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Create a DSN using the <code class="literal">Data Sources
            (ODBC)</code> tool. You can either specify a complete
            database, including user name and password, or you can build
            a basic DSN and use Crystal Reports to set the user name and
            password.
          </p><p>
            For the purposes of this example, a DSN that provides a
            connection to an instance of the MySQL Sakila sample
            database has been created.
          </p></li><li><p>
            Open Crystal Reports and create a new project, or an open an
            existing reporting project into which you want to insert
            data from your MySQL data source.
          </p></li><li><p>
            Start the Cross-Tab Report Wizard, either by clicking on the
            option on the Start Page. Expand the <span class="guilabel">Create New
            Connection</span> folder, then expand the <span class="guilabel">ODBC
            (RDO)</span> folder to obtain a list of ODBC data
            sources.
          </p><p>
            You will be asked to select a data source.
          </p><div class="mediaobject"><img src="images/myodbc-crystal-1.png" width="690" height="476" alt="Selecting an Data Source in Crystal
              Reports"></div></li><li><p>
            When you first expand the <span class="guilabel">ODBC (RDO)</span>
            folder you will be presented the Data Source Selection
            screen. From here you can select either a pre-configured
            DSN, open a file-based DSN or enter and manual connection
            string. For this example, the <span class="guilabel">Sakila</span>
            DSN will be used.
          </p><p>
            If the DSN contains a user name/password combination, or you
            want to use different authentication credentials, click
            <span class="guibutton">Next</span> to enter the user name and
            password that you want to use. Otherwise, click
            <span class="guibutton">Finish</span> to continue the data source
            selection wizard.
          </p><div class="mediaobject"><img src="images/myodbc-crystal-2.png" width="457" height="469" alt="Selecting an ODBC Data Source in Crystal
              Reports"></div></li><li><p>
            You will be returned the Cross-Tab Report Creation Wizard.
            You now need to select the database and tables that you want
            to include in your report. For our example, we will expand
            the selected Sakila database. Click the
            <code class="literal">city</code> table and use the
            <span class="guibutton">&gt;</span> button to add the table to the
            report. Then repeat the action with the
            <code class="literal">country</code> table. Alternatively you can
            select multiple tables and add them to the report.
          </p><p>
            Finally, you can select the parent
            <span class="guilabel">Sakila</span> resource and add of the tables
            to the report.
          </p><p>
            Once you have selected the tables you want to include, click
            <span class="guibutton">Next</span> to continue.
          </p><div class="mediaobject"><img src="images/myodbc-crystal-3.png" width="689" height="476" alt="Selecting an tables in Crystal
              Reports"></div></li><li><p>
            Crystal Reports will now read the table definitions and
            automatically identify the links between the tables. The
            identification of links between tables enables Crystal
            Reports to automatically lookup and summarize information
            based on all the tables in the database according to your
            query. If Crystal Reports is unable to perform the linking
            itself, you can manually create the links between fields in
            the tables you have selected.
          </p><p>
            Click <span class="guibutton">Next</span> to continue the process.
          </p><div class="mediaobject"><img src="images/myodbc-crystal-4.png" width="690" height="476" alt="Table links/structure in Crystal
              Reports"></div></li><li><p>
            You can now select the columns and rows that you wish to
            include within the Cross-Tab report. Drag and drop or use
            the <span class="guibutton">&gt;</span> buttons to add fields to
            each area of the report. In the example shown, we will
            report on cities, organized by country, incorporating a
            count of the number of cities within each country. If you
            want to browse the data, select a field and click the
            <span class="guibutton">Browse Data...</span> button.
          </p><p>
            Click <span class="guibutton">Next</span> to create a graph of the
            results. Since we are not creating a graph from this data,
            click <span class="guibutton">Finish</span> to generate the report.
          </p><div class="mediaobject"><img src="images/myodbc-crystal-5.png" width="690" height="476" alt="Cross-tab definition in Crystal
              Reports"></div></li><li><p>
            The finished report will be shown, a sample of the output
            from the Sakila sample database is shown below.
          </p><div class="mediaobject"><img src="images/myodbc-crystal-6.png" width="329" height="512" alt="Cross-tab final report in Crystal
              Reports"></div></li></ol></div><p>
        Once the ODBC connection has been opened within Crystal Reports,
        you can browse and add any fields within the available tables
        into your reports.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-examples-programming"></a>20.1.5.7. Connector/ODBC Programming</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-examples-programming-vb">20.1.5.7.1. Using Connector/ODBC with Visual Basic Using ADO, DAO and RDO</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-examples-programming-net">20.1.5.7.2. Using Connector/ODBC with .NET</a></span></dt></dl></div><p>
        With a suitable ODBC Manager and the Connector/ODBC driver
        installed, any programming language or environment that can
        support ODBC should be able to connect to a MySQL database
        through Connector/ODBC.
      </p><p>
        This includes, but is certainly not limited to, Microsoft
        support languages (including Visual Basic, C# and interfaces
        such as ODBC.NET), Perl (through the DBI module, and the
        DBD::ODBC driver).
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-examples-programming-vb"></a>20.1.5.7.1. Using Connector/ODBC with Visual Basic Using ADO, DAO and RDO</h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-examples-programming-vb-ado">20.1.5.7.1.1. ADO: <code class="literal">rs.addNew</code>, <code class="literal">rs.delete</code>, and
            <code class="literal">rs.update</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-examples-programming-vb-dao">20.1.5.7.1.2. DAO: <code class="literal">rs.addNew</code>, <code class="literal">rs.update</code>, and
            Scrolling</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-examples-programming-vb-rdo">20.1.5.7.1.3. RDO: <code class="literal">rs.addNew</code> and <code class="literal">rs.update</code></a></span></dt></dl></div><p>
          This section contains simple examples of the use of MySQL ODBC
          3.51 Driver with ADO, DAO and RDO.
        </p><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="connector-odbc-examples-programming-vb-ado"></a>20.1.5.7.1.1. ADO: <code class="literal">rs.addNew</code>, <code class="literal">rs.delete</code>, and
            <code class="literal">rs.update</code></h6></div></div></div><p>
            The following ADO (ActiveX Data Objects) example creates a
            table <code class="literal">my_ado</code> and demonstrates the use of
            <code class="literal">rs.addNew</code>, <code class="literal">rs.delete</code>,
            and <code class="literal">rs.update</code>.
          </p><pre class="programlisting">Private Sub myodbc_ado_Click()

Dim conn As ADODB.Connection
Dim rs As ADODB.Recordset
Dim fld As ADODB.Field
Dim sql As String

'connect to MySQL server using MySQL ODBC 3.51 Driver
Set conn = New ADODB.Connection
conn.ConnectionString = "DRIVER={MySQL ODBC 3.51 Driver};"_
&amp; "SERVER=localhost;"_
&amp; " DATABASE=test;"_
&amp; "UID=venu;PWD=venu; OPTION=3"

conn.Open

'create table
conn.Execute "DROP TABLE IF EXISTS my_ado"
conn.Execute "CREATE TABLE my_ado(id int not null primary key, name varchar(20)," _
&amp; "txt text, dt date, tm time, ts timestamp)"

'direct insert
conn.Execute "INSERT INTO my_ado(id,name,txt) values(1,100,'venu')"
conn.Execute "INSERT INTO my_ado(id,name,txt) values(2,200,'MySQL')"
conn.Execute "INSERT INTO my_ado(id,name,txt) values(3,300,'Delete')"

Set rs = New ADODB.Recordset
rs.CursorLocation = adUseServer

'fetch the initial table ..
rs.Open "SELECT * FROM my_ado", conn
Debug.Print rs.RecordCount
rs.MoveFirst
Debug.Print String(50, "-") &amp; "Initial my_ado Result Set " &amp; String(50, "-")
For Each fld In rs.Fields
Debug.Print fld.Name,
Next
Debug.Print

Do Until rs.EOF
For Each fld In rs.Fields
Debug.Print fld.Value,
Next
rs.MoveNext
Debug.Print
Loop
rs.Close

'rs insert
rs.Open "select * from my_ado", conn, adOpenDynamic, adLockOptimistic
rs.AddNew
rs!Name = "Monty"
rs!txt = "Insert row"
rs.Update
rs.Close

'rs update
rs.Open "SELECT * FROM my_ado"
rs!Name = "update"
rs!txt = "updated-row"
rs.Update
rs.Close

'rs update second time..
rs.Open "SELECT * FROM my_ado"
rs!Name = "update"
rs!txt = "updated-second-time"
rs.Update
rs.Close

'rs delete
rs.Open "SELECT * FROM my_ado"
rs.MoveNext
rs.MoveNext
rs.Delete
rs.Close

'fetch the updated table ..
rs.Open "SELECT * FROM my_ado", conn
Debug.Print rs.RecordCount
rs.MoveFirst
Debug.Print String(50, "-") &amp; "Updated my_ado Result Set " &amp; String(50, "-")
For Each fld In rs.Fields
Debug.Print fld.Name,
Next
Debug.Print

Do Until rs.EOF
For Each fld In rs.Fields
Debug.Print fld.Value,
Next
rs.MoveNext
Debug.Print
Loop
rs.Close
conn.Close
End Sub</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="connector-odbc-examples-programming-vb-dao"></a>20.1.5.7.1.2. DAO: <code class="literal">rs.addNew</code>, <code class="literal">rs.update</code>, and
            Scrolling</h6></div></div></div><p>
            The following DAO (Data Access Objects) example creates a
            table <code class="literal">my_dao</code> and demonstrates the use of
            <code class="literal">rs.addNew</code>, <code class="literal">rs.update</code>,
            and result set scrolling.
          </p><pre class="programlisting">Private Sub myodbc_dao_Click()

Dim ws As Workspace
Dim conn As Connection
Dim queryDef As queryDef
Dim str As String

'connect to MySQL using MySQL ODBC 3.51 Driver
Set ws = DBEngine.CreateWorkspace("", "venu", "venu", dbUseODBC)
str = "odbc;DRIVER={MySQL ODBC 3.51 Driver};"_
&amp; "SERVER=localhost;"_
&amp; " DATABASE=test;"_
&amp; "UID=venu;PWD=venu; OPTION=3"
Set conn = ws.OpenConnection("test", dbDriverNoPrompt, False, str)

'Create table my_dao
Set queryDef = conn.CreateQueryDef("", "drop table if exists my_dao")
queryDef.Execute

Set queryDef = conn.CreateQueryDef("", "create table my_dao(Id INT AUTO_INCREMENT PRIMARY KEY, " _
&amp; "Ts TIMESTAMP(14) NOT NULL, Name varchar(20), Id2 INT)")
queryDef.Execute

'Insert new records using rs.addNew
Set rs = conn.OpenRecordset("my_dao")
Dim i As Integer

For i = 10 To 15
rs.AddNew
rs!Name = "insert record" &amp; i
rs!Id2 = i
rs.Update
Next i
rs.Close

'rs update..
Set rs = conn.OpenRecordset("my_dao")
rs.Edit
rs!Name = "updated-string"
rs.Update
rs.Close

'fetch the table back...
Set rs = conn.OpenRecordset("my_dao", dbOpenDynamic)
str = "Results:"
rs.MoveFirst
While Not rs.EOF
str = " " &amp; rs!Id &amp; " , " &amp; rs!Name &amp; ", " &amp; rs!Ts &amp; ", " &amp; rs!Id2
Debug.Print "DATA:" &amp; str
rs.MoveNext
Wend

'rs Scrolling
rs.MoveFirst
str = " FIRST ROW: " &amp; rs!Id &amp; " , " &amp; rs!Name &amp; ", " &amp; rs!Ts &amp; ", " &amp; rs!Id2
Debug.Print str

rs.MoveLast
str = " LAST ROW: " &amp; rs!Id &amp; " , " &amp; rs!Name &amp; ", " &amp; rs!Ts &amp; ", " &amp; rs!Id2
Debug.Print str

rs.MovePrevious
str = " LAST-1 ROW: " &amp; rs!Id &amp; " , " &amp; rs!Name &amp; ", " &amp; rs!Ts &amp; ", " &amp; rs!Id2
Debug.Print str

'free all resources
rs.Close
queryDef.Close
conn.Close
ws.Close

End Sub</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="connector-odbc-examples-programming-vb-rdo"></a>20.1.5.7.1.3. RDO: <code class="literal">rs.addNew</code> and <code class="literal">rs.update</code></h6></div></div></div><p>
            The following RDO (Remote Data Objects) example creates a
            table <code class="literal">my_rdo</code> and demonstrates the use of
            <code class="literal">rs.addNew</code> and
            <code class="literal">rs.update</code>.
          </p><pre class="programlisting">Dim rs As rdoResultset
Dim cn As New rdoConnection
Dim cl As rdoColumn
Dim SQL As String

'cn.Connect = "DSN=test;"
cn.Connect = "DRIVER={MySQL ODBC 3.51 Driver};"_
&amp; "SERVER=localhost;"_
&amp; " DATABASE=test;"_
&amp; "UID=venu;PWD=venu; OPTION=3"

cn.CursorDriver = rdUseOdbc
cn.EstablishConnection rdDriverPrompt


'drop table my_rdo
SQL = "drop table if exists my_rdo"
cn.Execute SQL, rdExecDirect

'create table my_rdo
SQL = "create table my_rdo(id int, name varchar(20))"
cn.Execute SQL, rdExecDirect

'insert - direct
SQL = "insert into my_rdo values (100,'venu')"
cn.Execute SQL, rdExecDirect

SQL = "insert into my_rdo values (200,'MySQL')"
cn.Execute SQL, rdExecDirect

'rs insert
SQL = "select * from my_rdo"
Set rs = cn.OpenResultset(SQL, rdOpenStatic, rdConcurRowVer, rdExecDirect)
rs.AddNew
rs!id = 300
rs!Name = "Insert1"
rs.Update
rs.Close

'rs insert
SQL = "select * from my_rdo"
Set rs = cn.OpenResultset(SQL, rdOpenStatic, rdConcurRowVer, rdExecDirect)
rs.AddNew
rs!id = 400
rs!Name = "Insert 2"
rs.Update
rs.Close

'rs update
SQL = "select * from my_rdo"
Set rs = cn.OpenResultset(SQL, rdOpenStatic, rdConcurRowVer, rdExecDirect)
rs.Edit
rs!id = 999
rs!Name = "updated"
rs.Update
rs.Close

'fetch back...
SQL = "select * from my_rdo"
Set rs = cn.OpenResultset(SQL, rdOpenStatic, rdConcurRowVer, rdExecDirect)
Do Until rs.EOF
For Each cl In rs.rdoColumns
Debug.Print cl.Value,
Next
rs.MoveNext
Debug.Print
Loop
Debug.Print "Row count="; rs.RowCount

'close
rs.Close
cn.Close

End Sub</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-examples-programming-net"></a>20.1.5.7.2. Using Connector/ODBC with .NET</h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-examples-programming-net-csharp">20.1.5.7.2.1. Using Connector/ODBC with ODBC.NET and C# (C sharp)</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-examples-programming-net-vb">20.1.5.7.2.2. Using Connector/ODBC with ODBC.NET and Visual Basic</a></span></dt></dl></div><p>
          This section contains simple examples that demonstrate the use
          of Connector/ODBC drivers with ODBC.NET.
        </p><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="connector-odbc-examples-programming-net-csharp"></a>20.1.5.7.2.1. Using Connector/ODBC with ODBC.NET and C# (C sharp)</h6></div></div></div><p>
            The following sample creates a table
            <code class="literal">my_odbc_net</code> and demonstrates its use in
            C#.
          </p><pre class="programlisting">/**
 * @sample    : mycon.cs
 * @purpose   : Demo sample for ODBC.NET using Connector/ODBC
 * @author    : Venu, <code class="email">&lt;<a href="mailto:myodbc@lists.mysql.com">myodbc@lists.mysql.com</a>&gt;</code>
 *
 * (C) Copyright MySQL AB, 1995-2006
 *
 **/
          
/* build command
 *
 *  csc /t:exe
 *      /out:mycon.exe mycon.cs
 *      /r:Microsoft.Data.Odbc.dll
 */
          
using Console = System.Console;
using Microsoft.Data.Odbc;
          
namespace myodbc3
{
  class mycon
  {
    static void Main(string[] args)
    {
      try
        {
          //Connection string for Connector/ODBC 3.51
          string MyConString = "DRIVER={MySQL ODBC 3.51 Driver};" +
            "SERVER=localhost;" +
            "DATABASE=test;" +
            "UID=venu;" +
            "PASSWORD=venu;" +
            "OPTION=3";
          
          //Connect to MySQL using Connector/ODBC
          OdbcConnection MyConnection = new OdbcConnection(MyConString);
          MyConnection.Open();
          
          Console.WriteLine("\n !!! success, connected successfully !!!\n");
          
          //Display connection information
          Console.WriteLine("Connection Information:");
          Console.WriteLine("\tConnection String:" + 
                            MyConnection.ConnectionString);
          Console.WriteLine("\tConnection Timeout:" + 
                            MyConnection.ConnectionTimeout);
          Console.WriteLine("\tDatabase:" + 
                            MyConnection.Database);
          Console.WriteLine("\tDataSource:" + 
                            MyConnection.DataSource);
          Console.WriteLine("\tDriver:" + 
                            MyConnection.Driver);
          Console.WriteLine("\tServerVersion:" + 
                            MyConnection.ServerVersion);
          
          //Create a sample table
          OdbcCommand MyCommand = 
            new OdbcCommand("DROP TABLE IF EXISTS my_odbc_net",
                            MyConnection);
          MyCommand.ExecuteNonQuery();
          MyCommand.CommandText = 
            "CREATE TABLE my_odbc_net(id int, name varchar(20), idb bigint)";
          MyCommand.ExecuteNonQuery();
          
          //Insert
          MyCommand.CommandText = 
            "INSERT INTO my_odbc_net VALUES(10,'venu', 300)";
          Console.WriteLine("INSERT, Total rows affected:" + 
                            MyCommand.ExecuteNonQuery());;
          
          //Insert
          MyCommand.CommandText = 
            "INSERT INTO my_odbc_net VALUES(20,'mysql',400)";
          Console.WriteLine("INSERT, Total rows affected:" + 
                            MyCommand.ExecuteNonQuery());
          
          //Insert
          MyCommand.CommandText = 
            "INSERT INTO my_odbc_net VALUES(20,'mysql',500)";
          Console.WriteLine("INSERT, Total rows affected:" + 
                            MyCommand.ExecuteNonQuery());
          
          //Update
          MyCommand.CommandText = 
            "UPDATE my_odbc_net SET id=999 WHERE id=20";
          Console.WriteLine("Update, Total rows affected:" + 
                            MyCommand.ExecuteNonQuery());
          
          //COUNT(*)
          MyCommand.CommandText = 
            "SELECT COUNT(*) as TRows FROM my_odbc_net";
          Console.WriteLine("Total Rows:" + 
                            MyCommand.ExecuteScalar());
          
          //Fetch
          MyCommand.CommandText = "SELECT * FROM my_odbc_net";
          OdbcDataReader MyDataReader;
          MyDataReader =  MyCommand.ExecuteReader();
          while (MyDataReader.Read())
            {
              if(string.Compare(MyConnection.Driver,"myodbc3.dll") == 0) {
                //Supported only by Connector/ODBC 3.51
                Console.WriteLine("Data:" + MyDataReader.GetInt32(0) + " " +
                                  MyDataReader.GetString(1) + " " +
                                  MyDataReader.GetInt64(2)); 
              }
              else {
                //BIGINTs not supported by Connector/ODBC
                Console.WriteLine("Data:" + MyDataReader.GetInt32(0) + " " +
                                  MyDataReader.GetString(1) + " " +
                                  MyDataReader.GetInt32(2)); 
              }
            }
          
          //Close all resources
          MyDataReader.Close();
          MyConnection.Close();
        }
      catch (OdbcException MyOdbcException) //Catch any ODBC exception ..
        {
          for (int i=0; i &lt; MyOdbcException.Errors.Count; i++)
            {
              Console.Write("ERROR #" + i + "\n" +
                            "Message: " + 
                            MyOdbcException.Errors[i].Message + "\n" +
                            "Native: " + 
                            MyOdbcException.Errors[i].NativeError.ToString() + "\n" +
                            "Source: " + 
                            MyOdbcException.Errors[i].Source + "\n" +
                            "SQL: " + 
                            MyOdbcException.Errors[i].SQLState + "\n");
            }
        }
    }
  }
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="connector-odbc-examples-programming-net-vb"></a>20.1.5.7.2.2. Using Connector/ODBC with ODBC.NET and Visual Basic</h6></div></div></div><p>
            The following sample creates a table
            <code class="literal">my_vb_net</code> and demonstrates the use in VB.
          </p><pre class="programlisting">' @sample    : myvb.vb
' @purpose   : Demo sample for ODBC.NET using Connector/ODBC
' @author    : Venu, <code class="email">&lt;<a href="mailto:myodbc@lists.mysql.com">myodbc@lists.mysql.com</a>&gt;</code>
'
' (C) Copyright MySQL AB, 1995-2006
'
'

'
' build command
'
' vbc /target:exe
'     /out:myvb.exe
'     /r:Microsoft.Data.Odbc.dll
'     /r:System.dll
'     /r:System.Data.dll
'

Imports Microsoft.Data.Odbc
Imports System

Module myvb
  Sub Main()
    Try

      'Connector/ODBC 3.51 connection string
      Dim MyConString As String = "DRIVER={MySQL ODBC 3.51 Driver};" &amp; _
      "SERVER=localhost;" &amp; _
      "DATABASE=test;" &amp; _
      "UID=venu;" &amp; _
      "PASSWORD=venu;" &amp; _
      "OPTION=3;"

      'Connection
      Dim MyConnection As New OdbcConnection(MyConString)
      MyConnection.Open()

      Console.WriteLine("Connection State::" &amp; MyConnection.State.ToString)

      'Drop
      Console.WriteLine("Dropping table")
      Dim MyCommand As New OdbcCommand()
      MyCommand.Connection = MyConnection
      MyCommand.CommandText = "DROP TABLE IF EXISTS my_vb_net"
      MyCommand.ExecuteNonQuery()

      'Create
      Console.WriteLine("Creating....")
      MyCommand.CommandText = "CREATE TABLE my_vb_net(id int, name varchar(30))"
      MyCommand.ExecuteNonQuery()

      'Insert
      MyCommand.CommandText = "INSERT INTO my_vb_net VALUES(10,'venu')"
      Console.WriteLine("INSERT, Total rows affected:" &amp; _
      MyCommand.ExecuteNonQuery())

      'Insert
      MyCommand.CommandText = "INSERT INTO my_vb_net VALUES(20,'mysql')"
      Console.WriteLine("INSERT, Total rows affected:" &amp; _
      MyCommand.ExecuteNonQuery())

      'Insert
      MyCommand.CommandText = "INSERT INTO my_vb_net VALUES(20,'mysql')"
      Console.WriteLine("INSERT, Total rows affected:" &amp; _
      MyCommand.ExecuteNonQuery())

      'Insert
      MyCommand.CommandText = "INSERT INTO my_vb_net(id) VALUES(30)"
      Console.WriteLine("INSERT, Total rows affected:" &amp; _
                        MyCommand.ExecuteNonQuery())

      'Update
      MyCommand.CommandText = "UPDATE my_vb_net SET id=999 WHERE id=20"
      Console.WriteLine("Update, Total rows affected:" &amp; _
      MyCommand.ExecuteNonQuery())

      'COUNT(*)
      MyCommand.CommandText = "SELECT COUNT(*) as TRows FROM my_vb_net"
      Console.WriteLine("Total Rows:" &amp; MyCommand.ExecuteScalar())

      'Select
      Console.WriteLine("Select * FROM my_vb_net")
      MyCommand.CommandText = "SELECT * FROM my_vb_net"
      Dim MyDataReader As OdbcDataReader
      MyDataReader = MyCommand.ExecuteReader
      While MyDataReader.Read
        If MyDataReader("name") Is DBNull.Value Then
          Console.WriteLine("id = " &amp; _
          CStr(MyDataReader("id")) &amp; "  name = " &amp; _
          "NULL")
        Else
          Console.WriteLine("id = " &amp; _
          CStr(MyDataReader("id")) &amp; "  name = " &amp; _
          CStr(MyDataReader("name")))
        End If
      End While

      'Catch ODBC Exception
    Catch MyOdbcException As OdbcException
      Dim i As Integer
      Console.WriteLine(MyOdbcException.ToString)

      'Catch program exception
    Catch MyException As Exception
      Console.WriteLine(MyException.ToString)
    End Try
  End Sub</pre></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-odbc-reference"></a>20.1.6. Connector/ODBC Reference</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-reference-api">20.1.6.1. Connector/ODBC API Reference</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-reference-datatypes">20.1.6.2. Connector/ODBC Data Types</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-reference-errorcodes">20.1.6.3. Connector/ODBC Error Codes</a></span></dt></dl></div><p>
      This section provides reference material for the Connector/ODBC
      API, showing supported functions and methods, supported MySQL
      column types and the corresponding native type in Connector/ODBC,
      and the error codes returned by Connector/ODBC when a fault
      occurs.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-reference-api"></a>20.1.6.1. Connector/ODBC API Reference</h4></div></div></div><p>
        This section summarizes ODBC routines, categorized by
        functionality.
      </p><p>
        For the complete ODBC API reference, please refer to the ODBC
        Programmer's Reference at
        <a href="http://msdn.microsoft.com/en-us/library/ms714177.aspx" target="_top">http://msdn.microsoft.com/en-us/library/ms714177.aspx</a>.
      </p><p>
        An application can call <code class="literal">SQLGetInfo</code> function
        to obtain conformance information about Connector/ODBC. To
        obtain information about support for a specific function in the
        driver, an application can call
        <code class="literal">SQLGetFunctions</code>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the Connector/ODBC 3.51 driver
          supports all deprecated functions.
        </p></div><p>
        The following tables list Connector/ODBC API calls grouped by
        task:
      </p><p>
        <span class="bold"><strong>Connecting to a data source</strong></span>
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Function name</strong></span></td><td><span class="bold"><strong>C/ODBC 3.51</strong></span></td><td><span class="bold"><strong>Standard</strong></span></td><td><span class="bold"><strong>Purpose</strong></span></td></tr><tr><td><code class="literal">SQLAllocHandle</code></td><td>Yes</td><td>ISO 92</td><td>Obtains an environment, connection, statement, or descriptor handle.</td></tr><tr><td><code class="literal">SQLConnect</code></td><td>Yes</td><td>ISO 92</td><td>Connects to a specific driver by data source name, user ID, and
                password.</td></tr><tr><td><code class="literal">SQLDriverConnect</code></td><td>Yes</td><td>ODBC</td><td>Connects to a specific driver by connection string or requests that the
                Driver Manager and driver display connection dialog
                boxes for the user.</td></tr><tr><td><code class="literal">SQLAllocEnv</code></td><td>Yes</td><td>Deprecated</td><td>Obtains an environment handle allocated from driver.</td></tr><tr><td><code class="literal">SQLAllocConnect</code></td><td>Yes</td><td>Deprecated</td><td>Obtains a connection handle</td></tr></tbody></table></div><p>
        <span class="bold"><strong>Obtaining information about a driver and
        data source</strong></span>
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Function name</strong></span></td><td><span class="bold"><strong>C/ODBC 3.51</strong></span></td><td><span class="bold"><strong>Standard</strong></span></td><td><span class="bold"><strong>Purpose</strong></span></td></tr><tr><td><code class="literal">SQLDataSources</code></td><td>No</td><td>ISO 92</td><td>Returns the list of available data sources, handled by the Driver
                Manager</td></tr><tr><td><code class="literal">SQLDrivers</code></td><td>No</td><td>ODBC</td><td>Returns the list of installed drivers and their attributes, handles by
                Driver Manager</td></tr><tr><td><code class="literal">SQLGetInfo</code></td><td>Yes</td><td>ISO 92</td><td>Returns information about a specific driver and data source.</td></tr><tr><td><code class="literal">SQLGetFunctions</code></td><td>Yes</td><td>ISO 92</td><td>Returns supported driver functions.</td></tr><tr><td><code class="literal">SQLGetTypeInfo</code></td><td>Yes</td><td>ISO 92</td><td>Returns information about supported data types.</td></tr></tbody></table></div><p>
        <span class="bold"><strong>Setting and retrieving driver
        attributes</strong></span>
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Function name</strong></span></td><td><span class="bold"><strong>C/ODBC 3.51</strong></span></td><td><span class="bold"><strong>Standard</strong></span></td><td><span class="bold"><strong>Purpose</strong></span></td></tr><tr><td><code class="literal">SQLSetConnectAttr</code></td><td>Yes</td><td>ISO 92</td><td>Sets a connection attribute.</td></tr><tr><td><code class="literal">SQLGetConnectAttr</code></td><td>Yes</td><td>ISO 92</td><td>Returns the value of a connection attribute.</td></tr><tr><td><code class="literal">SQLSetConnectOption</code></td><td>Yes</td><td>Deprecated</td><td>Sets a connection option</td></tr><tr><td><code class="literal">SQLGetConnectOption</code></td><td>Yes</td><td>Deprecated</td><td>Returns the value of a connection option</td></tr><tr><td><code class="literal">SQLSetEnvAttr</code></td><td>Yes</td><td>ISO 92</td><td>Sets an environment attribute.</td></tr><tr><td><code class="literal">SQLGetEnvAttr</code></td><td>Yes</td><td>ISO 92</td><td>Returns the value of an environment attribute.</td></tr><tr><td><code class="literal">SQLSetStmtAttr</code></td><td>Yes</td><td>ISO 92</td><td>Sets a statement attribute.</td></tr><tr><td><code class="literal">SQLGetStmtAttr</code></td><td>Yes</td><td>ISO 92</td><td>Returns the value of a statement attribute.</td></tr><tr><td><code class="literal">SQLSetStmtOption</code></td><td>Yes</td><td>Deprecated</td><td>Sets a statement option</td></tr><tr><td><code class="literal">SQLGetStmtOption</code></td><td>Yes</td><td>Deprecated</td><td>Returns the value of a statement option</td></tr></tbody></table></div><p>
        <span class="bold"><strong>Preparing SQL requests</strong></span>
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Function name</strong></span></td><td><span class="bold"><strong>C/ODBC 3.51</strong></span></td><td><span class="bold"><strong>Standard</strong></span></td><td><span class="bold"><strong>Purpose</strong></span></td></tr><tr><td><code class="literal">SQLAllocStmt</code></td><td>Yes</td><td>Deprecated</td><td>Allocates a statement handle</td></tr><tr><td><code class="literal">SQLPrepare</code></td><td>Yes</td><td>ISO 92</td><td>Prepares an SQL statement for later execution.</td></tr><tr><td><code class="literal">SQLBindParameter</code></td><td>Yes</td><td>ODBC</td><td>Assigns storage for a parameter in an SQL statement.</td></tr><tr><td><code class="literal">SQLGetCursorName</code></td><td>Yes</td><td>ISO 92</td><td>Returns the cursor name associated with a statement handle.</td></tr><tr><td><code class="literal">SQLSetCursorName</code></td><td>Yes</td><td>ISO 92</td><td>Specifies a cursor name.</td></tr><tr><td><code class="literal">SQLSetScrollOptions</code></td><td>Yes</td><td>ODBC</td><td>Sets options that control cursor behavior.</td></tr></tbody></table></div><p>
        <span class="bold"><strong>Submitting requests</strong></span>
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Function name</strong></span></td><td><span class="bold"><strong>C/ODBC 3.51</strong></span></td><td><span class="bold"><strong>Standard</strong></span></td><td><span class="bold"><strong>Purpose</strong></span></td></tr><tr><td><code class="literal">SQLExecute</code></td><td>Yes</td><td>ISO 92</td><td>Executes a prepared statement.</td></tr><tr><td><code class="literal">SQLExecDirect</code></td><td>Yes</td><td>ISO 92</td><td>Executes a statement</td></tr><tr><td><code class="literal">SQLNativeSql</code></td><td>Yes</td><td>ODBC</td><td>Returns the text of an SQL statement as translated by the driver.</td></tr><tr><td><code class="literal">SQLDescribeParam</code></td><td>Yes</td><td>ODBC</td><td>Returns the description for a specific parameter in a statement.</td></tr><tr><td><code class="literal">SQLNumParams</code></td><td>Yes</td><td>ISO 92</td><td>Returns the number of parameters in a statement.</td></tr><tr><td><code class="literal">SQLParamData</code></td><td>Yes</td><td>ISO 92</td><td>Used in conjunction with <code class="literal">SQLPutData</code> to supply
                parameter data at execution time. (Useful for long data
                values.)</td></tr><tr><td><code class="literal">SQLPutData</code></td><td>Yes</td><td>ISO 92</td><td>Sends part or all of a data value for a parameter. (Useful for long data
                values.)</td></tr></tbody></table></div><p>
        <span class="bold"><strong>Retrieving results and information about
        results</strong></span>
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Function name</strong></span></td><td><span class="bold"><strong>C/ODBC 3.51</strong></span></td><td><span class="bold"><strong>Standard</strong></span></td><td><span class="bold"><strong>Purpose</strong></span></td></tr><tr><td><code class="literal">SQLRowCount</code></td><td>Yes</td><td>ISO 92</td><td>Returns the number of rows affected by an insert, update, or delete
                request.</td></tr><tr><td><code class="literal">SQLNumResultCols</code></td><td>Yes</td><td>ISO 92</td><td>Returns the number of columns in the result set.</td></tr><tr><td><code class="literal">SQLDescribeCol</code></td><td>Yes</td><td>ISO 92</td><td>Describes a column in the result set.</td></tr><tr><td><code class="literal">SQLColAttribute</code></td><td>Yes</td><td>ISO 92</td><td>Describes attributes of a column in the result set.</td></tr><tr><td><code class="literal">SQLColAttributes</code></td><td>Yes</td><td>Deprecated</td><td>Describes attributes of a column in the result set.</td></tr><tr><td><code class="literal">SQLFetch</code></td><td>Yes</td><td>ISO 92</td><td>Returns multiple result rows.</td></tr><tr><td><code class="literal">SQLFetchScroll</code></td><td>Yes</td><td>ISO 92</td><td>Returns scrollable result rows.</td></tr><tr><td><code class="literal">SQLExtendedFetch</code></td><td>Yes</td><td>Deprecated</td><td>Returns scrollable result rows.</td></tr><tr><td><code class="literal">SQLSetPos</code></td><td>Yes</td><td>ODBC</td><td>Positions a cursor within a fetched block of data and allows an
                application to refresh data in the rowset or to update
                or delete data in the result set.</td></tr><tr><td><code class="literal">SQLBulkOperations</code></td><td>Yes</td><td>ODBC</td><td>Performs bulk insertions and bulk bookmark operations, including update,
                delete, and fetch by bookmark.</td></tr></tbody></table></div><p>
        <span class="bold"><strong>Retrieving error or diagnostic
        information</strong></span>
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Function name</strong></span></td><td><span class="bold"><strong>C/ODBC 3.51</strong></span></td><td><span class="bold"><strong>Standard</strong></span></td><td><span class="bold"><strong>Purpose</strong></span></td></tr><tr><td><code class="literal">SQLError</code></td><td>Yes</td><td>Deprecated</td><td>Returns additional error or status information</td></tr><tr><td><code class="literal">SQLGetDiagField</code></td><td>Yes</td><td>ISO 92</td><td>Returns additional diagnostic information (a single field of the
                diagnostic data structure).</td></tr><tr><td><code class="literal">SQLGetDiagRec</code></td><td>Yes</td><td>ISO 92</td><td>Returns additional diagnostic information (multiple fields of the
                diagnostic data structure).</td></tr></tbody></table></div><p>
        <span class="bold"><strong>Obtaining information about the data
        source's system tables (catalog functions) item</strong></span>
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Function name</strong></span></td><td><span class="bold"><strong>C/ODBC 3.51</strong></span></td><td><span class="bold"><strong>Standard</strong></span></td><td><span class="bold"><strong>Purpose</strong></span></td></tr><tr><td><code class="literal">SQLColumnPrivileges</code></td><td>Yes</td><td>ODBC</td><td>Returns a list of columns and associated privileges for one or more
                tables.</td></tr><tr><td><code class="literal">SQLColumns</code></td><td>Yes</td><td>X/Open</td><td>Returns the list of column names in specified tables.</td></tr><tr><td><code class="literal">SQLForeignKeys</code></td><td>Yes</td><td>ODBC</td><td>Returns a list of column names that make up foreign keys, if they exist
                for a specified table.</td></tr><tr><td><code class="literal">SQLPrimaryKeys</code></td><td>Yes</td><td>ODBC</td><td>Returns the list of column names that make up the primary key for a
                table.</td></tr><tr><td><code class="literal">SQLSpecialColumns</code></td><td>Yes</td><td>X/Open</td><td>Returns information about the optimal set of columns that uniquely
                identifies a row in a specified table, or the columns
                that are automatically updated when any value in the row
                is updated by a transaction.</td></tr><tr><td><code class="literal">SQLStatistics</code></td><td>Yes</td><td>ISO 92</td><td>Returns statistics about a single table and the list of indexes
                associated with the table.</td></tr><tr><td><code class="literal">SQLTablePrivileges</code></td><td>Yes</td><td>ODBC</td><td>Returns a list of tables and the privileges associated with each table.</td></tr><tr><td><code class="literal">SQLTables</code></td><td>Yes</td><td>X/Open</td><td>Returns the list of table names stored in a specific data source.</td></tr></tbody></table></div><p>
        <span class="bold"><strong>Performing transactions</strong></span>
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Function name</strong></span></td><td><span class="bold"><strong>C/ODBC 3.51</strong></span></td><td><span class="bold"><strong>Standard</strong></span></td><td><span class="bold"><strong>Purpose</strong></span></td></tr><tr><td><code class="literal">SQLTransact</code></td><td>Yes</td><td>Deprecated</td><td>Commits or rolls back a transaction</td></tr><tr><td><code class="literal">SQLEndTran</code></td><td>Yes</td><td>ISO 92</td><td>Commits or rolls back a transaction.</td></tr></tbody></table></div><p>
        <span class="bold"><strong>Terminating a statement</strong></span>
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Function name</strong></span></td><td><span class="bold"><strong>C/ODBC 3.51</strong></span></td><td><span class="bold"><strong>Standard</strong></span></td><td><span class="bold"><strong>Purpose</strong></span></td></tr><tr><td><code class="literal">SQLFreeStmt</code></td><td>Yes</td><td>ISO 92</td><td>Ends statement processing, discards pending results, and, optionally,
                frees all resources associated with the statement
                handle.</td></tr><tr><td><code class="literal">SQLCloseCursor</code></td><td>Yes</td><td>ISO 92</td><td>Closes a cursor that has been opened on a statement handle.</td></tr><tr><td><code class="literal">SQLCancel</code></td><td>Yes</td><td>ISO 92</td><td>Cancels an SQL statement.</td></tr></tbody></table></div><p>
        <span class="bold"><strong>Terminating a connection</strong></span>
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Function name</strong></span></td><td><span class="bold"><strong>C/ODBC 3.51</strong></span></td><td><span class="bold"><strong>Standard</strong></span></td><td><span class="bold"><strong>Purpose</strong></span></td></tr><tr><td><code class="literal">SQLDisconnect</code></td><td>Yes</td><td>ISO 92</td><td>Closes the connection.</td></tr><tr><td><code class="literal">SQLFreeHandle</code></td><td>Yes</td><td>ISO 92</td><td>Releases an environment, connection, statement, or descriptor handle.</td></tr><tr><td><code class="literal">SQLFreeConnect</code></td><td>Yes</td><td>Deprecated</td><td>Releases connection handle</td></tr><tr><td><code class="literal">SQLFreeEnv</code></td><td>Yes</td><td>Deprecated</td><td>Releases an environment handle</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-reference-datatypes"></a>20.1.6.2. Connector/ODBC Data Types</h4></div></div></div><p>
        The following table illustrates how driver maps the server data
        types to default SQL and C data types.
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Native Value</strong></span></td><td><span class="bold"><strong>SQL Type</strong></span></td><td><span class="bold"><strong>C Type</strong></span></td></tr><tr><td><code class="literal">bigint unsigned</code></td><td><code class="literal">SQL_BIGINT</code></td><td><code class="literal">SQL_C_UBIGINT</code></td></tr><tr><td><code class="literal">bigint</code></td><td><code class="literal">SQL_BIGINT</code></td><td><code class="literal">SQL_C_SBIGINT</code></td></tr><tr><td><code class="literal">bit</code></td><td><code class="literal">SQL_BIT</code></td><td><code class="literal">SQL_C_BIT</code></td></tr><tr><td><code class="literal">bit</code></td><td><code class="literal">SQL_CHAR</code></td><td><code class="literal">SQL_C_CHAR</code></td></tr><tr><td><code class="literal">blob</code></td><td><code class="literal">SQL_LONGVARBINARY</code></td><td><code class="literal">SQL_C_BINARY</code></td></tr><tr><td><code class="literal">bool</code></td><td><code class="literal">SQL_CHAR</code></td><td><code class="literal">SQL_C_CHAR</code></td></tr><tr><td><code class="literal">char</code></td><td><code class="literal">SQL_CHAR</code></td><td><code class="literal">SQL_C_CHAR</code></td></tr><tr><td><code class="literal">date</code></td><td><code class="literal">SQL_DATE</code></td><td><code class="literal">SQL_C_DATE</code></td></tr><tr><td><code class="literal">datetime</code></td><td><code class="literal">SQL_TIMESTAMP</code></td><td><code class="literal">SQL_C_TIMESTAMP</code></td></tr><tr><td><code class="literal">decimal</code></td><td><code class="literal">SQL_DECIMAL</code></td><td><code class="literal">SQL_C_CHAR</code></td></tr><tr><td><code class="literal">double precision</code></td><td><code class="literal">SQL_DOUBLE</code></td><td><code class="literal">SQL_C_DOUBLE</code></td></tr><tr><td><code class="literal">double</code></td><td><code class="literal">SQL_FLOAT</code></td><td><code class="literal">SQL_C_DOUBLE</code></td></tr><tr><td><code class="literal">enum</code></td><td><code class="literal">SQL_VARCHAR</code></td><td><code class="literal">SQL_C_CHAR</code></td></tr><tr><td><code class="literal">float</code></td><td><code class="literal">SQL_REAL</code></td><td><code class="literal">SQL_C_FLOAT</code></td></tr><tr><td><code class="literal">int unsigned</code></td><td><code class="literal">SQL_INTEGER</code></td><td><code class="literal">SQL_C_ULONG</code></td></tr><tr><td><code class="literal">int</code></td><td><code class="literal">SQL_INTEGER</code></td><td><code class="literal">SQL_C_SLONG</code></td></tr><tr><td><code class="literal">integer unsigned</code></td><td><code class="literal">SQL_INTEGER</code></td><td><code class="literal">SQL_C_ULONG</code></td></tr><tr><td><code class="literal">integer</code></td><td><code class="literal">SQL_INTEGER</code></td><td><code class="literal">SQL_C_SLONG</code></td></tr><tr><td><code class="literal">long varbinary</code></td><td><code class="literal">SQL_LONGVARBINARY</code></td><td><code class="literal">SQL_C_BINARY</code></td></tr><tr><td><code class="literal">long varchar</code></td><td><code class="literal">SQL_LONGVARCHAR</code></td><td><code class="literal">SQL_C_CHAR</code></td></tr><tr><td><code class="literal">longblob</code></td><td><code class="literal">SQL_LONGVARBINARY</code></td><td><code class="literal">SQL_C_BINARY</code></td></tr><tr><td><code class="literal">longtext</code></td><td><code class="literal">SQL_LONGVARCHAR</code></td><td><code class="literal">SQL_C_CHAR</code></td></tr><tr><td><code class="literal">mediumblob</code></td><td><code class="literal">SQL_LONGVARBINARY</code></td><td><code class="literal">SQL_C_BINARY</code></td></tr><tr><td><code class="literal">mediumint unsigned</code></td><td><code class="literal">SQL_INTEGER</code></td><td><code class="literal">SQL_C_ULONG</code></td></tr><tr><td><code class="literal">mediumint</code></td><td><code class="literal">SQL_INTEGER</code></td><td><code class="literal">SQL_C_SLONG</code></td></tr><tr><td><code class="literal">mediumtext</code></td><td><code class="literal">SQL_LONGVARCHAR</code></td><td><code class="literal">SQL_C_CHAR</code></td></tr><tr><td><code class="literal">numeric</code></td><td><code class="literal">SQL_NUMERIC</code></td><td><code class="literal">SQL_C_CHAR</code></td></tr><tr><td><code class="literal">real</code></td><td><code class="literal">SQL_FLOAT</code></td><td><code class="literal">SQL_C_DOUBLE</code></td></tr><tr><td><code class="literal">set</code></td><td><code class="literal">SQL_VARCHAR</code></td><td><code class="literal">SQL_C_CHAR</code></td></tr><tr><td><code class="literal">smallint unsigned</code></td><td><code class="literal">SQL_SMALLINT</code></td><td><code class="literal">SQL_C_USHORT</code></td></tr><tr><td><code class="literal">smallint</code></td><td><code class="literal">SQL_SMALLINT</code></td><td><code class="literal">SQL_C_SSHORT</code></td></tr><tr><td><code class="literal">text</code></td><td><code class="literal">SQL_LONGVARCHAR</code></td><td><code class="literal">SQL_C_CHAR</code></td></tr><tr><td><code class="literal">time</code></td><td><code class="literal">SQL_TIME</code></td><td><code class="literal">SQL_C_TIME</code></td></tr><tr><td><a href="server-administration.html#sysvar_timestamp"><code class="literal">timestamp</code></a></td><td><code class="literal">SQL_TIMESTAMP</code></td><td><code class="literal">SQL_C_TIMESTAMP</code></td></tr><tr><td><code class="literal">tinyblob</code></td><td><code class="literal">SQL_LONGVARBINARY</code></td><td><code class="literal">SQL_C_BINARY</code></td></tr><tr><td><code class="literal">tinyint unsigned</code></td><td><code class="literal">SQL_TINYINT</code></td><td><code class="literal">SQL_C_UTINYINT</code></td></tr><tr><td><code class="literal">tinyint</code></td><td><code class="literal">SQL_TINYINT</code></td><td><code class="literal">SQL_C_STINYINT</code></td></tr><tr><td><code class="literal">tinytext</code></td><td><code class="literal">SQL_LONGVARCHAR</code></td><td><code class="literal">SQL_C_CHAR</code></td></tr><tr><td><code class="literal">varchar</code></td><td><code class="literal">SQL_VARCHAR</code></td><td><code class="literal">SQL_C_CHAR</code></td></tr><tr><td><code class="literal">year</code></td><td><code class="literal">SQL_SMALLINT</code></td><td><code class="literal">SQL_C_SHORT</code></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-reference-errorcodes"></a>20.1.6.3. Connector/ODBC Error Codes</h4></div></div></div><p>
        The following tables lists the error codes returned by the
        driver apart from the server errors.
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Native Code</strong></span></td><td><span class="bold"><strong>SQLSTATE 2</strong></span></td><td><span class="bold"><strong>SQLSTATE 3</strong></span></td><td><span class="bold"><strong>Error Message</strong></span></td></tr><tr><td>500</td><td>01000</td><td>01000</td><td>General warning</td></tr><tr><td>501</td><td>01004</td><td>01004</td><td>String data, right truncated</td></tr><tr><td>502</td><td>01S02</td><td>01S02</td><td>Option value changed</td></tr><tr><td>503</td><td>01S03</td><td>01S03</td><td>No rows updated/deleted</td></tr><tr><td>504</td><td>01S04</td><td>01S04</td><td>More than one row updated/deleted</td></tr><tr><td>505</td><td>01S06</td><td>01S06</td><td>Attempt to fetch before the result set returned the first row set</td></tr><tr><td>506</td><td>07001</td><td>07002</td><td><code class="literal">SQLBindParameter</code> not used for all parameters</td></tr><tr><td>507</td><td>07005</td><td>07005</td><td>Prepared statement not a cursor-specification</td></tr><tr><td>508</td><td>07009</td><td>07009</td><td>Invalid descriptor index</td></tr><tr><td>509</td><td>08002</td><td>08002</td><td>Connection name in use</td></tr><tr><td>510</td><td>08003</td><td>08003</td><td>Connection does not exist</td></tr><tr><td>511</td><td>24000</td><td>24000</td><td>Invalid cursor state</td></tr><tr><td>512</td><td>25000</td><td>25000</td><td>Invalid transaction state</td></tr><tr><td>513</td><td>25S01</td><td>25S01</td><td>Transaction state unknown</td></tr><tr><td>514</td><td>34000</td><td>34000</td><td>Invalid cursor name</td></tr><tr><td>515</td><td>S1000</td><td>HY000</td><td>General driver defined error</td></tr><tr><td>516</td><td>S1001</td><td>HY001</td><td>Memory allocation error</td></tr><tr><td>517</td><td>S1002</td><td>HY002</td><td>Invalid column number</td></tr><tr><td>518</td><td>S1003</td><td>HY003</td><td>Invalid application buffer type</td></tr><tr><td>519</td><td>S1004</td><td>HY004</td><td>Invalid SQL data type</td></tr><tr><td>520</td><td>S1009</td><td>HY009</td><td>Invalid use of null pointer</td></tr><tr><td>521</td><td>S1010</td><td>HY010</td><td>Function sequence error</td></tr><tr><td>522</td><td>S1011</td><td>HY011</td><td>Attribute can not be set now</td></tr><tr><td>523</td><td>S1012</td><td>HY012</td><td>Invalid transaction operation code</td></tr><tr><td>524</td><td>S1013</td><td>HY013</td><td>Memory management error</td></tr><tr><td>525</td><td>S1015</td><td>HY015</td><td>No cursor name available</td></tr><tr><td>526</td><td>S1024</td><td>HY024</td><td>Invalid attribute value</td></tr><tr><td>527</td><td>S1090</td><td>HY090</td><td>Invalid string or buffer length</td></tr><tr><td>528</td><td>S1091</td><td>HY091</td><td>Invalid descriptor field identifier</td></tr><tr><td>529</td><td>S1092</td><td>HY092</td><td>Invalid attribute/option identifier</td></tr><tr><td>530</td><td>S1093</td><td>HY093</td><td>Invalid parameter number</td></tr><tr><td>531</td><td>S1095</td><td>HY095</td><td>Function type out of range</td></tr><tr><td>532</td><td>S1106</td><td>HY106</td><td>Fetch type out of range</td></tr><tr><td>533</td><td>S1117</td><td>HY117</td><td>Row value out of range</td></tr><tr><td>534</td><td>S1109</td><td>HY109</td><td>Invalid cursor position</td></tr><tr><td>535</td><td>S1C00</td><td>HYC00</td><td>Optional feature not implemented</td></tr><tr><td>0</td><td>21S01</td><td>21S01</td><td>Column count does not match value count</td></tr><tr><td>0</td><td>23000</td><td>23000</td><td>Integrity constraint violation</td></tr><tr><td>0</td><td>42000</td><td>42000</td><td>Syntax error or access violation</td></tr><tr><td>0</td><td>42S02</td><td>42S02</td><td>Base table or view not found</td></tr><tr><td>0</td><td>42S12</td><td>42S12</td><td>Index not found</td></tr><tr><td>0</td><td>42S21</td><td>42S21</td><td>Column already exists</td></tr><tr><td>0</td><td>42S22</td><td>42S22</td><td>Column not found</td></tr><tr><td>0</td><td>08S01</td><td>08S01</td><td>Communication link failure</td></tr></tbody></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-odbc-usagenotes"></a>20.1.7. Connector/ODBC Notes and Tips</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-functionality">20.1.7.1. Connector/ODBC General Functionality</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-apptips">20.1.7.2. Connector/ODBC Application Specific Tips</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-errors">20.1.7.3. Connector/ODBC Errors and Resolutions (FAQ)</a></span></dt></dl></div><p>
      Here are some common notes and tips for using Connector/ODBC
      within different environments, applications and tools. The notes
      provided here are based on the experiences of Connector/ODBC
      developers and users.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-usagenotes-functionality"></a>20.1.7.1. Connector/ODBC General Functionality</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-functionality-last-insert-id">20.1.7.1.1. Obtaining Auto-Increment Values</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-functionality-dynamic-cursor">20.1.7.1.2. Dynamic Cursor Support</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-functionality-performance">20.1.7.1.3. Connector/ODBC Performance</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-functionality-query-timeout">20.1.7.1.4. Setting ODBC Query Timeout in Windows</a></span></dt></dl></div><p>
        This section provides help with common queries and areas of
        functionality in MySQL and how to use them with Connector/ODBC.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-usagenotes-functionality-last-insert-id"></a>20.1.7.1.1. Obtaining Auto-Increment Values</h5></div></div></div><a class="indexterm" name="id3626054"></a><p>
          Obtaining the value of column that uses
          <code class="literal">AUTO_INCREMENT</code> after an
          <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statement can be
          achieved in a number of different ways. To obtain the value
          immediately after an <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>,
          use a <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> query with the
          <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> function.
        </p><p>
          For example, using Connector/ODBC you would execute two
          separate statements, the <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>
          statement and the <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> query
          to obtain the auto-increment value.
        </p><pre class="programlisting">INSERT INTO tbl (auto,text) VALUES(NULL,'text');
SELECT LAST_INSERT_ID();</pre><p>
          If you do not require the value within your application, but
          do require the value as part of another
          <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>, the entire process can
          be handled by executing the following statements:
        </p><pre class="programlisting">INSERT INTO tbl (auto,text) VALUES(NULL,'text');
INSERT INTO tbl2 (id,text) VALUES(LAST_INSERT_ID(),'text');</pre><p>
          Certain ODBC applications (including Delphi and Access) may
          have trouble obtaining the auto-increment value using the
          previous examples. In this case, try the following statement
          as an alternative:
        </p><pre class="programlisting">SELECT * FROM tbl WHERE auto IS NULL;</pre><p>
          See <a href="connectors-apis.html#getting-unique-id" title="20.10.10.3. How to Get the Unique ID for the Last Inserted Row">Section 20.10.10.3, “How to Get the Unique ID for the Last Inserted Row”</a>.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-usagenotes-functionality-dynamic-cursor"></a>20.1.7.1.2. Dynamic Cursor Support</h5></div></div></div><p>
          Support for the <code class="literal">dynamic cursor</code> is provided
          in Connector/ODBC 3.51, but dynamic cursors are not enabled by
          default. You can enable this function within Windows by
          selecting the <code class="literal">Enable Dynamic Cursor</code>
          checkbox within the ODBC Data Source Administrator.
        </p><p>
          On other platforms, you can enable the dynamic cursor by
          adding <code class="literal">32</code> to the <code class="literal">OPTION</code>
          value when creating the DSN.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-usagenotes-functionality-performance"></a>20.1.7.1.3. Connector/ODBC Performance</h5></div></div></div><p>
          The Connector/ODBC driver has been optimized to provide very
          fast performance. If you experience problems with the
          performance of Connector/ODBC, or notice a large amount of
          disk activity for simple queries, there are a number of
          aspects you should check:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Ensure that <code class="literal">ODBC Tracing</code> is not
              enabled. With tracing enabled, a lot of information is
              recorded in the tracing file by the ODBC Manager. You can
              check, and disable, tracing within Windows using the
              <span class="guibutton">Tracing</span> panel of the ODBC Data
              Source Administrator. Within Mac OS X, check the
              <span class="guibutton">Tracing</span> panel of ODBC
              Administrator. See
              <a href="connectors-apis.html#connector-odbc-configuration-trace" title="20.1.4.8. Getting an ODBC Trace File">Section 20.1.4.8, “Getting an ODBC Trace File”</a>.
            </p></li><li><p>
              Make sure you are using the standard version of the
              driver, and not the debug version. The debug version
              includes additional checks and reporting measures.
            </p></li><li><p>
              Disable the Connector/ODBC driver trace and query logs.
              These options are enabled for each DSN, so make sure to
              examine only the DSN that you are using in your
              application. Within Windows, you can disable the
              Connector/ODBC and query logs by modifying the DSN
              configuration. Within Mac OS X and Unix, ensure that the
              driver trace (option value 4) and query logging (option
              value 524288) are not enabled.
            </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-usagenotes-functionality-query-timeout"></a>20.1.7.1.4. Setting ODBC Query Timeout in Windows</h5></div></div></div><p>
          For more information on how to set the query timeout on
          Microsoft Windows when executing queries through an ODBC
          connection, read the Microsoft knowledgebase document at
          <a href="http://support.microsoft.com/default.aspx?scid=kb%3Ben-us%3B153756" target="_top">http://support.microsoft.com/default.aspx?scid=kb%3Ben-us%3B153756</a>.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-usagenotes-apptips"></a>20.1.7.2. Connector/ODBC Application Specific Tips</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-apptips-microsoft">20.1.7.2.1. Using Connector/ODBC with Microsoft Applications</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-apptips-borland">20.1.7.2.2. Using Connector/ODBC with Borland Applications</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-apptips-coldfusion">20.1.7.2.3. Using Connector/ODBC with ColdFusion</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-apptips-openoffice">20.1.7.2.4. Using Connector/ODBC with OpenOffice.org</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-apptips-sambarserver">20.1.7.2.5. Using Connector/ODBC with Sambar Server</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-apptips-datajunction">20.1.7.2.6. Using Connector/ODBC with Pervasive Software DataJunction</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-apptips-vision">20.1.7.2.7. Using Connector/ODBC with SunSystems Vision</a></span></dt></dl></div><p>
        Most programs should work with Connector/ODBC, but for each of
        those listed here, there are specific notes and tips to improve
        or enhance the way you work with Connector/ODBC and these
        applications.
      </p><p>
        With all applications you should ensure that you are using the
        latest Connector/ODBC drivers, ODBC Manager and any supporting
        libraries and interfaces used by your application. For example,
        on Windows, using the latest version of Microsoft Data Access
        Components (MDAC) will improve the compatibility with ODBC in
        general, and with the Connector/ODBC driver.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-usagenotes-apptips-microsoft"></a>20.1.7.2.1. Using Connector/ODBC with Microsoft Applications</h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-apptips-microsoft-access">20.1.7.2.1.1. Microsoft Access</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-apptips-microsoft-excel">20.1.7.2.1.2. Microsoft Excel and Column Types</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-apptips-microsoft-visualbasic">20.1.7.2.1.3. Microsoft Visual Basic</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-apptips-microsoft-visualinterdev">20.1.7.2.1.4. Microsoft Visual InterDev</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-apptips-microsoft-visualobjects">20.1.7.2.1.5. Visual Objects</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-apptips-microsoft-ado">20.1.7.2.1.6. Microsoft ADO</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-apptips-microsoft-asp">20.1.7.2.1.7. Using Connector/ODBC with Active Server Pages (ASP)</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-apptips-microsoft-vb-asp">20.1.7.2.1.8. Using Connector/ODBC with Visual Basic (ADO, DAO and RDO) and ASP</a></span></dt></dl></div><p>
          The majority of Microsoft applications have been tested with
          Connector/ODBC, including Microsoft Office, Microsoft Access
          and the various programming languages supported within ASP and
          Microsoft Visual Studio.
        </p><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="connector-odbc-usagenotes-apptips-microsoft-access"></a>20.1.7.2.1.1. Microsoft Access</h6></div></div></div><a class="indexterm" name="id3626387"></a><p>
            To improve the integration between Microsoft Access and
            MySQL through Connector/ODBC:
          </p><div class="itemizedlist"><ul type="disc"><li><p>
                For all versions of Access, you should enable the
                Connector/ODBC <code class="literal">Return matching rows</code>
                option. For Access 2.0, you should additionally enable
                the <code class="literal">Simulate ODBC 1.0</code> option.
              </p></li><li><p>
                You should have a
                <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> column in all
                tables that you want to be able to update. For maximum
                portability, do not use a length specification in the
                column declaration (which is unsupported within MySQL in
                versions earlier than 4.1).
              </p></li><li><p>
                You should have a primary key in each MySQL table you
                want to use with Access. If not, new or updated rows may
                show up as <code class="literal">#DELETED#</code>.
              </p></li><li><p>
                Use only <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DOUBLE</code></a> float
                fields. Access fails when comparing with
                single-precision floats. The symptom usually is that new
                or updated rows may show up as
                <code class="literal">#DELETED#</code> or that you cannot find or
                update rows.
              </p></li><li><p>
                If you are using Connector/ODBC to link to a table that
                has a <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIGINT</code></a> column, the
                results are displayed as <code class="literal">#DELETED#</code>.
                The work around solution is:
              </p><div class="itemizedlist"><ul type="circle"><li><p>
                    Have one more dummy column with
                    <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> as the data
                    type.
                  </p></li><li><p>
                    Select the <code class="literal">Change BIGINT columns to
                    INT</code> option in the connection dialog in
                    ODBC DSN Administrator.
                  </p></li><li><p>
                    Delete the table link from Access and re-create it.
                  </p></li></ul></div><p>
                Old records may still display as
                <code class="literal">#DELETED#</code>, but newly added/updated
                records are displayed properly.
              </p></li><li><p>
                If you still get the error <code class="literal">Another user has
                changed your data</code> after adding a
                <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> column, the
                following trick may help you:
              </p><p>
                Do not use a <code class="literal">table</code> data sheet view.
                Instead, create a form with the fields you want, and use
                that <code class="literal">form</code> data sheet view. You should
                set the <code class="literal">DefaultValue</code> property for the
                <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> column to
                <a href="functions.html#function_now"><code class="literal">NOW()</code></a>. It may be a good
                idea to hide the
                <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> column from
                view so your users are not confused.
              </p></li><li><p>
                In some cases, Access may generate SQL statements that
                MySQL cannot understand. You can fix this by selecting
                <code class="literal">"Query|SQLSpecific|Pass-Through"</code> from
                the Access menu.
              </p></li><li><p>
                On Windows NT, Access reports
                <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> columns as
                <code class="literal">OLE OBJECTS</code>. If you want to have
                <code class="literal">MEMO</code> columns instead, you should
                change <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> columns to
                <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> with
                <a href="sql-syntax.html#alter-table" title="12.1.6. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>.
              </p></li><li><p>
                Access cannot always handle the MySQL
                <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATE</code></a> column properly. If
                you have a problem with these, change the columns to
                <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a>.
              </p></li><li><p>
                If you have in Access a column defined as
                <code class="literal">BYTE</code>, Access tries to export this as
                <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">TINYINT</code></a> instead of
                <code class="literal">TINYINT UNSIGNED</code>. This gives you
                problems if you have values larger than 127 in the
                column.
              </p></li><li><p>
                If you have very large (long) tables in Access, it might
                take a very long time to open them. Or you might run low
                on virtual memory and eventually get an <code class="literal">ODBC
                Query Failed</code> error and the table cannot open.
                To deal with this, select the following options:
              </p><div class="itemizedlist"><ul type="circle"><li><p>
                    Return Matching Rows (2)
                  </p></li><li><p>
                    Allow BIG Results (8).
                  </p></li></ul></div><p>
                These add up to a value of 10
                (<code class="literal">OPTION=10</code>).
              </p></li></ul></div><p>
            Some external articles and tips that may be useful when
            using Access, ODBC and Connector/ODBC:
          </p><div class="itemizedlist"><ul type="disc"><li><p>
                Read
                <a href="http://support.microsoft.com/support/kb/articles/Q124/9/01.asp?LN=EN-US&amp;SD=gn&amp;FR=0%3CP%3E" target="_top">How
                to Trap ODBC Login Error Messages in Access</a>
              </p></li><li><p>
                Optimizing Access ODBC Applications
              </p><div class="itemizedlist"><ul type="circle"><li><p>
                    <a href="http://support.microsoft.com/default.aspx?scid=kb;en-us;128808" target="_top">Optimizing
                    for Client/Server Performance</a>
                  </p></li><li><p>
                    <a href="http://support.microsoft.com/default.aspx?scid=kb;en-us;164481" target="_top">Tips
                    for Converting Applications to Using
                    ODBCDirect</a>
                  </p></li><li><p>
                    <a href="http://support.microsoft.com/default.aspx?scid=kb;EN-US;q99321" target="_top">Tips
                    for Optimizing Queries on Attached SQL
                    Tables</a>
                  </p></li></ul></div></li><li><p>
                For a list of tools that can be used with Access and
                ODBC data sources, refer to
                <a href="http://www.mysql.com/portal/software/convertors/" target="_top">converters</a>
                section for list of available tools.
              </p></li></ul></div><p class="mnmas-kb"><b>MySQL Enterprise</b>
              MySQL Enterprise subscribers will find more information
              about using ODBC with Access in Knowledge Base articles
              such as
              <a href="https://kb.mysql.com/view.php?id=5309" target="_top"> Use
              MySQL-Specific Syntax with Microsoft Access</a>. To
              subscribe to MySQL Enterprise see
              <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
            </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="connector-odbc-usagenotes-apptips-microsoft-excel"></a>20.1.7.2.1.2. Microsoft Excel and Column Types</h6></div></div></div><a class="indexterm" name="id3626935"></a><p>
            If you have problems importing data into Microsoft Excel,
            particularly numerical, date, and time values, this is
            probably because of a bug in Excel, where the column type of
            the source data is used to determine the data type when that
            data is inserted into a cell within the worksheet. The
            result is that Excel incorrectly identifies the content and
            this affects both the display format and the data when it is
            used within calculations.
          </p><p>
            To address this issue, use the
            <a href="functions.html#function_concat"><code class="literal">CONCAT()</code></a> function in your
            queries. The use of <a href="functions.html#function_concat"><code class="literal">CONCAT()</code></a>
            forces Excel to treat the value as a string, which Excel
            will then parse and usually correctly identify the embedded
            information.
          </p><p>
            However, even with this option, some data may be incorrectly
            formatted, even though the source data remains unchanged.
            Use the <code class="literal">Format Cells</code> option within Excel
            to change the format of the displayed information.
          </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="connector-odbc-usagenotes-apptips-microsoft-visualbasic"></a>20.1.7.2.1.3. Microsoft Visual Basic</h6></div></div></div><a class="indexterm" name="id3627002"></a><p>
            To be able to update a table, you must define a primary key
            for the table.
          </p><p>
            Visual Basic with ADO cannot handle big integers. This means
            that some queries like <a href="sql-syntax.html#show-processlist" title="12.5.6.30. SHOW PROCESSLIST Syntax"><code class="literal">SHOW
            PROCESSLIST</code></a> do not work properly. The fix is to
            use <code class="literal">OPTION=16384</code> in the ODBC connect
            string or to select the <code class="literal">Change BIGINT columns to
            INT</code> option in the Connector/ODBC connect screen.
            You may also want to select the <code class="literal">Return matching
            rows</code> option.
          </p><p class="mnmas-kb"><b>MySQL Enterprise</b>
              MySQL Enterprise subscribers can find a discussion about
              using VBA in the Knowledge Base article,
              <a href="https://kb.mysql.com/view.php?id=5308" target="_top">
              MySQL-Specific Syntax with VBA</a>. To subscribe to
              MySQL Enterprise see
              <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
            </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="connector-odbc-usagenotes-apptips-microsoft-visualinterdev"></a>20.1.7.2.1.4. Microsoft Visual InterDev</h6></div></div></div><a class="indexterm" name="id3627090"></a><p>
            If you have a <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIGINT</code></a> in your
            result, you may get the error <code class="literal">[Microsoft][ODBC
            Driver Manager] Driver does not support this
            parameter</code>. Try selecting the <code class="literal">Change
            BIGINT columns to INT</code> option in the Connector/ODBC
            connect screen.
          </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="connector-odbc-usagenotes-apptips-microsoft-visualobjects"></a>20.1.7.2.1.5. Visual Objects</h6></div></div></div><a class="indexterm" name="id3627136"></a><p>
            You should select the <code class="literal">Don't optimize column
            widths</code> option.
          </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="connector-odbc-usagenotes-apptips-microsoft-ado"></a>20.1.7.2.1.6. Microsoft ADO</h6></div></div></div><a class="indexterm" name="id3627166"></a><p>
            When you are coding with the ADO API and Connector/ODBC, you
            need to pay attention to some default properties that aren't
            supported by the MySQL server. For example, using the
            <code class="literal">CursorLocation Property</code> as
            <code class="literal">adUseServer</code> returns a result of –1
            for the <code class="literal">RecordCount Property</code>. To have the
            right value, you need to set this property to
            <code class="literal">adUseClient</code>, as shown in the VB code
            here:
          </p><pre class="programlisting">Dim myconn As New ADODB.Connection
Dim myrs As New Recordset
Dim mySQL As String
Dim myrows As Long

myconn.Open "DSN=MyODBCsample"
mySQL = "SELECT * from user"
myrs.Source = mySQL
Set myrs.ActiveConnection = myconn
myrs.CursorLocation = adUseClient
myrs.Open
myrows = myrs.RecordCount

myrs.Close
myconn.Close
</pre><p>
            Another workaround is to use a <code class="literal">SELECT
            COUNT(*)</code> statement for a similar query to get the
            correct row count.
          </p><p>
            To find the number of rows affected by a specific SQL
            statement in ADO, use the <code class="literal">RecordsAffected</code>
            property in the ADO execute method. For more information on
            the usage of execute method, refer to
            <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/ado270/htm/mdmthcnnexecute.asp" target="_top">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/ado270/htm/mdmthcnnexecute.asp</a>.
          </p><p>
            For information, see
            <a href="http://support.microsoft.com/default.aspx?scid=kb;EN-US;q183606" target="_top">ActiveX
            Data Objects(ADO) Frequently Asked Questions</a>.
          </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="connector-odbc-usagenotes-apptips-microsoft-asp"></a>20.1.7.2.1.7. Using Connector/ODBC with Active Server Pages (ASP)</h6></div></div></div><a class="indexterm" name="id3627274"></a><p>
            You should select the <code class="literal">Return matching
            rows</code> option in the DSN.
          </p><p>
            For more information about how to access MySQL via ASP using
            Connector/ODBC, refer to the following articles:
          </p><div class="itemizedlist"><ul type="disc"><li><p>
                <a href="http://www.devarticles.com/c/a/ASP/Using-MyODBC-To-Access-Your-MySQL-Database-Via-ASP/" target="_top">Using
                MyODBC To Access Your MySQL Database Via ASP</a>
              </p></li><li><p>
                <a href="http://www.dwam.net/mysql/asp_myodbc.asp" target="_top">ASP
                and MySQL at DWAM.NT</a>
              </p></li></ul></div><p>
            A Frequently Asked Questions list for ASP can be found at
            <a href="http://support.microsoft.com/default.aspx?scid=/Support/ActiveServer/faq/data/adofaq.asp" target="_top">http://support.microsoft.com/default.aspx?scid=/Support/ActiveServer/faq/data/adofaq.asp</a>.
          </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="connector-odbc-usagenotes-apptips-microsoft-vb-asp"></a>20.1.7.2.1.8. Using Connector/ODBC with Visual Basic (ADO, DAO and RDO) and ASP</h6></div></div></div><p>
            Some articles that may help with Visual Basic and ASP:
          </p><div class="itemizedlist"><ul type="disc"><li><p>
                <a href="http://dev.mysql.com/tech-resources/articles/vb-blob-handling.html" target="_top">MySQL
                BLOB columns and Visual Basic 6</a> by Mike Hillyer
                (<code class="email">&lt;<a href="mailto:mike@openwin.org">mike@openwin.org</a>&gt;</code>).
              </p></li><li><p>
                <a href="http://dev.mysql.com/tech-resources/articles/visual-basic-datatypes.html" target="_top">How
                to map Visual basic data type to MySQL types</a> by
                Mike Hillyer (<code class="email">&lt;<a href="mailto:mike@openwin.org">mike@openwin.org</a>&gt;</code>).
              </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-usagenotes-apptips-borland"></a>20.1.7.2.2. Using Connector/ODBC with Borland Applications</h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-apptips-borland-builder">20.1.7.2.2.1. Using Connector/ODBC with Borland Builder 4</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-apptips-borland-delphi">20.1.7.2.2.2. Using Connector/ODBC with Delphi</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-usagenotes-apptips-borland-cppbuilder">20.1.7.2.2.3. Using Connector/ODBC with C++ Builder</a></span></dt></dl></div><a class="indexterm" name="id3627409"></a><a class="indexterm" name="id3627421"></a><p>
          With all Borland applications where the Borland Database
          Engine (BDE) is used, follow these steps to improve
          compatibility:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Update to BDE 3.2 or newer.
            </p></li><li><p>
              Enable the <code class="literal">Don't optimize column widths</code>
              option in the DSN.
            </p></li><li><p>
              Enabled the <code class="literal">Return matching rows</code> option
              in the DSN.
            </p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="connector-odbc-usagenotes-apptips-borland-builder"></a>20.1.7.2.2.1. Using Connector/ODBC with Borland Builder 4</h6></div></div></div><a class="indexterm" name="id3627488"></a><p>
            When you start a query, you can use the
            <code class="literal">Active</code> property or the
            <code class="literal">Open</code> method. Note that
            <code class="literal">Active</code> starts by automatically issuing a
            <code class="literal">SELECT * FROM ...</code> query. That may not be
            a good thing if your tables are large.
          </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="connector-odbc-usagenotes-apptips-borland-delphi"></a>20.1.7.2.2.2. Using Connector/ODBC with Delphi</h6></div></div></div><a class="indexterm" name="id3627538"></a><p>
            Also, here is some potentially useful Delphi code that sets
            up both an ODBC entry and a BDE entry for Connector/ODBC.
            The BDE entry requires a BDE Alias Editor that is free at a
            Delphi Super Page near you. (Thanks to Bryan Brunton
            <code class="email">&lt;<a href="mailto:bryan@flesherfab.com">bryan@flesherfab.com</a>&gt;</code> for this):
          </p><pre class="programlisting">fReg:= TRegistry.Create;
fReg.OpenKey('\Software\ODBC\ODBC.INI\DocumentsFab', True);
fReg.WriteString('Database', 'Documents');
fReg.WriteString('Description', ' ');
fReg.WriteString('Driver', 'C:\WINNT\System32\myodbc.dll');
fReg.WriteString('Flag', '1');
fReg.WriteString('Password', '');
fReg.WriteString('Port', ' ');
fReg.WriteString('Server', 'xmark');
fReg.WriteString('User', 'winuser');
fReg.OpenKey('\Software\ODBC\ODBC.INI\ODBC Data Sources', True);
fReg.WriteString('DocumentsFab', 'MySQL');
fReg.CloseKey;
fReg.Free;

Memo1.Lines.Add('DATABASE NAME=');
Memo1.Lines.Add('USER NAME=');
Memo1.Lines.Add('ODBC DSN=DocumentsFab');
Memo1.Lines.Add('OPEN MODE=READ/WRITE');
Memo1.Lines.Add('BATCH COUNT=200');
Memo1.Lines.Add('LANGDRIVER=');
Memo1.Lines.Add('MAX ROWS=-1');
Memo1.Lines.Add('SCHEMA CACHE DIR=');
Memo1.Lines.Add('SCHEMA CACHE SIZE=8');
Memo1.Lines.Add('SCHEMA CACHE TIME=-1');
Memo1.Lines.Add('SQLPASSTHRU MODE=SHARED AUTOCOMMIT');
Memo1.Lines.Add('SQLQRYMODE=');
Memo1.Lines.Add('ENABLE SCHEMA CACHE=FALSE');
Memo1.Lines.Add('ENABLE BCD=FALSE');
Memo1.Lines.Add('ROWSET SIZE=20');
Memo1.Lines.Add('BLOBS TO CACHE=64');
Memo1.Lines.Add('BLOB SIZE=32');

AliasEditor.Add('DocumentsFab','MySQL',Memo1.Lines);
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="connector-odbc-usagenotes-apptips-borland-cppbuilder"></a>20.1.7.2.2.3. Using Connector/ODBC with C++ Builder</h6></div></div></div><a class="indexterm" name="id3627596"></a><p>
            Tested with BDE 3.0. The only known problem is that when the
            table schema changes, query fields are not updated. BDE,
            however, does not seem to recognize primary keys, only the
            index named <code class="literal">PRIMARY</code>, although this has
            not been a problem.
          </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-usagenotes-apptips-coldfusion"></a>20.1.7.2.3. Using Connector/ODBC with ColdFusion</h5></div></div></div><a class="indexterm" name="id3627630"></a><p>
          The following information is taken from the ColdFusion
          documentation:
        </p><p>
          Use the following information to configure ColdFusion Server
          for Linux to use the <code class="literal">unixODBC</code> driver with
          Connector/ODBC for MySQL data sources. You can download
          Connector/ODBC at
          <a href="http://dev.mysql.com/downloads/connector/odbc/" target="_top">http://dev.mysql.com/downloads/connector/odbc/</a>.
        </p><p>
          ColdFusion version 4.5.1 allows you to us the ColdFusion
          Administrator to add the MySQL data source. However, the
          driver is not included with ColdFusion version 4.5.1. Before
          the MySQL driver appears in the ODBC data sources drop-down
          list, you must build and copy the Connector/ODBC driver to
          <code class="filename">/opt/coldfusion/lib/libmyodbc.so</code>.
        </p><p>
          The Contrib directory contains the program
          <code class="filename">mydsn-<em class="replaceable"><code>xxx</code></em>.zip</code>
          which allows you to build and remove the DSN registry file for
          the Connector/ODBC driver on ColdFusion applications.
        </p><p>
          For more information and guides on using ColdFusion and
          Connector/ODBC, see the following external sites:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              <a href="http://www.macromedia.com/v1/handlers/index.cfm?ID=11328&amp;Method=Full&amp;PageCall=/support/index.cfm" target="_top">Troubleshooting
              Data Sources and Database Connectivity for Unix
              Platforms</a>.
            </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-usagenotes-apptips-openoffice"></a>20.1.7.2.4. Using Connector/ODBC with OpenOffice.org</h5></div></div></div><p>
          Open Office (<a href="http://www.openoffice.org" target="_top">http://www.openoffice.org</a>)
          <a href="http://wiki.services.openoffice.org/wiki/Connect_MySQL_and_Base" target="_top">How-to:
          MySQL + OpenOffice</a>.
          <a href="http://www.unixodbc.org/doc/OOoMySQL.pdf" target="_top">How-to:
          OpenOffice + MyODBC + unixODBC</a>.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-usagenotes-apptips-sambarserver"></a>20.1.7.2.5. Using Connector/ODBC with Sambar Server</h5></div></div></div><p>
          Sambar Server (<a href="http://www.sambarserver.info" target="_top">http://www.sambarserver.info</a>)
          <a href="http://www.sambarserver.info/article.php?sid=66" target="_top">How-to:
          MyODBC + SambarServer + MySQL</a>.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-usagenotes-apptips-datajunction"></a>20.1.7.2.6. Using Connector/ODBC with Pervasive Software DataJunction</h5></div></div></div><a class="indexterm" name="id3627789"></a><p>
          You have to change it to output
          <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> rather than
          <a href="data-types.html#enum" title="10.4.4. The ENUM Type"><code class="literal">ENUM</code></a>, as it exports the latter
          in a manner that causes MySQL problems.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-odbc-usagenotes-apptips-vision"></a>20.1.7.2.7. Using Connector/ODBC with SunSystems Vision</h5></div></div></div><a class="indexterm" name="id3627828"></a><p>
          You should select the <code class="literal">Return matching rows</code>
          option.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-errors"></a>20.1.7.3. Connector/ODBC Errors and Resolutions (FAQ)</h4></div></div></div><p>
        The following section details some common errors and their
        suggested fix or alternative solution. If you are still
        experiencing problems, use the Connector/ODBC mailing list; see
        <a href="connectors-apis.html#connector-odbc-support-community" title="20.1.8.1. Connector/ODBC Community Support">Section 20.1.8.1, “Connector/ODBC Community Support”</a>.
      </p><p>
        Many problems can be resolved by upgrading your Connector/ODBC
        drivers to the latest available release. On Windows, you should
        also make sure that you have the latest versions of the
        Microsoft Data Access Components (MDAC) installed.
      </p><p><span class="bold"><strong>Questions</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-1">20.1.7.3.1: </a>
              I have installed Connector/ODBC on Windows XP x64 Edition
              or Windows Server 2003 R2 x64. The installation completed
              successfully, but the Connector/ODBC driver does not
              appear in <code class="literal">ODBC Data Source
              Administrator</code>.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-2">20.1.7.3.2: </a>
              When connecting or using the <span class="guibutton">Test</span>
              button in <code class="literal">ODBC Data Source
              Administrator</code> I get error 10061 (Cannot connect
              to server)
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-3">20.1.7.3.3: </a>
              The following error is reported when using transactions:
              <code class="literal">Transactions are not enabled</code>
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-4">20.1.7.3.4: </a>
              Access reports records as <code class="literal">#DELETED#</code>
              when inserting or updating records in linked tables.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-5">20.1.7.3.5: </a>
              How do I handle Write Conflicts or Row Location errors?
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-6">20.1.7.3.6: </a>
              Exporting data from Access 97 to MySQL reports a
              <code class="literal">Syntax Error</code>.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-7">20.1.7.3.7: </a>
              Exporting data from Microsoft DTS to MySQL reports a
              <code class="literal">Syntax Error</code>.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-8">20.1.7.3.8: </a>
              Using ODBC.NET with Connector/ODBC, while fetching empty
              string (0 length), it starts giving the SQL_NO_DATA
              exception.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-9">20.1.7.3.9: </a>
              Using <code class="literal">SELECT COUNT(*) FROM
              <em class="replaceable"><code>tbl_name</code></em></code> within
              Visual Basic and ASP returns an error.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-10">20.1.7.3.10: </a>
              Using the <code class="function">AppendChunk()</code> or
              <code class="function">GetChunk()</code> ADO methods, the
              <code class="literal">Multiple-step operation generated errors. Check
              each status value</code> error is returned.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-11">20.1.7.3.11: </a>
              Access Returns <code class="literal">Another user had modified the
              record that you have modified</code> while editing
              records on a Linked Table.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-12">20.1.7.3.12: </a>
              When linking an application directly to the Connector/ODBC
              library under Unix/Linux, the application crashes.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-13">20.1.7.3.13: </a>
              Applications in the Microsoft Office suite are unable to
              update tables that have
              <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATE</code></a> or
              <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> columns.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-14">20.1.7.3.14: </a>
              When connecting Connector/ODBC 5.x (Beta) to a MySQL 4.x
              server, the error <code class="literal">1044 Access denied for user
              'xxx'@'%' to database 'information_schema'</code> is
              returned.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-15">20.1.7.3.15: </a>
              When calling <code class="literal">SQLTables</code>, the error
              <code class="literal">S1T00</code> is returned, but I cannot find
              this in the list of error numbers for Connector/ODBC.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-16">20.1.7.3.16: </a>
              When linking to tables in Access 2000 and generating links
              to tables programmatically, rather than through the table
              designer interface, you may get errors about tables not
              existing.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-17">20.1.7.3.17: </a>
              When I try to use batched statements, the excution of the
              batched statements fails.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-18">20.1.7.3.18: </a>
              When connecting to a MySQL server using ADODB and Excel,
              occasionally the application fails to communicate with the
              server and the error <code class="literal">Got an error reading
              communication packets</code> appears in the error log.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-19">20.1.7.3.19: </a>
              When using some applications to access a MySQL server
              using C/ODBC and outer joins, an error is reported
              regarding the Outer Join Escape Sequence.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-20">20.1.7.3.20: </a>
              I can correctly store extended characters in the database
              (Hebrew/CJK) using C/ODBC 5.1, but when I retrieve the
              data, the text is not formatted correctly and I get
              garbled characters.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-21">20.1.7.3.21: </a>
              I have a duplicate MySQL Connector/ODBC entry within my
              <span class="guilabel">Installed Programs</span> list, but I cannot
              delete one of them.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-22">20.1.7.3.22: </a>
              When submitting queries with parameter binding using
              <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a>, my field values are
              being truncated to 255 characters.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-1-7-3-1-23">20.1.7.3.23: </a>
              Is it possible to disable data-at-execution using a flag?
            </p></li></ul></div><p><span class="bold"><strong>Questions and Answers</strong></span></p><p><a name="qandaitem-20-1-7-3-1-1"></a><span class="bold"><strong>20.1.7.3.1: </strong></span><span class="bold"><strong>
              I have installed Connector/ODBC on Windows XP x64 Edition
              or Windows Server 2003 R2 x64. The installation completed
              successfully, but the Connector/ODBC driver does not
              appear in <code class="literal">ODBC Data Source
              Administrator</code>.
            </strong></span></p><p>
              This is not a bug, but is related to the way Windows x64
              editions operate with the ODBC driver. On Windows x64
              editions, the Connector/ODBC driver is installed in the
              <code class="filename">%SystemRoot%\SysWOW64</code> folder.
              However, the default <code class="literal">ODBC Data Source
              Administrator</code> that is available through the
              <code class="filename">Administrative Tools</code> or
              <code class="filename">Control Panel</code> in Windows x64 Editions
              is located in the
              <code class="filename">%SystemRoot%\system32</code> folder, and
              only searches this folder for ODBC drivers.
            </p><p>
              On Windows x64 editions, you should use the ODBC
              administration tool located at
              <code class="filename">%SystemRoot%\SysWOW64\odbcad32.exe</code>,
              this will correctly locate the installed Connector/ODBC
              drivers and enable you to create a Connector/ODBC DSN.
            </p><p>
              This issue was originally reported as <a href="http://bugs.mysql.com/20301" target="_top">Bug#20301</a>.
            </p><p><a name="qandaitem-20-1-7-3-1-2"></a><span class="bold"><strong>20.1.7.3.2: </strong></span><span class="bold"><strong>
              When connecting or using the <span class="guibutton">Test</span>
              button in <code class="literal">ODBC Data Source
              Administrator</code> I get error 10061 (Cannot connect
              to server)
            </strong></span></p><p>
              This error can be raised by a number of different issues,
              including server problems, network problems, and firewall
              and port blocking problems. For more information, see
              <a href="error-handling.html#can-not-connect-to-server" title="B.1.2.2. Can't connect to [local] MySQL server">Section B.1.2.2, “<code class="literal">Can't connect to [local] MySQL server</code>”</a>.
            </p><p><a name="qandaitem-20-1-7-3-1-3"></a><span class="bold"><strong>20.1.7.3.3: </strong></span><span class="bold"><strong>
              The following error is reported when using transactions:
              <code class="literal">Transactions are not enabled</code>
            </strong></span></p><p>
              This error indicates that you are trying to use
              transactions with a MySQL table that does not support
              transactions. Transactions are supported within MySQL when
              using the <code class="literal">InnoDB</code> database engine. In
              versions of MySQL before Mysql 5.1 you may also use the
              <code class="literal">BDB</code> engine.
            </p><p>
              You should check the following before continuing:
            </p><div class="itemizedlist"><ul type="disc"><li><p>
                  Verify that your MySQL server supports a transactional
                  database engine. Use <a href="sql-syntax.html#show-engines" title="12.5.6.17. SHOW ENGINES Syntax"><code class="literal">SHOW
                  ENGINES</code></a> to obtain a list of the available
                  engine types.
                </p></li><li><p>
                  Verify that the tables you are updating use a
                  transaction database engine.
                </p></li><li><p>
                  Ensure that you have not enabled the <code class="literal">disable
                  transactions</code> option in your DSN.
                </p></li></ul></div><p><a name="qandaitem-20-1-7-3-1-4"></a><span class="bold"><strong>20.1.7.3.4: </strong></span><span class="bold"><strong>
              Access reports records as <code class="literal">#DELETED#</code>
              when inserting or updating records in linked tables.
            </strong></span></p><p>
              If the inserted or updated records are shown as
              <code class="literal">#DELETED#</code> in the access, then:
            </p><div class="itemizedlist"><ul type="disc"><li><p>
                  If you are using Access 2000, you should get and
                  install the newest (version 2.6 or higher) Microsoft
                  MDAC (<code class="literal">Microsoft Data Access
                  Components</code>) from
                  <a href="http://support.microsoft.com/kb/110093" target="_top">http://support.microsoft.com/kb/110093</a>.
                  This fixes a bug in Access that when you export data
                  to MySQL, the table and column names aren't specified.
                </p><p>
                  You should also get and apply the Microsoft Jet 4.0
                  Service Pack 5 (SP5) which can be found at
                  <a href="http://support.microsoft.com/default.aspx?scid=kb;EN-US;q239114" target="_top">http://support.microsoft.com/default.aspx?scid=kb;EN-US;q239114</a>.
                  This fixes some cases where columns are marked as
                  <code class="literal">#DELETED#</code> in Access.
                </p></li><li><p>
                  For all versions of Access, you should enable the
                  Connector/ODBC <code class="literal">Return matching rows</code>
                  option. For Access 2.0, you should additionally enable
                  the <code class="literal">Simulate ODBC 1.0</code> option.
                </p></li><li><p>
                  You should have a timestamp in all tables that you
                  want to be able to update.
                </p></li><li><p>
                  You should have a primary key in the table. If not,
                  new or updated rows may show up as
                  <code class="literal">#DELETED#</code>.
                </p></li><li><p>
                  Use only <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DOUBLE</code></a> float
                  fields. Access fails when comparing with
                  single-precision floats. The symptom usually is that
                  new or updated rows may show up as
                  <code class="literal">#DELETED#</code> or that you cannot find
                  or update rows.
                </p></li><li><p>
                  If you are using Connector/ODBC to link to a table
                  that has a <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIGINT</code></a>
                  column, the results are displayed as
                  <code class="literal">#DELETED</code>. The work around solution
                  is:
                </p><div class="itemizedlist"><ul type="circle"><li><p>
                      Have one more dummy column with
                      <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> as the
                      data type.
                    </p></li><li><p>
                      Select the <code class="literal">Change BIGINT columns to
                      INT</code> option in the connection dialog in
                      ODBC DSN Administrator.
                    </p></li><li><p>
                      Delete the table link from Access and re-create
                      it.
                    </p></li></ul></div><p>
                  Old records still display as
                  <code class="literal">#DELETED#</code>, but newly added/updated
                  records are displayed properly.
                </p></li></ul></div><p><a name="qandaitem-20-1-7-3-1-5"></a><span class="bold"><strong>20.1.7.3.5: </strong></span><span class="bold"><strong>
              How do I handle Write Conflicts or Row Location errors?
            </strong></span></p><p>
              If you see the following errors, select the
              <code class="literal">Return Matching Rows</code> option in the DSN
              configuration dialog, or specify
              <code class="literal">OPTION=2</code>, as the connection parameter:
            </p><pre class="programlisting">Write Conflict. Another user has changed your data.

Row cannot be located for updating. Some values may have been changed
since it was last read.
</pre><p><a name="qandaitem-20-1-7-3-1-6"></a><span class="bold"><strong>20.1.7.3.6: </strong></span><span class="bold"><strong>
              Exporting data from Access 97 to MySQL reports a
              <code class="literal">Syntax Error</code>.
            </strong></span></p><p>
              This error is specific to Access 97 and versions of
              Connector/ODBC earlier than 3.51.02. Update to the latest
              version of the Connector/ODBC driver to resolve this
              problem.
            </p><p><a name="qandaitem-20-1-7-3-1-7"></a><span class="bold"><strong>20.1.7.3.7: </strong></span><span class="bold"><strong>
              Exporting data from Microsoft DTS to MySQL reports a
              <code class="literal">Syntax Error</code>.
            </strong></span></p><p>
              This error occurs only with MySQL tables using the
              <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> or
              <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> data types. You can
              fix this error by upgrading your Connector/ODBC driver to
              version 3.51.02 or higher.
            </p><p><a name="qandaitem-20-1-7-3-1-8"></a><span class="bold"><strong>20.1.7.3.8: </strong></span><span class="bold"><strong>
              Using ODBC.NET with Connector/ODBC, while fetching empty
              string (0 length), it starts giving the SQL_NO_DATA
              exception.
            </strong></span></p><p>
              You can get the patch that addresses this problem from
              <a href="http://support.microsoft.com/default.aspx?scid=kb;EN-US;q319243" target="_top">http://support.microsoft.com/default.aspx?scid=kb;EN-US;q319243</a>.
            </p><p><a name="qandaitem-20-1-7-3-1-9"></a><span class="bold"><strong>20.1.7.3.9: </strong></span><span class="bold"><strong>
              Using <code class="literal">SELECT COUNT(*) FROM
              <em class="replaceable"><code>tbl_name</code></em></code> within
              Visual Basic and ASP returns an error.
            </strong></span></p><p>
              This error occurs because the
              <a href="functions.html#function_count"><code class="literal">COUNT(*)</code></a> expression is
              returning a <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIGINT</code></a>, and ADO
              cannot make sense of a number this big. Select the
              <code class="literal">Change BIGINT columns to INT</code> option
              (option value 16384).
            </p><p><a name="qandaitem-20-1-7-3-1-10"></a><span class="bold"><strong>20.1.7.3.10: </strong></span><span class="bold"><strong>
              Using the <code class="function">AppendChunk()</code> or
              <code class="function">GetChunk()</code> ADO methods, the
              <code class="literal">Multiple-step operation generated errors. Check
              each status value</code> error is returned.
            </strong></span></p><p>
              The <code class="function">GetChunk()</code> and
              <code class="function">AppendChunk()</code> methods from ADO
              doesn't work as expected when the cursor location is
              specified as <code class="literal">adUseServer</code>. On the other
              hand, you can overcome this error by using
              <code class="literal">adUseClient</code>.
            </p><p>
              A simple example can be found from
              <a href="http://www.dwam.net/iishelp/ado/docs/adomth02_4.htm" target="_top">http://www.dwam.net/iishelp/ado/docs/adomth02_4.htm</a>
            </p><p><a name="qandaitem-20-1-7-3-1-11"></a><span class="bold"><strong>20.1.7.3.11: </strong></span><span class="bold"><strong>
              Access Returns <code class="literal">Another user had modified the
              record that you have modified</code> while editing
              records on a Linked Table.
            </strong></span></p><p>
              In most cases, this can be solved by doing one of the
              following things:
            </p><div class="itemizedlist"><ul type="disc"><li><p>
                  Add a primary key for the table if one doesn't exist.
                </p></li><li><p>
                  Add a timestamp column if one doesn't exist.
                </p></li><li><p>
                  Only use double-precision float fields. Some programs
                  may fail when they compare single-precision floats.
                </p></li></ul></div><p>
              If these strategies do not help, you should start by
              making a log file from the ODBC manager (the log you get
              when requesting logs from ODBCADMIN) and a Connector/ODBC
              log to help you figure out why things go wrong. For
              instructions, see
              <a href="connectors-apis.html#connector-odbc-configuration-trace" title="20.1.4.8. Getting an ODBC Trace File">Section 20.1.4.8, “Getting an ODBC Trace File”</a>.
            </p><p><a name="qandaitem-20-1-7-3-1-12"></a><span class="bold"><strong>20.1.7.3.12: </strong></span><span class="bold"><strong>
              When linking an application directly to the Connector/ODBC
              library under Unix/Linux, the application crashes.
            </strong></span></p><p>
              Connector/ODBC 3.51 under Unix/Linux is not compatible
              with direct application linking. You must use a driver
              manager, such as iODBC or unixODBC to connect to an ODBC
              source.
            </p><p><a name="qandaitem-20-1-7-3-1-13"></a><span class="bold"><strong>20.1.7.3.13: </strong></span><span class="bold"><strong>
              Applications in the Microsoft Office suite are unable to
              update tables that have
              <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATE</code></a> or
              <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> columns.
            </strong></span></p><p>
              This is a known issue with Connector/ODBC. You must ensure
              that the field has a default value (rather than
              <code class="literal">NULL</code> and that the default value is
              non-zeo (i.e. the default value is not <code class="literal">0000-00-00
              00:00:00</code>).
            </p><p><a name="qandaitem-20-1-7-3-1-14"></a><span class="bold"><strong>20.1.7.3.14: </strong></span><span class="bold"><strong>
              When connecting Connector/ODBC 5.x (Beta) to a MySQL 4.x
              server, the error <code class="literal">1044 Access denied for user
              'xxx'@'%' to database 'information_schema'</code> is
              returned.
            </strong></span></p><p>
              Connector/ODBC 5.x is designed to work with MySQL 5.0 or
              later, taking advantage of the
              <code class="literal">INFORMATION_SCHEMA</code> database to
              determine data definition information. Support for MySQL
              4.1 is planned for the final release.
            </p><p><a name="qandaitem-20-1-7-3-1-15"></a><span class="bold"><strong>20.1.7.3.15: </strong></span><span class="bold"><strong>
              When calling <code class="literal">SQLTables</code>, the error
              <code class="literal">S1T00</code> is returned, but I cannot find
              this in the list of error numbers for Connector/ODBC.
            </strong></span></p><p>
              The <code class="literal">S1T00</code> error indicates that a
              general timeout has occurred within the ODBC system and is
              not a MySQL error. Typically it indicates that the
              connection you are using is stale, the server is too busy
              to accept your request or that the server has gone away.
            </p><p><a name="qandaitem-20-1-7-3-1-16"></a><span class="bold"><strong>20.1.7.3.16: </strong></span><span class="bold"><strong>
              When linking to tables in Access 2000 and generating links
              to tables programmatically, rather than through the table
              designer interface, you may get errors about tables not
              existing.
            </strong></span></p><p>
              There is a known issue with a specific version of the
              <code class="filename">msjet40.dll</code> that exhibits this issue.
              The version affected is 4.0.9025.0. Reverting to an older
              version will enable you to create the links. If you have
              recently updated your version, check your
              <code class="filename">WINDOWS</code> directory for the older
              version of the file and copy it to the drivers directory.
            </p><p><a name="qandaitem-20-1-7-3-1-17"></a><span class="bold"><strong>20.1.7.3.17: </strong></span><span class="bold"><strong>
              When I try to use batched statements, the excution of the
              batched statements fails.
            </strong></span></p><p>
              Batched statement support was added in 3.51.18. Support
              for batched statements is not enabled by default. You must
              enable option <code class="literal">FLAG_MULTI_STATEMENTS</code>,
              value 67108864, or select the <span class="guilabel">Allow multiple
              statements</span> flag within a GUI configuration.
            </p><p><a name="qandaitem-20-1-7-3-1-18"></a><span class="bold"><strong>20.1.7.3.18: </strong></span><span class="bold"><strong>
              When connecting to a MySQL server using ADODB and Excel,
              occasionally the application fails to communicate with the
              server and the error <code class="literal">Got an error reading
              communication packets</code> appears in the error log.
            </strong></span></p><p>
              This error may be related to Keyboard Logger 1.1 from
              PanteraSoft.com, which is known to interfere with the
              network communication between MySQL Connector/ODBC and
              MySQL.
            </p><p><a name="qandaitem-20-1-7-3-1-19"></a><span class="bold"><strong>20.1.7.3.19: </strong></span><span class="bold"><strong>
              When using some applications to access a MySQL server
              using C/ODBC and outer joins, an error is reported
              regarding the Outer Join Escape Sequence.
            </strong></span></p><p>
              This is a known issue with MySQL Connector/ODBC which is
              not correctly parsing the "Outer Join Escape Sequence", as
              per the specs at
              <a href="http://msdn2.microsoft.com/en-us/library/ms710299.aspx" target="_top">Microsoft
              ODBC Specs</a>. Currently, Connector/ODBC will return
              value &gt; 0 when asked for
              <code class="literal">SQL_OJ_CAPABILITIES</code> even though no
              parsing takes place in the driver to handle the outer join
              escape sequence.
            </p><p><a name="qandaitem-20-1-7-3-1-20"></a><span class="bold"><strong>20.1.7.3.20: </strong></span><span class="bold"><strong>
              I can correctly store extended characters in the database
              (Hebrew/CJK) using C/ODBC 5.1, but when I retrieve the
              data, the text is not formatted correctly and I get
              garbled characters.
            </strong></span></p><p>
              When using ASP and UTF8 characters you should add the
              following to your ASP files to ensure that the data
              returned is correctly encoded:
            </p><pre class="programlisting">Response.CodePage = 65001
Response.CharSet = "utf-8"</pre><p><a name="qandaitem-20-1-7-3-1-21"></a><span class="bold"><strong>20.1.7.3.21: </strong></span><span class="bold"><strong>
              I have a duplicate MySQL Connector/ODBC entry within my
              <span class="guilabel">Installed Programs</span> list, but I cannot
              delete one of them.
            </strong></span></p><p>
              This problem can occur when you upgrade an existing
              Connector/ODBC installation, rather than removing and then
              installing the updated version.
            </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
                To fix the problem you should use any working
                uninstallers to remove existing installations and then
                may have to edit the contents of the registry. Make sure
                you have a backup of your registry information before
                attempting any editing of the registry contents.
              </p></div><p><a name="qandaitem-20-1-7-3-1-22"></a><span class="bold"><strong>20.1.7.3.22: </strong></span><span class="bold"><strong>
              When submitting queries with parameter binding using
              <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a>, my field values are
              being truncated to 255 characters.
            </strong></span></p><p>
              You should ensure that the
              <code class="literal">FLAG_BIG_PACKETS</code> option is set for your
              connection. This removes the 255 character limitation on
              bound parameters.
            </p><p><a name="qandaitem-20-1-7-3-1-23"></a><span class="bold"><strong>20.1.7.3.23: </strong></span><span class="bold"><strong>
              Is it possible to disable data-at-execution using a flag?
            </strong></span></p><p>
              If you do not wish to use data-at-execution, simply remove
              the corresponding calls. For example:
            </p><pre class="programlisting">SQLLEN ylen = SQL_LEN_DATA_AT_EXEC(10);
SQLBindCol(hstmt,2,SQL_C_BINARY, buf, 10, &amp;ylen);
</pre><p>
              Would become:
            </p><pre class="programlisting">SQLBindCol(hstmt,2,SQL_C_BINARY, buf, 10, NULL);
</pre><p>
              Note that in the call to <code class="literal">SQLBindCol()</code>,
              &amp;ylen has been replaced by NULL.
            </p><p>
              For further information please refer to the
              <a href="http://msdn.microsoft.com/en-us/library/ms711010(VS.85).aspx" target="_top">MSDN
              documentation</a> for <code class="literal">SQLBindCol()</code>.
            </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-odbc-support"></a>20.1.8. Connector/ODBC Support</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-odbc-support-community">20.1.8.1. Connector/ODBC Community Support</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-support-bug-report">20.1.8.2. How to Report Connector/ODBC Problems or Bugs</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-support-patch-submission">20.1.8.3. How to Submit a Connector/ODBC Patch</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-support-changehistory">20.1.8.4. Connector/ODBC Change History</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-odbc-support-credits">20.1.8.5. Credits</a></span></dt></dl></div><a class="indexterm" name="id3629558"></a><a class="indexterm" name="id3629571"></a><a class="indexterm" name="id3629584"></a><a class="indexterm" name="id3629596"></a><a class="indexterm" name="id3629609"></a><p>
      There are many different places where you can get support for
      using Connector/ODBC. You should always try the Connector/ODBC
      Mailing List or Connector/ODBC Forum. See
      <a href="connectors-apis.html#connector-odbc-support-community" title="20.1.8.1. Connector/ODBC Community Support">Section 20.1.8.1, “Connector/ODBC Community Support”</a>, for help
      before reporting a specific bug or issue to MySQL.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-support-community"></a>20.1.8.1. Connector/ODBC Community Support</h4></div></div></div><p>
        Sun Microsystems, Inc. provides assistance to the user community
        by means of its mailing lists. For Connector/ODBC-related
        issues, you can get help from experienced users by using the
        <code class="email">&lt;<a href="mailto:myodbc@lists.mysql.com">myodbc@lists.mysql.com</a>&gt;</code> mailing list. Archives are
        available online at
        <a href="http://lists.mysql.com/myodbc" target="_top">http://lists.mysql.com/myodbc</a>.
      </p><p>
        For information about subscribing to MySQL mailing lists or to
        browse list archives, visit
        <a href="http://lists.mysql.com/" target="_top">http://lists.mysql.com/</a>. See
        <a href="introduction.html#mailing-lists" title="1.5.1. MySQL Mailing Lists">Section 1.5.1, “MySQL Mailing Lists”</a>.
      </p><p>
        Community support from experienced users is also available
        through the <a href="http://forums.mysql.com/list.php?37" target="_top">ODBC
        Forum</a>. You may also find help from other users in the
        other MySQL Forums, located at
        <a href="http://forums.mysql.com" target="_top">http://forums.mysql.com</a>. See
        <a href="introduction.html#forums" title="1.5.2. MySQL Community Support at the MySQL Forums">Section 1.5.2, “MySQL Community Support at the MySQL Forums”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-support-bug-report"></a>20.1.8.2. How to Report Connector/ODBC Problems or Bugs</h4></div></div></div><p>
        If you encounter difficulties or problems with Connector/ODBC,
        you should start by making a log file from the <code class="literal">ODBC
        Manager</code> (the log you get when requesting logs from
        <code class="literal">ODBC ADMIN</code>) and Connector/ODBC. The procedure
        for doing this is described in
        <a href="connectors-apis.html#connector-odbc-configuration-trace" title="20.1.4.8. Getting an ODBC Trace File">Section 20.1.4.8, “Getting an ODBC Trace File”</a>.
      </p><p>
        Check the Connector/ODBC trace file to find out what could be
        wrong. You should be able to determine what statements were
        issued by searching for the string
        <code class="literal">&gt;mysql_real_query</code> in the
        <code class="filename">myodbc.log</code> file.
      </p><p>
        You should also try issuing the statements from the
        <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> client program or from
        <code class="literal">admndemo</code>. This helps you determine whether
        the error is in Connector/ODBC or MySQL.
      </p><p>
        If you find out something is wrong, please only send the
        relevant rows (maximum 40 rows) to the <code class="literal">myodbc</code>
        mailing list. See <a href="introduction.html#mailing-lists" title="1.5.1. MySQL Mailing Lists">Section 1.5.1, “MySQL Mailing Lists”</a>. Please never
        send the whole Connector/ODBC or ODBC log file!
      </p><p>
        You should ideally include the following information with the
        email:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Operating system and version
          </p></li><li><p>
            Connector/ODBC version
          </p></li><li><p>
            ODBC Driver Manager type and version
          </p></li><li><p>
            MySQL server version
          </p></li><li><p>
            ODBC trace from Driver Manager
          </p></li><li><p>
            Connector/ODBC log file from Connector/ODBC driver
          </p></li><li><p>
            Simple reproducible sample
          </p></li></ul></div><p>
        Remember that the more information you can supply to us, the
        more likely it is that we can fix the problem!
      </p><p>
        Also, before posting the bug, check the MyODBC mailing list
        archive at <a href="http://lists.mysql.com/myodbc" target="_top">http://lists.mysql.com/myodbc</a>.
      </p><p>
        If you are unable to find out what is wrong, the last option is
        to create an archive in <span><strong class="command">tar</strong></span> or Zip format
        that contains a Connector/ODBC trace file, the ODBC log file,
        and a <code class="filename">README</code> file that explains the
        problem. You can send this to <a href="ftp://ftp.mysql.com/pub/mysql/upload/" target="_top">ftp://ftp.mysql.com/pub/mysql/upload/</a>.
        Only MySQL engineers have access to the files you upload, and we
        are very discreet with the data.
      </p><p>
        If you can create a program that also demonstrates the problem,
        please include it in the archive as well.
      </p><p>
        If the program works with another SQL server, you should include
        an ODBC log file where you perform exactly the same SQL
        statements so that we can compare the results between the two
        systems.
      </p><p>
        Remember that the more information you can supply to us, the
        more likely it is that we can fix the problem.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-support-patch-submission"></a>20.1.8.3. How to Submit a Connector/ODBC Patch</h4></div></div></div><p>
        You can send a patch or suggest a better solution for any
        existing code or problems by sending a mail message to
        <code class="email">&lt;<a href="mailto:myodbc@lists.mysql.com">myodbc@lists.mysql.com</a>&gt;</code>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-support-changehistory"></a>20.1.8.4. Connector/ODBC Change History</h4></div></div></div><p>
        The Connector/ODBC Change History (Changelog) is located with
        the main Changelog for MySQL. See
        <a href="news.html#connector-odbc-news" title="C.4. MySQL Connector/ODBC (MyODBC) Change History">Section C.4, “MySQL Connector/ODBC (MyODBC) Change History”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-odbc-support-credits"></a>20.1.8.5. Credits</h4></div></div></div><p>
        These are the developers that have worked on the Connector/ODBC
        and Connector/ODBC 3.51 Drivers from MySQL AB.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Michael (Monty) Widenius
          </p></li><li><p>
            Venu Anuganti
          </p></li><li><p>
            Peter Harvey
          </p></li></ul></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="connector-net"></a>20.2. MySQL Connector/NET</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-net-versions">20.2.1. Connector/NET Versions</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-installation">20.2.2. Connector/NET Installation</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-visual-studio">20.2.3. Visual Studio User Guide</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming">20.2.4. Connector/NET Programming</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connect-net-support">20.2.5. Connector/NET Support</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-faq">20.2.6. Connector/NET FAQ</a></span></dt></dl></div><a class="indexterm" name="id3630014"></a><a class="indexterm" name="id3630023"></a><a class="indexterm" name="id3630032"></a><a class="indexterm" name="id3630041"></a><p>
    Connector/NET enables developers to easily create .NET applications
    that require secure, high-performance data connectivity with MySQL.
    It implements the required ADO.NET interfaces and integrates into
    ADO.NET aware tools. Developers can build applications using their
    choice of .NET languages. Connector/NET is a fully managed ADO.NET
    driver written in 100% pure C#.
  </p><p>
    Connector/NET includes full support for:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        MySQL 6.0 features
      </p></li><li><p>
        MySQL 5.1 features
      </p></li><li><p>
        MySQL 5.0 features (such as stored procedures)
      </p></li><li><p>
        MySQL 4.1 features (server-side prepared statements, Unicode,
        and shared memory access, and so forth)
      </p></li><li><p>
        Large-packet support for sending and receiving rows and BLOBs up
        to 2 gigabytes in size.
      </p></li><li><p>
        Protocol compression which allows for compressing the data
        stream between the client and server.
      </p></li><li><p>
        Support for connecting using TCP/IP sockets, named pipes, or
        shared memory on Windows.
      </p></li><li><p>
        Support for connecting using TCP/IP sockets or Unix sockets on
        Unix.
      </p></li><li><p>
        Support for the Open Source Mono framework developed by Novell.
      </p></li><li><p>
        Fully managed, does not utilize the MySQL client library.
      </p></li></ul></div><p>
    This document is intended as a user's guide to Connector/NET and
    includes a full syntax reference. Syntax information is also
    included within the <code class="filename">Documentation.chm</code> file
    included with the Connector/NET distribution.
  </p><p>
    If you are using MySQL 5.0 or later, and Visual Studio as your
    development environment, you may want also want to use the MySQL
    Visual Studio Plugin. The plugin acts as a DDEX (Data Designer
    Extensibility) provider, enabling you to use the data design tools
    within Visual Studio to manipulate the schema and objects within a
    MySQL database. For more information, see
    <a href="connectors-apis.html#connector-net-visual-studio" title="20.2.3. Visual Studio User Guide">Section 20.2.3, “Visual Studio User Guide”</a>.
  </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      Connector/NET 5.1.2 and later include the Visual Studio Plugin by
      default.
    </p></div><p>
    <span class="bold"><strong>Key topics:</strong></span>
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        For connection string properties when using the
        <code class="classname">MySqlConnection</code> class, see
        <a href="connectors-apis.html#connector-net-programming-connection-options" title="20.2.4.5. Connector/NET Connection String Options Reference">Section 20.2.4.5, “Connector/NET Connection String Options Reference”</a>.
      </p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-versions"></a>20.2.1. Connector/NET Versions</h3></div></div></div><p>
    There are several versions of Connector/NET available:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        Connector/NET 1.0 includes support for MySQL 4.0, and MySQL 5.0
        features, and full compatibility with the ADO.NET driver
        interface.
      </p></li><li><p>
        Connector/NET 5.0 includes support for MySQL 4.0, MySQL 4.1,
        MySQL 5.0 and MySQL 5.1 features. Connector/NET 5.0 also
        includes full support for the ADO.Net 2.0 interfaces and
        subclasses, includes support for the usage advisor and
        performance monitor (PerfMon) hooks.
      </p></li><li><p>
        Connector/NET 5.1 includes support for MySQL 4.0, MySQL 5.0,
        MySQL 5.1 and MySQL 6.0 (Falcon Preview) features. Connector/NET
        5.1 also includes support for a new membership/role provider,
        Compact Framework 2.0, a new stored procedure parser and
        improvements to <code class="literal">GetSchema</code>. Connector/NET 5.1
        also includes the Visual Studio Plugin as a standard installable
        component.
      </p></li><li><p>
        Connector/NET 5.2 includes support for MySQL 4.0, MySQL 5.0,
        MySQL 5.1 and MySQL 6.0 (Falcon Preview) features. Connector/NET
        5.2 also includes support for a new membership/role provider,
        Compact Framework 2.0, a new stored procedure parser and
        improvements to <code class="literal">GetSchema</code>. Connector/NET 5.2
        also includes the Visual Studio Plugin as a standard installable
        component.
      </p></li><li><p>
        Connector/NET 6.0 includes support for MySQL 4.0, MySQL 5.0,
        MySQL 5.1 and MySQL 6.0. Connector/NET 6.0 is currently
        available as an Alpha release.
      </p></li></ul></div><p>
    The latest source code for Connector/NET can be downloaded from the
    MySQL public Subversion server. For further details see
    <a href="connectors-apis.html#connector-net-installation-source" title="20.2.2.3. Installing Connector/NET from the source code">Section 20.2.2.3, “Installing Connector/NET from the source code”</a>.
  </p><p>
    The following table shows the .NET Framework version required, and
    MySQL Server version supported by Connector/NET:
  </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Connector/NET version</strong></span></td><td><span class="bold"><strong>ADO.NET version supported</strong></span></td><td><span class="bold"><strong>.NET Framework version required</strong></span></td><td><span class="bold"><strong>MySQL Server version supported</strong></span></td></tr><tr><td>1.0</td><td>1.x</td><td>1.x</td><td>4.0, 5.0</td></tr><tr><td>5.0</td><td>1.x+</td><td>1.x+</td><td>4.0, 5.0</td></tr><tr><td>5.1</td><td>1.x+</td><td>1.x+</td><td>4.0, 5.0, 5.1, 6.0</td></tr><tr><td>5.2</td><td>1.x+</td><td>1.x+</td><td>4.0, 5.0, 5.1, 6.0</td></tr><tr><td>6.0</td><td>2.x+</td><td>2.x+</td><td>4.0, 5.0, 5.1, 6.0</td></tr></tbody></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      Version numbers for MySQL products are formatted as X.X.X.
      However, Windows tools (Control Panel, properties display) may
      show the version numbers as XX.XX.XX. For example, the official
      MySQL formatted version number 5.0.9 may be displayed by Windows
      tools as 5.00.09. The two versions are the same; only the number
      display format is different.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-installation"></a>20.2.2. Connector/NET Installation</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-net-installation-windows">20.2.2.1. Installing Connector/NET on Windows</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-installation-unix">20.2.2.2. Installing Connector/NET on Unix with Mono</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-installation-source">20.2.2.3. Installing Connector/NET from the source code</a></span></dt></dl></div><p>
    Connector/NET runs on any platform that supports the .NET framework.
    The .NET framework is primarily supported on recent versions of
    Microsoft Windows, and is supported on Linux through the Open Source
    Mono framework (see <a href="http://www.mono-project.com" target="_top">http://www.mono-project.com</a>).
  </p><p>
    Connector/NET is available for download from
    <a href="http://dev.mysql.com/downloads/connector/net/5.2.html" target="_top">http://dev.mysql.com/downloads/connector/net/5.2.html</a>.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-installation-windows"></a>20.2.2.1. Installing Connector/NET on Windows</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-net-installation-binary-windows-installer">20.2.2.1.1. Installing Connector/NET using the Installer</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-installation-binary-windows-zip">20.2.2.1.2. Installing Connector/NET using the Zip packages</a></span></dt></dl></div><p>
      On Windows, installation is supported either through a binary
      installation process or by downloading a Zip file with the
      Connector/NET components.
    </p><p>
      Before installing, you should ensure that your system is up to
      date, including installing the latest version of the .NET
      Framework.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-installation-binary-windows-installer"></a>20.2.2.1.1. Installing Connector/NET using the Installer</h5></div></div></div><p>
        Using the installer is the most straightforward method of
        installing Connector/NET on Windows and the installed components
        include the source code, test code and full reference
        documentation.
      </p><p>
        Connector/NET is installed through the use of a Windows
        Installer (<code class="literal">.msi</code>) installation package, which
        can be used to install Connector/NET on all Windows operating
        systems. The MSI package in contained within a ZIP archive named
        <code class="literal">mysql-connector-net-<em class="replaceable"><code>version</code></em>.zip</code>,
        where <em class="replaceable"><code>version</code></em> indicates the
        Connector/NET version.
      </p><p>
        To install Connector/NET:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Double click on the MSI installer file extracted from the
            Zip you downloaded. Click <span class="guibutton">Next</span> to
            start the installation.
          </p><div class="mediaobject"><img src="images/cnet-win-install-step1.png" width="500" height="393" alt="Connector/NET Windows Installer -
              Welcome "></div></li><li><p>
            You must choose the type of installation that you want to
            perform.
          </p><div class="mediaobject"><img src="images/cnet-win-install-step2.png" width="500" height="393" alt="Connector/NET Windows Installer -
              Installation type "></div><p>
            For most situations, the Typical installation will be
            suitable. Click the <span class="guibutton">Typical</span> button
            and proceed to Step 5. A Complete installation installs all
            the available files. To conduct a Complete installation,
            click the <span class="guibutton">Complete</span> button and proceed
            to step 5. If you want to customize your installation,
            including choosing the components to install and some
            installation options, click the
            <span class="guibutton">Custom</span> button and proceed to Step 3.
          </p><p>
            The Connector/NET installer will register the connector
            within the Global Assembly Cache (GAC) - this will make the
            Connector/NET component available to all applications, not
            just those where you explicitly reference the Connector/NET
            component. The installer will also create the necessary
            links in the Start menu to the documentation and release
            notes.
          </p></li><li><p>
            If you have chosen a custom installation, you can select the
            individual components that you want to install, including
            the core interface component, supporting documentation (a
            CHM file) samples and examples and the source code. Select
            the items, and their installation level, and then click
            <span class="guibutton">Next</span> to continue the installation.
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
              For Connector/NET 1.0.8 or lower and Connector 5.0.4 and
              lower the installer will attempt to install binaries for
              both 1.x and 2.x of the .NET Framework. If you only have
              one version of the framework installed, the connector
              installation may fail. If this happens, you can choose the
              framework version to be installed through the custom
              installation step.
            </p></div><div class="mediaobject"><img src="images/cnet-win-install-step3.png" width="500" height="393" alt="Connector/NET Windows Installer - Custom
              setup "></div></li><li><p>
            You will be given a final opportunity to confirm the
            installation. Click <span class="guibutton">Install</span> to copy
            and install the files onto your machine.
          </p><div class="mediaobject"><img src="images/cnet-win-install-step4.png" width="500" height="393" alt="Connector/NET Windows Installer -
              Confirming installation "></div></li><li><p>
            Once the installation has been completed, click
            <span class="guibutton">Finish</span> to exit the installer.
          </p><div class="mediaobject"><img src="images/cnet-win-install-step5.png" width="500" height="393" alt="Connector/NET Windows Installer - Finish
              installation "></div></li></ol></div><p>
        Unless you choose otherwise, Connector/NET is installed in
        <code class="literal">C:\Program Files\MySQL\MySQL Connector Net
        <em class="replaceable"><code>X.X.X</code></em></code>, where
        <em class="replaceable"><code>X.X.X</code></em> is replaced with the version of
        Connector/NET you are installing. New installations do not
        overwrite existing versions of Connector/NET.
      </p><p>
        Depending on your installation type, the installed components
        will include some or all of the following components:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">bin</code> - Connector/NET MySQL libraries for
            different versions of the .NET environment.
          </p></li><li><p>
            <code class="literal">docs</code> - contains a CHM of the
            Connector/NET documentation.
          </p></li><li><p>
            <code class="literal">samples</code> - sample code and applications
            that use the Connector/NET component.
          </p></li><li><p>
            <code class="literal">src</code> - the source code for the
            Connector/NET component.
          </p></li></ul></div><p>
        You may also use the <code class="literal">/quiet</code> or
        <code class="literal">/q</code> command-line option with the
        <code class="literal">msiexec</code> tool to install the Connector/NET
        package automatically (using the default options) with no
        notification to the user. Using this method the user cannot
        select options. Additionally, no prompts, messages or dialog
        boxes will be displayed.
      </p><pre class="programlisting">C:\&gt; msiexec /package conector-net.msi /quiet</pre><p>
        To provide a progress bar to the user during automatic
        installation, use the <code class="literal">/passive</code> option.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-installation-binary-windows-zip"></a>20.2.2.1.2. Installing Connector/NET using the Zip packages</h5></div></div></div><p>
        If you are having problems running the installer, you can
        download a Zip file without an installer as an alternative. That
        file is called
        <code class="filename">mysql-connector-net-<em class="replaceable"><code>version</code></em>-noinstall.zip</code>.
        Once downloaded, you can extract the files to a location of your
        choice.
      </p><p>
        The file contains the following directories:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="filename">bin</code> - Connector/NET MySQL libraries for
            different versions of the .NET environment.
          </p></li><li><p>
            <code class="filename">Docs</code> - contains a CHM of the
            Connector/NET documentation.
          </p></li><li><p>
            <code class="filename">Samples</code> - sample code and applications
            that use the Connector/NET component.
          </p></li></ul></div><p>
        Connector/NET 6.0.x has a different directory structure:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="filename">Assemblies</code> - contains a collection of
            DLLs that make up the connector functionality.
          </p></li><li><p>
            <code class="filename">Documentation</code> - contains the
            Connector/NET documentation as a CHM file.
          </p></li><li><p>
            <code class="filename">Samples</code> - sample code and applications
            that use the Connector/NET component.
          </p></li></ul></div><p>
        There is also another Zip file available for download called
        <code class="filename">mysql-connector-net-<em class="replaceable"><code>version</code></em>-src.zip</code>.
        This file contains the source code distribution.
      </p><p>
        The file contains the following directories:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="filename">Documentation</code> - This folder contains
            the source files to build the documentation into the
            compiled HTML (CHM) format.
          </p></li><li><p>
            <code class="filename">Installer</code> - This folder contains the
            source files to build the Connector/NET installer program.
          </p></li><li><p>
            <code class="filename">MySql.Data</code> - This folder contains the
            source files for the core data provider.
          </p></li><li><p>
            <code class="filename">MySql.VisualStudio</code> - This folder
            contains the source files for the Microsoft Visual Studio
            extensions.
          </p></li><li><p>
            <code class="filename">MySql.Web</code> - This folder contains the
            source files for the web providers. This includes code for
            the membership provider, role provider and profile provider.
            These are used in ASP.NET web sites.
          </p></li><li><p>
            <code class="filename">Samples</code> - This folder contains the
            source files for several example applications.
          </p></li><li><p>
            <code class="filename">Tests</code> - Ths folder contains a
            spreadsheet listing test cases.
          </p></li><li><p>
            <code class="filename">VisualStudio</code> - Contains resources used
            by the Visual Studio plug in.
          </p></li></ul></div><p>
        Finally, you need to ensure that
        <code class="filename">MySql.Data.dll</code> is accessible to your
        program at build time (and run time). If using Microsoft Visual
        Studio you will need to add <code class="literal">MySql.Data</code> as a
        Reference to your project.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-installation-unix"></a>20.2.2.2. Installing Connector/NET on Unix with Mono</h4></div></div></div><p>
      There is no installer available for installing the Connector/NET
      component on your Unix installation. Before installing, please
      ensure that you have a working Mono project installation. You can
      test whether your system has Mono installed by typing:
    </p><pre class="programlisting">shell&gt; mono --version</pre><p>
      The version of the Mono JIT compiler will be displayed.
    </p><p>
      To compile C# source code you will also need to make sure a Mono
      C# compiler, is installed. Note that there are two Mono C#
      compilers available, <code class="literal">mcs</code>, which accesses the
      1.0-profile libraries, and <code class="literal">gmcs</code>, which acesses
      the 2.0-profile libraries.
    </p><p>
      To install Connector/NET on Unix/Mono:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Download the
          <code class="literal">mysql-connector-net-<em class="replaceable"><code>version</code></em>-noinstall.zip</code>
          and extract the contents to a directory of your choice, for
          example: <code class="filename">~/connector-net/</code>.
        </p></li><li><p>
          In the directory where you unzipped the connector to, change
          into the <code class="filename">bin</code> directory. Ensure the file
          <code class="filename">MySql.Data.dll</code> is present.
        </p></li><li><p>
          You must register the Connector/NET component,
          <code class="literal">MySql.Data</code>, in the Global Assembly Cache
          (GAC). In the current directory enter the
          <code class="literal">gacutil</code> command:
        </p><pre class="programlisting">root-shell&gt; gacutil /i MySql.Data.dll</pre><p>
          This will register <code class="literal">MySql.Data</code> into the GAC.
          You can check this by listing the contents of
          <code class="filename">/usr/lib/mono/gac</code>, where you will find
          <code class="literal">MySql.Data</code> if the registration has been
          successful.
        </p></li></ol></div><p>
      You are now ready to compile your application. You must ensure
      that when you compile your application you include the
      Connector/NET component using the <code class="option">-r:</code>
      command-line option. For example:
    </p><pre class="programlisting">shell&gt; gmcs -r:System.dll -r:System.Data.dll -r:MySql.Data.dll HelloWorld.cs</pre><p>
      Note, the assemblies that need to be referenced will depend on the
      requirements of the application, but applications using
      Connector/NET will need to provide <code class="option">-r:MySql.Data</code>
      as a minimum.
    </p><p>
      You can further check your installation by running the compiled
      program, for example:
    </p><pre class="programlisting">shell&gt; mono HelloWorld.exe</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-installation-source"></a>20.2.2.3. Installing Connector/NET from the source code</h4></div></div></div><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>
        You should read this section only if you are interested in
        helping us test our new code. If you just want to get
        Connector/NET up and running on your system, you should use a
        standard release distribution.
      </p></div><p>
      <span class="bold"><strong>Obtaining the source code</strong></span>
    </p><p>
      To be able to access the Connector/NET source tree, you must have
      Subversion installed. Subversion is freely available from
      <a href="http://subversion.tigris.org/" target="_top">http://subversion.tigris.org/</a>.
    </p><p>
      The most recent development source tree is available from our
      public Subversion trees at
      <a href="http://dev.mysql.com/tech-resources/sources.html" target="_top">http://dev.mysql.com/tech-resources/sources.html</a>.
    </p><p>
      To checkout out the Connector/NET sources, change to the directory
      where you want the copy of the Connector/NET tree to be stored,
      then use the following command:
    </p><pre class="programlisting">shell&gt; svn co http://svn.mysql.com/svnpublic/connector-net</pre><p>
      Source packages are also available on the downloads page.
    </p><p>
      <span class="bold"><strong>Building the source code on
      Windows</strong></span>
    </p><p>
      The following procedure can be used to build the connector on
      Microsoft Windows.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Obtain the source code, either from the Subversion server, or
          through one of the prepared source code packages.
        </p></li><li><p>
          Navigate to the root of the source code tree.
        </p></li><li><p>
          A Microsoft Visual Studio 2005 solution file is available to
          build the connector, this is called
          <code class="filename">MySQL-VS2005.sln</code>. Click on this file to
          load the solution into Visual Studio.
        </p></li><li><p>
          Select <span class="guimenu">Build</span>, <span class="guimenu">Build
          Solution</span> from the main menu to build the solution.
        </p></li></ul></div><p>
      <span class="bold"><strong>Building the source code on Unix</strong></span>
    </p><p>
      Support for building Connector/NET on Mono/Unix is currently not
      available.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-visual-studio"></a>20.2.3. Visual Studio User Guide</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-net-visual-studio-making-a-connection">20.2.3.1. Making a connection</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-visual-studio-editing-tables">20.2.3.2. Editing Tables</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-visual-studio-editing-views">20.2.3.3. Editing Views</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-visual-studio-editing-stored-procedures-and-functions">20.2.3.4. Editing Stored Procedures and Functions</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-visual-studio-editing-triggers">20.2.3.5. Editing Triggers</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-visual-studio-editing-user-defined-functions-udf">20.2.3.6. Editing User Defined Functions (UDF)</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-visual-studio-cloning-database-objects">20.2.3.7. Cloning Database Objects</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-visual-studio-dropping-database-objects">20.2.3.8. Dropping Database Objects</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-visual-studio-entity-framework">20.2.3.9. Using the ADO.NET Entity Framework</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-visual-studio-making-a-connection"></a>20.2.3.1. Making a connection</h4></div></div></div><p>
      Once the connector is installed, you can use it to create, modify,
      and delete connections to MySQL databases. To create a connection
      with a MySQL database, perform the following steps:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Start Visual Studio, and open the Server Explorer window
          (<span class="guimenu">View</span>, <span class="guimenu">Server Explorer</span>
          option in the main Visual Studio menu, or
          <span><strong class="keycap">Ctrl</strong></span>+<span><strong class="keycap">W</strong></span>, <span><strong class="keycap">L</strong></span>
          hot keys).
        </p></li><li><p>
          Right-click on the Data Connections node, and choose the
          <span class="guimenu">Add Connection...</span> menu item.
        </p></li><li><p>
          Add Connection dialog opens. Press the
          <span class="guibutton">Change</span> button to choose MySQL Database
          as a data source.

          </p><div class="figure"><a name="connector-net-visual-studio-add-connection"></a><p class="title"><b>Figure 20.1. Add Connection Context Menu</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-add-connection.png" alt="Add Connection Context Menu"></div></div><p>
        </p></li><li><p>
          Change Data Source dialog opens. Choose MySQL Database in the
          list of data sources (or the <code class="option">&lt;other&gt;</code>
          option, if MySQL Database is absent), and then choose .NET
          Framework Data Provider for MySQL in the combo box of data
          providers.

          </p><div class="figure"><a name="connector-net-visual-studio-choose-data-source"></a><p class="title"><b>Figure 20.2. Choose Data Source</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-choose-data-source.png" alt="Choose Data Source"></div></div><p>
        </p></li><li><p>
          Input the connection settings: the server host name (for
          example, localhost if the MySQL server is installed on the
          local machine), the user name, the password, and the default
          schema name. Note that you must specify the default schema
          name to open the connection.

          </p><div class="figure"><a name="connector-net-visual-studio-add-connection-dialog"></a><p class="title"><b>Figure 20.3. Add Connection Dialog</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-add-connection-dialog.png" alt="Add Connection Dialog"></div></div><p>
        </p></li><li><p>
          You can also set the port to connect with the MySQL server by
          pressing the <span class="guibutton">Advanced</span> button. To test
          connection with the MySQL server, set the server host name,
          the user name, and the password, and press the <span class="guibutton">Test
          Connection</span> button. If the test succeeds, the
          success confirmation dialog opens.
        </p></li><li><p>
          After you set all settings and test the connection, press
          <span class="guibutton">OK</span>. The newly created connection is
          displayed in Server Explorer. Now you can work with the MySQL
          server through standard Server Explorer GUI.

          </p><div class="figure"><a name="connector-net-visual-studio-new-data-connection"></a><p class="title"><b>Figure 20.4. New Data Connection</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-new-data-connection.png" alt="New Data Connection"></div></div><p>
        </p></li></ul></div><p>
      After the connection is successfully established, all settings are
      saved for future use. When you start Visual Studio for the next
      time, just open the connection node in Server Explorer to
      establish a connection to the MySQL server again.
    </p><p>
      To modify and delete a connection, use the Server Explorer context
      menu for the corresponding node. You can modify any of the
      settings just by overwriting the existing values with new ones.
      Note that the connection may be modified or deleted only if no
      active editor for its objects is opened: otherwise you may loose
      your data.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-visual-studio-editing-tables"></a>20.2.3.2. Editing Tables</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-net-visual-studio-editing-tables-column-editor">20.2.3.2.1. Column Editor</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-visual-studio-editing-tables-indexes">20.2.3.2.2. Editing Indexes</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-visual-studio-editing-tables-foreign-keys">20.2.3.2.3. Editing Foreign Keys</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-visual-studio-editing-tables-column-details">20.2.3.2.4. Column Properties</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-visual-studio-editing-tables-table-properties">20.2.3.2.5. Table Properties</a></span></dt></dl></div><p>
      Connector/Net contains a table editor, which enables the visual
      creation and modification of tables.
    </p><p>
      The Table Designer can be accessed through a mouse action on
      table-type node of Server Explorer. To create a new table,
      right-click on the <span class="guilabel">Tables</span> node (under the
      connection node) and choose the <span class="guimenu">Create Table</span>
      command from the context menu.
    </p><p>
      To modify an existing table, double-click on the node of the table
      you wish to modify, or right-click on this node and choose the
      <span class="guimenu">Design</span> item from the context menu. Either of
      the commands opens the Table Designer.
    </p><p>
      The table editor is implemented in the manner of the well-known
      Query Browser Table Editor, but with minor differences.
    </p><div class="figure"><a name="connector-net-visual-studio-editing-new-table"></a><p class="title"><b>Figure 20.5. Editing New Table</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-editing-new-table.png" alt="Editing New Table"></div></div><p>
      Table Designer consists of the following parts:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Columns Editor - a data grid on top of the Table Designer. Use
          the Columns grid for column creation, modification, and
          deletion.
        </p></li><li><p>
          Indexes tab - a tab on bottom of the Table Designer. Use the
          Indexes tab for indexes management.
        </p></li><li><p>
          Foreign Keys tab - a tab on bottom of the Table Designer. Use
          the Foreign Keys tab for foreign keys management.
        </p></li><li><p>
          Column Details tab - a tab on bottom of the Table Designer.
          Use the Column Details tab to set advanced column options.
        </p></li><li><p>
          Properties window - a standard Visual Studio Properties
          window, where the properties of the edited table are
          displayed. Use the Properties window to set the table
          properties.
        </p></li></ul></div><p>
      Each of these areas is discussed in more detail in subsequent
      sections.
    </p><p>
      To save changes you have made in the Table Designer, use either
      <span class="guibutton">Save</span> or <span class="guibutton">Save All</span>
      button of the Visual Studio main toolbar, or just press
      <span><strong class="keycap">Ctrl</strong></span>+<span><strong class="keycap">S</strong></span>. If you have not already
      named the table you will be prompted to do so.
    </p><div class="figure"><a name="connector-net-visual-studio-choose-table-name"></a><p class="title"><b>Figure 20.6. Choose Table Name</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-choose-table-name.png" alt="Choose Table Name"></div></div><p>
      Once created you can view the table in the Server Explorer.
    </p><div class="figure"><a name="connector-net-visual-studio-newly-created-table"></a><p class="title"><b>Figure 20.7. Newly Created Table</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-newly-created-table.png" alt="Newly Created Table"></div></div><p>
      The Table Designer main menu allows you to set a Primary Key
      column, edit Relationships such as Foreign Keys, and create
      Indexes.
    </p><div class="figure"><a name="connector-net-visual-studio-table-desginer-menu-item"></a><p class="title"><b>Figure 20.8. Table Designer Main Menu</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-table-designer-menu-item.png" alt="Table Designer Main Menu"></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-visual-studio-editing-tables-column-editor"></a>20.2.3.2.1. Column Editor</h5></div></div></div><p>
        You can use the Column Editor to set or change the name, data
        type, default value, and other properties of a table column. To
        set the focus to a needed cell of a grid, use the mouse click.
        Also you can move through the grid using <span><strong class="keycap">Tab</strong></span>
        and <span><strong class="keycap">Shift</strong></span>+<span><strong class="keycap">Tab</strong></span> keys.
      </p><p>
        To set or change the name, data type, default value and comment
        of a column, activate the appropriate cell and type the desired
        value.
      </p><p>
        To set or unset flag-type column properties (<code class="literal">NOT
        NULL</code>, auto incremented, flags), check or uncheck the
        corresponding check boxes. Note that the set of column flags
        depends on its data type.
      </p><p>
        To reorder columns, index columns or foreign key columns in the
        Column Editor, select the whole column you wish to reorder by
        clicking on the selector column on the left of the column grid.
        Then move the column by using
        <span><strong class="keycap">Ctrl</strong></span>+<span><strong class="keycap">Up</strong></span> (to move the column
        up) or <span><strong class="keycap">Ctrl</strong></span>+<span><strong class="keycap">Down</strong></span> (to move the
        column down) keys.
      </p><p>
        To delete a column, select it by clicking on the selector column
        on the left of the column grid, then press the
        <span><strong class="keycap">Delete</strong></span> button on a keyboard.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-visual-studio-editing-tables-indexes"></a>20.2.3.2.2. Editing Indexes</h5></div></div></div><p>
        Indexes management is performed via the
        <span class="guilabel">Indexes/Keys</span> dialog.
      </p><p>
        To add an index, select <span class="guimenu">Table Designer</span>,
        <span class="guimenu">Indexes/Keys...</span> from the main menu, and click
        <span class="guimenu">Add</span> to add a new index. You can then set the
        index name, index kind, index type, and a set of index columns.
      </p><div class="figure"><a name="connector-net-visual-studio-indexes-dialog"></a><p class="title"><b>Figure 20.9. Indexes Dialog</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-indexes-dialog.png" alt="Indexes Dialog"></div></div><p>
        To remove an index, select it in the list box on the left, and
        click the <span class="guibutton">Delete</span> button.
      </p><p>
        To change index settings, select the needed index in the list
        box on the left. The detailed information about the index is
        displayed in the panel on the right hand side. Change the
        desired values.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-visual-studio-editing-tables-foreign-keys"></a>20.2.3.2.3. Editing Foreign Keys</h5></div></div></div><p>
        Foreign Keys management is performed via the <span class="guilabel">Foreign
        Key Relationships</span> dialog.
      </p><p>
        To add a foreign key, select <span class="guimenu">Table Designer</span>,
        <span class="guimenu">Relationships...</span> from the main menu. This
        displays the <span class="guilabel">Foreign Key Relationship</span>
        dialog. Click <span class="guibutton">Add</span>. You can then set the
        foreign key name, referenced table name, foreign key columns,
        and actions upon update and delete.
      </p><p>
        To remove a foreign key, select it in the list box on the left,
        and click the <span class="guibutton">Delete</span> button.
      </p><p>
        To change foreign key settings, select the required foreign key
        in the list box on the left. The detailed information about the
        foreign key is displayed in the right hand panel. Change the
        desired values.
      </p><div class="figure"><a name="connector-net-visual-studio-foreign-key-relationships"></a><p class="title"><b>Figure 20.10. Foreign Key Relationships Dialog</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-foreign-key-relationships.png" alt="Foreign Key Reationships Dialog"></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-visual-studio-editing-tables-column-details"></a>20.2.3.2.4. Column Properties</h5></div></div></div><p>
        The <span class="guilabel">Column Properties</span> tab can be used to
        set column options. In addition to the general column properties
        presented in the Column Editor, in the <span class="guilabel">Column
        Properties</span> tab you can set additional properties such
        as Character Set, Collation and Precision.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-visual-studio-editing-tables-table-properties"></a>20.2.3.2.5. Table Properties</h5></div></div></div><p>
        To bring up Table Properties select the table and right click to
        activate the context menu. Select <span class="guimenu">Properties</span>.
        The <span class="guilabel">Table Properties</span> dockable window will
        be displayed.
      </p><div class="figure"><a name="connector-net-visual-studio-table-properties-menu"></a><p class="title"><b>Figure 20.11. Table Properties Menu Item</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-table-properties-menu.png" alt="Table Properties Menu Item"></div></div><p>
        The following table properties can be set:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Auto Increment
          </p></li><li><p>
            Average Row Length
          </p></li><li><p>
            Character Set
          </p></li><li><p>
            Collation
          </p></li><li><p>
            Comment
          </p></li><li><p>
            Data Directory
          </p></li><li><p>
            Index Directory
          </p></li><li><p>
            Maximum Rows
          </p></li><li><p>
            Minimum Rows
          </p></li><li><p>
            Name
          </p></li><li><p>
            Row Format
          </p></li><li><p>
            Schema
          </p></li><li><p>
            Storage Engine
          </p></li></ul></div><p>
        The property <code class="literal">Schema</code> is read only.
      </p><div class="figure"><a name="connector-net-visual-studio-selecting-table-properties"></a><p class="title"><b>Figure 20.12. Table Properties</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-selecting-table-properties.png" alt="Table Properties"></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-visual-studio-editing-views"></a>20.2.3.3. Editing Views</h4></div></div></div><p>
      To create a new view, right click the Views node under the
      connection node in Server Explorer. From the node's context menu,
      choose the <span class="guimenu">Create View</span> command. This command
      opens the SQL Editor.
    </p><div class="figure"><a name="connector-net-visual-studio-views-edit-sql"></a><p class="title"><b>Figure 20.13. Editing View SQL</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-views-edit-sql.png" alt="Editing View SQL"></div></div><p>
      You can then enter the SQL for your view.
    </p><div class="figure"><a name="connector-net-visual-studio-views-sql-added"></a><p class="title"><b>Figure 20.14. View SQL Added</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-views-sql-added.png" alt="View SQL Added"></div></div><p>
      To modify an existing view, double click on a node of the view you
      wish to modify, or right click on this node and choose the
      <span class="guimenu">Alter View</span> command from a context menu. Either
      of the commands opens the SQL Editor.
    </p><p>
      All other view properties can be set in the Properties window.
      These properties are:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Catalog
        </p></li><li><p>
          Check Option
        </p></li><li><p>
          Definer
        </p></li><li><p>
          Definition
        </p></li><li><p>
          Definer
        </p></li><li><p>
          Is Updateable
        </p></li><li><p>
          Name
        </p></li><li><p>
          Schema
        </p></li><li><p>
          Security Type
        </p></li></ul></div><p>
      Some of these properties can have arbitrary text values, others
      accept values from a predefined set. In the latter case you set
      the desired value with an embedded combobox.
    </p><p>
      The properties <code class="literal">Is Updatable</code> and
      <code class="literal">Schema</code> are readonly.
    </p><p>
      To save changes you have made, use either
      <span class="guibutton">Save</span> or <span class="guibutton">Save All</span>
      buttons of the Visual Studio main toolbar, or just press
      <span><strong class="keycap">Ctrl</strong></span>+<span><strong class="keycap">S</strong></span>.
    </p><div class="figure"><a name="connector-net-visual-studio-views-sql-saved"></a><p class="title"><b>Figure 20.15. View SQL Saved</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-views-sql-saved.png" alt="View SQL Saved"></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-visual-studio-editing-stored-procedures-and-functions"></a>20.2.3.4. Editing Stored Procedures and Functions</h4></div></div></div><p>
      To create a new stored procedure, right-click on the
      <span class="guilabel">Stored Procedures</span> node under the connection
      node in Server Explorer. From the node's context menu, choose the
      <span class="guilabel">Create Routine</span> command. This command opens
      the SQL Editor.
    </p><div class="figure"><a name="connector-net-visual-studio-stored-procedure-edit"></a><p class="title"><b>Figure 20.16. Edit Stored Procedure SQL</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-stored-procedure-edit.png" alt="Edit Stored Procedure SQL"></div></div><p>
      To create a new stored function, right-click on the
      <span class="guilabel">Functions</span> node under the connection node in
      Server Explorer. From the node's context menu, choose the
      <span class="guilabel">Create Routine</span> command.
    </p><p>
      To modify an existing stored routine (procedure or function),
      double-click on the node of the routine you wish to modify, or
      right-click on this node and choose the <span class="guilabel">Alter
      Routine</span> command from the context menu. Either of the
      commands opens the SQL Editor.
    </p><p>
      To create or alter the routine definition using SQL Editor, type
      this definition in the SQL Editor using standard SQL. All other
      routine properties can be set in the Properties window. These
      properties are:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Body
        </p></li><li><p>
          Catalog
        </p></li><li><p>
          Comment
        </p></li><li><p>
          Creation Time
        </p></li><li><p>
          Data Access
        </p></li><li><p>
          Definer
        </p></li><li><p>
          Definition
        </p></li><li><p>
          External Name
        </p></li><li><p>
          External Language
        </p></li><li><p>
          Is Deterministic
        </p></li><li><p>
          Last Modified
        </p></li><li><p>
          Name
        </p></li><li><p>
          Parameter Style
        </p></li><li><p>
          Returns
        </p></li><li><p>
          Schema
        </p></li><li><p>
          Security Type
        </p></li><li><p>
          Specific Name
        </p></li><li><p>
          SQL Mode
        </p></li><li><p>
          SQL Path
        </p></li><li><p>
          Type
        </p></li></ul></div><p>
      Some of these properties can have arbitrary text values, others
      accept values from a predefined set. In the latter case set the
      desired value using the embedded combo box.
    </p><p>
      You can also set all the options directly in the SQL Editor, using
      the standard <code class="literal">CREATE PROCEDURE</code> or
      <code class="literal">CREATE FUNCTION</code> statement. However, it is
      recommended to use the Properties window instead.
    </p><p>
      To save changes you have made, use either
      <span class="guilabel">Save</span> or <span class="guilabel">Save All</span> buttons
      of the Visual Studio main toolbar, or just press
      <span><strong class="keycap">Ctrl</strong></span>+<span><strong class="keycap">S</strong></span>.
    </p><div class="figure"><a name="connector-net-visual-studio-stored-procedure-saved"></a><p class="title"><b>Figure 20.17. Stored Procedure SQL Saved</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-stored-procedure-saved.png" alt="Stored Procedure SQL Saved"></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-visual-studio-editing-triggers"></a>20.2.3.5. Editing Triggers</h4></div></div></div><p>
      To create a new trigger, right-click on the node of the table, for
      which you wish to add a trigger. From the node's context menu,
      choose the <span class="guilabel">Create Trigger</span> command. This
      command opens the SQL Editor.
    </p><p>
      To modify an existing trigger, double-click on the node of the
      trigger you wish to modify, or right-click on this node and choose
      the <span class="guilabel">Alter Trigger</span> command from the context
      menu. Either of the commands opens the SQL Editor.
    </p><p>
      To create or alter the trigger definition using SQL Editor, type
      the trigger statement in the SQL Editor using standard SQL.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        You should enter only the trigger statement, that is, the part
        of the <code class="literal">CREATE TRIGGER</code> query that is placed
        after the <code class="literal">FOR EACH ROW</code> clause.
      </p></div><p>
      All other trigger properties are set in the Properties window.
      These properties are:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Definer
        </p></li><li><p>
          Event Manipulation
        </p></li><li><p>
          Name
        </p></li><li><p>
          Timing
        </p></li></ul></div><p>
      Some of these properties can have arbitrary text values, others
      accept values from a predefined set. In the latter case set the
      desired value using the embedded combo box.
    </p><p>
      The properties <code class="literal">Event Table</code>,
      <code class="literal">Schema</code>, and <code class="literal">Server</code> in the
      Properties window are read only.
    </p><p>
      To save changes you have made, use either
      <span class="guibutton">Save</span> or <span class="guibutton">Save All</span>
      buttons of the Visual Studio main toolbar, or just press
      <span><strong class="keycap">Ctrl</strong></span>+<span><strong class="keycap">S</strong></span>. Before changes are
      saved, you will be asked to confirm the execution of the
      corresponding SQL query in a confirmation dialog.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-visual-studio-editing-user-defined-functions-udf"></a>20.2.3.6. Editing User Defined Functions (UDF)</h4></div></div></div><p>
      To create a new User Defined Function (UDF), right-click on the
      <span class="guilabel">UDFs</span> node under the connection node in Server
      Explorer. From the node's context menu, choose the <span class="guimenu">Create
      UDF</span> command. This command opens the UDF Editor.
    </p><p>
      To modify an existing UDF, double-click on the node of the UDF you
      wish to modify, or right-click on this node and choose the
      <span class="guimenu">Alter UDF</span> command from the context menu. Either
      of the commands opens the UDF Editor.
    </p><p>
      The UDF editor allows you to set the following properties:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Name
        </p></li><li><p>
          So-name (DLL name)
        </p></li><li><p>
          Return type
        </p></li><li><p>
          Is Aggregate
        </p></li></ul></div><p>
      There are text fields for both names, a combo box for the return
      type, and a check box to indicate if the UDF is aggregate. All
      these options are also accessible via the Properties window.
    </p><p>
      The property <code class="literal">Server</code> in the Properties window is
      read only.
    </p><p>
      To save changes you have made, use either
      <span class="guibutton">Save</span> or <span class="guibutton">Save All</span>
      buttons of the Visual Studio main toolbar, or just press
      <span><strong class="keycap">Ctrl</strong></span>+<span><strong class="keycap">S</strong></span>. Before changes are
      saved, you will be asked to confirm the execution of the
      corresponding SQL query in a confirmation dialog.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-visual-studio-cloning-database-objects"></a>20.2.3.7. Cloning Database Objects</h4></div></div></div><p>
      Tables, views, stored procedures, and functions can be cloned
      using the appropriate Clone command from the context menu:
      <span class="guimenu">Clone Table</span>, <span class="guimenu">Clone View</span>,
      <span class="guimenu">Clone Routine</span>. The clone commands open the
      corresponding editor for a new object: the <span class="guilabel">Table
      Editor</span> for cloning a table, and the <span class="guilabel">SQL
      Editor</span> for cloning a view or a routine.
    </p><p>
      The editor is filled with values of the original object. You can
      modify these values in a usual manner.
    </p><p>
      To save the cloned object, use either Save or Save All buttons of
      the Visual Studio main toolbar, or just press
      <span><strong class="keycap">Ctrl</strong></span>+<span><strong class="keycap">S</strong></span>. Before changes are
      saved, you will be asked to confirm the execution of the
      corresponding SQL query in a confirmation dialog.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-visual-studio-dropping-database-objects"></a>20.2.3.8. Dropping Database Objects</h4></div></div></div><p>
      Tables, views, stored routines, triggers, and UDFs can be dropped
      with the appropriate Drop command selected from its context menu:
      <span class="guimenu">Drop Table</span>, <span class="guimenu">Drop View</span>,
      <span class="guimenu">Drop Routine</span>, <span class="guimenu">Drop Trigger</span>,
      <span class="guimenu">Drop UDF</span>.
    </p><p>
      You will be asked to confirm the execution of the corresponding
      drop query in a confirmation dialog.
    </p><p>
      Dropping of multiple objects is not supported.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-visual-studio-entity-framework"></a>20.2.3.9. Using the ADO.NET Entity Framework</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-net-visual-studio-entity-framework-tutorial-winform-data-source">20.2.3.9.1. Tutorial: Using an Entity Framework Entity as a Windows Forms Data
        Source</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-visual-studio-entity-framework-tutorial-databinding-linq-entities">20.2.3.9.2. Tutorial: Databinding in ASP.NET using LINQ on Entities</a></span></dt></dl></div><p>
      Connector/NET 6.0 introduced support for the ADO.NET Entity
      Framework. ADO.NET Entity Framework was included with .NET
      Framework 3.5 Service Pack 1, and Visual Studio 2008 Service Pack
      1. ADO.NET Entity Framework was released on 11th August 2008.
    </p><p>
      ADO.NET Entity Framework provides an Object Relational Mapping
      (ORM) service, mapping the relational database schema to objects.
      The ADO.NET Entity Framework defines several layers, these can be
      summarized as:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <span class="bold"><strong>Logical</strong></span> - this layer defines
          the relational data and is defined by the Store Schema
          Definition Language (SSDL).
        </p></li><li><p>
          <span class="bold"><strong>Conceptual</strong></span> - this layer
          defines the .NET classes and is defined by the Conceptual
          Schema Definition Language (CSDL)
        </p></li><li><p>
          <span class="bold"><strong>Mapping</strong></span> - this layer defines
          the mapping from .NET classes to relational tables and
          associations, and is defined by Mapping Specification Language
          (MSL).
        </p></li></ul></div><p>
      Connector/NET integrates with Visual Studio 2008 to provide a
      range of helpful tools to assist the developer.
    </p><p>
      A full treatment of ADO.NET Entity Framework is beyond the scope
      of this manual. You are encouraged to review the
      <a href="http://msdn.microsoft.com/en-us/library/aa697427(VS.80).aspx" target="_top">Microsoft
      ADO.NET Entity Framework documentation</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-visual-studio-entity-framework-tutorial-winform-data-source"></a>20.2.3.9.1. Tutorial: Using an Entity Framework Entity as a Windows Forms Data
        Source</h5></div></div></div><p>
        In this tutorial you will learn how to create a Windows Forms
        Data Source from an Entity in an Entity Data Model. This
        tutorial assumes that you have installed the World example
        database, which can be downloaded from the
        <a href="http://dev.mysql.com/doc/" target="_top">MySQL Documentation
        page</a>. You can also find details on how to install the
        database on the same page. It will also be convenient for you to
        create a connection to the World database after it is installed.
        For instructions on how to do this see
        <a href="connectors-apis.html#connector-net-visual-studio-making-a-connection" title="20.2.3.1. Making a connection">Section 20.2.3.1, “Making a connection”</a>.
      </p><p>
        <span class="bold"><strong>Creating a new Windows Forms
        application</strong></span>
      </p><p>
        The first step is to create a new Windows Forms application.
      </p><div class="orderedlist"><ol type="1"><li><p>
            In Visual Studio, select <span class="guimenu">File</span>,
            <span class="guimenu">New</span>, <span class="guimenu">Project</span> from the
            main menu.
          </p></li><li><p>
            Choose the <span class="guilabel">Windows Forms Application</span>
            installed template. Click <span class="guibutton">OK</span>. The
            solution is created.
          </p></li></ol></div><p>
        <span class="bold"><strong>Adding an Entity Data Model</strong></span>
      </p><p>
        You will now add an Entity Data Model to your solution.
      </p><div class="orderedlist"><ol type="1"><li><p>
            In the Solution Explorer, right click on your application
            and select <span class="guimenu">Add</span>, <span class="guimenu">New
            Item...</span>. From <span class="guilabel">Visual Studio installed
            templates</span> select <span class="guilabel">ADO.NET Entity Data
            Model</span>. Click <span class="guibutton">Add</span>.
          </p><div class="figure"><a name="connector-net-visual-studio-entity-framework-add-entity-data-model"></a><p class="title"><b>Figure 20.18. Add Entity Data Model</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-entity-framework-add-entity-data-model.png" alt="Add Entity Data Model"></div></div></li><li><p>
            You will now see the Entity Data Model Wizard. You will use
            the wizard to generate the Entity Data Model from the world
            example database. Select the icon <span class="guilabel"> Generate from
            database</span>. Click <span class="guibutton">Next</span>.
          </p><div class="figure"><a name="connector-net-visual-studio-entity-framework-entity-data-model-wizard-1"></a><p class="title"><b>Figure 20.19. Entity Data Model Wizard Screen 1</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-entity-framework-entity-data-model-wizard-1.png" alt="Entity Data Model Wizard Screen
                1"></div></div></li><li><p>
            You can now select the connection you made earlier to the
            World database. If you have not already done so, you can
            create the new connection at this time by clicking on
            <span class="guibutton">New Connection...</span>. For further
            instructions on creating a connection to a database see
            <a href="connectors-apis.html#connector-net-visual-studio-making-a-connection" title="20.2.3.1. Making a connection">Section 20.2.3.1, “Making a connection”</a>.
          </p><div class="figure"><a name="connector-net-visual-studio-entity-framework-entity-data-model-wizard-2"></a><p class="title"><b>Figure 20.20. Entity Data Model Wizard Screen 2</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-entity-framework-entity-data-model-wizard-2.png" alt="Entity Data Model Wizard Screen
                2"></div></div></li><li><p>
            Make a note of the entity connection settings to be used in
            App.Config, as these will be used later to write the
            necessary control code.
          </p></li><li><p>
            Click <span class="guibutton">Next</span>.
          </p></li><li><p>
            The Entity Data Model Wizard connects to the database. You
            are then presented with a tree structure of the database.
            From this you can select the object you would like to
            include in your model. If you had created Views and Stored
            Routines these will be displayed along with any tables. In
            this example you just need to select the tables. Click
            <span class="guibutton">Finish</span> to create the model and exit
            the wizard.
          </p><div class="figure"><a name="connector-net-visual-studio-entity-framework-entity-data-model-wizard-3"></a><p class="title"><b>Figure 20.21. Entity Data Model Wizard Screen 3</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-entity-framework-entity-data-model-wizard-3.png" alt="Entity Data Model Wizard Screen
                3"></div></div></li><li><p>
            Visual Studio will generate the model and then display it.
          </p><div class="figure"><a name="connector-net-visual-studio-entity-framework-entity-data-model-diagram"></a><p class="title"><b>Figure 20.22. Entity Data Model Diagram</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-entity-framework-entity-data-model-diagram.png" alt="Entity Data Model Diagram"></div></div></li><li><p>
            From the Visual Studio main menu select
            <span class="guimenu">Build</span>, <span class="guimenu">Build Solution</span>,
            to ensure that everything compiles correctly so far.
          </p></li></ol></div><p>
        <span class="bold"><strong>Adding a new Data Source</strong></span>
      </p><p>
        You will now add a new Data Source to your project and see how
        it can be used to read and write to the database.
      </p><div class="orderedlist"><ol type="1"><li><p>
            From the Visual Studio main menu select
            <span class="guimenu">Data</span>, <span class="guimenu">Add New Data
            Source...</span>. You will be presented with the Data
            Source Configuration Wizard.
          </p><div class="figure"><a name="connector-net-visual-studio-entity-framework-data-source-configuration-wizard-1"></a><p class="title"><b>Figure 20.23. Entity Data Source Configuration Wizard Screen 1</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-entity-framework-data-source-configuration-wizard-1.png" alt="Entity Data Source Configuration
                Wizard Screen 1"></div></div></li><li><p>
            Select the <span class="guilabel">Object</span> icon. Click
            <span class="guibutton">Next</span>.
          </p></li><li><p>
            You will now select the Object you wish to bind to. Expand
            the tree. In this tutorial you will select the city table.
            Once the city table has been selected click
            <span class="guibutton">Next</span>.
          </p><div class="figure"><a name="connector-net-visual-studio-entity-framework-data-source-configuration-wizard-2"></a><p class="title"><b>Figure 20.24. Entity Data Source Configuration Wizard Screen 2</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-entity-framework-data-source-configuration-wizard-2.png" alt="Entity Data Source Configuration
                Wizard Screen 2"></div></div></li><li><p>
            The wizard will confirm that the city object is to be added.
            Click <span class="guibutton">Finish</span>.
          </p><div class="figure"><a name="connector-net-visual-studio-entity-framework-data-source-configuration-wizard-3"></a><p class="title"><b>Figure 20.25. Entity Data Source Configuration Wizard Screen 3</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-entity-framework-data-source-configuration-wizard-3.png" alt="Entity Data Source Configuration
                Wizard Screen 3"></div></div></li><li><p>
            The city object will be display in the Data Sources panel.
            If the Data Sources panel is not displayed, select
            <span class="guimenu">Data</span>, <span class="guimenu">Show Data
            Sources</span> from the Visual Studio main menu. The
            docked panel will then be displayed.
          </p><div class="figure"><a name="connector-net-visual-studio-entity-framework-data-sources"></a><p class="title"><b>Figure 20.26. Data Sources</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-entity-framework-data-sources.png" alt="Data Sources"></div></div></li></ol></div><p>
        <span class="bold"><strong>Using the Data Source in a Windows
        Form</strong></span>
      </p><p>
        You will now learn how to use the Data Source in a Windows Form.
      </p><div class="orderedlist"><ol type="1"><li><p>
            In the Data Sources panel select the Data Source you just
            created and drag and drop it onto the Form Designer. By
            default the Data Source object will be added as a Data Grid
            View control. Note that the Data Grid View control is bound
            to the <code class="literal">cityBindingSource</code> and the
            Navigator control is bound to
            <code class="literal">cityBindingNavigator</code>.
          </p><div class="figure"><a name="connector-net-visual-studio-entity-framework-data-form-design"></a><p class="title"><b>Figure 20.27. Data Form Designer</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-entity-framework-data-form-design.png" alt="Data Form Designer"></div></div></li><li><p>
            Save and rebuild the solution before continuing.
          </p></li></ol></div><p>
        <span class="bold"><strong>Adding Code to Populate the Data Grid
        View</strong></span>
      </p><p>
        You are now ready to add code to ensure that the Data Grid View
        control will be populated with data from the City database
        table.
      </p><div class="orderedlist"><ol type="1"><li><p>
            Double click the form to access its code.
          </p></li><li><p>
            Add code to instatiate the Entity Data Model's
            EntityContainer object and retrieve data from the database
            to populate the control.
          </p><div class="figure"><a name="connector-net-visual-studio-entity-framework-form-add-code"></a><p class="title"><b>Figure 20.28. Adding Code to the Form</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-entity-framework-form-add-code.png" alt="Adding Code to the Form"></div></div></li><li><p>
            Save and rebuild the solution.
          </p></li><li><p>
            Run the solution. Ensure the grid is populated and you can
            navigate the database.
          </p><div class="figure"><a name="connector-net-visual-studio-entity-framework-app-running-1"></a><p class="title"><b>Figure 20.29. The Populated Grid Control</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-entity-framework-app-running-1.png" alt="The Populated Grid Control"></div></div></li></ol></div><p>
        <span class="bold"><strong>Adding Code to Save Changes to the
        Database</strong></span>
      </p><p>
        You will now add code to enable you to save changes to the
        database.
      </p><p>
        The Binding source component ensures that changes made in the
        Data Grid View control are also made to the Entity classes bound
        to it. However, that data needs to be saved back from the
        entities to the database itself. This can be achieved by the
        enabling of the Save button in the Navigator control, and the
        addition of some code.
      </p><div class="orderedlist"><ol type="1"><li><p>
            In the Form Designer click on the Save icon in the Form
            toolbar and ensure that its Enabled property is set to True.
          </p><div class="figure"><a name="connector-net-visual-studio-entity-framework-save-enabled"></a><p class="title"><b>Figure 20.30. Save Button Enabled</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-entity-framework-save-enabled.png" alt="Save Button Enabled"></div></div></li><li><p>
            Double click the Save icon in the Form toolbar to display
            its code.
          </p></li><li><p>
            You now need to add code to ensure that data is saved to the
            database when the save button is click in the application.
          </p><div class="figure"><a name="connector-net-visual-studio-entity-framework-form-add-code-save"></a><p class="title"><b>Figure 20.31. Adding Save Code to the Form</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-entity-framework-form-add-code-save.png" alt="Adding Save Code to the Form"></div></div></li><li><p>
            Once the code has been added, save the solution and rebuild
            it. Run the application and verify that changes made in the
            grid are saved.
          </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-visual-studio-entity-framework-tutorial-databinding-linq-entities"></a>20.2.3.9.2. Tutorial: Databinding in ASP.NET using LINQ on Entities</h5></div></div></div><p>
        In this tutorial you create an ASP.NET web page that binds LINQ
        queries to entities using the Entity Framework mapping.
      </p><p>
        If you have not already done so, you should install the World
        example database prior to attempting this tutorial. Instructions
        on where to obtain the database and instructions on how to
        install it where given in the tutorial
        <a href="connectors-apis.html#connector-net-visual-studio-entity-framework-tutorial-winform-data-source" title="20.2.3.9.1. Tutorial: Using an Entity Framework Entity as a Windows Forms Data
        Source">Section 20.2.3.9.1, “Tutorial: Using an Entity Framework Entity as a Windows Forms Data
        Source”</a>.
      </p><p>
        <span class="bold"><strong>Creating an ASP.NET web site</strong></span>
      </p><p>
        In this part of the tutorial you will create an ASP.NET web
        site. The web site will use the World database. The main web
        page will feature a drop down list from which you can select a
        country, data about that country's cities will then be displayed
        in a grid view control.
      </p><div class="orderedlist"><ol type="1"><li><p>
            From the Visual Studio main menu select
            <span class="guimenu">File</span>, <span class="guimenu">New</span>,
            <span class="guimenu">Web Site...</span>.
          </p></li><li><p>
            From the Visual Studio installed templates select
            <span class="guilabel">ASP.NET Web Site</span>. Click
            <span class="guibutton">OK</span>. You will be presented with the
            Source view of your web page by default.
          </p></li><li><p>
            Click the Design view tab situated underneath the Source
            view panel.
          </p><div class="figure"><a name="connector-net-visual-studio-entity-framework-tutorial-linq-1"></a><p class="title"><b>Figure 20.32. The Design Tab</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-entity-framework-tutorial-linq-1.png" alt="The Design Tab"></div></div></li><li><p>
            In the Design view panel, enter some text to decorate the
            blank web page.
          </p></li><li><p>
            Click on Toolbox. From the list of controls select
            <span class="guilabel">DropDownList</span>. Drag and drop the control
            to a location beneath the text on your web page.
          </p><div class="figure"><a name="connector-net-visual-studio-entity-framework-tutorial-linq-2"></a><p class="title"><b>Figure 20.33. Drop Down List</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-entity-framework-tutorial-linq-2.png" alt="Drop Down List"></div></div></li><li><p>
            From the <span class="guilabel">DropDownList</span> control's context
            menu, ensure that the <span class="guilabel">Enable
            AutoPostBack</span> check box is enabled. This will
            ensure the control's event handler is called when an item is
            selected. The user's choice will in turn be used to populate
            the <span class="guilabel">GridView</span> control.
          </p><div class="figure"><a name="connector-net-visual-studio-entity-framework-tutorial-linq-3"></a><p class="title"><b>Figure 20.34. Enable AutoPostBack</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-entity-framework-tutorial-linq-3.png" alt="Enable AutoPostBack"></div></div></li><li><p>
            From the Toolbox select the <span class="guilabel">GridView</span>
            control.
          </p><div class="figure"><a name="connector-net-visual-studio-entity-framework-tutorial-linq-4"></a><p class="title"><b>Figure 20.35. Grid View Control</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-entity-framework-tutorial-linq-4.png" alt="Grid Vew Control"></div></div><p>
            Drag and drop the Grid Vew control to a location just below
            the Drop Down List you already placed.
          </p><div class="figure"><a name="connector-net-visual-studio-entity-framework-tutorial-linq-5"></a><p class="title"><b>Figure 20.36. Placed Grid Vew Control</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-entity-framework-tutorial-linq-5.png" alt="Placed Grid View Control"></div></div></li><li><p>
            At this point it is recommended that you save your solution,
            and build the solution to ensure that there are no errors.
          </p></li><li><p>
            If you run the solution you will see that the text and drop
            down list are displayed, but the list is empty. Also, the
            grid view does not appear at all. Adding this functionality
            is described in the following sections.
          </p></li></ol></div><p>
        At this stage you have a web site that will build, but further
        functionality is required. The next step will be to use the
        Entity Framework to create a mapping from the World database
        into entities that you can control programmatically.
      </p><p>
        <span class="bold"><strong>Creating an ADO.NET Entity Data
        Model</strong></span>
      </p><p>
        In this stage of the tutorial you will add an ADO.NET Entity
        Data Model to your project, using the World database at the
        storage level. The procedure for doing this is described in the
        tutorial
        <a href="connectors-apis.html#connector-net-visual-studio-entity-framework-tutorial-winform-data-source" title="20.2.3.9.1. Tutorial: Using an Entity Framework Entity as a Windows Forms Data
        Source">Section 20.2.3.9.1, “Tutorial: Using an Entity Framework Entity as a Windows Forms Data
        Source”</a>,
        and so will not be repeated here.
      </p><p>
        <span class="bold"><strong>Populating a Drop Data List Box with using
        the results of a entity LINQ query</strong></span>
      </p><p>
        In this part of the tutorial you will write code to populate the
        DropDownList control. When the web page loads the data to
        populate the list will be achieved by using the results of a
        LINQ query on the model created previously.
      </p><div class="orderedlist"><ol type="1"><li><p>
            In the Design view panel, double click on any blank area.
            This brings up the <code class="methodname">Page_Load</code>
            method.
          </p></li><li><p>
            Modify the relevant section of code according to the
            following listing:
          </p><pre class="programlisting">...
public partial class _Default : System.Web.UI.Page 
{
    worldModel.worldEntities we;

    protected void Page_Load(object sender, EventArgs e)
    {
        we = new worldModel.worldEntities();

        if (!IsPostBack)
        {
            var countryQuery = from c in we.country
                               orderby c.Name
                               select new { c.Code, c.Name };
            DropDownList1.DataValueField = "Code";
            DropDownList1.DataTextField = "Name";
            DropDownList1.DataSource = countryQuery;
            DataBind();
        }
    }
...
</pre><p>
            Note that the list control only needs to be populated when
            the page first loads. The conditional code ensures that if
            the page is subsequently reloaded, the list control is not
            repopulated, which would cause the user selection to be
            lost.
          </p></li><li><p>
            Save the solution, build it and run it. You should see the
            list control has been populated. You can select an item, but
            as yet the grid view control does not apear.
          </p></li></ol></div><p>
        At this point you have a working Drop Down List control,
        populated by a LINQ query on your entity data model.
      </p><p>
        <span class="bold"><strong>Populating a Grid View control using an
        entity LINQ query</strong></span>
      </p><p>
        In the last part of this tutorial you will populate the Grid
        View Control using a LINQ query on your entity data model.
      </p><div class="orderedlist"><ol type="1"><li><p>
            In the Design view double click on the
            <span class="guilabel">DropDownList</span> control. This causes its
            <code class="methodname">SelectedIndexChanged</code> code to be
            displayed. This method is called when a user selects an item
            in the list control and thus fires an AutoPostBack event.
          </p></li><li><p>
            Modify the relevant section of code accordingly to the
            following listing:
          </p><pre class="programlisting">...
    protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        var cityQuery = from c in we.city
                        where c.CountryCode == DropDownList1.SelectedValue
                        orderby c.Name
                        select new { c.Name, c.Population, c.CountryCode };
        GridView1.DataSource = cityQuery;
        DataBind();
    }
...
</pre><p>
            The grid view control is populated from the result of the
            LINQ query on the entity data model.
          </p></li><li><p>
            As a check compare your code to that shown in the following
            screenshot:
          </p><div class="figure"><a name="connector-net-visual-studio-entity-framework-tutorial-linq-6"></a><p class="title"><b>Figure 20.37. Source Code</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-entity-framework-tutorial-linq-6.png" alt="Source Code"></div></div></li><li><p>
            Save, build and run the solution. As you select a country
            you will see its cities are displayed in the grid view
            control.
          </p><div class="figure"><a name="connector-net-visual-studio-entity-framework-tutorial-linq-7"></a><p class="title"><b>Figure 20.38. The Working Web Site</b></p><div class="mediaobject"><img src="images/connector-net-visual-studio-entity-framework-tutorial-linq-7.png" alt="The Working Web Site"></div></div></li></ol></div><p>
        In this tutorial you have seen how to create an ASP.NET web
        site, you have also seen how you can access a MySQL database via
        LINQ queries on an entity data model.
      </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-programming"></a>20.2.4. Connector/NET Programming</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-tutorial">20.2.4.1. Tutorial: An Introduction to Connector/NET Programming</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-connecting">20.2.4.2. Connecting to MySQL Using Connector/NET</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-connecting-connection-string">20.2.4.3. Creating a Connection String</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-connection-pooling">20.2.4.4. Using Connector/NET with Connection Pooling</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-connection-options">20.2.4.5. Connector/NET Connection String Options Reference</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-prepared">20.2.4.6. Using the Connector/NET with Prepared Statements</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-stored">20.2.4.7. Accessing Stored Procedures with Connector/NET</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-blob">20.2.4.8. Handling BLOB Data With Connector/NET</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-crystal">20.2.4.9. Using Connector/NET with Crystal Reports</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-datetime">20.2.4.10. Handling Date and Time Information in Connector/NET</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-asp-provider">20.2.4.11. ASP.NET Provider Model</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-binary-issues">20.2.4.12. Binary/Non-Binary Issues</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-using-character-sets">20.2.4.13. Character Sets</a></span></dt><dt><span class="section"><a href="connectors-apis.html#content-advanced-topics-medium-trust">20.2.4.14. Working with medium trust</a></span></dt></dl></div><p>
    Connector/NET comprises several classes that are used to connect to
    the database, execute queries and statements, and manage query
    results.
  </p><p>
    The following are the major classes of Connector/NET:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">MySqlCommand</code>: Represents an SQL statement to
        execute against a MySQL database.
      </p></li><li><p>
        <code class="literal">MySqlCommandBuilder</code>: Automatically generates
        single-table commands used to reconcile changes made to a
        DataSet with the associated MySQL database.
      </p></li><li><p>
        <code class="literal">MySqlConnection</code>: Represents an open
        connection to a MySQL Server database.
      </p></li><li><p>
        <code class="literal">MySqlDataAdapter</code>: Represents a set of data
        commands and a database connection that are used to fill a data
        set and update a MySQL database.
      </p></li><li><p>
        <code class="literal">MySqlDataReader</code>: Provides a means of reading
        a forward-only stream of rows from a MySQL database.
      </p></li><li><p>
        <code class="literal">MySqlException</code>: The exception that is thrown
        when MySQL returns an error.
      </p></li><li><p>
        <code class="literal">MySqlHelper</code>: Helper class that makes it
        easier to work with the provider.
      </p></li><li><p>
        <code class="literal">MySqlTransaction</code>: Represents an SQL
        transaction to be made in a MySQL database.
      </p></li></ul></div><p>
    In the following sections you will learn about some common use cases
    for Connector/NET, including BLOB handling, date handling, and using
    Connector/NET with common tools such as Crystal Reports.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-programming-tutorial"></a>20.2.4.1. Tutorial: An Introduction to Connector/NET Programming</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-tutorial-connection">20.2.4.1.1. The MySqlConnection Object</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-tutorial-sql-command">20.2.4.1.2. The MySqlCommand Object</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-tutorial-data-adapter">20.2.4.1.3. Working with Decoupled Data</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-tutorial-parameters">20.2.4.1.4. Working with Parameters</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-tutorial-stored-procedures">20.2.4.1.5. Working with Stored Procedures</a></span></dt></dl></div><p>
    This section provides a gentle introduction to programming with
    Connector/NET. The example code is written in C#, and is designed to
    work on both Microsoft .NET Framework and Mono.
  </p><p>
    This tutorial is designed to get you up and running with
    Connector/NET as quickly as possible, it does not go into detail on
    any particular topic. However, the following sections of this manual
    describe each of the topics introduced in this tutorial in more
    detail. In this tutorial you are encouraged to type in and run the
    code, modifying it as required for your setup.
  </p><p>
    This tutorial assumes you have MySQL and Connector/NET already
    installed. It also assumes that you have installed the World example
    database, which can be downloaded from the
    <a href="http://dev.mysql.com/doc/" target="_top">MySQL Documentation
    page</a>. You can also find details on how to install the
    database on the same page.
  </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      Before compiling the example code make sure that you have added
      References to your project as required. The References required
      are <code class="literal">System</code>, <code class="literal">System.Data</code> and
      <code class="literal">MySql.Data</code>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-programming-tutorial-connection"></a>20.2.4.1.1. The MySqlConnection Object</h5></div></div></div><p>
      For your Connector/NET application to connect to a MySQL database
      it needs to establish a connection. This is achieved through the
      use of a <code class="literal">MySqlConnection</code> object.
    </p><p>
      The MySqlConnection constructor takes a connection string as one
      of its parameters. The connection string provides necessary
      information to make the connection to the MySQL database. The
      connection string is discussed more fully in
      <a href="connectors-apis.html#connector-net-programming-connecting" title="20.2.4.2. Connecting to MySQL Using Connector/NET">Section 20.2.4.2, “Connecting to MySQL Using Connector/NET”</a>. A
      reference containing a list of supported connection string options
      can also be found in
      <a href="connectors-apis.html#connector-net-programming-connection-options" title="20.2.4.5. Connector/NET Connection String Options Reference">Section 20.2.4.5, “Connector/NET Connection String Options Reference”</a>.
    </p><p>
      The following code shows how to create a connection object.
    </p><pre class="programlisting">using System;
using System.Data;

using MySql.Data;
using MySql.Data.MySqlClient;

public class Tutorial1
{
    public static void Main()
    {
        string connStr = "server=localhost;user=root;database=world;port=3306;password=******;";
        MySqlConnection conn = new MySqlConnection(connStr);
        try
        {
            Console.WriteLine("Connecting to MySQL...");
            conn.Open();
            // Perform databse operations
            conn.Close();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        }
        Console.WriteLine("Done.");
    }
}</pre><p>
      When the <code class="literal">MySqlConnection</code> constructor is invoked
      it returns a connection object, which is used for subsequent
      database operations. The first operation in this example is to
      open the connection. This needs to be done before further
      operations take place. Before the application exits the connection
      to the database needs to be closed by calling
      <code class="literal">Close</code> on the connection object.
    </p><p>
      Sometimes an attempt to perform an <code class="literal">Open</code> on a
      connection object can fail, this will generate an exception that
      can be handled via standard exception handling code.
    </p><p>
      In this section you have learned how to create a connection to a
      MySQL database, and open and close the corresponding connection
      object.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-programming-tutorial-sql-command"></a>20.2.4.1.2. The MySqlCommand Object</h5></div></div></div><p>
      Once a connection has been established with the MySQL database,
      the next step is do carry out the desired database operations.
      This can be achieved through the use of the
      <code class="literal">MySqlCommand</code> object.
    </p><p>
      You will see how to create a <code class="literal">MySqlCommand</code>
      object. Once it has been created there are three main methods of
      interest that you can call:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <span class="bold"><strong>ExecuteReader</strong></span> - used to query
          the database. Results are usually returned in a
          <code class="literal">MySqlDataReader</code> object, created by
          <code class="literal">ExecuteReader</code>.
        </p></li><li><p>
          <span class="bold"><strong>ExecuteNonQuery</strong></span> - used to
          insert and delete data.
        </p></li><li><p>
          <span class="bold"><strong>ExecuteScalar</strong></span> - used to
          return a single value.
        </p></li></ul></div><p>
      Once a <code class="literal">MySqlCommand</code> object has been created,
      you will call one of the above methods on it to carry out a
      database operation, such as perform a query. The results are
      usually returned into a <code class="literal">MySqlDataReader</code> object,
      and then processed, for example the results might be displayed.
      The following code demonstrates how this could be done.
    </p><pre class="programlisting">using System;
using System.Data;

using MySql.Data;
using MySql.Data.MySqlClient;

public class Tutorial2
{
    public static void Main()
    {
        string connStr = "server=localhost;user=root;database=world;port=3306;password=******;";
        MySqlConnection conn = new MySqlConnection(connStr);
        try
        {
            Console.WriteLine("Connecting to MySQL...");
            conn.Open();

            string sql = "SELECT Name, HeadOfState FROM Country WHERE Continent='Oceania'";
            MySqlCommand cmd = new MySqlCommand(sql, conn);
            MySqlDataReader rdr = cmd.ExecuteReader();

            while (rdr.Read())
            {
                Console.WriteLine(rdr[0]+" -- "+rdr[1]);
            }

            rdr.Close();
            conn.Close();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        }
        Console.WriteLine("Done.");
    }
}</pre><p>
      When a connection has been created and opened, the code then
      creates a <code class="literal">MySqlCommand</code> object. Note that the
      SQL query to be executed is passed to the
      <code class="literal">MySqlCommand</code> constructor. The
      <code class="literal">ExecuteReader</code> method is then used to generate a
      <code class="literal">MySqlReader</code> object. The
      <code class="literal">MySqlReader</code> object contains the results
      generated by the SQL executed on the command object. Once the
      results have been obtained in a <code class="literal">MySqlReader</code>
      object, the results can be processed. In this case the information
      is simply printed out as part of a <code class="literal">while</code> loop.
      Finally, the <code class="literal">MySqlReader</code> object is displosed of
      by running its <code class="literal">Close</code> method on it.
    </p><p>
      In the next example you will see how to use the
      <code class="literal">ExecuteNonQuery</code> method.
    </p><p>
      The procedure for performing an <code class="literal">ExecuteNonQuery</code>
      method call is simpler, as there is no need to create an object to
      store results. This is because <code class="literal">ExecuteNonQuery</code>
      is only used for inserting, updating and deleting data. The
      following example illustrates a simple update to the Country
      table:
    </p><pre class="programlisting">using System;
using System.Data;

using MySql.Data;
using MySql.Data.MySqlClient;

public class Tutorial3
{
    public static void Main()
    {
        string connStr = "server=localhost;user=root;database=world;port=3306;password=******;";
        MySqlConnection conn = new MySqlConnection(connStr);
        try
        {
            Console.WriteLine("Connecting to MySQL...");
            conn.Open();

            string sql = "INSERT INTO Country (Name, HeadOfState, Continent) VALUES ('Disneyland','Mickey Mouse', 'North America')";
            MySqlCommand cmd = new MySqlCommand(sql, conn);
            cmd.ExecuteNonQuery();
 
            conn.Close();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        }
        Console.WriteLine("Done.");
    }
}</pre><p>
      The query is constructed, the command object created and the
      <code class="literal">ExecuteNonQuery</code> method called on the command
      object. You can access your MySQL database with the MySQL Client
      program and verify that the update was carried out correctly.
    </p><p>
      Finally, you will see how the <code class="literal">ExecuteScalar</code>
      method can be used to return a single value. Again, this is
      straightforward, as a <code class="literal">MySqlDataReader</code> object is
      not required to store results, a simple variable will do. The
      following code illustrates how to use
      <code class="literal">ExecuteScalar</code>:
    </p><pre class="programlisting">using System;
using System.Data;

using MySql.Data;
using MySql.Data.MySqlClient;

public class Tutorial4
{
    public static void Main()
    {
        string connStr = "server=localhost;user=root;database=world;port=3306;password=******;";
        MySqlConnection conn = new MySqlConnection(connStr);
        try
        {
            Console.WriteLine("Connecting to MySQL...");
            conn.Open();

            string sql = "SELECT COUNT(*) FROM Country";
            MySqlCommand cmd = new MySqlCommand(sql, conn);
            int result = (int)cmd.ExecuteScalar();
            Console.WriteLine("Number of countries in the World database is: "+result);

            conn.Close();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        }
        Console.WriteLine("Done.");
    }
}</pre><p>
      This example uses a simple query to count the rows in the Country
      table. The result is obtained by calling
      <code class="literal">ExecuteScaler</code> on the command object.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-programming-tutorial-data-adapter"></a>20.2.4.1.3. Working with Decoupled Data</h5></div></div></div><p>
      Previously, when using MySqlDataReader, the connection to the
      database was continually maintained, unless explicitly closed. It
      is also possible to work in a manner where a connection is only
      established when needed. For example, in this mode, a connection
      could be established in order to read a chunk of data, the data
      could then be modified by the application as required. A
      connection could then be reestablished only if and when the
      application needs to write data back to the database. This
      decouples the working data set from the database.
    </p><p>
      This decouple mode of working with data is supported by
      Connector/NET. There are several parts involved in allowing this
      method to work:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <span class="bold"><strong>Data Set</strong></span> - The Data Set is
          the area in which data is loaded in order to read or modify
          it. A <code class="literal">DataSet</code> object is instantiated, which
          can store multiple tables of data.
        </p></li><li><p>
          <span class="bold"><strong>Data Adapter</strong></span> - The Data
          Adapter is the interface between the Data Set and the database
          itself. The Data Adapter is responsible for efficiently
          managing connections to the database, opening and closing them
          as required. The Data Adapter is created by instantiating an
          object of the <code class="literal">MySqlDataAdapter</code> class. The
          <code class="literal">MySqlDataAdapter</code> object has two main
          methods: <code class="literal">Fill</code> which reads data into the
          Data Set, and <code class="literal">Update</code>, which writes data
          from the Data Set to the database.
        </p></li><li><p>
          <span class="bold"><strong>Command Builder</strong></span> - The Command
          Builder is a support object. The Command Builder works in
          conjunction with the Data Adapter. When a
          <code class="literal">MySqlDataAdapter</code> object is created it is
          typically given an initial SELECT statement. From this SELECT
          statement the Command Builder can work out the corresponding
          INSERT, UPDATE and DELETE statements that would be required
          should the database need to be updated. To create the Command
          Builder an object of the class
          <code class="literal">MySqlCommandBuilder</code> is created.
        </p></li></ul></div><p>
      Each of these classes will now be discussed in more detail.
    </p><p>
      <span class="bold"><strong>Instantiating a DataSet object</strong></span>
    </p><p>
      A <code class="literal">DataSet</code> object can be created simply, as
      shown in the following example code snippet:
    </p><pre class="programlisting">DataSet dsCountry;
...
dsCountry = new DataSet();</pre><p>
      Although this creates the <code class="literal">DataSet</code> object it has
      not yet filled it with data. For that a Data Adapter is required.
    </p><p>
      <span class="bold"><strong>Instantiating a MySqlDataAdapter
      object</strong></span>
    </p><p>
      The <code class="literal">MySqlDataAdapter</code> can be created as
      illustrated by the following example:
    </p><pre class="programlisting">MySqlDataAdapter daCountry;
...
string sql = "SELECT Code, Name, HeadOfState FROM Country WHERE Continent='North America'";
daCountry = new MySqlDataAdapter (sql, conn);</pre><p>
      Note, the <code class="literal">MySqlDataAdapter</code> is given the SQL
      specifying the data you wish to work with.
    </p><p>
      <span class="bold"><strong>Instantiating a MySqlCommandBuilder
      object</strong></span>
    </p><p>
      Once the <code class="literal">MySqlDataAdapter</code> has been created, it
      is necessary to generate the additional statements required for
      inserting, updating and deleting data. There are several ways to
      do this, but in this tutorial you will see how this can most
      easily be done with <code class="literal">MySqlCommandBuilder</code>. The
      following code snippet ilustrates how this is done:
    </p><pre class="programlisting">MySqlCommandBuilder cb = new MySqlCommandBuilder(daCountry);</pre><p>
      Note that the <code class="literal">MySqlDataAdapter</code> object is passed
      as a parameter to the command builder.
    </p><p>
      <span class="bold"><strong>Filling the Data Set</strong></span>
    </p><p>
      In order to do anything useful with the data from your datbase,
      you need to load it into a Data Set. This is one of the jobs of
      the <code class="literal">MySqlDataAdapter</code> object, and is carried out
      with its <code class="literal">Fill</code> method. The following example
      code illustrates this:
    </p><pre class="programlisting">DataSet dsCountry;
...
dsCountry = new DataSet();
...
daCountry.Fill(dsCountry, "Country");</pre><p>
      Note the <code class="literal">Fill</code> method is a
      <code class="literal">MySqlDataAdapter</code> method, the Data Adapter knows
      how to establish a connec tion with the database and retrieve the
      required data, and then populates the Data Set when the
      <code class="literal">Fill</code> method is called. The second parameter
      “<span class="quote">Country</span>” is the table in the Data Set to update.
    </p><p>
      <span class="bold"><strong>Updating the Data Set</strong></span>
    </p><p>
      The data in the Data Set can now be manipulated by the application
      as required. At some point, changes to data will need to be
      written back to the database. This is achieved through a
      <code class="literal">MySqlDataAdapter</code> method, the
      <code class="literal">Update</code> method.
    </p><pre class="programlisting">daCountry.Update(dsCountry, "Country");
</pre><p>
      Again, the Data Set and the table within the Data Set to update
      are specified.
    </p><p>
      <span class="bold"><strong>Working Example</strong></span>
    </p><p>
      The interactions between the <code class="literal">DataSet</code>,
      <code class="literal">MySqlDataAdapter</code> and
      <code class="literal">MySqlCommandBuilder</code> classes can be a little
      confusing, so their operation can perhaps be best illustrated by
      working code.
    </p><p>
      In this example, data from the World database is read into a Data
      Grid View control. Here, the data can be viewed and changed before
      clicking an update button. The update button then activates code
      to write changes back to the database. The code uses the
      principles explained above. The application was built using the
      Microsoft Visual Studio in order to place and create the user
      interface controls, but the main code that uses the key classes
      descibed above is shown below, and is portable.
    </p><pre class="programlisting">using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

using MySql.Data;
using MySql.Data.MySqlClient;

namespace WindowsFormsApplication5
{
    public partial class Form1 : Form
    {
        MySqlDataAdapter daCountry;
        DataSet dsCountry;
        
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

            string connStr = "server=localhost;user=root;database=world;port=3306;password=******;";
            MySqlConnection conn = new MySqlConnection(connStr);
            try
            {
                label2.Text = "Connecting to MySQL...";
                
                string sql = "SELECT Code, Name, HeadOfState FROM Country WHERE Continent='North America'";
                daCountry = new MySqlDataAdapter (sql, conn);
                MySqlCommandBuilder cb = new MySqlCommandBuilder(daCountry);

                dsCountry = new DataSet();
                daCountry.Fill(dsCountry, "Country");
                dataGridView1.DataSource = dsCountry;
                dataGridView1.DataMember = "Country";
            }
            catch (Exception ex)
            {
                label2.Text = ex.ToString();
            }
        }

        private void button1_Click(object sender, EventArgs e)
        {
            daCountry.Update(dsCountry, "Country");
            label2.Text = "MySQL Database Updated!";
        }

    }
}</pre><p>
      The application running is shown below:
    </p><div class="figure"><a name="connector-net-programming-tutorial-1"></a><p class="title"><b>Figure 20.39. World Database Application</b></p><div class="mediaobject"><img src="images/connector-net-programming-tutorial-1.png" alt="World Database Application"></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-programming-tutorial-parameters"></a>20.2.4.1.4. Working with Parameters</h5></div></div></div><p>
      This part of the tutorial shows you how to use parameters in your
      Connector/NET application.
    </p><p>
      Although it is possible to build SQL query strings directly from
      user input, this is not advisable as it does not prevent from
      erroneous or malicious information being entered. It is safer to
      use parameters as they will be processed as field data only. For
      example, imagine the following query was contructed from user
      input:
    </p><pre class="programlisting">string sql = "SELECT Name, HeadOfState FROM Country WHERE Continent = "+user_continent;</pre><p>
      If the string <code class="literal">user_continent</code> came from a Text
      Box control, there would potentially be no control over the string
      enetred by the user. The user could enter a string that generates
      a run time error, or in the worst case actually harms the system.
      When using parameters it is not possible to do this because a
      parameter is only ever treated as a field parameter, rather than
      an arbitrary piece of SQL code.
    </p><p>
      The same query written user a parameter for user input would be:
    </p><pre class="programlisting">string sql = "SELECT Name, HeadOfState FROM Country WHERE Continent = @Continent";</pre><p>
      Note that the parameter is preceded by an '@' symbol to indicate
      it is to be treated as a parameter.
    </p><p>
      As well as marking the position of the parameter in the query
      string, it is necessary to create a parameter object that can be
      passed to the Command object. In Connector/NET the class
      <code class="literal">MySqlParameter</code> is used for this purpose. The
      use of <code class="literal">MySqlParameter</code> is best illustrated by a
      small code snippet:
    </p><pre class="programlisting">MySqlParameter param = new MySqlParameter();
param.ParameterName = "@Continent";
param.Value = "North America";
cmd.Parameters.Add(param);</pre><p>
      In this example the string "North America" is supplied as the
      parameter value statically, but in a more practical example it
      would come from a user input control. Once the parameter has its
      name and value set it needs to be added to the Command object
      using the <code class="literal">Add</code> method.
    </p><p>
      A further example illustrates this:
    </p><pre class="programlisting">using System;
using System.Data;

using MySql.Data;
using MySql.Data.MySqlClient;

public class Tutorial5
{
    public static void Main()
    {
        string connStr = "server=localhost;user=root;database=world;port=3306;password=******;";
        MySqlConnection conn = new MySqlConnection(connStr);
        try
        {
            Console.WriteLine("Connecting to MySQL...");
            conn.Open();

            string sql = "SELECT Name, HeadOfState FROM Country WHERE Continent=@Continent";
            MySqlCommand cmd = new MySqlCommand(sql, conn);

            Console.WriteLine("Enter a continent e.g. 'North America', 'Europe': ");
            string user_input = Console.ReadLine();

            MySqlParameter param = new MySqlParameter();
            param.ParameterName = "@Continent";
            param.Value = user_input;
            cmd.Parameters.Add(param);

            MySqlDataReader rdr = cmd.ExecuteReader();

            while (rdr.Read())
            {
                Console.WriteLine(rdr["Name"]+" --- "+rdr["HeadOfState"]);
            }

            conn.Close();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        }
        Console.WriteLine("Done.");
    }
}</pre><p>
      In this part of the tutorial you have see how to use parameters to
      make your code more secure.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-programming-tutorial-stored-procedures"></a>20.2.4.1.5. Working with Stored Procedures</h5></div></div></div><p>
      In this section you will see how to work with Stored Procedures.
      This section assumes you have a basic understanding of what a
      Stored Procedure is, and how to create one.
    </p><p>
      For the purposes of this tutorial, you will create a simple Stored
      Procedure to see how it can be called from Connector/NET. In the
      MySQL Client program, connect to the World database and enter the
      following Stored Procedure:
    </p><pre class="programlisting">DELIMITER //
CREATE PROCEDURE country_hos
(IN con CHAR(20))
BEGIN
  SELECT Name, HeadOfState FROM Country 
  WHERE Continent = con;
END //
DELIMITER ;</pre><p>
      Test the Stored Procedure wors as expec ted by typing the
      following into the MySQL Client program:
    </p><pre class="programlisting">CALL country_hos('Europe');</pre><p>
      Note that The Stored Routine takes a single parameter, which is
      the continent you wish to restrict your search to.
    </p><p>
      Having confirmed that the Stored Procedure is present and correct
      you can now move on to seeing how it can be accessed from
      Connector/NET.
    </p><p>
      Calling a Stored Procedure from your Connector/NET application is
      similar to techniques you have seen earlier in this tutorial. A
      <code class="literal">MySqlCommand</code> object is created, but rather than
      taking a SQL query as a parameter it takes the name of the Stored
      Procedure to call. The <code class="literal">MySqlCommand</code> object also
      needs to be set to the type of Stored Procedure. This is
      illustrated by the following code snippet:
    </p><pre class="programlisting">string rtn = "country_hos";
MySqlCommand cmd = new MySqlCommand(rtn, conn);
cmd.CommandType = CommandType.StoredProcedure;</pre><p>
      In this case you also need to pass a parameter to the Stored
      Procedure. This can be achieved using the techniques seen in the
      previous section on parameters,
      <a href="connectors-apis.html#connector-net-programming-tutorial-parameters" title="20.2.4.1.4. Working with Parameters">Section 20.2.4.1.4, “Working with Parameters”</a>.
      This is shown in the following code snippet:
    </p><pre class="programlisting">MySqlParameter param = new MySqlParameter();
param.ParameterName = "@con";
param.Value = "Europe";
cmd.Parameters.Add(param);</pre><p>
      The value of the parameter <code class="literal">@con</code> could more
      realistically have come from a user input control, but for
      simplicity it is set as a static string in this example.
    </p><p>
      At this point everything is set up and all that now needs to be
      done is to call the routine. This can be achieved using techniques
      also learned in earlier sections, but in this case the
      <code class="literal">ExecuteReader</code> method of the
      <code class="literal">MySqlCommand</code> object is used.
    </p><p>
      Complete working code for the Stored Procedure example is shown
      below:
    </p><pre class="programlisting">using System;
using System.Data;

using MySql.Data;
using MySql.Data.MySqlClient;

public class Tutorial6
{
    public static void Main()
    {
        string connStr = "server=localhost;user=root;database=world;port=3306;password=******;";
        MySqlConnection conn = new MySqlConnection(connStr);
        try
        {
            Console.WriteLine("Connecting to MySQL...");
            conn.Open();

            string rtn = "country_hos";
            MySqlCommand cmd = new MySqlCommand(rtn, conn);
            cmd.CommandType = CommandType.StoredProcedure;
            MySqlParameter param = new MySqlParameter();
            param.ParameterName = "@con";
            param.Value = "Europe";
            cmd.Parameters.Add(param);

            MySqlDataReader rdr = cmd.ExecuteReader();
            while (rdr.Read())
            {
                Console.WriteLine(rdr[0] + " --- " + rdr[1]);
            }
            conn.Close();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        }
        Console.WriteLine("Done.");
    }
}</pre><p>
      In this section you have seen how to call a Stored Procedure from
      Connector/NET. For the moment, this concludes our introductory
      tutorial on programming with Connector/NET.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-programming-connecting"></a>20.2.4.2. Connecting to MySQL Using Connector/NET</h4></div></div></div><p>
      <span class="bold"><strong>Introduction</strong></span>
    </p><p>
      All interaction between a .NET application and the MySQL server is
      routed through a <code class="literal">MySqlConnection</code> object. Before
      your application can interact with the server, a
      <code class="literal">MySqlConnection</code> object must be instanced,
      configured, and opened.
    </p><p>
      Even when using the <code class="literal">MySqlHelper</code> class, a
      <code class="literal">MySqlConnection</code> object is created by the helper
      class.
    </p><p>
      In this section, we will describe how to connect to MySQL using
      the <code class="literal">MySqlConnection</code> object.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-programming-connecting-connection-string"></a>20.2.4.3. Creating a Connection String</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-connecting-open">20.2.4.3.1. Opening a Connection</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-connecting-errors">20.2.4.3.2. Handling Connection Errors</a></span></dt></dl></div><p>
      The <code class="literal">MySqlConnection</code> object is configured using
      a connection string. A connection string contains sever key/value
      pairs, separated by semicolons. Each key/value pair is joined with
      an equals sign.
    </p><p>
      The following is a sample connection string:
    </p><pre class="programlisting">Server=127.0.0.1;Uid=root;Pwd=12345;Database=test;</pre><p>
      In this example, the <code class="literal">MySqlConnection</code> object is
      configured to connect to a MySQL server at
      <code class="literal">127.0.0.1</code>, with a user name of
      <code class="literal">root</code> and a password of
      <code class="literal">12345</code>. The default database for all statements
      will be the <code class="literal">test</code> database.
    </p><p>
      The following options are available:
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Using the '@' symbol for parameters is now the preferred
        approach although the old pattern of using '?' is still
        supported.
      </p><p>
        Please be aware however that using '@' can cause conflicts when
        user variables are also used. To help with this situation please
        see the documentation on the <code class="literal">Allow User
        Variables</code> connection string option, which can be found
        here:
        <a href="connectors-apis.html#connector-net-programming-connecting-connection-string" title="20.2.4.3. Creating a Connection String">Section 20.2.4.3, “Creating a Connection String”</a>.
        The <code class="literal">Old Syntax</code> connection string option has
        now been deprecated.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-programming-connecting-open"></a>20.2.4.3.1. Opening a Connection</h5></div></div></div><p>
        Once you have created a connection string it can be used to open
        a connection to the MySQL server.
      </p><p>
        The following code is used to create a
        <code class="literal">MySqlConnection</code> object, assign the connection
        string, and open the connection.
      </p><p>
        Visual Basic Example
      </p><pre class="programlisting">Dim conn As New MySql.Data.MySqlClient.MySqlConnection
Dim myConnectionString as String

myConnectionString = "server=127.0.0.1;" _
            &amp; "uid=root;" _
            &amp; "pwd=12345;" _
            &amp; "database=test;"

Try
  conn.ConnectionString = myConnectionString
  conn.Open()

Catch ex As MySql.Data.MySqlClient.MySqlException
  MessageBox.Show(ex.Message)
End Try
  </pre><p>
        C# Example
      </p><pre class="programlisting">MySql.Data.MySqlClient.MySqlConnection conn;
string myConnectionString;
    
myConnectionString = "server=127.0.0.1;uid=root;" +
    "pwd=12345;database=test;";
  
try
{
    conn = new MySql.Data.MySqlClient.MySqlConnection();
    conn.ConnectionString = myConnectionString;
    conn.Open();
}
catch (MySql.Data.MySqlClient.MySqlException ex)
{
    MessageBox.Show(ex.Message);
}
</pre><p>
        You can also pass the connection string to the constructor of
        the <code class="literal">MySqlConnection</code> class:
      </p><p>
        Visual Basic Example
      </p><pre class="programlisting">Dim myConnectionString as String

myConnectionString = "server=127.0.0.1;" _
              &amp; "uid=root;" _
              &amp; "pwd=12345;" _
              &amp; "database=test;" 

Try
    Dim conn As New MySql.Data.MySqlClient.MySqlConnection(myConnectionString)
    conn.Open()
Catch ex As MySql.Data.MySqlClient.MySqlException
   MessageBox.Show(ex.Message)
End Try
  </pre><p>
        C# Example
      </p><pre class="programlisting">MySql.Data.MySqlClient.MySqlConnection conn;
string myConnectionString;

myConnectionString = "server=127.0.0.1;uid=root;" +
    "pwd=12345;database=test;";

try
{
    conn = new MySql.Data.MySqlClient.MySqlConnection(myConnectionString);
    conn.Open();
}
catch (MySql.Data.MySqlClient.MySqlException ex)
{
    MessageBox.Show(ex.Message);
}
</pre><p>
        Once the connection is open it can be used by the other
        Connector/NET classes to communicate with the MySQL server.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-programming-connecting-errors"></a>20.2.4.3.2. Handling Connection Errors</h5></div></div></div><p>
        Because connecting to an external server is unpredictable, it is
        important to add error handling to your .NET application. When
        there is an error connecting, the
        <code class="literal">MySqlConnection</code> class will return a
        <code class="literal">MySqlException</code> object. This object has two
        properties that are of interest when handling errors:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">Message</code>: A message that describes the
            current exception.
          </p></li><li><p>
            <code class="literal">Number</code>: The MySQL error number.
          </p></li></ul></div><p>
        When handling errors, you can your application's response based
        on the error number. The two most common error numbers when
        connecting are as follows:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">0</code>: Cannot connect to server.
          </p></li><li><p>
            <code class="literal">1045</code>: Invalid user name and/or password.
          </p></li></ul></div><p>
        The following code shows how to adapt the application's response
        based on the actual error:
      </p><p>
        Visual Basic Example
      </p><pre class="programlisting">Dim myConnectionString as String

myConnectionString = "server=127.0.0.1;" _
          &amp; "uid=root;" _
          &amp; "pwd=12345;" _
          &amp; "database=test;" 

Try
    Dim conn As New MySql.Data.MySqlClient.MySqlConnection(myConnectionString)
    conn.Open()
Catch ex As MySql.Data.MySqlClient.MySqlException
    Select Case ex.Number
        Case 0
            MessageBox.Show("Cannot connect to server. Contact administrator")
        Case 1045
            MessageBox.Show("Invalid username/password, please try again")
    End Select
End Try
  </pre><p>
        C# Example
      </p><pre class="programlisting">MySql.Data.MySqlClient.MySqlConnection conn;
string myConnectionString;

myConnectionString = "server=127.0.0.1;uid=root;" +  
    "pwd=12345;database=test;";

try
{
    conn = new MySql.Data.MySqlClient.MySqlConnection(myConnectionString);
    conn.Open();
}
    catch (MySql.Data.MySqlClient.MySqlException ex)
{
    switch (ex.Number)
    {
        case 0:
            MessageBox.Show("Cannot connect to server.  Contact administrator");
        case 1045:
            MessageBox.Show("Invalid username/password, please try again");
    }
}
  </pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
          Note that if you are using multilanguage databases you must
          specify the character set in the connection string. If you do
          not specify the character set, the connection defaults to the
          <code class="literal">latin1</code> charset. You can specify the
          character set as part of the connection string, for example:
        </p></div><pre class="programlisting">MySqlConnection myConnection = new MySqlConnection("server=127.0.0.1;uid=root;" +
    "pwd=12345;database=test;Charset=latin1;");
</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-programming-connection-pooling"></a>20.2.4.4. Using Connector/NET with Connection Pooling</h4></div></div></div><p>
      The Connector/NET supports connection pooling. This is enabled by
      default, but can be turned off via connection string options. See
      <a href="connectors-apis.html#connector-net-programming-connecting-connection-string" title="20.2.4.3. Creating a Connection String">Section 20.2.4.3, “Creating a Connection String”</a>
      for further information.
    </p><p>
      Connection pooling works by keeping the native connection to the
      server live when the client disposes of a
      <code class="literal">MySqlConnection</code>. Subsequently, if a new
      <code class="literal">MySqlConnection</code> object is opened, it will be
      created from the connection pool, rather than creating a new
      native connection. This improves performance.
    </p><p>
      To work as designed, it is best to let the connection pooling
      system manage all connections. You should not create a globally
      accessible instance of <code class="literal">MySqlConnection</code> and then
      manually open and close it. This interferes with the way the
      pooling works and can lead to unpredictable results or even
      exceptions.
    </p><p>
      One approach that simplifies things is to avoid manually creating
      a <code class="literal">MySqlConnection</code> object. Instead use the
      overloaded methods that take a connection string as an argument.
      Using this approach, Connector/NET will automatically create,
      open, close and destroy connections, using the connection pooling
      system for best performance.
    </p><p>
      Typed Datasets and the <code class="literal">MembershipProvider</code> and
      <code class="literal">RoleProvider</code> classes use this approach. Most
      classes that have methods that take a
      <code class="literal">MySqlConnection</code> as an argument, also have
      methods that take a connection string as an argument. This
      includes <code class="literal">MySqlDataAdapter</code>.
    </p><p>
      Instead of manually creating <code class="literal">MySqlCommand</code>
      objects, you can use the static methods of the
      <code class="literal">MySqlHelper</code> class. These take a connection
      string as an argument, and they fully support connection pooling.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-programming-connection-options"></a>20.2.4.5. Connector/NET Connection String Options Reference</h4></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td>Name</td><td>Default</td><td>Description</td></tr><tr><td><code class="literal">Allow Batch</code></td><td>true</td><td>When true, multiple SQL statements can be sent with one command
            execution. -Note- Starting with MySQL 4.1.1, batch
            statements should be separated by the server-defined
            separator character. Commands sent to earlier versions of
            MySQL should be separated with ';'.</td></tr><tr><td><code class="literal">Allow User Variables</code></td><td>false</td><td>Setting this to <code class="literal">true</code> indicates that the provider
            expects user variables in the SQL. This option was added in
            Connector/NET version 5.2.2.</td></tr><tr><td><code class="literal">Allow Zero Datetime</code></td><td>false</td><td>True to have MySqlDataReader.GetValue() return a MySqlDateTime for date
            or datetime columns that have illegal values. False will
            cause a <code class="literal">System.DateTime</code> object to be
            returned for legal values and an exception will be thrown
            for illegal values.</td></tr><tr><td><code class="literal">AutoEnlist</code></td><td>true</td><td> </td></tr><tr><td><code class="literal">BlobAsUTF8ExcludePattern</code></td><td>null</td><td> </td></tr><tr><td><code class="literal">BlobAsUTF8IncludePattern</code></td><td>null</td><td> </td></tr><tr><td><code class="literal">CharSet</code>, <code class="literal">Character Set</code></td><td> </td><td>Specifies the character set that should be used to encode all queries
            sent to the server. Resultsets are still returned in the
            character set of the data returned.</td></tr><tr><td><code class="literal">Connect Timeout</code>, <code class="literal">Connection
            Timeout</code></td><td>15</td><td>The length of time (in seconds) to wait for a connection to the server
            before terminating the attempt and generating an error.</td></tr><tr><td><code class="literal">Connection Reset</code></td><td>false</td><td> </td></tr><tr><td><code class="literal">Convert Zero Datetime</code></td><td>false</td><td>True to have <code class="literal">MySqlDataReader.GetValue()</code> and
            <code class="literal">MySqlDataReader.GetDateTime()</code> return
            DateTime.MinValue for date or datetime columns that have
            illegal values.</td></tr><tr><td><code class="literal">Default Command Timeout</code></td><td> </td><td>Sets the default value of the command timeout to be used. This does not
            supercede the individual command timeout property on an
            individual command object. If you set the command timeout
            property, that will be used. This option was added in
            Connector/NET 5.1.4</td></tr><tr><td><code class="literal">Encrypt</code>, <code class="literal">UseSSL</code></td><td>false</td><td>For Connector/NET 5.0.3 and later, when <code class="literal">true</code>, SSL
            encryption is used for all data sent between the client and
            server if the server has a certificate installed. Recognized
            values are <code class="literal">true</code>,
            <code class="literal">false</code>, <code class="literal">yes</code>, and
            <code class="literal">no</code>. In versions before 5.0.3, this option
            had no effect.</td></tr><tr><td><code class="literal">FunctionsReturnString</code></td><td>false</td><td> </td></tr><tr><td><code class="literal">Host</code>, <code class="literal">Server</code>, <code class="literal">Data
            Source</code>, <code class="literal">DataSource</code>,
            <code class="literal">Address</code>, <code class="literal">Addr</code>,
            <code class="literal">Network Address</code></td><td>localhost</td><td>The name or network address of the instance of MySQL to which to
            connect. Multiple hosts can be specified separated by &amp;.
            This can be useful where multiple MySQL servers are
            configured for replication and you are not concerned about
            the precise server you are connecting to. No attempt is made
            by the provider to synchronize writes to the database so
            care should be taken when using this option. In Unix
            environment with Mono, this can be a fully qualified path to
            MySQL socket file name. With this configuration, the Unix
            socket will be used instead of TCP/IP socket. Currently only
            a single socket name can be given so accessing MySQL in a
            replicated environment using Unix sockets is not currently
            supported.</td></tr><tr><td><code class="literal">Ignore Prepare</code></td><td>true</td><td>When true, instructs the provider to ignore any calls to
            <code class="literal">MySqlCommand.Prepare()</code>. This option is
            provided to prevent issues with corruption of the statements
            when use with server side prepared statements. If you want
            to use server-side prepare statements, set this option to
            false. This option was added in Connector/NET 5.0.3 and
            Connector/NET 1.0.9.</td></tr><tr><td><code class="literal">Initial Catalog</code>, <code class="literal">Database</code></td><td>mysql</td><td>The name of the database to use intially</td></tr><tr><td><code class="literal">InteractiveSession</code></td><td>false</td><td> </td></tr><tr><td><code class="literal">Logging</code></td><td>false</td><td>When true, various pieces of information is output to any configured
            TraceListeners.</td></tr><tr><td><code class="literal">Old Syntax</code>, <code class="literal">OldSyntax</code></td><td>false</td><td>Allows use of '@' symbol as a parameter marker. See
            <code class="literal">MySqlCommand</code> for more info. This option
            was deprecated in Connector/NET 5.2.2. All future code
            should be written using the '@' symbol.</td></tr><tr><td><code class="literal">Password</code>, <code class="literal">pwd</code></td><td> </td><td>The password for the MySQL account being used.</td></tr><tr><td><code class="literal">Persist Security Info</code></td><td>false</td><td>When set to <code class="literal">false</code> or <code class="literal">no</code> (strongly
            recommended), security-sensitive information, such as the
            password, is not returned as part of the connection if the
            connection is open or has ever been in an open state.
            Resetting the connection string resets all connection string
            values including the password. Recognized values are
            <code class="literal">true</code>, <code class="literal">false</code>,
            <code class="literal">yes</code>, and <code class="literal">no</code>.</td></tr><tr><td><code class="literal">Pipe Name</code>, <code class="literal">Pipe</code></td><td>mysql</td><td>When set to the name of a named pipe, the
            <code class="literal">MySqlConnection</code> will attempt to connect
            to MySQL on that named pipe.This settings only applies to
            the Windows platform.</td></tr><tr><td><code class="literal">Port</code></td><td>3306</td><td>The port MySQL is using to listen for connections. This value is ignored
            if Unix socket is used.</td></tr><tr><td><code class="literal">Procedure Cache Size</code></td><td>25</td><td>Sets the size of the stored procedure cache. By default, Connector/NET
            will store the metadata (input/output datatypes) about the
            last 25 stored procedures used. To disable the stored
            procedure cache, set the value to zero (0). This option was
            added in Connector/NET 5.0.2 and Connector/NET 1.0.9.</td></tr><tr><td><code class="literal">Protocol</code></td><td>socket</td><td>Specifies the type of connection to make to the server. Values can be:
            <code class="literal">socket</code> or <code class="literal">tcp</code> for a
            socket connection, <code class="literal">pipe</code> for a named pipe
            connection, <code class="literal">unix</code> for a Unix socket
            connection, <code class="literal">memory</code> to use MySQL shared
            memory.</td></tr><tr><td><code class="literal">Respect Binary Flags</code></td><td>true</td><td>Setting this option to <code class="literal">false</code> means that Connector/NET
            will ignore a column's binary flags as set by the server.
            This option was added in Connector/NET version 5.1.3.</td></tr><tr><td><code class="literal">Shared Memory Name</code></td><td>MYSQL</td><td>The name of the shared memory object to use for communication if the
            connection protocol is set to memory.</td></tr><tr><td><code class="literal">TreatBlobsAsUTF8</code></td><td>false</td><td> </td></tr><tr><td><code class="literal">Treat Tiny As Boolean</code></td><td>true</td><td>Setting this value to <code class="literal">false</code> indicates that
            <code class="literal">TINYINT(1)</code> will be treated as an
            <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">INT</code></a>. See also
            <a href="data-types.html#numeric-type-overview" title="10.1.1. Overview of Numeric Types">Section 10.1.1, “Overview of Numeric Types”</a> for a further
            explanation of the <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">TINYINT</code></a>
            and <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BOOL</code></a> data types.</td></tr><tr><td><code class="literal">Use Affected Rows</code></td><td>false</td><td>When <code class="literal">true</code> the connection will report changed rows
            instead of found rows. This option was added in
            Connector/NET version 5.2.6.</td></tr><tr><td><code class="literal">Use Procedure Bodies</code></td><td>true</td><td>Setting this option to <code class="literal">false</code> indicates that the user
            connecting to the database does not have the
            <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privileges for the
            <code class="literal">mysql.proc</code> (stored procedures) table.
            When to set to <code class="literal">false</code>, Connector/NET will
            not rely on this information being available when the
            procedure is called. Because Connector/NET will be unable to
            determine this information, you should explicitly set the
            types of the all the parameters before the call and the
            parameters should be added to the command in the exact same
            order as they appear in the procedure definition. This
            option was added in Connector/NET 5.0.4 and Connector/NET
            1.0.10.</td></tr><tr><td><code class="literal">User Id</code>, <code class="literal">Username</code>,
            <code class="literal">Uid</code>, <code class="literal">User name</code></td><td> </td><td>The MySQL login account being used.</td></tr><tr><td><code class="literal">Use Compression</code></td><td>false</td><td><p>
              Setting this option to <code class="literal">true</code> enables
              compression of packets exchanged between the client and
              the server. This exchange is defined by the MySQL
              client-server protocol.
            </p>



            <p>
              Compression is used if both client and server support ZLIB
              compression, and the client has requested compression
              using this option.
            </p>



            <p>
              A compressed packet header is: packet length (3 bytes),
              packet number (1 byte), and Uncompressed Packet Length (3
              bytes). The Uncompressed Packet Length is the number of
              bytes in the original, uncompressed packet. If this is
              zero then the data in this packet has not been compressed.
              When the compression protocol is in use, either the client
              or the server may compress packets. However, compression
              will not occur if the compressed length is greater than
              the original length. Thus, some packets will contain
              compressed data while other packets will not.
            </p></td></tr><tr><td><code class="literal">Use Usage Advisor</code></td><td>false</td><td> </td></tr><tr><td><code class="literal">Use Performance Monitor</code></td><td>false</td><td> </td></tr></tbody></table></div><p>
    The following table lists the valid names for connection pooling
    values within the <code class="literal">ConnectionString</code>. For more
    information about connection pooling, see Connection Pooling for the
    MySQL Data Provider.
  </p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td>Name</td><td>Default</td><td>Description</td></tr><tr><td><code class="literal">Cache Server Configuration</code>,
            <code class="literal">CacheServerConfiguration</code>,
            <code class="literal">CacheServerConfig</code></td><td>false</td><td>Specifies whether server variables should be updated when a pooled
            connection is returned. Turning this one will yeild faster
            opens but will also not catch any server changes made by
            other connections.</td></tr><tr><td><code class="literal">Connection Lifetime</code></td><td>0</td><td>When a connection is returned to the pool, its creation time is compared
            with the current time, and the connection is destroyed if
            that time span (in seconds) exceeds the value specified by
            <code class="literal">Connection Lifetime</code>. This is useful in
            clustered configurations to force load balancing between a
            running server and a server just brought online. A value of
            zero (0) causes pooled connections to have the maximum
            connection timeout.</td></tr><tr><td><code class="literal">Max Pool Size</code></td><td>100</td><td>The maximum number of connections allowed in the pool.</td></tr><tr><td><code class="literal">Min Pool Size</code></td><td>0</td><td>The minimum number of connections allowed in the pool.</td></tr><tr><td><code class="literal">Pooling</code></td><td>true</td><td>When <code class="literal">true</code>, the <code class="literal">MySqlConnection</code>
            object is drawn from the appropriate pool, or if necessary,
            is created and added to the appropriate pool. Recognized
            values are <code class="literal">true</code>,
            <code class="literal">false</code>, <code class="literal">yes</code>, and
            <code class="literal">no</code>.</td></tr><tr><td><code class="literal">Reset Pooled Connections</code>,
            <code class="literal">ResetConnections</code>,
            <code class="literal">ResetPooledConnections</code></td><td>true</td><td>Specifies whether a ping and a reset should be sent to the server before
            a pooled connection is returned. Not resetting will yield
            faster connection opens but also will not clear out session
            items such as temp tables.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-programming-prepared"></a>20.2.4.6. Using the Connector/NET with Prepared Statements</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-prepared-preparing">20.2.4.6.1. Preparing Statements in Connector/NET</a></span></dt></dl></div><p>
      <span class="bold"><strong>Introduction</strong></span>
    </p><p>
      As of MySQL 4.1, it is possible to use prepared statements with
      Connector/NET. Use of prepared statements can provide significant
      performance improvements on queries that are executed more than
      once.
    </p><p>
      Prepared execution is faster than direct execution for statements
      executed more than once, primarily because the query is parsed
      only once. In the case of direct execution, the query is parsed
      every time it is executed. Prepared execution also can provide a
      reduction of network traffic because for each execution of the
      prepared statement, it is necessary only to send the data for the
      parameters.
    </p><p>
      Another advantage of prepared statements is that it uses a binary
      protocol that makes data transfer between client and server more
      efficient.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-programming-prepared-preparing"></a>20.2.4.6.1. Preparing Statements in Connector/NET</h5></div></div></div><p>
        To prepare a statement, create a command object and set the
        <code class="literal">.CommandText</code> property to your query.
      </p><p>
        After entering your statement, call the
        <code class="literal">.Prepare</code> method of the
        <code class="literal">MySqlCommand</code> object. After the statement is
        prepared, add parameters for each of the dynamic elements in the
        query.
      </p><p>
        After you enter your query and enter parameters, execute the
        statement using the <code class="literal">.ExecuteNonQuery()</code>,
        <code class="literal">.ExecuteScalar()</code>, or
        <code class="literal">.ExecuteReader</code> methods.
      </p><p>
        For subsequent executions, you need only modify the values of
        the parameters and call the execute method again, there is no
        need to set the <code class="literal">.CommandText</code> property or
        redefine the parameters.
      </p><p>
        Visual Basic Example
      </p><pre class="programlisting">Dim conn As New MySqlConnection
Dim cmd As New MySqlCommand
  
conn.ConnectionString = strConnection

Try
   conn.Open()
   cmd.Connection = conn
 
   cmd.CommandText = "INSERT INTO myTable VALUES(NULL, @number, @text)"
   cmd.Prepare()

   cmd.Parameters.Add("@number", 1)
   cmd.Parameters.Add("@text", "One")

   For i = 1 To 1000
       cmd.Parameters["@number"].Value = i
       cmd.Parameters["@text"].Value = "A string value"

       cmd.ExecuteNonQuery()
     Next 
Catch ex As MySqlException
    MessageBox.Show("Error " &amp; ex.Number &amp; " has occurred: " &amp; ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
End Try
  </pre><p>
        C# Example
      </p><pre class="programlisting">MySql.Data.MySqlClient.MySqlConnection conn;
MySql.Data.MySqlClient.MySqlCommand cmd;
  
conn = new MySql.Data.MySqlClient.MySqlConnection();
cmd = new MySql.Data.MySqlClient.MySqlCommand();

conn.ConnectionString = strConnection;

try
{
    conn.Open();
    cmd.Connection = conn;

    cmd.CommandText = "INSERT INTO myTable VALUES(NULL, @number, @text)";
    cmd.Prepare();

    cmd.Parameters.Add("@number", 1);
    cmd.Parameters.Add("@text", "One");

    for (int i=1; i &lt;= 1000; i++)
    {
        cmd.Parameters["@number"].Value = i;
        cmd.Parameters["@text"].Value = "A string value";

        cmd.ExecuteNonQuery();
    }
}
catch (MySql.Data.MySqlClient.MySqlException ex)
{
    MessageBox.Show("Error " + ex.Number + " has occurred: " + ex.Message,
        "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
}
</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-programming-stored"></a>20.2.4.7. Accessing Stored Procedures with Connector/NET</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-stored-creating">20.2.4.7.1. Creating Stored Procedures from Connector/NET</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-stored-calling">20.2.4.7.2. Calling a Stored Procedure from Connector/NET</a></span></dt></dl></div><p>
      <span class="bold"><strong>Introduction</strong></span>
    </p><p>
      With the release of MySQL version 5 the MySQL server now supports
      stored procedures with the SQL 2003 stored procedure syntax.
    </p><p>
      A stored procedure is a set of SQL statements that can be stored
      in the server. Once this has been done, clients do not need to
      keep reissuing the individual statements but can refer to the
      stored procedure instead.
    </p><p>
      Stored procedures can be particularly useful in situations such as
      the following:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          When multiple client applications are written in different
          languages or work on different platforms, but need to perform
          the same database operations.
        </p></li><li><p>
          When security is paramount. Banks, for example, use stored
          procedures for all common operations. This provides a
          consistent and secure environment, and procedures can ensure
          that each operation is properly logged. In such a setup,
          applications and users would not get any access to the
          database tables directly, but can only execute specific stored
          procedures.
        </p></li></ul></div><p>
      Connector/NET supports the calling of stored procedures through
      the <code class="literal">MySqlCommand</code> object. Data can be passed in
      and our of a MySQL stored procedure through use of the
      <code class="literal">MySqlCommand.Parameters</code> collection.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        When you call a stored procedure, the command object makes an
        additional <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> call to
        determine the parameters of the stored procedure. You must
        ensure that the user calling the procedure has the
        <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privilege on the
        <code class="literal">mysql.proc</code> table to enable them to verify the
        parameters. Failure to do this will result in an error when
        calling the procedure.
      </p></div><p>
      This section will not provide in-depth information on creating
      Stored Procedures. For such information, please refer to
      <a href="http://dev.mysql.com/doc/mysql/en/stored-routines.html" target="_top">http://dev.mysql.com/doc/mysql/en/stored-routines.html</a>.
    </p><p>
      A sample application demonstrating how to use stored procedures
      with Connector/NET can be found in the <code class="literal">Samples</code>
      directory of your Connector/NET installation.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-programming-stored-creating"></a>20.2.4.7.1. Creating Stored Procedures from Connector/NET</h5></div></div></div><p>
        Stored procedures in MySQL can be created using a variety of
        tools. First, stored procedures can be created using the
        <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> command-line client. Second, stored
        procedures can be created using the <code class="literal">MySQL Query
        Browser</code> GUI client. Finally, stored procedures can be
        created using the <code class="literal">.ExecuteNonQuery</code> method of
        the <code class="literal">MySqlCommand</code> object:
      </p><p>
        Visual Basic Example
      </p><pre class="programlisting">Dim conn As New MySqlConnection
Dim cmd As New MySqlCommand

conn.ConnectionString = "server=127.0.0.1;" _
    &amp; "uid=root;" _
    &amp; "pwd=12345;" _
    &amp; "database=test"

Try
    conn.Open()
    cmd.Connection = conn

    cmd.CommandText = "CREATE PROCEDURE add_emp(" _
        &amp; "IN fname VARCHAR(20), IN lname VARCHAR(20), IN bday DATETIME, OUT empno INT) " _
        &amp; "BEGIN INSERT INTO emp(first_name, last_name, birthdate) " _
        &amp; "VALUES(fname, lname, DATE(bday)); SET empno = LAST_INSERT_ID(); END"
 
    cmd.ExecuteNonQuery()
Catch ex As MySqlException
    MessageBox.Show("Error " &amp; ex.Number &amp; " has occurred: " &amp; ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
End Try
</pre><p>
        C# Example
      </p><pre class="programlisting">MySql.Data.MySqlClient.MySqlConnection conn;
MySql.Data.MySqlClient.MySqlCommand cmd;

conn = new MySql.Data.MySqlClient.MySqlConnection();
cmd = new MySql.Data.MySqlClient.MySqlCommand();

conn.ConnectionString = "server=127.0.0.1;uid=root;" +
    "pwd=12345;database=test;";

try
{
    conn.Open();
    cmd.Connection = conn;

    cmd.CommandText = "CREATE PROCEDURE add_emp(" +
        "IN fname VARCHAR(20), IN lname VARCHAR(20), IN bday DATETIME, OUT empno INT) " +
        "BEGIN INSERT INTO emp(first_name, last_name, birthdate) " +
        "VALUES(fname, lname, DATE(bday)); SET empno = LAST_INSERT_ID(); END";

    cmd.ExecuteNonQuery();
}
catch (MySql.Data.MySqlClient.MySqlException ex)
{
MessageBox.Show("Error " + ex.Number + " has occurred: " + ex.Message,
    "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
}
</pre><p>
        It should be noted that, unlike the command-line and GUI
        clients, you are not required to specify a special delimiter
        when creating stored procedures in Connector/NET.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-programming-stored-calling"></a>20.2.4.7.2. Calling a Stored Procedure from Connector/NET</h5></div></div></div><p>
        To call a stored procedure using Connector/NET, create a
        <code class="literal">MySqlCommand</code> object and pass the stored
        procedure name as the <code class="literal">.CommandText</code> property.
        Set the <code class="literal">.CommandType</code> property to
        <code class="literal">CommandType.StoredProcedure</code>.
      </p><p>
        After the stored procedure is named, create one
        <code class="literal">MySqlCommand</code> parameter for every parameter in
        the stored procedure. <code class="literal">IN</code> parameters are
        defined with the parameter name and the object containing the
        value, <code class="literal">OUT</code> parameters are defined with the
        parameter name and the datatype that is expected to be returned.
        All parameters need the parameter direction defined.
      </p><p>
        After defining parameters, call the stored procedure by using
        the <code class="literal">MySqlCommand.ExecuteNonQuery()</code> method:
      </p><p>
        Visual Basic Example
      </p><pre class="programlisting">Dim conn As New MySqlConnection
Dim cmd As New MySqlCommand

conn.ConnectionString = "server=127.0.0.1;" _
    &amp; "uid=root;" _
    &amp; "pwd=12345;" _
    &amp; "database=test"

Try
    conn.Open()
    cmd.Connection = conn

    cmd.CommandText = "add_emp"
    cmd.CommandType = CommandType.StoredProcedure

    cmd.Parameters.Add("@lname", 'Jones')
    cmd.Parameters["@lname"].Direction = ParameterDirection.Input

    cmd.Parameters.Add("@fname", 'Tom')
    cmd.Parameters["@fname"].Direction = ParameterDirection.Input

    cmd.Parameters.Add("@bday", #12/13/1977 2:17:36 PM#)
    cmd.Parameters["@bday"].Direction = ParameterDirection.Input

    cmd.Parameters.Add("@empno", MySqlDbType.Int32)
    cmd.Parameters["@empno"].Direction = ParameterDirection.Output

    cmd.ExecuteNonQuery()

    MessageBox.Show(cmd.Parameters["@empno"].Value)
Catch ex As MySqlException
    MessageBox.Show("Error " &amp; ex.Number &amp; " has occurred: " &amp; ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
End Try
</pre><p>
        C# Example
      </p><pre class="programlisting">MySql.Data.MySqlClient.MySqlConnection conn;
MySql.Data.MySqlClient.MySqlCommand cmd;

conn = new MySql.Data.MySqlClient.MySqlConnection();
cmd = new MySql.Data.MySqlClient.MySqlCommand();

conn.ConnectionString = "server=127.0.0.1;uid=root;" +
    "pwd=12345;database=test;";

try
{
    conn.Open();
    cmd.Connection = conn;

    cmd.CommandText = "add_emp";
    cmd.CommandType = CommandType.StoredProcedure;

    cmd.Parameters.Add("@lname", "Jones");
    cmd.Parameters["@lname"].Direction = ParameterDirection.Input;

    cmd.Parameters.Add("@fname", "Tom");
    cmd.Parameters["@fname"].Direction = ParameterDirection.Input;

    cmd.Parameters.Add("@bday", DateTime.Parse("12/13/1977 2:17:36 PM"));
    cmd.Parameters["@bday"].Direction = ParameterDirection.Input;

    cmd.Parameters.Add("@empno", MySqlDbType.Int32);
    cmd.Parameters["@empno"].Direction = ParameterDirection.Output;

    cmd.ExecuteNonQuery();

    MessageBox.Show(cmd.Parameters["@empno"].Value);
}
catch (MySql.Data.MySqlClient.MySqlException ex)
{
    MessageBox.Show("Error " + ex.Number + " has occurred: " + ex.Message,
      "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
}
</pre><p>
        Once the stored procedure is called, the values of output
        parameters can be retrieved by using the
        <code class="literal">.Value</code> property of the
        <code class="literal">MySqlConnector.Parameters</code> collection.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-programming-blob"></a>20.2.4.8. Handling BLOB Data With Connector/NET</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-blob-serverprep">20.2.4.8.1. Preparing the MySQL Server</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-blob-writing">20.2.4.8.2. Writing a File to the Database</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-blob-reading">20.2.4.8.3. Reading a BLOB from the Database to a File on Disk</a></span></dt></dl></div><p>
      <span class="bold"><strong>Introduction</strong></span>
    </p><p>
      One common use for MySQL is the storage of binary data in
      <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> columns. MySQL supports four
      different BLOB datatypes: <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TINYBLOB</code></a>,
      <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>,
      <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">MEDIUMBLOB</code></a>, and
      <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">LONGBLOB</code></a>.
    </p><p>
      Data stored in a BLOB column can be accessed using Connector/NET
      and manipulated using client-side code. There are no special
      requirements for using Connector/NET with BLOB data.
    </p><p>
      Simple code examples will be presented within this section, and a
      full sample application can be found in the
      <code class="literal">Samples</code> directory of the Connector/NET
      installation.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-programming-blob-serverprep"></a>20.2.4.8.1. Preparing the MySQL Server</h5></div></div></div><p>
        The first step is using MySQL with BLOB data is to configure the
        server. Let's start by creating a table to be accessed. In my
        file tables, I usually have four columns: an AUTO_INCREMENT
        column of appropriate size (UNSIGNED SMALLINT) to serve as a
        primary key to identify the file, a VARCHAR column that stores
        the file name, an UNSIGNED MEDIUMINT column that stores the size
        of the file, and a MEDIUMBLOB column that stores the file
        itself. For this example, I will use the following table
        definition:
      </p><pre class="programlisting">CREATE TABLE file(
file_id SMALLINT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,
file_name VARCHAR(64) NOT NULL,
file_size MEDIUMINT UNSIGNED NOT NULL,
file MEDIUMBLOB NOT NULL);
</pre><p>
        After creating a table, you may need to modify the
        max_allowed_packet system variable. This variable determines how
        large of a packet (i.e. a single row) can be sent to the MySQL
        server. By default, the server will only accept a maximum size
        of 1 meg from our client application. If you do not intend to
        exceed 1 meg, this should be fine. If you do intend to exceed 1
        meg in your file transfers, this number has to be increased.
      </p><p>
        The max_allowed_packet option can be modified using MySQL
        Administrator's Startup Variables screen. Adjust the Maximum
        allowed option in the Memory section of the Networking tab to an
        appropriate setting. After adjusting the value, click the
        <span class="guibutton">Apply Changes</span> button and restart the
        server using the <code class="literal">Service Control</code> screen of
        MySQL Administrator. You can also adjust this value directly in
        the my.cnf file (add a line that reads max_allowed_packet=xxM),
        or use the SET max_allowed_packet=xxM; syntax from within MySQL.
      </p><p>
        Try to be conservative when setting max_allowed_packet, as
        transfers of BLOB data can take some time to complete. Try to
        set a value that will be adequate for your intended use and
        increase the value if necessary.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-programming-blob-writing"></a>20.2.4.8.2. Writing a File to the Database</h5></div></div></div><p>
        To write a file to a database we need to convert the file to a
        byte array, then use the byte array as a parameter to an
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> query.
      </p><p>
        The following code opens a file using a FileStream object, reads
        it into a byte array, and inserts it into the
        <code class="literal">file</code> table:
      </p><p>
        Visual Basic Example
      </p><pre class="programlisting">Dim conn As New MySqlConnection
Dim cmd As New MySqlCommand

Dim SQL As String

Dim FileSize As UInt32
Dim rawData() As Byte
Dim fs As FileStream

conn.ConnectionString = "server=127.0.0.1;" _
    &amp; "uid=root;" _
    &amp; "pwd=12345;" _
    &amp; "database=test"

Try
    fs = New FileStream("c:\image.png", FileMode.Open, FileAccess.Read)
    FileSize = fs.Length
    
    rawData = New Byte(FileSize) {}
    fs.Read(rawData, 0, FileSize)
    fs.Close()
    
    conn.Open()
    
    SQL = "INSERT INTO file VALUES(NULL, @FileName, @FileSize, @File)"
    
    cmd.Connection = conn
    cmd.CommandText = SQL
    cmd.Parameters.Add("@FileName", strFileName)
    cmd.Parameters.Add("@FileSize", FileSize)
    cmd.Parameters.Add("@File", rawData)
    
    cmd.ExecuteNonQuery()
    
    MessageBox.Show("File Inserted into database successfully!", _
    "Success!", MessageBoxButtons.OK, MessageBoxIcon.Asterisk)
    
    conn.Close()
Catch ex As Exception
    MessageBox.Show("There was an error: " &amp; ex.Message, "Error", _
        MessageBoxButtons.OK, MessageBoxIcon.Error)
End Try
  </pre><p>
        C# Example
      </p><pre class="programlisting">MySql.Data.MySqlClient.MySqlConnection conn;
MySql.Data.MySqlClient.MySqlCommand cmd;

conn = new MySql.Data.MySqlClient.MySqlConnection();
cmd = new MySql.Data.MySqlClient.MySqlCommand();

string SQL;
UInt32 FileSize;
byte[] rawData;
FileStream fs;

conn.ConnectionString = "server=127.0.0.1;uid=root;" +
    "pwd=12345;database=test;";

try
{
    fs = new FileStream(@"c:\image.png", FileMode.Open, FileAccess.Read);
    FileSize = fs.Length;

    rawData = new byte[FileSize];
    fs.Read(rawData, 0, FileSize);
    fs.Close();

    conn.Open();

    SQL = "INSERT INTO file VALUES(NULL, @FileName, @FileSize, @File)";

    cmd.Connection = conn;
    cmd.CommandText = SQL;
    cmd.Parameters.Add("@FileName", strFileName);
    cmd.Parameters.Add("@FileSize", FileSize);
    cmd.Parameters.Add("@File", rawData);

    cmd.ExecuteNonQuery();

    MessageBox.Show("File Inserted into database successfully!",
        "Success!", MessageBoxButtons.OK, MessageBoxIcon.Asterisk);

    conn.Close();
}
catch (MySql.Data.MySqlClient.MySqlException ex)
{
    MessageBox.Show("Error " + ex.Number + " has occurred: " + ex.Message,
        "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
}
 </pre><p>
        The <code class="literal">Read</code> method of the
        <code class="literal">FileStream</code> object is used to load the file
        into a byte array which is sized according to the
        <code class="literal">Length</code> property of the FileStream object.
      </p><p>
        After assigning the byte array as a parameter of the
        <code class="literal">MySqlCommand</code> object, the
        <code class="literal">ExecuteNonQuery</code> method is called and the BLOB
        is inserted into the <code class="literal">file</code> table.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-programming-blob-reading"></a>20.2.4.8.3. Reading a BLOB from the Database to a File on Disk</h5></div></div></div><p>
        Once a file is loaded into the <code class="literal">file</code> table, we
        can use the <code class="literal">MySqlDataReader</code> class to retrieve
        it.
      </p><p>
        The following code retrieves a row from the
        <code class="literal">file</code> table, then loads the data into a
        <code class="literal">FileStream</code> object to be written to disk:
      </p><p>
        Visual Basic Example
      </p><pre class="programlisting">Dim conn As New MySqlConnection
Dim cmd As New MySqlCommand
Dim myData As MySqlDataReader
Dim SQL As String
Dim rawData() As Byte
Dim FileSize As UInt32
Dim fs As FileStream

conn.ConnectionString = "server=127.0.0.1;" _
    &amp; "uid=root;" _
    &amp; "pwd=12345;" _
    &amp; "database=test"

SQL = "SELECT file_name, file_size, file FROM file"

Try
    conn.Open()
    
    cmd.Connection = conn
    cmd.CommandText = SQL
    
    myData = cmd.ExecuteReader
    
    If Not myData.HasRows Then Throw New Exception("There are no BLOBs to save")
    
    myData.Read()
    
    FileSize = myData.GetUInt32(myData.GetOrdinal("file_size"))
    rawData = New Byte(FileSize) {}
    
    myData.GetBytes(myData.GetOrdinal("file"), 0, rawData, 0, FileSize)
    
    fs = New FileStream("C:\newfile.png", FileMode.OpenOrCreate, FileAccess.Write)
    fs.Write(rawData, 0, FileSize)
    fs.Close()
    
    MessageBox.Show("File successfully written to disk!", "Success!", MessageBoxButtons.OK, MessageBoxIcon.Asterisk)
    
    myData.Close()
    conn.Close()
Catch ex As Exception
    MessageBox.Show("There was an error: " &amp; ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
End Try
  </pre><p>
        C# Example
      </p><pre class="programlisting">MySql.Data.MySqlClient.MySqlConnection conn;
MySql.Data.MySqlClient.MySqlCommand cmd;
MySql.Data.MySqlClient.MySqlDataReader myData;

conn = new MySql.Data.MySqlClient.MySqlConnection();
cmd = new MySql.Data.MySqlClient.MySqlCommand();

string SQL;
UInt32 FileSize;
byte[] rawData;
FileStream fs;

conn.ConnectionString = "server=127.0.0.1;uid=root;" +
    "pwd=12345;database=test;";

SQL = "SELECT file_name, file_size, file FROM file";

try
{
    conn.Open();

    cmd.Connection = conn;
    cmd.CommandText = SQL;

    myData = cmd.ExecuteReader();

    if (! myData.HasRows)
        throw new Exception("There are no BLOBs to save");

    myData.Read();

    FileSize = myData.GetUInt32(myData.GetOrdinal("file_size"));
    rawData = new byte[FileSize];

    myData.GetBytes(myData.GetOrdinal("file"), 0, rawData, 0, FileSize);

    fs = new FileStream(@"C:\newfile.png", FileMode.OpenOrCreate, FileAccess.Write);
    fs.Write(rawData, 0, FileSize);
    fs.Close();

    MessageBox.Show("File successfully written to disk!",
        "Success!", MessageBoxButtons.OK, MessageBoxIcon.Asterisk);

    myData.Close();
    conn.Close();
}
catch (MySql.Data.MySqlClient.MySqlException ex)
{
    MessageBox.Show("Error " + ex.Number + " has occurred: " + ex.Message,
        "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
}
 </pre><p>
        After connecting, the contents of the <code class="literal">file</code>
        table are loaded into a <code class="literal">MySqlDataReader</code>
        object. The <code class="literal">GetBytes</code> method of the
        MySqlDataReader is used to load the BLOB into a byte array,
        which is then written to disk using a FileStream object.
      </p><p>
        The <code class="literal">GetOrdinal</code> method of the MySqlDataReader
        can be used to determine the integer index of a named column.
        Use of the GetOrdinal method prevents errors if the column order
        of the <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> query is changed.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-programming-crystal"></a>20.2.4.9. Using Connector/NET with Crystal Reports</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-crystal-source">20.2.4.9.1. Creating a Data Source</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-crystal-creating">20.2.4.9.2. Creating the Report</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-crystal-displaying">20.2.4.9.3. Displaying the Report</a></span></dt></dl></div><p>
      <span class="bold"><strong>Introduction</strong></span>
    </p><p>
      Crystal Reports is a common tool used by Windows application
      developers to perform reporting and document generation. In this
      section we will show how to use Crystal Reports XI with MySQL and
      Connector/NET.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-programming-crystal-source"></a>20.2.4.9.1. Creating a Data Source</h5></div></div></div><p>
        When creating a report in Crystal Reports there are two options
        for accessing the MySQL data while designing your report.
      </p><p>
        The first option is to use Connector/ODBC as an ADO data source
        when designing your report. You will be able to browse your
        database and choose tables and fields using drag and drop to
        build your report. The disadvantage of this approach is that
        additional work must be performed within your application to
        produce a data set that matches the one expected by your report.
      </p><p>
        The second option is to create a data set in VB.NET and save it
        as XML. This XML file can then be used to design a report. This
        works quite well when displaying the report in your application,
        but is less versatile at design time because you must choose all
        relevant columns when creating the data set. If you forget a
        column you must re-create the data set before the column can be
        added to the report.
      </p><p>
        The following code can be used to create a data set from a query
        and write it to disk:
      </p><p>
        Visual Basic Example
      </p><pre class="programlisting">Dim myData As New DataSet
Dim conn As New MySqlConnection
Dim cmd As New MySqlCommand
Dim myAdapter As New MySqlDataAdapter

conn.ConnectionString = "server=127.0.0.1;" _
    &amp; "uid=root;" _
    &amp; "pwd=12345;" _
    &amp; "database=world"

Try
    conn.Open()
    cmd.CommandText = "SELECT city.name AS cityName, city.population AS CityPopulation, " _ 
        &amp; "country.name, country.population, country.continent " _
        &amp; "FROM country, city ORDER BY country.continent, country.name"
    cmd.Connection = conn
    
    myAdapter.SelectCommand = cmd
    myAdapter.Fill(myData)
    
    myData.WriteXml("C:\dataset.xml", XmlWriteMode.WriteSchema)
Catch ex As Exception
    MessageBox.Show(ex.Message, "Report could not be created", MessageBoxButtons.OK, MessageBoxIcon.Error)
End Try
 </pre><p>
        C# Example
      </p><pre class="programlisting">DataSet myData = new DataSet();
MySql.Data.MySqlClient.MySqlConnection conn;
MySql.Data.MySqlClient.MySqlCommand cmd;
MySql.Data.MySqlClient.MySqlDataAdapter myAdapter;

conn = new MySql.Data.MySqlClient.MySqlConnection();
cmd = new MySql.Data.MySqlClient.MySqlCommand();
myAdapter = new MySql.Data.MySqlClient.MySqlDataAdapter();

conn.ConnectionString = "server=127.0.0.1;uid=root;" +
  "pwd=12345;database=test;";
  
try
{
  cmd.CommandText = "SELECT city.name AS cityName, city.population AS CityPopulation, " +
  "country.name, country.population, country.continent " +
  "FROM country, city ORDER BY country.continent, country.name";
  cmd.Connection = conn;
  
  myAdapter.SelectCommand = cmd;
  myAdapter.Fill(myData);
  
  myData.WriteXml(@"C:\dataset.xml", XmlWriteMode.WriteSchema);
}
catch (MySql.Data.MySqlClient.MySqlException ex)
{
  MessageBox.Show(ex.Message, "Report could not be created",
  MessageBoxButtons.OK, MessageBoxIcon.Error);
}
</pre><p>
        The resulting XML file can be used as an ADO.NET XML datasource
        when designing your report.
      </p><p>
        If you choose to design your reports using Connector/ODBC, it
        can be downloaded from
        <a href="http://dev.mysql.com/downloads/connector/odbc/3.51.html" target="_top">dev.mysql.com</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-programming-crystal-creating"></a>20.2.4.9.2. Creating the Report</h5></div></div></div><p>
        For most purposes the Standard Report wizard should help with
        the initial creation of a report. To start the wizard, open
        Crystal Reports and choose the New &gt; Standard Report option from
        the File menu.
      </p><p>
        The wizard will first prompt you for a data source. If you are
        using Connector/ODBC as your data source, use the OLEDB provider
        for ODBC option from the OLE DB (ADO) tree instead of the ODBC
        (RDO) tree when choosing a data source. If using a saved data
        set, choose the ADO.NET (XML) option and browse to your saved
        data set.
      </p><p>
        The remainder of the report creation process is done
        automatically by the wizard.
      </p><p>
        After the report is created, choose the Report Options... entry
        of the File menu. Un-check the Save Data With Report option.
        This prevents saved data from interfering with the loading of
        data within our application.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-programming-crystal-displaying"></a>20.2.4.9.3. Displaying the Report</h5></div></div></div><p>
        To display a report we first populate a data set with the data
        needed for the report, then load the report and bind it to the
        data set. Finally we pass the report to the crViewer control for
        display to the user.
      </p><p>
        The following references are needed in a project that displays a
        report:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            CrytalDecisions.CrystalReports.Engine
          </p></li><li><p>
            CrystalDecisions.ReportSource
          </p></li><li><p>
            CrystalDecisions.Shared
          </p></li><li><p>
            CrystalDecisions.Windows.Forms
          </p></li></ul></div><p>
        The following code assumes that you created your report using a
        data set saved using the code shown in
        <a href="connectors-apis.html#connector-net-programming-crystal-source" title="20.2.4.9.1. Creating a Data Source">Section 20.2.4.9.1, “Creating a Data Source”</a>,
        and have a crViewer control on your form named
        <code class="literal">myViewer</code>.
      </p><p>
        Visual Basic Example
      </p><pre class="programlisting">Imports CrystalDecisions.CrystalReports.Engine
Imports System.Data
Imports MySql.Data.MySqlClient

Dim myReport As New ReportDocument
Dim myData As New DataSet
Dim conn As New MySqlConnection
Dim cmd As New MySqlCommand
Dim myAdapter As New MySqlDataAdapter

conn.ConnectionString = _
    "server=127.0.0.1;" _
    &amp; "uid=root;" _
    &amp; "pwd=12345;" _
    &amp; "database=test"

Try
    conn.Open()
    
    cmd.CommandText = "SELECT city.name AS cityName, city.population AS CityPopulation, " _ 
        &amp; "country.name, country.population, country.continent " _
        &amp; "FROM country, city ORDER BY country.continent, country.name"
    cmd.Connection = conn
    
    myAdapter.SelectCommand = cmd
    myAdapter.Fill(myData)
    
    myReport.Load(".\world_report.rpt")
    myReport.SetDataSource(myData)
    myViewer.ReportSource = myReport
Catch ex As Exception
    MessageBox.Show(ex.Message, "Report could not be created", MessageBoxButtons.OK, MessageBoxIcon.Error)
End Try
</pre><p>
        C# Example
      </p><pre class="programlisting">using CrystalDecisions.CrystalReports.Engine;
using System.Data;
using MySql.Data.MySqlClient;

ReportDocument myReport = new ReportDocument();
DataSet myData = new DataSet();
MySql.Data.MySqlClient.MySqlConnection conn;
MySql.Data.MySqlClient.MySqlCommand cmd;
MySql.Data.MySqlClient.MySqlDataAdapter myAdapter;

conn = new MySql.Data.MySqlClient.MySqlConnection();
cmd = new MySql.Data.MySqlClient.MySqlCommand();
myAdapter = new MySql.Data.MySqlClient.MySqlDataAdapter();

conn.ConnectionString = "server=127.0.0.1;uid=root;" +
    "pwd=12345;database=test;";

try
{
    cmd.CommandText = "SELECT city.name AS cityName, city.population AS CityPopulation, " +
        "country.name, country.population, country.continent " +
        "FROM country, city ORDER BY country.continent, country.name";
    cmd.Connection = conn;

    myAdapter.SelectCommand = cmd;
    myAdapter.Fill(myData);

    myReport.Load(@".\world_report.rpt");
    myReport.SetDataSource(myData);
    myViewer.ReportSource = myReport;
}
catch (MySql.Data.MySqlClient.MySqlException ex)
{
    MessageBox.Show(ex.Message, "Report could not be created",
        MessageBoxButtons.OK, MessageBoxIcon.Error);
}
</pre><p>
        A new data set it generated using the same query used to
        generate the previously saved data set. Once the data set is
        filled, a ReportDocument is used to load the report file and
        bind it to the data set. The ReportDocument is the passed as the
        ReportSource of the crViewer.
      </p><p>
        This same approach is taken when a report is created from a
        single table using Connector/ODBC. The data set replaces the
        table used in the report and the report is displayed properly.
      </p><p>
        When a report is created from multiple tables using
        Connector/ODBC, a data set with multiple tables must be created
        in our application. This allows each table in the report data
        source to be replaced with a report in the data set.
      </p><p>
        We populate a data set with multiple tables by providing
        multiple <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statements in our
        MySqlCommand object. These <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>
        statements are based on the SQL query shown in Crystal Reports
        in the Database menu's Show SQL Query option. Assume the
        following query:
      </p><pre class="programlisting">SELECT `country`.`Name`, `country`.`Continent`, `country`.`Population`, `city`.`Name`, `city`.`Population`
FROM `world`.`country` `country` LEFT OUTER JOIN `world`.`city` `city` ON `country`.`Code`=`city`.`CountryCode`
ORDER BY `country`.`Continent`, `country`.`Name`, `city`.`Name`
</pre><p>
        This query is converted to two
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> queries and displayed with
        the following code:
      </p><p>
        Visual Basic Example
      </p><pre class="programlisting">Imports CrystalDecisions.CrystalReports.Engine
Imports System.Data
Imports MySql.Data.MySqlClient

Dim myReport As New ReportDocument
Dim myData As New DataSet
Dim conn As New MySqlConnection
Dim cmd As New MySqlCommand
Dim myAdapter As New MySqlDataAdapter

conn.ConnectionString = "server=127.0.0.1;" _
    &amp; "uid=root;" _
    &amp; "pwd=12345;" _
    &amp; "database=world"

Try
    conn.Open()
    cmd.CommandText = "SELECT name, population, countrycode FROM city ORDER BY countrycode, name; " _
        &amp; "SELECT name, population, code, continent FROM country ORDER BY continent, name"
    cmd.Connection = conn
    
    myAdapter.SelectCommand = cmd
    myAdapter.Fill(myData)
    
    myReport.Load(".\world_report.rpt")
    myReport.Database.Tables(0).SetDataSource(myData.Tables(0))
    myReport.Database.Tables(1).SetDataSource(myData.Tables(1))
    myViewer.ReportSource = myReport
Catch ex As Exception
    MessageBox.Show(ex.Message, "Report could not be created", MessageBoxButtons.OK, MessageBoxIcon.Error)
End Try
</pre><p>
        C# Example
      </p><pre class="programlisting">using CrystalDecisions.CrystalReports.Engine;
using System.Data;
using MySql.Data.MySqlClient;

ReportDocument myReport = new ReportDocument();
DataSet myData = new DataSet();
MySql.Data.MySqlClient.MySqlConnection conn;
MySql.Data.MySqlClient.MySqlCommand cmd;
MySql.Data.MySqlClient.MySqlDataAdapter myAdapter;

conn = new MySql.Data.MySqlClient.MySqlConnection();
cmd = new MySql.Data.MySqlClient.MySqlCommand();
myAdapter = new MySql.Data.MySqlClient.MySqlDataAdapter();

conn.ConnectionString = "server=127.0.0.1;uid=root;" +
    "pwd=12345;database=test;";

try
{
    cmd.CommandText = "SELECT name, population, countrycode FROM city ORDER " +
        "BY countrycode, name; <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> name, population, code, continent FROM " +
        "country ORDER BY continent, name";
    cmd.Connection = conn;

    myAdapter.SelectCommand = cmd;
    myAdapter.Fill(myData);

    myReport.Load(@".\world_report.rpt");
    myReport.Database.Tables(0).SetDataSource(myData.Tables(0));
    myReport.Database.Tables(1).SetDataSource(myData.Tables(1));
    myViewer.ReportSource = myReport;
}
catch (MySql.Data.MySqlClient.MySqlException ex)
{
    MessageBox.Show(ex.Message, "Report could not be created",
        MessageBoxButtons.OK, MessageBoxIcon.Error);
}  
 </pre><p>
        It is important to order the
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> queries in alphabetical
        order, as this is the order the report will expect its source
        tables to be in. One SetDataSource statement is needed for each
        table in the report.
      </p><p>
        This approach can cause performance problems because Crystal
        Reports must bind the tables together on the client-side, which
        will be slower than using a pre-saved data set.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-programming-datetime"></a>20.2.4.10. Handling Date and Time Information in Connector/NET</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-datetime-problems">20.2.4.10.1. Problems when Using Invalid Dates</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-datetime-restricting">20.2.4.10.2. Restricting Invalid Dates</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-datetime-invalid">20.2.4.10.3. Handling Invalid Dates</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-programming-datetime-null">20.2.4.10.4. Handling NULL Dates</a></span></dt></dl></div><p>
      <span class="bold"><strong>Introduction</strong></span>
    </p><p>
      MySQL and the .NET languages handle date and time information
      differently, with MySQL allowing dates that cannot be represented
      by a .NET data type, such as '<code class="literal">0000-00-00
      00:00:00</code>'. These differences can cause problems if not
      properly handled.
    </p><p>
      In this section we will demonstrate how to properly handle date
      and time information when using Connector/NET.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-programming-datetime-problems"></a>20.2.4.10.1. Problems when Using Invalid Dates</h5></div></div></div><p>
        The differences in date handling can cause problems for
        developers who use invalid dates. Invalid MySQL dates cannot be
        loaded into native .NET <code class="literal">DateTime</code> objects,
        including <code class="literal">NULL</code> dates.
      </p><p>
        Because of this issue, .NET <code class="literal">DataSet</code> objects
        cannot be populated by the <code class="literal">Fill</code> method of the
        <code class="literal">MySqlDataAdapter</code> class as invalid dates will
        cause a <code class="literal">System.ArgumentOutOfRangeException</code>
        exception to occur.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-programming-datetime-restricting"></a>20.2.4.10.2. Restricting Invalid Dates</h5></div></div></div><p>
        The best solution to the date problem is to restrict users from
        entering invalid dates. This can be done on either the client or
        the server side.
      </p><p>
        Restricting invalid dates on the client side is as simple as
        always using the .NET <code class="literal">DateTime</code> class to
        handle dates. The <code class="literal">DateTime</code> class will only
        allow valid dates, ensuring that the values in your database are
        also valid. The disadvantage of this is that it is not useful in
        a mixed environment where .NET and non .NET code are used to
        manipulate the database, as each application must perform its
        own date validation.
      </p><p>
        Users of MySQL 5.0.2 and higher can use the new
        <code class="literal">traditional</code> SQL mode to restrict invalid date
        values. For information on using the
        <code class="literal">traditional</code> SQL mode, see
        <a href="server-administration.html#server-sql-mode" title="5.1.7. Server SQL Modes">Section 5.1.7, “Server SQL Modes”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-programming-datetime-invalid"></a>20.2.4.10.3. Handling Invalid Dates</h5></div></div></div><p>
        Although it is strongly recommended that you avoid the use of
        invalid dates within your .NET application, it is possible to
        use invalid dates by means of the
        <code class="literal">MySqlDateTime</code> datatype.
      </p><p>
        The <code class="literal">MySqlDateTime</code> datatype supports the same
        date values that are supported by the MySQL server. The default
        behavior of Connector/NET is to return a .NET DateTime object
        for valid date values, and return an error for invalid dates.
        This default can be modified to cause Connector/NET to return
        <code class="literal">MySqlDateTime</code> objects for invalid dates.
      </p><p>
        To instruct Connector/NET to return a
        <code class="literal">MySqlDateTime</code> object for invalid dates, add
        the following line to your connection string:
      </p><pre class="programlisting">  Allow Zero Datetime=True
  </pre><p>
        Please note that the use of the <code class="literal">MySqlDateTime</code>
        class can still be problematic. The following are some known
        issues:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Data binding for invalid dates can still cause errors (zero
            dates like 0000-00-00 do not seem to have this problem).
          </p></li><li><p>
            The <code class="literal">ToString</code> method return a date
            formatted in the standard MySQL format (for example,
            <code class="literal">2005-02-23 08:50:25</code>). This differs from
            the <code class="literal">ToString</code> behavior of the .NET
            DateTime class.
          </p></li><li><p>
            The <code class="literal">MySqlDateTime</code> class supports NULL
            dates, while the .NET DateTime class does not. This can
            cause errors when trying to convert a MySQLDateTime to a
            DateTime if you do not check for NULL first.
          </p></li></ol></div><p>
        Because of the known issues, the best recommendation is still to
        use only valid dates in your application.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-net-programming-datetime-null"></a>20.2.4.10.4. Handling NULL Dates</h5></div></div></div><p>
        The .NET <code class="literal">DateTime</code> datatype cannot handle
        <code class="literal">NULL</code> values. As such, when assigning values
        from a query to a <code class="literal">DateTime</code> variable, you must
        first check whether the value is in fact
        <code class="literal">NULL</code>.
      </p><p>
        When using a <code class="literal">MySqlDataReader</code>, use the
        <code class="literal">.IsDBNull</code> method to check whether a value is
        <code class="literal">NULL</code> before making the assignment:
      </p><p>
        Visual Basic Example
      </p><pre class="programlisting">If Not myReader.IsDBNull(myReader.GetOrdinal("mytime")) Then
    myTime = myReader.GetDateTime(myReader.GetOrdinal("mytime"))
Else
    myTime = DateTime.MinValue
End If
  </pre><p>
        C# Example
      </p><pre class="programlisting">if (! myReader.IsDBNull(myReader.GetOrdinal("mytime")))
    myTime = myReader.GetDateTime(myReader.GetOrdinal("mytime"));
else
    myTime = DateTime.MinValue;
  </pre><p>
        <code class="literal">NULL</code> values will work in a data set and can
        be bound to form controls without special handling.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-programming-asp-provider"></a>20.2.4.11. ASP.NET Provider Model</h4></div></div></div><p>
      MySQL Connector/Net provides support for the ASP.NET 2.0 provider
      model. This model allows application developers to focus on the
      business logic of there application instead of having to recreate
      such boilerplate items as membership and roles support. Currently,
      only membership and role providers are supplied although session
      state and profile providers will be provided in upcoming releases.
    </p><p>
      <span class="bold"><strong>Installing The Providers</strong></span>
    </p><p>
      The installation of Connector/Net 5.1 or later will install the
      providers and register them in your machines .NET configuration
      file. The providers are implemented in the file
      <code class="filename">mysql.web.dll</code> and this file can be found in
      your Connector/Net installation folder. There is no need to run
      any type of SQL script to setup the database as the providers
      create and maintain the proper schema automatically.
    </p><p>
      <span class="bold"><strong> Using The Providers</strong></span>
    </p><p>
      The easiest way to start using the providers is to use the ASP.NET
      configuration tool that is available on the Solution Explorer
      toolbar when you have a website project loaded.
    </p><p>
      In the web pages that open you will be able to select the MySQL
      membership and roles provider by indicating that you want to pick
      a custom provider for each area.
    </p><p>
      When the provider is installed, it creates a dummy connection
      string named <code class="literal">LocalMySqlServer</code>. This has to be
      done so that the provider will work in the ASP.NET configuration
      tool. However, you will want to override this connection string in
      your web.config file. You do this by first removing the dummy
      connection string and then adding in the proper one. Here is an
      example:
    </p><pre class="programlisting">                &lt;connectionStrings&gt;
                    &lt;remove name="LocalMySqlServer"/&gt;
                    &lt;add name="LocalMySqlServer" connectionString="server=xxx;uid=xxx;pwd=xxx"/&gt; 
                &lt;/connectionStrings&gt;
            </pre><p>
      <span class="bold"><strong> Distribution</strong></span>
    </p><p>
      To use the providers on a production server you will need to
      distribute the <code class="literal">MySql.Data</code> and the
      <code class="literal">MySql.Web</code> assemblies and either register them
      in the remote systems Global Assembly Cache or keep them in your
      applications bin folder.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-programming-binary-issues"></a>20.2.4.12. Binary/Non-Binary Issues</h4></div></div></div><p>
      There are certain situations where MySQL will return incorrect
      metadata about one or more columns. More specifically, the server
      will sometimes report that a column is binary when it is not and
      vice versa. In these situations, it becomes practically impossible
      for the connector to be able to correctly identify the correct
      metadat.
    </p><p>
      Some examples of situations that may return incorrect metadata
      are:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Execution of <code class="literal">SHOW PROCESSLIST</code>. Some of the
          columns will be returned as binary even though they only hold
          string data.
        </p></li><li><p>
          When a temp table is used to process a resultset, some columns
          may be returned with incorrect binary flags.
        </p></li><li><p>
          Some server functions such <code class="literal">DATE_FORMAT</code> will
          incorrectly return the column as binary.
        </p></li></ul></div><p>
      With the availability of <code class="literal">BINARY</code> and
      <code class="literal">VARBINARY</code> data types it is important that we
      respect the metadata returned by the sever. However, we are aware
      that some existing applications may break with this change so we
      are creating a connection string option to enable or disable it.
      By default, Connector/Net 5.1 will respect the binary flags
      returned by the server. This will mean that you may need to make
      small changes to your application to accomodate this change.
    </p><p>
      In the event that the changes required to your application would
      be too large, you can add 'respect binary flags=false'
      to your connection string. This will cause the connector to use
      the prior behavior. In a nutshell, that behavior was that any
      column that is marked as string, regardless of binary flags, will
      be returned as string. Only columns that are specifically marked
      as a <code class="literal">BLOB</code> will be returned as
      <code class="literal">BLOB</code>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-using-character-sets"></a>20.2.4.13. Character Sets</h4></div></div></div><p>
      <span class="bold"><strong>Treating Binary Blobs As UTF8</strong></span>
    </p><p>
      MySQL doesn't currently support 4 byte UTF8 sequences. This makes
      it difficult to represent some multi-byte languages such as
      Japanese. To try and alleviate this, Connector/Net now supports a
      mode where binary blobs can be treated as strings.
    </p><p>
      To do this, you set the 'Treat Blobs As UTF8' connection string
      keyword to yes. This is all that needs to be done to enable
      conversion of all binary blobs to UTF8 strings. If you wish to
      convert only some of your blob columns, then you can make use of
      the 'BlobAsUTF8IncludePattern' and 'BlobAsUTF8ExcludePattern'
      keywords. These should be set to the regular expression pattern
      that matches the column names you wish to include or exlude
      respectively.
    </p><p>
      One thing to note is that the regular expression patterns can both
      match a single column. When this happens, the include pattern is
      applied before the exclude pattern. The result, in this case,
      would be that the column would be excluded. You should also be
      aware that this mode does not apply to columns of type
      <code class="literal">BINARY</code> or <code class="literal">VARBINARY</code> and also
      do not apply to non-binary <code class="literal">BLOB</code> columns.
    </p><p>
      Currently this mode only applies to reading strings out of MySQL.
      To insert 4-byte UTF8 strings into blob columns you will need to
      use the .NET <code class="literal">Encoding.GetBytes</code> function to
      convert your string to a series of bytes. You can then set this
      byte array as a parameter for a <code class="literal">BLOB</code> column.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="content-advanced-topics-medium-trust"></a>20.2.4.14. Working with medium trust</h4></div></div></div><p>
      .NET applications operate under a given trust level. Normal
      desktop applications operate under full trust while web
      applications that are hosted in shared environments are normally
      run under the medium trust level. Some hosting providers host
      shared applications in their own app pools and allow the
      application to run under full trust, but this seems to be the
      exception rather than the rule.
    </p><p>
      Connector/Net versions prior to 5.0.8 and 5.1.3 were not
      compatible with medium trust hosting. Starting with these
      versions, Connector/Net can be used under medium trust hosting
      that has been modified to allow the use of sockets for
      communication. By default, medium trust does not include
      <code class="literal">SocketPermission</code>. Connector/Net uses sockets to
      talk with the MySQL server so it is required that a new trust
      level be created that is an exact clone of medium trust but that
      has <code class="literal">SocketPermission</code> added.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connect-net-support"></a>20.2.5. Connector/NET Support</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-net-support-community">20.2.5.1. Connector/NET Community Support</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-support-bug-report">20.2.5.2. How to report Connector/NET Problems or Bugs</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-net-support-changehistory">20.2.5.3. Connector/NET Change History</a></span></dt></dl></div><a class="indexterm" name="id3641478"></a><a class="indexterm" name="id3641491"></a><p>
    The developers of Connector/NET greatly value the input of our users
    in the software development process. If you find Connector/NET
    lacking some feature important to you, or if you discover a bug and
    need to file a bug report, please use the instructions in
    <a href="introduction.html#bug-reports" title="1.6. How to Report Bugs or Problems">Section 1.6, “How to Report Bugs or Problems”</a>.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-support-community"></a>20.2.5.1. Connector/NET Community Support</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Community support for Connector/NET can be found through the
          forums at <a href="http://forums.mysql.com" target="_top">http://forums.mysql.com</a>.
        </p></li><li><p>
          Community support for Connector/NET can also be found through
          the mailing lists at <a href="http://lists.mysql.com" target="_top">http://lists.mysql.com</a>.
        </p></li><li><p>
          Paid support is available from Sun Microsystems, Inc.
          Additional information is available at
          <a href="http://www.mysql.com/support/" target="_top">http://www.mysql.com/support/</a>.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-support-bug-report"></a>20.2.5.2. How to report Connector/NET Problems or Bugs</h4></div></div></div><p>
      If you encounter difficulties or problems with Connector/NET,
      contact the Connector/NET community
      <a href="connectors-apis.html#connector-net-support-community" title="20.2.5.1. Connector/NET Community Support">Section 20.2.5.1, “Connector/NET Community Support”</a>.
    </p><p>
      You should first try to execute the same SQL statements and
      commands from the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> client program or from
      <code class="literal">admndemo</code>. This helps you determine whether the
      error is in Connector/NET or MySQL.
    </p><p>
      If reporting a problem, you should ideally include the following
      information with the email:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Operating system and version
        </p></li><li><p>
          Connector/NET version
        </p></li><li><p>
          MySQL server version
        </p></li><li><p>
          Copies of error messages or other unexpected output
        </p></li><li><p>
          Simple reproducible sample
        </p></li></ul></div><p>
      Remember that the more information you can supply to us, the more
      likely it is that we can fix the problem.
    </p><p>
      If you believe the problem to be a bug, then you must report the
      bug through <a href="http://bugs.mysql.com/" target="_top">http://bugs.mysql.com/</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-net-support-changehistory"></a>20.2.5.3. Connector/NET Change History</h4></div></div></div><p>
      The Connector/NET Change History (Changelog) is located with the
      main Changelog for MySQL. See
      <a href="news.html#connector-net-news" title="C.5. MySQL Connector/NET Change History">Section C.5, “MySQL Connector/NET Change History”</a>.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-faq"></a>20.2.6. Connector/NET FAQ</h3></div></div></div><p><span class="bold"><strong>Questions</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><a href="connectors-apis.html#qandaitem-20-2-6-1-1">20.2.6.1: </a>
        How do I obtain the value of an auto-incremented column?
      </p></li></ul></div><p><span class="bold"><strong>Questions and Answers</strong></span></p><p><a name="qandaitem-20-2-6-1-1"></a><span class="bold"><strong>20.2.6.1: </strong></span><span class="bold"><strong>
        How do I obtain the value of an auto-incremented column?
      </strong></span></p><p>
        When using the <code class="classname">commandBuilder</code> you should
        make sure that you set the
        <code class="literal">ReturnGeneratedIdentifiers</code> property to
        <code class="literal">true</code>.
      </p><p>
        Then, you can use an active view on a table to access the
        updated ID. For example:
      </p><pre class="programlisting">conn = new MySql.Data.MySqlClient.MySqlConnection();
cmd = new MySql.Data.MySqlClient.MySqlCommand();
da = new MySql.Data.MySqlClient.MySqlDataAdapter();
cmdBuilder = new MySql.Data.MySqlClient.MySqlCommandBuilder();
SystemDataDataSet = new System.Data.DataSet();
SystemDataDataView = new System.Data.DataView();
...
cmd.Connection = conn;
cmd.CommandText = "SELECT * FROM contacts";
da.SelectCommand = cmd;
da.Fill(SystemDataDataSet, "contacts");
cmdBuilder.DataAdapter = da;
cmdBuilder.ReturnGeneratedIdentifiers = true;
cmdBuilder.DataAdapter.SelectCommand.CommandText = "SELECT * FROM contacts";
cmdBuilder.RefreshSchema();

SystemDataDataView = SystemDataDataSet.Tables["contacts"].DefaultView;

SystemDataDataRow = SystemDataDataView.Table.NewRow();
SystemDataDataRow["status"] = 1;
 
SystemDataDataView.Table.Rows.Add(SystemDataDataRow);
da.Update(SystemDataDataSet, "contacts");
System.Console.WriteLine("ID after update: "  + SystemDataDataRow["id"]);</pre><p>
        The <code class="literal">SystemDataDataRow</code> object in this instance
        provides the interface to the updated auto-increment value in
        the <code class="literal">id</code> column.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="connector-vstudio"></a>20.3. MySQL Visual Studio Plugin</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-install">20.3.1. Installing the MySQL Visual Studio Plugin</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-creating">20.3.2. Creating a connection to the MySQL server</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-using">20.3.3. Using the MySQL Visual Studio Plugin</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-support">20.3.4. Visual Studio Plugin Support</a></span></dt></dl></div><p>
    The MySQL Visual Studio Plugin is a DDEX provider; a plug-in for
    Visual Studio 2005 that allows developers to maintain database
    structures, and supports built-in data-driven application
    development tools.
  </p><p>
    The current version of the MySQL Visual Studio Plugin includes only
    database maintenance tools. Data-driven application development
    tools are not supported.
  </p><p>
    The MySQL DDEX Provider operates as a standard extension to the
    Visual Studio Data Designer functionality available through the
    Server Explorer menu of Visual Studio 2005, and enables developers
    to create database objects and data within a MySQL database.
  </p><p>
    The MySQL Visual Studio Plugin is designed to work with MySQL
    version 5.0, but is also compatible with MySQL 4.1.1 and provides
    limited compatibility with MySQL 5.1.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-vstudio-install"></a>20.3.1. Installing the MySQL Visual Studio Plugin</h3></div></div></div><p>
      The MySQL Visual Studio Plugin requires one of Visual Studio 2005
      Standard, Professional or Team Developer Edition to be installed.
      Other editions of Visual Studio 2005 are not supported.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Starting with Connector/NET 5.1.2, the Visual Studio Plugin is
        included in the installation. If you have installed
        Connector/NET 5.1.2, then you do not need to separately install
        the Visual Studio Plugin.
      </p></div><p>
      Here is the list of components that should already be installed
      before starting the installation of the MySQL Visual Studio
      Plugin:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Visual Studio 2005 Standard, Professional or Team Developer
          Edition.
        </p></li><li><p>
          MySQL Server 4.1.1 or later (either installed on the same
          machine, or a separate server).
        </p></li><li><p>
          MySQL Connector/NET 5.0.
        </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        When installing Connector/NET you must ensure that the connector
        is installed into the Global Assembly Cache (GAC). The
        Connector/NET installer handles this for you automatically, but
        in a custom installation the option may have been disabled.
      </p></div><p>
      The user used to connect to the MySQL server must have the
      following privileges to use the functionality provided by the
      MySQL Visual Studio Plugin:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          The <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privilege for the
          <code class="literal">INFORMATION_SCHEMA</code> database.
        </p></li><li><p>
          The <a href="sql-syntax.html#execute" title="12.7.2. EXECUTE Syntax"><code class="literal">EXECUTE</code></a> privilege for the
          <a href="sql-syntax.html#show-create-table" title="12.5.6.12. SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a> statement.
        </p></li><li><p>
          The <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privilege for the
          <code class="literal">mysql.proc</code> table (required for operations
          with stored procedures and functions).
        </p></li><li><p>
          The <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privilege for the
          <code class="literal">mysql.func</code> table (required for operations
          with User Defined Functions (UDF)).
        </p></li><li><p>
          The <a href="sql-syntax.html#execute" title="12.7.2. EXECUTE Syntax"><code class="literal">EXECUTE</code></a> privilege for the
          <a href="sql-syntax.html#show-engine" title="12.5.6.16. SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE
          STATUS</code></a> statement (required for retrieving extended
          error information).
        </p></li><li><p>
          Appropriate privileges for performed operations (e.g. the
          <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privilege is required to
          browse data from a table etc.).
        </p></li></ul></div><p>
      The MySQL Visual Studio Plugin is delivered as a MSI package that
      can be used to install, uninstall or reinstall the Provider. If
      you are not using Windows XP or Windows Server 2003 you upgrade
      the Windows Installer system to the latest version (see
      <a href="http://support.microsoft.com/default.aspx?scid=kb;EN-US;292539" target="_top">http://support.microsoft.com/default.aspx?scid=kb;EN-US;292539</a>
      for details).
    </p><p>
      The MSI-package is named
      <code class="filename">MySQL.VisualStudio.msi</code>. To install the MySQL
      Visual Studio Plugin, right click on the MSI file and select
      <span class="guimenu">Install</span>. The installation process is as follow:
    </p><div class="orderedlist"><ol type="1"><li><p>
          The standard Welcome dialog is opened. Click Next to continue
          installation.
        </p></li><li><p>
          The License agreement (GNU GPL) window is opened. Accept the
          agreement and click <span class="guibutton">Next</span> to continue.
        </p></li><li><p>
          The destination folder choice dialog is opened. Here you can
          point out the folder where the MySQL Visual Studio Plugin will
          be installed. The default destination folder is
          <code class="filename">%ProgramFilesDir%\MySQL\MySQL DDEX Data
          Provider</code>, where
          <code class="filename">%ProgramFilesDir%</code> is the Program Files
          folder of the installation machine. After choosing the
          destination folder, click <span class="guibutton">Next</span> to
          continue.
        </p></li><li><p>
          The installer will ask to confirm that installation. Click
          Install to start installation process.
        </p></li><li><p>
          The installation will now take place. At the end of this step
          the Visual Studio command table is rebuilt (this process may
          take several minutes).
        </p></li><li><p>
          Once installation is complete, click
          <span class="guibutton">Finish</span> to end the installation process.
        </p></li></ol></div><p>
      To uninstall the MySQL Visual Studio Plugin, you can use either
      Add/Remove Programs component of the Control Panel or the same
      MSI-package. Choose the <span class="guilabel">Remove</span> option, and
      the Provider will be uninstalled automatically.
    </p><p>
      To repair the Provider, right click the MSI-package and choose the
      <span class="guimenu">Repair</span> option. The MySQL Visual Studio Plugin
      will be repaired automatically.
    </p><p>
      The installation package includes the following files:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="filename">MySQL.VisualStudio.dll</code> — the MySQL
          DDEX Provider assembly.
        </p></li><li><p>
          <code class="filename">MySQL.Data.dll</code> — the assembly
          containing the MySQL Connector .NET which is used by the
          Provider.
        </p></li><li><p>
          <code class="filename">MySql.VisualStudio.dll.config</code> — the
          configuration file for the MySQL Visual Studio Plugin. This
          file contains default values for the provider GUI layout.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            Do not remove this file before the first use of the
            Provider.
          </p></div></li><li><p>
          <code class="filename">Register.reg</code> — the file with
          registry entries that can be used to register the MySQL DDEX
          Provider in the case of the manual installation.
        </p></li><li><p>
          <code class="filename">Install.js</code> — the script used to
          register the Connector .NET as an ADO.NET data provider in the
          machine.config file.
        </p></li><li><p>
          <code class="filename">Release notes.doc</code> — the document
          with release notes.
        </p></li></ul></div><p>
      To install the Provider manually, copy all files of the
      installation package in a desired folder, then set the full path
      to the Provider assembly as a value of the CodeBase entry. For
      example:
    </p><pre class="programlisting">[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio\8.0\Packages\{79A115C9-B133-4891-9E7B-242509DAD272}]@="MySql.Data.VisualStudio.MySqlDataProviderPackage"
"InprocServer32"="C:\\WINNT\\system32\\mscoree.dll"
"Class"="MySql.Data.VisualStudio.MySqlDataProviderPackage"
"CodeBase"="C:\\MySqlDdexProvider\\MySql.VisualStudio.dll"
</pre><p>
      Then import information from the Register.reg file to the registry
      by clicking of the file. At the confirmation dialog choose Yes.
      Next you must run the command devenv.exe /setup within a Command
      Prompt to rebuild the Visual Studio command table.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-vstudio-creating"></a>20.3.2. Creating a connection to the MySQL server</h3></div></div></div><p>
      Once the MySQL Visual Studio Plugin is installed, you can use it
      to create, modify and delete connections to MySQL databases. To
      create a connection with a MySQL database, perform the following
      steps:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Start Visual Studio 2005 and open Server Explorer window by
          choosing the <span class="guimenu">Server Explorer</span> option from
          the <span class="guimenu">View</span> menu.
        </p></li><li><p>
          Right click on the <span class="guilabel">Data Connections</span> node
          and choose the <span class="guibutton">Add Connection</span> button.
        </p></li><li><p>
          The Add Connection dialog is opened. Press the
          <span class="guibutton">Change</span> button to choose MySQL Database
          as a data source.
        </p></li><li><p>
          Change Data Source dialog is opened. Choose MySQL Database in
          the list of data sources (or the <code class="literal">other</code>
          option, if MySQL Database is absent), and then choose
          <span class="guilabel">.NET Framework Data Provider for MySQL</span> in
          the combo box of data providers.
        </p><div class="mediaobject"><img src="images/mysql-vstudioplugin-1.png" width="439" height="258" alt="Choosing a data source"></div><p>
          Press <span class="guibutton">OK</span> to confirm your choice.
        </p></li><li><p>
          Enter the connection settings: the server host name (for
          example, localhost if the MySQL server is installed on the
          local machine), the user name, the password, and the default
          database schema. Note that you must specify the default schema
          name to open the connection.
        </p><div class="mediaobject"><img src="images/mysql-vstudioplugin-1.png" width="439" height="258" alt="Setting connection properties"></div></li><li><p>
          You can also set the port to connect with the MySQL server by
          pressing the <span class="guibutton">Advanced</span> button. To test a
          connection with the MySQL server, ser the server host name,
          the user name, and the password, and press the <span class="guibutton">Test
          Connection</span> button. If the test fails, check the
          connection values that you have supplied are correct and that
          the corresponding user and privileges have been configured on
          the MySQL server.
        </p></li><li><p>
          After you set all settings and test the connection, press
          <span class="guibutton">OK</span>. The newly created connection is
          displayed in Server Explorer. Now you can work with the MySQL
          server through standard Server Explorer interface.
        </p></li></ol></div><p>
      After a connection is successfully established, all the connection
      settings are saved. When you next open Visual Studio, the
      connection to the MySQL server will appear within Server Explorer
      so that you can re-establish a connection to the MySQL server.
    </p><p>
      To modify and delete a connection, use the <span class="guimenu">Server
      Explorer</span> context menu for the corresponding node. You
      can modify any of the settings just by overwriting the existing
      values with new ones. Note that a connection should be modified or
      deleted only if no active editor for its objects is opened.
      Otherwise your data could be lost.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-vstudio-using"></a>20.3.3. Using the MySQL Visual Studio Plugin</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-using-tables">20.3.3.1. Editing Tables</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-using-tabledata">20.3.3.2. Editing Table Data</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-using-views">20.3.3.3. Editing Views</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-using-storedroutines">20.3.3.4. Editing Stored Procedures and Functions</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-using-triggers">20.3.3.5. Editing Triggers</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-using-udf">20.3.3.6. Editing User Defined Functions (UDF)</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-using-dropping">20.3.3.7. Dropping database objects</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-using-cloning">20.3.3.8. Cloning database objects</a></span></dt></dl></div><p>
      To work with a MySQL server using the MySQL Visual Studio Plugin,
      open the Visual Studio 2005, open the <span class="guilabel">Server
      Explorer</span>, and select the required connection. The
      working area of the MySQL Visual Studio Plugin consists of three
      parts.
    </p><div class="mediaobject"><img src="images/mysql-vstudioplugin-3.png" width="802" height="572" alt="DDEX enviroment"></div><div class="itemizedlist"><ul type="disc"><li><p>
          Database objects (tables, views, stored routines, triggers,
          and user defined functions) are displayed in the Server
          Explorer tree. Here you can choose an object and edit its
          properties and definition.
        </p></li><li><p>
          Properties of a selected database object are displayed in the
          <span class="guilabel">Properties</span> panel. Certain properties can
          be edited directly within this window.
        </p></li><li><p>
          The editor panel provides direct access to the SQL statement
          and definition of specific objects. Fore example, the SQL
          statements within a stored procedure definition are shown and
          edited within this panel.
        </p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-vstudio-using-tables"></a>20.3.3.1. Editing Tables</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-using-tables-columns">20.3.3.1.1. Column Editor</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-using-tables-indexes">20.3.3.1.2. Indexes tab</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-using-tables-foreignkeys">20.3.3.1.3. Foreign Keys tab</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-using-tables-column">20.3.3.1.4. Column Details tab</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-using-tables-properties">20.3.3.1.5. Table Properties window</a></span></dt></dl></div><p>
        The Table Editor can be accessed through a mouse action on
        table-type node of Server Explorer. To create a new table, right
        click on the <span class="guilabel">Tables</span> node (under the
        connection node) and choose the <span class="guimenu">Create Table</span>
        command from a context menu. To modify an existing table, double
        click on a node of the table you wish to modify, or right click
        on this node and choose the <span class="guimenu">Alter Table</span>
        command from a context menu. Either of the commands opens the
        Table Editor.
      </p><div class="mediaobject"><img src="images/mysql-vstudioplugin-4.png" width="803" height="571" alt="Editing a table"></div><p>
        The MySQL Visual Studio Plugin Table Editor is implemented in a
        similar fashion to the standard Query Browser Table Editor, but
        with minor differences.
      </p><p>
        The Table Editor consists of the following parts:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Columns Editor — for column creation, modification and
            deletion.
          </p></li><li><p>
            Indexes tab — for table/column index management.
          </p></li><li><p>
            Foreign Keys tab — for configuration of foreign keys.
          </p></li><li><p>
            Column Details tab — used to set advanced column
            options.
          </p></li><li><p>
            Properties window — used to set table properties.
          </p></li></ul></div><p>
        To save changes you have made in the Table Editor, use either
        Save or Save All buttons of the Visual Studio main toolbar, or
        just press <span><strong class="keycap">Ctrl+S</strong></span>. Before changes are saved, a
        confirmation dialog will be displayed to confirm that you want
        to update the corresponding object within the MySQL database.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-vstudio-using-tables-columns"></a>20.3.3.1.1. Column Editor</h5></div></div></div><p>
          You can use the Column Editor to set or change the name, data
          type, default value and other properties of a table column. To
          set the properties of an individual column, select the column
          using the mouse. Alternatively, you can move through the grid
          using <span><strong class="keycap">Tab</strong></span> and <span><strong class="keycap">Shift+Tab</strong></span>
          keys.
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              To set or change the name, data type, default value and
              comment of a column, select the appropriate cell and edit
              the desired value.
            </p></li><li><p>
              To set or unset flag-type column properties (i.e., primary
              key, <code class="literal">NOT NULL</code>, auto-incremented,
              flags), check or uncheck the corresponding checkboxes.
              Note that the available column flags will depend on the
              columns data type.
            </p></li><li><p>
              To reorder columns, index columns or foreign key columns
              in the Column Editor, select the whole column you wish to
              reorder by clicking on the selector column at the left of
              the column grid. Then move the column by using
              <span><strong class="keycap">Ctrl+Up</strong></span> (to move the column up) and
              <span><strong class="keycap">Ctrl+Down</strong></span> (to move the column down) keys.
            </p></li><li><p>
              To delete a column, select it by clicking on the selector
              column at the left of the column grid, then press the
              <span><strong class="keycap">Delete</strong></span> button on a keyboard.
            </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-vstudio-using-tables-indexes"></a>20.3.3.1.2. Indexes tab</h5></div></div></div><p>
          Index management is performed via the Indexes tab.
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              To add an index, press the <span class="guibutton">+</span> button
              and set the properties in the <span class="guilabel">Index
              Settings</span> groupbox at the right. You can set the
              index name, index kind, index type and a set of index
              columns.
            </p></li><li><p>
              To remove an index, select the index from the list and
              press the <span class="guibutton">-</span> button.
            </p></li><li><p>
              To change index settings, select the index from the list;
              detailed information about the index is displayed in the
              <span class="guilabel">Index Settings</span> panel.
            </p></li></ul></div><p>
          You cannot change a table column to an index column using drag
          and drop. Instead, you can add new index columns to a table
          and set their table columns by using the embedded editor
          within the Indexes tab
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-vstudio-using-tables-foreignkeys"></a>20.3.3.1.3. Foreign Keys tab</h5></div></div></div><p>
          Foreign Key management is performed via the Foreign Keys tab.
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              To add a foreign key, press the <span class="guibutton">+</span>
              button and set properties in the <span class="guilabel">Foreign Keys
              Settings</span> panel. You can set the foreign key
              name, referenced table name, foreign key columns and
              actions on update and delete.
            </p></li><li><p>
              To remove a foreign key, select the foreign key and press
              the <span class="guibutton">-</span> button.
            </p></li><li><p>
              To change foreign key settings, select the foreign key and
              use the <span class="guilabel">Foreign Keys Settings</span> panel
              to edit the properties.
            </p></li><li><p>
              When a foreign key is changed, the MySQL Visual Studio
              Plugin generates two queries: the first query drops the
              changed keys and the second one recreates the new values.
              The reason for such a behavior is to avoid the <a href="http://bugs.mysql.com/8377" target="_top">Bug#8377</a>
              and <a href="http://bugs.mysql.com/8919" target="_top">Bug#8919</a>.
            </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            If changed values are for some reason inconsistent and cause
            the second query to fail, all affected foreign keys will be
            dropped. If this is the case, the MySQL Visual Studio Plugin
            will mark them as new in the Table Editor, and you will have
            to recreate them later. But if you close the Table Editor
            without saving, these foreign keys will be lost.
          </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-vstudio-using-tables-column"></a>20.3.3.1.4. Column Details tab</h5></div></div></div><p>
          The Column Details tab can be used to set column options.
          Besides the main column properties that are presented in the
          Column Editor, in the Column Details tab you can set two
          additional properties options: the character set and the
          collation sequence.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-vstudio-using-tables-properties"></a>20.3.3.1.5. Table Properties window</h5></div></div></div><p>
          There is no separate tab for table options and advanced
          options. All table options can be browsed and changed using
          the <span class="guilabel">Properties</span> window of Visual Studio
          2005.
        </p><p>
          The following table properties can be set:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              <span class="guilabel"> Auto Increment</span>
            </p></li><li><p>
              <span class="guilabel"> Average Row Length</span>
            </p></li><li><p>
              <span class="guilabel"> Character Set</span>
            </p></li><li><p>
              <span class="guilabel"> Checksum for Rows</span>
            </p></li><li><p>
              <span class="guilabel"> Collation</span>
            </p></li><li><p>
              <span class="guilabel"> Comment</span>
            </p></li><li><p>
              <span class="guilabel"> Connection</span>
            </p></li><li><p>
              <span class="guilabel"> Data Directory</span>
            </p></li><li><p>
              <span class="guilabel"> Delay Key Updates</span>
            </p></li><li><p>
              <span class="guilabel"> Engine</span>
            </p></li><li><p>
              <span class="guilabel"> Index Directory</span>
            </p></li><li><p>
              <span class="guilabel"> Insert Method</span>
            </p></li><li><p>
              <span class="guilabel"> Maximum Rows</span>
            </p></li><li><p>
              <span class="guilabel"> Minimum Rows</span>
            </p></li><li><p>
              <span class="guilabel"> Name</span>
            </p></li><li><p>
              <span class="guilabel"> Pack Keys</span>
            </p></li><li><p>
              <span class="guilabel"> Password</span>
            </p></li><li><p>
              <span class="guilabel">Row Format</span>
            </p></li><li><p>
              <span class="guilabel">Union</span>
            </p></li></ul></div><p>
          Some of these properties can have arbitrary text values,
          others accept values from a predefined set.
        </p><p>
          The properties <span class="guilabel">Schema</span> and
          <span class="guilabel">Server</span> are read only.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-vstudio-using-tabledata"></a>20.3.3.2. Editing Table Data</h4></div></div></div><p>
        The Table Data Editor, allows a user to browse, create and edit
        data of tables. The Table Data Editor is implemented as a simple
        data grid with auto generated columns.
      </p><p>
        To access the Table Data Editor, right click on a node
        representing the table or view in Server Explorer. From the
        nodes context menu, choose the <span class="guimenu">Browse</span> or
        <span class="guimenu">Edit Data</span> command. For tables and updatable
        views, this command opens the Table Data Editor in edit mode.
        For non-updatable views, this command opens the Table Data
        Editor in read-only mode.
      </p><p>
        When in the edit mode, you can modify table data by modifying
        the displayed table contents directly. To add a row, set desired
        values in the last row of the grid. To modify values, set new
        values in appropriate cells. To delete a row, select it by
        clicking on the selector column at the left of the grid, then
        press the <span class="guibutton">Delete</span> button.
      </p><p>
        To save changes you have made in the Table Data Editor, use
        either <span class="guibutton">Save</span> or <span class="guibutton">Save
        All</span> buttons of the Visual Studio main toolbar, or
        just press <span><strong class="keycap">Ctrl+S</strong></span>. A confirmation dialog will
        confirm whether you want the changes saved to the database.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-vstudio-using-views"></a>20.3.3.3. Editing Views</h4></div></div></div><p>
        To create a new view, right click the Views node under the
        connection node in Server Explorer. From the nodes context menu,
        choose the <span class="guimenu">Create View</span> command. This command
        opens the SQL Editor.
      </p><p>
        To modify an existing view, double click on a node of the view
        you wish to modify, or right click on this node and choose the
        <span class="guimenu">Alter View</span> command from a context menu.
        Either of the commands opens the SQL Editor.
      </p><p>
        To create or alter the view definition using SQL Editor, type
        the appropriate SQL statement in the SQL Editor.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          You should enter only the defining statement itself, without
          the <code class="literal"> CREATE VIEW AS</code> preface.
        </p></div><p>
        All other view properties can be set in the
        <span class="guilabel">Properties</span> window. These properties are:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <span class="guilabel">Algorithm</span>
          </p></li><li><p>
            <span class="guilabel"> Check Option</span>
          </p></li><li><p>
            <span class="guilabel">Definer</span>
          </p></li><li><p>
            <span class="guilabel">Name</span>
          </p></li><li><p>
            <span class="guilabel">Security Type</span>
          </p></li></ul></div><p>
        Some of these properties can have arbitrary text values, others
        accept values from a predefined set.
      </p><p>
        The properties <span class="guilabel">Is Updatable</span>,
        <span class="guilabel">Schema</span> and <span class="guilabel">Server</span> are
        readonly.
      </p><p>
        To save changes you have made, use either
        <span class="guibutton">Save</span> or <span class="guibutton">Save All</span>
        buttons of the Visual Studio main toolbar, or just press
        <span><strong class="keycap">Ctrl+S</strong></span>. A confirmation dialog will confirm
        whether you want the changes saved to the database.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-vstudio-using-storedroutines"></a>20.3.3.4. Editing Stored Procedures and Functions</h4></div></div></div><p>
        To create a new stored procedure, right click the Stored
        Procedures node under the connection node in Server Explorer.
        From the nodes context menu, choose the <span class="guimenu">Create
        Routine</span> command. This command opens the SQL Editor.
      </p><p>
        To create a new stored function, right click the
        <span class="guilabel">Functions</span> node under the connection node in
        Server Explorer. From the node's context menu, choose the
        <span class="guimenu">Create Routine</span> command.
      </p><p>
        To modify an existing stored routine (procedure or function),
        double click on a node of the routine you wish to modify, or
        right click on this node and choose the <span class="guimenu">Alter Routine
        </span>command from a context menu. Either of the commands
        opens the SQL Editor.
      </p><p>
        To create or alter the routine definition using SQL Editor, type
        this definition in the SQL Editor using standard SQL.
      </p><p>
        All other routine properties can be set in the
        <span class="guilabel">Properties</span> window. These properties are:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Comment
          </p></li><li><p>
            Data Access
          </p></li><li><p>
            Definer
          </p></li><li><p>
            Is Deterministic
          </p></li><li><p>
            Security Type
          </p></li></ul></div><p>
        Some of these properties can have arbitrary text values, others
        accept values only from a predefined set.
      </p><p>
        Also you can set all the options directly in the SQL Editor,
        using the standard <a href="sql-syntax.html#create-procedure" title="12.1.12. CREATE PROCEDURE and
      CREATE FUNCTION Syntax"><code class="literal">CREATE
        PROCEDURE</code></a> or <a href="sql-syntax.html#create-function" title="12.1.10. CREATE FUNCTION Syntax"><code class="literal">CREATE
        FUNCTION</code></a> statement. However, it is recommended to use
        the <span class="guilabel">Properties</span> window instead.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          You should never add the <code class="literal">CREATE</code> preface to
          the routine definition.
        </p></div><p>
        The properties <span class="guilabel">Name</span>,
        <span class="guilabel">Schema</span> and <span class="guilabel">Server</span> in
        the <span class="guilabel">Properties</span> window are read-only. Set or
        change the procedure name in the SQL editor.
      </p><p>
        To save changes you have made, use either
        <span class="guibutton">Save</span> or <span class="guibutton">Save All</span>
        buttons of the Visual Studio main toolbar, or just press
        <span><strong class="keycap">Ctrl+S</strong></span>. A confirmation dialog will confirm
        whether you want the changes saved to the database..
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-vstudio-using-triggers"></a>20.3.3.5. Editing Triggers</h4></div></div></div><p>
        To create a new trigger, right click on a node of a table for
        which you wish to add a trigger. From the node's context menu,
        choose the <span class="guimenu">Create Trigger</span> command. This
        command opens the SQL Editor.
      </p><p>
        To modify an existing trigger, double click on a node of the
        trigger you wish to modify, or right click on this node and
        choose the <span class="guimenu">Alter Trigger</span> command from a
        context menu. Either of the commands opens the SQL Editor.
      </p><p>
        To create or alter the trigger definition using SQL Editor, type
        the trigger statement in the SQL Editor using standard SQL.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          You should enter only the trigger statement, that is the part
          of the <a href="sql-syntax.html#create-trigger" title="12.1.15. CREATE TRIGGER Syntax"><code class="literal">CREATE TRIGGER</code></a> query
          that is placed after the <code class="literal">FOR EACH ROW</code>
          clause.
        </p></div><p>
        All other trigger properties are set in the
        <span class="guilabel">Properties</span> window. These properties are:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <span class="guilabel">Definer</span>
          </p></li><li><p>
            <span class="guilabel">Event Manipulation</span>
          </p></li><li><p>
            <span class="guilabel">Name</span>
          </p></li><li><p>
            <span class="guilabel">Timing</span>
          </p></li></ul></div><p>
        Some of these properties can have arbitrary text values, others
        accept values only from a predefined set.
      </p><p>
        The properties <span class="guilabel">Event Table</span>,
        <span class="guilabel">Schema</span> and <span class="guilabel">Server</span> in
        the <span class="guilabel">Properties</span> window are read-only.
      </p><p>
        To save changes you have made, use either
        <span class="guibutton">Save</span> or <span class="guibutton">Save All</span>
        buttons of the Visual Studio main toolbar, or just press
        <span><strong class="keycap">Ctrl+S</strong></span>. A confirmation dialog will confirm
        whether you want the changes saved to the database.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-vstudio-using-udf"></a>20.3.3.6. Editing User Defined Functions (UDF)</h4></div></div></div><p>
        To create a new User Defined Function (UDF), right click the
        UDFs node under the connection node in Server Explorer. From the
        node's context menu, choose the <span class="guimenu">Create UDF</span>
        command. This command opens the UDF Editor.
      </p><p>
        To modify an existing UDF, double click on a node of the UDF you
        wish to modify, or right click on this node and choose the Alter
        UDF command from a context menu. Either of the commands opens
        the UDF Editor.
      </p><p>
        The UDF editor allows you to set the following properties
        through the properties panel:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <span class="guilabel">Name</span>
          </p></li><li><p>
            <span class="guilabel">So-name (DLL name)</span>
          </p></li><li><p>
            <span class="guilabel">Return type</span>
          </p></li><li><p>
            <span class="guilabel">Is Aggregate</span>
          </p></li></ul></div><p>
        The property Server in the <span class="guilabel">Properties</span>
        window is read-only.
      </p><p>
        To save changes you have made, use either
        <span class="guibutton">Save</span> or <span class="guibutton">Save All</span>
        buttons of the Visual Studio main toolbar, or just press
        <span><strong class="keycap">Ctrl+S</strong></span>. A confirmation dialog will confirm
        whether you want the changes saved to the database.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-vstudio-using-dropping"></a>20.3.3.7. Dropping database objects</h4></div></div></div><p>
        Tables, views, stored routines, triggers, an UDFs can be dropped
        with the appropriate <span class="guimenu">Drop</span> command from its
        context menu: <span class="guimenu">Drop Table</span>, <span class="guimenu">Drop
        View</span>, <span class="guimenu">Drop Routine</span>, <span class="guimenu">Drop
        Trigger</span>, <span class="guimenu">Drop UDF</span>.
      </p><p>
        You will be asked to confirm the execution of the corresponding
        drop query in a confirmation dialog.
      </p><p>
        Dropping of multiple objects is not supported.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-vstudio-using-cloning"></a>20.3.3.8. Cloning database objects</h4></div></div></div><p>
        Tables, views, stored procedures and functions can be cloned
        with the appropriate <span class="guimenu">Clone</span> command from its
        context menu: <span class="guimenu">Clone Table</span>, <span class="guimenu">Clone
        View</span>, <span class="guimenu">Clone Routine</span>. The clone
        commands open the corresponding editor for a new object: the
        <span class="guilabel">Table Editor </span>for cloning a table and the
        SQL Editor for cloning a view or a routine.
      </p><p>
        To save the cloned object, use either
        <span class="guibutton">Save</span> or <span class="guibutton">Save All</span>
        buttons of the Visual Studio main toolbar, or just press
        <span><strong class="keycap">Ctrl+S</strong></span>. A confirmation dialog will confirm
        whether you want the changes saved to the database.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-vstudio-support"></a>20.3.4. Visual Studio Plugin Support</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-vstudio-faq">20.3.4.1. Visual Studio Plugin FAQ</a></span></dt></dl></div><p>
      If you have a comment, or if you discover a bug, please, use our
      MySQL bug tracking system
      (<a href="http://bugs.mysql.com" target="_top">http://bugs.mysql.com</a>)
      to report problem or add your suggestion.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-vstudio-faq"></a>20.3.4.1. Visual Studio Plugin FAQ</h4></div></div></div><p><span class="bold"><strong>Questions</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><a href="connectors-apis.html#qandaitem-20-3-4-1-1-1">20.3.4.1.1: </a>
              When creating a connection, typing the connection details
              causes the connection window to immediately close.
            </p></li></ul></div><p><span class="bold"><strong>Questions and Answers</strong></span></p><p><a name="qandaitem-20-3-4-1-1-1"></a><span class="bold"><strong>20.3.4.1.1: </strong></span><span class="bold"><strong>
              When creating a connection, typing the connection details
              causes the connection window to immediately close.
            </strong></span></p><p>
              There are known issues with versions of Connector/NET
              earlier than 5.0.2. Connector/NET 1.0.x is known not to
              work. If you have any of these versions installed, or have
              previously upgraded from an earlier version, uninstall
              Connector/NET completely and then install Connector/NET
              5.0.2.
            </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="connector-j"></a>20.4. MySQL Connector/J</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-j-versions">20.4.1. Connector/J Versions</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-installing">20.4.2. Connector/J Installation</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-examples">20.4.3. Connector/J Examples</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-reference">20.4.4. Connector/J (JDBC) Reference</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-usagenotes">20.4.5. Connector/J Notes and Tips</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-support">20.4.6. Connector/J Support</a></span></dt></dl></div><p>
    MySQL provides connectivity for client applications developed in the
    Java programming language via a JDBC driver, which is called MySQL
    Connector/J.
  </p><p>
    MySQL Connector/J is a JDBC Type 4 driver. Different versions are
    available that are compatible with the JDBC 3.0 and JDBC 4.0
    specifications. The Type 4 designation means that the driver is
    pure-Java implementation of the MySQL protocol and does not rely on
    the MySQL client libraries.
  </p><p>
    Although JDBC is useful by itself, we would hope that if you are not
    familiar with JDBC that after reading the first few sections of this
    manual, that you would avoid using naked JDBC for all but the most
    trivial problems and consider using one of the popular persistence
    frameworks such as
    <a href="http://www.hibernate.org/" target="_top">Hibernate</a>,
    <a href="http://www.springframework.org/" target="_top">Spring's JDBC
    templates</a> or <a href="http://ibatis.apache.org/" target="_top">Ibatis
    SQL Maps</a> to do the majority of repetitive work and heavier
    lifting that is sometimes required with JDBC.
  </p><p>
    This section is not designed to be a complete JDBC tutorial. If you
    need more information about using JDBC you might be interested in
    the following online tutorials that are more in-depth than the
    information presented here:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        <a href="http://java.sun.com/docs/books/tutorial/jdbc/basics/index.html" target="_top">JDBC
        Basics</a> — A tutorial from Sun covering beginner
        topics in JDBC
      </p></li><li><p>
        <a href="http://java.sun.com/developer/onlineTraining/Database/JDBCShortCourse/index.html" target="_top">JDBC
        Short Course</a> — A more in-depth tutorial from Sun
        and JGuru
      </p></li></ul></div><p>
    <span class="bold"><strong>Key topics:</strong></span>
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        For help with connection strings, connection options setting up
        your connection through JDBC, see
        <a href="connectors-apis.html#connector-j-reference-configuration-properties" title="20.4.4.1. Driver/Datasource Class Names, URL Syntax and Configuration Properties
        for Connector/J">Section 20.4.4.1, “Driver/Datasource Class Names, URL Syntax and Configuration Properties
        for Connector/J”</a>.
      </p></li><li><p>
        For tips on using Connector/J and JDBC with generic J2EE
        toolkits, see <a href="connectors-apis.html#connector-j-usagenotes-j2ee" title="20.4.5.2. Using Connector/J with J2EE and Other Java Frameworks">Section 20.4.5.2, “Using Connector/J with J2EE and Other Java Frameworks”</a>.
      </p></li><li><p>
        Developers using the Tomcat server platform, see
        <a href="connectors-apis.html#connector-j-usagenotes-tomcat" title="20.4.5.2.2. Using Connector/J with Tomcat">Section 20.4.5.2.2, “Using Connector/J with Tomcat”</a>.
      </p></li><li><p>
        Developers using JBoss, see
        <a href="connectors-apis.html#connector-j-usagenotes-jboss" title="20.4.5.2.3. Using Connector/J with JBoss">Section 20.4.5.2.3, “Using Connector/J with JBoss”</a>.
      </p></li><li><p>
        Developers using Spring, see
        <a href="connectors-apis.html#connector-j-usagenotes-spring-config" title="20.4.5.2.4. Using Connector/J with Spring">Section 20.4.5.2.4, “Using Connector/J with Spring”</a>.
      </p></li></ul></div><p class="mnmas-kb"><b>MySQL Enterprise</b>
      MySQL Enterprise subscribers will find more information about
      using JDBC with MySQL in the Knowledge Base articles about
      <a href="https://kb.mysql.com/search.php?cat=search&amp;category=10" target="_top">
      JDBC</a>. Access to the MySQL Knowledge Base collection of
      articles is one of the advantages of subscribing to MySQL
      Enterprise. For more information, see
      <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-j-versions"></a>20.4.1. Connector/J Versions</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-j-versions-java">20.4.1.1. Java Versions Supported</a></span></dt></dl></div><p>
      There are currently four versions of MySQL Connector/J available:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Connector/J 5.1 is the Type 4 pure Java JDBC driver, which
          conforms to the JDBC 3.0 and JDBC 4.0 specifications. It
          provides compatibility with all the functionality of MySQL,
          including 4.1, 5.0, 5.1 and the 6.0 alpha release featuring
          the new Falcon storage engine. Connector/J 5.1 provides ease
          of development features, including auto-registration with the
          Driver Manager, standardized validity checks, categorized
          SQLExceptions, support for the JDBC-4.0 XML processing, per
          connection client information,
          <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">NCHAR</code></a>,
          <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">NVARCHAR</code></a> and
          <code class="literal">NCLOB</code> types. This release also includes all
          bug fixes up to and including Connector/J 5.0.6.
        </p></li><li><p>
          Connector/J 5.0 provides support for all the functionality
          offered by Connector/J 3.1 and includes distributed
          transaction (XA) support.
        </p></li><li><p>
          Connector/J 3.1 was designed for connectivity to MySQL 4.1 and
          MySQL 5.0 servers and provides support for all the
          functionality in MySQL 5.0 except distributed transaction (XA)
          support.
        </p></li><li><p>
          Connector/J 3.0 provides core functionality and was designed
          with connectivity to MySQL 3.x or MySQL 4.1 servers, although
          it will provide basic compatibility with later versions of
          MySQL. Connector/J 3.0 does not support server-side prepared
          statements, and does not support any of the features in
          versions of MySQL later than 4.1.
        </p></li></ul></div><p>
      The following table summarizes the Connector/J versions available:
    </p><p>
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Connector/J version</strong></span></td><td><span class="bold"><strong>Driver Type</strong></span></td><td><span class="bold"><strong>JDBC version</strong></span></td><td><span class="bold"><strong>MySQL Server version</strong></span></td><td><span class="bold"><strong>Status</strong></span></td></tr><tr><td>5.1</td><td>4</td><td>3.0, 4.0</td><td>4.1, 5.0, 5.1, 6.0</td><td>Recommended version</td></tr><tr><td>5.0</td><td>4</td><td>3.0</td><td>4.1, 5.0</td><td>Released version</td></tr><tr><td>3.1</td><td>4</td><td>3.0</td><td>4.1, 5.0</td><td>Obsolete</td></tr><tr><td>3.0</td><td>4</td><td>3.0</td><td>3.x, 4.1</td><td>Obsolete</td></tr></tbody></table></div><p>
    </p><p>
      The current recommended version for Connector/J is 5.1. This guide
      covers all four connector versions, with specific notes given
      where a setting applies to a specific option.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-j-versions-java"></a>20.4.1.1. Java Versions Supported</h4></div></div></div><p>
        The following table summarizes Connector/J Java dependencies:
      </p><p>
        </p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Connector/J version</strong></span></td><td><span class="bold"><strong>Java RTE required</strong></span></td><td><span class="bold"><strong>JDK required (to build source code)</strong></span></td></tr><tr><td>5.1</td><td>1.4.x, 1.5.x, 1.6.x</td><td>1.6.x and 1.5.x (or older)</td></tr><tr><td>5.0</td><td>1.3.x, 1.4.x, 1.5.x, 1.6.x</td><td>1.4.2, 1.5.x, 1.6.x</td></tr><tr><td>3.1</td><td>1.2.x, 1.3.x, 1.4.x, 1.5.x, 1.6.x</td><td>1.4.2, 1.5.x, 1.6.x</td></tr><tr><td>3.0</td><td>1.2.x, 1.3.x, 1.4.x, 1.5.x, 1.6.x</td><td>1.4.2, 1.5.x, 1.6.x</td></tr></tbody></table></div><p>
      </p><p>
        MySQL Connector/J does not support JDK-1.1.x or JDK-1.0.x.
      </p><p>
        Because of the implementation of
        <code class="classname">java.sql.Savepoint</code>, Connector/J 3.1.0 and
        newer will not run on a Java runtime older than 1.4 unless the
        class verifier is turned off (by setting the
        <code class="option">-Xverify:none</code> option to the Java runtime). This
        is because the class verifier will try to load the class
        definition for <code class="classname">java.sql.Savepoint</code> even
        though it is not accessed by the driver unless you actually use
        savepoint functionality.
      </p><p>
        Caching functionality provided by Connector/J 3.1.0 or newer is
        also not available on JVMs older than 1.4.x, as it relies on
        <code class="classname">java.util.LinkedHashMap</code> which was first
        available in JDK-1.4.0.
      </p><p>
        If you are building Connector/J from source code using the
        source distribution (see
        <a href="connectors-apis.html#connector-j-installing-source" title="20.4.2.4. Installing from the Development Source Tree">Section 20.4.2.4, “Installing from the Development Source Tree”</a>) then you must
        use JDK 1.4.2 or newer to compile the Connector package. For
        Connector/J 5.1 you must have both JDK-1.6.x. and JDK-1.5.x
        installed in order to be able to build the source code.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-j-installing"></a>20.4.2. Connector/J Installation</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-j-installing-binary">20.4.2.1. Installing Connector/J from a Binary Distribution</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-installing-classpath">20.4.2.2. Installing the Driver and Configuring the <code class="literal">CLASSPATH</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-installing-upgrading">20.4.2.3. Upgrading from an Older Version</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-installing-source">20.4.2.4. Installing from the Development Source Tree</a></span></dt></dl></div><p>
      You can install the Connector/J package using either the binary or
      source distribution. The binary distribution provides the easiest
      method for installation; the source distribution enables you to
      customize your installation further. With either solution, you
      must manually add the Connector/J location to your Java
      <code class="literal">CLASSPATH</code>.
    </p><p>
      If you are upgrading from a previous version, read the upgrade
      information before continuing. See
      <a href="connectors-apis.html#connector-j-installing-upgrading" title="20.4.2.3. Upgrading from an Older Version">Section 20.4.2.3, “Upgrading from an Older Version”</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-j-installing-binary"></a>20.4.2.1. Installing Connector/J from a Binary Distribution</h4></div></div></div><p>
        The easiest method of installation is to use the binary
        distribution of the Connector/J package. The binary distribution
        is available either as a Tar/Gzip or Zip file which you must
        extract to a suitable location and then optionally make the
        information about the package available by changing your
        <code class="literal">CLASSPATH</code> (see
        <a href="connectors-apis.html#connector-j-installing-classpath" title="20.4.2.2. Installing the Driver and Configuring the CLASSPATH">Section 20.4.2.2, “Installing the Driver and Configuring the <code class="literal">CLASSPATH</code>”</a>).
      </p><p>
        MySQL Connector/J is distributed as a .zip or .tar.gz archive
        containing the sources, the class files, and the JAR archive
        named
        <code class="filename">mysql-connector-java-<em class="replaceable"><code>[version]</code></em>-bin.jar</code>,
        and starting with Connector/J 3.1.8 a debug build of the driver
        in a file named
        <code class="filename">mysql-connector-java-<em class="replaceable"><code>[version]</code></em>-bin-g.jar</code>.
      </p><p>
        Starting with Connector/J 3.1.9, the <code class="filename">.class</code>
        files that constitute the JAR files are only included as part of
        the driver JAR file.
      </p><p>
        You should not use the debug build of the driver unless
        instructed to do so when reporting a problem or a bug to MySQL
        AB, as it is not designed to be run in production environments,
        and will have adverse performance impact when used. The debug
        binary also depends on the Aspect/J runtime library, which is
        located in the <code class="filename">src/lib/aspectjrt.jar</code> file
        that comes with the Connector/J distribution.
      </p><p>
        You will need to use the appropriate graphical or command-line
        utility to extract the distribution (for example, WinZip for the
        .zip archive, and <span><strong class="command">tar</strong></span> for the .tar.gz
        archive). Because there are potentially long file names in the
        distribution, we use the GNU tar archive format. You will need
        to use GNU tar (or an application that understands the GNU tar
        archive format) to unpack the .tar.gz variant of the
        distribution.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-j-installing-classpath"></a>20.4.2.2. Installing the Driver and Configuring the <code class="literal">CLASSPATH</code></h4></div></div></div><p>
        Once you have extracted the distribution archive, you can
        install the driver by placing
        <code class="filename">mysql-connector-java-[version]-bin.jar </code>in
        your classpath, either by adding the full path to it to your
        <code class="literal">CLASSPATH</code> environment variable, or by
        directly specifying it with the command line switch -cp when
        starting your JVM.
      </p><p>
        If you are going to use the driver with the JDBC DriverManager,
        you would use <code class="literal">com.mysql.jdbc.Driver</code> as the
        class that implements <code class="classname">java.sql.Driver</code>.
      </p><p>
        You can set the <code class="literal">CLASSPATH</code> environment
        variable under UNIX, Linux or Mac OS X either locally for a user
        within their <code class="literal">.profile</code>,
        <code class="literal">.login</code> or other login file. You can also set
        it globally by editing the global
        <code class="literal">/etc/profile</code> file.
      </p><p>
        For example, under a C shell (csh, tcsh) you would add the
        Connector/J driver to your <code class="literal">CLASSPATH</code> using
        the following:
      </p><pre class="programlisting">shell&gt; setenv CLASSPATH /path/mysql-connector-java-[ver]-bin.jar:$CLASSPATH</pre><p>
        Or with a Bourne-compatible shell (sh, ksh, bash):
      </p><pre class="programlisting">shell&gt; export set CLASSPATH=/path/mysql-connector-java-[ver]-bin.jar:$CLASSPATH</pre><p>
        Within Windows 2000, Windows XP, Windows Server 2003 and Windows
        Vista, you must set the environment variable through the System
        Control Panel.
      </p><p>
        If you want to use MySQL Connector/J with an application server
        such as GlassFish, Tomcat or JBoss, you will have to read your
        vendor's documentation for more information on how to configure
        third-party class libraries, as most application servers ignore
        the <code class="literal">CLASSPATH</code> environment variable. For
        configuration examples for some J2EE application servers, see
        <a href="connectors-apis.html#connector-j-usagenotes-j2ee" title="20.4.5.2. Using Connector/J with J2EE and Other Java Frameworks">Section 20.4.5.2, “Using Connector/J with J2EE and Other Java Frameworks”</a>. However, the
        authoritative source for JDBC connection pool configuration
        information for your particular application server is the
        documentation for that application server.
      </p><p>
        If you are developing servlets or JSPs, and your application
        server is J2EE-compliant, you can put the driver's .jar file in
        the WEB-INF/lib subdirectory of your webapp, as this is a
        standard location for third party class libraries in J2EE web
        applications.
      </p><p>
        You can also use the <code class="classname">MysqlDataSource</code> or
        <code class="classname">MysqlConnectionPoolDataSource</code> classes in
        the <code class="literal">com.mysql.jdbc.jdbc2.optional</code> package, if
        your J2EE application server supports or requires them. Starting
        with Connector/J 5.0.0, the
        <code class="literal">javax.sql.XADataSource</code> interface is
        implemented via the
        <code class="literal">com.mysql.jdbc.jdbc2.optional.MysqlXADataSource</code>
        class, which supports XA distributed transactions when used in
        combination with MySQL server version 5.0.
      </p><p>
        The various <code class="classname">MysqlDataSource</code> classes
        support the following parameters (through standard set
        mutators):
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            user
          </p></li><li><p>
            password
          </p></li><li><p>
            serverName (see the previous section about fail-over hosts)
          </p></li><li><p>
            databaseName
          </p></li><li><p>
            port
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-j-installing-upgrading"></a>20.4.2.3. Upgrading from an Older Version</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-j-installing-upgrading-3-0-to-3-1">20.4.2.3.1. Upgrading from MySQL Connector/J 3.0 to 3.1</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-installing-upgrading-5-1">20.4.2.3.2. Upgrading to MySQL Connector/J 5.1.x</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-installing-upgrading-issues">20.4.2.3.3. JDBC-Specific Issues When Upgrading to MySQL Server 4.1 or Newer</a></span></dt></dl></div><p>
        We try to keep the upgrade process as easy as possible, however
        as is the case with any software, sometimes changes need to be
        made in new versions to support new features, improve existing
        functionality, or comply with new standards.
      </p><p>
        This section has information about what users who are upgrading
        from one version of Connector/J to another (or to a new version
        of the MySQL server, with respect to JDBC functionality) should
        be aware of.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-j-installing-upgrading-3-0-to-3-1"></a>20.4.2.3.1. Upgrading from MySQL Connector/J 3.0 to 3.1</h5></div></div></div><p>
          Connector/J 3.1 is designed to be backward-compatible with
          Connector/J 3.0 as much as possible. Major changes are
          isolated to new functionality exposed in MySQL-4.1 and newer,
          which includes Unicode character sets, server-side prepared
          statements, SQLState codes returned in error messages by the
          server and various performance enhancements that can be
          enabled or disabled via configuration properties.
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              <span class="bold"><strong>Unicode Character Sets</strong></span>
              — See the next section, as well as
              <a href="internationalization-localization.html#charset" title="9.1. Character Set Support">Section 9.1, “Character Set Support”</a>, for information on this new
              feature of MySQL. If you have something misconfigured, it
              will usually show up as an error with a message similar to
              <code class="literal">Illegal mix of collations</code>.
            </p></li><li><p>
              <span class="bold"><strong>Server-side Prepared
              Statements</strong></span> — Connector/J 3.1 will
              automatically detect and use server-side prepared
              statements when they are available (MySQL server version
              4.1.0 and newer).
            </p><p>
              Starting with version 3.1.7, the driver scans SQL you are
              preparing via all variants of
              <code class="literal">Connection.prepareStatement()</code> to
              determine if it is a supported type of statement to
              prepare on the server side, and if it is not supported by
              the server, it instead prepares it as a client-side
              emulated prepared statement. You can disable this feature
              by passing
              <span class="property">emulateUnsupportedPstmts=false</span> in
              your JDBC URL.
            </p><p>
              If your application encounters issues with server-side
              prepared statements, you can revert to the older
              client-side emulated prepared statement code that is still
              presently used for MySQL servers older than 4.1.0 with the
              connection property
              <span class="property">useServerPrepStmts=false</span>
            </p></li><li><p>
              <span class="bold"><strong>Datetimes</strong></span> with all-zero
              components (<code class="literal">0000-00-00 ...</code>) —
              These values can not be represented reliably in Java.
              Connector/J 3.0.x always converted them to NULL when being
              read from a ResultSet.
            </p><p>
              Connector/J 3.1 throws an exception by default when these
              values are encountered as this is the most correct
              behavior according to the JDBC and SQL standards. This
              behavior can be modified using the
              <span class="property">zeroDateTimeBehavior</span> configuration
              property. The allowable values are:
            </p><div class="itemizedlist"><ul type="circle"><li><p>
                  <code class="literal">exception</code> (the default), which
                  throws an SQLException with an SQLState of
                  <code class="literal">S1009</code>.
                </p></li><li><p>
                  <code class="literal">convertToNull</code>, which returns
                  <code class="literal">NULL</code> instead of the date.
                </p></li><li><p>
                  <code class="literal">round</code>, which rounds the date to the
                  nearest closest value which is
                  <code class="literal">0001-01-01</code>.
                </p></li></ul></div><p>
              Starting with Connector/J 3.1.7,
              <code class="literal">ResultSet.getString()</code> can be decoupled
              from this behavior via
              <span class="property">noDatetimeStringSync=true</span> (the
              default value is <code class="literal">false</code>) so that you can
              retrieve the unaltered all-zero value as a String. It
              should be noted that this also precludes using any time
              zone conversions, therefore the driver will not allow you
              to enable <span class="property">noDatetimeStringSync</span> and
              <span class="property">useTimezone</span> at the same time.
            </p></li><li><p>
              <span class="bold"><strong>New SQLState Codes</strong></span>
              — Connector/J 3.1 uses SQL:1999 SQLState codes
              returned by the MySQL server (if supported), which are
              different from the legacy X/Open state codes that
              Connector/J 3.0 uses. If connected to a MySQL server older
              than MySQL-4.1.0 (the oldest version to return SQLStates
              as part of the error code), the driver will use a built-in
              mapping. You can revert to the old mapping by using the
              configuration property
              <span class="property">useSqlStateCodes=false</span>.
            </p></li><li><p>
              <span class="bold"><strong><code class="literal">ResultSet.getString()</code></strong></span>
              — Calling <code class="literal">ResultSet.getString()</code>
              on a <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> column will now
              return the address of the <code class="literal">byte[]</code> array
              that represents it, instead of a <code class="literal">String</code>
              representation of the <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>.
              <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> values have no
              character set, so they cannot be converted to
              <code class="literal">java.lang.String</code>s without data loss or
              corruption.
            </p><p>
              To store strings in MySQL with LOB behavior, use one of
              the <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> types, which the
              driver will treat as a <code class="literal">java.sql.Clob</code>.
            </p></li><li><p>
              <span class="bold"><strong>Debug builds</strong></span> —
              Starting with Connector/J 3.1.8 a debug build of the
              driver in a file named
              <code class="filename">mysql-connector-java-<em class="replaceable"><code>[version]</code></em>-bin-g.jar</code>
              is shipped alongside the normal binary jar file that is
              named
              <code class="filename">mysql-connector-java-<em class="replaceable"><code>[version]</code></em>-bin.jar</code>.
            </p><p>
              Starting with Connector/J 3.1.9, we do not ship the .class
              files unbundled, they are only available in the JAR
              archives that ship with the driver.
            </p><p>
              You should not use the debug build of the driver unless
              instructed to do so when reporting a problem or bug, as it
              is not designed to be run in production environments, and
              will have adverse performance impact when used. The debug
              binary also depends on the Aspect/J runtime library, which
              is located in the
              <code class="filename">src/lib/aspectjrt.jar</code> file that comes
              with the Connector/J distribution.
            </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-j-installing-upgrading-5-1"></a>20.4.2.3.2. Upgrading to MySQL Connector/J 5.1.x</h5></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
              In Connector/J 5.0.x and earlier, the alias for a table in
              a <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statement is
              returned when accessing the result set metadata using
              <code class="function">ResultSetMetaData.getColumnName()</code>.
              This behavior however is not JDBC compliant, and in
              Connector/J 5.1 this behavior was changed so that the
              original table name, rather than the alias, is returned.
            </p><p>
              The JDBC-compliant behavior is designed to let API users
              reconstruct the DML statement based on the metadata within
              <code class="literal">ResultSet</code> and
              <code class="literal">ResultSetMetaData</code>.
            </p><p>
              You can get the alias for a column in a result set by
              calling
              <code class="function">ResultSetMetaData.getColumnLabel()</code>.
              If you want to use the old non-compliant behavior with
              <code class="function">ResultSetMetaData.getColumnName()</code>,
              use the <code class="option">useOldAliasMetadataBehavior</code>
              option and set the value to <code class="literal">true</code>.
            </p><p>
              In Connector/J 5.0.x the default value of
              <code class="option">useOldAliasMetadataBehavior</code> was true, but
              in Connector/J 5.1 this was changed to a default value of
              false.
            </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-j-installing-upgrading-issues"></a>20.4.2.3.3. JDBC-Specific Issues When Upgrading to MySQL Server 4.1 or Newer</h5></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
              <span class="emphasis"><em>Using the UTF-8 Character Encoding</em></span> -
              Prior to MySQL server version 4.1, the UTF-8 character
              encoding was not supported by the server, however the JDBC
              driver could use it, allowing storage of multiple
              character sets in latin1 tables on the server.
            </p><p>
              Starting with MySQL-4.1, this functionality is deprecated.
              If you have applications that rely on this functionality,
              and can not upgrade them to use the official Unicode
              character support in MySQL server version 4.1 or newer,
              you should add the following property to your connection
              URL:
            </p><p>
              <code class="computeroutput">useOldUTF8Behavior=true</code>
            </p></li><li><p>
              <span class="emphasis"><em>Server-side Prepared Statements</em></span> -
              Connector/J 3.1 will automatically detect and use
              server-side prepared statements when they are available
              (MySQL server version 4.1.0 and newer). If your
              application encounters issues with server-side prepared
              statements, you can revert to the older client-side
              emulated prepared statement code that is still presently
              used for MySQL servers older than 4.1.0 with the following
              connection property:
            </p><p>
              <code class="computeroutput">useServerPrepStmts=false</code>
            </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-j-installing-source"></a>20.4.2.4. Installing from the Development Source Tree</h4></div></div></div><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>
          You should read this section only if you are interested in
          helping us test our new code. If you just want to get MySQL
          Connector/J up and running on your system, you should use a
          standard binary release distribution.
        </p></div><p>
        To install MySQL Connector/J from the development source tree,
        make sure that you have the following prerequisites:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            A Bazaar client, to check out the sources from our Launchpad
            repository (available from
            <a href="http://bazaar-vcs.org/" target="_top">http://bazaar-vcs.org/</a>).
          </p></li><li><p>
            Apache Ant version 1.7 or newer (available from
            <a href="http://ant.apache.org/" target="_top">http://ant.apache.org/</a>).
          </p></li><li><p>
            JDK 1.4.2 or later. Although MySQL Connector/J can be be
            used with older JDKs, to compile it from source you must
            have at least JDK 1.4.2. If you are building Connector/J 5.1
            you will need JDK 1.6.x and an older JDK such as JDK 1.5.x.
            You will then need to point your JAVA_HOME environment
            variable at the older installation.
          </p></li></ul></div><p>
        The source code repository for MySQL Connector/J is located on
        Launchpad at
        <a href="https://code.launchpad.net/connectorj" target="_top">https://code.launchpad.net/connectorj</a>.
      </p><p>
        To check out and compile a specific branch of MySQL Connector/J,
        follow these steps:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Check out the latest code from the branch that you want with
            one of the following commands.
          </p><p>
            To check out the latest development branch use:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>bzr branch lp:connectorj</code></strong></pre><p>
            This creates a <code class="filename">connectorj</code> subdirectory
            in the current directory that contains the latest sources
            for the requested branch.
          </p><p>
            To check out the latest 5.1 code use:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>bzr branch lp:connectorj/5.1</code></strong></pre><p>
            This will create a <code class="filename">5.1</code> subdirectory in
            the current directory containing the latest 5.1 code.
          </p></li><li><p>
            If you are building Connector/J 5.1 make sure that you have
            both JDK 1.6.x installed and an older JDK such as JDK 1.5.x.
            This is because Connector/J supports both JDBC 3.0 (which
            was prior to JDK 1.6.x) and JDBC 4.0. Set your JAVA_HOME
            environment variable to the path of the older JDK
            installation.
          </p></li><li><p>
            Change location to either the
            <code class="filename">connectorj</code> or <code class="filename">5.1</code>
            directory, depending on which branch you want to build, to
            make it your current working directory. For example:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd connectorj</code></strong></pre></li><li><p>
            If you are building Connector/J 5.1 you need to edit the
            <code class="filename">build.xml</code> to reflect the location of
            your JDK 1.6.x installation. The lines that you need to
            change are:
          </p><pre class="programlisting">            &lt;property name="com.mysql.jdbc.java6.javac" value="C:\jvms\jdk1.6.0\bin\javac.exe" /&gt;
            &lt;property name="com.mysql.jdbc.java6.rtjar" value="C:\jvms\jdk1.6.0\jre\lib\rt.jar" /&gt;
          </pre><p>
            Alternatively, you can set the value of these property names
            through the Ant <code class="option">-D</code> option.
          </p></li><li><p>
            Issue the following command to compile the driver and create
            a <code class="filename">.jar</code> file suitable for installation:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ant dist</code></strong></pre><p>
            This creates a <code class="filename">build</code> directory in the
            current directory, where all build output will go. A
            directory is created in the <code class="filename">build</code>
            directory that includes the version number of the sources
            you are building from. This directory contains the sources,
            compiled <code class="filename">.class</code> files, and a
            <code class="filename">.jar</code> file suitable for deployment. For
            other possible targets, including ones that will create a
            fully packaged distribution, issue the following command:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ant -projecthelp</code></strong></pre></li><li><p>
            A newly created <code class="filename">.jar</code> file containing
            the JDBC driver will be placed in the directory
            <code class="filename">build/mysql-connector-java-<em class="replaceable"><code>[version]</code></em></code>.
          </p><p>
            Install the newly created JDBC driver as you would a binary
            <code class="filename">.jar</code> file that you download from MySQL
            by following the instructions in
            <a href="connectors-apis.html#connector-j-installing-classpath" title="20.4.2.2. Installing the Driver and Configuring the CLASSPATH">Section 20.4.2.2, “Installing the Driver and Configuring the <code class="literal">CLASSPATH</code>”</a>.
          </p></li></ol></div><p>
        A package containing both the binary and source code for
        Connector/J 5.1 can also be found at the following location:
        <a href="http://dev.mysql.com/downloads/connector/j/5.1.html" target="_top">
        Connector/J 5.1 Download</a>
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-j-examples"></a>20.4.3. Connector/J Examples</h3></div></div></div><p>
      Examples of using Connector/J are located throughout this
      document, this section provides a summary and links to these
      examples.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <a href="connectors-apis.html#connector-j-examples-connection-drivermanager" title="Example 20.1. Connector/J: Obtaining a connection from the
            DriverManager">Example 20.1, “Connector/J: Obtaining a connection from the
            <code class="literal">DriverManager</code>”</a>
        </p></li><li><p>
          <a href="connectors-apis.html#connector-j-examples-execute-select" title="Example 20.2. Connector/J: Using java.sql.Statement to execute a
            SELECT query">Example 20.2, “Connector/J: Using java.sql.Statement to execute a
            <code class="literal">SELECT</code> query”</a>
        </p></li><li><p>
          <a href="connectors-apis.html#connector-j-examples-stored-procedure" title="Example 20.3. Connector/J: Calling Stored Procedures">Example 20.3, “Connector/J: Calling Stored Procedures”</a>
        </p></li><li><p>
          <a href="connectors-apis.html#connector-j-examples-preparecall" title="Example 20.4. Connector/J: Using Connection.prepareCall()">Example 20.4, “Connector/J: Using <code class="literal">Connection.prepareCall()</code>”</a>
        </p></li><li><p>
          <a href="connectors-apis.html#connector-j-examples-output-param" title="Example 20.5. Connector/J: Registering output parameters">Example 20.5, “Connector/J: Registering output parameters”</a>
        </p></li><li><p>
          <a href="connectors-apis.html#connector-j-examples-callablestatement" title="Example 20.6. Connector/J: Setting CallableStatement input
                  parameters">Example 20.6, “Connector/J: Setting <code class="literal">CallableStatement</code> input
                  parameters”</a>
        </p></li><li><p>
          <a href="connectors-apis.html#connector-j-examples-retrieving-results-params" title="Example 20.7. Connector/J: Retrieving results and output parameter values">Example 20.7, “Connector/J: Retrieving results and output parameter values”</a>
        </p></li><li><p>
          <a href="connectors-apis.html#connector-j-examples-autoincrement-getgeneratedkeys" title="Example 20.8. Connector/J: Retrieving AUTO_INCREMENT column values
              using Statement.getGeneratedKeys()">Example 20.8, “Connector/J: Retrieving <code class="literal">AUTO_INCREMENT</code> column values
              using <code class="literal">Statement.getGeneratedKeys()</code>”</a>
        </p></li><li><p>
          <a href="connectors-apis.html#connector-j-examples-autoincrement-select" title="Example 20.9. Connector/J: Retrieving AUTO_INCREMENT column values
              using SELECT LAST_INSERT_ID()">Example 20.9, “Connector/J: Retrieving <code class="literal">AUTO_INCREMENT</code> column values
              using <code class="literal">SELECT LAST_INSERT_ID()</code>”</a>
        </p></li><li><p>
          <a href="connectors-apis.html#connector-j-examples-autoincrement-updateable-resultsets" title="Example 20.10. Connector/J: Retrieving AUTO_INCREMENT column values
              in Updatable ResultSets">Example 20.10, “Connector/J: Retrieving <code class="literal">AUTO_INCREMENT</code> column values
              in <code class="literal">Updatable ResultSets</code>”</a>
        </p></li><li><p>
          <a href="connectors-apis.html#connector-j-examples-connectionpool-j2ee" title="Example 20.11. Connector/J: Using a connection pool with a J2EE application server">Example 20.11, “Connector/J: Using a connection pool with a J2EE application server”</a>
        </p></li><li><p>
          <a href="connectors-apis.html#connector-j-examples-transaction-retry" title="Example 20.12. Connector/J: Example of transaction with retry logic">Example 20.12, “Connector/J: Example of transaction with retry logic”</a>
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-j-reference"></a>20.4.4. Connector/J (JDBC) Reference</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-j-reference-configuration-properties">20.4.4.1. Driver/Datasource Class Names, URL Syntax and Configuration Properties
        for Connector/J</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-reference-implementation-notes">20.4.4.2. JDBC API Implementation Notes</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-reference-type-conversions">20.4.4.3. Java, JDBC and MySQL Types</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-reference-charsets">20.4.4.4. Using Character Sets and Unicode</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-reference-using-ssl">20.4.4.5. Connecting Securely Using SSL</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-reference-replication-connection">20.4.4.6. Using Master/Slave Replication with ReplicationConnection</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-reference-error-sqlstates">20.4.4.7. Mapping MySQL Error Numbers to SQLStates</a></span></dt></dl></div><p>
      This section of the manual contains reference material for MySQL
      Connector/J, some of which is automatically generated during the
      Connector/J build process.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-j-reference-configuration-properties"></a>20.4.4.1. Driver/Datasource Class Names, URL Syntax and Configuration Properties
        for Connector/J</h4></div></div></div><p>
        The name of the class that implements java.sql.Driver in MySQL
        Connector/J is <code class="literal">com.mysql.jdbc.Driver</code>. The
        <code class="literal">org.gjt.mm.mysql.Driver</code> class name is also
        usable to remain backward-compatible with MM.MySQL. You should
        use this class name when registering the driver, or when
        otherwise configuring software to use MySQL Connector/J.
      </p><p>
        The JDBC URL format for MySQL Connector/J is as follows, with
        items in square brackets ([, ]) being optional:
      </p><pre class="programlisting">jdbc:mysql://[host][,failoverhost...][:port]/[database] »
[?propertyName1][=propertyValue1][&amp;propertyName2][=propertyValue2]...</pre><p>
        If the host name is not specified, it defaults to 127.0.0.1. If
        the port is not specified, it defaults to 3306, the default port
        number for MySQL servers.
      </p><pre class="programlisting">jdbc:mysql://[host:port],[host:port].../[database] »
[?propertyName1][=propertyValue1][&amp;propertyName2][=propertyValue2]...</pre><p>
        If the database is not specified, the connection will be made
        with no default database. In this case, you will need to either
        call the <code class="function">setCatalog()</code> method on the
        Connection instance or fully-specify table names using the
        database name (i.e. <code class="literal">SELECT dbname.tablename.colname
        FROM dbname.tablename...</code>) in your SQL. Not specifying
        the database to use upon connection is generally only useful
        when building tools that work with multiple databases, such as
        GUI database managers.
      </p><p>
        MySQL Connector/J has fail-over support. This allows the driver
        to fail-over to any number of slave hosts and still perform
        read-only queries. Fail-over only happens when the connection is
        in an <code class="function">autoCommit(true)</code> state, because
        fail-over can not happen reliably when a transaction is in
        progress. Most application servers and connection pools set
        <code class="literal">autoCommit</code> to <code class="literal">true</code> at the
        end of every transaction/connection use.
      </p><p>
        The fail-over functionality has the following behavior:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            If the URL property <span class="property">autoReconnect</span> is
            false: Failover only happens at connection initialization,
            and failback occurs when the driver determines that the
            first host has become available again.
          </p></li><li><p>
            If the URL property <span class="property">autoReconnect</span> is
            true: Failover happens when the driver determines that the
            connection has failed (before <span class="emphasis"><em>every</em></span>
            query), and falls back to the first host when it determines
            that the host has become available again (after
            <code class="literal">queriesBeforeRetryMaster</code> queries have
            been issued).
          </p></li></ul></div><p>
        In either case, whenever you are connected to a "failed-over"
        server, the connection will be set to read-only state, so
        queries that would modify data will have exceptions thrown (the
        query will <span class="bold"><strong>never</strong></span> be processed
        by the MySQL server).
      </p><p>
        Configuration properties define how Connector/J will make a
        connection to a MySQL server. Unless otherwise noted, properties
        can be set for a DataSource object or for a Connection object.
      </p><p>
        Configuration Properties can be set in one of the following
        ways:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Using the set*() methods on MySQL implementations of
            java.sql.DataSource (which is the preferred method when
            using implementations of java.sql.DataSource):
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                com.mysql.jdbc.jdbc2.optional.MysqlDataSource
              </p></li><li><p>
                com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource
              </p></li></ul></div></li><li><p>
            As a key/value pair in the java.util.Properties instance
            passed to <code class="literal">DriverManager.getConnection()</code>
            or <code class="literal">Driver.connect()</code>
          </p></li><li><p>
            As a JDBC URL parameter in the URL given to
            <code class="literal">java.sql.DriverManager.getConnection()</code>,
            <code class="literal">java.sql.Driver.connect()</code> or the MySQL
            implementations of the
            <code class="literal">javax.sql.DataSource</code>
            <code class="function">setURL()</code> method.
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
              If the mechanism you use to configure a JDBC URL is
              XML-based, you will need to use the XML character literal
              &amp;amp; to separate configuration parameters, as the
              ampersand is a reserved character for XML.
            </p></div></li></ul></div><p>
        The properties are listed in the following tables.
      </p><p><b>Connection/Authentication. </b>
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong> Property Name </strong></span></td><td><span class="bold"><strong> Definition </strong></span></td><td><span class="bold"><strong> Default Value </strong></span></td><td><span class="bold"><strong> Since Version </strong></span></td></tr><tr><td>user</td><td>The user to connect as</td><td> </td><td>all versions</td></tr><tr><td>password</td><td>The password to use when connecting</td><td> </td><td>all versions</td></tr><tr><td>socketFactory</td><td>The name of the class that the driver should use for creating socket
                connections to the server. This class must implement the
                interface 'com.mysql.jdbc.SocketFactory' and have public
                no-args constructor.</td><td>com.mysql.jdbc.StandardSocketFactory</td><td>3.0.3</td></tr><tr><td>connectTimeout</td><td>Timeout for socket connect (in milliseconds), with 0 being no timeout.
                Only works on JDK-1.4 or newer. Defaults to '0'.</td><td>0</td><td>3.0.1</td></tr><tr><td>socketTimeout</td><td>Timeout on network socket operations (0, the default means no timeout).</td><td>0</td><td>3.0.1</td></tr><tr><td>connectionLifecycleInterceptors</td><td>A comma-delimited list of classes that implement
                "com.mysql.jdbc.ConnectionLifecycleInterceptor" that
                should notified of connection lifecycle events
                (creation, destruction, commit, rollback, setCatalog and
                setAutoCommit) and potentially alter the execution of
                these commands. ConnectionLifecycleInterceptors are
                "stackable", more than one interceptor may be specified
                via the configuration property as a comma-delimited
                list, with the interceptors executed in order from left
                to right.</td><td> </td><td>5.1.4</td></tr><tr><td>useConfigs</td><td>Load the comma-delimited list of configuration properties before parsing
                the URL or applying user-specified properties. These
                configurations are explained in the 'Configurations' of
                the documentation.</td><td> </td><td>3.1.5</td></tr><tr><td>interactiveClient</td><td>Set the CLIENT_INTERACTIVE flag, which tells MySQL to timeout
                connections based on INTERACTIVE_TIMEOUT instead of
                WAIT_TIMEOUT</td><td>false</td><td>3.1.0</td></tr><tr><td>localSocketAddress</td><td>Host name or IP address given to explicitly configure the interface that
                the driver will bind the client side of the TCP/IP
                connection to when connecting.</td><td> </td><td>5.0.5</td></tr><tr><td>mysqlIOFactory</td><td>The name of the class which implements "com.mysql.jdbc.MysqlIO" for
                communicating with mysqld. (default is
                "com.mysql.jdbc.MysqlIOprotocol")</td><td>com.mysql.jdbc.MysqlIOprotocol</td><td>6.0.0</td></tr><tr><td>propertiesTransform</td><td>An implementation of com.mysql.jdbc.ConnectionPropertiesTransform that
                the driver will use to modify URL properties passed to
                the driver before attempting a connection</td><td> </td><td>3.1.4</td></tr><tr><td>useCompression</td><td>Use zlib compression when communicating with the server (true/false)?
                Defaults to 'false'.</td><td>false</td><td>3.0.17</td></tr></tbody></table></div><p>
    </p><p><b>Networking. </b>
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong> Property Name </strong></span></td><td><span class="bold"><strong> Definition </strong></span></td><td><span class="bold"><strong> Default Value </strong></span></td><td><span class="bold"><strong> Since Version </strong></span></td></tr><tr><td>tcpKeepAlive</td><td>If connecting using TCP/IP, should the driver set SO_KEEPALIVE?</td><td>true</td><td>5.0.7</td></tr><tr><td>tcpNoDelay</td><td>If connecting using TCP/IP, should the driver set SO_TCP_NODELAY
                (disabling the Nagle Algorithm)?</td><td>true</td><td>5.0.7</td></tr><tr><td>tcpRcvBuf</td><td>If connecting using TCP/IP, should the driver set SO_RCV_BUF to the
                given value? The default value of '0', means use the
                platform default value for this property)</td><td>0</td><td>5.0.7</td></tr><tr><td>tcpSndBuf</td><td>If connecting using TCP/IP, shuold the driver set SO_SND_BUF to the
                given value? The default value of '0', means use the
                platform default value for this property)</td><td>0</td><td>5.0.7</td></tr><tr><td>tcpTrafficClass</td><td>If connecting using TCP/IP, should the driver set traffic class or
                type-of-service fields ?See the documentation for
                java.net.Socket.setTrafficClass() for more information.</td><td>0</td><td>5.0.7</td></tr></tbody></table></div><p>
    </p><p><b>High Availability and Clustering. </b>
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong> Property Name </strong></span></td><td><span class="bold"><strong> Definition </strong></span></td><td><span class="bold"><strong> Default Value </strong></span></td><td><span class="bold"><strong> Since Version </strong></span></td></tr><tr><td>autoReconnect</td><td>Should the driver try to re-establish stale and/or dead connections? If
                enabled the driver will throw an exception for a queries
                issued on a stale or dead connection, which belong to
                the current transaction, but will attempt reconnect
                before the next query issued on the connection in a new
                transaction. The use of this feature is not recommended,
                because it has side effects related to session state and
                data consistency when applications do not handle
                SQLExceptions properly, and is only designed to be used
                when you are unable to configure your application to
                handle SQLExceptions resulting from dead and stale
                connections properly. Alternatively, investigate setting
                the MySQL server variable "wait_timeout" to some high
                value rather than the default of 8 hours.</td><td>false</td><td>1.1</td></tr><tr><td>autoReconnectForPools</td><td>Use a reconnection strategy appropriate for connection pools (defaults
                to 'false')</td><td>false</td><td>3.1.3</td></tr><tr><td>failOverReadOnly</td><td>When failing over in autoReconnect mode, should the connection be set to
                'read-only'?</td><td>true</td><td>3.0.12</td></tr><tr><td>maxReconnects</td><td>Maximum number of reconnects to attempt if autoReconnect is true,
                default is '3'.</td><td>3</td><td>1.1</td></tr><tr><td>reconnectAtTxEnd</td><td>If autoReconnect is set to true, should the driver attempt reconnections
                at the end of every transaction?</td><td>false</td><td>3.0.10</td></tr><tr><td>initialTimeout</td><td>If autoReconnect is enabled, the initial time to wait between re-connect
                attempts (in seconds, defaults to '2').</td><td>2</td><td>1.1</td></tr><tr><td>roundRobinLoadBalance</td><td>When autoReconnect is enabled, and failoverReadonly is false, should we
                pick hosts to connect to on a round-robin basis?</td><td>false</td><td>3.1.2</td></tr><tr><td>queriesBeforeRetryMaster</td><td>Number of queries to issue before falling back to master when failed
                over (when using multi-host failover). Whichever
                condition is met first, 'queriesBeforeRetryMaster' or
                'secondsBeforeRetryMaster' will cause an attempt to be
                made to reconnect to the master. Defaults to 50.</td><td>50</td><td>3.0.2</td></tr><tr><td>secondsBeforeRetryMaster</td><td>How long should the driver wait, when failed over, before attempting</td><td>30</td><td>3.0.2</td></tr><tr><td>selfDestructOnPingMaxOperations</td><td>=If set to a non-zero value, the driver will report close the connection
                and report failure when Connection.ping() or
                Connection.isValid(int) is called if the connnection's
                count of commands sent to the server exceeds this value.</td><td>0</td><td>5.1.6</td></tr><tr><td>selfDestructOnPingSecondsLifetime</td><td>If set to a non-zero value, the driver will report close the connection
                and report failure when Connection.ping() or
                Connection.isValid(int) is called if the connnection's
                lifetime exceeds this value.</td><td>0</td><td>5.1.6</td></tr><tr><td>resourceId</td><td>A globally unique name that identifies the resource that this datasource
                or connection is connected to, used for
                XAResource.isSameRM() when the driver cannot determine
                this value based on host names used in the URL</td><td> </td><td>5.0.1</td></tr></tbody></table></div><p>
    </p><p><b>Security. </b>
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong> Property Name </strong></span></td><td><span class="bold"><strong> Definition </strong></span></td><td><span class="bold"><strong> Default Value </strong></span></td><td><span class="bold"><strong> Since Version </strong></span></td></tr><tr><td>allowMultiQueries</td><td>Allow the use of ';' to delimit multiple queries during one statement
                (true/false), defaults to 'false'</td><td>false</td><td>3.1.1</td></tr><tr><td>useSSL</td><td>Use SSL when communicating with the server (true/false), defaults to
                'false'</td><td>false</td><td>3.0.2</td></tr><tr><td>requireSSL</td><td>Require SSL connection if useSSL=true? (defaults to 'false').</td><td>false</td><td>3.1.0</td></tr><tr><td>verifyServerCertificate</td><td>If "useSSL" is set to "true", should the driver verify the server's
                certificate? When using this feature, the keystore
                parameters should be specified by the
                "clientCertificateKeyStore*" properties, rather than
                system properties.</td><td>true</td><td>5.1.6</td></tr><tr><td>clientCertificateKeyStoreUrl</td><td>URL to the client certificate KeyStore (if not specified, use defaults)</td><td> </td><td>5.1.0</td></tr><tr><td>clientCertificateKeyStoreType</td><td>KeyStore type for client certificates (NULL or empty means use default,
                standard keystore types supported by the JVM are "JKS"
                and "PKCS12", your environment may have more available
                depending on what security products are installed and
                available to the JVM.</td><td> </td><td>5.1.0</td></tr><tr><td>clientCertificateKeyStorePassword</td><td>Password for the client certificates KeyStore</td><td> </td><td>5.1.0</td></tr><tr><td>trustCertificateKeyStoreUrl</td><td>URL to the trusted root certificate KeyStore (if not specified, use
                defaults)</td><td> </td><td>5.1.0</td></tr><tr><td>trustCertificateKeyStoreType</td><td>KeyStore type for trusted root certificates (NULL or empty means use
                default, standard keystore types supported by the JVM
                are "JKS" and "PKCS12", your environment may have more
                available depending on what security products are
                installed and available to the JVM.</td><td> </td><td>5.1.0</td></tr><tr><td>trustCertificateKeyStorePassword</td><td>Password for the trusted root certificates KeyStore</td><td> </td><td>5.1.0</td></tr><tr><td>allowLoadLocalInfile</td><td>Should the driver allow use of 'LOAD DATA LOCAL INFILE...' (defaults to
                'true').</td><td>true</td><td>3.0.3</td></tr><tr><td>allowUrlInLocalInfile</td><td>Should the driver allow URLs in 'LOAD DATA LOCAL INFILE' statements?</td><td>false</td><td>3.1.4</td></tr><tr><td>paranoid</td><td>Take measures to prevent exposure sensitive information in error
                messages and clear data structures holding sensitive
                data when possible? (defaults to 'false')</td><td>false</td><td>3.0.1</td></tr></tbody></table></div><p>
    </p><p><b>Performance Extensions. </b>
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong> Property Name </strong></span></td><td><span class="bold"><strong> Definition </strong></span></td><td><span class="bold"><strong> Default Value </strong></span></td><td><span class="bold"><strong> Since Version </strong></span></td></tr><tr><td>callableStmtCacheSize</td><td>If 'cacheCallableStmts' is enabled, how many callable statements should
                be cached?</td><td>100</td><td>3.1.2</td></tr><tr><td>metadataCacheSize</td><td>The number of queries to cache ResultSetMetadata for if
                cacheResultSetMetaData is set to 'true' (default 50)</td><td>50</td><td>3.1.1</td></tr><tr><td>prepStmtCacheSize</td><td>If prepared statement caching is enabled, how many prepared statements
                should be cached?</td><td>25</td><td>3.0.10</td></tr><tr><td>prepStmtCacheSqlLimit</td><td>If prepared statement caching is enabled, what is the largest SQL the
                driver will cache the parsing for?</td><td>256</td><td>3.0.10</td></tr><tr><td>alwaysSendSetIsolation</td><td>Should the driver always communicate with the database when
                Connection.setTransactionIsolation() is called? If set
                to false, the driver will only communicate with the
                database when the requested transaction isolation is
                different than the whichever is newer, the last value
                that was set via Connection.setTransactionIsolation(),
                or the value that was read from the server when the
                connection was established.</td><td>true</td><td>3.1.7</td></tr><tr><td>maintainTimeStats</td><td>Should the driver maintain various internal timers to enable idle time
                calculations as well as more verbose error messages when
                the connection to the server fails? Setting this
                property to false removes at least two calls to
                System.getCurrentTimeMillis() per query.</td><td>true</td><td>3.1.9</td></tr><tr><td>useCursorFetch</td><td>If connected to MySQL &gt; 5.0.2, and setFetchSize() &gt; 0 on a
                statement, should that statement use cursor-based
                fetching to retrieve rows?</td><td>false</td><td>5.0.0</td></tr><tr><td>blobSendChunkSize</td><td>Chunk to use when sending BLOB/CLOBs via ServerPreparedStatements</td><td>1048576</td><td>3.1.9</td></tr><tr><td>cacheCallableStmts</td><td>Should the driver cache the parsing stage of CallableStatements</td><td>false</td><td>3.1.2</td></tr><tr><td>cachePrepStmts</td><td>Should the driver cache the parsing stage of PreparedStatements of
                client-side prepared statements, the "check" for
                suitability of server-side prepared and server-side
                prepared statements themselves?</td><td>false</td><td>3.0.10</td></tr><tr><td>cacheResultSetMetadata</td><td>Should the driver cache ResultSetMetaData for Statements and
                PreparedStatements? (Req. JDK-1.4+, true/false, default
                'false')</td><td>false</td><td>3.1.1</td></tr><tr><td>cacheServerConfiguration</td><td>Should the driver cache the results of 'SHOW VARIABLES' and 'SHOW
                COLLATION' on a per-URL basis?</td><td>false</td><td>3.1.5</td></tr><tr><td>defaultFetchSize</td><td>The driver will call setFetchSize(n) with this value on all
                newly-created Statements</td><td>0</td><td>3.1.9</td></tr><tr><td>dontTrackOpenResources</td><td>The JDBC specification requires the driver to automatically track and
                close resources, however if your application doesn't do
                a good job of explicitly calling close() on statements
                or result sets, this can cause memory leakage. Setting
                this property to true relaxes this constraint, and can
                be more memory efficient for some applications.</td><td>false</td><td>3.1.7</td></tr><tr><td>dynamicCalendars</td><td>Should the driver retrieve the default calendar when required, or cache
                it per connection/session?</td><td>false</td><td>3.1.5</td></tr><tr><td>elideSetAutoCommits</td><td>If using MySQL-4.1 or newer, should the driver only issue 'set
                autocommit=n' queries when the server's state doesn't
                match the requested state by
                Connection.setAutoCommit(boolean)?</td><td>false</td><td>3.1.3</td></tr><tr><td>enableQueryTimeouts</td><td>When enabled, query timeouts set via Statement.setQueryTimeout() use a
                shared java.util.Timer instance for scheduling. Even if
                the timeout doesn't expire before the query is
                processed, there will be memory used by the TimerTask
                for the given timeout which will not be reclaimed until
                the time the timeout would have expired if it hadn't
                been cancelled by the driver. High-load environments
                might want to consider disabling this functionality.</td><td>true</td><td>5.0.6</td></tr><tr><td>holdResultsOpenOverStatementClose</td><td>Should the driver close result sets on Statement.close() as required by
                the JDBC specification?</td><td>false</td><td>3.1.7</td></tr><tr><td>largeRowSizeThreshold</td><td>What size result set row should the JDBC driver consider "large", and
                thus use a more memory-efficient way of representing the
                row internally?</td><td>2048</td><td>5.1.1</td></tr><tr><td>loadBalanceStrategy</td><td>If using a load-balanced connection to connect to SQL nodes in a MySQL
                Cluster/NDB configuration (by using the URL prefix
                "jdbc:mysql:loadbalance://"), which load balancing
                algorithm should the driver use: (1) "random" - the
                driver will pick a random host for each request. This
                tends to work better than round-robin, as the randomness
                will somewhat account for spreading loads where requests
                vary in response time, while round-robin can sometimes
                lead to overloaded nodes if there are variations in
                response times across the workload. (2)
                "bestResponseTime" - the driver will route the request
                to the host that had the best response time for the
                previous transaction.</td><td>random</td><td>5.0.6</td></tr><tr><td>locatorFetchBufferSize</td><td>If 'emulateLocators' is configured to 'true', what size buffer should be
                used when fetching BLOB data for getBinaryInputStream?</td><td>1048576</td><td>3.2.1</td></tr><tr><td>rewriteBatchedStatements</td><td>Should the driver use multiqueries (irregardless of the setting of
                "allowMultiQueries") as well as rewriting of prepared
                statements for INSERT into multi-value inserts when
                executeBatch() is called? Notice that this has the
                potential for SQL injection if using plain
                java.sql.Statements and your code doesn't sanitize input
                correctly. Notice that for prepared statements,
                server-side prepared statements can not currently take
                advantage of this rewrite option, and that if you do not
                specify stream lengths when using
                PreparedStatement.set*Stream(), the driver will not be
                able to determine the optimum number of parameters per
                batch and you might receive an error from the driver
                that the resultant packet is too large.
                Statement.getGeneratedKeys() for these rewritten
                statements only works when the entire batch includes
                INSERT statements.</td><td>false</td><td>3.1.13</td></tr><tr><td>useDirectRowUnpack</td><td>Use newer result set row unpacking code that skips a copy from network
                buffers to a MySQL packet instance and instead reads
                directly into the result set row data buffers.</td><td>true</td><td>5.1.1</td></tr><tr><td>useDynamicCharsetInfo</td><td>Should the driver use a per-connection cache of character set
                information queried from the server when necessary, or
                use a built-in static mapping that is more efficient,
                but isn't aware of custom character sets or character
                sets implemented after the release of the JDBC driver?</td><td>true</td><td>5.0.6</td></tr><tr><td>useFastDateParsing</td><td>Use internal String-&gt;Date/Time/Timestamp conversion routines to avoid
                excessive object creation?</td><td>true</td><td>5.0.5</td></tr><tr><td>useFastIntParsing</td><td>Use internal String-&gt;Integer conversion routines to avoid excessive
                object creation?</td><td>true</td><td>3.1.4</td></tr><tr><td>useJvmCharsetConverters</td><td>Always use the character encoding routines built into the JVM, rather
                than using lookup tables for single-byte character sets?</td><td>false</td><td>5.0.1</td></tr><tr><td>useLocalSessionState</td><td>Should the driver refer to the internal values of autocommit and
                transaction isolation that are set by
                Connection.setAutoCommit() and
                Connection.setTransactionIsolation() and transaction
                state as maintained by the protocol, rather than
                querying the database or blindly sending commands to the
                database for commit() or rollback() method calls?</td><td>false</td><td>3.1.7</td></tr><tr><td>useReadAheadInput</td><td>Use newer, optimized non-blocking, buffered input stream when reading
                from the server?</td><td>true</td><td>3.1.5</td></tr></tbody></table></div><p>
    </p><p><b>Debugging/Profiling. </b>
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong> Property Name </strong></span></td><td><span class="bold"><strong> Definition </strong></span></td><td><span class="bold"><strong> Default Value </strong></span></td><td><span class="bold"><strong> Since Version </strong></span></td></tr><tr><td>logger</td><td>The name of a class that implements "com.mysql.jdbc.log.Log" that will
                be used to log messages to. (default is
                "com.mysql.jdbc.log.StandardLogger", which logs to
                STDERR)</td><td>com.mysql.jdbc.log.StandardLogger</td><td>3.1.1</td></tr><tr><td>gatherPerfMetrics</td><td>Should the driver gather performance metrics, and report them via the
                configured logger every 'reportMetricsIntervalMillis'
                milliseconds?</td><td>false</td><td>3.1.2</td></tr><tr><td>profileSQL</td><td>Trace queries and their execution/fetch times to the configured logger
                (true/false) defaults to 'false'</td><td>false</td><td>3.1.0</td></tr><tr><td>profileSql</td><td>Deprecated, use 'profileSQL' instead. Trace queries and their
                execution/fetch times on STDERR (true/false) defaults to
                'false'</td><td> </td><td>2.0.14</td></tr><tr><td>reportMetricsIntervalMillis</td><td>If 'gatherPerfMetrics' is enabled, how often should they be logged (in
                ms)?</td><td>30000</td><td>3.1.2</td></tr><tr><td>maxQuerySizeToLog</td><td>Controls the maximum length/size of a query that will get logged when
                profiling or tracing</td><td>2048</td><td>3.1.3</td></tr><tr><td>packetDebugBufferSize</td><td>The maximum number of packets to retain when 'enablePacketDebug' is true</td><td>20</td><td>3.1.3</td></tr><tr><td>slowQueryThresholdMillis</td><td>If 'logSlowQueries' is enabled, how long should a query (in ms) before
                it is logged as 'slow'?</td><td>2000</td><td>3.1.2</td></tr><tr><td>slowQueryThresholdNanos</td><td>If 'useNanosForElapsedTime' is set to true, and this property is set to
                a non-zero value, the driver will use this threshold (in
                nanosecond units) to determine if a query was slow.</td><td>0</td><td>5.0.7</td></tr><tr><td>useUsageAdvisor</td><td>Should the driver issue 'usage' warnings advising proper and efficient
                usage of JDBC and MySQL Connector/J to the log
                (true/false, defaults to 'false')?</td><td>false</td><td>3.1.1</td></tr><tr><td>autoGenerateTestcaseScript</td><td>Should the driver dump the SQL it is executing, including server-side
                prepared statements to STDERR?</td><td>false</td><td>3.1.9</td></tr><tr><td>autoSlowLog</td><td>Instead of using slowQueryThreshold* to determine if a query is slow
                enough to be logged, maintain statistics that allow the
                driver to determine queries that are outside the 99th
                percentile?</td><td>true</td><td>5.1.4</td></tr><tr><td>clientInfoProvider</td><td>The name of a class that implements the
                com.mysql.jdbc.JDBC4ClientInfoProvider interface in
                order to support JDBC-4.0's
                Connection.get/setClientInfo() methods</td><td>com.mysql.jdbc.JDBC4CommentClientInfoProvider</td><td>5.1.0</td></tr><tr><td>dumpMetadataOnColumnNotFound</td><td>Should the driver dump the field-level metadata of a result set into the
                exception message when ResultSet.findColumn() fails?</td><td>false</td><td>3.1.13</td></tr><tr><td>dumpQueriesOnException</td><td>Should the driver dump the contents of the query sent to the server in
                the message for SQLExceptions?</td><td>false</td><td>3.1.3</td></tr><tr><td>enablePacketDebug</td><td>When enabled, a ring-buffer of 'packetDebugBufferSize' packets will be
                kept, and dumped when exceptions are thrown in key areas
                in the driver's code</td><td>false</td><td>3.1.3</td></tr><tr><td>explainSlowQueries</td><td>If 'logSlowQueries' is enabled, should the driver automatically issue an
                'EXPLAIN' on the server and send the results to the
                configured log at a WARN level?</td><td>false</td><td>3.1.2</td></tr><tr><td>includeInnodbStatusInDeadlockExceptions</td><td>Include the output of "SHOW ENGINE INNODB STATUS" in exception messages
                when deadlock exceptions are detected?</td><td>false</td><td>5.0.7</td></tr><tr><td>logSlowQueries</td><td>Should queries that take longer than 'slowQueryThresholdMillis' be
                logged?</td><td>false</td><td>3.1.2</td></tr><tr><td>logXaCommands</td><td>Should the driver log XA commands sent by MysqlXaConnection to the
                server, at the DEBUG level of logging?</td><td>false</td><td>5.0.5</td></tr><tr><td>profilerEventHandler</td><td>Name of a class that implements the interface
                com.mysql.jdbc.profiler.ProfilerEventHandler that will
                be used to handle profiling/tracing events.</td><td>com.mysql.jdbc.profiler.LoggingProfilerEventHandler</td><td>5.1.6</td></tr><tr><td>resultSetSizeThreshold</td><td>If the usage advisor is enabled, how many rows should a result set
                contain before the driver warns that it is suspiciously
                large?</td><td>100</td><td>5.0.5</td></tr><tr><td>traceProtocol</td><td>Should trace-level network protocol be logged?</td><td>false</td><td>3.1.2</td></tr><tr><td>useNanosForElapsedTime</td><td>For profiling/debugging functionality that measures elapsed time, should
                the driver try to use nanoseconds resolution if
                available (JDK &gt;= 1.5)?</td><td>false</td><td>5.0.7</td></tr></tbody></table></div><p>
    </p><p><b>Miscellaneous. </b>
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong> Property Name </strong></span></td><td><span class="bold"><strong> Definition </strong></span></td><td><span class="bold"><strong> Default Value </strong></span></td><td><span class="bold"><strong> Since Version </strong></span></td></tr><tr><td>useUnicode</td><td>Should the driver use Unicode character encodings when handling strings?
                Should only be used when the driver cannot determine the
                character set mapping, or you are trying to 'force' the
                driver to use a character set that MySQL either doesn't
                natively support (such as UTF-8), true/false, defaults
                to 'true'</td><td>true</td><td>1.1g</td></tr><tr><td>characterEncoding</td><td>If 'useUnicode' is set to true, what character encoding should the
                driver use when dealing with strings? (defaults is to
                'autodetect')</td><td> </td><td>1.1g</td></tr><tr><td>characterSetResults</td><td>Character set to tell the server to return results as.</td><td> </td><td>3.0.13</td></tr><tr><td>connectionCollation</td><td>If set, tells the server to use this collation via 'set
                collation_connection'</td><td> </td><td>3.0.13</td></tr><tr><td>useBlobToStoreUTF8OutsideBMP</td><td>Tells the driver to treat [MEDIUM/LONG]BLOB columns as [LONG]VARCHAR
                columns holding text encoded in UTF-8 that has
                characters outside the BMP (4-byte encodings), which
                MySQL server cannot handle natively.</td><td>false</td><td>5.1.3</td></tr><tr><td>utf8OutsideBmpExcludedColumnNamePattern</td><td>When "useBlobToStoreUTF8OutsideBMP" is set to "true", column names
                matching the given regex will still be treated as BLOBs
                unless they match the regex specified for
                "utf8OutsideBmpIncludedColumnNamePattern". The regex
                must follow the patterns used for the java.util.regex
                package.</td><td> </td><td>5.1.3</td></tr><tr><td>utf8OutsideBmpIncludedColumnNamePattern</td><td>Used to specify exclusion rules to
                "utf8OutsideBmpExcludedColumnNamePattern". The regex
                must follow the patterns used for the java.util.regex
                package.</td><td> </td><td>5.1.3</td></tr><tr><td>sessionVariables</td><td>A comma-separated list of name/value pairs to be sent as SET SESSION ...
                to the server when the driver connects.</td><td> </td><td>3.1.8</td></tr><tr><td>allowNanAndInf</td><td>Should the driver allow NaN or +/- INF values in
                PreparedStatement.setDouble()?</td><td>false</td><td>3.1.5</td></tr><tr><td>autoClosePStmtStreams</td><td>Should the driver automatically call .close() on streams/readers passed
                as arguments via set*() methods?</td><td>false</td><td>3.1.12</td></tr><tr><td>autoDeserialize</td><td>Should the driver automatically detect and de-serialize objects stored
                in BLOB fields?</td><td>false</td><td>3.1.5</td></tr><tr><td>blobsAreStrings</td><td>Should the driver always treat BLOBs as Strings - specifically to work
                around dubious metadata returned by the server for GROUP
                BY clauses?</td><td>false</td><td>5.0.8</td></tr><tr><td>capitalizeTypeNames</td><td>Capitalize type names in DatabaseMetaData? (usually only useful when
                using WebObjects, true/false, defaults to 'false')</td><td>true</td><td>2.0.7</td></tr><tr><td>clobCharacterEncoding</td><td>The character encoding to use for sending and retrieving TEXT,
                MEDIUMTEXT and LONGTEXT values instead of the configured
                connection characterEncoding</td><td> </td><td>5.0.0</td></tr><tr><td>clobberStreamingResults</td><td>This will cause a 'streaming' ResultSet to be automatically closed, and
                any outstanding data still streaming from the server to
                be discarded if another query is executed before all the
                data has been read from the server.</td><td>false</td><td>3.0.9</td></tr><tr><td>continueBatchOnError</td><td>Should the driver continue processing batch commands if one statement
                fails. The JDBC spec allows either way (defaults to
                'true').</td><td>true</td><td>3.0.3</td></tr><tr><td>createDatabaseIfNotExist</td><td>Creates the database given in the URL if it doesn't yet exist. Assumes
                the configured user has permissions to create databases.</td><td>false</td><td>3.1.9</td></tr><tr><td>emptyStringsConvertToZero</td><td>Should the driver allow conversions from empty string fields to numeric
                values of '0'?</td><td>true</td><td>3.1.8</td></tr><tr><td>emulateLocators</td><td>Should the driver emulate java.sql.Blobs with locators? With this
                feature enabled, the driver will delay loading the
                actual Blob data until the one of the retrieval methods
                (getInputStream(), getBytes(), and so forth) on the blob
                data stream has been accessed. For this to work, you
                must use a column alias with the value of the column to
                the actual name of the Blob. The feature also has the
                following restrictions: The SELECT that created the
                result set must reference only one table, the table must
                have a primary key; the SELECT must alias the original
                blob column name, specified as a string, to an alternate
                name; the SELECT must cover all columns that make up the
                primary key.</td><td>false</td><td>3.1.0</td></tr><tr><td>emulateUnsupportedPstmts</td><td>Should the driver detect prepared statements that are not supported by
                the server, and replace them with client-side emulated
                versions?</td><td>true</td><td>3.1.7</td></tr><tr><td>functionsNeverReturnBlobs</td><td>Should the driver always treat data from functions returning BLOBs as
                Strings - specifically to work around dubious metadata
                returned by the server for GROUP BY clauses?</td><td>false</td><td>5.0.8</td></tr><tr><td>generateSimpleParameterMetadata</td><td>Should the driver generate simplified parameter metadata for
                PreparedStatements when no metadata is available either
                because the server couldn't support preparing the
                statement, or server-side prepared statements are
                disabled?</td><td>false</td><td>5.0.5</td></tr><tr><td>ignoreNonTxTables</td><td>Ignore non-transactional table warning for rollback? (defaults to
                'false').</td><td>false</td><td>3.0.9</td></tr><tr><td>jdbcCompliantTruncation</td><td>Should the driver throw java.sql.DataTruncation exceptions when data is
                truncated as is required by the JDBC specification when
                connected to a server that supports warnings (MySQL
                4.1.0 and newer)? This property has no effect if the
                server sql-mode includes STRICT_TRANS_TABLES.</td><td>true</td><td>3.1.2</td></tr><tr><td>maxRows</td><td>The maximum number of rows to return (0, the default means return all
                rows).</td><td>-1</td><td>all versions</td></tr><tr><td>netTimeoutForStreamingResults</td><td>What value should the driver automatically set the server setting
                'net_write_timeout' to when the streaming result sets
                feature is in use? (value has unit of seconds, the value
                '0' means the driver will not try and adjust this value)</td><td>600</td><td>5.1.0</td></tr><tr><td>noAccessToProcedureBodies</td><td>When determining procedure parameter types for CallableStatements, and
                the connected user cannot access procedure bodies
                through "SHOW CREATE PROCEDURE" or select on mysql.proc
                should the driver instead create basic metadata (all
                parameters reported as IN VARCHARs, but allowing
                registerOutParameter() to be called on them anyway)
                instead of throwing an exception?</td><td>false</td><td>5.0.3</td></tr><tr><td>noDatetimeStringSync</td><td>Do not ensure that
                ResultSet.getDatetimeType().toString().equals(ResultSet.getString())</td><td>false</td><td>3.1.7</td></tr><tr><td>noTimezoneConversionForTimeType</td><td>Do not convert TIME values using the server timezone if
                'useTimezone'='true'</td><td>false</td><td>5.0.0</td></tr><tr><td>nullCatalogMeansCurrent</td><td>When DatabaseMetadataMethods ask for a 'catalog' parameter, does the
                value null mean use the current catalog? (this is not
                JDBC-compliant, but follows legacy behavior from earlier
                versions of the driver)</td><td>true</td><td>3.1.8</td></tr><tr><td>nullNamePatternMatchesAll</td><td>Should DatabaseMetaData methods that accept *pattern parameters treat
                null the same as '%' (this is not JDBC-compliant,
                however older versions of the driver accepted this
                departure from the specification)</td><td>true</td><td>3.1.8</td></tr><tr><td>overrideSupportsIntegrityEnhancementFacility</td><td>Should the driver return "true" for
                DatabaseMetaData.supportsIntegrityEnhancementFacility()
                even if the database doesn't support it to workaround
                applications that require this method to return "true"
                to signal support of foreign keys, even though the SQL
                specification states that this facility contains much
                more than just foreign key support (one such application
                being OpenOffice)?</td><td>false</td><td>3.1.12</td></tr><tr><td>padCharsWithSpace</td><td>If a result set column has the CHAR type and the value does not fill the
                amount of characters specified in the DDL for the
                column, should the driver pad the remaining characters
                with space (for ANSI compliance)?</td><td>false</td><td>5.0.6</td></tr><tr><td>pedantic</td><td>Follow the JDBC spec to the letter.</td><td>false</td><td>3.0.0</td></tr><tr><td>pinGlobalTxToPhysicalConnection</td><td>When using XAConnections, should the driver ensure that operations on a
                given XID are always routed to the same physical
                connection? This allows the XAConnection to support "XA
                START ... JOIN" after "XA END" has been called</td><td>false</td><td>5.0.1</td></tr><tr><td>populateInsertRowWithDefaultValues</td><td>When using ResultSets that are CONCUR_UPDATABLE, should the driver
                pre-populate the "insert" row with default values from
                the DDL for the table used in the query so those values
                are immediately available for ResultSet accessors? This
                functionality requires a call to the database for
                metadata each time a result set of this type is created.
                If disabled (the default), the default values will be
                populated by the an internal call to refreshRow() which
                pulls back default values and/or values changed by
                triggers.</td><td>false</td><td>5.0.5</td></tr><tr><td>processEscapeCodesForPrepStmts</td><td>Should the driver process escape codes in queries that are prepared?</td><td>true</td><td>3.1.12</td></tr><tr><td>relaxAutoCommit</td><td>If the version of MySQL the driver connects to does not support
                transactions, still allow calls to commit(), rollback()
                and setAutoCommit() (true/false, defaults to 'false')?</td><td>false</td><td>2.0.13</td></tr><tr><td>retainStatementAfterResultSetClose</td><td>Should the driver retain the Statement reference in a ResultSet after
                ResultSet.close() has been called. This is not
                JDBC-compliant after JDBC-4.0.</td><td>false</td><td>3.1.11</td></tr><tr><td>rollbackOnPooledClose</td><td>Should the driver issue a rollback() when the logical connection in a
                pool is closed?</td><td>true</td><td>3.0.15</td></tr><tr><td>runningCTS13</td><td>Enables workarounds for bugs in Sun's JDBC compliance testsuite version
                1.3</td><td>false</td><td>3.1.7</td></tr><tr><td>serverTimezone</td><td>Override detection/mapping of timezone. Used when timezone from server
                doesn't map to Java timezone</td><td> </td><td>3.0.2</td></tr><tr><td>statementInterceptors</td><td>A comma-delimited list of classes that implement
                "com.mysql.jdbc.StatementInterceptor" that should be
                placed "in between" query execution to influence the
                results. StatementInterceptors are "chainable", the
                results returned by the "current" interceptor will be
                passed on to the next in in the chain, from
                left-to-right order, as specified in this property.</td><td> </td><td>5.1.1</td></tr><tr><td>strictFloatingPoint</td><td>Used only in older versions of compliance test</td><td>false</td><td>3.0.0</td></tr><tr><td>strictUpdates</td><td>Should the driver do strict checking (all primary keys selected) of
                updatable result sets (true, false, defaults to 'true')?</td><td>true</td><td>3.0.4</td></tr><tr><td>tinyInt1isBit</td><td>Should the driver treat the datatype TINYINT(1) as the BIT type (because
                the server silently converts BIT -&gt; TINYINT(1) when
                creating tables)?</td><td>true</td><td>3.0.16</td></tr><tr><td>transformedBitIsBoolean</td><td>If the driver converts TINYINT(1) to a different type, should it use
                BOOLEAN instead of BIT for future compatibility with
                MySQL-5.0, as MySQL-5.0 has a BIT type?</td><td>false</td><td>3.1.9</td></tr><tr><td>treatUtilDateAsTimestamp</td><td>Should the driver treat java.util.Date as a TIMESTAMP for the purposes
                of PreparedStatement.setObject()?</td><td>true</td><td>5.0.5</td></tr><tr><td>ultraDevHack</td><td>Create PreparedStatements for prepareCall() when required, because
                UltraDev is broken and issues a prepareCall() for _all_
                statements? (true/false, defaults to 'false')</td><td>false</td><td>2.0.3</td></tr><tr><td>useGmtMillisForDatetimes</td><td>Convert between session timezone and GMT before creating Date and
                Timestamp instances (value of "false" is legacy
                behavior, "true" leads to more JDBC-compliant behavior.</td><td>false</td><td>3.1.12</td></tr><tr><td>useHostsInPrivileges</td><td>Add '@hostname' to users in DatabaseMetaData.getColumn/TablePrivileges()
                (true/false), defaults to 'true'.</td><td>true</td><td>3.0.2</td></tr><tr><td>useInformationSchema</td><td>When connected to MySQL-5.0.7 or newer, should the driver use the
                INFORMATION_SCHEMA to derive information used by
                DatabaseMetaData?</td><td>false</td><td>5.0.0</td></tr><tr><td>useJDBCCompliantTimezoneShift</td><td>Should the driver use JDBC-compliant rules when converting
                TIME/TIMESTAMP/DATETIME values' timezone information for
                those JDBC arguments which take a java.util.Calendar
                argument? (Notice that this option is exclusive of the
                "useTimezone=true" configuration option.)</td><td>false</td><td>5.0.0</td></tr><tr><td>useLegacyDatetimeCode</td><td>Use code for DATE/TIME/DATETIME/TIMESTAMP handling in result sets and
                statements that consistently handles timezone
                conversions from client to server and back again, or use
                the legacy code for these datatypes that has been in the
                driver for backwards-compatibility?</td><td>true</td><td>5.1.6</td></tr><tr><td>useOldAliasMetadataBehavior</td><td>Should the driver use the legacy behavior for "AS" clauses on columns
                and tables, and only return aliases (if any) for
                ResultSetMetaData.getColumnName() or
                ResultSetMetaData.getTableName() rather than the
                original column/table name? In 5.0.x, the default value
                was true.</td><td>false</td><td>5.0.4</td></tr><tr><td>useOldUTF8Behavior</td><td>Use the UTF-8 behavior the driver did when communicating with 4.0 and
                older servers</td><td>false</td><td>3.1.6</td></tr><tr><td>useOnlyServerErrorMessages</td><td>Do not prepend 'standard' SQLState error messages to error messages
                returned by the server.</td><td>true</td><td>3.0.15</td></tr><tr><td>useSSPSCompatibleTimezoneShift</td><td>If migrating from an environment that was using server-side prepared
                statements, and the configuration property
                "useJDBCCompliantTimeZoneShift" set to "true", use
                compatible behavior when not using server-side prepared
                statements when sending TIMESTAMP values to the MySQL
                server.</td><td>false</td><td>5.0.5</td></tr><tr><td>useServerPrepStmts</td><td>Use server-side prepared statements if the server supports them?</td><td>false</td><td>3.1.0</td></tr><tr><td>useSqlStateCodes</td><td>Use SQL Standard state codes instead of 'legacy' X/Open/SQL state codes
                (true/false), default is 'true'</td><td>true</td><td>3.1.3</td></tr><tr><td>useStreamLengthsInPrepStmts</td><td>Honor stream length parameter in
                PreparedStatement/ResultSet.setXXXStream() method calls
                (true/false, defaults to 'true')?</td><td>true</td><td>3.0.2</td></tr><tr><td>useTimezone</td><td>Convert time/date types between client and server timezones (true/false,
                defaults to 'false')?</td><td>false</td><td>3.0.2</td></tr><tr><td>useUnbufferedInput</td><td>Do not use BufferedInputStream for reading data from the server</td><td>true</td><td>3.0.11</td></tr><tr><td>yearIsDateType</td><td>Should the JDBC driver treat the MySQL type "YEAR" as a java.sql.Date,
                or as a SHORT?</td><td>true</td><td>3.1.9</td></tr><tr><td>zeroDateTimeBehavior</td><td>What should happen when the driver encounters DATETIME values that are
                composed entirely of zeroes (used by MySQL to represent
                invalid dates)? Valid values are "exception", "round"
                and "convertToNull".</td><td>exception</td><td>3.1.4</td></tr></tbody></table></div><p>
    </p><p>
        Connector/J also supports access to MySQL via named pipes on
        Windows NT/2000/XP using the
        <span class="property">NamedPipeSocketFactory</span> as a plugin-socket
        factory via the <span class="property">socketFactory</span> property. If
        you do not use a <span class="property">namedPipePath</span> property,
        the default of '\\.\pipe\MySQL' will be used. If you use the
        <code class="literal">NamedPipeSocketFactory</code>, the host name and
        port number values in the JDBC url will be ignored. You can
        enable this feature using:
      </p><pre class="programlisting">socketFactory=com.mysql.jdbc.NamedPipeSocketFactory
        </pre><p>
        Named pipes only work when connecting to a MySQL server on the
        same physical machine as the one the JDBC driver is being used
        on. In simple performance tests, it appears that named pipe
        access is between 30%-50% faster than the standard TCP/IP
        access. However, this varies per system, and named pipes are
        slower than TCP/IP in many Windows configurations.
      </p><p>
        You can create your own socket factories by following the
        example code in
        <code class="classname">com.mysql.jdbc.NamedPipeSocketFactory</code>, or
        <code class="classname">com.mysql.jdbc.StandardSocketFactory</code>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-j-reference-implementation-notes"></a>20.4.4.2. JDBC API Implementation Notes</h4></div></div></div><p>
        MySQL Connector/J passes all of the tests in the
        publicly-available version of Sun's JDBC compliance test suite.
        However, in many places the JDBC specification is vague about
        how certain functionality should be implemented, or the
        specification allows leeway in implementation.
      </p><p>
        This section gives details on a interface-by-interface level
        about how certain implementation decisions may affect how you
        use MySQL Connector/J.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <span class="bold"><strong>Blob</strong></span>
          </p><p>
            Starting with Connector/J version 3.1.0, you can emulate
            Blobs with locators by adding the property
            'emulateLocators=true' to your JDBC URL. Using this method,
            the driver will delay loading the actual Blob data until you
            retrieve the other data and then use retrieval methods
            (<code class="function">getInputStream()</code>,
            <code class="function">getBytes()</code>, and so forth) on the blob
            data stream.
          </p><p>
            For this to work, you must use a column alias with the value
            of the column to the actual name of the Blob, for example:
          </p><pre class="programlisting">SELECT id, 'data' as blob_data from blobtable</pre><p>
            For this to work, you must also follow these rules:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                The <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> must also
                reference only one table, the table must have a primary
                key.
              </p></li><li><p>
                The <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> must alias the
                original blob column name, specified as a string, to an
                alternate name.
              </p></li><li><p>
                The <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> must cover all
                columns that make up the primary key.
              </p></li></ul></div><p>
            The Blob implementation does not allow in-place modification
            (they are copies, as reported by the
            <code class="literal">DatabaseMetaData.locatorsUpdateCopies()</code>
            method). Because of this, you should use the corresponding
            <code class="literal">PreparedStatement.setBlob()</code> or
            <code class="literal">ResultSet.updateBlob()</code> (in the case of
            updatable result sets) methods to save changes back to the
            database.
          </p><p class="mnmas-kb"><b>MySQL Enterprise</b>
              MySQL Enterprise subscribers will find more information
              about type conversion in the Knowledge Base article,
              <a href="https://kb.mysql.com/view.php?id=4929" target="_top"> Type
              Conversions Supported by MySQL Connector/J</a>. To
              subscribe to MySQL Enterprise see
              <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
            </p></li><li><p>
            <span class="bold"><strong>CallableStatement</strong></span>
          </p><p>
            Starting with Connector/J 3.1.1, stored procedures are
            supported when connecting to MySQL version 5.0 or newer via
            the <code class="classname">CallableStatement</code> interface.
            Currently, the <code class="function">getParameterMetaData()</code>
            method of <code class="classname">CallableStatement</code> is not
            supported.
          </p></li><li><p>
            <span class="bold"><strong>Clob</strong></span>
          </p><p>
            The Clob implementation does not allow in-place modification
            (they are copies, as reported by the
            <code class="literal">DatabaseMetaData.locatorsUpdateCopies()</code>
            method). Because of this, you should use the
            <code class="literal">PreparedStatement.setClob()</code> method to
            save changes back to the database. The JDBC API does not
            have a <code class="literal">ResultSet.updateClob()</code> method.
          </p></li><li><p>
            <span class="bold"><strong>Connection</strong></span>
          </p><p>
            Unlike older versions of MM.MySQL the
            <code class="function">isClosed()</code> method does not ping the
            server to determine if it is alive. In accordance with the
            JDBC specification, it only returns true if
            <code class="function">closed()</code> has been called on the
            connection. If you need to determine if the connection is
            still valid, you should issue a simple query, such as
            <code class="literal">SELECT 1</code>. The driver will throw an
            exception if the connection is no longer valid.
          </p></li><li><p>
            <span class="bold"><strong>DatabaseMetaData</strong></span>
          </p><p>
            Foreign Key information
            (<code class="function">getImportedKeys()</code>/<code class="function">getExportedKeys()</code>
            and <code class="function">getCrossReference()</code>) is only
            available from InnoDB tables. However, the driver uses
            <a href="sql-syntax.html#show-create-table" title="12.5.6.12. SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a> to retrieve
            this information, so when other storage engines support
            foreign keys, the driver will transparently support them as
            well.
          </p></li><li><p>
            <span class="bold"><strong>PreparedStatement</strong></span>
          </p><p>
            PreparedStatements are implemented by the driver, as MySQL
            does not have a prepared statement feature. Because of this,
            the driver does not implement
            <code class="function">getParameterMetaData()</code> or
            <code class="function">getMetaData()</code> as it would require the
            driver to have a complete SQL parser in the client.
          </p><p>
            Starting with version 3.1.0 MySQL Connector/J, server-side
            prepared statements and binary-encoded result sets are used
            when the server supports them.
          </p><p>
            Take care when using a server-side prepared statement with
            <span class="bold"><strong>large</strong></span> parameters that are
            set via <code class="function">setBinaryStream()</code>,
            <code class="function">setAsciiStream()</code>,
            <code class="function">setUnicodeStream()</code>,
            <code class="function">setBlob()</code>, or
            <code class="function">setClob()</code>. If you want to re-execute
            the statement with any large parameter changed to a
            non-large parameter, it is necessary to call
            <code class="function">clearParameters()</code> and set all
            parameters again. The reason for this is as follows:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                During both server-side prepared statements and
                client-side emulation, large data is exchanged only when
                <code class="literal">PreparedStatement.execute()</code> is
                called.
              </p></li></ul></div><div class="itemizedlist"><ul type="circle"><li><p>
                Once that has been done, the stream used to read the
                data on the client side is closed (as per the JDBC
                spec), and cannot be read from again.
              </p></li></ul></div><div class="itemizedlist"><ul type="circle"><li><p>
                If a parameter changes from large to non-large, the
                driver must reset the server-side state of the prepared
                statement to allow the parameter that is being changed
                to take the place of the prior large value. This removes
                all of the large data that has already been sent to the
                server, thus requiring the data to be re-sent, via the
                <code class="function">setBinaryStream()</code>,
                <code class="function">setAsciiStream()</code>,
                <code class="function">setUnicodeStream()</code>,
                <code class="function">setBlob()</code> or
                <code class="function">setClob()</code> methods.
              </p></li></ul></div><p>
            Consequently, if you want to change the type of a parameter
            to a non-large one, you must call
            <code class="function">clearParameters()</code> and set all
            parameters of the prepared statement again before it can be
            re-executed.
          </p></li><li><p>
            <span class="bold"><strong>ResultSet</strong></span>
          </p><p>
            By default, ResultSets are completely retrieved and stored
            in memory. In most cases this is the most efficient way to
            operate, and due to the design of the MySQL network protocol
            is easier to implement. If you are working with ResultSets
            that have a large number of rows or large values, and can
            not allocate heap space in your JVM for the memory required,
            you can tell the driver to stream the results back one row
            at a time.
          </p><p>
            To enable this functionality, you need to create a Statement
            instance in the following manner:
          </p><pre class="programlisting">stmt = conn.createStatement(java.sql.ResultSet.TYPE_FORWARD_ONLY,
              java.sql.ResultSet.CONCUR_READ_ONLY);
stmt.setFetchSize(Integer.MIN_VALUE);</pre><p>
            The combination of a forward-only, read-only result set,
            with a fetch size of <code class="literal">Integer.MIN_VALUE</code>
            serves as a signal to the driver to stream result sets
            row-by-row. After this any result sets created with the
            statement will be retrieved row-by-row.
          </p><p>
            There are some caveats with this approach. You will have to
            read all of the rows in the result set (or close it) before
            you can issue any other queries on the connection, or an
            exception will be thrown.
          </p><p>
            The earliest the locks these statements hold can be released
            (whether they be <code class="literal">MyISAM</code> table-level locks
            or row-level locks in some other storage engine such as
            <code class="literal">InnoDB</code>) is when the statement completes.
          </p><p>
            If the statement is within scope of a transaction, then
            locks are released when the transaction completes (which
            implies that the statement needs to complete first). As with
            most other databases, statements are not complete until all
            the results pending on the statement are read or the active
            result set for the statement is closed.
          </p><p>
            Therefore, if using streaming results, you should process
            them as quickly as possible if you want to maintain
            concurrent access to the tables referenced by the statement
            producing the result set.
          </p></li><li><p>
            <span class="bold"><strong>ResultSetMetaData</strong></span>
          </p><p>
            The <code class="function">isAutoIncrement()</code> method only works
            when using MySQL servers 4.0 and newer.
          </p></li><li><p>
            <span class="bold"><strong>Statement</strong></span>
          </p><p>
            When using versions of the JDBC driver earlier than 3.2.1,
            and connected to server versions earlier than 5.0.3, the
            <code class="function">setFetchSize()</code> method has no effect,
            other than to toggle result set streaming as described
            above.
          </p><p>
            Connector/J 5.0.0 and later include support for both
            <code class="literal">Statement.cancel()</code> and
            <code class="literal">Statement.setQueryTimeout()</code>. Both require
            MySQL 5.0.0 or newer server, and require a separate
            connection to issue the
            <a href="sql-syntax.html#kill" title="12.5.7.4. KILL Syntax"><code class="literal">KILL QUERY</code></a>
            statement. In the case of
            <code class="function">setQueryTimeout()</code>, the implementation
            creates an additional thread to handle the timeout
            functionality.
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
              Failures to cancel the statement for
              <code class="function">setQueryTimeout()</code> may manifest
              themselves as <code class="literal">RuntimeException</code> rather
              than failing silently, as there is currently no way to
              unblock the thread that is executing the query being
              cancelled due to timeout expiration and have it throw the
              exception instead.
            </p></div><p>
            MySQL does not support SQL cursors, and the JDBC driver
            doesn't emulate them, so "setCursorName()" has no effect.
          </p><p>
            Connector/J 5.1.3 and later include two additional methods:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                <code class="function">setLocalInfileInputStream()</code> sets an
                <code class="literal">InputStream</code> instance that will be
                used to send data to the MySQL server for a
                <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
                LOCAL INFILE</code></a> statement rather than a
                <code class="literal">FileInputStream</code> or
                <code class="literal">URLInputStream</code> that represents the
                path given as an argument to the statement.
              </p><p>
                This stream will be read to completion upon execution of
                a <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
                LOCAL INFILE</code></a> statement, and will automatically
                be closed by the driver, so it needs to be reset before
                each call to <code class="literal">execute*()</code> that would
                cause the MySQL server to request data to fulfill the
                request for
                <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
                LOCAL INFILE</code></a>.
              </p><p>
                If this value is set to <code class="literal">NULL</code>, the
                driver will revert to using a
                <code class="literal">FileInputStream</code> or
                <code class="literal">URLInputStream</code> as required.
              </p></li><li><p>
                <code class="function">getLocalInfileInputStream()</code> returns
                the <code class="literal">InputStream</code> instance that will be
                used to send data in response to a
                <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
                LOCAL INFILE</code></a> statement.
              </p><p>
                This method returns <code class="literal">NULL</code> if no such
                stream has been set via
                <code class="function">setLocalInfileInputStream()</code>.
              </p></li></ul></div></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-j-reference-type-conversions"></a>20.4.4.3. Java, JDBC and MySQL Types</h4></div></div></div><p>
        MySQL Connector/J is flexible in the way it handles conversions
        between MySQL data types and Java data types.
      </p><p>
        In general, any MySQL data type can be converted to a
        java.lang.String, and any numerical type can be converted to any
        of the Java numerical types, although round-off, overflow, or
        loss of precision may occur.
      </p><p>
        Starting with Connector/J 3.1.0, the JDBC driver will issue
        warnings or throw DataTruncation exceptions as is required by
        the JDBC specification unless the connection was configured not
        to do so by using the property
        <span class="property">jdbcCompliantTruncation</span> and setting it to
        <code class="literal">false</code>.
      </p><p>
        The conversions that are always guaranteed to work are listed in
        the following table:
      </p><p><b>Connection Properties - Miscellaneous. </b>
          </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>These MySQL Data Types</strong></span></td><td><span class="bold"><strong>Can always be converted to these Java
                    types</strong></span></td></tr><tr><td><code class="literal">CHAR, VARCHAR, BLOB, TEXT, ENUM, and SET</code></td><td><code class="literal">java.lang.String, java.io.InputStream, java.io.Reader,
                    java.sql.Blob, java.sql.Clob</code></td></tr><tr><td><code class="literal">FLOAT, REAL, DOUBLE PRECISION, NUMERIC, DECIMAL, TINYINT,
                    SMALLINT, MEDIUMINT, INTEGER, BIGINT</code></td><td><code class="literal">java.lang.String, java.lang.Short, java.lang.Integer,
                    java.lang.Long, java.lang.Double,
                    java.math.BigDecimal</code></td></tr><tr><td><code class="literal">DATE, TIME, DATETIME, TIMESTAMP</code></td><td><code class="literal">java.lang.String, java.sql.Date, java.sql.Timestamp</code></td></tr></tbody></table></div><p>
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Round-off, overflow or loss of precision may occur if you
          choose a Java numeric data type that has less precision or
          capacity than the MySQL data type you are converting to/from.
        </p></div><p>
        The <code class="classname">ResultSet.getObject()</code> method uses the
        type conversions between MySQL and Java types, following the
        JDBC specification where appropriate. The value returned by
        <code class="classname">ResultSetMetaData.GetColumnClassName()</code> is
        also shown below. For more information on the
        <code class="literal">java.sql.Types</code> classes see
        <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/sql/Types.html" target="_top">Java
        2 Platform Types</a>.
      </p><p><b>MySQL Types to Java Types for ResultSet.getObject(). </b>
          </p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>MySQL Type Name</strong></span></td><td><span class="bold"><strong>Return value of
                    <code class="literal">GetColumnClassName</code></strong></span></td><td><span class="bold"><strong>Returned as Java Class</strong></span></td></tr><tr><td><span class="type">BIT(1)</span> (new in MySQL-5.0)</td><td><span class="type">BIT</span></td><td><code class="classname">java.lang.Boolean</code></td></tr><tr><td><span class="type">BIT( &gt; 1)</span> (new in MySQL-5.0)</td><td><span class="type">BIT</span></td><td><code class="classname">byte[]</code></td></tr><tr><td><span class="type">TINYINT</span></td><td><span class="type">TINYINT</span></td><td><code class="classname">java.lang.Boolean</code> if the configuration property
                    <code class="literal">tinyInt1isBit</code> is set to
                    <code class="literal">true</code> (the default) and the
                    storage size is 1, or
                    <code class="classname">java.lang.Integer</code> if not.</td></tr><tr><td><span class="type">BOOL</span>, <span class="type">BOOLEAN</span></td><td><span class="type">TINYINT</span></td><td>See <span class="type">TINYINT</span>, above as these are aliases for
                    <span class="type">TINYINT(1)</span>, currently.</td></tr><tr><td><span class="type">SMALLINT[(M)] [UNSIGNED]</span></td><td><span class="type">SMALLINT [UNSIGNED]</span></td><td><code class="classname">java.lang.Integer</code> (regardless if UNSIGNED or not)</td></tr><tr><td><span class="type">MEDIUMINT[(M)] [UNSIGNED]</span></td><td><span class="type">MEDIUMINT [UNSIGNED]</span></td><td><code class="classname">java.lang.Integer,</code> if UNSIGNED
                    <code class="classname">java.lang.Long</code> (C/J 3.1 and
                    earlier), or
                    <code class="classname">java.lang.Integer</code> for C/J 5.0
                    and later</td></tr><tr><td><span class="type">INT,INTEGER[(M)] [UNSIGNED]</span></td><td><span class="type">INTEGER [UNSIGNED]</span></td><td><code class="classname">java.lang.Integer</code>, if UNSIGNED
                    <code class="classname">java.lang.Long</code></td></tr><tr><td><span class="type">BIGINT[(M)] [UNSIGNED]</span></td><td><span class="type">BIGINT [UNSIGNED]</span></td><td><code class="classname">java.lang.Long</code>, if UNSIGNED
                    <code class="classname">java.math.BigInteger</code></td></tr><tr><td><span class="type">FLOAT[(M,D)]</span></td><td><span class="type">FLOAT</span></td><td><code class="classname">java.lang.Float</code></td></tr><tr><td><span class="type">DOUBLE[(M,B)]</span></td><td><span class="type">DOUBLE</span></td><td><code class="classname">java.lang.Double</code></td></tr><tr><td><span class="type">DECIMAL[(M[,D])]</span></td><td><span class="type">DECIMAL</span></td><td><code class="classname">java.math.BigDecimal</code></td></tr><tr><td><span class="type">DATE</span></td><td><span class="type">DATE</span></td><td><code class="classname">java.sql.Date</code></td></tr><tr><td><span class="type">DATETIME</span></td><td><span class="type">DATETIME</span></td><td><code class="classname">java.sql.Timestamp</code></td></tr><tr><td><span class="type">TIMESTAMP[(M)]</span></td><td><span class="type">TIMESTAMP</span></td><td><code class="classname">java.sql.Timestamp</code></td></tr><tr><td><span class="type">TIME</span></td><td><span class="type">TIME</span></td><td><code class="classname">java.sql.Time</code></td></tr><tr><td><span class="type">YEAR[(2|4)]</span></td><td><span class="type">YEAR</span></td><td>If <code class="literal">yearIsDateType</code> configuration property is set to
                    false, then the returned object type is
                    <code class="classname">java.sql.Short</code>. If set to
                    true (the default) then an object of type
                    <code class="classname">java.sql.Date</code> (with the date
                    set to January 1st, at midnight).</td></tr><tr><td><span class="type">CHAR(M)</span></td><td><span class="type">CHAR</span></td><td><code class="classname">java.lang.String</code> (unless the character set for
                    the column is <span class="type">BINARY</span>, then
                    <code class="classname">byte[]</code> is returned.</td></tr><tr><td><span class="type">VARCHAR(M) [BINARY]</span></td><td><span class="type">VARCHAR</span></td><td><code class="classname">java.lang.String</code> (unless the character set for
                    the column is <span class="type">BINARY</span>, then
                    <code class="classname">byte[]</code> is returned.</td></tr><tr><td><span class="type">BINARY(M)</span></td><td><span class="type">BINARY</span></td><td><code class="classname">byte[]</code></td></tr><tr><td><span class="type">VARBINARY(M)</span></td><td><span class="type">VARBINARY</span></td><td><code class="classname">byte[]</code></td></tr><tr><td><span class="type">TINYBLOB</span></td><td><span class="type">TINYBLOB</span></td><td><code class="classname">byte[]</code></td></tr><tr><td><span class="type">TINYTEXT</span></td><td><span class="type">VARCHAR</span></td><td><code class="classname">java.lang.String</code></td></tr><tr><td><span class="type">BLOB</span></td><td><span class="type">BLOB</span></td><td><code class="classname">byte[]</code></td></tr><tr><td><span class="type">TEXT</span></td><td><span class="type">VARCHAR</span></td><td><code class="classname">java.lang.String</code></td></tr><tr><td><span class="type">MEDIUMBLOB</span></td><td><span class="type">MEDIUMBLOB</span></td><td><code class="classname">byte[]</code></td></tr><tr><td><span class="type">MEDIUMTEXT</span></td><td><span class="type">VARCHAR</span></td><td><code class="classname">java.lang.String</code></td></tr><tr><td><span class="type">LONGBLOB</span></td><td><span class="type">LONGBLOB</span></td><td><code class="classname">byte[]</code></td></tr><tr><td><span class="type">LONGTEXT</span></td><td><span class="type">VARCHAR</span></td><td><code class="classname">java.lang.String</code></td></tr><tr><td><span class="type">ENUM('value1','value2',...)</span></td><td><span class="type">CHAR</span></td><td><code class="classname">java.lang.String</code></td></tr><tr><td><span class="type">SET('value1','value2',...)</span></td><td><span class="type">CHAR</span></td><td><code class="classname">java.lang.String</code></td></tr></tbody></table></div><p>
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-j-reference-charsets"></a>20.4.4.4. Using Character Sets and Unicode</h4></div></div></div><p>
        All strings sent from the JDBC driver to the server are
        converted automatically from native Java Unicode form to the
        client character encoding, including all queries sent via
        <code class="literal">Statement.execute()</code>,
        <code class="literal">Statement.executeUpdate()</code>,
        <code class="literal">Statement.executeQuery()</code> as well as all

        <code class="interfacename">PreparedStatement</code>

        and

        <code class="interfacename">CallableStatement</code>

        parameters with the exclusion of parameters set using
        <code class="function">setBytes()</code>,
        <code class="function">setBinaryStream()</code>,
        <code class="function">setAsciiStream()</code>,
        <code class="function">setUnicodeStream()</code> and
        <code class="function">setBlob()</code>.
      </p><p>
        Prior to MySQL Server 4.1, Connector/J supported a single
        character encoding per connection, which could either be
        automatically detected from the server configuration, or could
        be configured by the user through the
        <em class="parameter"><code>useUnicode</code></em> and
        <em class="parameter"><code>characterEncoding</code></em> properties.
      </p><p>
        Starting with MySQL Server 4.1, Connector/J supports a single
        character encoding between client and server, and any number of
        character encodings for data returned by the server to the
        client in <code class="classname">ResultSets</code>.
      </p><p>
        The character encoding between client and server is
        automatically detected upon connection. The encoding used by the
        driver is specified on the server via the
        <a href="http://dev.mysql.com/doc/refman/4.1/en/server-system-variables.html#sysvar_character_set" target="_top"><code class="literal">character_set</code></a> system variable
        for server versions older than 4.1.0 and
        <a href="server-administration.html#sysvar_character_set_server"><code class="literal">character_set_server</code></a> for server
        versions 4.1.0 and newer. For more information, see
        <a href="internationalization-localization.html#charset-server" title="9.1.3.1. Server Character Set and Collation">Section 9.1.3.1, “Server Character Set and Collation”</a>.
      </p><p>
        To override the automatically-detected encoding on the client
        side, use the <em class="parameter"><code>characterEncoding</code></em> property
        in the URL used to connect to the server.
      </p><p>
        When specifying character encodings on the client side,
        Java-style names should be used. The following table lists
        Java-style names for MySQL character sets:
      </p><p><b>MySQL to Java Encoding Name Translations. </b>
          </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>MySQL Character Set Name</strong></span></td><td><span class="bold"><strong>Java-Style Character Encoding Name</strong></span></td></tr><tr><td>ascii</td><td>US-ASCII</td></tr><tr><td>big5</td><td>Big5</td></tr><tr><td>gbk</td><td>GBK</td></tr><tr><td>sjis</td><td>SJIS (or Cp932 or MS932 for MySQL Server &lt; 4.1.11)</td></tr><tr><td>cp932</td><td>Cp932 or MS932 (MySQL Server &gt; 4.1.11)</td></tr><tr><td>gb2312</td><td>EUC_CN</td></tr><tr><td>ujis</td><td>EUC_JP</td></tr><tr><td>euckr</td><td>EUC_KR</td></tr><tr><td>latin1</td><td>ISO8859_1</td></tr><tr><td>latin2</td><td>ISO8859_2</td></tr><tr><td>greek</td><td>ISO8859_7</td></tr><tr><td>hebrew</td><td>ISO8859_8</td></tr><tr><td>cp866</td><td>Cp866</td></tr><tr><td>tis620</td><td>TIS620</td></tr><tr><td>cp1250</td><td>Cp1250</td></tr><tr><td>cp1251</td><td>Cp1251</td></tr><tr><td>cp1257</td><td>Cp1257</td></tr><tr><td>macroman</td><td>MacRoman</td></tr><tr><td>macce</td><td>MacCentralEurope</td></tr><tr><td>utf8</td><td>UTF-8</td></tr><tr><td>ucs2</td><td>UnicodeBig</td></tr></tbody></table></div><p>
        </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          Do not issue the query 'set names' with Connector/J, as the
          driver will not detect that the character set has changed, and
          will continue to use the character set detected during the
          initial connection setup.
        </p></div><p>
        To allow multiple character sets to be sent from the client, the
        UTF-8 encoding should be used, either by configuring
        <code class="literal">utf8</code> as the default server character set, or
        by configuring the JDBC driver to use UTF-8 through the
        <em class="parameter"><code>characterEncoding</code></em> property.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-j-reference-using-ssl"></a>20.4.4.5. Connecting Securely Using SSL</h4></div></div></div><p>
        SSL in MySQL Connector/J encrypts all data (other than the
        initial handshake) between the JDBC driver and the server. The
        performance penalty for enabling SSL is an increase in query
        processing time between 35% and 50%, depending on the size of
        the query, and the amount of data it returns.
      </p><p>
        For SSL Support to work, you must have the following:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            A JDK that includes JSSE (Java Secure Sockets Extension),
            like JDK-1.4.1 or newer. SSL does not currently work with a
            JDK that you can add JSSE to, like JDK-1.2.x or JDK-1.3.x
            due to the following JSSE bug:
            <a href="http://developer.java.sun.com/developer/bugParade/bugs/4273544.html" target="_top">http://developer.java.sun.com/developer/bugParade/bugs/4273544.html</a>
          </p></li><li><p>
            A MySQL server that supports SSL and has been compiled and
            configured to do so, which is MySQL-4.0.4 or later, see
            <a href="server-administration.html#secure-connections" title="5.5.7. Using SSL for Secure Connections">Section 5.5.7, “Using SSL for Secure Connections”</a>, for more information.
          </p></li><li><p>
            A client certificate (covered later in this section)
          </p></li></ul></div><p>
        The system works through two Java truststore files, one file
        contains the certificate information for the server
        (<code class="filename">truststore</code> in the examples below). The
        other file contains the certificate for the client
        (<code class="filename">keystore</code> in the examples below). All Java
        truststore files are password protected by supplying a suitable
        password to the <span><strong class="command">keytool</strong></span> when you create the
        files. You need the file names and associated passwords to
        create an SSL connection.
      </p><p>
        You will first need to import the MySQL server CA Certificate
        into a Java truststore. A sample MySQL server CA Certificate is
        located in the <code class="filename">SSL</code> subdirectory of the
        MySQL source distribution. This is what SSL will use to
        determine if you are communicating with a secure MySQL server.
        Alternatively, use the CA Certificate that you have generated or
        been provided with by your SSL provider.
      </p><p>
        To use Java's <span><strong class="command">keytool</strong></span> to create a truststore
        in the current directory , and import the server's CA
        certificate (<code class="filename">cacert.pem</code>), you can do the
        following (assuming that <span><strong class="command">keytool</strong></span> is in your
        path. The <span><strong class="command">keytool</strong></span> should be located in the
        <code class="filename">bin</code> subdirectory of your JDK or JRE):
      </p><pre class="programlisting">shell&gt; keytool -import -alias mysqlServerCACert \
                                  -file cacert.pem -keystore truststore</pre><p>
        You will need to enter the password when prompted for the
        keystore file. Interaction with <span><strong class="command">keytool</strong></span> will
        look like this:
      </p><pre class="programlisting">Enter keystore password:  *********
Owner: EMAILADDRESS=walrus@example.com, CN=Walrus, 
       O=MySQL AB, L=Orenburg, ST=Some-State, C=RU
Issuer: EMAILADDRESS=walrus@example.com, CN=Walrus, 
       O=MySQL AB, L=Orenburg, ST=Some-State, C=RU
Serial number: 0
Valid from: 
   Fri Aug 02 16:55:53 CDT 2002 until: Sat Aug 02 16:55:53 CDT 2003
Certificate fingerprints:
    MD5:  61:91:A0:F2:03:07:61:7A:81:38:66:DA:19:C4:8D:AB
    SHA1: 25:77:41:05:D5:AD:99:8C:14:8C:CA:68:9C:2F:B8:89:C3:34:4D:6C
Trust this certificate? [no]:  yes
Certificate was added to keystore</pre><p>
        You then have two options, you can either import the client
        certificate that matches the CA certificate you just imported,
        or you can create a new client certificate.
      </p><p>
        To import an existing certificate, the certificate should be in
        DER format. You can use <span><strong class="command">openssl</strong></span> to convert an
        existing certificate into the new format. For example:
      </p><pre class="programlisting">shell&gt; openssl x509 -outform DER -in client-cert.pem -out client.cert
      </pre><p>
        You now need to import the converted certificate into your
        keystore using <span><strong class="command">keytool</strong></span>:
      </p><pre class="programlisting">shell&gt; keytool -import -file client.cert -keystore keystore -alias mysqlClientCertificate
</pre><p>
        To generate your own client certificate, use
        <span><strong class="command">keytool</strong></span> to create a suitable certificate and
        add it to the <code class="filename">keystore</code> file:
      </p><pre class="programlisting"> shell&gt; keytool -genkey -keyalg rsa \
     -alias mysqlClientCertificate -keystore keystore </pre><p>
        Keytool will prompt you for the following information, and
        create a keystore named <code class="filename">keystore</code> in the
        current directory.
      </p><p>
        You should respond with information that is appropriate for your
        situation:
      </p><pre class="programlisting">Enter keystore password:  *********
What is your first and last name?
  [Unknown]:  Matthews
What is the name of your organizational unit?
  [Unknown]:  Software Development
What is the name of your organization?
  [Unknown]:  MySQL AB
What is the name of your City or Locality?
  [Unknown]:  Flossmoor
What is the name of your State or Province?
  [Unknown]:  IL
What is the two-letter country code for this unit?
  [Unknown]:  US
Is &lt;CN=Matthews, OU=Software Development, O=MySQL AB,
 L=Flossmoor, ST=IL, C=US&gt; correct?
  [no]:  y

Enter key password for &lt;mysqlClientCertificate&gt;
        (RETURN if same as keystore password):</pre><p>
        Finally, to get JSSE to use the keystore and truststore that you
        have generated, you need to set the following system properties
        when you start your JVM, replacing
        <span class="property">path_to_keystore_file</span> with the full path to
        the keystore file you created,
        <span class="property">path_to_truststore_file</span> with the path to
        the truststore file you created, and using the appropriate
        password values for each property. You can do this either on the
        command line:
      </p><pre class="programlisting">-Djavax.net.ssl.keyStore=path_to_keystore_file
-Djavax.net.ssl.keyStorePassword=password
-Djavax.net.ssl.trustStore=path_to_truststore_file
-Djavax.net.ssl.trustStorePassword=password </pre><p>
        Or you can set the values directly within the application:
      </p><pre class="programlisting"> System.setProperty("javax.net.ssl.keyStore","path_to_keystore_file");
System.setProperty("javax.net.ssl.keyStorePassword","password");
System.setProperty("javax.net.ssl.trustStore","path_to_truststore_file");
System.setProperty("javax.net.ssl.trustStorePassword","password");</pre><p>
        You will also need to set <span class="property">useSSL</span> to
        <code class="literal">true</code> in your connection parameters for MySQL
        Connector/J, either by adding <code class="literal">useSSL=true</code> to
        your URL, or by setting the property <span class="property">useSSL</span>
        to <code class="literal">true</code> in the
        <code class="classname">java.util.Properties</code> instance you pass to
        <code class="literal">DriverManager.getConnection()</code>.
      </p><p>
        You can test that SSL is working by turning on JSSE debugging
        (as detailed below), and look for the following key events:
      </p><pre class="programlisting">...
*** ClientHello, v3.1
RandomCookie:  GMT: 1018531834 bytes = { 199, 148, 180, 215, 74, 12, »
  54, 244, 0, 168, 55, 103, 215, 64, 16, 138, 225, 190, 132, 153, 2, »
  217, 219, 239, 202, 19, 121, 78 }
Session ID:  {}
Cipher Suites:  { 0, 5, 0, 4, 0, 9, 0, 10, 0, 18, 0, 19, 0, 3, 0, 17 }
Compression Methods:  { 0 }
***
[write] MD5 and SHA1 hashes:  len = 59
0000: 01 00 00 37 03 01 3D B6 90 FA C7 94 B4 D7 4A 0C  ...7..=.......J.
0010: 36 F4 00 A8 37 67 D7 40 10 8A E1 BE 84 99 02 D9  6...7g.@........
0020: DB EF CA 13 79 4E 00 00 10 00 05 00 04 00 09 00  ....yN..........
0030: 0A 00 12 00 13 00 03 00 11 01 00                 ...........
main, WRITE:  SSL v3.1 Handshake, length = 59
main, READ:  SSL v3.1 Handshake, length = 74
*** ServerHello, v3.1
RandomCookie:  GMT: 1018577560 bytes = { 116, 50, 4, 103, 25, 100, 58, »
   202, 79, 185, 178, 100, 215, 66, 254, 21, 83, 187, 190, 42, 170, 3, »
   132, 110, 82, 148, 160, 92 }
Session ID:  {163, 227, 84, 53, 81, 127, 252, 254, 178, 179, 68, 63, »
   182, 158, 30, 11, 150, 79, 170, 76, 255, 92, 15, 226, 24, 17, 177, »
   219, 158, 177, 187, 143}
Cipher Suite:  { 0, 5 }
Compression Method: 0
***
%% Created:  [Session-1, SSL_RSA_WITH_RC4_128_SHA]
** SSL_RSA_WITH_RC4_128_SHA
[read] MD5 and SHA1 hashes:  len = 74
0000: 02 00 00 46 03 01 3D B6 43 98 74 32 04 67 19 64  ...F..=.C.t2.g.d
0010: 3A CA 4F B9 B2 64 D7 42 FE 15 53 BB BE 2A AA 03  :.O..d.B..S..*..
0020: 84 6E 52 94 A0 5C 20 A3 E3 54 35 51 7F FC FE B2  .nR..\ ..T5Q....
0030: B3 44 3F B6 9E 1E 0B 96 4F AA 4C FF 5C 0F E2 18  .D?.....O.L.\...
0040: 11 B1 DB 9E B1 BB 8F 00 05 00                    ..........
main, READ:  SSL v3.1 Handshake, length = 1712
...</pre><p>
        JSSE provides debugging (to STDOUT) when you set the following
        system property: <code class="literal">-Djavax.net.debug=all</code> This
        will tell you what keystores and truststores are being used, as
        well as what is going on during the SSL handshake and
        certificate exchange. It will be helpful when trying to
        determine what is not working when trying to get an SSL
        connection to happen.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-j-reference-replication-connection"></a>20.4.4.6. Using Master/Slave Replication with ReplicationConnection</h4></div></div></div><p>
        Starting with Connector/J 3.1.7, we've made available a variant
        of the driver that will automatically send queries to a
        read/write master, or a failover or round-robin loadbalanced set
        of slaves based on the state of
        <code class="literal">Connection.getReadOnly()</code> .
      </p><p>
        An application signals that it wants a transaction to be
        read-only by calling
        <code class="literal">Connection.setReadOnly(true)</code>, this
        replication-aware connection will use one of the slave
        connections, which are load-balanced per-vm using a round-robin
        scheme (a given connection is sticky to a slave unless that
        slave is removed from service). If you have a write transaction,
        or if you have a read that is time-sensitive (remember,
        replication in MySQL is asynchronous), set the connection to be
        not read-only, by calling
        <code class="literal">Connection.setReadOnly(false)</code> and the driver
        will ensure that further calls are sent to the master MySQL
        server. The driver takes care of propagating the current state
        of autocommit, isolation level, and catalog between all of the
        connections that it uses to accomplish this load balancing
        functionality.
      </p><p>
        To enable this functionality, use the "
        <code class="literal">com.mysql.jdbc.ReplicationDriver</code> " class when
        configuring your application server's connection pool or when
        creating an instance of a JDBC driver for your standalone
        application. Because it accepts the same URL format as the
        standard MySQL JDBC driver, <code class="literal">ReplicationDriver</code>
        does not currently work with
        <code class="literal">java.sql.DriverManager</code> -based connection
        creation unless it is the only MySQL JDBC driver registered with
        the <code class="literal">DriverManager</code> .
      </p><p>
        Here is a short, simple example of how ReplicationDriver might
        be used in a standalone application.
      </p><a name="connector-j-using-replication-driver-example"></a><pre class="programlisting">import java.sql.Connection;
import java.sql.ResultSet;
import java.util.Properties;

import com.mysql.jdbc.ReplicationDriver;

public class ReplicationDriverDemo {

  public static void main(String[] args) throws Exception {
    ReplicationDriver driver = new ReplicationDriver();

    Properties props = new Properties();

    // We want this for failover on the slaves
    props.put("autoReconnect", "true");

    // We want to load balance between the slaves
    props.put("roundRobinLoadBalance", "true");

    props.put("user", "foo");
    props.put("password", "bar");

    //
    // Looks like a normal MySQL JDBC url, with a
    // comma-separated list of hosts, the first 
    // being the 'master', the rest being any number
    // of slaves that the driver will load balance against
    //

    Connection conn =
        driver.connect("jdbc:mysql://master,slave1,slave2,slave3/test",
            props);

    //
    // Perform read/write work on the master
    // by setting the read-only flag to "false"
    //

    conn.setReadOnly(false);
    conn.setAutoCommit(false);
    conn.createStatement().executeUpdate("UPDATE some_table ....");
    conn.commit();

    //
    // Now, do a query from a slave, the driver automatically picks one
    // from the list
    //

    conn.setReadOnly(true);

    ResultSet rs = 
      conn.createStatement().executeQuery("SELECT a,b FROM alt_table");

     .......
  }
}
</pre><p>
        You may also want to investigate the Load Balancing JDBC Pool
        (lbpol) tool, which provides a wrapper around the standard JDBC
        driver and allows you to use DB connection pools that includes
        checks for system failures and uneven load distribution. For
        more information, see
        <a href="http://code.tailrank.com/lbpool" target="_top">Load Balancing JDBC
        Pool (lbpool)</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-j-reference-error-sqlstates"></a>20.4.4.7. Mapping MySQL Error Numbers to SQLStates</h4></div></div></div><p>
        The table below provides a mapping of the MySQL Error Numbers to
        <code class="literal">SQL States</code>
      </p><div class="table"><a name="id3653579"></a><p class="title"><b>Table 20.3. Mapping of MySQL Error Numbers to SQLStates</b></p><table summary="Mapping of MySQL Error Numbers to SQLStates" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>MySQL Error Number</th><th>MySQL Error Name</th><th>Legacy (X/Open) SQLState</th><th>SQL Standard SQLState</th></tr></thead><tbody><tr><td>1022</td><td>ER_DUP_KEY</td><td>S1000</td><td>23000</td></tr><tr><td>1037</td><td>ER_OUTOFMEMORY</td><td>S1001</td><td>HY001</td></tr><tr><td>1038</td><td>ER_OUT_OF_SORTMEMORY</td><td>S1001</td><td>HY001</td></tr><tr><td>1040</td><td>ER_CON_COUNT_ERROR</td><td>08004</td><td>08004</td></tr><tr><td>1042</td><td>ER_BAD_HOST_ERROR</td><td>08004</td><td>08S01</td></tr><tr><td>1043</td><td>ER_HANDSHAKE_ERROR</td><td>08004</td><td>08S01</td></tr><tr><td>1044</td><td>ER_DBACCESS_DENIED_ERROR</td><td>S1000</td><td>42000</td></tr><tr><td>1045</td><td>ER_ACCESS_DENIED_ERROR</td><td>28000</td><td>28000</td></tr><tr><td>1047</td><td>ER_UNKNOWN_COM_ERROR</td><td>08S01</td><td>HY000</td></tr><tr><td>1050</td><td>ER_TABLE_EXISTS_ERROR</td><td>S1000</td><td>42S01</td></tr><tr><td>1051</td><td>ER_BAD_TABLE_ERROR</td><td>42S02</td><td>42S02</td></tr><tr><td>1052</td><td>ER_NON_UNIQ_ERROR</td><td>S1000</td><td>23000</td></tr><tr><td>1053</td><td>ER_SERVER_SHUTDOWN</td><td>S1000</td><td>08S01</td></tr><tr><td>1054</td><td>ER_BAD_FIELD_ERROR</td><td>S0022</td><td>42S22</td></tr><tr><td>1055</td><td>ER_WRONG_FIELD_WITH_GROUP</td><td>S1009</td><td>42000</td></tr><tr><td>1056</td><td>ER_WRONG_GROUP_FIELD</td><td>S1009</td><td>42000</td></tr><tr><td>1057</td><td>ER_WRONG_SUM_SELECT</td><td>S1009</td><td>42000</td></tr><tr><td>1058</td><td>ER_WRONG_VALUE_COUNT</td><td>21S01</td><td>21S01</td></tr><tr><td>1059</td><td>ER_TOO_LONG_IDENT</td><td>S1009</td><td>42000</td></tr><tr><td>1060</td><td>ER_DUP_FIELDNAME</td><td>S1009</td><td>42S21</td></tr><tr><td>1061</td><td>ER_DUP_KEYNAME</td><td>S1009</td><td>42000</td></tr><tr><td>1062</td><td>ER_DUP_ENTRY</td><td>S1009</td><td>23000</td></tr><tr><td>1063</td><td>ER_WRONG_FIELD_SPEC</td><td>S1009</td><td>42000</td></tr><tr><td>1064</td><td>ER_PARSE_ERROR</td><td>42000</td><td>42000</td></tr><tr><td>1065</td><td>ER_EMPTY_QUERY</td><td>42000</td><td>42000</td></tr><tr><td>1066</td><td>ER_NONUNIQ_TABLE</td><td>S1009</td><td>42000</td></tr><tr><td>1067</td><td>ER_INVALID_DEFAULT</td><td>S1009</td><td>42000</td></tr><tr><td>1068</td><td>ER_MULTIPLE_PRI_KEY</td><td>S1009</td><td>42000</td></tr><tr><td>1069</td><td>ER_TOO_MANY_KEYS</td><td>S1009</td><td>42000</td></tr><tr><td>1070</td><td>ER_TOO_MANY_KEY_PARTS</td><td>S1009</td><td>42000</td></tr><tr><td>1071</td><td>ER_TOO_LONG_KEY</td><td>S1009</td><td>42000</td></tr><tr><td>1072</td><td>ER_KEY_COLUMN_DOES_NOT_EXITS</td><td>S1009</td><td>42000</td></tr><tr><td>1073</td><td>ER_BLOB_USED_AS_KEY</td><td>S1009</td><td>42000</td></tr><tr><td>1074</td><td>ER_TOO_BIG_FIELDLENGTH</td><td>S1009</td><td>42000</td></tr><tr><td>1075</td><td>ER_WRONG_AUTO_KEY</td><td>S1009</td><td>42000</td></tr><tr><td>1080</td><td>ER_FORCING_CLOSE</td><td>S1000</td><td>08S01</td></tr><tr><td>1081</td><td>ER_IPSOCK_ERROR</td><td>08S01</td><td>08S01</td></tr><tr><td>1082</td><td>ER_NO_SUCH_INDEX</td><td>S1009</td><td>42S12</td></tr><tr><td>1083</td><td>ER_WRONG_FIELD_TERMINATORS</td><td>S1009</td><td>42000</td></tr><tr><td>1084</td><td>ER_BLOBS_AND_NO_TERMINATED</td><td>S1009</td><td>42000</td></tr><tr><td>1090</td><td>ER_CANT_REMOVE_ALL_FIELDS</td><td>S1000</td><td>42000</td></tr><tr><td>1091</td><td>ER_CANT_DROP_FIELD_OR_KEY</td><td>S1000</td><td>42000</td></tr><tr><td>1101</td><td>ER_BLOB_CANT_HAVE_DEFAULT</td><td>S1000</td><td>42000</td></tr><tr><td>1102</td><td>ER_WRONG_DB_NAME</td><td>S1000</td><td>42000</td></tr><tr><td>1103</td><td>ER_WRONG_TABLE_NAME</td><td>S1000</td><td>42000</td></tr><tr><td>1104</td><td>ER_TOO_BIG_SELECT</td><td>S1000</td><td>42000</td></tr><tr><td>1106</td><td>ER_UNKNOWN_PROCEDURE</td><td>S1000</td><td>42000</td></tr><tr><td>1107</td><td>ER_WRONG_PARAMCOUNT_TO_PROCEDURE</td><td>S1000</td><td>42000</td></tr><tr><td>1109</td><td>ER_UNKNOWN_TABLE</td><td>S1000</td><td>42S02</td></tr><tr><td>1110</td><td>ER_FIELD_SPECIFIED_TWICE</td><td>S1000</td><td>42000</td></tr><tr><td>1112</td><td>ER_UNSUPPORTED_EXTENSION</td><td>S1000</td><td>42000</td></tr><tr><td>1113</td><td>ER_TABLE_MUST_HAVE_COLUMNS</td><td>S1000</td><td>42000</td></tr><tr><td>1115</td><td>ER_UNKNOWN_CHARACTER_SET</td><td>S1000</td><td>42000</td></tr><tr><td>1118</td><td>ER_TOO_BIG_ROWSIZE</td><td>S1000</td><td>42000</td></tr><tr><td>1120</td><td>ER_WRONG_OUTER_JOIN</td><td>S1000</td><td>42000</td></tr><tr><td>1121</td><td>ER_NULL_COLUMN_IN_INDEX</td><td>S1000</td><td>42000</td></tr><tr><td>1129</td><td>ER_HOST_IS_BLOCKED</td><td>08004</td><td>HY000</td></tr><tr><td>1130</td><td>ER_HOST_NOT_PRIVILEGED</td><td>08004</td><td>HY000</td></tr><tr><td>1131</td><td>ER_PASSWORD_ANONYMOUS_USER</td><td>S1000</td><td>42000</td></tr><tr><td>1132</td><td>ER_PASSWORD_NOT_ALLOWED</td><td>S1000</td><td>42000</td></tr><tr><td>1133</td><td>ER_PASSWORD_NO_MATCH</td><td>S1000</td><td>42000</td></tr><tr><td>1136</td><td>ER_WRONG_VALUE_COUNT_ON_ROW</td><td>S1000</td><td>21S01</td></tr><tr><td>1138</td><td>ER_INVALID_USE_OF_NULL</td><td>S1000</td><td>42000</td></tr><tr><td>1139</td><td>ER_REGEXP_ERROR</td><td>S1000</td><td>42000</td></tr><tr><td>1140</td><td>ER_MIX_OF_GROUP_FUNC_AND_FIELDS</td><td>S1000</td><td>42000</td></tr><tr><td>1141</td><td>ER_NONEXISTING_GRANT</td><td>S1000</td><td>42000</td></tr><tr><td>1142</td><td>ER_TABLEACCESS_DENIED_ERROR</td><td>S1000</td><td>42000</td></tr><tr><td>1143</td><td>ER_COLUMNACCESS_DENIED_ERROR</td><td>S1000</td><td>42000</td></tr><tr><td>1144</td><td>ER_ILLEGAL_GRANT_FOR_TABLE</td><td>S1000</td><td>42000</td></tr><tr><td>1145</td><td>ER_GRANT_WRONG_HOST_OR_USER</td><td>S1000</td><td>42000</td></tr><tr><td>1146</td><td>ER_NO_SUCH_TABLE</td><td>S1000</td><td>42S02</td></tr><tr><td>1147</td><td>ER_NONEXISTING_TABLE_GRANT</td><td>S1000</td><td>42000</td></tr><tr><td>1148</td><td>ER_NOT_ALLOWED_COMMAND</td><td>S1000</td><td>42000</td></tr><tr><td>1149</td><td>ER_SYNTAX_ERROR</td><td>S1000</td><td>42000</td></tr><tr><td>1152</td><td>ER_ABORTING_CONNECTION</td><td>S1000</td><td>08S01</td></tr><tr><td>1153</td><td>ER_NET_PACKET_TOO_LARGE</td><td>S1000</td><td>08S01</td></tr><tr><td>1154</td><td>ER_NET_READ_ERROR_FROM_PIPE</td><td>S1000</td><td>08S01</td></tr><tr><td>1155</td><td>ER_NET_FCNTL_ERROR</td><td>S1000</td><td>08S01</td></tr><tr><td>1156</td><td>ER_NET_PACKETS_OUT_OF_ORDER</td><td>S1000</td><td>08S01</td></tr><tr><td>1157</td><td>ER_NET_UNCOMPRESS_ERROR</td><td>S1000</td><td>08S01</td></tr><tr><td>1158</td><td>ER_NET_READ_ERROR</td><td>S1000</td><td>08S01</td></tr><tr><td>1159</td><td>ER_NET_READ_INTERRUPTED</td><td>S1000</td><td>08S01</td></tr><tr><td>1160</td><td>ER_NET_ERROR_ON_WRITE</td><td>S1000</td><td>08S01</td></tr><tr><td>1161</td><td>ER_NET_WRITE_INTERRUPTED</td><td>S1000</td><td>08S01</td></tr><tr><td>1162</td><td>ER_TOO_LONG_STRING</td><td>S1000</td><td>42000</td></tr><tr><td>1163</td><td>ER_TABLE_CANT_HANDLE_BLOB</td><td>S1000</td><td>42000</td></tr><tr><td>1164</td><td>ER_TABLE_CANT_HANDLE_AUTO_INCREMENT</td><td>S1000</td><td>42000</td></tr><tr><td>1166</td><td>ER_WRONG_COLUMN_NAME</td><td>S1000</td><td>42000</td></tr><tr><td>1167</td><td>ER_WRONG_KEY_COLUMN</td><td>S1000</td><td>42000</td></tr><tr><td>1169</td><td>ER_DUP_UNIQUE</td><td>S1000</td><td>23000</td></tr><tr><td>1170</td><td>ER_BLOB_KEY_WITHOUT_LENGTH</td><td>S1000</td><td>42000</td></tr><tr><td>1171</td><td>ER_PRIMARY_CANT_HAVE_NULL</td><td>S1000</td><td>42000</td></tr><tr><td>1172</td><td>ER_TOO_MANY_ROWS</td><td>S1000</td><td>42000</td></tr><tr><td>1173</td><td>ER_REQUIRES_PRIMARY_KEY</td><td>S1000</td><td>42000</td></tr><tr><td>1177</td><td>ER_CHECK_NO_SUCH_TABLE</td><td>S1000</td><td>42000</td></tr><tr><td>1178</td><td>ER_CHECK_NOT_IMPLEMENTED</td><td>S1000</td><td>42000</td></tr><tr><td>1179</td><td>ER_CANT_DO_THIS_DURING_AN_TRANSACTION</td><td>S1000</td><td>25000</td></tr><tr><td>1184</td><td>ER_NEW_ABORTING_CONNECTION</td><td>S1000</td><td>08S01</td></tr><tr><td>1189</td><td>ER_MASTER_NET_READ</td><td>S1000</td><td>08S01</td></tr><tr><td>1190</td><td>ER_MASTER_NET_WRITE</td><td>S1000</td><td>08S01</td></tr><tr><td>1203</td><td>ER_TOO_MANY_USER_CONNECTIONS</td><td>S1000</td><td>42000</td></tr><tr><td>1205</td><td>ER_LOCK_WAIT_TIMEOUT</td><td>41000</td><td>41000</td></tr><tr><td>1207</td><td>ER_READ_ONLY_TRANSACTION</td><td>S1000</td><td>25000</td></tr><tr><td>1211</td><td>ER_NO_PERMISSION_TO_CREATE_USER</td><td>S1000</td><td>42000</td></tr><tr><td>1213</td><td>ER_LOCK_DEADLOCK</td><td>41000</td><td>40001</td></tr><tr><td>1216</td><td>ER_NO_REFERENCED_ROW</td><td>S1000</td><td>23000</td></tr><tr><td>1217</td><td>ER_ROW_IS_REFERENCED</td><td>S1000</td><td>23000</td></tr><tr><td>1218</td><td>ER_CONNECT_TO_MASTER</td><td>S1000</td><td>08S01</td></tr><tr><td>1222</td><td>ER_WRONG_NUMBER_OF_COLUMNS_IN_SELECT</td><td>S1000</td><td>21000</td></tr><tr><td>1226</td><td>ER_USER_LIMIT_REACHED</td><td>S1000</td><td>42000</td></tr><tr><td>1230</td><td>ER_NO_DEFAULT</td><td>S1000</td><td>42000</td></tr><tr><td>1231</td><td>ER_WRONG_VALUE_FOR_VAR</td><td>S1000</td><td>42000</td></tr><tr><td>1232</td><td>ER_WRONG_TYPE_FOR_VAR</td><td>S1000</td><td>42000</td></tr><tr><td>1234</td><td>ER_CANT_USE_OPTION_HERE</td><td>S1000</td><td>42000</td></tr><tr><td>1235</td><td>ER_NOT_SUPPORTED_YET</td><td>S1000</td><td>42000</td></tr><tr><td>1239</td><td>ER_WRONG_FK_DEF</td><td>S1000</td><td>42000</td></tr><tr><td>1241</td><td>ER_OPERAND_COLUMNS</td><td>S1000</td><td>21000</td></tr><tr><td>1242</td><td>ER_SUBQUERY_NO_1_ROW</td><td>S1000</td><td>21000</td></tr><tr><td>1247</td><td>ER_ILLEGAL_REFERENCE</td><td>S1000</td><td>42S22</td></tr><tr><td>1248</td><td>ER_DERIVED_MUST_HAVE_ALIAS</td><td>S1000</td><td>42000</td></tr><tr><td>1249</td><td>ER_SELECT_REDUCED</td><td>S1000</td><td>01000</td></tr><tr><td>1250</td><td>ER_TABLENAME_NOT_ALLOWED_HERE</td><td>S1000</td><td>42000</td></tr><tr><td>1251</td><td>ER_NOT_SUPPORTED_AUTH_MODE</td><td>S1000</td><td>08004</td></tr><tr><td>1252</td><td>ER_SPATIAL_CANT_HAVE_NULL</td><td>S1000</td><td>42000</td></tr><tr><td>1253</td><td>ER_COLLATION_CHARSET_MISMATCH</td><td>S1000</td><td>42000</td></tr><tr><td>1261</td><td>ER_WARN_TOO_FEW_RECORDS</td><td>S1000</td><td>01000</td></tr><tr><td>1262</td><td>ER_WARN_TOO_MANY_RECORDS</td><td>S1000</td><td>01000</td></tr><tr><td>1263</td><td>ER_WARN_NULL_TO_NOTNULL</td><td>S1000</td><td>01000</td></tr><tr><td>1264</td><td>ER_WARN_DATA_OUT_OF_RANGE</td><td>S1000</td><td>01000</td></tr><tr><td>1265</td><td>ER_WARN_DATA_TRUNCATED</td><td>S1000</td><td>01000</td></tr><tr><td>1280</td><td>ER_WRONG_NAME_FOR_INDEX</td><td>S1000</td><td>42000</td></tr><tr><td>1281</td><td>ER_WRONG_NAME_FOR_CATALOG</td><td>S1000</td><td>42000</td></tr><tr><td>1286</td><td>ER_UNKNOWN_STORAGE_ENGINE</td><td>S1000</td><td>42000</td></tr></tbody></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-j-usagenotes"></a>20.4.5. Connector/J Notes and Tips</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-j-usagenotes-basic">20.4.5.1. Basic JDBC Concepts</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-usagenotes-j2ee">20.4.5.2. Using Connector/J with J2EE and Other Java Frameworks</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-usagenotes-troubleshooting">20.4.5.3. Common Problems and Solutions</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-j-usagenotes-basic"></a>20.4.5.1. Basic JDBC Concepts</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-j-usagenotes-connect-drivermanager">20.4.5.1.1. Connecting to MySQL Using the <code class="literal">DriverManager</code> Interface</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-usagenotes-statements">20.4.5.1.2. Using Statements to Execute SQL</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-usagenotes-statements-callable">20.4.5.1.3. Using <code class="literal">CallableStatements</code> to Execute Stored Procedures</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-usagenotes-last-insert-id">20.4.5.1.4. Retrieving <code class="literal">AUTO_INCREMENT</code> Column Values</a></span></dt></dl></div><p>
        This section provides some general JDBC background.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-j-usagenotes-connect-drivermanager"></a>20.4.5.1.1. Connecting to MySQL Using the <code class="literal">DriverManager</code> Interface</h5></div></div></div><p>
          When you are using JDBC outside of an application server, the
          <code class="literal">DriverManager</code> class manages the
          establishment of Connections.
        </p><p>
          The <code class="literal">DriverManager</code> needs to be told which
          JDBC drivers it should try to make Connections with. The
          easiest way to do this is to use
          <code class="literal">Class.forName()</code> on the class that
          implements the <code class="literal">java.sql.Driver</code> interface.
          With MySQL Connector/J, the name of this class is
          <code class="literal">com.mysql.jdbc.Driver</code>. With this method,
          you could use an external configuration file to supply the
          driver class name and driver parameters to use when connecting
          to a database.
        </p><p>
          The following section of Java code shows how you might
          register MySQL Connector/J from the
          <code class="function">main()</code> method of your application:
        </p><pre class="programlisting">import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

// Notice, do not import com.mysql.jdbc.*
// or you will have problems!

public class LoadDriver {
    public static void main(String[] args) {
        try {
            // The newInstance() call is a work around for some
            // broken Java implementations

            Class.forName("com.mysql.jdbc.Driver").newInstance();
        } catch (Exception ex) {
            // handle the error
        }
    }    
}</pre><p>
          After the driver has been registered with the
          <code class="literal">DriverManager</code>, you can obtain a
          <code class="literal">Connection</code> instance that is connected to a
          particular database by calling
          <code class="literal">DriverManager.getConnection()</code>:
        </p><div class="example"><a name="connector-j-examples-connection-drivermanager"></a><p class="title"><b>Example 20.1. Connector/J: Obtaining a connection from the
            <code class="literal">DriverManager</code></b></p><p>
            This example shows how you can obtain a
            <code class="literal">Connection</code> instance from the
            <code class="literal">DriverManager</code>. There are a few different
            signatures for the <code class="function">getConnection()</code>
            method. You should see the API documentation that comes with
            your JDK for more specific information on how to use them.
          </p><pre class="programlisting">import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

Connection conn = null;
...
try {
    conn = 
       DriverManager.getConnection("jdbc:mysql://localhost/test?" + 
                                   "user=monty&amp;password=greatsqldb");

    // Do something with the Connection

   ...
} catch (SQLException ex) {
    // handle any errors
    System.out.println("SQLException: " + ex.getMessage());
    System.out.println("SQLState: " + ex.getSQLState());
    System.out.println("VendorError: " + ex.getErrorCode());
}
</pre><p>
            Once a <code class="classname">Connection</code> is established, it
            can be used to create <code class="classname">Statement</code> and
            <code class="classname">PreparedStatement</code> objects, as well as
            retrieve metadata about the database. This is explained in
            the following sections.
          </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-j-usagenotes-statements"></a>20.4.5.1.2. Using Statements to Execute SQL</h5></div></div></div><p>
          <code class="classname">Statement</code> objects allow you to execute
          basic SQL queries and retrieve the results through the
          <code class="literal">ResultSet</code> class which is described later.
        </p><p>
          To create a <code class="classname">Statement</code> instance, you
          call the <code class="function">createStatement()</code> method on the
          <code class="literal">Connection</code> object you have retrieved via
          one of the <code class="literal">DriverManager.getConnection()</code> or
          <code class="literal">DataSource.getConnection()</code> methods
          described earlier.
        </p><p>
          Once you have a <code class="classname">Statement</code> instance, you
          can execute a <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> query by
          calling the <code class="function">executeQuery(String)</code> method
          with the SQL you want to use.
        </p><p>
          To update data in the database, use the
          <code class="function">executeUpdate(String SQL)</code> method. This
          method returns the number of rows affected by the update
          statement.
        </p><p>
          If you do not know ahead of time whether the SQL statement
          will be a <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> or an
          <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a>/<a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>,
          then you can use the <code class="function">execute(String SQL)</code>
          method. This method will return true if the SQL query was a
          <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>, or false if it was an
          <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a>,
          <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>, or
          <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statement. If the
          statement was a <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> query,
          you can retrieve the results by calling the
          <code class="function">getResultSet()</code> method. If the statement
          was an <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a>,
          <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>, or
          <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statement, you can
          retrieve the affected rows count by calling
          <code class="function">getUpdateCount()</code> on the
          <code class="classname">Statement</code> instance.
        </p><div class="example"><a name="connector-j-examples-execute-select"></a><p class="title"><b>Example 20.2. Connector/J: Using java.sql.Statement to execute a
            <code class="literal">SELECT</code> query</b></p><pre class="programlisting">
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;
import java.sql.ResultSet;

// assume that conn is an already created JDBC connection (see previous examples)

Statement stmt = null;
ResultSet rs = null;

try {
    stmt = conn.createStatement();
    rs = stmt.executeQuery("SELECT foo FROM bar");

    // or alternatively, if you don't know ahead of time that
    // the query will be a SELECT...

    if (stmt.execute("SELECT foo FROM bar")) {
        rs = stmt.getResultSet();
    }

    // Now do something with the ResultSet ....
}
catch (SQLException ex){
    // handle any errors
    System.out.println("SQLException: " + ex.getMessage());
    System.out.println("SQLState: " + ex.getSQLState());
    System.out.println("VendorError: " + ex.getErrorCode());
}
finally {
    // it is a good idea to release
    // resources in a finally{} block
    // in reverse-order of their creation
    // if they are no-longer needed

    if (rs != null) {
        try {
            rs.close();
        } catch (SQLException sqlEx) { } // ignore 

        rs = null;
    }

    if (stmt != null) {
        try {
            stmt.close();
        } catch (SQLException sqlEx) { } // ignore

        stmt = null;
    }
}</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-j-usagenotes-statements-callable"></a>20.4.5.1.3. Using <code class="literal">CallableStatements</code> to Execute Stored Procedures</h5></div></div></div><p>
          Starting with MySQL server version 5.0 when used with
          Connector/J 3.1.1 or newer, the
          <code class="classname">java.sql.CallableStatement</code> interface is
          fully implemented with the exception of the
          <code class="function">getParameterMetaData()</code> method.
        </p><p>
          For more information on MySQL stored procedures, please refer
          to
          <a href="http://dev.mysql.com/doc/mysql/en/stored-routines.html" target="_top">http://dev.mysql.com/doc/mysql/en/stored-routines.html</a>.
        </p><p>
          Connector/J exposes stored procedure functionality through
          JDBC's <code class="classname">CallableStatement</code> interface.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            Current versions of MySQL server do not return enough
            information for the JDBC driver to provide result set
            metadata for callable statements. This means that when using
            <code class="literal">CallableStatement</code>,
            <code class="literal">ResultSetMetaData</code> may return
            <code class="literal">NULL</code>.
          </p></div><p>
          The following example shows a stored procedure that returns
          the value of <code class="varname">inOutParam</code> incremented by 1,
          and the string passed in via <code class="varname">inputParam</code> as
          a <code class="classname">ResultSet</code>:

          </p><div class="example"><a name="connector-j-examples-stored-procedure"></a><p class="title"><b>Example 20.3. Connector/J: Calling Stored Procedures</b></p><pre class="programlisting">CREATE PROCEDURE demoSp(IN inputParam VARCHAR(255), \ 
                                        INOUT inOutParam INT)
BEGIN
    DECLARE z INT;
    SET z = inOutParam + 1;
    SET inOutParam = z;

    SELECT inputParam;

    SELECT CONCAT('zyxw', inputParam);
END</pre></div><p>
        </p><p>
          To use the <code class="literal">demoSp</code> procedure with
          Connector/J, follow these steps:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Prepare the callable statement by using
              <code class="literal">Connection.prepareCall()</code> .
            </p><p>
              Notice that you have to use JDBC escape syntax, and that
              the parentheses surrounding the parameter placeholders are
              not optional:
            </p><div class="example"><a name="connector-j-examples-preparecall"></a><p class="title"><b>Example 20.4. Connector/J: Using <code class="literal">Connection.prepareCall()</code></b></p><pre class="programlisting">import java.sql.CallableStatement;

...

    //
    // Prepare a call to the stored procedure 'demoSp'
    // with two parameters
    //
    // Notice the use of JDBC-escape syntax ({call ...})
    //

    CallableStatement cStmt = conn.prepareCall("{call demoSp(?, ?)}");



    cStmt.setString(1, "abcdefg");</pre></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                <code class="literal">Connection.prepareCall()</code> is an
                expensive method, due to the metadata retrieval that the
                driver performs to support output parameters. For
                performance reasons, you should try to minimize
                unnecessary calls to
                <code class="literal">Connection.prepareCall()</code> by reusing
                <code class="classname">CallableStatement</code> instances in
                your code.
              </p></div></li><li><p>
              Register the output parameters (if any exist)
            </p><p>
              To retrieve the values of output parameters (parameters
              specified as <code class="literal">OUT</code> or
              <code class="literal">INOUT</code> when you created the stored
              procedure), JDBC requires that they be specified before
              statement execution using the various
              <code class="function">registerOutputParameter()</code> methods in
              the <code class="classname">CallableStatement</code> interface:

              </p><div class="example"><a name="connector-j-examples-output-param"></a><p class="title"><b>Example 20.5. Connector/J: Registering output parameters</b></p><pre class="programlisting">import java.sql.Types;
...
//
// Connector/J supports both named and indexed
// output parameters. You can register output
// parameters using either method, as well
// as retrieve output parameters using either
// method, regardless of what method was
// used to register them.
//
// The following examples show how to use
// the various methods of registering
// output parameters (you should of course
// use only one registration per parameter).
//

//
// Registers the second parameter as output, and
// uses the type 'INTEGER' for values returned from
// getObject()
//

cStmt.registerOutParameter(2, Types.INTEGER);

//
// Registers the named parameter 'inOutParam', and
// uses the type 'INTEGER' for values returned from
// getObject()
//

cStmt.registerOutParameter("inOutParam", Types.INTEGER);
...
</pre></div><p>
            </p></li><li><p>
              Set the input parameters (if any exist)
            </p><p>
              Input and in/out parameters are set as for
              <code class="classname">PreparedStatement</code> objects. However,
              <code class="classname">CallableStatement</code> also supports
              setting parameters by name:

              </p><div class="example"><a name="connector-j-examples-callablestatement"></a><p class="title"><b>Example 20.6. Connector/J: Setting <code class="literal">CallableStatement</code> input
                  parameters</b></p><pre class="programlisting">...

    //
    // Set a parameter by index
    //

    cStmt.setString(1, "abcdefg");

    //
    // Alternatively, set a parameter using
    // the parameter name
    //

    cStmt.setString("inputParameter", "abcdefg");

    //
    // Set the 'in/out' parameter using an index
    //

    cStmt.setInt(2, 1);

    //
    // Alternatively, set the 'in/out' parameter
    // by name
    //

    cStmt.setInt("inOutParam", 1);

...</pre></div><p>
            </p></li><li><p>
              Execute the <code class="classname">CallableStatement</code>, and
              retrieve any result sets or output parameters.
            </p><p>
              Although <code class="classname">CallableStatement</code> supports
              calling any of the <code class="classname">Statement</code>
              execute methods (<code class="function">executeUpdate()</code>,
              <code class="function">executeQuery()</code> or
              <code class="function">execute()</code>), the most flexible method
              to call is <code class="function">execute()</code>, as you do not
              need to know ahead of time if the stored procedure returns
              result sets:

              </p><div class="example"><a name="connector-j-examples-retrieving-results-params"></a><p class="title"><b>Example 20.7. Connector/J: Retrieving results and output parameter values</b></p><pre class="programlisting">...

    boolean hadResults = cStmt.execute();

    //
    // Process all returned result sets
    //

    while (hadResults) {
        ResultSet rs = cStmt.getResultSet();

        // process result set
        ...

        hadResults = cStmt.getMoreResults();
    }

    //
    // Retrieve output parameters
    //
    // Connector/J supports both index-based and
    // name-based retrieval
    //

    int outputValue = cStmt.getInt(2); // index-based

    outputValue = cStmt.getInt("inOutParam"); // name-based

...</pre></div><p>
            </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-j-usagenotes-last-insert-id"></a>20.4.5.1.4. Retrieving <code class="literal">AUTO_INCREMENT</code> Column Values</h5></div></div></div><p>
          Before version 3.0 of the JDBC API, there was no standard way
          of retrieving key values from databases that supported auto
          increment or identity columns. With older JDBC drivers for
          MySQL, you could always use a MySQL-specific method on the
          <code class="classname">Statement</code> interface, or issue the query
          <code class="literal">SELECT LAST_INSERT_ID()</code> after issuing an
          <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> to a table that had an
          <code class="literal">AUTO_INCREMENT</code> key. Using the
          MySQL-specific method call isn't portable, and issuing a
          <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> to get the
          <code class="literal">AUTO_INCREMENT</code> key's value requires another
          round-trip to the database, which isn't as efficient as
          possible. The following code snippets demonstrate the three
          different ways to retrieve <code class="literal">AUTO_INCREMENT</code>
          values. First, we demonstrate the use of the new JDBC-3.0
          method <code class="function">getGeneratedKeys()</code> which is now
          the preferred method to use if you need to retrieve
          <code class="literal">AUTO_INCREMENT</code> keys and have access to
          JDBC-3.0. The second example shows how you can retrieve the
          same value using a standard <code class="literal">SELECT
          LAST_INSERT_ID()</code> query. The final example shows how
          updatable result sets can retrieve the
          <code class="literal">AUTO_INCREMENT</code> value when using the
          <code class="function">insertRow()</code> method.

          </p><div class="example"><a name="connector-j-examples-autoincrement-getgeneratedkeys"></a><p class="title"><b>Example 20.8. Connector/J: Retrieving <code class="literal">AUTO_INCREMENT</code> column values
              using <code class="literal">Statement.getGeneratedKeys()</code></b></p><pre class="programlisting">   Statement stmt = null;
   ResultSet rs = null;

   try {

    //
    // Create a Statement instance that we can use for
    // 'normal' result sets assuming you have a
    // Connection 'conn' to a MySQL database already
    // available

    stmt = conn.createStatement(java.sql.ResultSet.TYPE_FORWARD_ONLY,
                                java.sql.ResultSet.CONCUR_UPDATABLE);

    //
    // Issue the DDL queries for the table for this example
    //

    stmt.executeUpdate("DROP TABLE IF EXISTS autoIncTutorial");
    stmt.executeUpdate(
            "CREATE TABLE autoIncTutorial ("
            + "priKey INT NOT NULL AUTO_INCREMENT, "
            + "dataField VARCHAR(64), PRIMARY KEY (priKey))");

    //
    // Insert one row that will generate an AUTO INCREMENT
    // key in the 'priKey' field
    //

    stmt.executeUpdate(
            "INSERT INTO autoIncTutorial (dataField) "
            + "values ('Can I Get the Auto Increment Field?')",
            Statement.RETURN_GENERATED_KEYS);

    //
    // Example of using Statement.getGeneratedKeys()
    // to retrieve the value of an auto-increment
    // value
    //

    int autoIncKeyFromApi = -1;

    rs = stmt.getGeneratedKeys();

    if (rs.next()) {
        autoIncKeyFromApi = rs.getInt(1);
    } else {

        // throw an exception from here
    }

    rs.close();

    rs = null;

    System.out.println("Key returned from getGeneratedKeys():"
        + autoIncKeyFromApi);
} finally {

    if (rs != null) {
        try {
            rs.close();
        } catch (SQLException ex) {
            // ignore
        }
    }

    if (stmt != null) {
        try {
            stmt.close();
        } catch (SQLException ex) {
            // ignore
        }
    }
}
</pre></div><p>

          </p><div class="example"><a name="connector-j-examples-autoincrement-select"></a><p class="title"><b>Example 20.9. Connector/J: Retrieving <code class="literal">AUTO_INCREMENT</code> column values
              using <code class="literal">SELECT LAST_INSERT_ID()</code></b></p><pre class="programlisting">   Statement stmt = null;
   ResultSet rs = null;

   try {

    //
    // Create a Statement instance that we can use for
    // 'normal' result sets.

    stmt = conn.createStatement();

    //
    // Issue the DDL queries for the table for this example
    //

    stmt.executeUpdate("DROP TABLE IF EXISTS autoIncTutorial");
    stmt.executeUpdate(
            "CREATE TABLE autoIncTutorial ("
            + "priKey INT NOT NULL AUTO_INCREMENT, "
            + "dataField VARCHAR(64), PRIMARY KEY (priKey))");

    //
    // Insert one row that will generate an AUTO INCREMENT
    // key in the 'priKey' field
    //

    stmt.executeUpdate(
            "INSERT INTO autoIncTutorial (dataField) "
            + "values ('Can I Get the Auto Increment Field?')");

    //
    // Use the MySQL LAST_INSERT_ID()
    // function to do the same thing as getGeneratedKeys()
    //

    int autoIncKeyFromFunc = -1;
    rs = stmt.executeQuery("SELECT LAST_INSERT_ID()");

    if (rs.next()) {
        autoIncKeyFromFunc = rs.getInt(1);
    } else {
        // throw an exception from here
    }

    rs.close();

    System.out.println("Key returned from " + 
                       "'SELECT LAST_INSERT_ID()': " +
                       autoIncKeyFromFunc);

} finally {

    if (rs != null) {
        try {
            rs.close();
        } catch (SQLException ex) {
            // ignore
        }
    }

    if (stmt != null) {
        try {
            stmt.close();
        } catch (SQLException ex) {
            // ignore
        }
    }
}
   </pre></div><p>

          </p><div class="example"><a name="connector-j-examples-autoincrement-updateable-resultsets"></a><p class="title"><b>Example 20.10. Connector/J: Retrieving <code class="literal">AUTO_INCREMENT</code> column values
              in <code class="literal">Updatable ResultSets</code></b></p><pre class="programlisting">   Statement stmt = null;
   ResultSet rs = null;

   try {

    //
    // Create a Statement instance that we can use for
    // 'normal' result sets as well as an 'updatable'
    // one, assuming you have a Connection 'conn' to
    // a MySQL database already available
    //

    stmt = conn.createStatement(java.sql.ResultSet.TYPE_FORWARD_ONLY,
                                java.sql.ResultSet.CONCUR_UPDATABLE);

    //
    // Issue the DDL queries for the table for this example
    //

    stmt.executeUpdate("DROP TABLE IF EXISTS autoIncTutorial");
    stmt.executeUpdate(
            "CREATE TABLE autoIncTutorial ("
            + "priKey INT NOT NULL AUTO_INCREMENT, "
            + "dataField VARCHAR(64), PRIMARY KEY (priKey))");

    //
    // Example of retrieving an AUTO INCREMENT key
    // from an updatable result set
    //

    rs = stmt.executeQuery("SELECT priKey, dataField "
       + "FROM autoIncTutorial");

    rs.moveToInsertRow();

    rs.updateString("dataField", "AUTO INCREMENT here?");
    rs.insertRow();

    //
    // the driver adds rows at the end
    //

    rs.last();

    //
    // We should now be on the row we just inserted
    //

    int autoIncKeyFromRS = rs.getInt("priKey");

    rs.close();

    rs = null;

    System.out.println("Key returned for inserted row: "
        + autoIncKeyFromRS);

} finally {

    if (rs != null) {
        try {
            rs.close();
        } catch (SQLException ex) {
            // ignore
        }
    }

    if (stmt != null) {
        try {
            stmt.close();
        } catch (SQLException ex) {
            // ignore
        }
    }
}


   </pre></div><p>

          When you run the preceding example code, you should get the
          following output: Key returned from
          <code class="function">getGeneratedKeys()</code>: 1 Key returned from
          <code class="literal">SELECT LAST_INSERT_ID()</code>: 1 Key returned for
          inserted row: 2 You should be aware, that at times, it can be
          tricky to use the <code class="literal">SELECT LAST_INSERT_ID()</code>
          query, as that function's value is scoped to a connection. So,
          if some other query happens on the same connection, the value
          will be overwritten. On the other hand, the
          <code class="function">getGeneratedKeys()</code> method is scoped by
          the <code class="classname">Statement</code> instance, so it can be
          used even if other queries happen on the same connection, but
          not on the same <code class="classname">Statement</code> instance.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-j-usagenotes-j2ee"></a>20.4.5.2. Using Connector/J with J2EE and Other Java Frameworks</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-j-usagenotes-j2ee-concepts">20.4.5.2.1. General J2EE Concepts</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-usagenotes-tomcat">20.4.5.2.2. Using Connector/J with Tomcat</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-usagenotes-jboss">20.4.5.2.3. Using Connector/J with JBoss</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-usagenotes-spring-config">20.4.5.2.4. Using Connector/J with Spring</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-usagenotes-glassfish-config">20.4.5.2.5. Using Connector/J with GlassFish</a></span></dt></dl></div><p>
        This section describes how to use Connector/J in several
        contexts.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-j-usagenotes-j2ee-concepts"></a>20.4.5.2.1. General J2EE Concepts</h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-j-usagenotes-j2ee-concepts-connection-pooling">20.4.5.2.1.1. Understanding Connection Pooling</a></span></dt></dl></div><p>
          This section provides general background on J2EE concepts that
          pertain to use of Connector/J.
        </p><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="connector-j-usagenotes-j2ee-concepts-connection-pooling"></a>20.4.5.2.1.1. Understanding Connection Pooling</h6></div></div></div><p>
            Connection pooling is a technique of creating and managing a
            pool of connections that are ready for use by any thread
            that needs them.
          </p><p>
            This technique of pooling connections is based on the fact
            that most applications only need a thread to have access to
            a JDBC connection when they are actively processing a
            transaction, which usually take only milliseconds to
            complete. When not processing a transaction, the connection
            would otherwise sit idle. Instead, connection pooling allows
            the idle connection to be used by some other thread to do
            useful work.
          </p><p>
            In practice, when a thread needs to do work against a MySQL
            or other database with JDBC, it requests a connection from
            the pool. When the thread is finished using the connection,
            it returns it to the pool, so that it may be used by any
            other threads that want to use it.
          </p><p>
            When the connection is loaned out from the pool, it is used
            exclusively by the thread that requested it. From a
            programming point of view, it is the same as if your thread
            called <code class="literal">DriverManager.getConnection()</code>
            every time it needed a JDBC connection, however with
            connection pooling, your thread may end up using either a
            new, or already-existing connection.
          </p><p>
            Connection pooling can greatly increase the performance of
            your Java application, while reducing overall resource
            usage. The main benefits to connection pooling are:
          </p><div class="itemizedlist"><ul type="disc"><li><p>
                Reduced connection creation time
              </p><p>
                Although this is not usually an issue with the quick
                connection setup that MySQL offers compared to other
                databases, creating new JDBC connections still incurs
                networking and JDBC driver overhead that will be avoided
                if connections are recycled.
              </p></li><li><p>
                Simplified programming model
              </p><p>
                When using connection pooling, each individual thread
                can act as though it has created its own JDBC
                connection, allowing you to use straight-forward JDBC
                programming techniques.
              </p></li><li><p>
                Controlled resource usage
              </p><p>
                If you do not use connection pooling, and instead create
                a new connection every time a thread needs one, your
                application's resource usage can be quite wasteful and
                lead to unpredictable behavior under load.
              </p></li></ul></div><p>
            Remember that each connection to MySQL has overhead (memory,
            CPU, context switches, and so forth) on both the client and
            server side. Every connection limits how many resources
            there are available to your application as well as the MySQL
            server. Many of these resources will be used whether or not
            the connection is actually doing any useful work!
          </p><p>
            Connection pools can be tuned to maximize performance, while
            keeping resource utilization below the point where your
            application will start to fail rather than just run slower.
          </p><p>
            Luckily, Sun has standardized the concept of connection
            pooling in JDBC through the JDBC-2.0 Optional interfaces,
            and all major application servers have implementations of
            these APIs that work fine with MySQL Connector/J.
          </p><p>
            Generally, you configure a connection pool in your
            application server configuration files, and access it via
            the Java Naming and Directory Interface (JNDI). The
            following code shows how you might use a connection pool
            from an application deployed in a J2EE application server:

            </p><div class="example"><a name="connector-j-examples-connectionpool-j2ee"></a><p class="title"><b>Example 20.11. Connector/J: Using a connection pool with a J2EE application server</b></p><pre class="programlisting">import java.sql.Connection;
import java.sql.SQLException;
import java.sql.Statement;

import javax.naming.InitialContext;
import javax.sql.DataSource;


public class MyServletJspOrEjb {

    public void doSomething() throws Exception {
        /*
         * Create a JNDI Initial context to be able to
         *  lookup  the DataSource
         *
         * In production-level code, this should be cached as
         * an instance or static variable, as it can
         * be quite expensive to create a JNDI context.
         *
         * Note: This code only works when you are using servlets
         * or EJBs in a J2EE application server. If you are
         * using connection pooling in standalone Java code, you
         * will have to create/configure datasources using whatever
         * mechanisms your particular connection pooling library
         * provides.
         */

        InitialContext ctx = new InitialContext();

         /*
          * Lookup the DataSource, which will be backed by a pool
          * that the application server provides. DataSource instances
          * are also a good candidate for caching as an instance
          * variable, as JNDI lookups can be expensive as well.
          */

        DataSource ds = 
          (DataSource)ctx.lookup("java:comp/env/jdbc/MySQLDB");

        /*
         * The following code is what would actually be in your
         * Servlet, JSP or EJB 'service' method...where you need
         * to work with a JDBC connection.
         */

        Connection conn = null;
        Statement stmt = null;

        try {
            conn = ds.getConnection();

            /*
             * Now, use normal JDBC programming to work with
             * MySQL, making sure to close each resource when you're
             * finished with it, which allows the connection pool
             * resources to be recovered as quickly as possible
             */

            stmt = conn.createStatement();
            stmt.execute("SOME SQL QUERY");

            stmt.close();
            stmt = null;

            conn.close();
            conn = null;
        } finally {
            /*
             * close any jdbc instances here that weren't
             * explicitly closed during normal code path, so
             * that we don't 'leak' resources...
             */

            if (stmt != null) {
                try {
                    stmt.close();
                } catch (sqlexception sqlex) {
                    // ignore -- as we can't do anything about it here
                }

                stmt = null;
            }

            if (conn != null) {
                try {
                    conn.close();
                } catch (sqlexception sqlex) {
                    // ignore -- as we can't do anything about it here
                }

                conn = null;
            }
        }
    }
}</pre></div><p>

            As shown in the example above, after obtaining the JNDI
            InitialContext, and looking up the DataSource, the rest of
            the code should look familiar to anyone who has done JDBC
            programming in the past.
          </p><p>
            The most important thing to remember when using connection
            pooling is to make sure that no matter what happens in your
            code (exceptions, flow-of-control, and so forth),
            connections, and anything created by them (such as
            statements or result sets) are closed, so that they may be
            re-used, otherwise they will be stranded, which in the best
            case means that the MySQL server resources they represent
            (such as buffers, locks, or sockets) may be tied up for some
            time, or worst case, may be tied up forever.
          </p><p>
            What Is the Best Size for my Connection Pool?
          </p><p>
            As with all other configuration rules-of-thumb, the answer
            is: it depends. Although the optimal size depends on
            anticipated load and average database transaction time, the
            optimum connection pool size is smaller than you might
            expect. If you take Sun's Java Petstore blueprint
            application for example, a connection pool of 15-20
            connections can serve a relatively moderate load (600
            concurrent users) using MySQL and Tomcat with response times
            that are acceptable.
          </p><p>
            To correctly size a connection pool for your application,
            you should create load test scripts with tools such as
            Apache JMeter or The Grinder, and load test your
            application.
          </p><p>
            An easy way to determine a starting point is to configure
            your connection pool's maximum number of connections to be
            unbounded, run a load test, and measure the largest amount
            of concurrently used connections. You can then work backward
            from there to determine what values of minimum and maximum
            pooled connections give the best performance for your
            particular application.
          </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-j-usagenotes-tomcat"></a>20.4.5.2.2. Using Connector/J with Tomcat</h5></div></div></div><p>
          The following instructions are based on the instructions for
          Tomcat-5.x, available at
          <a href="http://tomcat.apache.org/tomcat-5.5-doc/jndi-datasource-examples-howto.html" target="_top">http://tomcat.apache.org/tomcat-5.5-doc/jndi-datasource-examples-howto.html</a>
          which is current at the time this document was written.
        </p><p>
          First, install the .jar file that comes with Connector/J in
          <code class="filename">$CATALINA_HOME/common/lib</code> so that it is
          available to all applications installed in the container.
        </p><p>
          Next, Configure the JNDI DataSource by adding a declaration
          resource to
          <code class="filename">$CATALINA_HOME/conf/server.xml</code> in the
          context that defines your web application:
        </p><pre class="programlisting">&lt;Context ....&gt;

  ...

  &lt;Resource name="jdbc/MySQLDB"
               auth="Container"
               type="javax.sql.DataSource"/&gt;

  &lt;!-- The name you used above, must match _exactly_ here!

       The connection pool will be bound into JNDI with the name
       "java:/comp/env/jdbc/MySQLDB"
  --&gt;

  &lt;ResourceParams name="jdbc/MySQLDB"&gt;
    &lt;parameter&gt;
      &lt;name&gt;factory&lt;/name&gt;
      &lt;value&gt;org.apache.commons.dbcp.BasicDataSourceFactory&lt;/value&gt;
    &lt;/parameter&gt;

    &lt;!-- Don't set this any higher than max_connections on your
         MySQL server, usually this should be a 10 or a few 10's
         of connections, not hundreds or thousands --&gt;

    &lt;parameter&gt;
      &lt;name&gt;maxActive&lt;/name&gt;
      &lt;value&gt;10&lt;/value&gt;
    &lt;/parameter&gt;

    &lt;!-- You don't want to many idle connections hanging around
         if you can avoid it, only enough to soak up a spike in
         the load --&gt;

    &lt;parameter&gt;
      &lt;name&gt;maxIdle&lt;/name&gt;
      &lt;value&gt;5&lt;/value&gt;
    &lt;/parameter&gt;

    &lt;!-- Don't use autoReconnect=true, it's going away eventually
         and it's a crutch for older connection pools that couldn't
         test connections. You need to decide whether your application
         is supposed to deal with SQLExceptions (hint, it should), and
         how much of a performance penalty you're willing to pay
         to ensure 'freshness' of the connection --&gt;

    &lt;parameter&gt;
      &lt;name&gt;validationQuery&lt;/name&gt;
      &lt;value&gt;SELECT 1&lt;/value&gt;
    &lt;/parameter&gt;

   &lt;!-- The most conservative approach is to test connections
        before they're given to your application. For most applications
        this is okay, the query used above is very small and takes
        no real server resources to process, other than the time used
        to traverse the network.

        If you have a high-load application you'll need to rely on
        something else. --&gt;

    &lt;parameter&gt;
      &lt;name&gt;testOnBorrow&lt;/name&gt;
      &lt;value&gt;true&lt;/value&gt;
    &lt;/parameter&gt;

   &lt;!-- Otherwise, or in addition to testOnBorrow, you can test
        while connections are sitting idle --&gt;

    &lt;parameter&gt;
      &lt;name&gt;testWhileIdle&lt;/name&gt;
      &lt;value&gt;true&lt;/value&gt;
    &lt;/parameter&gt;

    &lt;!-- You have to set this value, otherwise even though
         you've asked connections to be tested while idle,
         the idle evicter thread will never run --&gt;

    &lt;parameter&gt;
      &lt;name&gt;timeBetweenEvictionRunsMillis&lt;/name&gt;
      &lt;value&gt;10000&lt;/value&gt;
    &lt;/parameter&gt;

    &lt;!-- Don't allow connections to hang out idle too long,
         never longer than what wait_timeout is set to on the
         server...A few minutes or even fraction of a minute
         is sometimes okay here, it depends on your application
         and how much spikey load it will see --&gt;

    &lt;parameter&gt;
      &lt;name&gt;minEvictableIdleTimeMillis&lt;/name&gt;
      &lt;value&gt;60000&lt;/value&gt;
    &lt;/parameter&gt;

    &lt;!-- Username and password used when connecting to MySQL --&gt;

    &lt;parameter&gt;
     &lt;name&gt;username&lt;/name&gt;
     &lt;value&gt;someuser&lt;/value&gt;
    &lt;/parameter&gt;

    &lt;parameter&gt;
     &lt;name&gt;password&lt;/name&gt;
     &lt;value&gt;somepass&lt;/value&gt;
    &lt;/parameter&gt;

    &lt;!-- Class name for the Connector/J driver --&gt;

    &lt;parameter&gt;
       &lt;name&gt;driverClassName&lt;/name&gt;
       &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;
    &lt;/parameter&gt;

    &lt;!-- The JDBC connection url for connecting to MySQL, notice
         that if you want to pass any other MySQL-specific parameters
         you should pass them here in the URL, setting them using the
         parameter tags above will have no effect, you will also
         need to use &amp;amp; to separate parameter values as the
         ampersand is a reserved character in XML --&gt;

    &lt;parameter&gt;
      &lt;name&gt;url&lt;/name&gt;
      &lt;value&gt;jdbc:mysql://localhost:3306/test&lt;/value&gt;
    &lt;/parameter&gt;

  &lt;/ResourceParams&gt;
&lt;/Context&gt;</pre><p>
          In general, you should follow the installation instructions
          that come with your version of Tomcat, as the way you
          configure datasources in Tomcat changes from time-to-time, and
          unfortunately if you use the wrong syntax in your XML file,
          you will most likely end up with an exception similar to the
          following:
        </p><pre class="programlisting">Error: java.sql.SQLException: Cannot load JDBC driver class 'null ' SQL
state: null </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-j-usagenotes-jboss"></a>20.4.5.2.3. Using Connector/J with JBoss</h5></div></div></div><p>
          These instructions cover JBoss-4.x. To make the JDBC driver
          classes available to the application server, copy the .jar
          file that comes with Connector/J to the
          <code class="filename">lib</code> directory for your server
          configuration (which is usually called
          <code class="filename">default</code>). Then, in the same configuration
          directory, in the subdirectory named deploy, create a
          datasource configuration file that ends with "-ds.xml", which
          tells JBoss to deploy this file as a JDBC Datasource. The file
          should have the following contents:
        </p><pre class="programlisting">&lt;datasources&gt;
    &lt;local-tx-datasource&gt;
        &lt;!-- This connection pool will be bound into JNDI with the name
             "java:/MySQLDB" --&gt;

        &lt;jndi-name&gt;MySQLDB&lt;/jndi-name&gt;
        &lt;connection-url&gt;jdbc:mysql://localhost:3306/dbname&lt;/connection-url&gt;
        &lt;driver-class&gt;com.mysql.jdbc.Driver&lt;/driver-class&gt;
        &lt;user-name&gt;user&lt;/user-name&gt;
        &lt;password&gt;pass&lt;/password&gt;

        &lt;min-pool-size&gt;5&lt;/min-pool-size&gt;

        &lt;!-- Don't set this any higher than max_connections on your
         MySQL server, usually this should be a 10 or a few 10's
         of connections, not hundreds or thousands --&gt;

        &lt;max-pool-size&gt;20&lt;/max-pool-size&gt;

        &lt;!-- Don't allow connections to hang out idle too long,
         never longer than what wait_timeout is set to on the
         server...A few minutes is usually okay here,
         it depends on your application
         and how much spikey load it will see --&gt;

        &lt;idle-timeout-minutes&gt;5&lt;/idle-timeout-minutes&gt;

        &lt;!-- If you're using Connector/J 3.1.8 or newer, you can use
             our implementation of these to increase the robustness
             of the connection pool. --&gt;

        &lt;exception-sorter-class-name&gt; 
  com.mysql.jdbc.integration.jboss.ExtendedMysqlExceptionSorter
        &lt;/exception-sorter-class-name&gt;
        &lt;valid-connection-checker-class-name&gt;
  com.mysql.jdbc.integration.jboss.MysqlValidConnectionChecker
        &lt;/valid-connection-checker-class-name&gt;

    &lt;/local-tx-datasource&gt;
&lt;/datasources&gt; </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-j-usagenotes-spring-config"></a>20.4.5.2.4. Using Connector/J with Spring</h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-j-usagenotes-spring-config-jdbctemplate">20.4.5.2.4.1. Using <code class="classname">JdbcTemplate</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-usagenotes-spring-config-transactional">20.4.5.2.4.2. Transactional JDBC Access</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-usagenotes-spring-config-connpooling">20.4.5.2.4.3. Connection Pooling</a></span></dt></dl></div><p>
          The Spring Framework is a Java-based application framework
          designed for assisting in application design by providing a
          way to configure components. The technique used by Spring is a
          well known design pattern called Dependency Injection (see
          <a href="http://www.martinfowler.com/articles/injection.html" target="_top">Inversion
          of Control Containers and the Dependency Injection
          pattern</a>). This article will focus on Java-oriented
          access to MySQL databases with Spring 2.0. For those
          wondering, there is a .NET port of Spring appropriately named
          Spring.NET.
        </p><p>
          Spring is not only a system for configuring components, but
          also includes support for aspect oriented programming (AOP).
          This is one of the main benefits and the foundation for
          Spring's resource and transaction management. Spring also
          provides utilities for integrating resource management with
          JDBC and Hibernate.
        </p><p>
          For the examples in this section the MySQL world sample
          database will be used. The first task is to set up a MySQL
          data source through Spring. Components within Spring use the
          "bean" terminology. For example, to configure a connection to
          a MySQL server supporting the world sample database you might
          use:
        </p><pre class="programlisting">&lt;util:map id="dbProps"&gt;
    &lt;entry key="db.driver" value="com.mysql.jdbc.Driver"/&gt;
    &lt;entry key="db.jdbcurl" value="jdbc:mysql://localhost/world"/&gt;
    &lt;entry key="db.username" value="myuser"/&gt;
    &lt;entry key="db.password" value="mypass"/&gt;
&lt;/util:map&gt;

        </pre><p>
          In the above example we are assigning values to properties
          that will be used in the configuration. For the datasource
          configuration:
        </p><pre class="programlisting">&lt;bean id="dataSource" 
       class="org.springframework.jdbc.datasource.DriverManagerDataSource"&gt;
    &lt;property name="driverClassName" value="${db.driver}"/&gt;
    &lt;property name="url" value="${db.jdbcurl}"/&gt;
    &lt;property name="username" value="${db.username}"/&gt;
    &lt;property name="password" value="${db.password}"/&gt;
&lt;/bean&gt;
        </pre><p>
          The placeholders are used to provide values for properties of
          this bean. This means that you can specify all the properties
          of the configuration in one place instead of entering the
          values for each property on each bean. We do, however, need
          one more bean to pull this all together. The last bean is
          responsible for actually replacing the placeholders with the
          property values.
        </p><pre class="programlisting">&lt;bean 
 class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"&gt;
    &lt;property name="properties" ref="dbProps"/&gt;
&lt;/bean&gt;
        </pre><p>
          Now that we have our MySQL data source configured and ready to
          go, we write some Java code to access it. The example below
          will retrieve three random cities and their corresponding
          country using the data source we configured with Spring.
        </p><pre class="programlisting">// Create a new application context. this processes the Spring config
ApplicationContext ctx =
    new ClassPathXmlApplicationContext("ex1appContext.xml");
// Retrieve the data source from the application context
    DataSource ds = (DataSource) ctx.getBean("dataSource");
// Open a database connection using Spring's DataSourceUtils
Connection c = DataSourceUtils.getConnection(ds);
try {
    // retrieve a list of three random cities
    PreparedStatement ps = c.prepareStatement(
        "select City.Name as 'City', Country.Name as 'Country' " +
        "from City inner join Country on City.CountryCode = Country.Code " +
        "order by rand() limit 3");
    ResultSet rs = ps.executeQuery();
    while(rs.next()) {
        String city = rs.getString("City");
        String country = rs.getString("Country");
        System.out.printf("The city %s is in %s%n", city, country);
    }
} catch (SQLException ex) {
    // something has failed and we print a stack trace to analyse the error
    ex.printStackTrace();
    // ignore failure closing connection
    try { c.close(); } catch (SQLException e) { }
} finally {
    // properly release our connection
    DataSourceUtils.releaseConnection(c, ds);
}</pre><p>
          This is very similar to normal JDBC access to MySQL with the
          main difference being that we are using DataSourceUtils
          instead of the DriverManager to create the connection.
        </p><p>
          While it may seem like a small difference, the implications
          are somewhat far reaching. Spring manages this resource in a
          way similar to a container managed data source in a J2EE
          application server. When a connection is opened, it can be
          subsequently accessed in other parts of the code if it is
          synchronized with a transaction. This makes it possible to
          treat different parts of your application as transactional
          instead of passing around a database connection.
        </p><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="connector-j-usagenotes-spring-config-jdbctemplate"></a>20.4.5.2.4.1. Using <code class="classname">JdbcTemplate</code></h6></div></div></div><p>
            Spring makes extensive use of the Template method design
            pattern (see
            <a href="http://en.wikipedia.org/wiki/Template_method_pattern" target="_top">Template
            Method Pattern</a>). Our immediate focus will be on the
            <code class="literal">JdbcTemplate</code> and related classes,
            specifically <code class="literal">NamedParameterJdbcTemplate</code>.
            The template classes handle obtaining and releasing a
            connection for data access when one is needed.
          </p><p>
            The next example shows how to use
            <code class="literal">NamedParameterJdbcTemplate</code> inside of a
            DAO (Data Access Object) class to retrieve a random city
            given a country code.
          </p><pre class="programlisting">public class Ex2JdbcDao {
     /**
     * Data source reference which will be provided by Spring.
     */
     private DataSource dataSource;
        
     /**
     * Our query to find a random city given a country code. Notice
     * the ":country" parameter towards the end. This is called a
     * named parameter.
     */
     private String queryString = "select Name from City " +
        "where CountryCode = :country order by rand() limit 1";
        
     /**
     * Retrieve a random city using Spring JDBC access classes.
     */
     public String getRandomCityByCountryCode(String cntryCode) {
         // A template that allows using queries with named parameters
         NamedParameterJdbcTemplate template =
         new NamedParameterJdbcTemplate(dataSource);
         // A java.util.Map is used to provide values for the parameters
         Map params = new HashMap();
         params.put("country", cntryCode);
         // We query for an Object and specify what class we are expecting
         return (String)template.queryForObject(queryString, params, String.class);
     }
        
    /**
    * A JavaBean setter-style method to allow Spring to inject the data source.
    * @param dataSource
    */
    public void setDataSource(DataSource dataSource) {
        this.dataSource = dataSource;
    }
}
   </pre><p>
            The focus in the above code is on the
            <code class="function">getRandomCityByCountryCode()</code> method. We
            pass a country code and use the
            <code class="literal">NamedParameterJdbcTemplate</code> to query for a
            city. The country code is placed in a Map with the key
            "country", which is the parameter is named in the SQL query.
          </p><p>
            To access this code, you need to configure it with Spring by
            providing a reference to the data source.
          </p><pre class="programlisting">&lt;bean id="dao" class="code.Ex2JdbcDao"&gt;
    &lt;property name="dataSource" ref="dataSource"/&gt;
&lt;/bean&gt;</pre><p>
            At this point, we can just grab a reference to the DAO from
            Spring and call
            <code class="function">getRandomCityByCountryCode()</code>.
          </p><pre class="programlisting">// Create the application context
    ApplicationContext ctx =
    new ClassPathXmlApplicationContext("ex2appContext.xml");
    // Obtain a reference to our DAO
    Ex2JdbcDao dao = (Ex2JdbcDao) ctx.getBean("dao");
        
    String countryCode = "USA";
        
    // Find a few random cities in the US
    for(int i = 0; i &lt; 4; ++i)
        System.out.printf("A random city in %s is %s%n", countryCode,
            dao.getRandomCityByCountryCode(countryCode));
</pre><p>
            This example shows how to use Spring's JDBC classes to
            completely abstract away the use of traditional JDBC classes
            including <code class="literal">Connection</code> and
            <code class="literal">PreparedStatement</code>.
          </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="connector-j-usagenotes-spring-config-transactional"></a>20.4.5.2.4.2. Transactional JDBC Access</h6></div></div></div><p>
            You might be wondering how we can add transactions into our
            code if we do not deal directly with the JDBC classes.
            Spring provides a transaction management package that not
            only replaces JDBC transaction management, but also allows
            declarative transaction management (configuration instead of
            code).
          </p><p>
            In order to use transactional database access, we will need
            to change the storage engine of the tables in the world
            database. The downloaded script explicitly creates MyISAM
            tables which do not support transactional semantics. The
            InnoDB storage engine does support transactions and this is
            what we will be using. We can change the storage engine with
            the following statements.
          </p><pre class="programlisting">ALTER TABLE City ENGINE=InnoDB;
ALTER TABLE Country ENGINE=InnoDB;
ALTER TABLE CountryLanguage ENGINE=InnoDB;
</pre><p>
            A good programming practice emphasized by Spring is
            separating interfaces and implementations. What this means
            is that we can create a Java interface and only use the
            operations on this interface without any internal knowledge
            of what the actual implementation is. We will let Spring
            manage the implementation and with this it will manage the
            transactions for our implementation.
          </p><p>
            First you create a simple interface:
          </p><pre class="programlisting">public interface Ex3Dao {
    Integer createCity(String name, String countryCode,
    String district, Integer population);
}
</pre><p>
            This interface contains one method that will create a new
            city record in the database and return the id of the new
            record. Next you need to create an implementation of this
            interface.
          </p><pre class="programlisting">public class Ex3DaoImpl implements Ex3Dao {
    protected DataSource dataSource;
    protected SqlUpdate updateQuery;
    protected SqlFunction idQuery;
        
    public Integer createCity(String name, String countryCode,
        String district, Integer population) {
            updateQuery.update(new Object[] { name, countryCode,
                   district, population });
            return getLastId();
        }
        
    protected Integer getLastId() {
        return idQuery.run();
    }
}
</pre><p>
            You can see that we only operate on abstract query objects
            here and do not deal directly with the JDBC API. Also, this
            is the complete implementation. All of our transaction
            management will be dealt with in the configuration. To get
            the configuration started, we need to create the DAO.
          </p><pre class="programlisting">&lt;bean id="dao" class="code.Ex3DaoImpl"&gt;
    &lt;property name="dataSource" ref="dataSource"/&gt;
    &lt;property name="updateQuery"&gt;...&lt;/property&gt;
    &lt;property name="idQuery"&gt;...&lt;/property&gt;
&lt;/bean&gt;
</pre><p>
            Now you need to set up the transaction configuration. The
            first thing you must do is create transaction manager to
            manage the data source and a specification of what
            transaction properties are required for for the
            <code class="literal">dao</code> methods.
          </p><pre class="programlisting">&lt;bean id="transactionManager" 
  class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt;
    &lt;property name="dataSource" ref="dataSource"/&gt;
&lt;/bean&gt;
        
&lt;tx:advice id="txAdvice" transaction-manager="transactionManager"&gt;
    &lt;tx:attributes&gt;
        &lt;tx:method name="*"/&gt;
    &lt;/tx:attributes&gt;
&lt;/tx:advice&gt;</pre><p>
            The preceding code creates a transaction manager that
            handles transactions for the data source provided to it. The
            <code class="literal">txAdvice</code> uses this transaction manager
            and the attributes specify to create a transaction for all
            methods. Finally you need to apply this advice with an AOP
            pointcut.
          </p><pre class="programlisting">&lt;aop:config&gt;
    &lt;aop:pointcut id="daoMethods"
        expression="execution(* code.Ex3Dao.*(..))"/&gt;
     &lt;aop:advisor advice-ref="txAdvice" pointcut-ref="daoMethods"/&gt;
&lt;/aop:config&gt;</pre><p>
            This basically says that all methods called on the
            <code class="literal">Ex3Dao</code> interface will be wrapped in a
            transaction. To make use of this, you only have to retrieve
            the <code class="literal">dao</code> from the application context and
            call a method on the <code class="literal">dao</code> instance.
          </p><pre class="programlisting">Ex3Dao dao = (Ex3Dao) ctx.getBean("dao");
Integer id = dao.createCity(name,  countryCode, district, pop);
</pre><p>
            We can verify from this that there is no transaction
            management happening in our Java code and it is all
            configured with Spring. This is a very powerful notion and
            regarded as one of the most beneficial features of Spring.
          </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="connector-j-usagenotes-spring-config-connpooling"></a>20.4.5.2.4.3. Connection Pooling</h6></div></div></div><p>
            In many sitations, such as web applications, there will be a
            large number of small database transactions. When this is
            the case, it usually makes sense to create a pool of
            database connections available for web requests as needed.
            Although MySQL does not spawn an extra process when a
            connection is made, there is still a small amount of
            overhead to create and set up the connection. Pooling of
            connections also alleviates problems such as collecting
            large amounts of sockets in the <code class="literal">TIME_WAIT</code>
            state.
          </p><p>
            Setting up pooling of MySQL connections with Spring is as
            simple as changing the data source configuration in the
            application context. There are a number of configurations
            that we can use. The first example is based on the
            <a href="http://jakarta.apache.org/commons/dbcp/" target="_top">Jakarta
            Commons DBCP library</a>. The example below replaces the
            source configuration that was based on
            <code class="literal">DriverManagerDataSource</code> with DBCP's
            BasicDataSource.
          </p><pre class="programlisting">&lt;bean id="dataSource" destroy-method="close"
  class="org.apache.commons.dbcp.BasicDataSource"&gt;
    &lt;property name="driverClassName" value="${db.driver}"/&gt;
    &lt;property name="url" value="${db.jdbcurl}"/&gt;
    &lt;property name="username" value="${db.username}"/&gt;
    &lt;property name="password" value="${db.password}"/&gt;
    &lt;property name="initialSize" value="3"/&gt;
&lt;/bean&gt;</pre><p>
            The configuration of the two solutions is very similar. The
            difference is that DBCP will pool connections to the
            database instead of creating a new connection every time one
            is requested. We have also set a parameter here called
            <code class="literal">initialSize</code>. This tells DBCP that we want
            three connections in the pool when it is created.
          </p><p>
            Another way to configure connection pooling is to configure
            a data source in our J2EE application server. Using JBoss as
            an example, you can set up the MySQL connection pool by
            creating a file called
            <code class="filename">mysql-local-ds.xml</code> and placing it in
            the server/default/deploy directory in JBoss. Once we have
            this setup, we can use JNDI to look it up. With Spring, this
            lookup is very simple. The data source configuration looks
            like this.
          </p><pre class="programlisting">&lt;jee:jndi-lookup id="dataSource" jndi-name="java:MySQL_DS"/&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-j-usagenotes-glassfish-config"></a>20.4.5.2.5. Using Connector/J with GlassFish</h5></div></div></div><p></p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-j-usagenotes-troubleshooting"></a>20.4.5.3. Common Problems and Solutions</h4></div></div></div><p>
        There are a few issues that seem to be commonly encountered
        often by users of MySQL Connector/J. This section deals with
        their symptoms, and their resolutions.
      </p><p><span class="bold"><strong>Questions</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><a href="connectors-apis.html#qandaitem-20-4-5-3-1-1">20.4.5.3.1: </a>
              When I try to connect to the database with MySQL
              Connector/J, I get the following exception:
            </p><pre class="programlisting">SQLException: Server configuration denies access to data source
SQLState: 08001
VendorError: 0</pre><p>
              What is going on? I can connect just fine with the MySQL
              command-line client.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-4-5-3-1-2">20.4.5.3.2: </a>
              My application throws an SQLException 'No Suitable
              Driver'. Why is this happening?
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-4-5-3-1-3">20.4.5.3.3: </a>
              I'm trying to use MySQL Connector/J in an applet or
              application and I get an exception similar to:
            </p><pre class="programlisting">SQLException: Cannot connect to MySQL server on host:3306.
Is there a MySQL server running on the machine/port you
are trying to connect to?

(java.security.AccessControlException)
SQLState: 08S01
VendorError: 0 </pre></li><li><p><a href="connectors-apis.html#qandaitem-20-4-5-3-1-4">20.4.5.3.4: </a>
              I have a servlet/application that works fine for a day,
              and then stops working overnight
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-4-5-3-1-5">20.4.5.3.5: </a>
              I'm trying to use JDBC-2.0 updatable result sets, and I
              get an exception saying my result set is not updatable.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-4-5-3-1-6">20.4.5.3.6: </a>
              I cannot connect to the MySQL server using Connector/J,
              and I'm sure the connection paramters are correct.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-4-5-3-1-7">20.4.5.3.7: </a>
              I am trying to connect to my MySQL server within my
              application, but I get the following error and stack
              trace:
            </p><pre class="programlisting">java.net.SocketException
MESSAGE: Software caused connection abort: recv failed

STACKTRACE:

java.net.SocketException: Software caused connection abort: recv failed
at java.net.SocketInputStream.socketRead0(Native Method)
at java.net.SocketInputStream.read(Unknown Source)
at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:1392)
at com.mysql.jdbc.MysqlIO.readPacket(MysqlIO.java:1414)
at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:625)
at com.mysql.jdbc.Connection.createNewIO(Connection.java:1926)
at com.mysql.jdbc.Connection.&lt;init&gt;(Connection.java:452)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:411)</pre></li><li><p><a href="connectors-apis.html#qandaitem-20-4-5-3-1-8">20.4.5.3.8: </a>
              My application is deployed through JBoss and I am using
              transactions to handle the statements on the MySQL
              database. Under heavy loads I am getting a error and stack
              trace, but these only occur after a fixed period of heavy
              activity.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-4-5-3-1-9">20.4.5.3.9: </a>
              When using <span><strong class="command">gcj</strong></span> an
              <code class="literal">java.io.CharConversionException</code> is
              raised when working with certain character sequences.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-4-5-3-1-10">20.4.5.3.10: </a>
              Updating a table that contains a primary key that is
              either <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">FLOAT</code></a> or compound
              primary key that uses <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">FLOAT</code></a>
              fails to update the table and raises an exception.
            </p></li><li><p><a href="connectors-apis.html#qandaitem-20-4-5-3-1-11">20.4.5.3.11: </a>
              You get an <code class="literal">ER_NET_PACKET_TOO_LARGE</code>
              exception, even though the binary blob size you want to
              insert via JDBC is safely below the
              <a href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> size.
            </p></li></ul></div><p><span class="bold"><strong>Questions and Answers</strong></span></p><p><a name="qandaitem-20-4-5-3-1-1"></a><span class="bold"><strong>20.4.5.3.1: </strong></span><span class="bold"><strong>
              When I try to connect to the database with MySQL
              Connector/J, I get the following exception:
            </strong></span></p><pre class="programlisting">SQLException: Server configuration denies access to data source
SQLState: 08001
VendorError: 0</pre><p><span class="bold"><strong>
              What is going on? I can connect just fine with the MySQL
              command-line client.
            </strong></span></p><p>
              MySQL Connector/J must use TCP/IP sockets to connect to
              MySQL, as Java does not support Unix Domain Sockets.
              Therefore, when MySQL Connector/J connects to MySQL, the
              security manager in MySQL server will use its grant tables
              to determine whether the connection should be allowed.
            </p><p>
              You must add the necessary security credentials to the
              MySQL server for this to happen, using the
              <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> statement to your
              MySQL Server. See <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax">Section 12.5.1.3, “<code class="literal">GRANT</code> Syntax”</a>, for more
              information.
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                Testing your connectivity with the
                <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> command-line client will not
                work unless you add the
                <a href="programs.html#option_mysql_host"><code class="option">--host</code></a> flag, and use
                something other than <code class="literal">localhost</code> for
                the host. The <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> command-line
                client will use Unix domain sockets if you use the
                special host name <code class="literal">localhost</code>. If you
                are testing connectivity to
                <code class="literal">localhost</code>, use
                <code class="literal">127.0.0.1</code> as the host name instead.
              </p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
                Changing privileges and permissions improperly in MySQL
                can potentially cause your server installation to not
                have optimal security properties.
              </p></div><p><a name="qandaitem-20-4-5-3-1-2"></a><span class="bold"><strong>20.4.5.3.2: </strong></span><span class="bold"><strong>
              My application throws an SQLException 'No Suitable
              Driver'. Why is this happening?
            </strong></span></p><p>
              There are three possible causes for this error:
            </p><div class="itemizedlist"><ul type="disc"><li><p>
                  The Connector/J driver is not in your
                  <code class="literal">CLASSPATH</code>, see
                  <a href="connectors-apis.html#connector-j-installing" title="20.4.2. Connector/J Installation">Section 20.4.2, “Connector/J Installation”</a>.
                </p></li><li><p>
                  The format of your connection URL is incorrect, or you
                  are referencing the wrong JDBC driver.
                </p></li><li><p>
                  When using DriverManager, the
                  <code class="literal">jdbc.drivers</code> system property has
                  not been populated with the location of the
                  Connector/J driver.
                </p></li></ul></div><p><a name="qandaitem-20-4-5-3-1-3"></a><span class="bold"><strong>20.4.5.3.3: </strong></span><span class="bold"><strong>
              I'm trying to use MySQL Connector/J in an applet or
              application and I get an exception similar to:
            </strong></span></p><pre class="programlisting">SQLException: Cannot connect to MySQL server on host:3306.
Is there a MySQL server running on the machine/port you
are trying to connect to?

(java.security.AccessControlException)
SQLState: 08S01
VendorError: 0 </pre><p>
              Either you're running an Applet, your MySQL server has
              been installed with the "--skip-networking" option set, or
              your MySQL server has a firewall sitting in front of it.
            </p><p>
              Applets can only make network connections back to the
              machine that runs the web server that served the .class
              files for the applet. This means that MySQL must run on
              the same machine (or you must have some sort of port
              re-direction) for this to work. This also means that you
              will not be able to test applets from your local file
              system, you must always deploy them to a web server.
            </p><p>
              MySQL Connector/J can only communicate with MySQL using
              TCP/IP, as Java does not support Unix domain sockets.
              TCP/IP communication with MySQL might be affected if MySQL
              was started with the "--skip-networking" flag, or if it is
              firewalled.
            </p><p>
              If MySQL has been started with the "--skip-networking"
              option set (the Debian Linux package of MySQL server does
              this for example), you need to comment it out in the file
              /etc/mysql/my.cnf or /etc/my.cnf. Of course your my.cnf
              file might also exist in the <code class="filename">data</code>
              directory of your MySQL server, or anywhere else
              (depending on how MySQL was compiled for your system).
              Binaries created by us always look in /etc/my.cnf and
              [datadir]/my.cnf. If your MySQL server has been
              firewalled, you will need to have the firewall configured
              to allow TCP/IP connections from the host where your Java
              code is running to the MySQL server on the port that MySQL
              is listening to (by default, 3306).
            </p><p><a name="qandaitem-20-4-5-3-1-4"></a><span class="bold"><strong>20.4.5.3.4: </strong></span><span class="bold"><strong>
              I have a servlet/application that works fine for a day,
              and then stops working overnight
            </strong></span></p><p>
              MySQL closes connections after 8 hours of inactivity. You
              either need to use a connection pool that handles stale
              connections or use the "autoReconnect" parameter (see
              <a href="connectors-apis.html#connector-j-reference-configuration-properties" title="20.4.4.1. Driver/Datasource Class Names, URL Syntax and Configuration Properties
        for Connector/J">Section 20.4.4.1, “Driver/Datasource Class Names, URL Syntax and Configuration Properties
        for Connector/J”</a>).
            </p><p>
              Also, you should be catching SQLExceptions in your
              application and dealing with them, rather than propagating
              them all the way until your application exits, this is
              just good programming practice. MySQL Connector/J will set
              the SQLState (see
              <code class="literal">java.sql.SQLException.getSQLState()</code> in
              your APIDOCS) to "08S01" when it encounters
              network-connectivity issues during the processing of a
              query. Your application code should then attempt to
              re-connect to MySQL at this point.
            </p><p>
              The following (simplistic) example shows what code that
              can handle these exceptions might look like:
            </p><p>
              </p><div class="example"><a name="connector-j-examples-transaction-retry"></a><p class="title"><b>Example 20.12. Connector/J: Example of transaction with retry logic</b></p><pre class="programlisting">public void doBusinessOp() throws SQLException {
    Connection conn = null;
    Statement stmt = null;
    ResultSet rs = null;

    //
    // How many times do you want to retry the transaction
    // (or at least _getting_ a connection)?
    //
    int retryCount = 5;

    boolean transactionCompleted = false;

    do {
        try {
            conn = getConnection(); // assume getting this from a
                                    // javax.sql.DataSource, or the
                                    // java.sql.DriverManager

            conn.setAutoCommit(false);

            //
            // Okay, at this point, the 'retry-ability' of the
            // transaction really depends on your application logic,
            // whether or not you're using autocommit (in this case
            // not), and whether you're using transacational storage
            // engines
            //
            // For this example, we'll assume that it's _not_ safe
            // to retry the entire transaction, so we set retry
            // count to 0 at this point
            //
            // If you were using exclusively transaction-safe tables,
            // or your application could recover from a connection going
            // bad in the middle of an operation, then you would not
            // touch 'retryCount' here, and just let the loop repeat
            // until retryCount == 0.
            //
            retryCount = 0;

            stmt = conn.createStatement();

            String query = "SELECT foo FROM bar ORDER BY baz";

            rs = stmt.executeQuery(query);

            while (rs.next()) {
            }

            rs.close();
            rs = null;

            stmt.close();
            stmt = null;

            conn.commit();
            conn.close();
            conn = null;

            transactionCompleted = true;
        } catch (SQLException sqlEx) {

            //
            // The two SQL states that are 'retry-able' are 08S01
            // for a communications error, and 40001 for deadlock.
            //
            // Only retry if the error was due to a stale connection,
            // communications problem or deadlock
            //

            String sqlState = sqlEx.getSQLState();

            if ("08S01".equals(sqlState) || "40001".equals(sqlState)) {
                retryCount--;
            } else {
                retryCount = 0;
            }
        } finally {
            if (rs != null) {
                try {
                    rs.close();
                } catch (SQLException sqlEx) {
                    // You'd probably want to log this . . .
                }
            }

            if (stmt != null) {
                try {
                    stmt.close();
                } catch (SQLException sqlEx) {
                    // You'd probably want to log this as well . . .
                }
            }

            if (conn != null) {
                try {
                    //
                    // If we got here, and conn is not null, the
                    // transaction should be rolled back, as not
                    // all work has been done

                    try {
                        conn.rollback();
                    } finally {
                        conn.close();
                    }
                } catch (SQLException sqlEx) {
                    //
                    // If we got an exception here, something
                    // pretty serious is going on, so we better
                    // pass it up the stack, rather than just
                    // logging it. . .

                    throw sqlEx;
                }
            }
        }
    } while (!transactionCompleted &amp;&amp; (retryCount &gt; 0));
}</pre></div><p>
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                Use of the <code class="option">autoReconnect</code> option is not
                recommended because there is no safe method of
                reconnecting to the MySQL server without risking some
                corruption of the connection state or database state
                information. Instead, you should use a connection pool
                which will enable your application to connect to the
                MySQL server using an available connection from the
                pool. The <code class="option">autoReconnect</code> facility is
                deprecated, and may be removed in a future release.
              </p></div><p><a name="qandaitem-20-4-5-3-1-5"></a><span class="bold"><strong>20.4.5.3.5: </strong></span><span class="bold"><strong>
              I'm trying to use JDBC-2.0 updatable result sets, and I
              get an exception saying my result set is not updatable.
            </strong></span></p><p>
              Because MySQL does not have row identifiers, MySQL
              Connector/J can only update result sets that have come
              from queries on tables that have at least one primary key,
              the query must select every primary key and the query can
              only span one table (that is, no joins). This is outlined
              in the JDBC specification.
            </p><p>
              Note that this issue only occurs when using updatable
              result sets, and is caused because Connector/J is unable
              to guarantee that it can identify the correct rows within
              the result set to be updated without having a unique
              reference to each row. There is no requirement to have a
              unique field on a table if you are using
              <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a> or
              <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statements on a
              table where you can individually specify the criteria to
              be matched using a <code class="literal">WHERE</code> clause.
            </p><p><a name="qandaitem-20-4-5-3-1-6"></a><span class="bold"><strong>20.4.5.3.6: </strong></span><span class="bold"><strong>
              I cannot connect to the MySQL server using Connector/J,
              and I'm sure the connection paramters are correct.
            </strong></span></p><p>
              Make sure that the <code class="literal">skip-networking</code>
              option has not been enabled on your server. Connector/J
              must be able to communicate with your server over TCP/IP,
              named sockets are not supported. Also ensure that you are
              not filtering connections through a Firewall or other
              network security system. For more information, see
              <a href="error-handling.html#can-not-connect-to-server" title="B.1.2.2. Can't connect to [local] MySQL server">Section B.1.2.2, “<code class="literal">Can't connect to [local] MySQL server</code>”</a>.
            </p><p><a name="qandaitem-20-4-5-3-1-7"></a><span class="bold"><strong>20.4.5.3.7: </strong></span><span class="bold"><strong>
              I am trying to connect to my MySQL server within my
              application, but I get the following error and stack
              trace:
            </strong></span></p><pre class="programlisting">java.net.SocketException
MESSAGE: Software caused connection abort: recv failed

STACKTRACE:

java.net.SocketException: Software caused connection abort: recv failed
at java.net.SocketInputStream.socketRead0(Native Method)
at java.net.SocketInputStream.read(Unknown Source)
at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:1392)
at com.mysql.jdbc.MysqlIO.readPacket(MysqlIO.java:1414)
at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:625)
at com.mysql.jdbc.Connection.createNewIO(Connection.java:1926)
at com.mysql.jdbc.Connection.&lt;init&gt;(Connection.java:452)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:411)</pre><p>
              The error probably indicates that you are using a older
              version of the Connector/J JDBC driver (2.0.14 or 3.0.x)
              and you are trying to connect to a MySQL server with
              version 4.1x or newer. The older drivers are not
              compatible with 4.1 or newer of MySQL as they do not
              support the newer authentication mechanisms.
            </p><p>
              It is likely that the older version of the Connector/J
              driver exists within your application directory or your
              <code class="literal">CLASSPATH</code> includes the older
              Connector/J package.
            </p><p><a name="qandaitem-20-4-5-3-1-8"></a><span class="bold"><strong>20.4.5.3.8: </strong></span><span class="bold"><strong>
              My application is deployed through JBoss and I am using
              transactions to handle the statements on the MySQL
              database. Under heavy loads I am getting a error and stack
              trace, but these only occur after a fixed period of heavy
              activity.
            </strong></span></p><p>
              This is a JBoss, not Connector/J, issue and is connected
              to the use of transactions. Under heavy loads the time
              taken for transactions to complete can increase, and the
              error is caused because you have exceeded the predefined
              timeout.
            </p><p>
              You can increase the timeout value by setting the
              <code class="literal">TransactionTimeout</code> attribute to the
              <code class="literal">TransactionManagerService</code> within the
              <code class="filename">/conf/jboss-service.xml</code> file
              (pre-4.0.3) or
              <code class="filename">/deploy/jta-service.xml</code> for JBoss
              4.0.3 or later. See
              <a href="http://wiki.jboss.org/wiki/Wiki.jsp?page=TransactionTimeout" target="_top">TransactionTimeoute</a>
              within the JBoss wiki for more information.
            </p><p><a name="qandaitem-20-4-5-3-1-9"></a><span class="bold"><strong>20.4.5.3.9: </strong></span><span class="bold"><strong>
              When using <span><strong class="command">gcj</strong></span> an
              <code class="literal">java.io.CharConversionException</code> is
              raised when working with certain character sequences.
            </strong></span></p><p>
              This is a known issue with <span><strong class="command">gcj</strong></span> which
              raises an exception when it reaches an unknown character
              or one it cannot convert. You should add
              <code class="literal">useJvmCharsetConverters=true</code> to your
              connection string to force character conversion outside of
              the <span><strong class="command">gcj</strong></span> libraries, or try a different
              JDK.
            </p><p><a name="qandaitem-20-4-5-3-1-10"></a><span class="bold"><strong>20.4.5.3.10: </strong></span><span class="bold"><strong>
              Updating a table that contains a primary key that is
              either <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">FLOAT</code></a> or compound
              primary key that uses <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">FLOAT</code></a>
              fails to update the table and raises an exception.
            </strong></span></p><p>
              Connector/J adds conditions to the
              <code class="literal">WHERE</code> clause during an
              <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a> to check the old
              values of the primary key. If there is no match then
              Connector/J considers this a failure condition and raises
              an exception.
            </p><p>
              The problem is that rounding differences between supplied
              values and the values stored in the database may mean that
              the values never match, and hence the update fails. The
              issue will affect all queries, not just those from
              Connector/J.
            </p><p>
              To prevent this issue, use a primary key that does not use
              <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">FLOAT</code></a>. If you have to use a
              floating point column in your primary key use
              <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DOUBLE</code></a> or
              <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> types in place of
              <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">FLOAT</code></a>.
            </p><p><a name="qandaitem-20-4-5-3-1-11"></a><span class="bold"><strong>20.4.5.3.11: </strong></span><span class="bold"><strong>
              You get an <code class="literal">ER_NET_PACKET_TOO_LARGE</code>
              exception, even though the binary blob size you want to
              insert via JDBC is safely below the
              <a href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> size.
            </strong></span></p><p>
              This is because the <code class="literal">hexEscapeBlock()</code>
              method in
              <code class="literal">com.mysql.jdbc.PreparedStatement.streamToBytes()</code>
              may almost double the size of your data.
            </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-j-support"></a>20.4.6. Connector/J Support</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-j-support-community">20.4.6.1. Connector/J Community Support</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-support-bug-report">20.4.6.2. How to Report Connector/J Bugs or Problems</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-j-support-changelog">20.4.6.3. Connector/J Change History</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-j-support-community"></a>20.4.6.1. Connector/J Community Support</h4></div></div></div><p>
        Sun Microsystems, Inc. provides assistance to the user community
        by means of its mailing lists. For Connector/J related issues,
        you can get help from experienced users by using the MySQL and
        Java mailing list. Archives and subscription information is
        available online at <a href="http://lists.mysql.com/java" target="_top">http://lists.mysql.com/java</a>.
      </p><p>
        For information about subscribing to MySQL mailing lists or to
        browse list archives, visit
        <a href="http://lists.mysql.com/" target="_top">http://lists.mysql.com/</a>. See
        <a href="introduction.html#mailing-lists" title="1.5.1. MySQL Mailing Lists">Section 1.5.1, “MySQL Mailing Lists”</a>.
      </p><p>
        Community support from experienced users is also available
        through the <a href="http://forums.mysql.com/list.php?39" target="_top">JDBC
        Forum</a>. You may also find help from other users in the
        other MySQL Forums, located at
        <a href="http://forums.mysql.com" target="_top">http://forums.mysql.com</a>. See
        <a href="introduction.html#forums" title="1.5.2. MySQL Community Support at the MySQL Forums">Section 1.5.2, “MySQL Community Support at the MySQL Forums”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-j-support-bug-report"></a>20.4.6.2. How to Report Connector/J Bugs or Problems</h4></div></div></div><p>
        The normal place to report bugs is
        <a href="http://bugs.mysql.com/" target="_top">http://bugs.mysql.com/</a>, which is the address for
        our bugs database. This database is public, and can be browsed
        and searched by anyone. If you log in to the system, you will
        also be able to enter new reports.
      </p><p>
        If you have found a sensitive security bug in MySQL, you can
        send email to <code class="email">&lt;<a href="mailto:security@mysql.com">security@mysql.com</a>&gt;</code>.
      </p><p>
        Writing a good bug report takes patience, but doing it right the
        first time saves time both for us and for yourself. A good bug
        report, containing a full test case for the bug, makes it very
        likely that we will fix the bug in the next release.
      </p><p>
        This section will help you write your report correctly so that
        you do not waste your time doing things that may not help us
        much or at all.
      </p><p>
        If you have a repeatable bug report, please report it to the
        bugs database at <a href="http://bugs.mysql.com/" target="_top">http://bugs.mysql.com/</a>. Any bug
        that we are able to repeat has a high chance of being fixed in
        the next MySQL release.
      </p><p>
        To report other problems, you can use one of the MySQL mailing
        lists.
      </p><p>
        Remember that it is possible for us to respond to a message
        containing too much information, but not to one containing too
        little. People often omit facts because they think they know the
        cause of a problem and assume that some details do not matter.
      </p><p>
        A good principle is this: If you are in doubt about stating
        something, state it. It is faster and less troublesome to write
        a couple more lines in your report than to wait longer for the
        answer if we must ask you to provide information that was
        missing from the initial report.
      </p><p>
        The most common errors made in bug reports are (a) not including
        the version number of Connector/J or MySQL used, and (b) not
        fully describing the platform on which Connector/J is installed
        (including the JVM version, and the platform type and version
        number that MySQL itself is installed on).
      </p><p>
        This is highly relevant information, and in 99 cases out of 100,
        the bug report is useless without it. Very often we get
        questions like, “<span class="quote">Why doesn't this work for me?</span>”
        Then we find that the feature requested wasn't implemented in
        that MySQL version, or that a bug described in a report has
        already been fixed in newer MySQL versions.
      </p><p>
        Sometimes the error is platform-dependent; in such cases, it is
        next to impossible for us to fix anything without knowing the
        operating system and the version number of the platform.
      </p><p>
        If at all possible, you should create a repeatable, stanalone
        testcase that doesn't involve any third-party classes.
      </p><p>
        To streamline this process, we ship a base class for testcases
        with Connector/J, named
        '<code class="classname">com.mysql.jdbc.util.BaseBugReport</code>'. To
        create a testcase for Connector/J using this class, create your
        own class that inherits from
        <code class="classname">com.mysql.jdbc.util.BaseBugReport</code> and
        override the methods <code class="function">setUp()</code>,
        <code class="function">tearDown()</code> and
        <code class="function">runTest()</code>.
      </p><p>
        In the <code class="function">setUp()</code> method, create code that
        creates your tables, and populates them with any data needed to
        demonstrate the bug.
      </p><p>
        In the <code class="function">runTest()</code> method, create code that
        demonstrates the bug using the tables and data you created in
        the <code class="literal">setUp</code> method.
      </p><p>
        In the <code class="function">tearDown()</code> method, drop any tables
        you created in the <code class="function">setUp()</code> method.
      </p><p>
        In any of the above three methods, you should use one of the
        variants of the <code class="function">getConnection()</code> method to
        create a JDBC connection to MySQL:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="function">getConnection()</code> - Provides a connection
            to the JDBC URL specified in <code class="function">getUrl()</code>.
            If a connection already exists, that connection is returned,
            otherwise a new connection is created.
          </p></li><li><p>
            <code class="function">getNewConnection()</code> - Use this if you
            need to get a new connection for your bug report (that is,
            there is more than one connection involved).
          </p></li><li><p>
            <code class="function">getConnection(String url)</code> - Returns a
            connection using the given URL.
          </p></li><li><p>
            <code class="function">getConnection(String url, Properties
            props)</code> - Returns a connection using the given URL
            and properties.
          </p></li></ul></div><p>
        If you need to use a JDBC URL that is different from
        'jdbc:mysql:///test', override the method
        <code class="function">getUrl()</code> as well.
      </p><p>
        Use the <code class="function">assertTrue(boolean expression)</code> and
        <code class="function">assertTrue(String failureMessage, boolean
        expression)</code> methods to create conditions that must be
        met in your testcase demonstrating the behavior you are
        expecting (vs. the behavior you are observing, which is why you
        are most likely filing a bug report).
      </p><p>
        Finally, create a <code class="function">main()</code> method that
        creates a new instance of your testcase, and calls the
        <code class="literal">run</code> method:
      </p><pre class="programlisting">public static void main(String[] args) throws Exception {
      new MyBugReport().run();
 }</pre><p>
        Once you have finished your testcase, and have verified that it
        demonstrates the bug you are reporting, upload it with your bug
        report to <a href="http://bugs.mysql.com/" target="_top">http://bugs.mysql.com/</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-j-support-changelog"></a>20.4.6.3. Connector/J Change History</h4></div></div></div><p>
        The Connector/J Change History (Changelog) is located with the
        main Changelog for MySQL. See <a href="news.html#cj-news" title="C.7. MySQL Connector/J Change History">Section C.7, “MySQL Connector/J Change History”</a>.
      </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="connector-mxj"></a>20.5. MySQL Connector/MXJ</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-mxj-overview">20.5.1. Connector/MXJ Overview</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-versions">20.5.2. Connector/MXJ Versions</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-install">20.5.3. Connector/MXJ Installation</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-configuration">20.5.4. Connector/MXJ Configuration</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-ref">20.5.5. Connector/MXJ Reference</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-usagenotes">20.5.6. Connector/MXJ Notes and Tips</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-support">20.5.7. Connector/MXJ Support</a></span></dt></dl></div><p>
    MySQL Connector/MXJ is a Java Utility package for deploying and
    managing a MySQL database. Deploying and using MySQL can be as easy
    as adding an additional parameter to the JDBC connection url, which
    will result in the database being started when the first connection
    is made. This makes it easy for Java developers to deploy
    applications which require a database by reducing installation
    barriers for their end-users.
  </p><p>
    MySQL Connector/MXJ makes the MySQL database appear to be a
    java-based component. It does this by determining what platform the
    system is running on, selecting the appropriate binary, and
    launching the executable. It will also optionally deploy an initial
    database, with any specified parameters.
  </p><p>
    Included are instructions for use with a JDBC driver and deploying
    as a JMX MBean to JBoss.
  </p><p>
    You can download sources and binaries from:
    <a href="http://dev.mysql.com/downloads/connector/mxj/" target="_top">http://dev.mysql.com/downloads/connector/mxj/</a>
  </p><p>
    This a beta release and feedback is welcome and encouraged.
  </p><p>
    Please send questions or comments to the
    <a href="http://lists.mysql.com/java" target="_top">MySQL and Java mailing
    list</a>.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-mxj-overview"></a>20.5.1. Connector/MXJ Overview</h3></div></div></div><p>
      Connector/MXJ consists of a Java class, a copy of the
      <code class="literal">mysqld</code> binary for a specific list of platforms,
      and associated files and support utilities. The Java class
      controls the initialization of an instance of the embedded
      <code class="literal">mysqld</code> binary, and the ongoing management of
      the <code class="literal">mysqld</code> process. The entire sequence and
      management can be controlled entirely from within Java using the
      Connector/MXJ Java classes. You can see an overview of the
      contents of the Connector/MXJ package in the figure below.
    </p><div class="mediaobject"><img src="images/cmxj-overview.png" width="451" height="250" alt="Connector/MXJ Overview"></div><p>
      It is important to note that Connector/MXJ is not an embedded
      version of MySQL, or a version of MySQL written as part of a Java
      class. Connector/MXJ works through the use of an embedded,
      compiled binary of <code class="literal">mysqld</code> as would normally be
      used when deploying a standard MySQL installation.
    </p><p>
      It is the Connector/MXJ wrapper, support classes and tools, that
      enable Connector/MXJ to appear as a MySQL instance.
    </p><p>
      When Connector/MXJ is initialized, the corresponding
      <code class="literal">mysqld</code> binary for the current platform is
      extracted, along with a pre-configured data directed. Both are
      contained within the Connector/MXJ JAR file. The
      <code class="literal">mysqld</code> instance is then started, with any
      additional options as specified during the initialization, and the
      MySQL database becomes accessible.
    </p><p>
      Because Connector/MXJ works in combination with Connector/J, you
      can access and integrate with the MySQL instance through a JDBC
      connection. When you have finished with the server, the instance
      is terminated, and, by default, any data created during the
      session is retained within the temporary directory created when
      the instance was started.
    </p><p>
      Connector/MXJ and the embedded <code class="literal">mysqld</code> instance
      can be deployed in a number of environments where relying on an
      existing database, or installing a MySQL instance would be
      impossible, including CD-ROM embedded database applications and
      temporary database requirements within a Java-based application
      environment.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-mxj-versions"></a>20.5.2. Connector/MXJ Versions</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Connector/MXJ 5.x, currently in beta status, includes
          <code class="literal">mysqld</code> version 5.x and includes binaries
          for Linux x86, Mac OS X PPC, Windows XP/NT/2000 x86 and
          Solaris SPARC. Connector/MXJ 5.x requires the Connector/J 5.x
          package.
        </p><p>
          The exact version of <code class="literal">mysqld</code> included
          depends on the version of Connector/MXJ
        </p><div class="orderedlist"><ol type="1"><li><p>
              Connector/MXJ v5.0.3 included MySQL v5.0.22
            </p></li><li><p>
              Connector/MXJ v5.0.4 includes MySQL v5.0.27 (Community) or
              MySQL v5.0.32 (Enterprise)
            </p></li><li><p>
              Connector/MXJ v5.0.6 includes MySQL 5.0.37 (Community)
            </p></li><li><p>
              Connector/MXJ v5.0.7 includes MySQL 5.0.41 (Community) or
              MySQL 5.0.42 (Enterprise)
            </p></li><li><p>
              Connector/MXJ v5.0.8 includes MySQL 5.0.45 (Community) or
              MySQL 5.0.46 (Enterprise)
            </p></li><li><p>
              Connector/MXJ v5.0.9 includes MySQL 5.0.51a (Community) or
              MySQL 5.0.54 (Enterprise)
            </p></li></ol></div></li><li><p>
          Connector/MXJ 1.x includes <code class="literal">mysqld</code> version
          4.1.13 and includes binaries for Linux x86, Windows XP/NT/2000
          x86 and Solaris SPARC. Connector/MXJ 1.x requires the
          Connector/J 3.x package.
        </p></li></ul></div><p>
      A summary of the different MySQL versions supplied with each
      Connector/MXJ release are shown in the table.
    </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Connector/MXJ Version</th><th>MySQL Version(s)</th></tr></thead><tbody><tr><td>5.0.8</td><td>5.0.45 (CS), 5.0.46 (ES)</td></tr><tr><td>5.0.7</td><td>5.0.41 (CS), 5.0.42 (ES)</td></tr><tr><td>5.0.6</td><td>5.0.37 (CS), 5.0.40 (ES)</td></tr><tr><td>5.0.5</td><td>5.0.37 (CS), 5.0.36 (ES)</td></tr><tr><td>5.0.4</td><td>5.0.27 (CS), 5.0.32 (ES)</td></tr><tr><td>5.0.3</td><td>5.0.22</td></tr><tr><td>5.0.2</td><td>5.0.19</td></tr></tbody></table></div><p>
      This guide provides information on the Connector/MXJ 5.x release.
      For information on using the older releases, please see the
      documentation included with the appropriate distribution.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-mxj-install"></a>20.5.3. Connector/MXJ Installation</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-mxj-install-platforms">20.5.3.1. Supported Platforms</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-install-base">20.5.3.2. Connector/MXJ Base Installation</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-install-quickstart">20.5.3.3. Connector/MXJ Quick Start Guide</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-install-class">20.5.3.4. Deploying Connector/MXJ using Driver Launch</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-install-jboss">20.5.3.5. Deploying Connector/MXJ within JBoss</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-installation-test">20.5.3.6. Verifying Installation using JUnit</a></span></dt></dl></div><p>
      Connector/MXJ does not have a installation application or process,
      but there are some steps you can follow to make the installation
      and deployment of Connector/MXJ easier.
    </p><p>
      Before you start, there are some baseline requirements for
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Java Runtime Environment (v1.4.0 or newer) if you are only
          going to deploy the package.
        </p></li><li><p>
          Java Development Kit (v1.4.0 or newer) if you want to build
          Connector/MXJ from source.
        </p></li><li><p>
          Connector/J 5.0 or newer.
        </p></li></ul></div><p>
      Depending on your target installation/deployment environment you
      may also require:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          JBoss - 4.0rc1 or newer
        </p></li><li><p>
          Apache Tomcat - 5.0 or newer
        </p></li><li><p>
          Sun's JMX reference implementation version 1.2.1 (from
          <a href="http://java.sun.com/products/JavaManagement/" target="_top">http://java.sun.com/products/JavaManagement/</a>)
        </p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-mxj-install-platforms"></a>20.5.3.1. Supported Platforms</h4></div></div></div><p>
        Connector/MXJ is compatible with any platform supporting Java
        and MySQL. By default, Connector/MXJ incorporates the
        <code class="literal">mysqld</code> binary for a select number of
        platforms which differs by version. The following platforms have
        been tested and working as deployment platforms. Support for all
        the platforms listed below is not included by default.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Linux (i386)
          </p></li><li><p>
            FreeBSD (i386)
          </p></li><li><p>
            Windows NT (x86), Windows 2000 (x86), Windows XP (x86),
            Windows Vista (x86)
          </p></li><li><p>
            Solaris 8, SPARC 32-bit (compatible with Solaris 8, Solaris
            9 and Solaris 10 on SPARC 32-bit and 64-bit platforms)
          </p></li><li><p>
            Mac OS X (PowerPC and Intel)
          </p></li></ul></div><p>
        The Connector/MXJ 5.0.8 release includes
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> binaries for the following platforms
        by as standard:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Linux (i386)
          </p></li><li><p>
            Windows (x86), compatible with Windows NT, Windows 2000,
            Windows XP , Windows Vista
          </p></li><li><p>
            Solaris 8, SPARC 32-bit (compatible with Solaris 8, Solaris
            9 and Solaris 10 on SPARC 32-bit and 64-bit platforms)
          </p></li><li><p>
            Mac OS X (PowerPC and Intel)
          </p></li></ul></div><p>
        For more information on packaging your own Connector/MXJ with
        the platforms you require, see
        <a href="connectors-apis.html#connector-mxj-usagenotes-packaging" title="20.5.6.1. Creating your own Connector/MXJ Package">Section 20.5.6.1, “Creating your own Connector/MXJ Package”</a>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-mxj-install-base"></a>20.5.3.2. Connector/MXJ Base Installation</h4></div></div></div><p>
        Because there is no formal installation process, the method,
        installation directory, and access methods you use for
        Connector/MXJ are entirely up to your individual requirements.
      </p><p>
        To perform a basic installation, choose a target directory for
        the files included in the Connector/MXJ package. On Unix/Linux
        systems you may opt to use a directory such as
        <code class="filename">/usr/local/connector-mxj</code>; On Windows, you
        may want to install the files in the base directory,
        <code class="filename">C:\Connector-MXJ</code>, or within the
        <code class="filename">Program Files</code> directory.
      </p><p>
        To install the files, for a Connector/MXJ 5.0.4 installation:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Download the Connector/MXJ package, either in Tar/Gzip
            format (ideal for Unix/Linux systems) or Zip format
            (Windows).
          </p></li><li><p>
            Extract the files from the package. This will create a
            directory
            <code class="filename">mysql-connector-mxj-gpl-[ver]</code>. Copy and
            optionally rename this directory to your desired location.
          </p></li><li><p>
            For best results, you should update your global
            <code class="literal">CLASSPATH</code> variable with the location of
            the required <code class="literal">jar</code> files.
          </p><p>
            Within Unix/Linux you can do this globally by editing the
            global shell profile, or on a user by user basis by editing
            their individual shell profile.
          </p><p>
            On Windows 2000, Windows NT and Windows XP, you can edit the
            global <code class="literal">CLASSPATH</code> by editing the
            <code class="literal">Environment Variables</code> configured through
            the <code class="literal">System</code> control panel.
          </p></li></ol></div><p>
        For Connector/MXJ 5.0.6 and later you need the following JAR
        files in your <code class="literal">CLASSPATH</code>:
      </p><div class="orderedlist"><ol type="1"><li><p>
            <code class="filename">mysql-connector-mxj-gpl-[ver].jar</code>
            — contains the main Connector/MXJ classes.
          </p></li><li><p>
            <code class="filename">mysql-connector-mxj-gpl-[ver]-db-files.jar</code>
            — contains the embedded <code class="literal">mysqld</code> and
            database files.
          </p></li><li><p>
            <code class="filename">aspectjrt.jar</code> — the AspectJ
            runtime library, located in
            <code class="filename">lib/aspectjrt.jar</code> in the Connector/MXJ
            package.
          </p></li><li><p>
            <code class="filename">mysql-connector-java-[ver]-bin.jar</code>
            — Connector/J, see <a href="connectors-apis.html#connector-j" title="20.4. MySQL Connector/J">Section 20.4, “MySQL Connector/J”</a>.
          </p></li></ol></div><p>
        For Connector/MXJ 5.0.4 and later you need the following JAR
        files in your <code class="literal">CLASSPATH</code>:
      </p><div class="orderedlist"><ol type="1"><li><p>
            <code class="filename">connector-mxj.jar</code> — contains the
            main Connector/MXJ classes.
          </p></li><li><p>
            <code class="filename">connector-mxj-db-files.jar</code> —
            contains the embedded <code class="literal">mysqld</code> and database
            files.
          </p></li><li><p>
            <code class="filename">aspectjrt.jar</code> — the AspectJ
            runtime library, located in
            <code class="filename">lib/aspectjrt.jar</code> in the Connector/MXJ
            package.
          </p></li><li><p>
            <code class="filename">mysql-connector-mxj-gpl-[ver].jar</code>
            — Connector/J, see <a href="connectors-apis.html#connector-j" title="20.4. MySQL Connector/J">Section 20.4, “MySQL Connector/J”</a>.
          </p></li></ol></div><p>
        For Connector/MXJ 5.0.3 and earlier, you need the following JAR
        files:
      </p><div class="orderedlist"><ol type="1"><li><p>
            <code class="filename">connector-mxj.jar</code>
          </p></li><li><p>
            <code class="filename">aspectjrt.jar</code> — the AspectJ
            runtime library, located in
            <code class="filename">lib/aspectjrt.jar</code> in the Connector/MXJ
            package.
          </p></li><li><p>
            <code class="filename">mysql-connector-mxj-gpl-[ver].jar</code>
            — Connector/J, see <a href="connectors-apis.html#connector-j" title="20.4. MySQL Connector/J">Section 20.4, “MySQL Connector/J”</a>.
          </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-mxj-install-quickstart"></a>20.5.3.3. Connector/MXJ Quick Start Guide</h4></div></div></div><p>
        Once you have extracted the Connector/MXJ and Connector/J
        components you can run one of the sample applications that
        initiates a MySQL instance. You can test the installation by
        running the <code class="literal">ConnectorMXJUrlTestExample</code>:
      </p><pre class="programlisting">shell&gt; java ConnectorMXJUrlTestExample
jdbc:mysql:mxj://localhost:3336/our_test_app?server.basedir»
    =/var/tmp/test-mxj&amp;createDatabaseIfNotExist=true&amp;server.initialize-user=true
[/var/tmp/test-mxj/bin/mysqld][--no-defaults][--port=3336][--socket=mysql.sock]»
    [--basedir=/var/tmp/test-mxj][--datadir=/var/tmp/test-mxj/data]»
    [--pid-file=/var/tmp/test-mxj/data/MysqldResource.pid]
[MysqldResource] launching mysqld (driver_launched_mysqld_1)
InnoDB: The first specified data file ./ibdata1 did not exist:
InnoDB: a new database to be created!
080220  9:40:20  InnoDB: Setting file ./ibdata1 size to 10 MB
InnoDB: Database physically writes the file full: wait...
080220  9:40:20  InnoDB: Log file ./ib_logfile0 did not exist: new to be created
InnoDB: Setting log file ./ib_logfile0 size to 5 MB
InnoDB: Database physically writes the file full: wait...
080220  9:40:20  InnoDB: Log file ./ib_logfile1 did not exist: new to be created
InnoDB: Setting log file ./ib_logfile1 size to 5 MB
InnoDB: Database physically writes the file full: wait...
InnoDB: Doublewrite buffer not found: creating new
InnoDB: Doublewrite buffer created
InnoDB: Creating foreign key constraint system tables
InnoDB: Foreign key constraint system tables created
080220  9:40:21  InnoDB: Started; log sequence number 0 0
080220  9:40:21 [Note] /var/tmp/test-mxj/bin/mysqld: ready for connections.
Version: '5.0.51a'  socket: 'mysql.sock'  port: 3336  MySQL Community Server (GPL)
[MysqldResource] mysqld running as process: 2238
------------------------
SELECT VERSION()
------------------------
5.0.51a
------------------------
[MysqldResource] stopping mysqld (process: 2238)
080220  9:40:27 [Note] /var/tmp/test-mxj/bin/mysqld: Normal shutdown

080220  9:40:27  InnoDB: Starting shutdown...
080220  9:40:29  InnoDB: Shutdown completed; log sequence number 0 43655
080220  9:40:29 [Note] /var/tmp/test-mxj/bin/mysqld: Shutdown complete

[MysqldResource] shutdown complete</pre><p>
        The above output shows an instance of MySQL starting, the
        necessary files being created (log files, InnoDB data files) and
        the MySQL database entering the running state. The instance is
        then shutdown by Connector/MXJ before the example terminates.
      </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          You should avoid running your Connector/MXJ application as the
          <code class="literal">root</code> user, because this will cause the
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> to also be executed with root
          privileges. For more information, see
          <a href="server-administration.html#changing-mysql-user" title="5.3.5. How to Run MySQL as a Normal User">Section 5.3.5, “How to Run MySQL as a Normal User”</a>.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-mxj-install-class"></a>20.5.3.4. Deploying Connector/MXJ using Driver Launch</h4></div></div></div><p>
        Connector/MXJ and Connector/J work together to enable you to
        launch an instance of the <code class="literal">mysqld</code> server
        through the use of a keyword in the JDBC connection string.
        Deploying Connector/MXJ within a Java application can be
        automated through this method, making the deployment of
        Connector/MXJ a simple process:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Download and unzip Connector/MXJ, add
            <code class="filename">mysql-connector-mxj-gpl-[ver].jar</code> to
            the <code class="literal">CLASSPATH</code>.
          </p><p>
            If you are using Connector/MXJ v5.0.4 or later you will also
            need to add the
            <code class="filename">mysql-connector-mxj-gpl-[ver]-db-files.jar</code>
            file to your <code class="literal">CLASSPATH</code>.
          </p></li><li><p>
            To the JDBC connection string, embed the
            <code class="literal">mxj</code> keyword, for example:
            <code class="literal">jdbc:mysql:mxj://localhost:<em class="replaceable"><code>PORT</code></em>/<em class="replaceable"><code>DBNAME</code></em></code>.
          </p></li></ol></div><p>
        For more details, see
        <a href="connectors-apis.html#connector-mxj-configuration" title="20.5.4. Connector/MXJ Configuration">Section 20.5.4, “Connector/MXJ Configuration”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-mxj-install-jboss"></a>20.5.3.5. Deploying Connector/MXJ within JBoss</h4></div></div></div><p>
        For deployment within a JBoss environment, you must configure
        the JBoss environment to use the Connector/MXJ component within
        the JDBC parameters:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Download Connector/MXJ and copy the
            <code class="filename">mysql-connector-mxj-gpl-[ver].jar</code> file
            to the <code class="filename">$JBOSS_HOME/server/default/lib</code>
            directory.
          </p><p>
            If you are using Connector/MXJ v5.0.4 or later you will also
            need to copy the
            <code class="filename">mysql-connector-mxj-gpl-[ver]-db-files.jar</code>
            file to <code class="filename">$JBOSS_HOME/server/default/lib</code>.
          </p></li><li><p>
            Download Connector/J and copy the
            <code class="filename">mysql-connector-java-<em class="replaceable"><code>5.1.5</code></em>-bin.jar</code>
            file to the
            <code class="filename">$JBOSS_HOME/server/default/lib</code>
            directory.
          </p></li><li><p>
            Create an MBean service xml file in the
            <code class="filename">$JBOSS_HOME/server/default/deploy</code>
            directory with any attributes set, for instance the
            <a href="server-administration.html#sysvar_datadir"><code class="literal">datadir</code></a> and
            <code class="literal">autostart</code>.
          </p></li><li><p>
            Set the JDBC parameters of your web application to use:

</p><pre class="programlisting">String driver = "com.mysql.jdbc.Driver"; 
String url = "jdbc:mysql:///test?propertiesTransform="+
             "com.mysql.management.jmx.ConnectorMXJPropertiesTransform"; 
String user = "root"; 
String password = ""; 
Class.forName(driver);
Connection conn = DriverManager.getConnection(url, user, password); </pre><p>
          </p></li></ol></div><p>
        You may wish to create a separate users and database table
        spaces for each application, rather than using "root and test".
      </p><p>
        We highly suggest having a routine backup procedure for backing
        up the database files in the
        <a href="server-administration.html#sysvar_datadir"><code class="literal">datadir</code></a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-mxj-installation-test"></a>20.5.3.6. Verifying Installation using JUnit</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-mxj-installation-test-requirements">20.5.3.6.1. JUnit Test Requirements</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-installation-test-running">20.5.3.6.2. Running the JUnit Tests</a></span></dt></dl></div><p>
        The best way to ensure that your platform is supported is to run
        the JUnit tests. These will test the Connector/MXJ classes and
        the associated components.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-mxj-installation-test-requirements"></a>20.5.3.6.1. JUnit Test Requirements</h5></div></div></div><p>
          The first thing to do is make sure that the components will
          work on the platform. The
          <code class="classname">MysqldResource</code> class is really a
          wrapper for a native version of MySQL, so not all platforms
          are supported. At the time of this writing, Linux on the i386
          architecture has been tested and seems to work quite well, as
          does OS X v10.3. There has been limited testing on Windows and
          Solaris.
        </p><p>
          Requirements:
        </p><div class="orderedlist"><ol type="1"><li><p>
              JDK-1.4 or newer (or the JRE if you aren't going to be
              compiling the source or JSPs).
            </p></li><li><p>
              MySQL Connector/J version 5.0 or newer (from
              <a href="http://dev.mysql.com/downloads/connector/j/" target="_top">http://dev.mysql.com/downloads/connector/j/</a>) installed
              and available via your CLASSPATH.
            </p></li><li><p>
              The <code class="literal">javax.management</code> classes for JMX
              version 1.2.1, these are present in the following
              application servers:
            </p><div class="itemizedlist"><ul type="disc"><li><p>
                  JBoss - 4.0rc1 or newer.
                </p></li><li><p>
                  Apache Tomcat - 5.0 or newer.
                </p></li><li><p>
                  Sun's JMX reference implementation version 1.2.1 (from
                  <a href="http://java.sun.com/products/JavaManagement/" target="_top">http://java.sun.com/products/JavaManagement/</a>).
                </p></li></ul></div></li><li><p>
              JUnit 3.8.1 (from <a href="http://www.junit.org/" target="_top">http://www.junit.org/</a>).
            </p></li></ol></div><p>
          If building from source, All of the requirements from above,
          plus:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Ant version 1.5 or newer (download from
              <a href="http://ant.apache.org/" target="_top">http://ant.apache.org/</a>).
            </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="connector-mxj-installation-test-running"></a>20.5.3.6.2. Running the JUnit Tests</h5></div></div></div><div class="orderedlist"><ol type="1"><li><p>
              The tests attempt to launch MySQL on the port 3336. If you
              have a MySQL running, it may conflict, but this isn't very
              likely because the default port for MySQL is 3306.
              However, You may set the "c-mxj_test_port" Java property
              to a port of your choosing. Alternatively, you may wish to
              start by shutting down any instances of MySQL you have
              running on the target machine.
            </p><p>
              The tests suppress output to the console by default. For
              verbose output, you may set the "c-mxj_test_silent" Java
              property to "false".
            </p></li><li><p>
              To run the JUnit test suite, the $CLASSPATH must include
              the following:
            </p><div class="itemizedlist"><ul type="disc"><li><p>
                  JUnit
                </p></li><li><p>
                  JMX
                </p></li><li><p>
                  Connector/J
                </p></li><li><p>
                  MySQL Connector/MXJ
                </p></li></ul></div></li><li><p>
              If <code class="filename">connector-mxj.jar</code> is not present
              in your download, unzip MySQL Connector/MXJ source
              archive.
            </p><pre class="programlisting">cd mysqldjmx
ant dist
     </pre><p>
              Then add
              <code class="filename">$TEMP/cmxj/stage/connector-mxj/connector-mxj.jar</code>
              to the CLASSPATH.
            </p></li><li><p>
              if you have <code class="literal">junit</code>, execute the unit
              tests. From the command line, type:
            </p><pre class="programlisting">java com.mysql.management.AllTestsSuite
    </pre><p>
              The output should look something like this:
            </p><pre class="programlisting">.........................................
.........................................
..........
Time: 259.438

OK (101 tests)
  </pre><p>
              Note that the tests are a bit slow near the end, so please
              be patient.
            </p></li></ol></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-mxj-configuration"></a>20.5.4. Connector/MXJ Configuration</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-mxj-configuration-driver-launched">20.5.4.1. Running as part of the JDBC Driver</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-configuration-java-object">20.5.4.2. Running within a Java Object</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-configuration-options">20.5.4.3. Setting server options</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-mxj-configuration-driver-launched"></a>20.5.4.1. Running as part of the JDBC Driver</h4></div></div></div><p>
        A feature of the MySQL Connector/J JDBC driver is the ability to
        specify a connection to an embedded Connector/MXJ instance
        through the use of the mxj keyword in the JDBC connection
        string.
      </p><p>
        In the following example, we have a program which creates a
        connection, executes a query, and prints the result to the
        System.out. The MySQL database will be deployed and started as
        part of the connection process, and shutdown as part of the
        finally block.
      </p><p>
        You can find this file in the Connector/MXJ package as
        <code class="filename">src/ConnectorMXJUrlTestExample.java</code>.
      </p><pre class="programlisting">import java.io.File;
import java.sql.Connection;
import java.sql.DriverManager;

import com.mysql.management.driverlaunched.ServerLauncherSocketFactory;
import com.mysql.management.util.QueryUtil;

public class ConnectorMXJUrlTestExample {
  public static String DRIVER = "com.mysql.jdbc.Driver";

  public static String JAVA_IO_TMPDIR = "java.io.tmpdir";

  public static void main(String[] args) throws Exception {
    File ourAppDir = new File(System.getProperty(JAVA_IO_TMPDIR));
    File databaseDir = new File(ourAppDir, "test-mxj");
    int port = Integer.parseInt(System.getProperty("c-mxj_test_port", "3336"));
    String dbName = "our_test_app";

    String url = "jdbc:mysql:mxj://localhost:" + port + "/" + dbName //
      + "?" + "server.basedir=" + databaseDir //
      + "&amp;" + "createDatabaseIfNotExist=true"//
      + "&amp;" + "server.initialize-user=true" //
    ;

    System.out.println(url);

    String userName = "alice";
    String password = "q93uti0opwhkd";

    Class.forName(DRIVER);
    Connection conn = null;
    try {
      conn = DriverManager.getConnection(url, userName, password);
      String sql = "SELECT VERSION()";
      String queryForString = new QueryUtil(conn).queryForString(sql);

      System.out.println("------------------------");
      System.out.println(sql);
      System.out.println("------------------------");
      System.out.println(queryForString);
      System.out.println("------------------------");
      System.out.flush();
      Thread.sleep(100); // wait for System.out to finish flush
    } finally {
      try {
        if (conn != null)
           conn.close();
      } catch (Exception e) {
        e.printStackTrace();
      }

      ServerLauncherSocketFactory.shutdown(databaseDir, null); 
    }
  }
}</pre><p>
        To run the above program, be sure to have connector-mxj.jar and
        Connector/J in the CLASSPATH. Then type:
      </p><pre class="programlisting">java ConnectorMXJTestExample
  </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-mxj-configuration-java-object"></a>20.5.4.2. Running within a Java Object</h4></div></div></div><p>
        If you have a java application and wish to “<span class="quote">embed</span>”
        a MySQL database, make use of the
        <code class="literal">com.mysql.management.MysqldResource</code> class
        directly. This class may be instantiated with the default (no
        argument) constructor, or by passing in a java.io.File object
        representing the directory you wish the server to be "unzipped"
        into. It may also be instantiated with printstreams for "stdout"
        and "stderr" for logging.
      </p><p>
        Once instantiated, a <code class="literal">java.util.Map</code>, the
        object will be able to provide a
        <code class="literal">java.util.Map</code> of server options appropriate
        for the platform and version of MySQL which you will be using.
      </p><p>
        The <code class="classname">MysqldResource</code> enables you to "start"
        MySQL with a <code class="literal">java.util.Map</code> of server options
        which you provide, as well as "shutdown" the database. The
        following example shows a simplistic way to embed MySQL in an
        application using plain java objects.
      </p><p>
        You can find this file in the Connector/MXJ package as
        <code class="filename">src/ConnectorMXJObjectTestExample.java</code>.
      </p><pre class="programlisting">import java.io.File;
import java.sql.Connection;
import java.sql.DriverManager;
import java.util.HashMap;
import java.util.Map;

import com.mysql.management.MysqldResource;
import com.mysql.management.MysqldResourceI;
import com.mysql.management.util.QueryUtil;

public class ConnectorMXJObjectTestExample {
    public static final String DRIVER = "com.mysql.jdbc.Driver";

    public static final String JAVA_IO_TMPDIR = "java.io.tmpdir";

    public static void main(String[] args) throws Exception {
        File ourAppDir = new File(System.getProperty(JAVA_IO_TMPDIR));
        File databaseDir = new File(ourAppDir, "mysql-mxj");
        int port = Integer.parseInt(System.getProperty("c-mxj_test_port",
                "3336"));
        String userName = "alice";
        String password = "q93uti0opwhkd";

        MysqldResource mysqldResource = startDatabase(databaseDir, port,
                userName, password);

        Class.forName(DRIVER);
        Connection conn = null;
        try {
            String dbName = "our_test_app";
            String url = "jdbc:mysql://localhost:" + port + "/" + dbName //
                    + "?" + "createDatabaseIfNotExist=true"//
            ;
            conn = DriverManager.getConnection(url, userName, password);
            String sql = "SELECT VERSION()";
            String queryForString = new QueryUtil(conn).queryForString(sql);

            System.out.println("------------------------");
            System.out.println(sql);
            System.out.println("------------------------");
            System.out.println(queryForString);
            System.out.println("------------------------");
            System.out.flush();
            Thread.sleep(100); // wait for System.out to finish flush
        } finally {
            try {
                if (conn != null) {
                    conn.close();
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
            try {
                mysqldResource.shutdown();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

    public static MysqldResource startDatabase(File databaseDir, int port,
            String userName, String password) {
        MysqldResource mysqldResource = new MysqldResource(databaseDir);

        Map database_options = new HashMap();
        database_options.put(MysqldResourceI.PORT, Integer.toString(port));
        database_options.put(MysqldResourceI.INITIALIZE_USER, "true");
        database_options.put(MysqldResourceI.INITIALIZE_USER_NAME, userName);
        database_options.put(MysqldResourceI.INITIALIZE_PASSWORD, password);

        mysqldResource.start("test-mysqld-thread", database_options);

        if (!mysqldResource.isRunning()) {
            throw new RuntimeException("MySQL did not start.");
        }

        System.out.println("MySQL is running.");

        return mysqldResource;
    }
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-mxj-configuration-options"></a>20.5.4.3. Setting server options</h4></div></div></div><p>
        Of course there are many options we may wish to set for a MySQL
        database. These options may be specified as part of the JDBC
        connection string simply by prefixing each server option with
        <code class="literal">server.</code>. In the following example we set two
        driver parameters and two server parameters:
      </p><pre class="programlisting">        String url = "jdbc:mysql://" + hostColonPort + "/" 
                + "?"
                + "cacheServerConfiguration=true"
                + "&amp;"
                + "useLocalSessionState=true"
                + "&amp;"
                + "server.basedir=/opt/myapp/db"
                + "&amp;"
                + "server.datadir=/mnt/bigdisk/myapp/data";
  </pre><p>
        Starting with Connector/MXJ 5.0.6 you can use the
        <code class="literal">initializer-user</code> property to a connection
        string. If set to true, the default anonymous and root users
        will be removed and the user/password combination from the
        connection URL will be used to create a new user. For example:
      </p><pre class="programlisting">        String url = "jdbc:mysql:mxj://localhost:" + port
        + "/alice_db"
        + "?server.datadir=" + dataDir.getPath()
        + "&amp;server.initialize-user=true"
        + "&amp;createDatabaseIfNotExist=true"
        ;
      </pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-mxj-ref"></a>20.5.5. Connector/MXJ Reference</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-mxj-ref-mysqldresource-ctor">20.5.5.1. MysqldResource Constructors</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-ref-mysqldresource-methods">20.5.5.2. MysqldResource Methods</a></span></dt></dl></div><p>
      The following sections include detailed information on the
      different API interfaces to Connector/MXJ.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-mxj-ref-mysqldresource-ctor"></a>20.5.5.1. MysqldResource Constructors</h4></div></div></div><p>
        The <code class="literal">MysqldResource</code> class supports three
        different constructor forms:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">public MysqldResource(File baseDir, File dataDir,
            String mysqlVersionString, PrintStream out, PrintStream
            err)</code>
          </p><p>
            Enables you to set the base directory, data directory,
            select a server by its version string, standard out and
            standard error.
          </p></li><li><p>
            <code class="literal">public MysqldResource(File baseDir, File dataDir,
            String mysqlVersionString) </code>
          </p><p>
            Enables you to set the base directory, data directory and
            select a server by its version string. Output for standard
            out and standard err are directed to System.out and
            System.err.
          </p></li><li><p>
            <code class="literal">public MysqldResource(File baseDir, File dataDir)
            </code>
          </p><p>
            Enables you to set the base directory and data directory.
            The default MySQL version is selected, and output for
            standard out and standard err are directed to System.out and
            System.err.
          </p></li><li><p>
            <code class="literal">public MysqldResource(File baseDir);</code>
          </p><p>
            Allows the setting of the "basedir" to deploy the MySQL
            files to. Output for standard out and standard err are
            directed to System.out and System.err.
          </p></li><li><p>
            <code class="literal">public MysqldResource();</code>
          </p><p>
            The basedir is defaulted to a subdirectory of the
            java.io.tempdir. Output for standard out and standard err
            are directed to System.out and System.err;
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-mxj-ref-mysqldresource-methods"></a>20.5.5.2. MysqldResource Methods</h4></div></div></div><p>
        MysqldResource API includes the following methods:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">void start(String threadName, Map
            mysqldArgs);</code>
          </p><p>
            Deploys and starts MySQL. The "threadName" string is used to
            name the thread which actually performs the execution of the
            MySQL command line. The map is the set of arguments and
            their values to be passed to the command line.
          </p></li><li><p>
            <code class="literal">void shutdown(); </code>
          </p><p>
            Shuts down the MySQL instance managed by the MysqldResource
            object.
          </p></li><li><p>
            <code class="literal"> Map getServerOptions(); </code>
          </p><p>
            Returns a map of all the options and their current (or
            default, if not running) options available for the MySQL
            database.
          </p></li><li><p>
            <code class="literal"> boolean isRunning(); </code>
          </p><p>
            Returns true if the MySQL database is running.
          </p></li><li><p>
            <code class="literal"> boolean isReadyForConnections(); </code>
          </p><p>
            Returns true once the database reports that is ready for
            connections.
          </p></li><li><p>
            <code class="literal"> void setKillDelay(int millis); </code>
          </p><p>
            The default “<span class="quote">Kill Delay</span>” is 30 seconds. This
            represents the amount of time to wait between the initial
            request to shutdown and issuing a “<span class="quote">force kill</span>”
            if the database has not shutdown by itself.
          </p></li><li><p>
            <code class="literal"> void addCompletionListenser(Runnable listener);
            </code>
          </p><p>
            Allows for applications to be notified when the server
            process completes. Each ''listener'' will be fired off in
            its own thread.
          </p></li><li><p>
            <code class="literal"> String getVersion(); </code>
          </p><p>
            Returns the version of MySQL.
          </p></li><li><p>
            <code class="literal"> void setVersion(int MajorVersion, int
            minorVersion, int patchLevel); </code>
          </p><p>
            The standard distribution comes with only one version of
            MySQL packaged. However, it is possible to package multiple
            versions, and specify which version to use.
          </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-mxj-usagenotes"></a>20.5.6. Connector/MXJ Notes and Tips</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-mxj-usagenotes-packaging">20.5.6.1. Creating your own Connector/MXJ Package</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-usagenotes-customdb">20.5.6.2. Deploying Connector/MXJ with a pre-configured database</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-usagenotes-jmx-agent">20.5.6.3. Running within a JMX Agent (custom)</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-usagenotes-standard-environment">20.5.6.4. Deployment in a standard JMX Agent environment (JBoss)</a></span></dt></dl></div><p>
      This section contains notes and tips on using the Connector/MXJ
      component within your applications.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-mxj-usagenotes-packaging"></a>20.5.6.1. Creating your own Connector/MXJ Package</h4></div></div></div><p>
        If you want to create a custom Connector/MXJ package that
        includes a specific <code class="literal">mysqld</code> version or
        platform then you must extract and rebuild the
        <code class="filename">mysql-connector-mxj.jar</code> (Connector/MXJ
        v5.0.3 or earlier) or
        <code class="filename">mysql-connector-mxj-gpl-[ver]-db-files.jar</code>
        (Connector/MXJ v5.0.4 or later) file.
      </p><p>
        First, you should create a new directory into which you can
        extract the current <code class="filename">connector-mxj.jar</code>:
      </p><pre class="programlisting">shell&gt; mkdir custom-mxj
shell&gt; cd custom-mxj
shell&gt; jar -xf connector-mxj.jar
shell&gt; ls
5-0-22/
ConnectorMXJObjectTestExample.class
ConnectorMXJUrlTestExample.class
META-INF/
TestDb.class
com/
kill.exe</pre><p>
        If you are using Connector/MXJ v5.0.4 or later, you should
        unpack the <code class="filename">connector-mxj-db-files.jar</code>:
      </p><pre class="programlisting">shell&gt; mkdir custom-mxj
shell&gt; cd custom-mxj
shell&gt; jar -xf connector-mxj-db-files.jar
shell&gt; ls
5-0-51a/                         
META-INF/                       
connector-mxj.properties</pre><p>
        The MySQL version directory, <code class="literal">5-0-22</code> or
        <code class="literal">5-0-51a</code> in the preceding examples, contains
        all of the files used to create an instance of MySQL when
        Connector/MXJ is executed. All of the files in this directory
        are required for each version of MySQL that you want to embed.
        Note as well the format of the version number, which uses
        hyphens instead of periods to separate the version number
        components.
      </p><p>
        Within the version specific directory are the platform specific
        directories, and archives of the <code class="filename">data</code> and
        <code class="filename">share</code> directory required by MySQL for the
        various platforms. For example, here is the listing for the
        default Connector/MXJ package:
      </p><pre class="programlisting">shell&gt;&gt; ls
Linux-i386/
META-INF/
Mac_OS_X-ppc/
SunOS-sparc/
Win-x86/
com/
data_dir.jar
share_dir.jar
win_share_dir.jar</pre><p>
        Platform specific directories are listed by their OS and
        platform - for example the <code class="literal">mysqld</code> for Mac OS
        X PowerPC is located within the
        <code class="filename">Mac_OS_X-ppc</code> directory. You can delete
        directories from this location that you do not require, and add
        new directories for additional platforms that you want to
        support.
      </p><p>
        To add a platform specific <code class="literal">mysqld</code>, create a
        new directory with the corresponding name for your operating
        system/platform. For example, you could add a directory for Mac
        OS X/Intel using the directory
        <code class="filename">Mac_OS_X-i386</code>.
      </p><p>
        On Unix systems, you can determine the platform using
        <code class="literal">uname</code>:
      </p><pre class="programlisting">shell&gt; uname -p
i386</pre><p>
        In Connector/MXJ v5.0.9 and later, an additional
        <code class="filename">platform-map.properties</code> file is used to
        associate a specific platform and operating system combination
        with the directory in which the <code class="filename">mysqld</code> for
        that combination is located. The determined operating system and
        platform are on the left, and the directory name where the
        appropriate mysqld is located is on the right. You can see a
        sample of the file below:
      </p><pre class="programlisting">Linux-i386=Linux-i386
Linux-x86=Linux-i386
Linux-i686=Linux-i386
Linux-x86_64=Linux-i386
Linux-ia64=Linux-i386

#Linux-ppc=Linux-ppc
#Linux-ppc64=Linux-ppc

Mac_OS_X-i386=Mac_OS_X-i386
Mac_OS_X-ppc=Mac_OS_X-ppc
Rhapsody-PowerPC=Mac_OS_X-ppc
#Mac_OS-PowerPC=
#macos-PowerPC=
#MacOS-PowerPC=

SunOS-sparc=SunOS-sparc
Solaris-sparc=SunOS-sparc
SunOS-x86=SunOS-x86
Solaris-x86=SunOS-x86

FreeBSD-x86=FreeBSD-x86

Windows_Vista-x86=Win-x86
Windows_2003-x86=Win-x86
Windows_XP-x86=Win-x86
Windows_2000-x86=Win-x86
Windows_NT-x86=Win-x86
Windows_NT_(unknown)-x86=Win-x86
      </pre><p>
        Now you need to download or compile <code class="literal">mysqld</code>
        for the MySQL version and platform you want to include in your
        custom <code class="filename">connector-mxj.jar</code> package into the
        new directory.
      </p><p>
        Create a file called <code class="filename">version.txt</code> in the
        OS/platform directory you have just created that contains the
        version string/path of the mysqld binary. For example:
      </p><pre class="programlisting">mysql-5.0.22-osx10.3-i386/bin/mysqld</pre><p>
        You can now recreate the <code class="filename">connector-mxj.jar</code>
        file with the added <code class="literal">mysqld</code>:
      </p><pre class="programlisting">shell&gt; cd custom-mxj
shell&gt; jar -cf ../connector-mxj.jar *</pre><p>
        For Connector/MXJ v5.0.4 and later, you should repackage to the
        <code class="filename">connector-mxj-db-files.jar</code>:
      </p><pre class="programlisting">shell&gt; cd custom-mxj
shell&gt; jar -cf ../mysql-connector-mxj-gpl-[ver]-db-files.jar *</pre><p>
        You should test this package using the steps outlined in
        <a href="connectors-apis.html#connector-mxj-install-quickstart" title="20.5.3.3. Connector/MXJ Quick Start Guide">Section 20.5.3.3, “Connector/MXJ Quick Start Guide”</a>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Because the
          <code class="filename">mysql-connector-mxj-gpl-[ver]-db-files.jar</code>
          file is separate from the main Connector/MXJ classes you can
          distribute different
          <code class="filename">mysql-connector-mxj-gpl-[ver]-db-files.jar</code>
          files to different hotsts or for different projects without
          having to create a completely new main
          <code class="filename">mysql-connector-mxj-gpl-[ver].jar</code> file
          for each one.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-mxj-usagenotes-customdb"></a>20.5.6.2. Deploying Connector/MXJ with a pre-configured database</h4></div></div></div><p>
        To include a pre-configured/populated database within your
        Connector/MXJ JAR file you must create a custom
        <code class="filename">data_dir.jar</code> file, as included within the
        main <code class="filename">connector-mxj.jar</code> (Connector/MXJ 5.0.3
        or earlier) or
        <code class="filename">mysql-connector-mxj-gpl-[ver]-db-files.jar</code>
        (Connector/MXJ 5.0.4 or later) file:
      </p><div class="orderedlist"><ol type="1"><li><p>
            First extract the <code class="filename">connector-mxj.jar</code> or
            <code class="filename">mysql-connector-gpl-[ver]-db-files.jar</code>
            file, as outlined in the previous section (see
            <a href="connectors-apis.html#connector-mxj-usagenotes-packaging" title="20.5.6.1. Creating your own Connector/MXJ Package">Section 20.5.6.1, “Creating your own Connector/MXJ Package”</a>).
          </p></li><li><p>
            First, create your database and populate the database with
            the information you require in an existing instance of MySQL
            - including Connector/MXJ instances. Data file formats are
            compatible across platforms.
          </p></li><li><p>
            Shutdown the instance of MySQL.
          </p></li><li><p>
            Create a JAR file of the data directory and databases that
            you want to include your Connector/MXJ package. You should
            include the <code class="literal">mysql</code> database, which
            includes user authentication information, in addition to the
            specific databases you want to include. For example, to
            create a JAR of the <code class="literal">mysql</code> and
            <code class="literal">mxjtest</code> databases:
          </p><pre class="programlisting">shell&gt; jar -cf ../data_dir.jar mysql mxjtest</pre></li><li><p>
            For Connector/MXJ 5.0.3 or earlier, copy the
            <code class="literal">data_dir.jar</code> file into the extracted
            <code class="literal">connector-mxj.jar</code> directory, and then
            create an archive for <code class="literal">connector-mxj.jar</code>.
          </p><p>
            For Connector/MXJ 5.0.4 or later, copy the
            <code class="literal">data_dir.jar</code> file into the extracted
            <code class="literal">mysql-connector-mxj-gpl-[ver]-db-files.jar</code>
            directory, and then create an archive for
            <code class="literal">mysql-connector-mxj-db-gpl-[ver]--files.jar</code>.
          </p></li></ol></div><p>
        Note that if you are create databases using the InnoDB engine,
        you must include the <code class="filename">ibdata.*</code> and
        <code class="filename">ib_logfile*</code> files within the
        <code class="filename">data_dir.jar</code> archive.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-mxj-usagenotes-jmx-agent"></a>20.5.6.3. Running within a JMX Agent (custom)</h4></div></div></div><p>
        As a JMX MBean, MySQL Connector/MXJ requires a JMX v1.2
        compliant MBean container, such as JBoss version 4. The MBean
        will uses the standard JMX management APIs to present (and allow
        the setting of) parameters which are appropriate for that
        platform.
      </p><p>
        If you are not using the SUN Reference implementation of the JMX
        libraries, you should skip this section. Or, if you are
        deploying to JBoss, you also may wish to skip to the next
        section.
      </p><p>
        We want to see the MysqldDynamicMBean in action inside of a JMX
        agent. In the <code class="literal">com.mysql.management.jmx.sunri</code>
        package is a custom JMX agent with two MBeans:
      </p><div class="orderedlist"><ol type="1"><li><p>
            the MysqldDynamicMBean, and
          </p></li><li><p>
            a com.sun.jdmk.comm.HtmlAdaptorServer, which provides a web
            interface for manipulating the beans inside of a JMX agent.
          </p></li></ol></div><p>
        When this very simple agent is started, it will allow a MySQL
        database to be started and stopped with a web browser.
      </p><div class="orderedlist"><ol type="1"><li><p>
            Complete the testing of the platform as above.
          </p><div class="itemizedlist"><ul type="disc"><li><p>
                current JDK, JUnit, Connector/J, MySQL Connector/MXJ
              </p></li><li><p>
                this section <span class="emphasis"><em>requires</em></span> the SUN
                reference implementation of JMX
              </p></li><li><p>
                <code class="literal">PATH</code>, <code class="literal">JAVA_HOME</code>,
                <code class="literal">ANT_HOME</code>,
                <code class="literal">CLASSPATH</code>
              </p></li></ul></div></li><li><p>
            If not building from source, skip to next step
          </p><p>
            rebuild with the "sunri.present"
          </p><pre class="programlisting">ant -Dsunri.present=true dist 
re-run tests:
java junit.textui.TestRunner com.mysql.management.AllTestsSuite
</pre></li><li><p>
            launch the test agent from the command line:
          </p><pre class="programlisting">java com.mysql.management.jmx.sunri.MysqldTestAgentSunHtmlAdaptor &amp;
     </pre></li><li><p>
            from a browser:
          </p><pre class="programlisting">http://localhost:9092/
     </pre></li><li><p>
            under MysqldAgent,
          </p><pre class="programlisting">select "name=mysqld"
     </pre></li><li><p>
            Observe the MBean View
          </p></li><li><p>
            scroll to the bottom of the screen press the
            <span class="guibutton">startMysqld</span> button
          </p></li><li><p>
            click <code class="literal">Back to MBean View</code>
          </p></li><li><p>
            scroll to the bottom of the screen press
            <span class="guibutton">stopMysqld</span> button
          </p></li><li><p>
            kill the java process running the Test Agent (jmx server)
          </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-mxj-usagenotes-standard-environment"></a>20.5.6.4. Deployment in a standard JMX Agent environment (JBoss)</h4></div></div></div><p>
        Once there is confidence that the MBean will function on the
        platform, deploying the MBean inside of a standard JMX Agent is
        the next step. Included are instructions for deploying to JBoss.
      </p><div class="orderedlist"><ol type="1"><li><p>
            Ensure a current version of java development kit (v1.4.x),
            see above.
          </p><div class="itemizedlist"><ul type="disc"><li><p>
                Ensure <code class="literal">JAVA_HOME</code> is set (JBoss
                requires <code class="literal">JAVA_HOME</code>)
              </p></li><li><p>
                Ensure <code class="literal">JAVA_HOME/bin</code> is in the
                <code class="literal">PATH</code> (You will NOT need to set your
                CLASSPATH, nor will you need any of the jars used in the
                previous tests).
              </p></li></ul></div></li><li><p>
            Ensure a current version of JBoss (v4.0RC1 or better)
          </p><pre class="programlisting">http://www.jboss.org/index.html
select "Downloads"
select "jboss-4.0.zip"
pick a mirror
unzip ~/dload/jboss-4.0.zip
create a JBOSS_HOME environment variable set to the unzipped directory
unix only:
cd $JBOSS_HOME/bin
chmod +x *.sh
</pre></li><li><p>
            Deploy (copy) the <code class="filename">connector-mxj.jar</code> to
            <code class="filename">$JBOSS_HOME/server/default/lib</code>.
          </p></li><li><p>
            Deploy (copy)
            <code class="filename">mysql-connector-java-3.1.4-beta-bin.jar</code>
            to <code class="filename">$JBOSS_HOME/server/default/lib</code>.
          </p></li><li><p>
            Create a <code class="filename">mxjtest.war</code> directory in
            <code class="filename">$JBOSS_HOME/server/default/deploy</code>.
          </p></li><li><p>
            Deploy (copy) <code class="filename">index.jsp</code> to
            <code class="filename">$JBOSS_HOME/server/default/deploy/mxjtest.war</code>.
          </p></li><li><p>
            Create a <code class="filename">mysqld-service.xml</code> file in
            <code class="filename">$JBOSS_HOME/server/default/deploy</code>.
          </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
 &lt;server&gt;
  &lt;mbean code="com.mysql.management.jmx.jboss.JBossMysqldDynamicMBean"
     name="mysql:type=service,name=mysqld"&gt;
  &lt;attribute name="datadir"&gt;/tmp/xxx_data_xxx&lt;/attribute&gt;
  &lt;attribute name="autostart"&gt;true&lt;/attribute&gt;
  &lt;/mbean&gt;
 &lt;/server&gt;
     </pre></li><li><p>
            Start jboss:
          </p><div class="itemizedlist"><ul type="disc"><li><p>
                on unix: <span><strong class="command">$JBOSS_HOME/bin/run.sh</strong></span>
              </p></li><li><p>
                on windows: <span><strong class="command">%JBOSS_HOME%\bin\run.bat</strong></span>
              </p></li></ul></div><p>
            Be ready: JBoss sends a lot of output to the screen.
          </p></li><li><p>
            When JBoss seems to have stopped sending output to the
            screen, open a web browser to:
            <code class="literal">http://localhost:8080/jmx-console</code>
          </p></li><li><p>
            Scroll down to the bottom of the page in the
            <code class="literal">mysql</code> section, select the bulleted
            <code class="literal">mysqld</code> link.
          </p></li><li><p>
            Observe the JMX MBean View page. MySQL should already be
            running.
          </p></li><li><p>
            (If "autostart=true" was set, you may skip this step.)
            Scroll to the bottom of the screen. You may press the
            <span class="guibutton">Invoke</span> button to stop (or start)
            MySQL observe <code class="literal">Operation completed successfully
            without a return value.</code> Click <code class="literal">Back to
            MBean View</code>
          </p></li><li><p>
            To confirm MySQL is running, open a web browser to
            <code class="literal">http://localhost:8080/mxjtest/</code> and you
            should see that
          </p><pre class="programlisting">SELECT 1</pre><p>
            returned with a result of
          </p><pre class="programlisting">1</pre></li><li><p>
            Guided by the
            <code class="filename">$JBOSS_HOME/server/default/deploy/mxjtest.war/index.jsp</code>
            you will be able to use MySQL in your Web Application. There
            is a <code class="literal">test</code> database and a
            <code class="literal">root</code> user (no password) ready to
            experiment with. Try creating a table, inserting some rows,
            and doing some selects.
          </p></li><li><p>
            Shut down MySQL. MySQL will be stopped automatically when
            JBoss is stopped, or: from the browser, scroll down to the
            bottom of the MBean View press the stop service
            <span class="guibutton">Invoke</span> button to halt the service.
            Observe <code class="literal">Operation completed successfully without a
            return value.</code> Using <code class="literal">ps</code> or
            <code class="literal">task manager</code> see that MySQL is no longer
            running
          </p></li></ol></div><p>
        As of 1.0.6-beta version is the ability to have the MBean start
        the MySQL database upon start up. Also, we've taken advantage of
        the JBoss life-cycle extension methods so that the database will
        gracefully shut down when JBoss is shutdown.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-mxj-support"></a>20.5.7. Connector/MXJ Support</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-mxj-support-community">20.5.7.1. Connector/MXJ Community Support</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-support-bug-report">20.5.7.2. How to Report Connector/MXJ Problems</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-mxj-support-changelog">20.5.7.3. Connector/MXJ Change History</a></span></dt></dl></div><p>
      There are a wide variety of options available for obtaining
      support for using Connector/MXJ. You should contact the
      Connector/MXJ community for help before reporting a potential bug
      or problem. See <a href="connectors-apis.html#connector-mxj-support-community" title="20.5.7.1. Connector/MXJ Community Support">Section 20.5.7.1, “Connector/MXJ Community Support”</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-mxj-support-community"></a>20.5.7.1. Connector/MXJ Community Support</h4></div></div></div><p>
        Sun Microsystems, Inc. provides assistance to the user community
        by means of a number of mailing lists and web based forums.
      </p><p>
        You can find help and support through the
        <a href="http://lists.mysql.com/java" target="_top">MySQL and Java</a>
        mailing list.
      </p><p>
        For information about subscribing to MySQL mailing lists or to
        browse list archives, visit
        <a href="http://lists.mysql.com/" target="_top">http://lists.mysql.com/</a>. See
        <a href="introduction.html#mailing-lists" title="1.5.1. MySQL Mailing Lists">Section 1.5.1, “MySQL Mailing Lists”</a>.
      </p><p>
        Community support from experienced users is also available
        through the <a href="http://forums.mysql.com/list.php?39" target="_top">MyODBC
        Forum</a>. You may also find help from other users in the
        other MySQL Forums, located at
        <a href="http://forums.mysql.com" target="_top">http://forums.mysql.com</a>. See
        <a href="introduction.html#forums" title="1.5.2. MySQL Community Support at the MySQL Forums">Section 1.5.2, “MySQL Community Support at the MySQL Forums”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-mxj-support-bug-report"></a>20.5.7.2. How to Report Connector/MXJ Problems</h4></div></div></div><p>
        If you encounter difficulties or problems with Connector/MXJ,
        contact the Connector/MXJ community
        <a href="connectors-apis.html#connector-mxj-support-community" title="20.5.7.1. Connector/MXJ Community Support">Section 20.5.7.1, “Connector/MXJ Community Support”</a>.
      </p><p>
        If reporting a problem, you should ideally include the following
        information with the email:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Operating system and version
          </p></li><li><p>
            Connector/MXJ version
          </p></li><li><p>
            MySQL server version
          </p></li><li><p>
            Copies of error messages or other unexpected output
          </p></li><li><p>
            Simple reproducible sample
          </p></li></ul></div><p>
        Remember that the more information you can supply to us, the
        more likely it is that we can fix the problem.
      </p><p>
        If you believe the problem to be a bug, then you must report the
        bug through <a href="http://bugs.mysql.com/" target="_top">http://bugs.mysql.com/</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-mxj-support-changelog"></a>20.5.7.3. Connector/MXJ Change History</h4></div></div></div><p>
        The Connector/MXJ Change History (Changelog) is located with the
        main Changelog for MySQL. See
        <a href="news.html#news-connector-mxj" title="C.8. MySQL Connector/MXJ Change History">Section C.8, “MySQL Connector/MXJ Change History”</a>.
      </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="connector-cpp"></a>20.6. MySQL Connector/C++</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-cpp-installation-binary">20.6.1. MySQL Connector/C++ Binary Installation</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-installation-source">20.6.2. MySQL Connector/C++ Source Installation</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-apps-windows-visual-studio">20.6.3. MySQL Connector/C++ Building Windows applications with Microsoft Visual Studio</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-apps-linux-netbeans">20.6.4. MySQL Connector/C++ Building Linux applications with NetBeans</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-getting-started-examples">20.6.5. MySQL Connector/C++ Getting Started: Usage Examples</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-debug-tracing">20.6.6. MySQL Connector/C++ Debug Tracing</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-references">20.6.7. MySQL Connector/C++ References</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-bugs">20.6.8. MySQL Connector/C++ Known Bugs and Issues</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-requests">20.6.9. MySQL Connector/C++ Feature requests</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-support">20.6.10. MySQL Connector/C++ Support</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-faq">20.6.11. MySQL Connector/C++ FAQ</a></span></dt></dl></div><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>Please note, official support is not available for the beta version of MySQL Connector/C++.</p></div><p>
    MySQL Connector/C++ is a MySQL database connector for C++.
  </p><p>
    The MySQL Connector/C++ is licensed under the terms of the GPL, like most MySQL
    Connectors. There are special exceptions to the terms and conditions
    of the GPL as it is applied to this software, see FLOSS License
    Exception. If you need a non-GPL license for commercial distribution
    please contact us.
  </p><p>
    The MySQL Connector/C++ is compatible with the JDBC 4.0 API. However, MySQL Connector/C++ does
    not implement all of the JDBC 4.0 API. The MySQL Connector/C++ current version
    features the following classes:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="classname">Connection</code>
      </p></li><li><p>
        <code class="classname">DatabaseMetaData</code>
      </p></li><li><p>
        <code class="classname">Driver</code>
      </p></li><li><p>
        <code class="classname">PreparedStatement</code>
      </p></li><li><p>
        <code class="classname">ResultSet</code>
      </p></li><li><p>
        <code class="classname">ResultSetMetaData</code>
      </p></li><li><p>
        <code class="classname">Savepoint</code>
      </p></li><li><p>
        <code class="classname">Statement</code>
      </p></li></ul></div><p>
    The JDBC 4.0 API defines approximately 450 methods for the above
    mentioned classes. MySQL Connector/C++ implements around 80% of these and makes
    them available in the preview release.
  </p><p>
    The Beta release has been successfully compiled and tested on the
    following platforms:
  </p><p>
    <span class="bold"><strong>AIX</strong></span>
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        5.2 (PPC32, PPC64)
      </p></li><li><p>
        5.3 (PPC32, PPC64)
      </p></li></ul></div><p>
    <span class="bold"><strong>FreeBSD</strong></span>
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        6.0 (x86, x86_64)
      </p></li></ul></div><p>
    <span class="bold"><strong>HPUX</strong></span>
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        11.11 (PA-RISC 32bit, PA-RISC 64bit)
      </p></li></ul></div><p>
    <span class="bold"><strong>Linux</strong></span>
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        Debian 3.1 (PPC32, x86)
      </p></li><li><p>
        FC4 (x86)
      </p></li><li><p>
        RHEL 3 (ia64, x86, x86_64)
      </p></li><li><p>
        RHEL 4 (ia64, x86, x86_64)
      </p></li><li><p>
        RHEL 5 (ia64, x86, x86_64)
      </p></li><li><p>
        SLES 9 (ia64, x86, x86_64)
      </p></li><li><p>
        SLES 10 (ia64, x86_64)
      </p></li><li><p>
        SuSE 10.3, (x86_64)
      </p></li><li><p>
        Ubuntu 8.04 (x86)
      </p></li><li><p>
        Ubuntu 8.10 (x86_64)
      </p></li></ul></div><p>
    <span class="bold"><strong>Mac</strong></span>
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        MacOSX 10.3 (PPC32, PPC64)
      </p></li><li><p>
        MacOSX 10.4 (PPC32, PPC64, x86)
      </p></li><li><p>
        MacOSX 10.5 (PPC32, PPC64, x86, x86_64)
      </p></li></ul></div><p>
    <span class="bold"><strong>SunOS</strong></span>
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        Solaris 8 (SPARC32, SPARC64, x86)
      </p></li><li><p>
        Solaris 9 (SPARC32, SPARC64, x86)
      </p></li><li><p>
        Solaris 10 (SPARC32, SPARC64, x86, x86_64)
      </p></li></ul></div><p>
    <span class="bold"><strong>Windows</strong></span>
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        XP Professional (32bit)
      </p></li><li><p>
        2003 (64bit)
      </p></li></ul></div><p>
    Future versions will run on all platforms supported by the MySQL
    Server.
  </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      MySQL Connector/C++ supports MySQL 5.1 and later.
    </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      MySQL Connector/C++ supports only Microsoft Visual Studio 2003 and above on
      Windows.
    </p></div><p>
    <span class="bold"><strong>MySQL Connector/C++ Download</strong></span>
  </p><p>
    You can download the source code for the MySQL Connector/C++ preview release at
    the
    <a href="http://downloads.mysql.com/forge/connector_cpp_preview" target="_top">download
    site</a>.
  </p><p>
    <span class="bold"><strong>MySQL Connector/C++ Source repository</strong></span>
  </p><p>
    The latest development version is also available through
    <a href="https://launchpad.net/mysql-connector-cpp" target="_top">Launchpad</a>.
  </p><p>
    Bazaar is used for the MySQL Connector/C++ code repository. You can check out the
    source code using the <span><strong class="command">bzr</strong></span> command line tool:
  </p><pre class="programlisting">shell&gt; bzr branch lp:~mysql/mysql-connector-cpp/trunk .</pre><p>
    The source of the 1.0.3alpha release is available from the following
    branch:
  </p><pre class="programlisting">shell&gt; bzr branch lp:~andrey-mysql/mysql-connector-cpp/v1_0_3</pre><p>
    The source of the 1.0.2alpha release is available from the following
    branch:
  </p><pre class="programlisting">shell&gt; bzr branch lp:~andrey-mysql/mysql-connector-cpp/v1_0_2</pre><p>
    The source of the 1.0.1alpha release is available from the following
    branch:
  </p><pre class="programlisting">shell&gt; bzr branch lp:~andrey-mysql/mysql-connector-cpp/v1_0_1</pre><p>
    <span class="bold"><strong>Binary distributions</strong></span>
  </p><p>
    Starting with 1.0.4 Beta, binary distributions will be made
    available in addition to source code releases. The releases
    available are shown below.
  </p><p>
    Microsoft Windows platform:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        Without installer, a Zip file
      </p></li><li><p>
        MSI installer package
      </p></li></ul></div><p>
    Other platforms:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        Compressed GNU TAR archive (tar.gz)
      </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      Note that source packages are available for all platforms in the
      Compressed GNU TAR archive (tar.gz) format.
    </p></div><p>
    <span class="bold"><strong>MySQL Connector/C++ Advantages</strong></span>
  </p><p>
    Using MySQL Connector/C++ instead of the MySQL C API (MySQL Client Library)
    offers the following advantages for C++ users:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        Convenience of pure C++, no C function calls required
      </p></li><li><p>
        Supports an industry standard API, JDBC 4.0
      </p></li><li><p>
        Supports the object-oriented programming paradigm
      </p></li><li><p>
        Reduces development time
      </p></li><li><p>
        MySQL Connector/C++ is licensed under the GPL with the FLOSS License
        Exception
      </p></li><li><p>
        MySQL Connector/C++ is available under a commercial license upon request
      </p></li></ul></div><p>
    <span class="bold"><strong>MySQL Connector/C++ Status</strong></span>
  </p><p>
    MySQL Connector/C++ is available as a development preview version. We kindly ask
    users and developers to try it out and provide us with feedback. We
    do not encourage you to use it in production environments.
  </p><p>
    Note that MySQL Workbench is successfully using MySQL Connector/C++.
  </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      Sun Microsystems does not provide formal support for MySQL Connector/C++.
    </p></div><p>
    If you have any queries please
    <a href="connectors-apis.html#connector-cpp-support" title="20.6.10. MySQL Connector/C++ Support">contact us</a>.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-cpp-installation-binary"></a>20.6.1. MySQL Connector/C++ Binary Installation</h3></div></div></div><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>Please note, official support is not available for the beta version of MySQL Connector/C++.</p></div><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>
        One problem that can occur is when the tools you use to build
        your application are not compatible with the tools used to build
        the binary versions of MySQL Connector/C++. Ideally you need to build your
        application with the same tools that were used to build the
        MySQL Connector/C++ binaries. To help with this the following resources are
        provided.
      </p><p>
        All distributions contain a <code class="filename">README</code> file,
        which contains platform-specific notes. At the end of the
        <code class="filename">README</code> file contained in the binary
        distribution you will find the settings used to build the
        binaries. If you experience build-related issues on a platform,
        it may help to check the settings used on the platform to build
        the binary.
      </p><p>
        For your convenience the same information, but more frequently
        updated, can be found on the
        <a href="http://forge.mysql.com/wiki/Connector_C%2B%2B_Binary_Builds" target="_top">MySQL
        Forge site</a>.
      </p><p>
        A better solution is to build your MySQL Connector/C++ libraries from the
        source code, using the same tools that you use for building your
        application. This ensures compatibility.
      </p></div><p>
      <span class="bold"><strong>Archive Package</strong></span>
    </p><p>
      Unpack the archive into an appropriate directory. If you plan to
      use a dynamically linked version of MySQL Connector/C++, make sure that your
      system can reference the MySQL Client Library. Consult your
      operating system documentation on how do modify and expand the
      search path for libraries. In case you cannot modify the library
      search path it may help to copy your application, the MySQL Connector/C++
      library and the MySQL Client Library into the same directory. Most
      systems search for libraries in the current directory.
    </p><p>
      <span class="bold"><strong>Windows MSI Installer</strong></span>
    </p><p>
      Windows users can choose between two binary packages:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Without installer (unzip in C:\)
        </p></li><li><p>
          Windows MSI Installer (x86)
        </p></li></ol></div><p>
      Using the MSI Installer may be the easiest solution. Running the
      MSI Installer does not require any administrative permissions as
      it simply copies files.
    </p><div class="figure"><a name="connector-cpp-installer-welcome-figure"></a><p class="title"><b>Figure 20.40. Windows Installer Welcome Screen</b></p><div class="mediaobject"><img src="images/connector-cpp-installer-welcome.png" alt="Windows Installer Welcome Screen"></div></div><div class="figure"><a name="connector-cpp-installer-overview-figure"></a><p class="title"><b>Figure 20.41. Windows Installer Overview Screen</b></p><div class="mediaobject"><img src="images/connector-cpp-installer-overview.png" alt="Windows Installer Overview Screen"></div></div><p>
      The “<span class="quote">Typical</span>” installation consists of all required
      header files and the Release libraries. The only available
      “<span class="quote">Custom</span>” installation option allows you to install
      additional Debug versions of the connector libraries.
    </p><div class="figure"><a name="connector-cpp-installer-custom-figure"></a><p class="title"><b>Figure 20.42. Windows Installer Custom Setup Screen</b></p><div class="mediaobject"><img src="images/connector-cpp-installer-custom.png" alt="Windows Installer Custom Setup
          Screen"></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-cpp-installation-source"></a>20.6.2. MySQL Connector/C++ Source Installation</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-cpp-installation-source-unix">20.6.2.1. Building source on Unix, Solaris and Mac OS X</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-installation-source-windows">20.6.2.2. Building on Windows</a></span></dt></dl></div><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>Please note, official support is not available for the beta version of MySQL Connector/C++.</p></div><p>
      The MySQL Connector/C++ is based on the MySQL Client Library (MySQL C API).
      MySQL Connector/C++ is linked against the MySQL Client Library. You need to
      have the MySQL Client Library installed in order to compile
      MySQL Connector/C++.
    </p><p>
      You also need to have the cross-platform build tool CMake 2.4, or
      newer, and GLib 2.2.3 or newer installed. Check the README file
      included with the distribution for platform specific notes on
      building for Windows and SunOS.
    </p><p>
      Typically the MySQL Client Library is installed when the MySQL
      Server is installed. However, check your operating system
      documentation for other installation options.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-cpp-installation-source-unix"></a>20.6.2.1. Building source on Unix, Solaris and Mac OS X</h4></div></div></div><div class="orderedlist"><ol type="1"><li><p>
            Run CMake to build a Makefile:
          </p><pre class="programlisting">shell&gt; me@host:/path/to/mysql-connector-cpp&gt; cmake .
-- Check for working C compiler: /usr/local/bin/gcc
-- Check for working C compiler: /usr/local/bin/gcc -- works
[...]
-- Generating done
-- Build files have been written to: /path/to/mysql-connector-cpp/</pre><p>
            On non-Windows systems, CMake first checks to see if the
            CMake variable <code class="literal">MYSQL_CONFIG_EXECUTABLE</code> is
            set. If it is not found CMake will try to locate
            <code class="filename">mysql_config</code> in the default locations.
          </p><p>
            If you have any problems with the configure process please
            check the troubleshooting instructions below.
          </p></li><li><p>
            Use make to build the libraries. First make sure you have a
            clean build:
          </p><pre class="programlisting">shell&gt; me@host:/path/to/mysql-connector-cpp&gt; make clean</pre><p>
            Then build the connector:
          </p><pre class="programlisting">me@host:/path/to/mysql-connector-cpp&gt; make
[  1%] Building CXX object »
driver/CMakeFiles/mysqlcppconn.dir/mysql_connection.o
[  3%] Building CXX object »
driver/CMakeFiles/mysqlcppconn.dir/mysql_constructed_resultset.o
[...]
[100%] Building CXX object examples/CMakeFiles/statement.dir/statement.o
Linking CXX executable statement</pre><p>
            If all goes well, you will find the MySQL Connector/C++ library in
            <code class="filename">/path/to/cppconn/libmysqlcppconn.so</code>.
          </p></li><li><p>
            Finally make sure the header and library files are installed
            to their correct locations:
          </p><pre class="programlisting">make install</pre><p>
            Unless you have changed this in the configuration step, the
            header files will be copied to the directory
            <code class="filename">/usr/local/include</code>. The header files
            copied are <code class="filename">mysql_connection.h</code> and
            <code class="filename">mysql_driver.h</code>.
          </p><p>
            Again, unless you have specified otherwise, the library
            files will be copied to <code class="filename">/usr/local/lib</code>.
            The files copied are <code class="filename">libmysqlcppcon.so</code>,
            the dynamic library, and
            <code class="filename">libmysqlcppconn-static.a</code>, the static
            library.
          </p></li></ol></div><p>
        If you encounter any errors, please first carry out the checks
        shown below:
      </p><div class="orderedlist"><ol type="1"><li><p>
            CMake options: MySQL installation path, debug version and
            more
          </p><p>
            In case of configure and/or compile problems check the list
            of CMake options:
          </p><pre class="programlisting">shell&gt; me@host:/path/to/mysql-connector-cpp&gt; cmake -L
[...]
CMAKE_BACKWARDS_COMPATIBILITY:STRING=2.4
CMAKE_BUILD_TYPE:STRING=
CMAKE_INSTALL_PREFIX:PATH=/usr/local
EXECUTABLE_OUTPUT_PATH:PATH=
LIBRARY_OUTPUT_PATH:PATH=
MYSQLCPPCONN_GCOV_ENABLE:BOOL=0
MYSQLCPPCONN_TRACE_ENABLE:BOOL=0
MYSQL_CONFIG_EXECUTABLE:FILEPATH=/usr/bin/mysql_config</pre><p>
            For example, if your MySQL Server installation path is not
            <code class="filename">/usr/local/mysql</code> and you want to build
            a debug version of the MySQL Connector/C++ use:
          </p><pre class="programlisting">shell&gt; me@host:/path/to/mysql-connector-cpp&gt; cmake » 
-D CMAKE_BUILD_TYPE:STRING=Debug »
-D MYSQL_CONFIG_EXECUTABLE=/path/to/my/mysql/server/bin/mysql_config .</pre></li><li><p>
            Verify your settings with <span><strong class="command">cmake
            <code class="option">-L</code></strong></span>:
          </p><pre class="programlisting">shell&gt; me@host:/path/to/mysql-connector-cpp&gt; cmake -L
[...]
CMAKE_BACKWARDS_COMPATIBILITY:STRING=2.4
CMAKE_BUILD_TYPE:STRING=
CMAKE_INSTALL_PREFIX:PATH=/usr/local
EXECUTABLE_OUTPUT_PATH:PATH=
LIBRARY_OUTPUT_PATH:PATH=
MYSQLCPPCONN_GCOV_ENABLE:BOOL=0
MYSQLCPPCONN_TRACE_ENABLE:BOOL=0
MYSQL_CONFIG_EXECUTABLE=/path/to/my/mysql/server/bin/mysql_config</pre><p>
            Proceed by carrying out a <span><strong class="command">make clean</strong></span>
            command followed by a <span><strong class="command">make</strong></span> command, as
            described above.
          </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-cpp-installation-source-windows"></a>20.6.2.2. Building on Windows</h4></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Please note the only compiler formally supported for Windows
          is Microsoft Visual Studio 2003 and above.
        </p></div><p>
        The basic steps for building the connector on Windows are the
        same as for Unix. It is important to use CMake 2.6.2 or newer to
        generate build files for your compiler and to invoke the
        compiler.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          On Windows, <code class="literal">mysql_config</code> is not present, so
          CMake will attempt to retrieve the location of MySQL from the
          environment variable <code class="literal">$ENV{MYSQL_DIR}</code>. If
          <code class="literal">MYSQL_DIR</code> is not set, CMake will then
          proceed to check for MySQL in the following locations:
          <code class="literal">$ENV{ProgramFiles}/MySQL/*/include</code>, and
          <code class="literal">$ENV{SystemDrive}/MySQL/*/include</code>.
        </p></div><p>
        CMake makes it easy for you to try out other compilers. However,
        you may experience compile warnings, compile errors or linking
        issues not detected by Visual Studio. Patches are gratefully
        accepted to fix issues with other compilers.
      </p><p>
        Consult the CMake manual or check <code class="literal">cmake
        --help</code> to find out which build systems are supported
        by your CMake version:
      </p><pre class="programlisting">C:\&gt;cmake --help
cmake version 2.6-patch 2
Usage
[...]
Generators

The following generators are available on this platform:
  Borland Makefiles           = Generates Borland makefiles.
  MSYS Makefiles              = Generates MSYS makefiles.
  MinGW Makefiles             = Generates a make file for use with
                                mingw32-make.
  NMake Makefiles             = Generates NMake makefiles.
  Unix Makefiles              = Generates standard UNIX makefiles.
  Visual Studio 6             = Generates Visual Studio 6 project files.
  Visual Studio 7             = Generates Visual Studio .NET 2002 project
                                files.
  Visual Studio 7 .NET 2003   = Generates Visual Studio .NET 2003 project
                                files.
  Visual Studio 8 2005        = Generates Visual Studio .NET 2005 project
                                files.
  Visual Studio 8 2005 Win64  = Generates Visual Studio .NET 2005 Win64
                                project files.
  Visual Studio 9 2008        = Generates Visual Studio 9 2008 project fil
  Visual Studio 9 2008 Win64  = Generates Visual Studio 9 2008 Win64 proje
                                files.
[...]</pre><p>
        It is likely that your CMake binary will support more compilers,
        known by CMake as <span class="emphasis"><em>generators</em></span>, than
        supported by MySQL Connector/C++. We have built the connector using the
        following generators:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Microsoft Visual Studio 8 (Visual Studio 2005)
          </p></li><li><p>
            Microsoft Visual Studio 9 (Visual Studio 2008, Visual Studio
            2008 Express)
          </p></li><li><p>
            NMake
          </p></li></ul></div><p>
        Please see the building instructions for Unix, Solaris and Mac
        OS X for troubleshooting and configuration hints.
      </p><p>
        The steps to build the connector are given below:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Run CMake to generate build files for your
            <span class="emphasis"><em>generator</em></span>:
          </p><p>
            <span class="bold"><strong>Visual Studio</strong></span>
          </p><pre class="programlisting"> C:\path_to_mysql_cpp&gt;cmake -G "Visual Studio 9 2008"
-- Check for working C compiler: cl
-- Check for working C compiler: cl -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working CXX compiler: cl
-- Check for working CXX compiler: cl -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- ENV{MYSQL_DIR} =
-- MySQL Include dir: C:/Programme/MySQL/MySQL Server 5.1/include
-- MySQL Library    : C:/Progams/MySQL/MySQL Server 5.1/lib/opt/mysqlclient.lib
-- MySQL Library dir: C:/Progams/MySQL/MySQL Server 5.1/lib/opt
-- MySQL CFLAGS:
-- MySQL Link flags:
-- MySQL Include dir: C:/Progams/MySQL/MySQL Server 5.1/include
-- MySQL Library dir: C:/Progams/MySQL/MySQL Server 5.1/lib/opt
-- MySQL CFLAGS:
-- MySQL Link flags:
-- Configuring cppconn
-- Configuring test cases
-- Looking for isinf
-- Looking for isinf - not found
-- Looking for isinf
-- Looking for isinf - not found.
-- Looking for finite
-- Looking for finite - not found.
-- Configuring C/J junit tests port
-- Configuring examples
-- Configuring done
-- Generating done
-- Build files have been written to: C:\path_to_mysql_cpp
C:\path_to_mysql_cpp&gt;dir *.sln *.vcproj
[...]
19.11.2008  12:16            23.332 MYSQLCPPCONN.sln
[...]
19.11.2008  12:16            27.564 ALL_BUILD.vcproj
19.11.2008  12:16            27.869 INSTALL.vcproj
19.11.2008  12:16            28.073 PACKAGE.vcproj
19.11.2008  12:16            27.495 ZERO_CHECK.vcproj</pre><p>
            <span class="bold"><strong>NMake</strong></span>
          </p><pre class="programlisting"> C:\path_to_mysql_cpp&gt;cmake -G "NMake Makefiles"
-- The C compiler identification is MSVC
-- The CXX compiler identification is MSVC
[...]
-- Build files have been written to: C:\path_to_mysql_cpp</pre></li><li><p>
            Use your compiler to build MySQL Connector/C++
          </p><p>
            <span class="bold"><strong>Visual Studio - GUI</strong></span>
          </p><p>
            Open the newly generated project files in the Visual Studio
            GUI or use a Visual Studio command line to build the driver.
            The project files contain a variety of different
            configurations. Among them debug and non-debug versions.
          </p><p>
            <span class="bold"><strong>Visual Studio - NMake</strong></span>
          </p><pre class="programlisting">C:\path_to_mysql_cpp&gt;nmake
 
Microsoft (R) Program Maintenance Utility Version 9.00.30729.01
Copyright (C) Microsoft Corporation.  All rights reserved.

Scanning dependencies of target mysqlcppconn
[  2%] Building CXX object driver/CMakeFiles/mysqlcppconn.dir/mysql_connection.obj
mysql_connection.cpp
[...]
Linking CXX executable statement.exe
[100%] Built target statement</pre></li></ol></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-cpp-apps-windows-visual-studio"></a>20.6.3. MySQL Connector/C++ Building Windows applications with Microsoft Visual Studio</h3></div></div></div><p>
      MySQL Connector/C++ is available as a static or dynamic library to use with
      your application. This section looks at how to link the library to
      your application.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        To avoid potential crashes the build configuration of MySQL Connector/C++ should match the build configuration of the application using it. For example, do not use the release build of MySQL Connector/C++ with a debug build of the client application.
      </p></div><p>
      <span class="bold"><strong>Static library</strong></span>
    </p><p>
      The MySQL Connector/C++ static library file is
      <code class="filename">mysqlcppconn-static.lib</code>. This needs to be
      statically linked with your application. You also need to link
      against the files <code class="filename">libmysql.dll</code> and
      <code class="filename">libmysql.lib</code>. Once linking has been
      successfully completed, the application will require access to
      <code class="filename">libmysql.dll</code> at run time.
    </p><p>
      <span class="bold"><strong>Dynamic library</strong></span>
    </p><p>
      The MySQL Connector/C++ dynamic library file is
      <code class="filename">mysqlcppconn.dll</code>. In order to build your
      client application you need to link it with the file
      <code class="filename">mysqlcppconn.lib</code>. At run time the application
      will require access to the files
      <code class="filename">mysqlcppconn.dll</code> and
      <code class="filename">libmysql.dll</code>.
    </p><p>
      <span class="bold"><strong>Building a MySQL Connector/C++ application with Microsoft
      Visual Studio</strong></span>
    </p><p>
      Initially, the procedure for building an application to use either
      the static or dynamic library is the same. You then carry out some
      additional steps depending on whether you want to build your
      application to use the
      <a href="connectors-apis.html#connector-cpp-application-build-static">static</a>
      or
      <a href="connectors-apis.html#connector-cpp-application-build-dynamic">dynamic</a>
      library.
    </p><div class="orderedlist"><ol type="1"><li><p>
          Select <span class="guimenu">File</span>, <span class="guimenu">New</span>,
          <span class="guimenu">Project</span> from the main menu.
        </p><div class="figure"><a name="connector-cpp-menu-new-project"></a><p class="title"><b>Figure 20.43. Creating a new project</b></p><div class="mediaobject"><img src="images/connector-cpp-menu-new-project.png" alt="Creating a new project"></div></div></li><li><p>
          In the wizard select <span class="guilabel">Visual C++</span>,
          <span class="guilabel">Win32</span>. From <span class="guilabel">Visual Studio
          Installed Templates</span> select the application type
          <span class="guilabel">Win32 Console Application</span>. Enter a name
          for the application, and then click <span class="guibutton">OK</span>,
          to move to the Win32 Application Wizard.
        </p><div class="figure"><a name="connector-cpp-new-project-wizard"></a><p class="title"><b>Figure 20.44. The New Project dialog box</b></p><div class="mediaobject"><img src="images/connector-cpp-new-project-wizard.png" alt="The New Project dialog box"></div></div></li><li><p>
          In the Win32 Application Wizard, click on
          <span class="guilabel">Application Settings</span> and ensure the
          defaults are selected. The radio button <span class="guilabel">Console
          application</span>, and the checkbox <span class="guilabel">Precompiled
          headers</span> will be selected. Click
          <span class="guibutton">Finish</span> to close the wizard.
        </p><div class="figure"><a name="connector-cpp-win32-application-wizard"></a><p class="title"><b>Figure 20.45. The Win32 Application Wizard</b></p><div class="mediaobject"><img src="images/connector-cpp-win32-application-wizard.png" alt="The Win32 Application Wizard"></div></div></li><li><p>
          From the drop down list box on the toolbar, change from the
          default <span class="guilabel">Debug</span> build to the
          <span class="guilabel">Release</span> build.
        </p><div class="figure"><a name="connector-cpp-select-release-build"></a><p class="title"><b>Figure 20.46. Selecting the Release build</b></p><div class="mediaobject"><img src="images/connector-cpp-select-release-build.png" alt="Selecting the Release build"></div></div></li><li><p>
          From the main menu select <span class="guimenu">Project</span>,
          <span class="guimenu">Properties</span>. This can also be accessed using
          the hot key <span class="guibutton">ALT</span> +
          <span class="guibutton">F7</span>.
        </p><div class="figure"><a name="connector-cpp-menu-project-properties"></a><p class="title"><b>Figure 20.47. Selecting Project Properties from the main menu</b></p><div class="mediaobject"><img src="images/connector-cpp-menu-project-properties.png" alt="Selecting Project Properties from the
              main menu"></div></div></li><li><p>
          Under <span class="guilabel">Configuration Properties</span>, open the
          tree view.
        </p></li><li><p>
          Select <span class="guimenu">C++</span>, <span class="guilabel">General</span> in
          the tree view.
        </p><div class="figure"><a name="connector-cpp-properties"></a><p class="title"><b>Figure 20.48. Setting properties</b></p><div class="mediaobject"><img src="images/connector-cpp-properties.png" alt="Setting properties"></div></div></li><li><p>
          You now need to ensure that Visual Studio can find the MySQL
          include directory. This directory includes header files that
          can optionally be installed when installing MySQL Server.
        </p><div class="figure"><a name="connector-cpp-mysql-include-dir"></a><p class="title"><b>Figure 20.49. MySQL include directory</b></p><div class="mediaobject"><img src="images/connector-cpp-mysql-include-dir.png" alt="MySQL include directory"></div></div></li><li><p>
          Then in the <span class="guilabel">Additional Include
          Directories</span> text field, add the MySQL
          <code class="filename">include/</code> directory.
        </p><div class="figure"><a name="connector-cpp-mysql-include-select-directory-dialog"></a><p class="title"><b>Figure 20.50. Select Directory dialog</b></p><div class="mediaobject"><img src="images/connector-cpp-mysql-include-select-directory-dialog.png" alt="Select Directory dialog"></div></div></li><li><p>
          You will also need to set the location of additional libraries
          that Visual Studio will need in order to build the
          application. These are located in the MySQL
          <code class="filename">lib/opt</code> directory, a sub-directory of the
          MySQL Server installation directory.
        </p><div class="figure"><a name="connector-cpp-mysql-lib-opt-dir"></a><p class="title"><b>Figure 20.51. Typical contents of MySQL lib/opt directory</b></p><div class="mediaobject"><img src="images/connector-cpp-mysql-lib-opt-dir.png" alt="Typical contents of MySQL lib/opt
              directory"></div></div></li><li><p>
          In the tree view open <span class="guilabel">Linker</span>,
          <span class="guilabel">General</span>, <span class="guilabel">Additional Library
          Directories</span>.
        </p><div class="figure"><a name="connector-cpp-additional-library-dir"></a><p class="title"><b>Figure 20.52. Additional Library Directories</b></p><div class="mediaobject"><img src="images/connector-cpp-additional-library-dir.png" alt="Additional Library Directories"></div></div></li><li><p>
          Add the <code class="filename">lib/opt</code> directory into the
          <span class="guilabel">Additional Library Directories</span> text
          field. This allows the library file
          <code class="filename">libmysql.lib</code> to be found.
        </p><div class="figure"><a name="connector-cpp-additional-lib-dir-select"></a><p class="title"><b>Figure 20.53. Additional Library Directories dialog</b></p><div class="mediaobject"><img src="images/connector-cpp-additional-lib-dir-select.png" alt="Additional Library Directories
              dialog"></div></div></li></ol></div><p><a name="connector-cpp-application-build-static"></a>
      The remaining steps depend on whether you are building an
      application to use the MySQL Connector/C++ static or dynamic library. If you
      are building your application to use the dynamic library
      <a href="connectors-apis.html#connector-cpp-application-build-dynamic">go
      here</a>. If you are building your application to use the
      static library, carry out the following steps:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Then open <span class="guilabel">Linker</span>,
          <span class="guilabel">Input</span>, <span class="guilabel">Additional
          Dependencies</span>.
        </p><div class="figure"><a name="connector-cpp-additional-dependencies"></a><p class="title"><b>Figure 20.54. </b></p><div class="mediaobject"><img src="images/connector-cpp-additional-dependencies.png"></div></div></li><li><p>
          Enter <code class="filename">mysqlcppconn-static.lib</code> and
          <code class="filename">libmysql.lib</code>.
        </p><div class="figure"><a name="connector-cpp-additional-dependencies-added"></a><p class="title"><b>Figure 20.55. Adding additional dependencies</b></p><div class="mediaobject"><img src="images/connector-cpp-additional-dependencies-added.png" alt="Adding additional dependencies"></div></div></li><li><p>
          By default <code class="literal">CPPCONN_PUBLIC_FUNC</code> is defined
          to declare functions to be compatible with an application that
          calls a DLL. If building an application to call the static
          library, you must ensure that function prototypes are
          compatible with this. In this case
          <code class="literal">CPPCONN_PUBLIC_FUNC</code> needs to be defined to
          be an empty string, so that functions are declared with the
          correct prototype.
        </p><p>
          In the <span class="guilabel">Project</span>,
          <span class="guilabel">Properties</span> tree view, under
          <span class="guilabel">C++</span>, <span class="guilabel">Preprocessor</span>,
          enter <code class="literal">CPPCONN_PUBLIC_FUNC=</code> into the
          <span class="guimenu">Preprocessor Definitions</span> text field.
        </p><div class="figure"><a name="connector-cpp-cppconn-public-func"></a><p class="title"><b>Figure 20.56. Setting the CPPCONN_PUBLIC_FUNC define</b></p><div class="mediaobject"><img src="images/connector-cpp-cppconn-public-func.png" alt="Setting the CPPCONN_PUBLIC_FUNC
              define"></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            Make sure you enter <code class="literal">CPPCONN_PUBLIC_FUNC=</code>
            and not <code class="literal">CPPCONN_PUBLIC_FUNC</code>, as it needs
            to be defined as an empty string.
          </p></div></li></ol></div><p><a name="connector-cpp-application-build-dynamic"></a>
      If building an application to use the MySQL Connector/C++ dynamically linked
      library carry out these steps:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Under <span class="guilabel">Linker</span>, <span class="guilabel">Input</span>,
          add <code class="filename">mysqlcppconn.lib</code> into the
          <span class="guilabel">Additional Dependencies</span> text field.
        </p></li><li><p>
          The application will need to access the MySQL Connector/C++ Dynamic Linked
          Library at run time. Therefore,
          <code class="filename">mysqlcppconn.dll</code> needs to be in the same
          directory as the application executable, or somewhere on the
          system's path.
        </p><p>
          Copy <code class="filename">mysqlcppconn.dll</code> to the same
          directory as the application. Alternatively, extend the
          <code class="literal">PATH</code> environment variable using
          <code class="literal">SET PATH=%PATH%;C:\path\to\cpp</code>.
          Alternatively, you can copy
          <code class="filename">mysqlcppconn.dll</code> to the Windows
          installation Directory, typically
          <code class="filename">c:\windows</code>.
        </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-cpp-apps-linux-netbeans"></a>20.6.4. MySQL Connector/C++ Building Linux applications with NetBeans</h3></div></div></div><p>
      This section describes how you can build MySQL Connector/C++ applications for
      Linux using the NetBeans IDE.
    </p><div class="figure"><a name="connector-cpp-netbeans"></a><p class="title"><b>Figure 20.57. The NetBeans IDE</b></p><div class="mediaobject"><img src="images/connector-cpp-netbeans.png" width="800" height="600" alt="The NetBeans IDE"></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        To avoid potential crashes the build configuration of MySQL Connector/C++ should match the build configuration of the application using it. For example, do not use the release build of MySQL Connector/C++ with a debug build of the client application.
      </p></div><div class="orderedlist"><ol type="1"><li><p>
          The first step of building your application is to create a new
          project. Select <span class="guimenu">File</span>, <span class="guimenu">New
          Project</span>. Choose a <span class="guilabel">C/C++
          Application</span> and click <span class="guibutton">Next</span>.
        </p></li><li><p>
          Give the project a name and click
          <span class="guibutton">Finish</span>. A new project is created.
        </p></li><li><p>
          In the <span class="guilabel">Projects</span> tab, right-click on
          <span class="guilabel">Source Files</span> and select
          <span class="guimenu">New</span>, then <span class="guimenu">Main C++
          File...</span>.
        </p></li><li><p>
          Change the filename, or simply select the defaults and click
          <span class="guibutton">Finish</span> to add the new file to the
          project.
        </p></li><li><p>
          You now need to add some working code to you main source file.
          Explore your MySQL Connector/C++ installation and navigate to the
          <code class="filename">examples</code> directory.
        </p></li><li><p>
          Select a suitable example such as
          <code class="filename">standalone_example_docs1.cpp</code>. Copy all
          the code in this file, and use it to replace the code in your
          existing main source file. Amend the code to reflect the
          connection properties required for your test database. You now
          have a working example that will access a MySQL database using
          MySQL Connector/C++.
        </p></li><li><p>
          You will notice that at this point NetBeans is showing some
          errors in the source code. This is because you need to direct
          NetBeans to the necessary header files that need to be
          included. Select <span class="guimenu">File</span>, <span class="guimenu">Project
          Properties</span> from the main menu.
        </p></li><li><p>
          In the <span class="guilabel">Categories:</span> tree view panel,
          navigate to <span class="guilabel">Build</span>, <span class="guilabel">C++
          Compiler</span>.
        </p></li><li><p>
          In the <span class="guilabel">General</span> panel, select
          <span class="guilabel">Include Directories</span>.
        </p></li><li><p>
          Click the <span class="guibutton">...</span> button.
        </p></li><li><p>
          Click <span class="guibutton">Add</span> and then navigate to the
          directory where the MySQL Connector/C++ header files are located. This will
          be <code class="filename">/usr/local/include</code> unless you have
          installed the files to a different location. Click
          <span class="guibutton">Select</span>. Click
          <span class="guibutton">OK</span>.
        </p><div class="figure"><a name="connector-cpp-netbeans-static-properties-include"></a><p class="title"><b>Figure 20.58. Setting the header include directory</b></p><div class="mediaobject"><img src="images/connector-cpp-netbeans-static-properties-include.png" alt="Setting the header include
              directory"></div></div></li><li><p>
          Click <span class="guibutton">OK</span> again to close the
          <span class="guilabel">Project Properties</span> dialog.
        </p></li></ol></div><p>
      At this point you have created a NetBeans project, containing a
      single C++ source file. You have also ensured that the necessary
      include files are accessible. Before continuing, you need to
      decide whether your project is to use the MySQL Connector/C++ static or dynamic
      library. The project settings are slightly different in each case,
      as you need to link against a different library.
    </p><p>
      <span class="bold"><strong>Using the static library</strong></span>
    </p><p>
      If you intend to use the static library you will need to link
      against two library files,
      <code class="filename">libmysqlcppconn-static.a</code> and
      <code class="filename">libmysqlclient.a</code>. The locations of the files
      will depend on your setup, but typically the former will be found
      in <code class="filename">/usr/local/lib</code> and the latter in
      <code class="filename">/usr/lib</code>. Note the file
      <code class="filename">libmysqlclient.a</code> is not part of MySQL Connector/C++, but
      is the MySQL Client Library file distributed with MySQL Server.
      Remember, the MySQL Client Library is an optional component as
      part of the MySQL Server installation process. Note the MySQL
      Client Library is also available as part of the new MySQL Connector/C
      distribution.
    </p><div class="orderedlist"><ol type="1"><li><p>
          The first step is to set the project to link the necessary
          library files. Select <span class="guimenu">File</span>,
          <span class="guimenu">Project Properties</span> from the main menu.
        </p></li><li><p>
          In the <span class="guilabel">Categores:</span> tree view navigate to
          <span class="guilabel">Linker</span>.
        </p></li><li><p>
          In the <span class="guilabel">General</span> panel select
          <span class="guilabel">Additional Library Directories</span>. Click the
          <span class="guibutton">...</span> button.
        </p></li><li><p>
          Select and add the <code class="filename">/usr/lib</code> and
          <code class="filename">/usr/local/lib</code> directories.
        </p></li><li><p>
          In the same panel add the two library files required for
          static linking as discussed earlier. The properties panel
          should then look similar to the following screenshot:
        </p><div class="figure"><a name="connector-cpp-netbeans-static-properties-lib"></a><p class="title"><b>Figure 20.59. Setting the static library directories and file names</b></p><div class="mediaobject"><img src="images/connector-cpp-netbeans-static-properties-lib.png" alt="Setting the static library directories
              and file names"></div></div></li><li><p>
          Click <span class="guibutton">OK</span> to close the <span class="guilabel">Project
          Properties</span> dialog.
        </p></li></ol></div><p>
      <span class="bold"><strong>Using the dynamic library</strong></span>
    </p><p>
      If you require your application to use the MySQL Connector/C++ dynamic library,
      you simply need to link your project with a single library file,
      <code class="filename">libmysqlcppconn.so</code>. The location of this file
      will depend on how you configured your installation of MySQL Connector/C++, but
      will typically be <code class="filename">/usr/local/lib</code>.
    </p><div class="orderedlist"><ol type="1"><li><p>
          The first step is to set the project to link the the necessary
          library file. Select <span class="guimenu">File</span>, <span class="guimenu">Project
          Properties</span> from the main menu.
        </p></li><li><p>
          In the <span class="guilabel">Categories:</span> tree view navigate to
          <span class="guilabel">Linker</span>.
        </p></li><li><p>
          In the <span class="guilabel">General</span> panel select
          <span class="guilabel">Additional Library Directories</span>. Click the
          <span class="guibutton">...</span> button.
        </p></li><li><p>
          Select and add the <code class="filename">/usr/local/lib</code>
          directories.
        </p></li><li><p>
          In the same panel add the library file required for static
          linking as discussed earlier. The properties panel should then
          look similar to the following screenshot:
        </p><div class="figure"><a name="connector-cpp-netbeans-dynamic-properties-lib"></a><p class="title"><b>Figure 20.60. Setting the dynamic library directory and file name</b></p><div class="mediaobject"><img src="images/connector-cpp-netbeans-dynamic-properties-lib.png" alt="Setting the dynamic library directory
              and file name"></div></div></li><li><p>
          Click OK to close the Project Properties dialog.
        </p></li></ol></div><p>
      Having configured your project you can build it by selecting
      <span class="guimenu">Run</span>, <span class="guimenu">Build Main Project</span> from
      the main menu. You can then run the project using
      <span class="guimenu">Run</span>, <span class="guimenu">Run Main Project</span>.
    </p><p>
      On running the application you should see a screen similar to the
      following (this is actually the static version of the application
      shown):
    </p><div class="figure"><a name="connector-cpp-netbeans-static-run"></a><p class="title"><b>Figure 20.61. The example application running</b></p><div class="mediaobject"><img src="images/connector-cpp-netbeans-static-run.png" alt="The example application running"></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Note the above settings and procedures were carried out for the
        default <code class="literal">Debug</code> configuration. If you want to
        create a <code class="literal">Release</code> configuration you will need
        to select that configuration before setting the Project
        Properties.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-cpp-getting-started-examples"></a>20.6.5. MySQL Connector/C++ Getting Started: Usage Examples</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-cpp-examples-connecting">20.6.5.1. MySQL Connector/C++ Connecting to MySQL</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-examples-query">20.6.5.2. MySQL Connector/C++ Running a simple query</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-examples-results">20.6.5.3. MySQL Connector/C++ Fetching results</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-examples-prepared-statements">20.6.5.4. MySQL Connector/C++ Using Prepared Statements</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-examples-complete-example-1">20.6.5.5. MySQL Connector/C++ Complete Example 1</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-cpp-examples-complete-example-2">20.6.5.6. MySQL Connector/C++ Complete Example 2</a></span></dt></dl></div><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>Please note, official support is not available for the beta version of MySQL Connector/C++.</p></div><p>
      The download package contains usage examples in the directory
      <code class="filename">examples/</code>. The examples explain the basic
      usage of the following classes:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="classname">Connection</code>
        </p></li><li><p>
          <code class="classname">Driver</code>
        </p></li><li><p>
          <code class="classname">PreparedStatement</code>
        </p></li><li><p>
          <code class="classname">ResultSet</code>
        </p></li><li><p>
          <code class="classname">ResultSetMetaData</code>
        </p></li><li><p>
          <code class="classname">Statement</code>
        </p></li></ul></div><p>
      The examples cover:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Using the <code class="classname">Driver</code> class to connect to
          MySQL
        </p></li><li><p>
          Creating tables, inserting rows, fetching rows using (simple)
          statements
        </p></li><li><p>
          Creating tables, inserting rows, fetching rows using prepared
          statements
        </p></li><li><p>
          Hints for working around prepared statement limitations
        </p></li><li><p>
          Accessing result set meta data
        </p></li></ul></div><p>
      The examples in this document are only code snippets. The code
      snippets provide a brief overview on the API. They are not
      complete programs. Please check the <code class="filename">examples/</code>
      directory of your MySQL Connector/C++ installation for complete programs.
      Please also read the <code class="filename">README</code> file in the
      <code class="filename">examples/</code> directory. Note to test the example
      code you will first need to edit the
      <code class="filename">examples.h</code> file in the
      <code class="filename">examples/</code> directory, to add your connection
      information. Then simply rebuild the code by issuing a
      <code class="filename">make</code> command.
    </p><p>
      The examples in the <code class="filename">examples/</code> directory
      include:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="filename">examples/connect.cpp</code>:
        </p><p>
          How to create a connection, insert data into MySQL and handle
          exceptions.
        </p></li><li><p>
          <code class="filename">examples/connection_meta_schemaobj.cpp</code>:
        </p><p>
          How to obtain meta data associated with a connection object,
          for example, a list of tables, databases, MySQL version,
          connector version.
        </p></li><li><p>
          <code class="filename">examples/debug.cpp</code>:
        </p><p>
          How to activate and deactivate the MySQL Connector/C++ debug protocol.
        </p></li><li><p>
          <code class="filename">examples/exceptions.cpp</code>:
        </p><p>
          A closer look at the exceptions thrown by the connector and
          how to fetch error information.
        </p></li><li><p>
          <code class="filename">examples/prepared_statements.cpp</code>:
        </p><p>
          How to run Prepared Statements including an example how to
          handle SQL commands that cannot be prepared by the MySQL
          Server.
        </p></li><li><p>
          <code class="filename">examples/resultset.cpp</code>:
        </p><p>
          How to fetch data and iterate over the result set (cursor).
        </p></li><li><p>
          <code class="filename">examples/resultset_meta.cpp</code>:
        </p><p>
          How to obtain meta data associated with a result set, for
          example, number of columns and column types.
        </p></li><li><p>
          <code class="filename">examples/resultset_types.cpp</code>:
        </p><p>
          Result sets returned from meta data methods - this is more a
          test than much of an example.
        </p></li><li><p>
          <code class="filename">examples/standalone_example.cpp</code>:
        </p><p>
          Simple standalone program not integrated into regular CMake
          builds.
        </p></li><li><p>
          <code class="filename">examples/statements.cpp</code>:
        </p><p>
          How to run SQL commands without using Prepared Statements.
        </p></li><li><p>
          <code class="filename">examples/cpp_trace_analyzer.cpp</code>:
        </p><p>
          This example shows how to filter the output of the
          <a href="connectors-apis.html#connector-cpp-debug-tracing" title="20.6.6. MySQL Connector/C++ Debug Tracing">debug
          trace</a>. Please see the inline comments for further
          documentation. This script is unsupported.
        </p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-cpp-examples-connecting"></a>20.6.5.1. MySQL Connector/C++ Connecting to MySQL</h4></div></div></div><p>
        A connection to MySQL is established by retrieving an instance
        of <code class="classname">sql::Connection</code> from a
        <code class="classname">sql::mysql::MySQL_Driver</code> object. A
        <code class="classname">sql::mysql::MySQL_Driver</code> object is
        returned by
        <code class="classname">sql::mysql::MySQL_Driver::get_mysql_driver_instance()</code>.
      </p><pre class="programlisting">sql::mysql::MySQL_Driver *driver;
sql::Connection *con;

driver = sql::mysql::MySQL_Driver::get_mysql_driver_instance();
con = driver-&gt;connect("tcp://127.0.0.1:3306", "user", "password");

delete con;</pre><p>
        Make sure that you free the
        <code class="classname">sql::Connection</code> object as soon as you do
        not need it any more. But do not explicitly free the connector
        object!
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-cpp-examples-query"></a>20.6.5.2. MySQL Connector/C++ Running a simple query</h4></div></div></div><p>
        For running simple queries you can use the methods
        <code class="methodname">sql::Statement::execute()</code>,
        <code class="methodname">sql::Statement::executeQuery()</code> and
        <code class="methodname">sql::Statement::executeUpdate()</code>. The
        method <code class="methodname">sql::Statement::execute()</code> should
        be used if your query does not return a result set or if your
        query returns more than one result set. See the
        <code class="filename">examples/</code> directory for more on this.
      </p><pre class="programlisting">sql::mysql::MySQL_Driver *driver;
sql::Connection *con;
sql::Statement *stmt

driver = sql::mysql::get_mysql_driver_instance();
con = driver-&gt;connect("tcp://127.0.0.1:3306", "user", "password");

stmt = con-&gt;createStatement();
stmt-&gt;execute("USE " EXAMPLE_DB);
stmt-&gt;execute("DROP TABLE IF EXISTS test");
stmt-&gt;execute("CREATE TABLE test(id INT, label CHAR(1))");
stmt-&gt;execute("INSERT INTO test(id, label) VALUES (1, 'a')");

delete stmt;
delete con;</pre><p>
        Note that you have to free <code class="classname">sql::Statement</code>
        and <code class="classname">sql::Connection</code> objects explicitly
        using delete.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-cpp-examples-results"></a>20.6.5.3. MySQL Connector/C++ Fetching results</h4></div></div></div><p>
        The API for fetching result sets is identical for (simple)
        statments and prepared statements. If your query returns one
        result set you should use
        <code class="methodname">sql::Statement::executeQuery()</code> or
        <code class="methodname">sql::PreparedStatement::executeQuery()</code>
        to run your query. Both methods return
        <code class="classname">sql::ResultSet</code> objects. The preview
        version does buffer all result sets on the client to support
        cursors.
      </p><pre class="programlisting">// ...
sql::Connection *con;
sql::Statement *stmt
sql::ResultSet  *res;
// ...
stmt = con-&gt;createStatement();
// ...

res = stmt-&gt;executeQuery("SELECT id, label FROM test ORDER BY id ASC");
while (res-&gt;next()) {  
  // You can use either numeric offsets...
  cout &lt;&lt; "id = " &lt;&amp;;t; res-&gt;getInt(0);
  // ... or column names for accessing results. »
    The latter is recommended.
  cout &lt;&lt; ", label = '" &lt;&lt; »
    res-&gt;getString("label") &lt;&lt; "'" &lt;&lt; endl;
}

delete res;
delete stmt;
delete con;</pre><p>
        Note that you have to free
        <code class="classname">sql::Statement</code>,
        <code class="classname">sql::Connection</code> and
        <code class="classname">sql::ResultSet</code> objects explicitly using
        delete.
      </p><p>
        The usage of cursors is demonstrated in the examples contained
        in the download package.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-cpp-examples-prepared-statements"></a>20.6.5.4. MySQL Connector/C++ Using Prepared Statements</h4></div></div></div><p>
        If you are not familiar with Prepared Statements on MySQL have
        an extra look at the source code comments and explanations in
        the file <code class="filename">examples/prepared_statement.cpp</code>.
      </p><p>
        <code class="classname">sql::PreparedStatement</code> is created by
        passing a SQL query to
        <code class="methodname">sql::Connection::prepareStatement()</code>. As
        <code class="classname">sql::PreparedStatement</code> is derived from
        <code class="classname">sql::Statement</code>, you will feel familiar
        with the API once you have learned how to use (simple)
        statements (<code class="classname">sql::Statement</code>). For example,
        the syntax for fetching results is identical.
      </p><pre class="programlisting">// ...
sql::Connection	*con;
sql::PreparedStatement	*prep_stmt
// ...
        
prep_stmt = con-&gt;prepareStatement("INSERT INTO test(id, label) VALUES (?, ?)");
        
prep_stmt-&gt;setInt(1, 1);
prep_stmt-&gt;setString(2, "a");
prep_stmt-&gt;execute();
        
prep_stmt-&gt;setInt(1, 2);
prep_stmt-&gt;setString(2, "b");
prep_stmt-&gt;execute();
        
delete prep_stmt;
delete con;</pre><p>
        As usual, you have to free
        <code class="classname">sql::PreparedStatement</code> and
        <code class="classname">sql::Connection</code> objects explicitly.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-cpp-examples-complete-example-1"></a>20.6.5.5. MySQL Connector/C++ Complete Example 1</h4></div></div></div><p>
        The following code shows a complete example of how to use
        MySQL Connector/C++:
      </p><pre class="programlisting">/* Copyright 2008 Sun Microsystems, Inc.

This program is free software; you can redistribute it and/or modify
it under only the terms of the GNU General Public License as published by
the Free Software Foundation; version 2 of the License.

There are special exceptions to the terms and conditions of the GPL
as it is applied to this software. View the full text of the
exception in file EXCEPTIONS-CONNECTOR-C++ in the directory of this
software distribution.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA
*/

/* Standard C++ includes */
#include &lt;stdlib.h&gt;
#include &lt;iostream&gt;

/*
  Include directly the different
  headers from cppconn/ and mysql_driver.h + mysql_util.h
  (and mysql_connection.h). This will reduce your build time!
*/
#include "mysql_connection.h"

#include &lt;cppconn/driver.h&gt;
#include &lt;cppconn/exception.h&gt;
#include &lt;cppconn/resultset.h&gt;
#include &lt;cppconn/statement.h&gt;

using namespace std;

int main(void)
{
cout &lt;&lt; endl;
cout &lt;&lt; "Running 'SELECT 'Hello World!' »
   AS _message'..." &lt;&lt; endl;

try {
  sql::Driver *driver;
  sql::Connection *con;
  sql::Statement *stmt;
  sql::ResultSet *res;

  /* Create a connection */
  driver = get_driver_instance();
  con = driver-&gt;connect("tcp://127.0.0.1:3306", "root", "root");
  /* Connect to the MySQL test database */
  con-&gt;setSchema("test");

  stmt = con-&gt;createStatement();
  res = stmt-&gt;executeQuery("SELECT 'Hello World!' AS _message");
  while (res-&gt;next()) {
    cout &lt;&lt; "\t... MySQL replies: ";
    /* Access column data by alias or column name */
    cout &lt;&lt; res-&gt;getString("_message") &lt;&lt; endl;
    cout &lt;&lt; "\t... MySQL says it again: ";
    /* Access column fata by numeric offset, 1 is the first column */
    cout &lt;&lt; res-&gt;getString(1) &lt;&lt; endl;
  }
  delete res;
  delete stmt;
  delete con;

} catch (sql::SQLException &amp;e) {
  cout &lt;&lt; "# ERR: SQLException in " &lt;&lt; __FILE__;
  cout &lt;&lt; "(" &lt;&lt; __FUNCTION__ &lt;&lt; ") on line " »
     &lt;&lt; __LINE__ &lt;&lt; endl;
  cout &lt;&lt; "# ERR: " &lt;&lt; e.what();
  cout &lt;&lt; " (MySQL error code: " &lt;&lt; e.getErrorCode();
  cout &lt;&lt; ", SQLState: " &lt;&lt; e.getSQLState() &lt;&lt; " )" &lt;&lt; endl;
}

cout &lt;&lt; endl;

return EXIT_SUCCESS;
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="connector-cpp-examples-complete-example-2"></a>20.6.5.6. MySQL Connector/C++ Complete Example 2</h4></div></div></div><p>
        The following code shows a complete example of how to use
        MySQL Connector/C++:
      </p><pre class="programlisting">/* Copyright 2008 Sun Microsystems, Inc.

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; version 2 of the License.

There are special exceptions to the terms and conditions of the GPL
as it is applied to this software. View the full text of the
exception in file EXCEPTIONS-CONNECTOR-C++ in the directory of this
software distribution.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA
*/

/* Standard C++ includes */
#include &lt;stdlib.h&gt;
#include &lt;iostream&gt;

/*
  Include directly the different
  headers from cppconn/ and mysql_driver.h + mysql_util.h
  (and mysql_connection.h). This will reduce your build time!
*/
#include "mysql_connection.h"

#include &lt;cppconn/driver.h&gt;
#include &lt;cppconn/exception.h&gt;
#include &lt;cppconn/resultset.h&gt;
#include &lt;cppconn/statement.h&gt;
#include &lt;cppconn/prepared_statement.h&gt;

using namespace std;

int main(void)
{
cout &lt;&lt; endl;
cout &lt;&lt; "Let's have MySQL count from 10 to 1..." &lt;&lt; endl;

try {
  sql::Driver *driver;
  sql::Connection *con;
  sql::Statement *stmt;
  sql::ResultSet *res;
  sql::PreparedStatement *pstmt;

  /* Create a connection */
  driver = get_driver_instance();
  con = driver-&gt;connect("tcp://127.0.0.1:3306", "root", "root");
  /* Connect to the MySQL test database */
  con-&gt;setSchema("test");

  stmt = con-&gt;createStatement();
  stmt-&gt;execute("DROP TABLE IF EXISTS test");
  stmt-&gt;execute("CREATE TABLE test(id INT)");
  delete stmt;

  /* '?' is the supported placeholder syntax */
  pstmt = con-&gt;prepareStatement("INSERT INTO test(id) VALUES (?)");
  for (int i = 1; i &lt;= 10; i++) {
    pstmt-&gt;setInt(1, i);
    pstmt-&gt;executeUpdate();
  }
  delete pstmt;

  /* Select in ascending order */
  pstmt = con-&gt;prepareStatement("SELECT id FROM test ORDER BY id ASC");
  res = pstmt-&gt;executeQuery();

  /* Fetch in reverse = descending order! */
  res-&gt;afterLast();
  while (res-&gt;previous())
    cout &lt;&lt; "\t... MySQL counts: " &lt;&lt; res-&gt;getInt("id") &lt;&lt; endl;
  delete res;

  delete pstmt;
  delete con;

} catch (sql::SQLException &amp;e) {
  cout &lt;&lt; "# ERR: SQLException in " &lt;&lt; __FILE__;
  cout &lt;&lt; "(" &lt;&lt; __FUNCTION__ &lt;&lt; ") on line " »
     &lt;&lt; __LINE__ &lt;&lt; endl;
  cout &lt;&lt; "# ERR: " &lt;&lt; e.what();
  cout &lt;&lt; " (MySQL error code: " &lt;&lt; e.getErrorCode();
  cout &lt;&lt; ", SQLState: " &lt;&lt; e.getSQLState() &lt;&lt; »
     " )" &lt;&lt; endl;
}

cout &lt;&lt; endl;

return EXIT_SUCCESS;
}</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-cpp-debug-tracing"></a>20.6.6. MySQL Connector/C++ Debug Tracing</h3></div></div></div><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>Please note, official support is not available for the beta version of MySQL Connector/C++.</p></div><p>
      Although a debugger can be used to debug your application, you may
      find it beneficial to turn on the debug traces of the connector.
      Some problems happen randomly which makes them difficult to debug
      using a debugger. In such cases debug traces and protocol files
      are more useful because they allow you to trace the activities of
      all instances of your program.
    </p><p>
      DTrace is a very powerful technology to trace any application
      without having to develop an extra trace module for your
      application. Unfortunately, DTrace is currently only available on
      OpenSolaris, Solaris, MacOS 10.5 and FreeBSD.
    </p><p>
      The MySQL Connector/C++ can write two trace files:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Trace file generated by the MySQL Client Library
        </p></li><li><p>
          Trace file generated internally by MySQL Connector/C++
        </p></li></ol></div><p>
      The first trace file can be generated by the underlying MySQL
      Client Library (libmysql). To enable this trace the connector will
      call the C-API function <code class="literal">mysql_debug()</code>
      internally. Only debug versions of the MySQL Client Library are
      capable of writing a trace file. Therefore you need to compile
      MySQL Connector/C++ against a debug version of the library, if you want utilize
      this trace. The trace shows the internal function calls and the
      addresses of internal objects as you can see below:
    </p><pre class="programlisting">&gt;mysql_stmt_init
| &gt;_mymalloc
| | enter: Size: 816
| | exit: ptr: 0x68e7b8
| &lt;_mymalloc | &gt;init_alloc_root
| | enter: root: 0x68e7b8
| | &gt;_mymalloc
| | | enter: Size: 2064
| | | exit: ptr: 0x68eb28
[...]</pre><p>
      The second trace is the MySQL Connector/C++ internal trace. It is available
      with debug and non-debug builds of the connector as long as you
      have enabled the tracing module at compile time using
      <code class="literal">cmake -DMYSQLCPPCONN_TRACE_ENABLE:BOOL=1</code>. By
      default, the tracing functionality is not available and calls to
      trace functions are removed by the preprocessor.
    </p><p>
      Compiling the connector with tracing functionality enabled will
      cause two additional tracing function calls per each connector
      function call. You will need to run your own benchmark to find out
      how much this will impact the performance of your application.
    </p><p>
      A simple test using a loop running 30,000 INSERT SQL statements
      showed no significant real-time impact. The two variants of this
      application using a trace enabled and trace disabled version of
      the connector performed equally well. The run time measured in
      real-time was not significantly impacted as long as writing a
      debug trace was not enabled. However, there will be a difference
      in the time spent in the application. When writing a debug trace
      the IO subsystem may become a bottleneck.
    </p><p>
      In summary, use connector builds with tracing enabled carefully.
      Trace enabled versions may cause higher CPU usage even if the
      overall run time of your application is not impacted
      significantly.
    </p><pre class="programlisting">|  INF: Tracing enabled
&lt;MySQL_Connection::setClientOption
&gt;MySQL_Prepared_Statement::setInt
|  INF: this=0x69a2e0
|  &gt;MySQL_Prepared_Statement::checkClosed
|  &lt;MySQL_Prepared_Statement::checkClosed
| &lt;MySQL_Prepared_Statement::setInt
[...]</pre><p>
      The example from <code class="filename">examples/debug.cpp</code>
      demonstrates how to activate the debug traces in your program.
      Currently they can only be activated through API calls. The traces
      are controlled on a per-connection basis. You can use the
      <code class="literal">setClientOptions()</code> method of a connection
      object to activate and deactivate the generation of a trace. The
      MySQL Client Library trace is always written into a file, whereas
      the connector's protocol messages are printed to standard out.
    </p><pre class="programlisting">sql::Driver *driver;
int on_off = 1;

/* Using the Driver to create a connection */
driver = get_driver_instance();
std::auto_ptr&lt; sql::Connection &gt; con(driver-&gt;connect(host, user, pass));

/*
Activate debug trace of the MySQL Client Library (C-API)
Only available with a debug build of the MySQL Client Library!
*/
con-&gt;setClientOption("libmysql_debug", "d:t:O,client.trace");

/*
Tracing is available if you have compiled the driver using
cmake -DMYSQLCPPCONN_TRACE_ENABLE:BOOL=1
*/
con-&gt;setClientOption("client_trace", &amp;on_off);</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-cpp-references"></a>20.6.7. MySQL Connector/C++ References</h3></div></div></div><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>Please note, official support is not available for the beta version of MySQL Connector/C++.</p></div><p>
      See the
      <a href="http://java.sun.com/products/jdbc/overview.html" target="_top">JDBC
      overview</a> for information on JDBC 4.0. Please also check
      the <code class="filename">examples/</code> directory of the download
      package.
    </p><p>
      <span class="bold"><strong>Notes on using the MySQL Connector/C++ API</strong></span>
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">DatabaseMetaData::supportsBatchUpdates()</code>
          returns <code class="literal">true</code> because MySQL supports batch
          updates in general. However, no API calls for batch updates
          are provided by the MySQL Connector/C++ API.
        </p></li><li><p>
          Two non-JDBC methods have been introduced for fetching and
          setting unsigned integers: <code class="literal">getUInt64()</code> and
          <code class="literal">getUInt()</code>. These are available for
          <code class="classname">ResultSet</code> and
          <code class="classname">Prepared_Statement</code>:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">ResultSet::getUInt64()</code>
            </p></li><li><p>
              <code class="literal">ResultSet::getUInt()</code>
            </p></li><li><p>
              <code class="literal">Prepared_Statement::setUInt64()</code>
            </p></li><li><p>
              <code class="literal">Prepared_Statement::setUInt()</code>
            </p></li></ul></div><p>
          The corresponding <code class="literal">getLong()</code> and
          <code class="literal">setLong()</code> methods have been removed.
        </p></li><li><p>
          The method <code class="literal">DatabaseMetaData::getColumns()</code>
          has 23 columns in its result set, rather than the 22 columns
          defined by JDBC. The first 22 columns are as described in the
          JDBC documentation, but column 23 is new:
        </p><p>
          23. <code class="literal">IS_AUTOINCREMENT</code>: String which is
          “<span class="quote">YES</span>” if the column is an auto-increment column.
          Otherwise the string contains “<span class="quote">NO</span>”.
        </p></li><li><p>
          MySQL Connector/C++ may return different metadata for the same column.
        </p><p>
          When you have any column that accepts a charset and a
          collation in its specification and you specify a binary
          collation, such as:
        </p><pre class="programlisting"> CHAR(250) CHARACTER SET 'latin1' COLLATE 'latin1_bin'
</pre><p>
          The server sets the <code class="literal">BINARY</code> flag in the
          result set metadata of this column. The method
          <code class="literal">ResultSetMetadata::getColumnTypeName()</code> uses
          the metadata and will report, due to the
          <code class="literal">BINARY</code> flag, that the column type name is
          <code class="literal">BINARY</code>. This is illustrated below:
        </p><pre class="programlisting">mysql&gt; create table varbin(a varchar(20) character set utf8 collate utf8_bin);
Query OK, 0 rows affected (0.00 sec)

mysql&gt; select * from varbin;
Field   1:  `a`
Catalog:    `def`
Database:   `test`
Table:      `varbin`
Org_table:  `varbin`
Type:       VAR_STRING
Collation:  latin1_swedish_ci (8)
Length:     20
Max_length: 0
Decimals:   0
Flags:      BINARY


0 rows in set (0.00 sec)

mysql&gt; select * from information_schema.columns where table_name='varbin'\G
*************************** 1. row ***************************
           TABLE_CATALOG: NULL
            TABLE_SCHEMA: test
              TABLE_NAME: varbin
             COLUMN_NAME: a
        ORDINAL_POSITION: 1
          COLUMN_DEFAULT: NULL
             IS_NULLABLE: YES
               DATA_TYPE: varchar
CHARACTER_MAXIMUM_LENGTH: 20
  CHARACTER_OCTET_LENGTH: 60
       NUMERIC_PRECISION: NULL
           NUMERIC_SCALE: NULL
      CHARACTER_SET_NAME: utf8
          COLLATION_NAME: utf8_bin
             COLUMN_TYPE: varchar(20)
              COLUMN_KEY:
                   EXTRA:
              PRIVILEGES: select,insert,update,references
          COLUMN_COMMENT:
1 row in set (0.01 sec)
</pre><p>
          However, <code class="literal">INFORMATION_SCHEMA</code> gives no hint
          in its <code class="literal">COLUMNS</code> table that metadata will
          contain the <code class="literal">BINARY</code> flag.
          <code class="literal">DatabaseMetaData::getColumns()</code> uses
          <code class="literal">INFORMATION_SCHEMA</code>. It will report the type
          name <code class="literal">CHAR</code> for the same column. Note, a
          different type code is also returned.
        </p></li><li><p>
          The MySQL Connector/C++ class <code class="classname">sql::DataType</code> defines
          the following JDBC standard data types:
          <code class="literal">UNKNOWN</code>, <code class="literal">BIT</code>,
          <code class="literal">TINYINT</code>, <code class="literal">SMALLINT</code>,
          <code class="literal">MEDIUMINT</code>, <code class="literal">INTEGER</code>,
          <code class="literal">BIGINT</code>, <code class="literal">REAL</code>,
          <code class="literal">DOUBLE</code>, <code class="literal">DECIMAL</code>,
          <code class="literal">NUMERIC</code>, <code class="literal">CHAR</code>,
          <code class="literal">BINARY</code>, <code class="literal">VARCHAR</code>,
          <code class="literal">VARBINARY</code>, <code class="literal">LONGVARCHAR</code>,
          <code class="literal">LONGVARBINARY</code>,
          <code class="literal">TIMESTAMP</code>, <code class="literal">DATE</code>,
          <code class="literal">TIME</code>, <code class="literal">GEOMETRY</code>,
          <code class="literal">ENUM</code>, <code class="literal">SET</code>,
          <code class="literal">SQLNULL</code>.
        </p><p>
          However, the following JDBC standard data types are
          <span class="emphasis"><em>not</em></span> supported by MySQL Connector/C++:
          <code class="literal">ARRAY</code>, <code class="literal">BLOB</code>,
          <code class="literal">CLOB</code>, <code class="literal">DISTINCT</code>,
          <code class="literal">FLOAT</code>, <code class="literal">OTHER</code>,
          <code class="literal">REF</code>, <code class="literal">STRUCT</code>.
        </p></li><li><p>
          When inserting or updating <code class="literal">BLOB</code> or
          <code class="literal">TEXT</code> columns, MySQL Connector/C++ developers are advised
          not to use <code class="literal">setString()</code>. Instead it is
          recommended that the dedicated API function
          <code class="literal">setBlob()</code> be used instead.
        </p><p>
          The use of <code class="literal">setString()</code> can cause a
          <a href="http://dev.mysql.com/doc/refman/5.1/en/packet-too-large.html" target="_top">
          Packet too large</a> error message. The error will occur
          if the length of the string passed to the connector using
          <code class="literal">setString()</code> exceeds
          <code class="literal">max_allowed_packet</code> (minus a few bytes
          reserved in the protocol for control purposes). This situation
          is not handled in MySQL Connector/C++, as this could lead to security
          issues, such as extremely large memory allocation requests due
          to malevolently long strings.
        </p><p>
          However, if <code class="literal">setBlob()</code> is used, this problem
          does not arise. This is because <code class="literal">setBlob()</code>
          takes a streaming approach based on
          <code class="literal">std::istream</code>. When sending the data from
          the stream to MySQL Server, MySQL Connector/C++ will split the stream into
          chunks appropriate for MySQL Server and observe the
          <code class="literal">max_allowed_packet</code> setting currently being
          used.
        </p><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>
            When using <code class="literal">setString()</code> it is not possible
            to set <code class="literal">max_packet_size</code> to a value large
            enough for the string, prior to passing it to MySQL Connector/C++. The
            MySQL 6.0
            <a href="http://dev.mysql.com/doc/refman/6.0/en/server-system-variables.html#sysvar_max_allowed_packet" target="_top">documentation</a>
            for <code class="literal">max_packet_size</code> states: “<span class="quote">As of
            MySQL 6.0.9, the session value of this variable is read
            only. Before 6.0.9, setting the session value is allowed but
            has no effect.</span>”
          </p></div><p>
          This difference with the JDBC specification ensures that
          MySQL Connector/C++ is not vulnerable to memory flooding attacks.
        </p></li><li><p>
          In general MySQL Connector/C++ works with MySQL 5.0, but it is not
          completely supported. Some methods may not be available when
          connecting to MySQL 5.0. This is because the Information
          Schema is used to obtain the requested information. There are
          no plans to improve the support for 5.0 because the current GA
          version of MySQL Server is 5.1. As a new product, MySQL Connector/C++ is
          primarily targeted at the MySQL Server GA version that was
          available on its release.
        </p><p>
          The following methods will throw a
          <code class="literal">sql::MethodNotImplemented</code> exception when
          you connect to MySQL earlier than 5.1.0:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">DatabaseMetadata::getCrossReference()</code>
            </p></li><li><p>
              <code class="literal">DatabaseMetadata::getExportedKeys()</code>
            </p></li></ul></div></li><li><p>
          MySQL Connector/C++ includes a method
          <code class="literal">Connection::getClientOption()</code> which is not
          included in the JDBC API specification. The prototype is:
        </p><pre class="programlisting">void getClientOption(const std::string &amp; optionName, void * optionValue)</pre><p>
          The method can be used to check the value of connection
          properties set when establishing a database connection. The
          values are returned through the <code class="literal">optionValue</code>
          argument passed to the method with the type <code class="literal">void
          *</code>.
        </p><p>
          Currently, <code class="literal">getClientOption()</code> supports
          fetching the <code class="literal">optionValue</code> of the following
          options:

          </p><div class="itemizedlist"><ul type="circle"><li><p>
                <code class="literal">metadataUseInfoSchema</code>
              </p></li><li><p>
                <code class="literal">defaultStatementResultType</code>
              </p></li><li><p>
                <code class="literal">defaultPreparedStatementResultType</code>
              </p></li></ul></div><p>

          The connection option <code class="literal">metadataUseInfoSchema</code>
          controls whether to use the
          <code class="literal">Information_Schemata</code> for returning the meta
          data of <code class="literal">SHOW</code> commands. In the case of
          <code class="literal">metadataUseInfoSchema</code> the
          <code class="literal">optionValue</code> argument should be interpreted
          as a boolean upon return.
        </p><p>
          In the case of both
          <code class="literal">defaultStatementResultType</code> and
          <code class="literal">defaultPreparedStatementResultType</code>, the
          <code class="literal">optionValue</code> argument should be interpreted
          as an integer upon return.
        </p><p>
          The connection property can be either set when establishing
          the connection through the connection property map or using
          <code class="literal">void Connection::setClientOption(const std::string
          &amp; optionName, const void * optionValue)</code> where
          <code class="literal">optionName</code> is assigned the value
          <code class="literal">metadataUseInfoSchema</code>.
        </p><p>
          Some examples are given below:
        </p><pre class="programlisting">int defaultStmtResType;
int defaultPStmtResType;
conn-&gt;getClientOption("defaultStatementResultType", (void *) &amp;defaultStmtResType);
conn-&gt;getClientOption("defaultPreparedStatementResultType", (void *) &amp;defaultPStmtResType);

bool isInfoSchemaUsed;
conn-&gt;getClientOption("metadataUseInfoSchema", (void *) &amp;isInfoSchemaUsed);</pre></li><li><p>
          MySQL Connector/C++ also supports the following methods not found in the
          JDBC API standard:
        </p><pre class="programlisting">std::string MySQL_Connection::getSessionVariable(const std::string &amp; varname)</pre><pre class="programlisting">void MySQL_Connection::setSessionVariable(const std::string &amp; varname, const std::string &amp; value)</pre><p>
          Note that both methods are members of the
          <code class="literal">MySQL_Connection</code> class. The methods get and
          set MySQL session variables.
        </p><p>
          <code class="literal">setSessionVariable()</code> is equivalent to
          executing:
        </p><pre class="programlisting">SET SESSION &lt;varname&gt; = &lt;value&gt;</pre><p>
          <code class="literal">getSessionVariable()</code> is equivalent to
          executing the following and fetching the first return value:
        </p><pre class="programlisting">SHOW SESSION VARIABLES LIKE "&lt;varname&gt;"</pre><p>
          You can use “<span class="quote">%</span>” and other placeholders in
          &lt;varname&gt;, if the underlying MySQL server supports this.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-cpp-bugs"></a>20.6.8. MySQL Connector/C++ Known Bugs and Issues</h3></div></div></div><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>Please note, official support is not available for the beta version of MySQL Connector/C++.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Please report bugs through <a href="bugs.mysql.com" target="_top">MySQL Bug
        System </a>.
      </p></div><p>
      <span class="bold"><strong> Known bugs: </strong></span>
    </p><p>
      None.
    </p><p>
      <span class="bold"><strong> Known issues: </strong></span>
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          When linking against a static library for 1.0.3 on Windows you
          need to define <code class="literal">CPPDBC_PUBLIC_FUNC</code> either in
          the compiler options (preferable) or with <code class="literal">/D
          "CPPCONN_PUBLIC_FUNC="</code>. You can also explicitly
          define it in your code by placing <code class="literal">#define
          CPPCONN_PUBLIC_FUNC</code> before the header inclusions.
        </p></li><li><p>
          Generally speaking C++ library binaries are less portable than
          C library binaries. Issues can be caused by name mangling,
          different Standard Template Library (STL) versions and using
          different compilers and linkers for linking against the
          libraries than were used for building the library itself.
        </p><p>
          Even a small change in the compiler version can, but does not
          have to, cause problems. If you obtain error messages, that
          you suspect are related to binary incompatibilities, build
          MySQL Connector/C++ from source, using the same compiler and linker that
          you will use to build and link your application.
        </p><p>
          Due to the variations between Linux distributions, compiler
          and linker versions and STL versions, it is not possible to
          provide binaries for each and every possible configuration.
          However, the MySQL Connector/C++ binary distributions contain a
          <code class="filename">README</code> file that describes the
          environment and settings used to build the binary versions of
          the libraries.
        </p></li><li><p>
          To avoid potential crashes the build configuration of MySQL Connector/C++ should match the build configuration of the application using it. For example, do not use the release build of MySQL Connector/C++ with a debug build of the client application.
        </p></li></ul></div><p>
      See also the MySQL Connector/C++ Changelogs which can be found here
      <a href="news.html#ccpp-news" title="C.9. MySQL Connector/C++ Change History">Section C.9, “MySQL Connector/C++ Change History”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-cpp-requests"></a>20.6.9. MySQL Connector/C++ Feature requests</h3></div></div></div><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>Please note, official support is not available for the beta version of MySQL Connector/C++.</p></div><p>
      You can suggest new features in the first instance by joining the
      mailing list or forum and talking with the developers directly.
      See <a href="connectors-apis.html#connector-cpp-support" title="20.6.10. MySQL Connector/C++ Support">Section 20.6.10, “MySQL Connector/C++ Support”</a>
    </p><p>
      The following feature requests are currently being worked on:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          C++ references for <code class="literal">Statements</code>,
          <code class="literal">ResultSets</code>, and exceptions, are being
          considered, instead of pointers to heap memory. This reduces
          the exception handling burden for the programmer.
        </p></li><li><p>
          Adopt STL (suggestions are welcome).
        </p></li><li><p>
          JDBC compliance: datatype interfaces and support through
          <code class="literal">ResultSet:getType()</code> and
          <code class="literal">PreparedStatement:bind()</code>. Introduce
          <code class="literal">sql::Blob</code>, <code class="literal">sql::Clob</code>,
          <code class="literal">sql::Date</code>, <code class="literal">sql::Time</code>,
          <code class="literal">sql::Timestamp</code>,
          <code class="literal">sql::URL</code>. Support
          <code class="literal">get|setBlob()</code>,
          <code class="literal">get|setClob()</code>,
          <code class="literal">get|setDate()</code>,
          <code class="literal">get|setTime()</code>,
          <code class="literal">get|setTimestamp()</code>,
          <code class="literal">get|setURL()</code>
        </p></li><li><p>
          Add support for all C-API connection options. Improved support
          for <code class="literal">mysql_options</code>.
        </p></li><li><p>
          Add connect method which supports passing options using
          HashMaps.
        </p></li><li><p>
          Create Windows installer.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-cpp-support"></a>20.6.10. MySQL Connector/C++ Support</h3></div></div></div><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>Please note, official support is not available for the beta version of MySQL Connector/C++.</p></div><p>
      For general discussion of the MySQL Connector/C++ please use the
      <a href="http://forums.mysql.com/list.php?167" target="_top">C/C++ community
      forum</a> or join the
      <a href="http://lists.mysql.com" target="_top">MySQL Connector/C++ mailing list</a>.
    </p><p>
      Bugs can be reported at the
      <a href="http://bugs.mysql.com" target="_top">MySQL bug website</a>.
    </p><p>
      For Licensing questions, and to purchase MySQL Products and
      Services, please
      <a href="http://www.mysql.com/buy-mysql/" target="_top">Contact MySQL</a>
    </p><p>
      The MySQL Connector/C++ Changelogs can be found here
      <a href="news.html#ccpp-news" title="C.9. MySQL Connector/C++ Change History">Section C.9, “MySQL Connector/C++ Change History”</a>
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-cpp-faq"></a>20.6.11. MySQL Connector/C++ FAQ</h3></div></div></div><p><span class="bold"><strong>Questions</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><a href="connectors-apis.html#qandaitem-20-6-11-1-1">20.6.11.1: </a>
        What is MySQL Connector/C++?
      </p></li><li><p><a href="connectors-apis.html#qandaitem-20-6-11-1-2">20.6.11.2: </a>
        Which MySQL Server version(s) is MySQL Connector/C++ compatible with?
      </p></li><li><p><a href="connectors-apis.html#qandaitem-20-6-11-1-3">20.6.11.3: </a>
        Does MySQL Connector/C++ implement the client-server protocol?
      </p></li><li><p><a href="connectors-apis.html#qandaitem-20-6-11-1-4">20.6.11.4: </a>
        Are any MySQL products using MySQL Connector/C++?
      </p></li></ul></div><p><span class="bold"><strong>Questions and Answers</strong></span></p><p><a name="qandaitem-20-6-11-1-1"></a><span class="bold"><strong>20.6.11.1: </strong></span><span class="bold"><strong>
        What is MySQL Connector/C++?
      </strong></span></p><p>
        MySQL Connector/C++ is a MySQL database connector for C++. It allows you
        develop applications in C++ that connect to the MySQL Server.
        MySQL Connector/C++ is compatible with the JDBC 4.0 API.
      </p><p><a name="qandaitem-20-6-11-1-2"></a><span class="bold"><strong>20.6.11.2: </strong></span><span class="bold"><strong>
        Which MySQL Server version(s) is MySQL Connector/C++ compatible with?
      </strong></span></p><p>
        MySQL Connector/C++ fully supports MySQL Server version 5.1 and later.
      </p><p><a name="qandaitem-20-6-11-1-3"></a><span class="bold"><strong>20.6.11.3: </strong></span><span class="bold"><strong>
        Does MySQL Connector/C++ implement the client-server protocol?
      </strong></span></p><p>
        No. MySQL Connector/C++ uses the MySQL Client Library for the client-server
        communication.
      </p><p><a name="qandaitem-20-6-11-1-4"></a><span class="bold"><strong>20.6.11.4: </strong></span><span class="bold"><strong>
        Are any MySQL products using MySQL Connector/C++?
      </strong></span></p><p>
        Yes, MySQL Workbench and MySQL Connector/OpenOffice.org.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="connector-c"></a>20.7. MySQL Connector/C</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-c-building">20.7.1. Building MySQL Connector/C from the Source Code</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-c-testing">20.7.2. Testing MySQL Connector/C</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-c-faq">20.7.3. MySQL Connector/C FAQ</a></span></dt></dl></div><p>
    <span class="bold"><strong>What is MySQL Connector/C?</strong></span>
  </p><p>
    MySQL Connector/C is a C client library for client-server communication. It is a
    standalone replacement for the MySQL Client Library shipped with the
    MySQL Server.
  </p><p>
    <span class="bold"><strong>Why have a replacement for MySQL Client
    Library?</strong></span>
  </p><p>
    There is no need to compile or install the MySQL Server package if
    you only need the client library.
  </p><p>
    MySQL Connector/C does not rely on the MySQL Server release cycle, so bug fixes
    and new features are released more often.
  </p><p>
    MySQL Connector/C API documentation is available
    <a href="http://dev.mysql.com/doc/refman/6.0/en/c-api-functions.html" target="_top">online</a>.
  </p><p>
    Supported platforms include:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        Windows
      </p></li><li><p>
        Windows x64
      </p></li><li><p>
        Linux
      </p></li><li><p>
        Solaris
      </p></li><li><p>
        FreeBSD
      </p></li><li><p>
        Mac OS X
      </p></li><li><p>
        HP-UX
      </p></li><li><p>
        IBM AIX
      </p></li><li><p>
        IBM i5/OS
      </p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-c-building"></a>20.7.1. Building MySQL Connector/C from the Source Code</h3></div></div></div><p>
      <span class="bold"><strong>Obtaining the Source Code</strong></span>
    </p><p>
      The source can be downloaded as a Zip file or tar-ball from the
      source repository on
      <a href="http://launchpad.net/libmysql" target="_top">Launchpad</a>.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <span class="bold"><strong>Building on Unix</strong></span>
        </p><p>
          Examples of supported Unix or Unix-like operating systems
          include:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              Solaris
            </p></li><li><p>
              Linux
            </p></li><li><p>
              HP-UX
            </p></li><li><p>
              AIX
            </p></li><li><p>
              OS X
            </p></li></ul></div><p>
          <span class="bold"><strong>Compiler Tools</strong></span>
        </p><p>
          Ideally, the native compiler tool set for the target platform
          is used for compilation. This would be SunStudio for Solaris
          and aCC for HP-UX for example. However, the GNU tool-chain can
          be used across all platforms.
        </p><p>
          You also need CMake 2.6 or newer, which is available
          <a href="http://www.cmake.org" target="_top">online</a>.
        </p><p>
          <span class="bold"><strong>To Build</strong></span>
        </p><p>
          If using GNU AutoTools change to the MySQL Connector/C source directory and
          follow the procedure below.
        </p><div class="orderedlist"><ol type="1"><li><p>
              To generate the makefile enter:
            </p><pre class="programlisting">shell&gt; cmake -G "Unix Makefiles"</pre><p>
              or for a Debug build enter:
            </p><pre class="programlisting">shell&gt; cmake -G "Unix Makefiles" -DCMAKE_BUILD_TYPE=Debug</pre></li><li><p>
              Then build the project using:
            </p><pre class="programlisting">shell&gt; make</pre></li></ol></div><p>
          <span class="bold"><strong>To Install</strong></span>
        </p><p>
          By default make install will install the MySQL Connector/C files in the
          <code class="filename">/usr/local</code> directory. You can change this
          behavior by specifying another directory when generating the
          <code class="filename">makefile</code>:
        </p><pre class="programlisting">shell&gt; cmake -G "Unix Makefiles" -DCMAKE_INSTALL_PREFIX=/mypath</pre><p>
          Now, in the root shell, enter the following to install the
          MySQL Connector/C libraries and tools:
        </p><pre class="programlisting">root-shell&gt; make install</pre><p>
          At this point all of the MySQL Connector/C files will be in place.
        </p></li><li><p>
          <span class="bold"><strong>Building on Microsoft Windows</strong></span>
        </p><p>
          Older versions of Microsoft Windows are not supported.
          Supported versions are Windows 2000, Windows XP, Windows
          Vista, Windows Server 2003, or Windows Server 2008.
        </p><p>
          <span class="bold"><strong>Compiler Tools</strong></span>
        </p><p>
          Microsoft Visual Studio 8 and 9 are recommended. The Express
          Edition of Visual Studio and other compilers may work, but are
          untested.
        </p><p>
          You also need CMake 2.6 or newer, available at
          http://www.cmake.org
        </p><p>
          <span class="bold"><strong>To Build</strong></span>
        </p><p>
          You need to have the environment variables set for the Visual
          Studio toolchain. Visual Studio includes a batch file to set
          these for you, and installs a shortcut into the
          <span class="guilabel">Start</span> menu to open a command prompt with
          these variables set.
        </p><p>
          Build MySQL Connector/C using the CMake command-line tool by entering the
          following from the source root directory in a command prompt
          window:
        </p><pre class="programlisting">shell&gt; cmake -G "Visual Studio 9 2008"</pre><p>
          This produces a project file that you can open with Visual
          Studio or build from the command line with either of:
        </p><pre class="programlisting">shell&gt; devenv.com libmysql.sln /build Release</pre><pre class="programlisting">shell&gt; devenv.com libmysql.sln /build RelWithDebInfo</pre><p>
          For other versions of Visual Studio or
          <code class="literal">nmake</code> based build, run the following
          command:
        </p><pre class="programlisting">shell&gt; cmake --help</pre><p>
          to check the supported generators.
        </p><p>
          To compile the Debug build, you must run set the CMake build
          type so the correct version of external libraries are used:
        </p><pre class="programlisting">shell&gt; cmake -G "Visual Studio 8 2005" -DCMAKE_BUILD_TYPE=Debug</pre><p>
          Followed by:
        </p><pre class="programlisting">shell&gt; devenv.com libmysql.sln /build Debug</pre><p>
          <span class="bold"><strong>To Install</strong></span>
        </p><p>
          To create a install package you can choose between two
          variants:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Creating a Zip package
            </p></li><li><p>
              Creating an MSI install package
            </p></li></ol></div><div class="itemizedlist"><ul type="circle"><li><p>
              <span class="bold"><strong>Zip package</strong></span>
            </p><p>
              To create a Zip package, run the <code class="literal">cpack</code>
              command from the root of your MySQL Connector/C source directory.
            </p></li><li><p>
              <span class="bold"><strong>MSI Install package</strong></span>
            </p><p>
              The required tools include Windows XML Installer toolset
              (WIX), which is available
              <a href="http://sourceforge.net/projects/wix/" target="_top">online</a>.
            </p><p>
              To create the MSI install package change to the
              subdirectory <code class="filename">win</code> and generate the
              <code class="filename">makefile</code>:
            </p><pre class="programlisting">shell&gt; cmake -G "NMake Makefiles"</pre><p>
              Create the MSI install package by calling
              <code class="literal">nmake</code>:
            </p><pre class="programlisting">shell&gt; nmake</pre></li></ul></div></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-c-testing"></a>20.7.2. Testing MySQL Connector/C</h3></div></div></div><p>
      For testing MySQL Connector/C you will need a running MySQL server instance.
      Before you run the test suite you need to specify the following
      environment variables:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">MYSQL_TEST_HOST</code> (default localhost)
        </p></li><li><p>
          <code class="literal">MYSQL_TEST_USER</code>
        </p></li><li><p>
          <code class="literal">MYSQL_TEST_PASSWD</code>
        </p></li><li><p>
          <code class="literal">MYSQL_TEST_PORT</code>
        </p></li><li><p>
          <code class="literal">MYSQL_TEST_SOCKET</code>
        </p></li><li><p>
          <code class="literal">MYSQL_TEST_DB</code> (default test)
        </p></li></ul></div><p>
      To run the test suite, execute <code class="literal">ctest</code> from the
      command line:
    </p><pre class="programlisting">shell&gt; ctest</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-c-faq"></a>20.7.3. MySQL Connector/C FAQ</h3></div></div></div><p><span class="bold"><strong>Questions</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><a href="connectors-apis.html#qandaitem-20-7-3-1-1">20.7.3.1: </a>
        What is “<span class="quote">libmysqld</span>”?
      </p></li><li><p><a href="connectors-apis.html#qandaitem-20-7-3-1-2">20.7.3.2: </a>
        What is “<span class="quote">MySQL Connector/C</span>”?
      </p></li><li><p><a href="connectors-apis.html#qandaitem-20-7-3-1-3">20.7.3.3: </a>
        What is the “<span class="quote">MySQL Native C API</span>”? What are its
        typical benefits and use cases?
      </p></li><li><p><a href="connectors-apis.html#qandaitem-20-7-3-1-4">20.7.3.4: </a>
        What is the difference between “<span class="quote">Native C API</span>”,
        “<span class="quote">libmysql</span>”, “<span class="quote">libmysqld</span>” and
        “<span class="quote">MySQL Connector/C</span>”?
      </p></li><li><p><a href="connectors-apis.html#qandaitem-20-7-3-1-5">20.7.3.5: </a>
        Does MySQL Connector/C replace any of “<span class="quote">Native C API</span>”,
        “<span class="quote">libmysql</span>” and “<span class="quote">libmysqld</span>”?
      </p></li><li><p><a href="connectors-apis.html#qandaitem-20-7-3-1-6">20.7.3.6: </a>
        What is “<span class="quote">libmysql</span>”?
      </p></li></ul></div><p><span class="bold"><strong>Questions and Answers</strong></span></p><p><a name="qandaitem-20-7-3-1-1"></a><span class="bold"><strong>20.7.3.1: </strong></span><span class="bold"><strong>
        What is “<span class="quote">libmysqld</span>”?
      </strong></span></p><p>
        <code class="literal">libmysqld</code> is an embedded database server with
        the same API as MySQL Connector/C. It is included with the MySQL Server
        distribution.
      </p><p><a name="qandaitem-20-7-3-1-2"></a><span class="bold"><strong>20.7.3.2: </strong></span><span class="bold"><strong>
        What is “<span class="quote">MySQL Connector/C</span>”?
      </strong></span></p><p>
        MySQL Connector/C is a standalone distribution of the
        <code class="literal">libmysql</code> library, which was previously only
        available as part of the MySQL Server distribution. The version
        of <code class="literal">libmysql</code> included with MySQL Connector/C and the
        version bundled with the server are functionally equivalent, but
        the cross-platform build system for MySQL Connector/C uses CMake.
      </p><p><a name="qandaitem-20-7-3-1-3"></a><span class="bold"><strong>20.7.3.3: </strong></span><span class="bold"><strong>
        What is the “<span class="quote">MySQL Native C API</span>”? What are its
        typical benefits and use cases?
      </strong></span></p><p>
        MySQL Connector/C, also known as <code class="literal">libmysql</code>, or MySQL Native
        C API, is a standalone, C-based API and library that you can use
        in C applications to connect with the MySQL Server. It
        implements the same MySQL client API that has been in use for a
        decade.
      </p><p>
        It is also used as the foundation for drivers for standard
        database APIs such as ODBC, Perl's DBI, and Python's DB API.
      </p><p><a name="qandaitem-20-7-3-1-4"></a><span class="bold"><strong>20.7.3.4: </strong></span><span class="bold"><strong>
        What is the difference between “<span class="quote">Native C API</span>”,
        “<span class="quote">libmysql</span>”, “<span class="quote">libmysqld</span>” and
        “<span class="quote">MySQL Connector/C</span>”?
      </strong></span></p><p>
        MySQL Connector/C and <code class="literal">libmysql</code> are the “<span class="quote">native C API
        for MySQL</span>”, and all three terms can be used
        interchangeably. “<span class="quote">libmysqld</span>” is the embedded
        version of the MySQL Server, and is included in the server
        distribution.
      </p><p><a name="qandaitem-20-7-3-1-5"></a><span class="bold"><strong>20.7.3.5: </strong></span><span class="bold"><strong>
        Does MySQL Connector/C replace any of “<span class="quote">Native C API</span>”,
        “<span class="quote">libmysql</span>” and “<span class="quote">libmysqld</span>”?
      </strong></span></p><p>
        MySQL Connector/C contains <code class="literal">libmysql</code>, and implements a
        native C API. It does not include <code class="literal">libmysqld</code>,
        which can be found with the MySQL server distribution.
      </p><p><a name="qandaitem-20-7-3-1-6"></a><span class="bold"><strong>20.7.3.6: </strong></span><span class="bold"><strong>
        What is “<span class="quote">libmysql</span>”?
      </strong></span></p><p>
        <code class="literal">libmysql</code> is the name of the library that MySQL Connector/C
        provides.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="connector-ooo"></a>20.8. MySQL Connector/OpenOffice.org</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#connector-ooo-installation">20.8.1. Installation</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-ooo-getting-started">20.8.2. Getting Started: Connecting to MySQL</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-ooo-getting-started-examples">20.8.3. Getting Started: Usage Examples</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-ooo-references">20.8.4. References</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-ooo-bugs">20.8.5. Known Bugs</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-ooo-contact">20.8.6. Contact</a></span></dt></dl></div><p>
    MySQL Connector/OpenOffice.org is a native MySQL database connector
    for OpenOffice.org. Currently, it is in preview status and supports
    OpenOffice.org 2.4 only. It can be used to connect OpenOffice.org
    applications to a MySQL server.
  </p><p>
    Before MySQL Connector/OpenOffice.org became available you would
    have to use MySQL Connector/J (JDBC) or MySQL Connector/ODBC to
    connect to a MySQL server.
  </p><p>
    Connector/OpenOffice.org is a community project, although Sun
    Microsystems actively contributes code. The source code for
    Connector/OpenOffice.org is available under GPL with the FLOSS
    License Exception.
  </p><p>
    In the future a closed-source StarOffice version of
    Connector/OpenOffice.org will be made available.
  </p><p>
    <span class="bold"><strong>Advantages</strong></span>
  </p><p>
    Using MySQL Connector/OpenOffice.org has the following advantages:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        Easy installation through the OpenOffice.org Extension Manager.
      </p></li><li><p>
        Seamless integration into OpenOffice.org.
      </p></li><li><p>
        No need to go through an additional Connector installation
        routine (ODBC/JDBC)
      </p></li><li><p>
        No need to configure or register an additional Connector (ODBC)
      </p></li><li><p>
        No need to install or configure a driver manager (ODBC)
      </p></li></ul></div><p>
    <span class="bold"><strong>Status</strong></span>
  </p><p>
    MySQL Connector/OpenOffice.org is available as a development preview
    version. We kindly ask users and developers to try it out and
    provide us with feedback. We do not encourage you to use it in
    production environments, though.
  </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      Sun Microsystems does not provide formal support for
      Connector/OpenOffice.org.
    </p></div><p>
    If you have any queries please contact us through our mailing list
    at <code class="email">&lt;<a href="mailto:users@dba.openoffice.org">users@dba.openoffice.org</a>&gt;</code>
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-ooo-installation"></a>20.8.1. Installation</h3></div></div></div><div class="orderedlist"><ol type="1"><li><p>
          Install or upgrade to OpenOffice.org 2.4.
        </p></li><li><p>
          Download MySQL Connector/OpenOffice.org from
          <a href="http://downloads.mysql.com/forge/openoffice_preview" target="_top">The
          OpenOffice.org download site</a>. Save the file,
          <code class="filename">mysql-native-win32.oxt</code> or
          <code class="filename">mysql-native-linux.oxt</code>, respectively, to
          a location of your choice, for example <code class="filename">My
          Documents</code> or <code class="filename">~/Documents</code>.
        </p></li><li><p>
          Add the <code class="filename">.oxt</code> extension through the
          Extension Manager of OpenOffice.org. In OpenOffice.org, select
          <span class="guimenu">Tools</span>, <span class="guimenu">Extension
          Manager...</span> and specify the <code class="filename">.oxt</code>
          file as a new extension. When done, MySQL
          Connector/OpenOffice.org will show up as a new extension under
          <span class="guilabel">My Extensions</span>.
        </p><p>
          </p><div class="figure"><a name="figure_connector-ooo-add-extension"></a><p class="title"><b>Figure 20.62. Adding an extension</b></p><div class="mediaobject"><img src="images/connector-ooo-add-extension.png" width="683" height="375" alt="Adding an extension"></div></div><p>
        </p></li><li><p>
          Restart OpenOffice.org.
        </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-ooo-getting-started"></a>20.8.2. Getting Started: Connecting to MySQL</h3></div></div></div><p>
      MySQL Connector/OpenOffice.org allows you to access the MySQL
      Server and its schemata from the OpenOffice.org suite. Currently
      the connector is in preview status, and only OpenOffice.org 2.4 is
      supported.
    </p><p>
      The following example demonstrates the creation of a new
      OpenOffice.org Base database which uses a local MySQL Server for
      storage and the new connector for connecting.
    </p><div class="orderedlist"><ol type="1"><li><p>
          Select the database
        </p><p>
          Create a new database by selecting <span class="guimenu">File</span>,
          <span class="guimenu">New</span>, <span class="guimenu">Database</span>. This
          starts a wizard that allows you to create a new, open an
          existing, or connect to existing database. Select the latter
          option. From the drop-down list, select MySQL native driver.
          Click <span class="guibutton">Next &gt;&gt;</span>.
        </p><p>
          </p><div class="figure"><a name="figure_connector-ooo-dbwizard1"></a><p class="title"><b>Figure 20.63. Selecting the database</b></p><div class="mediaobject"><img src="images/connector-ooo-dbwizard1.png" width="705" height="434" alt="Selecting the database"></div></div><p>
        </p></li><li><p>
          Fill in the connection settings
        </p><p>
          Under <span class="guilabel">MySQL native driver</span>, fill in the
          host name, and optionally a database name, and port name, for
          example:
        </p><p>
          <strong class="userinput"><code>localhost/test</code></strong>
        </p><p>
          This will connect to a MySQL server running on the local host
          and select the test database. Note that is you do not specify
          a database the process below will still work, and all
          databases will be available for selection.
        </p><p>
          On Linux, you may have to specify an IP number and a port
          number instead, due to a limitation in
          Connector/OpenOffice.org. You have to do so if your MySQL
          socket file is not <code class="filename">/tmp/mysql.sock</code>. Enter
          your data using the format illustrated in the following
          example:
        </p><p>
          <strong class="userinput"><code>127.0.0.1:3006/test</code></strong>
        </p><p>
          This will connect to a MySQL server running on the local host,
          but do so via TCP/IP using 3306 as the port number. Click
          <span class="guibutton">Next &gt;&gt;</span>.
        </p><p>
          </p><div class="figure"><a name="figure_connector-ooo-dbwizard2"></a><p class="title"><b>Figure 20.64. Entering connection settings</b></p><div class="mediaobject"><img src="images/connector-ooo-dbwizard2.png" width="705" height="434" alt="Entering connection settings"></div></div><p>
        </p></li><li><p>
          Fill in credentials
        </p><p>
          If you are using MySQL server's anonymous account without a
          password, you do not have to fill in anything in this step.
          Otherwise, fill in your MySQL user name and check the password
          checkbox. Note, for security reasons, you should not normally
          use the anonymous account without a password.
        </p><p>
          </p><div class="figure"><a name="figure_connector-ooo-user-authentication"></a><p class="title"><b>Figure 20.65. Setting up user authentication</b></p><div class="mediaobject"><img src="images/connector-ooo-user-authentication.png" width="705" height="434" alt="Setting up user
                authentication"></div></div><p>
        </p><p>
          You can now test your connection to the MySQL database server
          by clicking the <span class="guibutton">Test Connection</span> button.
          Check the checkbox if you do not want OpenOffice.org to ask
          you for your password again in the current session. Testing
          the connection is optional, although recommended.
        </p><p>
          </p><div class="figure"><a name="figure_connector-ooo-user-authentication-credentials"></a><p class="title"><b>Figure 20.66. Entering user credentials</b></p><div class="mediaobject"><img src="images/connector-ooo-user-authentication-credentials.png" width="603" height="163" alt="Entering user credentials"></div></div><p>
        </p><p>
          Click <span class="guibutton">Next &gt;&gt;</span>.
        </p></li><li><p>
          Finish the wizard
        </p><p>
          Leave the default settings and click
          <span class="guibutton">Finish</span>. You will be forwarded to the
          OpenOffice.org Base main window. Note that you can invoke the
          wizard again at any point by right-clicking in the
          <span class="guilabel">Tables</span> section of the
          <span class="guilabel">Base</span> main window and selecting
          <span class="guimenu">Database</span>, <span class="guimenu">Connection
          type</span>.
        </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-ooo-getting-started-examples"></a>20.8.3. Getting Started: Usage Examples</h3></div></div></div><p>
      <span class="bold"><strong>Listing Tables</strong></span>
    </p><p>
      In the <span class="guilabel">Database</span> area of the
      <span class="guilabel">Base</span> main window, select
      <span class="guilabel">Tables</span>. If this is the first time you are
      accessing the database you will be prompted for your credentials
      (user name and password); you can store these settings for your
      current Base session.
    </p><p>
      </p><div class="figure"><a name="figure_connector-ooo-base"></a><p class="title"><b>Figure 20.67. Listing tables</b></p><div class="mediaobject"><img src="images/connector-ooo-base.png" width="922" height="861" alt="Listing tables"></div></div><p>
    </p><p>
      Depending on your connection settings you will now see all
      databases with all their tables, or just the database you have
      specified in the connection settings.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-ooo-references"></a>20.8.4. References</h3></div></div></div><p>
      See the <a href="http://www.openoffice.org/" target="_top">OpenOffice.org
      website</a> for documentation of the office suite and its
      Extension Manager.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-ooo-bugs"></a>20.8.5. Known Bugs</h3></div></div></div><p>
      If you discover a bug in Connector/OpenOffice.org please
      <a href="http://wiki.services.openoffice.org/wiki/Database/Drivers/MySQL_Native#Known_issues" target="_top">add
      it to this list</a> and send an email to
      <code class="email">&lt;<a href="mailto:users@dba.openoffice.org">users@dba.openoffice.org</a>&gt;</code>. You need to be logged in
      with an OpenOffice.org account for both; see the
      <a href="http://dba.openoffice.org/servlets/ProjectMailingListList" target="_top">project
      mailing list</a> for details.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-ooo-contact"></a>20.8.6. Contact</h3></div></div></div><p>
      To discuss the new MySQL Connector/OpenOffice.org, please
      subscribe to the mailing list
      <code class="email">&lt;<a href="mailto:users@dba.openoffice.org">users@dba.openoffice.org</a>&gt;</code>. It is a low-volume list
      with less than 10 mails per day.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="libmysqld"></a>20.9. libmysqld, the Embedded MySQL Server Library</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#libmysqld-compiling">20.9.1. Compiling Programs with <code class="literal">libmysqld</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#libmysqld-restrictions">20.9.2. Restrictions When Using the Embedded MySQL Server</a></span></dt><dt><span class="section"><a href="connectors-apis.html#libmysqld-options">20.9.3. Options with the Embedded Server</a></span></dt><dt><span class="section"><a href="connectors-apis.html#libmysqld-example">20.9.4. Embedded Server Examples</a></span></dt><dt><span class="section"><a href="connectors-apis.html#libmysqld-licensing">20.9.5. Licensing the Embedded Server</a></span></dt></dl></div><a class="indexterm" name="id3672018"></a><a class="indexterm" name="id3672027"></a><p>
    The embedded MySQL server library makes it possible to run a
    full-featured MySQL server inside a client application. The main
    benefits are increased speed and more simple management for embedded
    applications.
  </p><p>
    The embedded server library is based on the client/server version of
    MySQL, which is written in C/C++. Consequently, the embedded server
    also is written in C/C++. There is no embedded server available in
    other languages.
  </p><p>
    The API is identical for the embedded MySQL version and the
    client/server version. To change an old threaded application to use
    the embedded library, you normally only have to add calls to the
    following functions.
  </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Function</strong></span></td><td><span class="bold"><strong>When to Call</strong></span></td></tr><tr><td><a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a></td><td>Should be called before any other MySQL function is called, preferably
            early in the <code class="function">main()</code> function.</td></tr><tr><td><a href="connectors-apis.html#mysql-library-end" title="20.10.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a></td><td>Should be called before your program exits.</td></tr><tr><td><a href="connectors-apis.html#mysql-thread-init" title="20.10.8.3. mysql_thread_init()"><code class="literal">mysql_thread_init()</code></a></td><td>Should be called in each thread you create that accesses MySQL.</td></tr><tr><td><a href="connectors-apis.html#mysql-thread-end" title="20.10.8.2. mysql_thread_end()"><code class="literal">mysql_thread_end()</code></a></td><td>Should be called before calling <code class="function">pthread_exit()</code></td></tr></tbody></table></div><p>
    Then you must link your code with <code class="filename">libmysqld.a</code>
    instead of <code class="filename">libmysqlclient.a</code>. To ensure binary
    compatibility between your application and the server library, be
    sure to compile your application against headers for the same series
    of MySQL that was used to compile the server library. For example,
    if <code class="literal">libmysqld</code> was compiled against MySQL 4.1
    headers, do not compile your application against MySQL 5.1 headers,
    or vice versa.
  </p><p>
    The
    <code class="function">mysql_library_<em class="replaceable"><code>xxx</code></em>()</code>
    functions are also included in <code class="filename">libmysqlclient.a</code>
    to allow you to change between the embedded and the client/server
    version by just linking your application with the right library. See
    <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()">Section 20.10.3.40, “<code class="literal">mysql_library_init()</code>”</a>.
  </p><p>
    One difference between the embedded server and the standalone server
    is that for the embedded server, authentication for connections is
    disabled by default. To use authentication for the embedded server,
    specify the <code class="option">--with-embedded-privilege-control</code>
    option when you invoke <span><strong class="command">configure</strong></span> to configure
    your MySQL distribution.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="libmysqld-compiling"></a>20.9.1. Compiling Programs with <code class="literal">libmysqld</code></h3></div></div></div><p>
      In precompiled binary MySQL distributions that include
      <code class="literal">libmysqld</code>, the embedded server library, MySQL
      builds the library using the appropriate vendor compiler if there
      is one.
    </p><p>
      To get a <code class="literal">libmysqld</code> library if you build MySQL
      from source yourself, you should configure MySQL with the
      <a href="installing.html#option_configure_with-embedded-server"><code class="option">--with-embedded-server</code></a> option.
      See <a href="installing.html#configure-options" title="2.9.2. Typical configure Options">Section 2.9.2, “Typical <span><strong class="command">configure</strong></span> Options”</a>.
    </p><p>
      When you link your program with <code class="literal">libmysqld</code>, you
      must also include the system-specific <code class="literal">pthread</code>
      libraries and some libraries that the MySQL server uses. You can
      get the full list of libraries by executing <a href="programs.html#mysql-config" title="4.7.2. mysql_config — Get Compile Options for Compiling Clients"><span><strong class="command">mysql_config
      --libmysqld-libs</strong></span></a>.
    </p><p>
      The correct flags for compiling and linking a threaded program
      must be used, even if you do not directly call any thread
      functions in your code.
    </p><p>
      To compile a C program to include the necessary files to embed the
      MySQL server library into an executable version of a program, the
      compiler will need to know where to find various files and need
      instructions on how to compile the program. The following example
      shows how a program could be compiled from the command line,
      assuming that you are using <span><strong class="command">gcc</strong></span>, use the GNU C
      compiler:
    </p><pre class="programlisting">gcc mysql_test.c -o mysql_test -lz \
`/usr/local/mysql/bin/mysql_config --include --libmysqld-libs`
</pre><p>
      Immediately following the <span><strong class="command">gcc</strong></span> command is the
      name of the C program source file. After it, the
      <code class="option">-o</code> option is given to indicate that the file name
      that follows is the name that the compiler is to give to the
      output file, the compiled program. The next line of code tells the
      compiler to obtain the location of the include files and libraries
      and other settings for the system on which it is compiled. Because
      of a problem with <a href="programs.html#mysql-config" title="4.7.2. mysql_config — Get Compile Options for Compiling Clients"><span><strong class="command">mysql_config</strong></span></a>, the option
      <code class="option">-lz</code> (for compression) is added here. The
      <a href="programs.html#mysql-config" title="4.7.2. mysql_config — Get Compile Options for Compiling Clients"><span><strong class="command">mysql_config</strong></span></a> command is contained in backticks,
      not single quotes.
    </p><p>
      On some non-<span><strong class="command">gcc</strong></span> platforms, the embedded library
      depends on C++ runtime libraries and linking against the embedded
      library might result in missing-symbol errors. To solve this, link
      using a C++ compiler or explicitly list the required libraries on
      the link command line.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="libmysqld-restrictions"></a>20.9.2. Restrictions When Using the Embedded MySQL Server</h3></div></div></div><p>
      The embedded server has the following limitations:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          No user-defined functions (UDFs).
        </p></li><li><p>
          No stack trace on core dump.
        </p></li><li><p>
          You cannot set this up as a master or a slave (no
          replication).
        </p></li><li><p>
          Very large result sets may be unusable on low memory systems.
        </p></li><li><p>
          You cannot connect to an embedded server from an outside
          process with sockets or TCP/IP. However, you can connect to an
          intermediate application, which in turn can connect to an
          embedded server on the behalf of a remote client or outside
          process.
        </p></li><li><p>
          <code class="literal">InnoDB</code> is not reentrant in the embedded
          server and cannot be used for multiple connections, either
          successively or simultaneously.
        </p></li><li><p>
          The Event Scheduler is not available. Because of this, the
          <a href="server-administration.html#sysvar_event_scheduler"><code class="literal">event_scheduler</code></a> system
          variable is disabled.
        </p></li></ul></div><p>
      Some of these limitations can be changed by editing the
      <code class="filename">mysql_embed.h</code> include file and recompiling
      MySQL.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="libmysqld-options"></a>20.9.3. Options with the Embedded Server</h3></div></div></div><a class="indexterm" name="id3672513"></a><a class="indexterm" name="id3672525"></a><a class="indexterm" name="id3672538"></a><a class="indexterm" name="id3672550"></a><p>
      Any options that may be given with the <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>
      server daemon, may be used with an embedded server library. Server
      options may be given in an array as an argument to the
      <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a>, which
      initializes the server. They also may be given in an option file
      like <code class="filename">my.cnf</code>. To specify an option file for a
      C program, use the <a href="programs.html#option_general_defaults-file"><code class="option">--defaults-file</code></a>
      option as one of the elements of the second argument of the
      <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> function. See
      <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()">Section 20.10.3.40, “<code class="literal">mysql_library_init()</code>”</a>, for more information on the
      <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> function.
    </p><p>
      Using option files can make it easier to switch between a
      client/server application and one where MySQL is embedded. Put
      common options under the <code class="literal">[server]</code> group. These
      are read by both MySQL versions. Client/server-specific options
      should go under the <code class="literal">[mysqld]</code> section. Put
      options specific to the embedded MySQL server library in the
      <code class="literal">[embedded]</code> section. Options specific to
      applications go under section labeled
      <code class="literal">[ApplicationName_SERVER]</code>. See
      <a href="programs.html#option-files" title="4.2.3.2. Using Option Files">Section 4.2.3.2, “Using Option Files”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="libmysqld-example"></a>20.9.4. Embedded Server Examples</h3></div></div></div><p>
      These two example programs should work without any changes on a
      Linux or FreeBSD system. For other operating systems, minor
      changes are needed, mostly with file paths. These examples are
      designed to give enough details for you to understand the problem,
      without the clutter that is a necessary part of a real
      application. The first example is very straightforward. The second
      example is a little more advanced with some error checking. The
      first is followed by a command-line entry for compiling the
      program. The second is followed by a GNUmake file that may be used
      for compiling instead.
    </p><p>
      <span class="bold"><strong>Example 1</strong></span>
    </p><p>
      <code class="filename">test1_libmysqld.c</code>
    </p><pre class="programlisting">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdarg.h&gt;
#include "mysql.h"

MYSQL *mysql;
MYSQL_RES *results;
MYSQL_ROW record;

static char *server_options[] = \
       { "mysql_test", "--defaults-file=my.cnf", NULL };
int num_elements = (sizeof(server_options) / sizeof(char *)) - 1;

static char *server_groups[] = { "libmysqld_server", 
                                 "libmysqld_client", NULL };

int main(void)
{
   mysql_library_init(num_elements, server_options, server_groups);
   mysql = mysql_init(NULL);
   mysql_options(mysql, MYSQL_READ_DEFAULT_GROUP, "libmysqld_client");
   mysql_options(mysql, MYSQL_OPT_USE_EMBEDDED_CONNECTION, NULL);

   mysql_real_connect(mysql, NULL,NULL,NULL, "database1", 0,NULL,0);

   mysql_query(mysql, "SELECT column1, column2 FROM table1");

   results = mysql_store_result(mysql);

   while((record = mysql_fetch_row(results))) {
      printf("%s - %s \n", record[0], record[1]);
   }

   mysql_free_result(results);
   mysql_close(mysql);
   mysql_library_end();

   return 0;
}
</pre><p>
      Here is the command line for compiling the above program:
    </p><pre class="programlisting">gcc test1_libmysqld.c -o test1_libmysqld -lz \
 `/usr/local/mysql/bin/mysql_config --include --libmysqld-libs`
</pre><p>
      <span class="bold"><strong>Example 2</strong></span>
    </p><p>
      To try out the example, create an
      <code class="filename">test2_libmysqld</code> directory at the same level
      as the MySQL source directory. Save the
      <code class="filename">test2_libmysqld.c</code> source and the
      <code class="filename">GNUmakefile</code> in the directory, and run GNU
      <code class="filename">make</code> from inside the
      <code class="filename">test2_libmysqld</code> directory.
    </p><p>
      <code class="filename">test2_libmysqld.c</code>
    </p><pre class="programlisting">/*
 * A simple example client, using the embedded MySQL server library
*/

#include &lt;mysql.h&gt;
#include &lt;stdarg.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

MYSQL *db_connect(const char *dbname);
void db_disconnect(MYSQL *db);
void db_do_query(MYSQL *db, const char *query);

const char *server_groups[] = {
  "test2_libmysqld_SERVER", "embedded", "server", NULL
};

int
main(int argc, char **argv)
{
  MYSQL *one, *two;

  /* mysql_library_init() must be called before any other mysql
   * functions.
   *
   * You can use mysql_library_init(0, NULL, NULL), and it
   * initializes the server using groups = {
   *   "server", "embedded", NULL
   *  }.
   *
   * In your $HOME/.my.cnf file, you probably want to put:

[test2_libmysqld_SERVER]
language = /path/to/source/of/mysql/sql/share/english

   * You could, of course, modify argc and argv before passing
   * them to this function.  Or you could create new ones in any
   * way you like.  But all of the arguments in argv (except for
   * argv[0], which is the program name) should be valid options
   * for the MySQL server.
   *
   * If you link this client against the normal mysqlclient
   * library, this function is just a stub that does nothing.
   */
  mysql_library_init(argc, argv, (char **)server_groups);

  one = db_connect("test");
  two = db_connect(NULL);

  db_do_query(one, "SHOW TABLE STATUS");
  db_do_query(two, "SHOW DATABASES");

  mysql_close(two);
  mysql_close(one);

  /* This must be called after all other mysql functions */
  mysql_library_end();

  exit(EXIT_SUCCESS);
}

static void
die(MYSQL *db, char *fmt, ...)
{
  va_list ap;
  va_start(ap, fmt);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  (void)putc('\n', stderr);
  if (db)
    db_disconnect(db);
  exit(EXIT_FAILURE);
}

MYSQL *
db_connect(const char *dbname)
{
  MYSQL *db = mysql_init(NULL);
  if (!db)
    die(db, "mysql_init failed: no memory");
  /*
   * Notice that the client and server use separate group names.
   * This is critical, because the server does not accept the
   * client's options, and vice versa.
   */
  mysql_options(db, MYSQL_READ_DEFAULT_GROUP, "test2_libmysqld_CLIENT");
  if (!mysql_real_connect(db, NULL, NULL, NULL, dbname, 0, NULL, 0))
    die(db, "mysql_real_connect failed: %s", mysql_error(db));

  return db;
}

void
db_disconnect(MYSQL *db)
{
  mysql_close(db);
}

void
db_do_query(MYSQL *db, const char *query)
{
  if (mysql_query(db, query) != 0)
    goto err;

  if (mysql_field_count(db) &gt; 0)
  {
    MYSQL_RES   *res;
    MYSQL_ROW    row, end_row;
    int num_fields;

    if (!(res = mysql_store_result(db)))
      goto err;
    num_fields = mysql_num_fields(res);
    while ((row = mysql_fetch_row(res)))
    {
      (void)fputs("&gt;&gt; ", stdout);
      for (end_row = row + num_fields; row &lt; end_row; ++row)
        (void)printf("%s\t", row ? (char*)*row : "NULL");
      (void)fputc('\n', stdout);
    }
    (void)fputc('\n', stdout);
    mysql_free_result(res);
  }
  else
    (void)printf("Affected rows: %lld\n", mysql_affected_rows(db));

  return;

err:
  die(db, "db_do_query failed: %s [%s]", mysql_error(db), query);
}
</pre><p>
      <code class="filename">GNUmakefile</code>
    </p><pre class="programlisting"># This assumes the MySQL software is installed in /usr/local/mysql
inc      := /usr/local/mysql/include/mysql
lib      := /usr/local/mysql/lib

# If you have not installed the MySQL software yet, try this instead
#inc      := $(HOME)/mysql-6.0/include
#lib      := $(HOME)/mysql-6.0/libmysqld

CC       := gcc
CPPFLAGS := -I$(inc) -D_THREAD_SAFE -D_REENTRANT
CFLAGS   := -g -W -Wall
LDFLAGS  := -static
# You can change -lmysqld to -lmysqlclient to use the
# client/server library
LDLIBS    = -L$(lib) -lmysqld -lz -lm -ldl -lcrypt

ifneq (,$(shell grep FreeBSD /COPYRIGHT 2&gt;/dev/null))
# FreeBSD
LDFLAGS += -pthread
else
# Assume Linux
LDLIBS += -lpthread
endif

# This works for simple one-file test programs
sources := $(wildcard *.c)
objects := $(patsubst %c,%o,$(sources))
targets := $(basename $(sources))

all: $(targets)

clean:
        rm -f $(targets) $(objects) *.core
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="libmysqld-licensing"></a>20.9.5. Licensing the Embedded Server</h3></div></div></div><p>
      We encourage everyone to promote free software by releasing code
      under the GPL or a compatible license. For those who are not able
      to do this, another option is to purchase a commercial license for
      the MySQL code from Sun Microsystems, Inc. For details, please see
      <a href="http://www.mysql.com/company/legal/licensing/" target="_top">http://www.mysql.com/company/legal/licensing/</a>.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="c"></a>20.10. MySQL C API</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#c-api-datatypes">20.10.1. C API Data Types</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-function-overview">20.10.2. C API Function Overview</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-functions">20.10.3. C API Function Descriptions</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-prepared-statements">20.10.4. C API Prepared Statements</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-prepared-statement-datatypes">20.10.5. C API Prepared Statement Data types</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-prepared-statement-function-overview">20.10.6. C API Prepared Statement Function Overview</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-prepared-statement-functions">20.10.7. C API Prepared Statement Function Descriptions</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-thread-functions">20.10.8. C API Threaded Function Descriptions</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-embedded-server-functions">20.10.9. C API Embedded Server Function Descriptions</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-problems">20.10.10. Common Questions and Problems When Using the C API</a></span></dt><dt><span class="section"><a href="connectors-apis.html#auto-reconnect">20.10.11. Controlling Automatic Reconnection Behavior</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-multiple-queries">20.10.12. C API Support for Multiple Statement Execution</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-prepared-statement-problems">20.10.13. C API Prepared Statement Problems</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-prepared-statement-date-handling">20.10.14. C API Prepared Statement Handling of Date and Time Values</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-prepared-call-statements">20.10.15. C API Support for Prepared <code class="literal">CALL</code>
      Statements</a></span></dt><dt><span class="section"><a href="connectors-apis.html#building-clients">20.10.16. Building Client Programs</a></span></dt><dt><span class="section"><a href="connectors-apis.html#threaded-clients">20.10.17. How to Make a Threaded Client</a></span></dt></dl></div><a class="indexterm" name="id3672944"></a><a class="indexterm" name="id3672956"></a><p>
    The C API code is distributed with MySQL. It is included in the
    <code class="literal">mysqlclient</code> library and allows C programs to
    access a database.
  </p><p>
    Many of the clients in the MySQL source distribution are written in
    C. If you are looking for examples that demonstrate how to use the C
    API, take a look at these clients. You can find these in the
    <code class="literal">client</code> directory in the MySQL source
    distribution.
  </p><p>
    Most of the other client APIs (all except Connector/J and
    Connector/NET) use the <code class="literal">mysqlclient</code> library to
    communicate with the MySQL server. This means that, for example, you
    can take advantage of many of the same environment variables that
    are used by other client programs, because they are referenced from
    the library. See <a href="programs.html" title="Chapter 4. MySQL Programs">Chapter 4, <i>MySQL Programs</i></a>, for a list of these
    variables.
  </p><p>
    The client has a maximum communication buffer size. The size of the
    buffer that is allocated initially (16KB) is automatically increased
    up to the maximum size (the maximum is 16MB). Because buffer sizes
    are increased only as demand warrants, simply increasing the default
    maximum limit does not in itself cause more resources to be used.
    This size check is mostly a check for erroneous statements and
    communication packets.
  </p><p>
    The communication buffer must be large enough to contain a single
    SQL statement (for client-to-server traffic) and one row of returned
    data (for server-to-client traffic). Each thread's communication
    buffer is dynamically enlarged to handle any query or row up to the
    maximum limit. For example, if you have
    <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> values that contain up to 16MB
    of data, you must have a communication buffer limit of at least 16MB
    (in both server and client). The client's default maximum is 16MB,
    but the default maximum in the server is 1MB. You can increase this
    by changing the value of the
    <a href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> parameter when
    the server is started. See <a href="optimization.html#server-parameters" title="7.5.3. Tuning Server Parameters">Section 7.5.3, “Tuning Server Parameters”</a>.
  </p><p>
    The MySQL server shrinks each communication buffer to
    <a href="server-administration.html#sysvar_net_buffer_length"><code class="literal">net_buffer_length</code></a> bytes after each
    query. For clients, the size of the buffer associated with a
    connection is not decreased until the connection is closed, at which
    time client memory is reclaimed.
  </p><p>
    For programming with threads, see
    <a href="connectors-apis.html#threaded-clients" title="20.10.17. How to Make a Threaded Client">Section 20.10.17, “How to Make a Threaded Client”</a>. For creating a standalone
    application which includes the "server" and "client" in the same
    program (and does not communicate with an external MySQL server),
    see <a href="connectors-apis.html#libmysqld" title="20.9. libmysqld, the Embedded MySQL Server Library">Section 20.9, “libmysqld, the Embedded MySQL Server Library”</a>.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-datatypes"></a>20.10.1. C API Data Types</h3></div></div></div><p>
      This section describes C API data types other than those used for
      prepared statements. For information about the latter, see
      <a href="connectors-apis.html#c-api-prepared-statement-datatypes" title="20.10.5. C API Prepared Statement Data types">Section 20.10.5, “C API Prepared Statement Data types”</a>.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <a class="indexterm" name="id3673114"></a>

          <code class="literal">MYSQL</code>
        </p><p>
          This structure represents a handle to one database connection.
          It is used for almost all MySQL functions. You should not try
          to make a copy of a <code class="literal">MYSQL</code> structure. There
          is no guarantee that such a copy will be usable.
        </p></li><li><p>
          <a class="indexterm" name="id3673149"></a>

          <code class="literal">MYSQL_RES</code>
        </p><p>
          This structure represents the result of a query that returns
          rows (<a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>,
          <a href="sql-syntax.html#show" title="12.5.6. SHOW Syntax"><code class="literal">SHOW</code></a>,
          <a href="sql-syntax.html#describe" title="12.3.1. DESCRIBE Syntax"><code class="literal">DESCRIBE</code></a>,
          <a href="sql-syntax.html#explain" title="12.3.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a>). The information
          returned from a query is called the <span class="emphasis"><em>result
          set</em></span> in the remainder of this section.
        </p></li><li><p>
          <a class="indexterm" name="id3673209"></a>

          <code class="literal">MYSQL_ROW</code>
        </p><p>
          This is a type-safe representation of one row of data. It is
          currently implemented as an array of counted byte strings.
          (You cannot treat these as null-terminated strings if field
          values may contain binary data, because such values may
          contain null bytes internally.) Rows are obtained by calling
          <a href="connectors-apis.html#mysql-fetch-row" title="20.10.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>.
        </p></li><li><p>
          <a class="indexterm" name="id3673247"></a>

          <code class="literal">MYSQL_FIELD</code>
        </p><p>
          This structure contains information about a field, such as the
          field's name, type, and size. Its members are described in
          more detail here. You may obtain the
          <code class="literal">MYSQL_FIELD</code> structures for each field by
          calling <a href="connectors-apis.html#mysql-fetch-field" title="20.10.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a>
          repeatedly. Field values are not part of this structure; they
          are contained in a <code class="literal">MYSQL_ROW</code> structure.
        </p></li><li><p>
          <a class="indexterm" name="id3673297"></a>

          <code class="literal">MYSQL_FIELD_OFFSET</code>
        </p><p>
          This is a type-safe representation of an offset into a MySQL
          field list. (Used by
          <a href="connectors-apis.html#mysql-field-seek" title="20.10.3.23. mysql_field_seek()"><code class="literal">mysql_field_seek()</code></a>.) Offsets
          are field numbers within a row, beginning at zero.
        </p></li><li><p>
          <a class="indexterm" name="id3673332"></a>

          <a class="indexterm" name="id3673341"></a>

          <code class="literal">my_ulonglong</code>
        </p><p>
          The type used for the number of rows and for
          <a href="connectors-apis.html#mysql-affected-rows" title="20.10.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a>,
          <a href="connectors-apis.html#mysql-num-rows" title="20.10.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a>, and
          <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a>. This type
          provides a range of <code class="literal">0</code> to
          <code class="literal">1.84e19</code>.
        </p><p>
          On some systems, attempting to print a value of type
          <code class="literal">my_ulonglong</code> does not work. To print such a
          value, convert it to <code class="literal">unsigned long</code> and use
          a <code class="literal">%lu</code> print format. Example:
        </p><pre class="programlisting">printf ("Number of rows: %lu\n", 
        (unsigned long) mysql_num_rows(result));
</pre></li><li><p>
          <a class="indexterm" name="id3673436"></a>

          <a class="indexterm" name="id3673446"></a>

          <code class="literal">my_bool</code>
        </p><p>
          A boolean type, for values that are true (non-zero) or false
          (zero).
        </p></li></ul></div><p>
      The <code class="literal">MYSQL_FIELD</code> structure contains the members
      described in the following list. The definitions apply primarily
      for columns of result sets such as those produced by
      <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statements. As of MySQL
      6.0.8, <code class="literal">MYSQL_FIELD</code> structures are also used to
      provide metadata for <code class="literal">OUT</code> and
      <code class="literal">INOUT</code> parameters returned from stored
      procedures executed via prepared
      <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statements. For such
      parameters, some of the structure members have a meaning different
      from the meaning for column values.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">char * name</code>
        </p><p>
          The name of the field, as a null-terminated string. If the
          field was given an alias with an <code class="literal">AS</code> clause,
          the value of <code class="literal">name</code> is the alias. For a
          procedure parameter, the parameter name.
        </p></li><li><p>
          <code class="literal">char * org_name</code>
        </p><p>
          The name of the field, as a null-terminated string. Aliases
          are ignored. For a procedure parameter, the parameter name.
        </p></li><li><p>
          <code class="literal">char * table</code>
        </p><p>
          The name of the table containing this field, if it isn't a
          calculated field. For calculated fields, the
          <code class="literal">table</code> value is an empty string. If the
          column is selected from a view, <code class="literal">table</code> names
          the view. If the table or view was given an alias with an
          <code class="literal">AS</code> clause, the value of
          <code class="literal">table</code> is the alias. For a
          <a href="sql-syntax.html#union" title="12.2.9.3. UNION Syntax"><code class="literal">UNION</code></a>, the value is the empty
          string. For a procedure parameter, the procedure name.
        </p></li><li><p>
          <code class="literal">char * org_table</code>
        </p><p>
          The name of the table, as a null-terminated string. Aliases
          are ignored. If the column is selected from a view,
          <code class="literal">org_table</code> names the underlying table. For a
          <a href="sql-syntax.html#union" title="12.2.9.3. UNION Syntax"><code class="literal">UNION</code></a>, the value is the empty
          string. For a procedure parameter, the procedure name.
        </p></li><li><p>
          <code class="literal">char * db</code>
        </p><p>
          The name of the database that the field comes from, as a
          null-terminated string. If the field is a calculated field,
          <code class="literal">db</code> is an empty string. For a
          <a href="sql-syntax.html#union" title="12.2.9.3. UNION Syntax"><code class="literal">UNION</code></a>, the value is the empty
          string. For a procedure parameter, the name of the database
          containing the procedure.
        </p></li><li><p>
          <code class="literal">char * catalog</code>
        </p><p>
          The catalog name. This value is always
          <code class="literal">"def"</code>.
        </p></li><li><p>
          <code class="literal">char * def</code>
        </p><p>
          The default value of this field, as a null-terminated string.
          This is set only if you use
          <a href="connectors-apis.html#mysql-list-fields" title="20.10.3.42. mysql_list_fields()"><code class="literal">mysql_list_fields()</code></a>.
        </p></li><li><p>
          <code class="literal">unsigned long length</code>
        </p><p>
          The width of the field. This corresponds to the display
          length, in bytes.
        </p></li><li><p>
          <code class="literal">unsigned long max_length</code>
        </p><p>
          The maximum width of the field for the result set (the length
          in bytes of the longest field value for the rows actually in
          the result set). If you use
          <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> or
          <a href="connectors-apis.html#mysql-list-fields" title="20.10.3.42. mysql_list_fields()"><code class="literal">mysql_list_fields()</code></a>, this
          contains the maximum length for the field. If you use
          <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>, the value
          of this variable is zero.
        </p><p>
          The value of <code class="literal">max_length</code> is the length of
          the string representation of the values in the result set. For
          example, if you retrieve a
          <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">FLOAT</code></a> column and the
          “<span class="quote">widest</span>” value is <code class="literal">-12.345</code>,
          <code class="literal">max_length</code> is 7 (the length of
          <code class="literal">'-12.345'</code>).
        </p><p>
          If you are using prepared statements,
          <code class="literal">max_length</code> is not set by default because
          for the binary protocol the lengths of the values depend on
          the types of the values in the result set. (See
          <a href="connectors-apis.html#c-api-prepared-statement-datatypes" title="20.10.5. C API Prepared Statement Data types">Section 20.10.5, “C API Prepared Statement Data types”</a>.) If you
          want the <code class="literal">max_length</code> values anyway, enable
          the <code class="literal">STMT_ATTR_UPDATE_MAX_LENGTH</code> option with
          <a href="connectors-apis.html#mysql-stmt-attr-set" title="20.10.7.3. mysql_stmt_attr_set()"><code class="literal">mysql_stmt_attr_set()</code></a> and the
          lengths will be set when you call
          <a href="connectors-apis.html#mysql-stmt-store-result" title="20.10.7.28. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>.
          (See <a href="connectors-apis.html#mysql-stmt-attr-set" title="20.10.7.3. mysql_stmt_attr_set()">Section 20.10.7.3, “<code class="literal">mysql_stmt_attr_set()</code>”</a>, and
          <a href="connectors-apis.html#mysql-stmt-store-result" title="20.10.7.28. mysql_stmt_store_result()">Section 20.10.7.28, “<code class="literal">mysql_stmt_store_result()</code>”</a>.)
        </p></li><li><p>
          <code class="literal">unsigned int name_length</code>
        </p><p>
          The length of <code class="literal">name</code>.
        </p></li><li><p>
          <code class="literal">unsigned int org_name_length</code>
        </p><p>
          The length of <code class="literal">org_name</code>.
        </p></li><li><p>
          <code class="literal">unsigned int table_length</code>
        </p><p>
          The length of <code class="literal">table</code>.
        </p></li><li><p>
          <code class="literal">unsigned int org_table_length</code>
        </p><p>
          The length of <code class="literal">org_table</code>.
        </p></li><li><p>
          <code class="literal">unsigned int db_length</code>
        </p><p>
          The length of <code class="literal">db</code>.
        </p></li><li><p>
          <code class="literal">unsigned int catalog_length</code>
        </p><p>
          The length of <code class="literal">catalog</code>.
        </p></li><li><p>
          <code class="literal">unsigned int def_length</code>
        </p><p>
          The length of <code class="literal">def</code>.
        </p></li><li><p>
          <code class="literal">unsigned int flags</code>
        </p><p>
          Different bit-flags for the field. The
          <code class="literal">flags</code> value may have zero or more of the
          following bits set.
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Flag Value</strong></span></td><td><span class="bold"><strong>Flag Description</strong></span></td></tr><tr><td><code class="literal">NOT_NULL_FLAG</code></td><td>Field can't be <code class="literal">NULL</code></td></tr><tr><td><code class="literal">PRI_KEY_FLAG</code></td><td>Field is part of a primary key</td></tr><tr><td><code class="literal">UNIQUE_KEY_FLAG</code></td><td>Field is part of a unique key</td></tr><tr><td><code class="literal">MULTIPLE_KEY_FLAG</code></td><td>Field is part of a non-unique key</td></tr><tr><td><code class="literal">UNSIGNED_FLAG</code></td><td>Field has the <code class="literal">UNSIGNED</code> attribute</td></tr><tr><td><code class="literal">ZEROFILL_FLAG</code></td><td>Field has the <code class="literal">ZEROFILL</code> attribute</td></tr><tr><td><code class="literal">BINARY_FLAG</code></td><td>Field has the <code class="literal">BINARY</code> attribute</td></tr><tr><td><code class="literal">AUTO_INCREMENT_FLAG</code></td><td>Field has the <code class="literal">AUTO_INCREMENT</code> attribute</td></tr><tr><td><code class="literal">ENUM_FLAG</code></td><td>Field is an <a href="data-types.html#enum" title="10.4.4. The ENUM Type"><code class="literal">ENUM</code></a> (deprecated)</td></tr><tr><td><code class="literal">SET_FLAG</code></td><td>Field is a <a href="data-types.html#set" title="10.4.5. The SET Type"><code class="literal">SET</code></a> (deprecated)</td></tr><tr><td><code class="literal">BLOB_FLAG</code></td><td>Field is a <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> or
                  <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> (deprecated)</td></tr><tr><td><code class="literal">TIMESTAMP_FLAG</code></td><td>Field is a <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> (deprecated)</td></tr><tr><td><code class="literal">NO_DEFAULT_VALUE_FLAG</code></td><td>Field has no default value; see additional notes following table</td></tr></tbody></table></div><p>
          Use of the <code class="literal">BLOB_FLAG</code>,
          <code class="literal">ENUM_FLAG</code>, <code class="literal">SET_FLAG</code>, and
          <code class="literal">TIMESTAMP_FLAG</code> flags is deprecated because
          they indicate the type of a field rather than an attribute of
          its type. It is preferable to test
          <code class="literal">field-&gt;type</code> against
          <code class="literal">MYSQL_TYPE_BLOB</code>,
          <code class="literal">MYSQL_TYPE_ENUM</code>,
          <code class="literal">MYSQL_TYPE_SET</code>, or
          <code class="literal">MYSQL_TYPE_TIMESTAMP</code> instead.
        </p><p>
          <code class="literal">NUM_FLAG</code> indicates that a column is
          numeric. This includes columns with a type of
          <code class="literal">MYSQL_TYPE_DECIMAL</code>,
          <code class="literal">MYSQL_TYPE_TINY</code>,
          <code class="literal">MYSQL_TYPE_SHORT</code>,
          <code class="literal">MYSQL_TYPE_LONG</code>,
          <code class="literal">MYSQL_TYPE_FLOAT</code>,
          <code class="literal">MYSQL_TYPE_DOUBLE</code>,
          <code class="literal">MYSQL_TYPE_NULL</code>,
          <code class="literal">MYSQL_TYPE_TIMESTAMP</code>,
          <code class="literal">MYSQL_TYPE_LONGLONG</code>,
          <code class="literal">MYSQL_TYPE_INT24</code>, and
          <code class="literal">MYSQL_TYPE_YEAR</code>.
        </p><p>
          <code class="literal">NO_DEFAULT_VALUE_FLAG</code> indicates that a
          column has no <code class="literal">DEFAULT</code> clause in its
          definition. This does not apply to <code class="literal">NULL</code>
          columns (because such columns have a default of
          <code class="literal">NULL</code>), or to
          <code class="literal">AUTO_INCREMENT</code> columns (which have an
          implied default value).
        </p><p>
          The following example illustrates a typical use of the
          <code class="literal">flags</code> value:
        </p><pre class="programlisting">if (field-&gt;flags &amp; NOT_NULL_FLAG)
    printf("Field can't be null\n");
</pre><p>
          You may use the following convenience macros to determine the
          boolean status of the <code class="literal">flags</code> value.
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Flag Status</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">IS_NOT_NULL(flags)</code></td><td>True if this field is defined as <code class="literal">NOT NULL</code></td></tr><tr><td><code class="literal">IS_PRI_KEY(flags)</code></td><td>True if this field is a primary key</td></tr><tr><td><code class="literal">IS_BLOB(flags)</code></td><td>True if this field is a <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> or
                  <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> (deprecated; test
                  <code class="literal">field-&gt;type</code> instead)</td></tr></tbody></table></div></li><li><p>
          <code class="literal">unsigned int decimals</code>
        </p><p>
          The number of decimals for numeric fields.
        </p></li><li><p>
          <code class="literal">unsigned int charsetnr</code>
        </p><p>
          An ID number that indicates the character set/collation pair
          for the field.
        </p><p>
          To distinguish between binary and non-binary data for string
          data types, check whether the <code class="literal">charsetnr</code>
          value is 63. If so, the character set is
          <code class="literal">binary</code>, which indicates binary rather than
          non-binary data. This enables you to distinguish
          <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a> from
          <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>,
          <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> from
          <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>, and the
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> types from the
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> types.
        </p><p>
          <code class="literal">charsetnr</code> values are the same as those
          displayed in the <code class="literal">Id</code> column of the
          <a href="sql-syntax.html#show-collation" title="12.5.6.5. SHOW COLLATION Syntax"><code class="literal">SHOW COLLATION</code></a> statement or the
          <code class="literal">ID</code> column of the
          <code class="literal">INFORMATION_SCHEMA</code>
          <a href="information-schema.html#collations-table" title="19.10. The INFORMATION_SCHEMA COLLATIONS Table"><code class="literal">COLLATIONS</code></a> table. You can use
          those information sources to see which character set and
          collation specific <code class="literal">charsetnr</code> values
          indicate:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW COLLATION WHERE Id = 63;</code></strong>
+-----------+---------+----+---------+----------+---------+
| Collation | Charset | Id | Default | Compiled | Sortlen |
+-----------+---------+----+---------+----------+---------+
| binary    | binary  | 63 | Yes     | Yes      |       1 | 
+-----------+---------+----+---------+----------+---------+

mysql&gt; <strong class="userinput"><code>SELECT COLLATION_NAME, CHARACTER_SET_NAME</code></strong>
    -&gt; <strong class="userinput"><code>FROM INFORMATION_SCHEMA.COLLATIONS WHERE ID = 33;</code></strong>
+-----------------+--------------------+
| COLLATION_NAME  | CHARACTER_SET_NAME |
+-----------------+--------------------+
| utf8_general_ci | utf8               | 
+-----------------+--------------------+
</pre></li><li><p>
          <code class="literal">enum enum_field_types type</code>
        </p><p>
          The type of the field. The <code class="literal">type</code> value may
          be one of the <code class="literal">MYSQL_TYPE_</code> symbols shown in
          the following table.
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Type Value</strong></span></td><td><span class="bold"><strong>Type Description</strong></span></td></tr><tr><td><code class="literal">MYSQL_TYPE_TINY</code></td><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">TINYINT</code></a> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_SHORT</code></td><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">SMALLINT</code></a> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_LONG</code></td><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">INTEGER</code></a> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_INT24</code></td><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">MEDIUMINT</code></a> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_LONGLONG</code></td><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIGINT</code></a> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_DECIMAL</code></td><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> or
                  <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">NUMERIC</code></a> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_NEWDECIMAL</code></td><td>Precision math <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> or
                  <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">NUMERIC</code></a></td></tr><tr><td><code class="literal">MYSQL_TYPE_FLOAT</code></td><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">FLOAT</code></a> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_DOUBLE</code></td><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DOUBLE</code></a> or
                  <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">REAL</code></a> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_BIT</code></td><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIT</code></a> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_TIMESTAMP</code></td><td><a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_DATE</code></td><td><a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATE</code></a> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_TIME</code></td><td><a href="data-types.html#time" title="10.3.2. The TIME Type"><code class="literal">TIME</code></a> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_DATETIME</code></td><td><a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_YEAR</code></td><td><a href="data-types.html#year" title="10.3.3. The YEAR Type"><code class="literal">YEAR</code></a> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_STRING</code></td><td><a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a> or
                  <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_VAR_STRING</code></td><td><a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> or
                  <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_BLOB</code></td><td><a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> or
                  <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> field (use
                  <code class="literal">max_length</code> to determine the maximum
                  length)</td></tr><tr><td><code class="literal">MYSQL_TYPE_SET</code></td><td><a href="data-types.html#set" title="10.4.5. The SET Type"><code class="literal">SET</code></a> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_ENUM</code></td><td><a href="data-types.html#enum" title="10.4.4. The ENUM Type"><code class="literal">ENUM</code></a> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_GEOMETRY</code></td><td>Spatial field</td></tr><tr><td><code class="literal">MYSQL_TYPE_NULL</code></td><td><code class="literal">NULL</code>-type field</td></tr></tbody></table></div><p>
          You can use the <code class="literal">IS_NUM()</code> macro to test
          whether a field has a numeric type. Pass the
          <code class="literal">type</code> value to <code class="literal">IS_NUM()</code>
          and it evaluates to TRUE if the field is numeric:
        </p><pre class="programlisting">if (IS_NUM(field-&gt;type))
    printf("Field is numeric\n");
</pre></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-function-overview"></a>20.10.2. C API Function Overview</h3></div></div></div><a class="indexterm" name="id3675448"></a><a class="indexterm" name="id3675460"></a><p>
      The functions available in the C API are summarized here and
      described in greater detail in a later section. See
      <a href="connectors-apis.html#c-api-functions" title="20.10.3. C API Function Descriptions">Section 20.10.3, “C API Function Descriptions”</a>.
    </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Function</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><a href="connectors-apis.html#my-init" title="20.10.8.1. my_init()"><code class="literal">my_init()</code></a></td><td>Initialize global variables, and thread handler in thread-safe programs</td></tr><tr><td><a href="connectors-apis.html#mysql-affected-rows" title="20.10.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a></td><td>Returns the number of rows changed/deleted/inserted by the last
              <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a>,
              <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>, or
              <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> query</td></tr><tr><td><a href="connectors-apis.html#mysql-autocommit" title="20.10.3.2. mysql_autocommit()"><code class="literal">mysql_autocommit()</code></a></td><td>Toggles autocommit mode on/off</td></tr><tr><td><a href="connectors-apis.html#mysql-change-user" title="20.10.3.3. mysql_change_user()"><code class="literal">mysql_change_user()</code></a></td><td>Changes user and database on an open connection</td></tr><tr><td><a href="connectors-apis.html#mysql-character-set-name" title="20.10.3.4. mysql_character_set_name()"><code class="literal">mysql_character_set_name()</code></a></td><td>Return default character set name for current connection</td></tr><tr><td><a href="connectors-apis.html#mysql-close" title="20.10.3.5. mysql_close()"><code class="literal">mysql_close()</code></a></td><td>Closes a server connection</td></tr><tr><td><a href="connectors-apis.html#mysql-commit" title="20.10.3.6. mysql_commit()"><code class="literal">mysql_commit()</code></a></td><td>Commits the transaction</td></tr><tr><td><a href="connectors-apis.html#mysql-connect" title="20.10.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a></td><td>Connects to a MySQL server (this function is deprecated; use
              <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>
              instead)</td></tr><tr><td><a href="connectors-apis.html#mysql-create-db" title="20.10.3.8. mysql_create_db()"><code class="literal">mysql_create_db()</code></a></td><td>Creates a database (this function is deprecated; use the SQL statement
              <a href="sql-syntax.html#create-database" title="12.1.8. CREATE DATABASE Syntax"><code class="literal">CREATE DATABASE</code></a> instead)</td></tr><tr><td><a href="connectors-apis.html#mysql-data-seek" title="20.10.3.9. mysql_data_seek()"><code class="literal">mysql_data_seek()</code></a></td><td>Seeks to an arbitrary row number in a query result set</td></tr><tr><td><a href="connectors-apis.html#mysql-debug" title="20.10.3.10. mysql_debug()"><code class="literal">mysql_debug()</code></a></td><td>Does a <code class="literal">DBUG_PUSH</code> with the given string</td></tr><tr><td><a href="connectors-apis.html#mysql-drop-db" title="20.10.3.11. mysql_drop_db()"><code class="literal">mysql_drop_db()</code></a></td><td>Drops a database (this function is deprecated; use the SQL statement
              <a href="sql-syntax.html#drop-database" title="12.1.17. DROP DATABASE Syntax"><code class="literal">DROP DATABASE</code></a> instead)</td></tr><tr><td><a href="connectors-apis.html#mysql-dump-debug-info" title="20.10.3.12. mysql_dump_debug_info()"><code class="literal">mysql_dump_debug_info()</code></a></td><td>Makes the server write debug information to the log</td></tr><tr><td><a href="connectors-apis.html#mysql-eof" title="20.10.3.13. mysql_eof()"><code class="literal">mysql_eof()</code></a></td><td>Determines whether the last row of a result set has been read (this
              function is deprecated;
              <a href="connectors-apis.html#mysql-errno" title="20.10.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> or
              <a href="connectors-apis.html#mysql-error" title="20.10.3.15. mysql_error()"><code class="literal">mysql_error()</code></a> may be used
              instead)</td></tr><tr><td><a href="connectors-apis.html#mysql-errno" title="20.10.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a></td><td>Returns the error number for the most recently invoked MySQL function</td></tr><tr><td><a href="connectors-apis.html#mysql-error" title="20.10.3.15. mysql_error()"><code class="literal">mysql_error()</code></a></td><td>Returns the error message for the most recently invoked MySQL function</td></tr><tr><td><a href="connectors-apis.html#mysql-escape-string" title="20.10.3.16. mysql_escape_string()"><code class="literal">mysql_escape_string()</code></a></td><td>Escapes special characters in a string for use in an SQL statement</td></tr><tr><td><a href="connectors-apis.html#mysql-fetch-field" title="20.10.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a></td><td>Returns the type of the next table field</td></tr><tr><td><a href="connectors-apis.html#mysql-fetch-field-direct" title="20.10.3.18. mysql_fetch_field_direct()"><code class="literal">mysql_fetch_field_direct()</code></a></td><td>Returns the type of a table field, given a field number</td></tr><tr><td><a href="connectors-apis.html#mysql-fetch-fields" title="20.10.3.19. mysql_fetch_fields()"><code class="literal">mysql_fetch_fields()</code></a></td><td>Returns an array of all field structures</td></tr><tr><td><a href="connectors-apis.html#mysql-fetch-lengths" title="20.10.3.20. mysql_fetch_lengths()"><code class="literal">mysql_fetch_lengths()</code></a></td><td>Returns the lengths of all columns in the current row</td></tr><tr><td><a href="connectors-apis.html#mysql-fetch-row" title="20.10.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a></td><td>Fetches the next row from the result set</td></tr><tr><td><a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a></td><td>Returns the number of result columns for the most recent statement</td></tr><tr><td><a href="connectors-apis.html#mysql-field-seek" title="20.10.3.23. mysql_field_seek()"><code class="literal">mysql_field_seek()</code></a></td><td>Puts the column cursor on a specified column</td></tr><tr><td><a href="connectors-apis.html#mysql-field-tell" title="20.10.3.24. mysql_field_tell()"><code class="literal">mysql_field_tell()</code></a></td><td>Returns the position of the field cursor used for the last
              <a href="connectors-apis.html#mysql-fetch-field" title="20.10.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a></td></tr><tr><td><a href="connectors-apis.html#mysql-free-result" title="20.10.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a></td><td>Frees memory used by a result set</td></tr><tr><td><a href="connectors-apis.html#mysql-get-character-set-info" title="20.10.3.26. mysql_get_character_set_info()"><code class="literal">mysql_get_character_set_info()</code></a></td><td>Return information about default character set</td></tr><tr><td><a href="connectors-apis.html#mysql-get-client-info" title="20.10.3.27. mysql_get_client_info()"><code class="literal">mysql_get_client_info()</code></a></td><td>Returns client version information as a string</td></tr><tr><td><a href="connectors-apis.html#mysql-get-client-version" title="20.10.3.28. mysql_get_client_version()"><code class="literal">mysql_get_client_version()</code></a></td><td>Returns client version information as an integer</td></tr><tr><td><a href="connectors-apis.html#mysql-get-host-info" title="20.10.3.29. mysql_get_host_info()"><code class="literal">mysql_get_host_info()</code></a></td><td>Returns a string describing the connection</td></tr><tr><td><a href="connectors-apis.html#mysql-get-proto-info" title="20.10.3.30. mysql_get_proto_info()"><code class="literal">mysql_get_proto_info()</code></a></td><td>Returns the protocol version used by the connection</td></tr><tr><td><a href="connectors-apis.html#mysql-get-server-info" title="20.10.3.31. mysql_get_server_info()"><code class="literal">mysql_get_server_info()</code></a></td><td>Returns the server version number</td></tr><tr><td><a href="connectors-apis.html#mysql-get-server-version" title="20.10.3.32. mysql_get_server_version()"><code class="literal">mysql_get_server_version()</code></a></td><td>Returns version number of server as an integer</td></tr><tr><td><a href="connectors-apis.html#mysql-get-ssl-cipher" title="20.10.3.33. mysql_get_ssl_cipher()"><code class="literal">mysql_get_ssl_cipher()</code></a></td><td>Return current SSL cipher</td></tr><tr><td><a href="connectors-apis.html#mysql-hex-string" title="20.10.3.34. mysql_hex_string()"><code class="literal">mysql_hex_string()</code></a></td><td>Encode string in hexadecimal format</td></tr><tr><td><a href="connectors-apis.html#mysql-info" title="20.10.3.35. mysql_info()"><code class="literal">mysql_info()</code></a></td><td>Returns information about the most recently executed query</td></tr><tr><td><a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a></td><td>Gets or initializes a <code class="literal">MYSQL</code> structure</td></tr><tr><td><a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a></td><td>Returns the ID generated for an <code class="literal">AUTO_INCREMENT</code> column
              by the previous query</td></tr><tr><td><a href="connectors-apis.html#mysql-kill" title="20.10.3.38. mysql_kill()"><code class="literal">mysql_kill()</code></a></td><td>Kills a given thread</td></tr><tr><td><a href="connectors-apis.html#mysql-library-end" title="20.10.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a></td><td>Finalize the MySQL C API library</td></tr><tr><td><a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a></td><td>Initialize the MySQL C API library</td></tr><tr><td><a href="connectors-apis.html#mysql-list-dbs" title="20.10.3.41. mysql_list_dbs()"><code class="literal">mysql_list_dbs()</code></a></td><td>Returns database names matching a simple regular expression</td></tr><tr><td><a href="connectors-apis.html#mysql-list-fields" title="20.10.3.42. mysql_list_fields()"><code class="literal">mysql_list_fields()</code></a></td><td>Returns field names matching a simple regular expression</td></tr><tr><td><a href="connectors-apis.html#mysql-list-processes" title="20.10.3.43. mysql_list_processes()"><code class="literal">mysql_list_processes()</code></a></td><td>Returns a list of the current server threads</td></tr><tr><td><a href="connectors-apis.html#mysql-list-tables" title="20.10.3.44. mysql_list_tables()"><code class="literal">mysql_list_tables()</code></a></td><td>Returns table names matching a simple regular expression</td></tr><tr><td><a href="connectors-apis.html#mysql-more-results" title="20.10.3.45. mysql_more_results()"><code class="literal">mysql_more_results()</code></a></td><td>Checks whether any more results exist</td></tr><tr><td><a href="connectors-apis.html#mysql-next-result" title="20.10.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a></td><td>Returns/initiates the next result in multiple-result executions</td></tr><tr><td><a href="connectors-apis.html#mysql-num-fields" title="20.10.3.47. mysql_num_fields()"><code class="literal">mysql_num_fields()</code></a></td><td>Returns the number of columns in a result set</td></tr><tr><td><a href="connectors-apis.html#mysql-num-rows" title="20.10.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a></td><td>Returns the number of rows in a result set</td></tr><tr><td><a href="connectors-apis.html#mysql-options" title="20.10.3.49. mysql_options()"><code class="literal">mysql_options()</code></a></td><td>Sets connect options for
              <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a></td></tr><tr><td><a href="connectors-apis.html#mysql-ping" title="20.10.3.50. mysql_ping()"><code class="literal">mysql_ping()</code></a></td><td>Checks whether the connection to the server is working, reconnecting as
              necessary</td></tr><tr><td><a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a></td><td>Executes an SQL query specified as a null-terminated string</td></tr><tr><td><a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a></td><td>Connects to a MySQL server</td></tr><tr><td><a href="connectors-apis.html#mysql-real-escape-string" title="20.10.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a></td><td>Escapes special characters in a string for use in an SQL statement,
              taking into account the current character set of the
              connection</td></tr><tr><td><a href="connectors-apis.html#mysql-real-query" title="20.10.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a></td><td>Executes an SQL query specified as a counted string</td></tr><tr><td><a href="connectors-apis.html#mysql-refresh" title="20.10.3.55. mysql_refresh()"><code class="literal">mysql_refresh()</code></a></td><td>Flush or reset tables and caches</td></tr><tr><td><a href="connectors-apis.html#mysql-reload" title="20.10.3.56. mysql_reload()"><code class="literal">mysql_reload()</code></a></td><td>Tells the server to reload the grant tables</td></tr><tr><td><a href="connectors-apis.html#mysql-rollback" title="20.10.3.57. mysql_rollback()"><code class="literal">mysql_rollback()</code></a></td><td>Rolls back the transaction</td></tr><tr><td><a href="connectors-apis.html#mysql-row-seek" title="20.10.3.58. mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a></td><td>Seeks to a row offset in a result set, using value returned from
              <a href="connectors-apis.html#mysql-row-tell" title="20.10.3.59. mysql_row_tell()"><code class="literal">mysql_row_tell()</code></a></td></tr><tr><td><a href="connectors-apis.html#mysql-row-tell" title="20.10.3.59. mysql_row_tell()"><code class="literal">mysql_row_tell()</code></a></td><td>Returns the row cursor position</td></tr><tr><td><a href="connectors-apis.html#mysql-select-db" title="20.10.3.60. mysql_select_db()"><code class="literal">mysql_select_db()</code></a></td><td>Selects a database</td></tr><tr><td><a href="connectors-apis.html#mysql-server-end" title="20.10.9.2. mysql_server_end()"><code class="literal">mysql_server_end()</code></a></td><td>Finalize the MySQL C API library</td></tr><tr><td><a href="connectors-apis.html#mysql-server-init" title="20.10.9.1. mysql_server_init()"><code class="literal">mysql_server_init()</code></a></td><td>Initialize the MySQL C API library</td></tr><tr><td><a href="connectors-apis.html#mysql-set-character-set" title="20.10.3.61. mysql_set_character_set()"><code class="literal">mysql_set_character_set()</code></a></td><td>Set default character set for current connection</td></tr><tr><td><a href="connectors-apis.html#mysql-set-local-infile-default" title="20.10.3.62. mysql_set_local_infile_default()"><code class="literal">mysql_set_local_infile_default()</code></a></td><td>Set the <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA LOCAL
              INFILE</code></a> handler callbacks to their default values</td></tr><tr><td><a href="connectors-apis.html#mysql-set-local-infile-handler" title="20.10.3.63. mysql_set_local_infile_handler()"><code class="literal">mysql_set_local_infile_handler()</code></a></td><td>Install application-specific
              <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA LOCAL
              INFILE</code></a> handler callbacks</td></tr><tr><td><a href="connectors-apis.html#mysql-set-server-option" title="20.10.3.64. mysql_set_server_option()"><code class="literal">mysql_set_server_option()</code></a></td><td>Sets an option for the connection (like
              <code class="literal">multi-statements</code>)</td></tr><tr><td><a href="connectors-apis.html#mysql-sqlstate" title="20.10.3.66. mysql_sqlstate()"><code class="literal">mysql_sqlstate()</code></a></td><td>Returns the SQLSTATE error code for the last error</td></tr><tr><td><a href="connectors-apis.html#mysql-shutdown" title="20.10.3.65. mysql_shutdown()"><code class="literal">mysql_shutdown()</code></a></td><td>Shuts down the database server</td></tr><tr><td><a href="connectors-apis.html#mysql-ssl-set" title="20.10.3.67. mysql_ssl_set()"><code class="literal">mysql_ssl_set()</code></a></td><td>Prepare to establish SSL connection to server</td></tr><tr><td><a href="connectors-apis.html#mysql-stat" title="20.10.3.68. mysql_stat()"><code class="literal">mysql_stat()</code></a></td><td>Returns the server status as a string</td></tr><tr><td><a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a></td><td>Retrieves a complete result set to the client</td></tr><tr><td><a href="connectors-apis.html#mysql-thread-end" title="20.10.8.2. mysql_thread_end()"><code class="literal">mysql_thread_end()</code></a></td><td>Finalize thread handler</td></tr><tr><td><a href="connectors-apis.html#mysql-thread-id" title="20.10.3.70. mysql_thread_id()"><code class="literal">mysql_thread_id()</code></a></td><td>Returns the current thread ID</td></tr><tr><td><a href="connectors-apis.html#mysql-thread-init" title="20.10.8.3. mysql_thread_init()"><code class="literal">mysql_thread_init()</code></a></td><td>Initialize thread handler</td></tr><tr><td><a href="connectors-apis.html#mysql-thread-safe" title="20.10.8.4. mysql_thread_safe()"><code class="literal">mysql_thread_safe()</code></a></td><td>Returns 1 if the clients are compiled as thread-safe</td></tr><tr><td><a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a></td><td>Initiates a row-by-row result set retrieval</td></tr><tr><td><a href="connectors-apis.html#mysql-warning-count" title="20.10.3.72. mysql_warning_count()"><code class="literal">mysql_warning_count()</code></a></td><td>Returns the warning count for the previous SQL statement</td></tr></tbody></table></div><p>
      Application programs should use this general outline for
      interacting with MySQL:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Initialize the MySQL library by calling
          <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a>. This
          function exists in both the <code class="literal">mysqlclient</code> C
          client library and the <code class="literal">mysqld</code> embedded
          server library, so it is used whether you build a regular
          client program by linking with the
          <code class="option">-libmysqlclient</code> flag, or an embedded server
          application by linking with the <code class="option">-libmysqld</code>
          flag.
        </p></li><li><p>
          Initialize a connection handler by calling
          <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a> and connect to
          the server by calling
          <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.
        </p></li><li><p>
          Issue SQL statements and process their results. (The following
          discussion provides more information about how to do this.)
        </p></li><li><p>
          Close the connection to the MySQL server by calling
          <a href="connectors-apis.html#mysql-close" title="20.10.3.5. mysql_close()"><code class="literal">mysql_close()</code></a>.
        </p></li><li><p>
          End use of the MySQL library by calling
          <a href="connectors-apis.html#mysql-library-end" title="20.10.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a>.
        </p></li></ol></div><p>
      The purpose of calling
      <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> and
      <a href="connectors-apis.html#mysql-library-end" title="20.10.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a> is to provide
      proper initialization and finalization of the MySQL library. For
      applications that are linked with the client library, they provide
      improved memory management. If you don't call
      <a href="connectors-apis.html#mysql-library-end" title="20.10.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a>, a block of
      memory remains allocated. (This does not increase the amount of
      memory used by the application, but some memory leak detectors
      will complain about it.) For applications that are linked with the
      embedded server, these calls start and stop the server.
    </p><p>
      In a non-multi-threaded environment, the call to
      <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> may be
      omitted, because <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a> will
      invoke it automatically as necessary. However,
      <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> is not
      thread-safe in a multi-threaded environment, and thus neither is
      <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>, which calls
      <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a>. You must
      either call <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a>
      prior to spawning any threads, or else use a mutex to protect the
      call, whether you invoke
      <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> or indirectly
      via <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>. This should be
      done prior to any other client library call.
    </p><p>
      To connect to the server, call
      <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a> to initialize a
      connection handler, then call
      <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> with that
      handler (along with other information such as the host name, user
      name, and password). Upon connection,
      <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> sets the
      <code class="literal">reconnect</code> flag (part of the
      <code class="literal">MYSQL</code> structure) to a value of
      <code class="literal">1</code> in versions of the API older than 5.0.3, or
      <code class="literal">0</code> in newer versions. A value of
      <code class="literal">1</code> for this flag indicates that if a statement
      cannot be performed because of a lost connection, to try
      reconnecting to the server before giving up. You can use the
      <code class="literal">MYSQL_OPT_RECONNECT</code> option to
      <a href="connectors-apis.html#mysql-options" title="20.10.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> to control
      reconnection behavior. When you are done with the connection, call
      <a href="connectors-apis.html#mysql-close" title="20.10.3.5. mysql_close()"><code class="literal">mysql_close()</code></a> to terminate it.
    </p><p>
      While a connection is active, the client may send SQL statements
      to the server using <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a>
      or <a href="connectors-apis.html#mysql-real-query" title="20.10.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a>. The
      difference between the two is that
      <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> expects the query to
      be specified as a null-terminated string whereas
      <a href="connectors-apis.html#mysql-real-query" title="20.10.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> expects a
      counted string. If the string contains binary data (which may
      include null bytes), you must use
      <a href="connectors-apis.html#mysql-real-query" title="20.10.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a>.
    </p><p>
      For each non-<a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> query (for
      example, <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>,
      <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a>,
      <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>), you can find out how many
      rows were changed (affected) by calling
      <a href="connectors-apis.html#mysql-affected-rows" title="20.10.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a>.
    </p><p>
      For <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> queries, you retrieve
      the selected rows as a result set. (Note that some statements are
      <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>-like in that they return
      rows. These include <a href="sql-syntax.html#show" title="12.5.6. SHOW Syntax"><code class="literal">SHOW</code></a>,
      <a href="sql-syntax.html#describe" title="12.3.1. DESCRIBE Syntax"><code class="literal">DESCRIBE</code></a>, and
      <a href="sql-syntax.html#explain" title="12.3.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a>. They should be treated the
      same way as <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statements.)
    </p><p>
      There are two ways for a client to process result sets. One way is
      to retrieve the entire result set all at once by calling
      <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>. This
      function acquires from the server all the rows returned by the
      query and stores them in the client. The second way is for the
      client to initiate a row-by-row result set retrieval by calling
      <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>. This function
      initializes the retrieval, but does not actually get any rows from
      the server.
    </p><p>
      In both cases, you access rows by calling
      <a href="connectors-apis.html#mysql-fetch-row" title="20.10.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>. With
      <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>,
      <a href="connectors-apis.html#mysql-fetch-row" title="20.10.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> accesses rows
      that have previously been fetched from the server. With
      <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>,
      <a href="connectors-apis.html#mysql-fetch-row" title="20.10.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> actually
      retrieves the row from the server. Information about the size of
      the data in each row is available by calling
      <a href="connectors-apis.html#mysql-fetch-lengths" title="20.10.3.20. mysql_fetch_lengths()"><code class="literal">mysql_fetch_lengths()</code></a>.
    </p><p>
      After you are done with a result set, call
      <a href="connectors-apis.html#mysql-free-result" title="20.10.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a> to free the
      memory used for it.
    </p><p>
      The two retrieval mechanisms are complementary. Client programs
      should choose the approach that is most appropriate for their
      requirements. In practice, clients tend to use
      <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> more
      commonly.
    </p><p>
      An advantage of
      <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> is that
      because the rows have all been fetched to the client, you not only
      can access rows sequentially, you can move back and forth in the
      result set using <a href="connectors-apis.html#mysql-data-seek" title="20.10.3.9. mysql_data_seek()"><code class="literal">mysql_data_seek()</code></a>
      or <a href="connectors-apis.html#mysql-row-seek" title="20.10.3.58. mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a> to change the
      current row position within the result set. You can also find out
      how many rows there are by calling
      <a href="connectors-apis.html#mysql-num-rows" title="20.10.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a>. On the other
      hand, the memory requirements for
      <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> may be very
      high for large result sets and you are more likely to encounter
      out-of-memory conditions.
    </p><p>
      An advantage of <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>
      is that the client requires less memory for the result set because
      it maintains only one row at a time (and because there is less
      allocation overhead,
      <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> can be faster).
      Disadvantages are that you must process each row quickly to avoid
      tying up the server, you don't have random access to rows within
      the result set (you can only access rows sequentially), and you
      don't know how many rows are in the result set until you have
      retrieved them all. Furthermore, you
      <span class="bold"><strong>must</strong></span> retrieve all the rows even
      if you determine in mid-retrieval that you've found the
      information you were looking for.
    </p><p>
      The API makes it possible for clients to respond appropriately to
      statements (retrieving rows only as necessary) without knowing
      whether the statement is a <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>.
      You can do this by calling
      <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> after each
      <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> (or
      <a href="connectors-apis.html#mysql-real-query" title="20.10.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a>). If the result
      set call succeeds, the statement was a
      <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> and you can read the rows.
      If the result set call fails, call
      <a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> to determine
      whether a result was actually to be expected. If
      <a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> returns zero,
      the statement returned no data (indicating that it was an
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>,
      <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a>,
      <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>, and so forth), and was not
      expected to return rows. If
      <a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> is non-zero,
      the statement should have returned rows, but didn't. This
      indicates that the statement was a
      <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> that failed. See the
      description for
      <a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> for an example
      of how this can be done.
    </p><p>
      Both <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> and
      <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> allow you to
      obtain information about the fields that make up the result set
      (the number of fields, their names and types, and so forth). You
      can access field information sequentially within the row by
      calling <a href="connectors-apis.html#mysql-fetch-field" title="20.10.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a>
      repeatedly, or by field number within the row by calling
      <a href="connectors-apis.html#mysql-fetch-field-direct" title="20.10.3.18. mysql_fetch_field_direct()"><code class="literal">mysql_fetch_field_direct()</code></a>. The
      current field cursor position may be changed by calling
      <a href="connectors-apis.html#mysql-field-seek" title="20.10.3.23. mysql_field_seek()"><code class="literal">mysql_field_seek()</code></a>. Setting the
      field cursor affects subsequent calls to
      <a href="connectors-apis.html#mysql-fetch-field" title="20.10.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a>. You can also
      get information for fields all at once by calling
      <a href="connectors-apis.html#mysql-fetch-fields" title="20.10.3.19. mysql_fetch_fields()"><code class="literal">mysql_fetch_fields()</code></a>.
    </p><p>
      For detecting and reporting errors, MySQL provides access to error
      information by means of the
      <a href="connectors-apis.html#mysql-errno" title="20.10.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> and
      <a href="connectors-apis.html#mysql-error" title="20.10.3.15. mysql_error()"><code class="literal">mysql_error()</code></a> functions. These
      return the error code or error message for the most recently
      invoked function that can succeed or fail, allowing you to
      determine when an error occurred and what it was.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-functions"></a>20.10.3. C API Function Descriptions</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#mysql-affected-rows">20.10.3.1. <code class="literal">mysql_affected_rows()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-autocommit">20.10.3.2. <code class="literal">mysql_autocommit()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-change-user">20.10.3.3. <code class="literal">mysql_change_user()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-character-set-name">20.10.3.4. <code class="literal">mysql_character_set_name()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-close">20.10.3.5. <code class="literal">mysql_close()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-commit">20.10.3.6. <code class="literal">mysql_commit()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-connect">20.10.3.7. <code class="literal">mysql_connect()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-create-db">20.10.3.8. <code class="literal">mysql_create_db()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-data-seek">20.10.3.9. <code class="literal">mysql_data_seek()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-debug">20.10.3.10. <code class="literal">mysql_debug()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-drop-db">20.10.3.11. <code class="literal">mysql_drop_db()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-dump-debug-info">20.10.3.12. <code class="literal">mysql_dump_debug_info()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-eof">20.10.3.13. <code class="literal">mysql_eof()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-errno">20.10.3.14. <code class="literal">mysql_errno()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-error">20.10.3.15. <code class="literal">mysql_error()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-escape-string">20.10.3.16. <code class="literal">mysql_escape_string()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-fetch-field">20.10.3.17. <code class="literal">mysql_fetch_field()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-fetch-field-direct">20.10.3.18. <code class="literal">mysql_fetch_field_direct()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-fetch-fields">20.10.3.19. <code class="literal">mysql_fetch_fields()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-fetch-lengths">20.10.3.20. <code class="literal">mysql_fetch_lengths()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-fetch-row">20.10.3.21. <code class="literal">mysql_fetch_row()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-field-count">20.10.3.22. <code class="literal">mysql_field_count()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-field-seek">20.10.3.23. <code class="literal">mysql_field_seek()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-field-tell">20.10.3.24. <code class="literal">mysql_field_tell()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-free-result">20.10.3.25. <code class="literal">mysql_free_result()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-get-character-set-info">20.10.3.26. <code class="literal">mysql_get_character_set_info()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-get-client-info">20.10.3.27. <code class="literal">mysql_get_client_info()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-get-client-version">20.10.3.28. <code class="literal">mysql_get_client_version()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-get-host-info">20.10.3.29. <code class="literal">mysql_get_host_info()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-get-proto-info">20.10.3.30. <code class="literal">mysql_get_proto_info()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-get-server-info">20.10.3.31. <code class="literal">mysql_get_server_info()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-get-server-version">20.10.3.32. <code class="literal">mysql_get_server_version()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-get-ssl-cipher">20.10.3.33. <code class="literal">mysql_get_ssl_cipher()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-hex-string">20.10.3.34. <code class="literal">mysql_hex_string()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-info">20.10.3.35. <code class="literal">mysql_info()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-init">20.10.3.36. <code class="literal">mysql_init()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-insert-id">20.10.3.37. <code class="literal">mysql_insert_id()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-kill">20.10.3.38. <code class="literal">mysql_kill()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-library-end">20.10.3.39. <code class="literal">mysql_library_end()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-library-init">20.10.3.40. <code class="literal">mysql_library_init()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-list-dbs">20.10.3.41. <code class="literal">mysql_list_dbs()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-list-fields">20.10.3.42. <code class="literal">mysql_list_fields()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-list-processes">20.10.3.43. <code class="literal">mysql_list_processes()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-list-tables">20.10.3.44. <code class="literal">mysql_list_tables()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-more-results">20.10.3.45. <code class="literal">mysql_more_results()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-next-result">20.10.3.46. <code class="literal">mysql_next_result()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-num-fields">20.10.3.47. <code class="literal">mysql_num_fields()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-num-rows">20.10.3.48. <code class="literal">mysql_num_rows()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-options">20.10.3.49. <code class="literal">mysql_options()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-ping">20.10.3.50. <code class="literal">mysql_ping()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-query">20.10.3.51. <code class="literal">mysql_query()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-real-connect">20.10.3.52. <code class="literal">mysql_real_connect()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-real-escape-string">20.10.3.53. <code class="literal">mysql_real_escape_string()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-real-query">20.10.3.54. <code class="literal">mysql_real_query()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-refresh">20.10.3.55. <code class="literal">mysql_refresh()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-reload">20.10.3.56. <code class="literal">mysql_reload()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-rollback">20.10.3.57. <code class="literal">mysql_rollback()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-row-seek">20.10.3.58. <code class="literal">mysql_row_seek()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-row-tell">20.10.3.59. <code class="literal">mysql_row_tell()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-select-db">20.10.3.60. <code class="literal">mysql_select_db()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-set-character-set">20.10.3.61. <code class="literal">mysql_set_character_set()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-set-local-infile-default">20.10.3.62. <code class="literal">mysql_set_local_infile_default()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-set-local-infile-handler">20.10.3.63. <code class="literal">mysql_set_local_infile_handler()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-set-server-option">20.10.3.64. <code class="literal">mysql_set_server_option()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-shutdown">20.10.3.65. <code class="literal">mysql_shutdown()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-sqlstate">20.10.3.66. <code class="literal">mysql_sqlstate()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-ssl-set">20.10.3.67. <code class="literal">mysql_ssl_set()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stat">20.10.3.68. <code class="literal">mysql_stat()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-store-result">20.10.3.69. <code class="literal">mysql_store_result()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-thread-id">20.10.3.70. <code class="literal">mysql_thread_id()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-use-result">20.10.3.71. <code class="literal">mysql_use_result()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-warning-count">20.10.3.72. <code class="literal">mysql_warning_count()</code></a></span></dt></dl></div><p>
      In the descriptions here, a parameter or return value of
      <code class="literal">NULL</code> means <code class="literal">NULL</code> in the sense
      of the C programming language, not a MySQL <code class="literal">NULL</code>
      value.
    </p><p>
      Functions that return a value generally return a pointer or an
      integer. Unless specified otherwise, functions returning a pointer
      return a non-<code class="literal">NULL</code> value to indicate success or
      a <code class="literal">NULL</code> value to indicate an error, and
      functions returning an integer return zero to indicate success or
      non-zero to indicate an error. Note that “<span class="quote">non-zero</span>”
      means just that. Unless the function description says otherwise,
      do not test against a value other than zero:
    </p><pre class="programlisting">if (result)                   /* correct */
    ... error ...

if (result &lt; 0)               /* incorrect */
    ... error ...

if (result == -1)             /* incorrect */
    ... error ...
</pre><p>
      When a function returns an error, the
      <span class="bold"><strong>Errors</strong></span> subsection of the function
      description lists the possible types of errors. You can find out
      which of these occurred by calling
      <a href="connectors-apis.html#mysql-errno" title="20.10.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a>. A string
      representation of the error may be obtained by calling
      <a href="connectors-apis.html#mysql-error" title="20.10.3.15. mysql_error()"><code class="literal">mysql_error()</code></a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-affected-rows"></a>20.10.3.1. <code class="literal">mysql_affected_rows()</code></h4></div></div></div><a class="indexterm" name="id3677783"></a><p>
        <code class="literal">my_ulonglong mysql_affected_rows(MYSQL
        *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        After executing a statement with
        <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> or
        <a href="connectors-apis.html#mysql-real-query" title="20.10.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a>, returns the
        number of rows changed (for
        <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a>), deleted (for
        <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>), or inserted (for
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>). For
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statements,
        <a href="connectors-apis.html#mysql-affected-rows" title="20.10.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> works like
        <a href="connectors-apis.html#mysql-num-rows" title="20.10.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An integer greater than zero indicates the number of rows
        affected or retrieved. Zero indicates that no records were
        updated for an <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement,
        no rows matched the <code class="literal">WHERE</code> clause in the query
        or that no query has yet been executed. -1 indicates that the
        query returned an error or that, for a
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> query,
        <a href="connectors-apis.html#mysql-affected-rows" title="20.10.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> was called
        prior to calling
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>. Because
        <a href="connectors-apis.html#mysql-affected-rows" title="20.10.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> returns an
        unsigned value, you can check for -1 by comparing the return
        value to <code class="literal">(my_ulonglong)-1</code> (or to
        <code class="literal">(my_ulonglong)~0</code>, which is equivalent).
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">char *stmt = "UPDATE products SET cost=cost*1.25 WHERE group=10";
mysql_query(&amp;mysql,stmt);
printf("%ld products updated",
       (long) mysql_affected_rows(&amp;mysql));
</pre><p>
        For <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a> statements, if you
        specify the <code class="literal">CLIENT_FOUND_ROWS</code> flag when
        connecting to <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>,
        <a href="connectors-apis.html#mysql-affected-rows" title="20.10.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> returns
        the number of rows matched by the <code class="literal">WHERE</code>
        clause. Otherwise, the default behavior is to return the number
        of rows actually changed.
      </p><p>
        Note that when you use a <a href="sql-syntax.html#replace" title="12.2.8. REPLACE Syntax"><code class="literal">REPLACE</code></a>
        command, <a href="connectors-apis.html#mysql-affected-rows" title="20.10.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a>
        returns 2 if the new row replaced an old row, because in this
        case, one row was inserted after the duplicate was deleted.
      </p><p>
        If you use
        <a href="sql-syntax.html#insert-on-duplicate" title="12.2.5.3. INSERT ... ON
        DUPLICATE KEY UPDATE Syntax"><code class="literal">INSERT ...
        ON DUPLICATE KEY UPDATE</code></a> to insert a row,
        <a href="connectors-apis.html#mysql-affected-rows" title="20.10.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> returns 1
        if the row is inserted as a new row and 2 if an existing row is
        updated.
      </p><p>
        <a href="connectors-apis.html#mysql-affected-rows" title="20.10.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> returns
        <code class="literal">0</code> following a
        <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statement for a stored
        procedure that contains a statement that modifies rows because
        in this case <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a>
        applies to <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> and not the
        statement within the procedure. Within the procedure, you can
        use <a href="functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a> at the SQL level
        to obtain the <code class="literal">AUTO_INCREMENT</code> value.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-autocommit"></a>20.10.3.2. <code class="literal">mysql_autocommit()</code></h4></div></div></div><a class="indexterm" name="id3678132"></a><p>
        <code class="literal">my_bool mysql_autocommit(MYSQL *mysql, my_bool
        mode)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Sets autocommit mode on if <code class="literal">mode</code> is 1, off if
        <code class="literal">mode</code> is 0.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if successful. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-change-user"></a>20.10.3.3. <code class="literal">mysql_change_user()</code></h4></div></div></div><a class="indexterm" name="id3678213"></a><p>
        <code class="literal">my_bool mysql_change_user(MYSQL *mysql, const char
        *user, const char *password, const char *db)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Changes the user and causes the database specified by
        <code class="literal">db</code> to become the default (current) database
        on the connection specified by <code class="literal">mysql</code>. In
        subsequent queries, this database is the default for table
        references that do not include an explicit database specifier.
      </p><p>
        <a href="connectors-apis.html#mysql-change-user" title="20.10.3.3. mysql_change_user()"><code class="literal">mysql_change_user()</code></a> fails if the
        connected user cannot be authenticated or doesn't have
        permission to use the database. In this case, the user and
        database are not changed.
      </p><p>
        The <code class="literal">db</code> parameter may be set to
        <code class="literal">NULL</code> if you don't want to have a default
        database.
      </p><p>
        This command resets the state as if one had done a new connect.
        (See <a href="connectors-apis.html#auto-reconnect" title="20.10.11. Controlling Automatic Reconnection Behavior">Section 20.10.11, “Controlling Automatic Reconnection Behavior”</a>.) It always performs a
        <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a> of
        any active transactions, closes and drops all temporary tables,
        and unlocks all locked tables. Session system variables are
        reset to the values of the corresponding global system
        variables. Prepared statements are released and
        <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a> variables are closed.
        Locks acquired with <a href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a>
        are released. These effects occur even if the user didn't
        change.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero for success. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        The same that you can get from
        <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li><li><p>
            <code class="literal">ER_UNKNOWN_COM_ERROR</code>
          </p><p>
            The MySQL server doesn't implement this command (probably an
            old server).
          </p></li><li><p>
            <code class="literal">ER_ACCESS_DENIED_ERROR</code>
          </p><p>
            The user or password was wrong.
          </p></li><li><p>
            <code class="literal">ER_BAD_DB_ERROR</code>
          </p><p>
            The database didn't exist.
          </p></li><li><p>
            <code class="literal">ER_DBACCESS_DENIED_ERROR</code>
          </p><p>
            The user did not have access rights to the database.
          </p></li><li><p>
            <code class="literal">ER_WRONG_DB_NAME</code>
          </p><p>
            The database name was too long.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">if (mysql_change_user(&amp;mysql, "user", "password", "new_database"))
{
   fprintf(stderr, "Failed to change user.  Error: %s\n",
           mysql_error(&amp;mysql));
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-character-set-name"></a>20.10.3.4. <code class="literal">mysql_character_set_name()</code></h4></div></div></div><a class="indexterm" name="id3678548"></a><p>
        <code class="literal">const char *mysql_character_set_name(MYSQL
        *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the default character set name for the current
        connection.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The default character set name
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-close"></a>20.10.3.5. <code class="literal">mysql_close()</code></h4></div></div></div><a class="indexterm" name="id3678617"></a><p>
        <code class="literal">void mysql_close(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Closes a previously opened connection.
        <a href="connectors-apis.html#mysql-close" title="20.10.3.5. mysql_close()"><code class="literal">mysql_close()</code></a> also deallocates
        the connection handle pointed to by <code class="literal">mysql</code> if
        the handle was allocated automatically by
        <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a> or
        <a href="connectors-apis.html#mysql-connect" title="20.10.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-commit"></a>20.10.3.6. <code class="literal">mysql_commit()</code></h4></div></div></div><a class="indexterm" name="id3678714"></a><p>
        <code class="literal">my_bool mysql_commit(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Commits the current transaction.
      </p><p>
        The action of this function is subject to the value of the
        <a href="server-administration.html#sysvar_completion_type"><code class="literal">completion_type</code></a> system
        variable. In particular, if the value of
        <a href="server-administration.html#sysvar_completion_type"><code class="literal">completion_type</code></a> is 2, the
        server performs a release after terminating a transaction and
        closes the client connection. The client program should call
        <a href="connectors-apis.html#mysql-close" title="20.10.3.5. mysql_close()"><code class="literal">mysql_close()</code></a> to close the
        connection from the client side.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if successful. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-connect"></a>20.10.3.7. <code class="literal">mysql_connect()</code></h4></div></div></div><a class="indexterm" name="id3678813"></a><p>
        <code class="literal">MYSQL *mysql_connect(MYSQL *mysql, const char *host,
        const char *user, const char *passwd)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is deprecated. Use
        <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> instead.
      </p><p>
        <a href="connectors-apis.html#mysql-connect" title="20.10.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a> attempts to
        establish a connection to a MySQL database engine running on
        <code class="literal">host</code>.
        <a href="connectors-apis.html#mysql-connect" title="20.10.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a> must complete
        successfully before you can execute any of the other API
        functions, with the exception of
        <a href="connectors-apis.html#mysql-get-client-info" title="20.10.3.27. mysql_get_client_info()"><code class="literal">mysql_get_client_info()</code></a>.
      </p><p>
        The meanings of the parameters are the same as for the
        corresponding parameters for
        <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> with the
        difference that the connection parameter may be
        <code class="literal">NULL</code>. In this case, the C API allocates
        memory for the connection structure automatically and frees it
        when you call <a href="connectors-apis.html#mysql-close" title="20.10.3.5. mysql_close()"><code class="literal">mysql_close()</code></a>. The
        disadvantage of this approach is that you can't retrieve an
        error message if the connection fails. (To get error information
        from <a href="connectors-apis.html#mysql-errno" title="20.10.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> or
        <a href="connectors-apis.html#mysql-error" title="20.10.3.15. mysql_error()"><code class="literal">mysql_error()</code></a>, you must provide
        a valid <code class="literal">MYSQL</code> pointer.)
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Same as for
        <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        Same as for
        <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-create-db"></a>20.10.3.8. <code class="literal">mysql_create_db()</code></h4></div></div></div><a class="indexterm" name="id3678998"></a><p>
        <code class="literal">int mysql_create_db(MYSQL *mysql, const char
        *db)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Creates the database named by the <code class="literal">db</code>
        parameter.
      </p><p>
        This function is deprecated. It is preferable to use
        <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> to issue an SQL
        <a href="sql-syntax.html#create-database" title="12.1.8. CREATE DATABASE Syntax"><code class="literal">CREATE DATABASE</code></a> statement
        instead.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the database was created successfully. Non-zero if an
        error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">if(mysql_create_db(&amp;mysql, "my_database"))
{
   fprintf(stderr, "Failed to create new database.  Error: %s\n",
           mysql_error(&amp;mysql));
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-data-seek"></a>20.10.3.9. <code class="literal">mysql_data_seek()</code></h4></div></div></div><a class="indexterm" name="id3679185"></a><p>
        <code class="literal">void mysql_data_seek(MYSQL_RES *result, my_ulonglong
        offset)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Seeks to an arbitrary row in a query result set. The
        <code class="literal">offset</code> value is a row number and should be in
        the range from <code class="literal">0</code> to
        <a href="connectors-apis.html#mysql-num-rows" title="20.10.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows(result)-1</code></a>.
      </p><p>
        This function requires that the result set structure contains
        the entire result of the query, so
        <a href="connectors-apis.html#mysql-data-seek" title="20.10.3.9. mysql_data_seek()"><code class="literal">mysql_data_seek()</code></a> may be used
        only in conjunction with
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>, not with
        <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-debug"></a>20.10.3.10. <code class="literal">mysql_debug()</code></h4></div></div></div><a class="indexterm" name="id3679302"></a><p>
        <code class="literal">void mysql_debug(const char *debug)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Does a <code class="literal">DBUG_PUSH</code> with the given string.
        <a href="connectors-apis.html#mysql-debug" title="20.10.3.10. mysql_debug()"><code class="literal">mysql_debug()</code></a> uses the Fred Fish
        debug library. To use this function, you must compile the client
        library to support debugging. See
        <a href="http://forge.mysql.com/wiki/MySQL_Internals_Porting" target="_top">MySQL
        Internals: Porting</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        The call shown here causes the client library to generate a
        trace file in <code class="filename">/tmp/client.trace</code> on the
        client machine:
      </p><pre class="programlisting">mysql_debug("d:t:O,/tmp/client.trace");
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-drop-db"></a>20.10.3.11. <code class="literal">mysql_drop_db()</code></h4></div></div></div><a class="indexterm" name="id3679418"></a><p>
        <code class="literal">int mysql_drop_db(MYSQL *mysql, const char
        *db)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Drops the database named by the <code class="literal">db</code> parameter.
      </p><p>
        This function is deprecated. It is preferable to use
        <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> to issue an SQL
        <a href="sql-syntax.html#drop-database" title="12.1.17. DROP DATABASE Syntax"><code class="literal">DROP DATABASE</code></a> statement instead.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the database was dropped successfully. Non-zero if an
        error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">if(mysql_drop_db(&amp;mysql, "my_database"))
  fprintf(stderr, "Failed to drop the database: Error: %s\n",
          mysql_error(&amp;mysql));
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-dump-debug-info"></a>20.10.3.12. <code class="literal">mysql_dump_debug_info()</code></h4></div></div></div><a class="indexterm" name="id3679605"></a><p>
        <code class="literal">int mysql_dump_debug_info(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Instructs the server to write some debug information to the log.
        For this to work, the connected user must have the
        <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> privilege.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the command was successful. Non-zero if an error
        occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-eof"></a>20.10.3.13. <code class="literal">mysql_eof()</code></h4></div></div></div><a class="indexterm" name="id3679748"></a><p>
        <code class="literal">my_bool mysql_eof(MYSQL_RES *result)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is deprecated.
        <a href="connectors-apis.html#mysql-errno" title="20.10.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> or
        <a href="connectors-apis.html#mysql-error" title="20.10.3.15. mysql_error()"><code class="literal">mysql_error()</code></a> may be used
        instead.
      </p><p>
        <a href="connectors-apis.html#mysql-eof" title="20.10.3.13. mysql_eof()"><code class="literal">mysql_eof()</code></a> determines whether
        the last row of a result set has been read.
      </p><p>
        If you acquire a result set from a successful call to
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>, the client
        receives the entire set in one operation. In this case, a
        <code class="literal">NULL</code> return from
        <a href="connectors-apis.html#mysql-fetch-row" title="20.10.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> always means
        the end of the result set has been reached and it is unnecessary
        to call <a href="connectors-apis.html#mysql-eof" title="20.10.3.13. mysql_eof()"><code class="literal">mysql_eof()</code></a>. When used
        with <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>,
        <a href="connectors-apis.html#mysql-eof" title="20.10.3.13. mysql_eof()"><code class="literal">mysql_eof()</code></a> always returns true.
      </p><p>
        On the other hand, if you use
        <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> to initiate a
        result set retrieval, the rows of the set are obtained from the
        server one by one as you call
        <a href="connectors-apis.html#mysql-fetch-row" title="20.10.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> repeatedly.
        Because an error may occur on the connection during this
        process, a <code class="literal">NULL</code> return value from
        <a href="connectors-apis.html#mysql-fetch-row" title="20.10.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> does not
        necessarily mean the end of the result set was reached normally.
        In this case, you can use
        <a href="connectors-apis.html#mysql-eof" title="20.10.3.13. mysql_eof()"><code class="literal">mysql_eof()</code></a> to determine what
        happened. <a href="connectors-apis.html#mysql-eof" title="20.10.3.13. mysql_eof()"><code class="literal">mysql_eof()</code></a> returns a
        non-zero value if the end of the result set was reached and zero
        if an error occurred.
      </p><p>
        Historically, <a href="connectors-apis.html#mysql-eof" title="20.10.3.13. mysql_eof()"><code class="literal">mysql_eof()</code></a>
        predates the standard MySQL error functions
        <a href="connectors-apis.html#mysql-errno" title="20.10.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> and
        <a href="connectors-apis.html#mysql-error" title="20.10.3.15. mysql_error()"><code class="literal">mysql_error()</code></a>. Because those
        error functions provide the same information, their use is
        preferred over <a href="connectors-apis.html#mysql-eof" title="20.10.3.13. mysql_eof()"><code class="literal">mysql_eof()</code></a>,
        which is deprecated. (In fact, they provide more information,
        because <a href="connectors-apis.html#mysql-eof" title="20.10.3.13. mysql_eof()"><code class="literal">mysql_eof()</code></a> returns only
        a boolean value whereas the error functions indicate a reason
        for the error when one occurs.)
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if no error occurred. Non-zero if the end of the result set
        has been reached.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        The following example shows how you might use
        <a href="connectors-apis.html#mysql-eof" title="20.10.3.13. mysql_eof()"><code class="literal">mysql_eof()</code></a>:
      </p><pre class="programlisting">mysql_query(&amp;mysql,"SELECT * FROM some_table");
result = mysql_use_result(&amp;mysql);
while((row = mysql_fetch_row(result)))
{
    // do something with data
}
if(!mysql_eof(result))  // mysql_fetch_row() failed due to an error
{
    fprintf(stderr, "Error: %s\n", mysql_error(&amp;mysql));
}
</pre><p>
        However, you can achieve the same effect with the standard MySQL
        error functions:
      </p><pre class="programlisting">mysql_query(&amp;mysql,"SELECT * FROM some_table");
result = mysql_use_result(&amp;mysql);
while((row = mysql_fetch_row(result)))
{
    // do something with data
}
if(mysql_errno(&amp;mysql))  // mysql_fetch_row() failed due to an error
{
    fprintf(stderr, "Error: %s\n", mysql_error(&amp;mysql));
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-errno"></a>20.10.3.14. <code class="literal">mysql_errno()</code></h4></div></div></div><a class="indexterm" name="id3680059"></a><p>
        <code class="literal">unsigned int mysql_errno(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        For the connection specified by <code class="literal">mysql</code>,
        <a href="connectors-apis.html#mysql-errno" title="20.10.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> returns the error
        code for the most recently invoked API function that can succeed
        or fail. A return value of zero means that no error occurred.
        Client error message numbers are listed in the MySQL
        <code class="filename">errmsg.h</code> header file. Server error message
        numbers are listed in <code class="filename">mysqld_error.h</code>.
        Errors also are listed at <a href="error-handling.html" title="Appendix B. Errors, Error Codes, and Common Problems">Appendix B, <i>Errors, Error Codes, and Common Problems</i></a>.
      </p><p>
        Note that some functions like
        <a href="connectors-apis.html#mysql-fetch-row" title="20.10.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> don't set
        <a href="connectors-apis.html#mysql-errno" title="20.10.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> if they succeed.
      </p><p>
        A rule of thumb is that all functions that have to ask the
        server for information reset
        <a href="connectors-apis.html#mysql-errno" title="20.10.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> if they succeed.
      </p><p>
        MySQL-specific error numbers returned by
        <a href="connectors-apis.html#mysql-errno" title="20.10.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> differ from
        SQLSTATE values returned by
        <a href="connectors-apis.html#mysql-sqlstate" title="20.10.3.66. mysql_sqlstate()"><code class="literal">mysql_sqlstate()</code></a>. For example,
        the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> client program displays errors
        using the following format, where <code class="literal">1146</code> is the
        <a href="connectors-apis.html#mysql-errno" title="20.10.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> value and
        <code class="literal">'42S02'</code> is the corresponding
        <a href="connectors-apis.html#mysql-sqlstate" title="20.10.3.66. mysql_sqlstate()"><code class="literal">mysql_sqlstate()</code></a> value:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>SELECT * FROM no_such_table;</code></strong>
ERROR 1146 (42S02): Table 'test.no_such_table' doesn't exist
</pre><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An error code value for the last
        <code class="literal">mysql_<em class="replaceable"><code>xxx</code></em>()</code> call,
        if it failed. zero means no error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-error"></a>20.10.3.15. <code class="literal">mysql_error()</code></h4></div></div></div><a class="indexterm" name="id3680272"></a><p>
        <code class="literal">const char *mysql_error(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        For the connection specified by <code class="literal">mysql</code>,
        <a href="connectors-apis.html#mysql-error" title="20.10.3.15. mysql_error()"><code class="literal">mysql_error()</code></a> returns a
        null-terminated string containing the error message for the most
        recently invoked API function that failed. If a function didn't
        fail, the return value of
        <a href="connectors-apis.html#mysql-error" title="20.10.3.15. mysql_error()"><code class="literal">mysql_error()</code></a> may be the
        previous error or an empty string to indicate no error.
      </p><p>
        A rule of thumb is that all functions that have to ask the
        server for information reset
        <a href="connectors-apis.html#mysql-error" title="20.10.3.15. mysql_error()"><code class="literal">mysql_error()</code></a> if they succeed.
      </p><p>
        For functions that reset
        <a href="connectors-apis.html#mysql-error" title="20.10.3.15. mysql_error()"><code class="literal">mysql_error()</code></a>, the following two
        tests are equivalent:
      </p><pre class="programlisting">if(*mysql_error(&amp;mysql))
{
  // an error occurred
}

if(mysql_error(&amp;mysql)[0])
{
  // an error occurred
}
</pre><p>
        The language of the client error messages may be changed by
        recompiling the MySQL client library. Currently, you can choose
        error messages in several different languages. See
        <a href="internationalization-localization.html#error-message-language" title="9.3. Setting the Error Message Language">Section 9.3, “Setting the Error Message Language”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A null-terminated character string that describes the error. An
        empty string if no error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-escape-string"></a>20.10.3.16. <code class="literal">mysql_escape_string()</code></h4></div></div></div><a class="indexterm" name="id3680411"></a><p>
        You should use
        <a href="connectors-apis.html#mysql-real-escape-string" title="20.10.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>
        instead!
      </p><p>
        This function is identical to
        <a href="connectors-apis.html#mysql-real-escape-string" title="20.10.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>
        except that
        <a href="connectors-apis.html#mysql-real-escape-string" title="20.10.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a> takes
        a connection handler as its first argument and escapes the
        string according to the current character set.
        <a href="connectors-apis.html#mysql-escape-string" title="20.10.3.16. mysql_escape_string()"><code class="literal">mysql_escape_string()</code></a> does not
        take a connection argument and does not respect the current
        character set.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-fetch-field"></a>20.10.3.17. <code class="literal">mysql_fetch_field()</code></h4></div></div></div><a class="indexterm" name="id3680473"></a><p>
        <code class="literal">MYSQL_FIELD *mysql_fetch_field(MYSQL_RES
        *result)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the definition of one column of a result set as a
        <code class="literal">MYSQL_FIELD</code> structure. Call this function
        repeatedly to retrieve information about all columns in the
        result set. <a href="connectors-apis.html#mysql-fetch-field" title="20.10.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a>
        returns <code class="literal">NULL</code> when no more fields are left.
      </p><p>
        <a href="connectors-apis.html#mysql-fetch-field" title="20.10.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a> is reset to
        return information about the first field each time you execute a
        new <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> query. The field
        returned by <a href="connectors-apis.html#mysql-fetch-field" title="20.10.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a>
        is also affected by calls to
        <a href="connectors-apis.html#mysql-field-seek" title="20.10.3.23. mysql_field_seek()"><code class="literal">mysql_field_seek()</code></a>.
      </p><p>
        If you've called <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a>
        to perform a <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> on a table
        but have not called
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>, MySQL
        returns the default blob length (8KB) if you call
        <a href="connectors-apis.html#mysql-fetch-field" title="20.10.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a> to ask for
        the length of a <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> field. (The
        8KB size is chosen because MySQL doesn't know the maximum length
        for the <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>. This should be made
        configurable sometime.) Once you've retrieved the result set,
        <code class="literal">field-&gt;max_length</code> contains the length of
        the largest value for this column in the specific query.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The <code class="literal">MYSQL_FIELD</code> structure for the current
        column. <code class="literal">NULL</code> if no columns are left.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">MYSQL_FIELD *field;

while((field = mysql_fetch_field(result)))
{
    printf("field name %s\n", field-&gt;name);
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-fetch-field-direct"></a>20.10.3.18. <code class="literal">mysql_fetch_field_direct()</code></h4></div></div></div><a class="indexterm" name="id3680690"></a><p>
        <code class="literal">MYSQL_FIELD *mysql_fetch_field_direct(MYSQL_RES
        *result, unsigned int fieldnr)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Given a field number <code class="literal">fieldnr</code> for a column
        within a result set, returns that column's field definition as a
        <code class="literal">MYSQL_FIELD</code> structure. You may use this
        function to retrieve the definition for an arbitrary column. The
        value of <code class="literal">fieldnr</code> should be in the range from
        0 to <a href="connectors-apis.html#mysql-num-fields" title="20.10.3.47. mysql_num_fields()"><code class="literal">mysql_num_fields(result)-1</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The <code class="literal">MYSQL_FIELD</code> structure for the specified
        column.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">unsigned int num_fields;
unsigned int i;
MYSQL_FIELD *field;

num_fields = mysql_num_fields(result);
for(i = 0; i &lt; num_fields; i++)
{
    field = mysql_fetch_field_direct(result, i);
    printf("Field %u is %s\n", i, field-&gt;name);
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-fetch-fields"></a>20.10.3.19. <code class="literal">mysql_fetch_fields()</code></h4></div></div></div><a class="indexterm" name="id3680817"></a><p>
        <code class="literal">MYSQL_FIELD *mysql_fetch_fields(MYSQL_RES
        *result)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns an array of all <code class="literal">MYSQL_FIELD</code>
        structures for a result set. Each structure provides the field
        definition for one column of the result set.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An array of <code class="literal">MYSQL_FIELD</code> structures for all
        columns of a result set.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">unsigned int num_fields;
unsigned int i;
MYSQL_FIELD *fields;

num_fields = mysql_num_fields(result);
fields = mysql_fetch_fields(result);
for(i = 0; i &lt; num_fields; i++)
{
   printf("Field %u is %s\n", i, fields[i].name);
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-fetch-lengths"></a>20.10.3.20. <code class="literal">mysql_fetch_lengths()</code></h4></div></div></div><a class="indexterm" name="id3680919"></a><p>
        <code class="literal">unsigned long *mysql_fetch_lengths(MYSQL_RES
        *result)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the lengths of the columns of the current row within a
        result set. If you plan to copy field values, this length
        information is also useful for optimization, because you can
        avoid calling <code class="literal">strlen()</code>. In addition, if the
        result set contains binary data, you
        <span class="bold"><strong>must</strong></span> use this function to
        determine the size of the data, because
        <code class="literal">strlen()</code> returns incorrect results for any
        field containing null characters.
      </p><p>
        The length for empty columns and for columns containing
        <code class="literal">NULL</code> values is zero. To see how to
        distinguish these two cases, see the description for
        <a href="connectors-apis.html#mysql-fetch-row" title="20.10.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An array of unsigned long integers representing the size of each
        column (not including any terminating null characters).
        <code class="literal">NULL</code> if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        <a href="connectors-apis.html#mysql-fetch-lengths" title="20.10.3.20. mysql_fetch_lengths()"><code class="literal">mysql_fetch_lengths()</code></a> is valid
        only for the current row of the result set. It returns
        <code class="literal">NULL</code> if you call it before calling
        <a href="connectors-apis.html#mysql-fetch-row" title="20.10.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> or after
        retrieving all rows in the result.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">MYSQL_ROW row;
unsigned long *lengths;
unsigned int num_fields;
unsigned int i;

row = mysql_fetch_row(result);
if (row)
{
    num_fields = mysql_num_fields(result);
    lengths = mysql_fetch_lengths(result);
    for(i = 0; i &lt; num_fields; i++)
    {
         printf("Column %u is %lu bytes in length.\n", 
                i, lengths[i]);
    }
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-fetch-row"></a>20.10.3.21. <code class="literal">mysql_fetch_row()</code></h4></div></div></div><a class="indexterm" name="id3681084"></a><p>
        <code class="literal">MYSQL_ROW mysql_fetch_row(MYSQL_RES *result)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Retrieves the next row of a result set. When used after
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>,
        <a href="connectors-apis.html#mysql-fetch-row" title="20.10.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> returns
        <code class="literal">NULL</code> when there are no more rows to retrieve.
        When used after
        <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>,
        <a href="connectors-apis.html#mysql-fetch-row" title="20.10.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> returns
        <code class="literal">NULL</code> when there are no more rows to retrieve
        or if an error occurred.
      </p><p>
        The number of values in the row is given by
        <a href="connectors-apis.html#mysql-num-fields" title="20.10.3.47. mysql_num_fields()"><code class="literal">mysql_num_fields(result)</code></a>. If
        <code class="literal">row</code> holds the return value from a call to
        <a href="connectors-apis.html#mysql-fetch-row" title="20.10.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>, pointers to
        the values are accessed as <code class="literal">row[0]</code> to
        <code class="literal">row[mysql_num_fields(result)-1]</code>.
        <code class="literal">NULL</code> values in the row are indicated by
        <code class="literal">NULL</code> pointers.
      </p><p>
        The lengths of the field values in the row may be obtained by
        calling <a href="connectors-apis.html#mysql-fetch-lengths" title="20.10.3.20. mysql_fetch_lengths()"><code class="literal">mysql_fetch_lengths()</code></a>.
        Empty fields and fields containing <code class="literal">NULL</code> both
        have length 0; you can distinguish these by checking the pointer
        for the field value. If the pointer is <code class="literal">NULL</code>,
        the field is <code class="literal">NULL</code>; otherwise, the field is
        empty.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A <code class="literal">MYSQL_ROW</code> structure for the next row.
        <code class="literal">NULL</code> if there are no more rows to retrieve or
        if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        Note that error is not reset between calls to
        <a href="connectors-apis.html#mysql-fetch-row" title="20.10.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">MYSQL_ROW row;
unsigned int num_fields;
unsigned int i;

num_fields = mysql_num_fields(result);
while ((row = mysql_fetch_row(result)))
{
   unsigned long *lengths;
   lengths = mysql_fetch_lengths(result);
   for(i = 0; i &lt; num_fields; i++)
   {
       printf("[%.*s] ", (int) lengths[i], 
              row[i] ? row[i] : "NULL");
   }
   printf("\n");
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-field-count"></a>20.10.3.22. <code class="literal">mysql_field_count()</code></h4></div></div></div><a class="indexterm" name="id3681362"></a><p>
        <code class="literal">unsigned int mysql_field_count(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the number of columns for the most recent query on the
        connection.
      </p><p>
        The normal use of this function is when
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> returned
        <code class="literal">NULL</code> (and thus you have no result set
        pointer). In this case, you can call
        <a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> to determine
        whether <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>
        should have produced a non-empty result. This allows the client
        program to take proper action without knowing whether the query
        was a <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> (or
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>-like) statement. The
        example shown here illustrates how this may be done.
      </p><p>
        See <a href="connectors-apis.html#null-mysql-store-result" title="20.10.10.1. Why mysql_store_result() Sometimes
        Returns NULL After
        mysql_query() Returns Success">Section 20.10.10.1, “Why <code class="literal">mysql_store_result()</code> Sometimes
        Returns <code class="literal">NULL</code> After
        <code class="literal">mysql_query()</code> Returns Success”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An unsigned integer representing the number of columns in a
        result set.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">MYSQL_RES *result;
unsigned int num_fields;
unsigned int num_rows;

if (mysql_query(&amp;mysql,query_string))
{
    // error
}
else // query succeeded, process any data returned by it
{
    result = mysql_store_result(&amp;mysql);
    if (result)  // there are rows
    {
        num_fields = mysql_num_fields(result);
        // retrieve rows, then call mysql_free_result(result)
    }
    else  // mysql_store_result() returned nothing; should it have?
    {
        if(mysql_field_count(&amp;mysql) == 0)
        {
            // query does not return data
            // (it was not a SELECT)
            num_rows = mysql_affected_rows(&amp;mysql);
        }
        else // mysql_store_result() should have returned data
        {
            fprintf(stderr, "Error: %s\n", mysql_error(&amp;mysql));
        }
    }
}
</pre><p>
        An alternative is to replace the
        <a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()"><code class="literal">mysql_field_count(&amp;mysql)</code></a>
        call with
        <a href="connectors-apis.html#mysql-errno" title="20.10.3.14. mysql_errno()"><code class="literal">mysql_errno(&amp;mysql)</code></a>. In this
        case, you are checking directly for an error from
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> rather than
        inferring from the value of
        <a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> whether the
        statement was a <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-field-seek"></a>20.10.3.23. <code class="literal">mysql_field_seek()</code></h4></div></div></div><a class="indexterm" name="id3681576"></a><p>
        <code class="literal">MYSQL_FIELD_OFFSET mysql_field_seek(MYSQL_RES *result,
        MYSQL_FIELD_OFFSET offset)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Sets the field cursor to the given offset. The next call to
        <a href="connectors-apis.html#mysql-fetch-field" title="20.10.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a> retrieves
        the field definition of the column associated with that offset.
      </p><p>
        To seek to the beginning of a row, pass an
        <code class="literal">offset</code> value of zero.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The previous value of the field cursor.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-field-tell"></a>20.10.3.24. <code class="literal">mysql_field_tell()</code></h4></div></div></div><a class="indexterm" name="id3681664"></a><p>
        <code class="literal">MYSQL_FIELD_OFFSET mysql_field_tell(MYSQL_RES
        *result)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the position of the field cursor used for the last
        <a href="connectors-apis.html#mysql-fetch-field" title="20.10.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a>. This value
        can be used as an argument to
        <a href="connectors-apis.html#mysql-field-seek" title="20.10.3.23. mysql_field_seek()"><code class="literal">mysql_field_seek()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The current offset of the field cursor.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-free-result"></a>20.10.3.25. <code class="literal">mysql_free_result()</code></h4></div></div></div><a class="indexterm" name="id3681748"></a><p>
        <code class="literal">void mysql_free_result(MYSQL_RES *result)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Frees the memory allocated for a result set by
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>,
        <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>,
        <a href="connectors-apis.html#mysql-list-dbs" title="20.10.3.41. mysql_list_dbs()"><code class="literal">mysql_list_dbs()</code></a>, and so forth.
        When you are done with a result set, you must free the memory it
        uses by calling
        <a href="connectors-apis.html#mysql-free-result" title="20.10.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a>.
      </p><p>
        Do not attempt to access a result set after freeing it.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-get-character-set-info"></a>20.10.3.26. <code class="literal">mysql_get_character_set_info()</code></h4></div></div></div><a class="indexterm" name="id3681852"></a><p>
        <code class="literal">void mysql_get_character_set_info(MYSQL *mysql,
        MY_CHARSET_INFO *cs)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function provides information about the default client
        character set. The default character set may be changed with the
        <a href="connectors-apis.html#mysql-set-character-set" title="20.10.3.61. mysql_set_character_set()"><code class="literal">mysql_set_character_set()</code></a>
        function.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        This example shows the fields that are available in the
        <code class="literal">MY_CHARSET_INFO</code> structure:
      </p><pre class="programlisting">if (!mysql_set_character_set(&amp;mysql, "utf8"))
{
    MY_CHARSET_INFO cs;
    mysql_get_character_set_info(&amp;mysql, &amp;cs);
    printf("character set information:\n");
    printf("character set+collation number: %d\n", cs.number);
    printf("character set name: %s\n", cs.name);
    printf("collation name: %s\n", cs.csname);
    printf("comment: %s\n", cs.comment);
    printf("directory: %s\n", cs.dir);
    printf("multi byte character min. length: %d\n", cs.mbminlen);
    printf("multi byte character max. length: %d\n", cs.mbmaxlen);
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-get-client-info"></a>20.10.3.27. <code class="literal">mysql_get_client_info()</code></h4></div></div></div><a class="indexterm" name="id3681954"></a><p>
        <code class="literal">const char *mysql_get_client_info(void)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns a string that represents the client library version.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A character string that represents the MySQL client library
        version.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-get-client-version"></a>20.10.3.28. <code class="literal">mysql_get_client_version()</code></h4></div></div></div><a class="indexterm" name="id3682023"></a><p>
        <code class="literal">unsigned long mysql_get_client_version(void)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns an integer that represents the client library version.
        The value has the format <code class="literal">XYYZZ</code> where
        <code class="literal">X</code> is the major version, <code class="literal">YY</code>
        is the release level, and <code class="literal">ZZ</code> is the version
        number within the release level. For example, a value of
        <code class="literal">40102</code> represents a client library version of
        <code class="literal">4.1.2</code>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An integer that represents the MySQL client library version.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-get-host-info"></a>20.10.3.29. <code class="literal">mysql_get_host_info()</code></h4></div></div></div><a class="indexterm" name="id3682131"></a><p>
        <code class="literal">const char *mysql_get_host_info(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns a string describing the type of connection in use,
        including the server host name.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A character string representing the server host name and the
        connection type.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-get-proto-info"></a>20.10.3.30. <code class="literal">mysql_get_proto_info()</code></h4></div></div></div><a class="indexterm" name="id3682201"></a><p>
        <code class="literal">unsigned int mysql_get_proto_info(MYSQL
        *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the protocol version used by current connection.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An unsigned integer representing the protocol version used by
        the current connection.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-get-server-info"></a>20.10.3.31. <code class="literal">mysql_get_server_info()</code></h4></div></div></div><a class="indexterm" name="id3682271"></a><p>
        <code class="literal">const char *mysql_get_server_info(MYSQL
        *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns a string that represents the server version number.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A character string that represents the server version number.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-get-server-version"></a>20.10.3.32. <code class="literal">mysql_get_server_version()</code></h4></div></div></div><a class="indexterm" name="id3682341"></a><p>
        <code class="literal">unsigned long mysql_get_server_version(MYSQL
        *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the version number of the server as an integer.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A number that represents the MySQL server version in this
        format:
      </p><pre class="programlisting">major_version*10000 + minor_version *100 + sub_version
</pre><p>
        For example, 5.1.5 is returned as 50105.
      </p><p>
        This function is useful in client programs for quickly
        determining whether some version-specific server capability
        exists.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-get-ssl-cipher"></a>20.10.3.33. <code class="literal">mysql_get_ssl_cipher()</code></h4></div></div></div><a class="indexterm" name="id3682427"></a><p>
        <code class="literal">const char *mysql_get_ssl_cipher(MYSQL
        *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        <a href="connectors-apis.html#mysql-get-ssl-cipher" title="20.10.3.33. mysql_get_ssl_cipher()"><code class="literal">mysql_get_ssl_cipher()</code></a> returns
        the SSL cipher used for the given connection to the server.
        <code class="literal">mysql</code> is the connection handler returned from
        <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A string naming the SSL cipher used for the connection, or
        <code class="literal">NULL</code> if no cipher is being used.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-hex-string"></a>20.10.3.34. <code class="literal">mysql_hex_string()</code></h4></div></div></div><a class="indexterm" name="id3682511"></a><p>
        <code class="literal">unsigned long mysql_hex_string(char *to, const char
        *from, unsigned long length)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is used to create a legal SQL string that you can
        use in an SQL statement. See <a href="language-structure.html#string-syntax" title="8.1.1. Strings">Section 8.1.1, “Strings”</a>.
      </p><p>
        The string in <code class="literal">from</code> is encoded to hexadecimal
        format, with each character encoded as two hexadecimal digits.
        The result is placed in <code class="literal">to</code> and a terminating
        null byte is appended.
      </p><p>
        The string pointed to by <code class="literal">from</code> must be
        <code class="literal">length</code> bytes long. You must allocate the
        <code class="literal">to</code> buffer to be at least
        <code class="literal">length*2+1</code> bytes long. When
        <a href="connectors-apis.html#mysql-hex-string" title="20.10.3.34. mysql_hex_string()"><code class="literal">mysql_hex_string()</code></a> returns, the
        contents of <code class="literal">to</code> is a null-terminated string.
        The return value is the length of the encoded string, not
        including the terminating null character.
      </p><p>
        The return value can be placed into an SQL statement using
        either <code class="literal">0x<em class="replaceable"><code>value</code></em></code> or
        <code class="literal">X'<em class="replaceable"><code>value</code></em>'</code> format.
        However, the return value does not include the
        <code class="literal">0x</code> or <code class="literal">X'...'</code>. The caller
        must supply whichever of those is desired.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">char query[1000],*end;

end = strmov(query,"INSERT INTO test_table values(");
end = strmov(end,"0x");
end += mysql_hex_string(end,"What is this",12);
end = strmov(end,",0x");
end += mysql_hex_string(end,"binary data: \0\r\n",16);
*end++ = ')';

if (mysql_real_query(&amp;mysql,query,(unsigned int) (end - query)))
{
   fprintf(stderr, "Failed to insert row, Error: %s\n",
           mysql_error(&amp;mysql));
}
</pre><p>
        The <code class="literal">strmov()</code> function used in the example is
        included in the <code class="literal">mysqlclient</code> library and works
        like <code class="literal">strcpy()</code> but returns a pointer to the
        terminating null of the first parameter.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The length of the value placed into <code class="literal">to</code>, not
        including the terminating null character.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-info"></a>20.10.3.35. <code class="literal">mysql_info()</code></h4></div></div></div><a class="indexterm" name="id3682739"></a><p>
        <code class="literal">const char *mysql_info(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Retrieves a string providing information about the most recently
        executed statement, but only for the statements listed here. For
        other statements, <a href="connectors-apis.html#mysql-info" title="20.10.3.35. mysql_info()"><code class="literal">mysql_info()</code></a>
        returns <code class="literal">NULL</code>. The format of the string varies
        depending on the type of statement, as described here. The
        numbers are illustrative only; the string contains values
        appropriate for the statement.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT INTO
            ... SELECT ...</code></a>
          </p><p>
            String format: <code class="literal">Records: 100 Duplicates: 0 Warnings:
            0</code>
          </p></li><li><p>
            <code class="literal">INSERT INTO ... VALUES
            (...),(...),(...)...</code>
          </p><p>
            String format: <code class="literal">Records: 3 Duplicates: 0 Warnings:
            0</code>
          </p></li><li><p>
            <code class="literal">LOAD DATA INFILE ...</code>
          </p><p>
            String format: <code class="literal">Records: 1 Deleted: 0 Skipped: 0
            Warnings: 0</code>
          </p></li><li><p>
            <a href="sql-syntax.html#alter-table" title="12.1.6. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>
          </p><p>
            String format: <code class="literal">Records: 3 Duplicates: 0 Warnings:
            0</code>
          </p></li><li><p>
            <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a>
          </p><p>
            String format: <code class="literal">Rows matched: 40 Changed: 40
            Warnings: 0</code>
          </p></li></ul></div><p>
        Note that <a href="connectors-apis.html#mysql-info" title="20.10.3.35. mysql_info()"><code class="literal">mysql_info()</code></a> returns a
        non-<code class="literal">NULL</code> value for
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT ...
        VALUES</code></a> only for the multiple-row form of the statement
        (that is, only if multiple value lists are specified).
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A character string representing additional information about the
        most recently executed statement. <code class="literal">NULL</code> if no
        information is available for the statement.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-init"></a>20.10.3.36. <code class="literal">mysql_init()</code></h4></div></div></div><a class="indexterm" name="id3682980"></a><p>
        <code class="literal">MYSQL *mysql_init(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Allocates or initializes a <code class="literal">MYSQL</code> object
        suitable for
        <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>. If
        <code class="literal">mysql</code> is a <code class="literal">NULL</code> pointer,
        the function allocates, initializes, and returns a new object.
        Otherwise, the object is initialized and the address of the
        object is returned. If
        <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a> allocates a new
        object, it is freed when
        <a href="connectors-apis.html#mysql-close" title="20.10.3.5. mysql_close()"><code class="literal">mysql_close()</code></a> is called to close
        the connection.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An initialized <code class="literal">MYSQL*</code> handle.
        <code class="literal">NULL</code> if there was insufficient memory to
        allocate a new object.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        In case of insufficient memory, <code class="literal">NULL</code> is
        returned.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-insert-id"></a>20.10.3.37. <code class="literal">mysql_insert_id()</code></h4></div></div></div><a class="indexterm" name="id3683112"></a><p>
        <code class="literal">my_ulonglong mysql_insert_id(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the value generated for an
        <code class="literal">AUTO_INCREMENT</code> column by the previous
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> or
        <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement. Use this
        function after you have performed an
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statement into a table
        that contains an <code class="literal">AUTO_INCREMENT</code> field, or
        have used <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> or
        <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a> to set a column value with
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>.
      </p><p>
        The return value of
        <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> is always zero
        unless explicitly updated under one of the following conditions:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statements that store
            a value into an <code class="literal">AUTO_INCREMENT</code> column.
            This is true whether the value is automatically generated by
            storing the special values <code class="literal">NULL</code> or
            <code class="literal">0</code> into the column, or is an explicit
            non-special value.
          </p></li><li><p>
            In the case of a multiple-row
            <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statement, the return
            value of <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a>
            depends on the MySQL server version.
          </p><p>
            <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> returns
            the <span class="emphasis"><em>first</em></span> automatically generated
            <code class="literal">AUTO_INCREMENT</code> value that was
            <span class="emphasis"><em>successfully</em></span> inserted.
          </p><p>
            If no rows are successfully inserted,
            <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> returns 0.
          </p></li><li><p>
            If an <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT
            ... SELECT</code></a> statement is executed, and no
            automatically generated value is successfully inserted,
            <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> returns
            the ID of the last inserted row.
          </p></li><li><p>
            If an <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT
            ... SELECT</code></a> statement uses
            <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>,
            <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> returns
            <em class="replaceable"><code>expr</code></em>.
          </p></li><li><p>
            <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statements that
            generate an <code class="literal">AUTO_INCREMENT</code> value by
            inserting
            <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>
            into any column or by updating any column to
            <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>.
          </p></li><li><p>
            If the previous statement returned an error, the value of
            <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> is
            undefined.
          </p></li></ul></div><p>
        The return value of
        <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> can be
        simplified to the following sequence:
      </p><div class="orderedlist"><ol type="1"><li><p>
            If there is an <code class="literal">AUTO_INCREMENT</code> column, and
            an automatically generated value was successfully inserted,
            return the first such value.
          </p></li><li><p>
            If
            <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>
            occurred in the statement, return
            <em class="replaceable"><code>expr</code></em>, even if there was an
            <code class="literal">AUTO_INCREMENT</code> column in the affected
            table.
          </p></li><li><p>
            The return value varies depending on the statement used.
            When called after an <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>
            statement:
          </p><div class="itemizedlist"><ul type="disc"><li><p>
                If there is an <code class="literal">AUTO_INCREMENT</code> column
                in the table, and there were some explicit values for
                this column that were successfully inserted into the
                table, return the last of the explicit values.
              </p></li></ul></div><p>
            When called after an
            <a href="sql-syntax.html#insert-on-duplicate" title="12.2.5.3. INSERT ... ON
        DUPLICATE KEY UPDATE Syntax"><code class="literal">INSERT
            ... ON DUPLICATE KEY UPDATE</code></a> statement:
          </p><div class="itemizedlist"><ul type="disc"><li><p>
                If there is an <code class="literal">AUTO_INCREMENT</code> column
                in the table and there were some explicit succesfully
                inserted values, or some updated rows, return the last
                of the inserted or updated values.
              </p></li></ul></div></li></ol></div><p>
        <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> returns
        <code class="literal">0</code> if the previous statement does not use an
        <code class="literal">AUTO_INCREMENT</code> value. If you need to save the
        value for later, be sure to call
        <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> immediately
        after the statement that generates the value.
      </p><p>
        The value of <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a>
        is affected only by statements issued within the current client
        connection. It is not affected by statements issued by other
        clients.
      </p><p>
        The <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> SQL function
        will contain the value of the first automatically generated
        value that was successfully inserted.
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> is not reset
        between statements because the value of that function is
        maintained in the server. Another difference from
        <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> is that
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> is not updated
        if you set an <code class="literal">AUTO_INCREMENT</code> column to a
        specific non-special value. See
        <a href="functions.html#information-functions" title="11.11.3. Information Functions">Section 11.11.3, “Information Functions”</a>.
      </p><p>
        <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> returns
        <code class="literal">0</code> following a
        <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statement for a stored
        procedure that generates an <code class="literal">AUTO_INCREMENT</code>
        value because in this case
        <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> applies to
        <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> and not the statement within
        the procedure. Within the procedure, you can use
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> at the SQL level
        to obtain the <code class="literal">AUTO_INCREMENT</code> value.
      </p><p>
        The reason for the differences between
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> and
        <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> is that
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> is made easy to
        use in scripts while
        <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> tries to
        provide more exact information about what happens to the
        <code class="literal">AUTO_INCREMENT</code> column.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Described in the preceding discussion.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-kill"></a>20.10.3.38. <code class="literal">mysql_kill()</code></h4></div></div></div><a class="indexterm" name="id3683810"></a><p>
        <code class="literal">int mysql_kill(MYSQL *mysql, unsigned long
        pid)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Asks the server to kill the thread specified by
        <code class="literal">pid</code>.
      </p><p>
        This function is deprecated. It is preferable to use
        <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> to issue an SQL
        <a href="sql-syntax.html#kill" title="12.5.7.4. KILL Syntax"><code class="literal">KILL</code></a> statement instead.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero for success. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-library-end"></a>20.10.3.39. <code class="literal">mysql_library_end()</code></h4></div></div></div><a class="indexterm" name="id3683976"></a><p>
        <code class="literal">void mysql_library_end(void)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function finalizes the MySQL library. You should call it
        when you are done using the library (for example, after
        disconnecting from the server). The action taken by the call
        depends on whether your application is linked to the MySQL
        client library or the MySQL embedded server library. For a
        client program linked against the
        <code class="literal">libmysqlclient</code> library by using the
        <code class="option">-lmysqlclient</code> flag,
        <a href="connectors-apis.html#mysql-library-end" title="20.10.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a> performs
        some memory management to clean up. For an embedded server
        application linked against the <code class="literal">libmysqld</code>
        library by using the <code class="option">-lmysqld</code> flag,
        <a href="connectors-apis.html#mysql-library-end" title="20.10.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a> shuts down
        the embedded server and then cleans up.
      </p><p>
        For usage information, see
        <a href="connectors-apis.html#c-api-function-overview" title="20.10.2. C API Function Overview">Section 20.10.2, “C API Function Overview”</a>, and
        <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()">Section 20.10.3.40, “<code class="literal">mysql_library_init()</code>”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-library-init"></a>20.10.3.40. <code class="literal">mysql_library_init()</code></h4></div></div></div><a class="indexterm" name="id3684076"></a><p>
        <code class="literal">int mysql_library_init(int argc, char **argv, char
        **groups)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function should be called to initialize the MySQL library
        before you call any other MySQL function, whether your
        application is a regular client program or uses the embedded
        server. If the application uses the embedded server, this call
        starts the server and initializes any subsystems
        (<code class="literal">mysys</code>, <code class="literal">InnoDB</code>, and so
        forth) that the server uses.
      </p><p>
        After your application is done using the MySQL library, call
        <a href="connectors-apis.html#mysql-library-end" title="20.10.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a> to clean up.
        See <a href="connectors-apis.html#mysql-library-end" title="20.10.3.39. mysql_library_end()">Section 20.10.3.39, “<code class="literal">mysql_library_end()</code>”</a>.
      </p><p>
        The choice of whether the application operates as a regular
        client or uses the embedded server depends on whether you use
        the <code class="literal">libmysqlclient</code> or
        <code class="literal">libmysqld</code> library at link time to produce the
        final executable. For additional information, see
        <a href="connectors-apis.html#c-api-function-overview" title="20.10.2. C API Function Overview">Section 20.10.2, “C API Function Overview”</a>.
      </p><p>
        In a non-multi-threaded environment, the call to
        <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> may be
        omitted, because <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>
        will invoke it automatically as necessary. However,
        <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> is not
        thread-safe in a multi-threaded environment, and thus neither is
        <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>, which calls
        <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a>. You must
        either call <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a>
        prior to spawning any threads, or else use a mutex to protect
        the call, whether you invoke
        <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> or
        indirectly via <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>.
        This should be done prior to any other client library call.
      </p><p>
        The <code class="literal">argc</code> and <code class="literal">argv</code>
        arguments are analogous to the arguments to
        <code class="literal">main()</code>, and enable passing of options to the
        embedded server. For convenience, <code class="literal">argc</code> may be
        <code class="literal">0</code> (zero) if there are no command-line
        arguments for the server. This is the usual case for
        applications intended for use only as regular (non-embedded)
        clients, and the call typically is written as
        <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init(0, NULL,
        NULL)</code></a>.
      </p><pre class="programlisting">#include &lt;mysql.h&gt;
#include &lt;stdlib.h&gt;

int main(void) {
  if (mysql_library_init(0, NULL, NULL)) {
    fprintf(stderr, "could not initialize MySQL library\n");
    exit(1);
  }

  /* Use any MySQL API functions here */

  mysql_library_end();

  return EXIT_SUCCESS;
}
</pre><p>
        When arguments are to be passed (<code class="literal">argc</code> is
        greater than <code class="literal">0</code>), the first element of
        <code class="literal">argv</code> is ignored (it typically contains the
        program name).
        <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> makes a
        copy of the arguments so it is safe to destroy
        <code class="literal">argv</code> or <code class="literal">groups</code> after the
        call.
      </p><p>
        For embedded applications, if you want to connect to an external
        server without starting the embedded server, you have to specify
        a negative value for <code class="literal">argc</code>.
      </p><p>
        The <code class="literal">groups</code> argument should be an array of
        strings that indicate the groups in option files from which
        options should be read. See <a href="programs.html#option-files" title="4.2.3.2. Using Option Files">Section 4.2.3.2, “Using Option Files”</a>. The
        final entry in the array should be <code class="literal">NULL</code>. For
        convenience, if the <code class="literal">groups</code> argument itself is
        <code class="literal">NULL</code>, the <code class="literal">[server]</code> and
        <code class="literal">[embedded]</code> groups are used by default.
      </p><pre class="programlisting">#include &lt;mysql.h&gt;
#include &lt;stdlib.h&gt;

static char *server_args[] = {
  "this_program",       /* this string is not used */
  "--datadir=.",
  "--key_buffer_size=32M"
};
static char *server_groups[] = {
  "embedded",
  "server",
  "this_program_SERVER",
  (char *)NULL
};

int main(void) {
  if (mysql_library_init(sizeof(server_args) / sizeof(char *),
                        server_args, server_groups)) {
    fprintf(stderr, "could not initialize MySQL library\n");
    exit(1);
  }

  /* Use any MySQL API functions here */

  mysql_library_end();

  return EXIT_SUCCESS;
}
</pre><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if successful. Non-zero if an error occurred.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-list-dbs"></a>20.10.3.41. <code class="literal">mysql_list_dbs()</code></h4></div></div></div><a class="indexterm" name="id3684455"></a><p>
        <code class="literal">MYSQL_RES *mysql_list_dbs(MYSQL *mysql, const char
        *wild)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns a result set consisting of database names on the server
        that match the simple regular expression specified by the
        <code class="literal">wild</code> parameter. <code class="literal">wild</code> may
        contain the wildcard characters
        “<span class="quote"><code class="literal">%</code></span>” or
        “<span class="quote"><code class="literal">_</code></span>”, or may be a
        <code class="literal">NULL</code> pointer to match all databases. Calling
        <a href="connectors-apis.html#mysql-list-dbs" title="20.10.3.41. mysql_list_dbs()"><code class="literal">mysql_list_dbs()</code></a> is similar to
        executing the query <code class="literal">SHOW DATABASES [LIKE
        <em class="replaceable"><code>wild</code></em>]</code>.
      </p><p>
        You must free the result set with
        <a href="connectors-apis.html#mysql-free-result" title="20.10.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A <code class="literal">MYSQL_RES</code> result set for success.
        <code class="literal">NULL</code> if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-list-fields"></a>20.10.3.42. <code class="literal">mysql_list_fields()</code></h4></div></div></div><a class="indexterm" name="id3684683"></a><p>
        <code class="literal">MYSQL_RES *mysql_list_fields(MYSQL *mysql, const char
        *table, const char *wild)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns a result set consisting of field names in the given
        table that match the simple regular expression specified by the
        <code class="literal">wild</code> parameter. <code class="literal">wild</code> may
        contain the wildcard characters
        “<span class="quote"><code class="literal">%</code></span>” or
        “<span class="quote"><code class="literal">_</code></span>”, or may be a
        <code class="literal">NULL</code> pointer to match all fields. Calling
        <a href="connectors-apis.html#mysql-list-fields" title="20.10.3.42. mysql_list_fields()"><code class="literal">mysql_list_fields()</code></a> is similar
        to executing the query <code class="literal">SHOW COLUMNS FROM
        <em class="replaceable"><code>tbl_name</code></em> [LIKE
        <em class="replaceable"><code>wild</code></em>]</code>.
      </p><p>
        It is recommended that you use <code class="literal">SHOW COLUMNS FROM
        <em class="replaceable"><code>tbl_name</code></em></code> instead of
        <a href="connectors-apis.html#mysql-list-fields" title="20.10.3.42. mysql_list_fields()"><code class="literal">mysql_list_fields()</code></a>.
      </p><p>
        You must free the result set with
        <a href="connectors-apis.html#mysql-free-result" title="20.10.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A <code class="literal">MYSQL_RES</code> result set for success.
        <code class="literal">NULL</code> if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-list-processes"></a>20.10.3.43. <code class="literal">mysql_list_processes()</code></h4></div></div></div><a class="indexterm" name="id3684919"></a><p>
        <code class="literal">MYSQL_RES *mysql_list_processes(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns a result set describing the current server threads. This
        is the same kind of information as that reported by
        <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin processlist</strong></span></a> or a
        <a href="sql-syntax.html#show-processlist" title="12.5.6.30. SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a> query.
      </p><p>
        You must free the result set with
        <a href="connectors-apis.html#mysql-free-result" title="20.10.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A <code class="literal">MYSQL_RES</code> result set for success.
        <code class="literal">NULL</code> if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-list-tables"></a>20.10.3.44. <code class="literal">mysql_list_tables()</code></h4></div></div></div><a class="indexterm" name="id3685093"></a><p>
        <code class="literal">MYSQL_RES *mysql_list_tables(MYSQL *mysql, const char
        *wild)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns a result set consisting of table names in the current
        database that match the simple regular expression specified by
        the <code class="literal">wild</code> parameter. <code class="literal">wild</code>
        may contain the wildcard characters
        “<span class="quote"><code class="literal">%</code></span>” or
        “<span class="quote"><code class="literal">_</code></span>”, or may be a
        <code class="literal">NULL</code> pointer to match all tables. Calling
        <a href="connectors-apis.html#mysql-list-tables" title="20.10.3.44. mysql_list_tables()"><code class="literal">mysql_list_tables()</code></a> is similar
        to executing the query <code class="literal">SHOW TABLES [LIKE
        <em class="replaceable"><code>wild</code></em>]</code>.
      </p><p>
        You must free the result set with
        <a href="connectors-apis.html#mysql-free-result" title="20.10.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A <code class="literal">MYSQL_RES</code> result set for success.
        <code class="literal">NULL</code> if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-more-results"></a>20.10.3.45. <code class="literal">mysql_more_results()</code></h4></div></div></div><a class="indexterm" name="id3685304"></a><p>
        <code class="literal">my_bool mysql_more_results(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is used when you execute multiple statements
        specified as a single statement string, or when you execute
        <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statements, which can return
        multiple result sets.
      </p><p>
        <a href="connectors-apis.html#mysql-more-results" title="20.10.3.45. mysql_more_results()"><code class="literal">mysql_more_results()</code></a> true if
        more results exist from the currently executed statement, in
        which case the application must call
        <a href="connectors-apis.html#mysql-next-result" title="20.10.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> to fetch the
        results.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        <code class="literal">TRUE</code> (1) if more results exist.
        <code class="literal">FALSE</code> (0) if no more results exist.
      </p><p>
        In most cases, you can call
        <a href="connectors-apis.html#mysql-next-result" title="20.10.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> instead to
        test whether more results exist and initiate retrieval if so.
      </p><p>
        See <a href="connectors-apis.html#c-api-multiple-queries" title="20.10.12. C API Support for Multiple Statement Execution">Section 20.10.12, “C API Support for Multiple Statement Execution”</a>, and
        <a href="connectors-apis.html#mysql-next-result" title="20.10.3.46. mysql_next_result()">Section 20.10.3.46, “<code class="literal">mysql_next_result()</code>”</a>.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-next-result"></a>20.10.3.46. <code class="literal">mysql_next_result()</code></h4></div></div></div><a class="indexterm" name="id3685441"></a><p>
        <code class="literal">int mysql_next_result(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is used when you execute multiple statements
        specified as a single statement string, or when you use
        <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statements to execute stored
        procedures, which can return multiple result sets.
      </p><p>
        <a href="connectors-apis.html#mysql-next-result" title="20.10.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> reads the
        next statement result and returns a status to indicate whether
        more results exist. If
        <a href="connectors-apis.html#mysql-next-result" title="20.10.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> returns an
        error, there are no more results.
      </p><p>
        Before each call to
        <a href="connectors-apis.html#mysql-next-result" title="20.10.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a>, you must
        call <a href="connectors-apis.html#mysql-free-result" title="20.10.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a> for the
        current statement if it is a statement that returned a result
        set (rather than just a result status).
      </p><p>
        After calling
        <a href="connectors-apis.html#mysql-next-result" title="20.10.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> the state of
        the connection is as if you had called
        <a href="connectors-apis.html#mysql-real-query" title="20.10.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> or
        <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> for the next
        statement. This means that you can call
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>,
        <a href="connectors-apis.html#mysql-warning-count" title="20.10.3.72. mysql_warning_count()"><code class="literal">mysql_warning_count()</code></a>,
        <a href="connectors-apis.html#mysql-affected-rows" title="20.10.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a>, and so
        forth.
      </p><p>
        If your program uses <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a>
        statements to execute stored procedures, the
        <code class="literal">CLIENT_MULTI_RESULTS</code> flag must be enabled.
        This is because each <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> returns
        a result to indicate the call status, in addition to any result
        sets that might be returned by statements executed within the
        procedure. Because <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> can
        return multiple results, you should process them using a loop
        that calls <a href="connectors-apis.html#mysql-next-result" title="20.10.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a>
        to determine whether there are more results.
      </p><p>
        <code class="literal">CLIENT_MULTI_RESULTS</code> can be enabled when you
        call <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>,
        either explicitly by passing the
        <code class="literal">CLIENT_MULTI_RESULTS</code> flag itself, or
        implicitly by passing <code class="literal">CLIENT_MULTI_STATEMENTS</code>
        (which also enables <code class="literal">CLIENT_MULTI_RESULTS</code>). As
        of MySQL 6.0.8, <code class="literal">CLIENT_MULTI_RESULTS</code> is
        enabled by default.
      </p><p>
        It is also possible to test whether there are more results by
        calling <a href="connectors-apis.html#mysql-more-results" title="20.10.3.45. mysql_more_results()"><code class="literal">mysql_more_results()</code></a>.
        However, this function does not change the connection state, so
        if it returns true, you must still call
        <a href="connectors-apis.html#mysql-next-result" title="20.10.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> to advance
        to the next result.
      </p><p>
        For an example that shows how to use
        <a href="connectors-apis.html#mysql-next-result" title="20.10.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a>, see
        <a href="connectors-apis.html#c-api-multiple-queries" title="20.10.12. C API Support for Multiple Statement Execution">Section 20.10.12, “C API Support for Multiple Statement Execution”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Return Value</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td>0</td><td>Successful and there are more results</td></tr><tr><td>-1</td><td>Successful and there are no more results</td></tr><tr><td>&gt;0</td><td>An error occurred</td></tr></tbody></table></div><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order. For example if
            you didn't call
            <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> for a
            previous result set.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-num-fields"></a>20.10.3.47. <code class="literal">mysql_num_fields()</code></h4></div></div></div><a class="indexterm" name="id3685880"></a><a class="indexterm" name="id3685889"></a><p>
        <code class="literal">unsigned int mysql_num_fields(MYSQL_RES
        *result)</code>
      </p><p>
        To pass a <code class="literal">MYSQL*</code> argument instead, use
        <code class="literal">unsigned int mysql_field_count(MYSQL *mysql)</code>.
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the number of columns in a result set.
      </p><p>
        Note that you can get the number of columns either from a
        pointer to a result set or to a connection handle. You would use
        the connection handle if
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> or
        <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> returned
        <code class="literal">NULL</code> (and thus you have no result set
        pointer). In this case, you can call
        <a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> to determine
        whether <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>
        should have produced a non-empty result. This allows the client
        program to take proper action without knowing whether the query
        was a <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> (or
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>-like) statement. The
        example shown here illustrates how this may be done.
      </p><p>
        See <a href="connectors-apis.html#null-mysql-store-result" title="20.10.10.1. Why mysql_store_result() Sometimes
        Returns NULL After
        mysql_query() Returns Success">Section 20.10.10.1, “Why <code class="literal">mysql_store_result()</code> Sometimes
        Returns <code class="literal">NULL</code> After
        <code class="literal">mysql_query()</code> Returns Success”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An unsigned integer representing the number of columns in a
        result set.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">MYSQL_RES *result;
unsigned int num_fields;
unsigned int num_rows;

if (mysql_query(&amp;mysql,query_string))
{
    // error
}
else // query succeeded, process any data returned by it
{
    result = mysql_store_result(&amp;mysql);
    if (result)  // there are rows
    {
        num_fields = mysql_num_fields(result);
        // retrieve rows, then call mysql_free_result(result)
    }
    else  // mysql_store_result() returned nothing; should it have?
    {
        if (mysql_errno(&amp;mysql))
        {
           fprintf(stderr, "Error: %s\n", mysql_error(&amp;mysql));
        }
        else if (mysql_field_count(&amp;mysql) == 0)
        {
            // query does not return data
            // (it was not a SELECT)
            num_rows = mysql_affected_rows(&amp;mysql);
        }
    }
}
</pre><p>
        An alternative (if you know that your query should have returned
        a result set) is to replace the
        <a href="connectors-apis.html#mysql-errno" title="20.10.3.14. mysql_errno()"><code class="literal">mysql_errno(&amp;mysql)</code></a> call
        with a check whether
        <a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()"><code class="literal">mysql_field_count(&amp;mysql)</code></a>
        returns 0. This happens only if something went wrong.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-num-rows"></a>20.10.3.48. <code class="literal">mysql_num_rows()</code></h4></div></div></div><a class="indexterm" name="id3686104"></a><p>
        <code class="literal">my_ulonglong mysql_num_rows(MYSQL_RES
        *result)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the number of rows in the result set.
      </p><p>
        The use of <a href="connectors-apis.html#mysql-num-rows" title="20.10.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a>
        depends on whether you use
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> or
        <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> to return the
        result set. If you use
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>,
        <a href="connectors-apis.html#mysql-num-rows" title="20.10.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a> may be called
        immediately. If you use
        <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>,
        <a href="connectors-apis.html#mysql-num-rows" title="20.10.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a> does not return
        the correct value until all the rows in the result set have been
        retrieved.
      </p><p>
        <a href="connectors-apis.html#mysql-num-rows" title="20.10.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a> is intended for
        use with statements that return a result set, such as
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>. For statements such as
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>,
        <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a>, or
        <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>, the number of affected
        rows can be obtained with
        <a href="connectors-apis.html#mysql-affected-rows" title="20.10.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The number of rows in the result set.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-options"></a>20.10.3.49. <code class="literal">mysql_options()</code></h4></div></div></div><a class="indexterm" name="id3686281"></a><p>
        <code class="literal">int mysql_options(MYSQL *mysql, enum mysql_option
        option, const void *arg)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Can be used to set extra connect options and affect behavior for
        a connection. This function may be called multiple times to set
        several options.
      </p><p>
        <a href="connectors-apis.html#mysql-options" title="20.10.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> should be called
        after <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a> and before
        <a href="connectors-apis.html#mysql-connect" title="20.10.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a> or
        <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.
      </p><p>
        The <code class="literal">option</code> argument is the option that you
        want to set; the <code class="literal">arg</code> argument is the value
        for the option. If the option is an integer,
        <code class="literal">arg</code> should point to the value of the integer.
      </p><p>
        The following list describes the possible options, their effect,
        and how <code class="literal">arg</code> is used for each option. Several
        of the options apply only when the application is linked against
        the <code class="literal">libmysqld</code> embedded server library and are
        unused for applications linked against the
        <code class="literal">libmysql</code> client library. For option
        descriptions that indicate <code class="literal">arg</code> is unused, its
        value is irrelevant; it is conventional to pass 0.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">MYSQL_INIT_COMMAND</code> (argument type:
            <code class="literal">char *</code>)
          </p><p>
            SQL statement to execute when connecting to the MySQL
            server. Automatically re-executed if reconnection occurs.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_COMPRESS</code> (argument: not used)
          </p><p>
            Use the compressed client/server protocol.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_CONNECT_TIMEOUT</code> (argument type:
            <code class="literal">unsigned int *</code>)
          </p><p>
            Connect timeout in seconds.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_GUESS_CONNECTION</code> (argument: not
            used)
          </p><p>
            For an application linked against the
            <code class="literal">libmysqld</code> embedded server library, this
            allows the library to guess whether to use the embedded
            server or a remote server. “<span class="quote">Guess</span>” means that
            if the host name is set and is not
            <code class="literal">localhost</code>, it uses a remote server. This
            behavior is the default.
            <code class="literal">MYSQL_OPT_USE_EMBEDDED_CONNECTION</code> and
            <code class="literal">MYSQL_OPT_USE_REMOTE_CONNECTION</code> can be
            used to override it. This option is ignored for applications
            linked against the <code class="literal">libmysqlclient</code> client
            library.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_LOCAL_INFILE</code> (argument type:
            optional pointer to <code class="literal">unsigned int</code>)
          </p><p>
            If no pointer is given or if pointer points to an
            <code class="literal">unsigned int</code> that has a non-zero value,
            the <code class="literal">LOAD LOCAL INFILE</code> statement is
            enabled.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_NAMED_PIPE</code> (argument: not used)
          </p><p>
            Use named pipes to connect to a MySQL server on Windows, if
            the server allows named-pipe connections.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_PROTOCOL</code> (argument type:
            <code class="literal">unsigned int *</code>)
          </p><p>
            Type of protocol to use. Should be one of the enum values of
            <code class="literal">mysql_protocol_type</code> defined in
            <code class="filename">mysql.h</code>.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_READ_TIMEOUT</code> (argument type:
            <code class="literal">unsigned int *</code>)
          </p><p>
            The timeout in seconds for attempts to read from the server.
            Each attempt uses this timeout value and there are retries
            if necessary, so the total effective timeout value is three
            times the option value. You can set the value so that a lost
            connection can be detected earlier than the TCP/IP
            <code class="literal">Close_Wait_Timeout</code> value of 10 minutes.
            This option works only for TCP/IP connections.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_RECONNECT</code> (argument type:
            <code class="literal">my_bool *</code>)
          </p><p>
            Enable or disable automatic reconnection to the server if
            the connection is found to have been lost. Reconnect is off
            by default; this option provides a way to set reconnection
            behavior explicitly.
          </p></li><li><p>
            <code class="literal">MYSQL_SET_CLIENT_IP</code> (argument type:
            <code class="literal">char *</code>)
          </p><p>
            For an application linked against the
            <code class="literal">libmysqld</code> embedded server library (when
            <code class="literal">libmysqld</code> is compiled with authentication
            support), this means that the user is considered to have
            connected from the specified IP address (specified as a
            string) for authentication purposes. This option is ignored
            for applications linked against the
            <code class="literal">libmysqlclient</code> client library.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_SSL_VERIFY_SERVER_CERT</code>
            (argument type: <code class="literal">my_bool *</code>)
          </p><p>
            Enable or disable verification of the server's Common Name
            value in its certificate against the host name used when
            connecting to the server. The connection is rejected if
            there is a mismatch. This feature can be used to prevent
            man-in-the-middle attacks. Verification is disabled by
            default.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_USE_EMBEDDED_CONNECTION</code>
            (argument: not used)
          </p><p>
            For an application linked against the
            <code class="literal">libmysqld</code> embedded server library, this
            forces the use of the embedded server for the connection.
            This option is ignored for applications linked against the
            <code class="literal">libmysqlclient</code> client library.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_USE_REMOTE_CONNECTION</code>
            (argument: not used)
          </p><p>
            For an application linked against the
            <code class="literal">libmysqld</code> embedded server library, this
            forces the use of a remote server for the connection. This
            option is ignored for applications linked against the
            <code class="literal">libmysqlclient</code> client library.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_USE_RESULT</code> (argument: not used)
          </p><p>
            This option is unused.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_WRITE_TIMEOUT</code> (argument type:
            <code class="literal">unsigned int *</code>)
          </p><p>
            The timeout in seconds for attempts to write to the server.
            Each attempt uses this timeout value and there are
            <a href="server-administration.html#sysvar_net_retry_count"><code class="literal">net_retry_count</code></a> retries if
            necessary, so the total effective timeout value is
            <a href="server-administration.html#sysvar_net_retry_count"><code class="literal">net_retry_count</code></a> times the
            option value. This option works only for TCP/IP connections.
          </p></li><li><p>
            <code class="literal">MYSQL_READ_DEFAULT_FILE</code> (argument type:
            <code class="literal">char *</code>)
          </p><p>
            Read options from the named option file instead of from
            <code class="filename">my.cnf</code>.
          </p></li><li><p>
            <code class="literal">MYSQL_READ_DEFAULT_GROUP</code> (argument type:
            <code class="literal">char *</code>)
          </p><p>
            Read options from the named group from
            <code class="filename">my.cnf</code> or the file specified with
            <code class="literal">MYSQL_READ_DEFAULT_FILE</code>.
          </p></li><li><p>
            <code class="literal">MYSQL_REPORT_DATA_TRUNCATION</code> (argument
            type: <code class="literal">my_bool *</code>)
          </p><p>
            Enable or disable reporting of data truncation errors for
            prepared statements via the <code class="literal">error</code> member
            of <code class="literal">MYSQL_BIND</code> structures. (Default:
            enabled.)
          </p></li><li><p>
            <code class="literal">MYSQL_SECURE_AUTH</code> (argument type:
            <code class="literal">my_bool *</code>)
          </p><p>
            Whether to connect to a server that does not support the
            password hashing used in MySQL 4.1.1 and later.
          </p></li><li><p>
            <code class="literal">MYSQL_SET_CHARSET_DIR</code> (argument type:
            <code class="literal">char *</code>)
          </p><p>
            The path name to the directory that contains character set
            definition files.
          </p></li><li><p>
            <code class="literal">MYSQL_SET_CHARSET_NAME</code> (argument type:
            <code class="literal">char *</code>)
          </p><p>
            The name of the character set to use as the default
            character set.
          </p></li><li><p>
            <code class="literal">MYSQL_SHARED_MEMORY_BASE_NAME</code> (argument
            type: <code class="literal">char *</code>)
          </p><p>
            The name of the shared-memory object for communication to
            the server on Windows, if the server supports shared-memory
            connections. Should have the same value as the
            <a href="server-administration.html#option_mysqld_shared-memory-base-name"><code class="option">--shared-memory-base-name</code></a>
            option used for the <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server you
            want to connect to.
          </p></li></ul></div><p>
        The <code class="literal">client</code> group is always read if you use
        <code class="literal">MYSQL_READ_DEFAULT_FILE</code> or
        <code class="literal">MYSQL_READ_DEFAULT_GROUP</code>.
      </p><p>
        The specified group in the option file may contain the following
        options.
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Option</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">character-sets-dir=<em class="replaceable"><code>path</code></em></code></td><td>The directory where character sets are installed.</td></tr><tr><td><code class="literal">compress</code></td><td>Use the compressed client/server protocol.</td></tr><tr><td><code class="literal">connect-timeout=<em class="replaceable"><code>seconds</code></em></code></td><td>Connect timeout in seconds. On Linux this timeout is also used for
                waiting for the first answer from the server.</td></tr><tr><td><code class="literal">database=<em class="replaceable"><code>db_name</code></em></code></td><td>Connect to this database if no database was specified in the connect
                command.</td></tr><tr><td><code class="literal">debug</code></td><td>Debug options.</td></tr><tr><td><code class="literal">default-character-set=<em class="replaceable"><code>charset_name</code></em></code></td><td>The default character set to use.</td></tr><tr><td><code class="literal">disable-local-infile</code></td><td>Disable use of <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
                LOCAL</code></a>.</td></tr><tr><td><code class="literal">host=<em class="replaceable"><code>host_name</code></em></code></td><td>Default host name.</td></tr><tr><td><code class="literal">init-command=<em class="replaceable"><code>stmt</code></em></code></td><td>Statement to execute when connecting to MySQL server. Automatically
                re-executed if reconnection occurs.</td></tr><tr><td><code class="literal">interactive-timeout=<em class="replaceable"><code>seconds</code></em></code></td><td>Same as specifying <code class="literal">CLIENT_INTERACTIVE</code> to
                <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.
                See <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()">Section 20.10.3.52, “<code class="literal">mysql_real_connect()</code>”</a>.</td></tr><tr><td><code class="literal">local-infile[={0|1}]</code></td><td>If no argument or non-zero argument, enable use of
                <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
                LOCAL</code></a>; otherwise disable.</td></tr><tr><td><code class="literal">max_allowed_packet=<em class="replaceable"><code>bytes</code></em></code></td><td>Maximum size of packet that client can read from server.</td></tr><tr><td><code class="literal">multi-queries</code>, <code class="literal">multi-results</code></td><td>Allow multiple result sets from multiple-statement executions or stored
                procedures.</td></tr><tr><td><code class="literal">multi-statements</code></td><td>Allow the client to send multiple statements in a single string
                (separated by “<span class="quote"><code class="literal">;</code></span>”).</td></tr><tr><td><code class="literal">password=<em class="replaceable"><code>password</code></em></code></td><td>Default password.</td></tr><tr><td><code class="literal">pipe</code></td><td>Use named pipes to connect to a MySQL server on Windows.</td></tr><tr><td><code class="literal">port=<em class="replaceable"><code>port_num</code></em></code></td><td>Default port number.</td></tr><tr><td><code class="literal">protocol={TCP|SOCKET|PIPE|MEMORY}</code></td><td>The protocol to use when connecting to the server.</td></tr><tr><td><code class="literal">return-found-rows</code></td><td>Tell <a href="connectors-apis.html#mysql-info" title="20.10.3.35. mysql_info()"><code class="literal">mysql_info()</code></a> to return found rows
                instead of updated rows when using
                <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a>.</td></tr><tr><td><code class="literal">shared-memory-base-name=<em class="replaceable"><code>name</code></em></code></td><td>Shared-memory name to use to connect to server.</td></tr><tr><td><code class="literal">socket=<em class="replaceable"><code>path</code></em></code></td><td>Default socket file.</td></tr><tr><td><code class="literal">ssl-ca=<em class="replaceable"><code>file_name</code></em></code></td><td>Certificate Authority file.</td></tr><tr><td><code class="literal">ssl-capath=<em class="replaceable"><code>path</code></em></code></td><td>Certificate Authority directory.</td></tr><tr><td><code class="literal">ssl-cert=<em class="replaceable"><code>file_name</code></em></code></td><td>Certificate file.</td></tr><tr><td><code class="literal">ssl-cipher=<em class="replaceable"><code>cipher_list</code></em></code></td><td>Allowable SSL ciphers.</td></tr><tr><td><code class="literal">ssl-key=<em class="replaceable"><code>file_name</code></em></code></td><td>Key file.</td></tr><tr><td><code class="literal">timeout=<em class="replaceable"><code>seconds</code></em></code></td><td>Like <code class="literal">connect-timeout</code>.</td></tr><tr><td><code class="literal">user</code></td><td>Default user.</td></tr></tbody></table></div><p>
        <code class="literal">timeout</code> has been replaced by
        <code class="literal">connect-timeout</code>, but
        <code class="literal">timeout</code> is still supported in MySQL
        6.0 for backward compatibility.
      </p><p>
        For more information about option files, see
        <a href="programs.html#option-files" title="4.2.3.2. Using Option Files">Section 4.2.3.2, “Using Option Files”</a>.
      </p><p>
        Before MySQL 5.1.18, the <code class="literal">arg</code> argument was
        declared as <code class="literal">char *</code>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero for success. Non-zero if you specify an unknown option.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        The following <a href="connectors-apis.html#mysql-options" title="20.10.3.49. mysql_options()"><code class="literal">mysql_options()</code></a>
        calls request the use of compression in the client/server
        protocol, cause options to be read from the
        <code class="literal">[odbc]</code> group of option files, and disable
        transaction autocommit mode:
      </p><pre class="programlisting">MYSQL mysql;

mysql_init(&amp;mysql);
mysql_options(&amp;mysql,MYSQL_OPT_COMPRESS,0);
mysql_options(&amp;mysql,MYSQL_READ_DEFAULT_GROUP,"odbc");
mysql_options(&amp;mysql,MYSQL_INIT_COMMAND,"SET autocommit=0");
if (!mysql_real_connect(&amp;mysql,"host","user","passwd","database",0,NULL,0))
{
    fprintf(stderr, "Failed to connect to database: Error: %s\n",
          mysql_error(&amp;mysql));
}
</pre><p>
        This code requests that the client use the compressed
        client/server protocol and read the additional options from the
        <code class="literal">odbc</code> section in the
        <code class="filename">my.cnf</code> file.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-ping"></a>20.10.3.50. <code class="literal">mysql_ping()</code></h4></div></div></div><a class="indexterm" name="id3687817"></a><p>
        <code class="literal">int mysql_ping(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Checks whether the connection to the server is working. If the
        connection has gone down and auto-reconnect is enabled an
        attempt to reconnect is made. If the connection is down and
        auto-reconnect is disabled,
        <a href="connectors-apis.html#mysql-ping" title="20.10.3.50. mysql_ping()"><code class="literal">mysql_ping()</code></a> returns an error.
      </p><p>
        Auto-reconnect is disabled by default. To enable it, call
        <a href="connectors-apis.html#mysql-options" title="20.10.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> with the
        <code class="literal">MYSQL_OPT_RECONNECT</code> option. For details, see
        <a href="connectors-apis.html#mysql-options" title="20.10.3.49. mysql_options()">Section 20.10.3.49, “<code class="literal">mysql_options()</code>”</a>.
      </p><p>
        <a href="connectors-apis.html#mysql-ping" title="20.10.3.50. mysql_ping()"><code class="literal">mysql_ping()</code></a> can be used by
        clients that remain idle for a long while, to check whether the
        server has closed the connection and reconnect if necessary.
      </p><p>
        If <a href="connectors-apis.html#mysql-ping" title="20.10.3.50. mysql_ping()"><code class="literal">mysql_ping()</code></a>) does cause a
        reconnect, there is no explicit indication of it. To determine
        whether a reconnect occurs, call
        <a href="connectors-apis.html#mysql-thread-id" title="20.10.3.70. mysql_thread_id()"><code class="literal">mysql_thread_id()</code></a> to get the
        original connection identifier before calling
        <a href="connectors-apis.html#mysql-ping" title="20.10.3.50. mysql_ping()"><code class="literal">mysql_ping()</code></a>, and then call
        <a href="connectors-apis.html#mysql-thread-id" title="20.10.3.70. mysql_thread_id()"><code class="literal">mysql_thread_id()</code></a> again to see
        whether the identifier has changed.
      </p><p>
        If reconnect occurs, some characteristics of the connection will
        have been reset. For details about these characteristics, see
        <a href="connectors-apis.html#auto-reconnect" title="20.10.11. Controlling Automatic Reconnection Behavior">Section 20.10.11, “Controlling Automatic Reconnection Behavior”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the connection to the server is alive. Non-zero if an
        error occurred. A non-zero return does not indicate whether the
        MySQL server itself is down; the connection might be broken for
        other reasons such as network problems.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-query"></a>20.10.3.51. <code class="literal">mysql_query()</code></h4></div></div></div><a class="indexterm" name="id3688033"></a><p>
        <code class="literal">int mysql_query(MYSQL *mysql, const char
        *stmt_str)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Executes the SQL statement pointed to by the null-terminated
        string <code class="literal">stmt_str</code>. Normally, the string must
        consist of a single SQL statement and you should not add a
        terminating semicolon (“<span class="quote"><code class="literal">;</code></span>”) or
        <code class="literal">\g</code> to the statement. If multiple-statement
        execution has been enabled, the string can contain several
        statements separated by semicolons. See
        <a href="connectors-apis.html#c-api-multiple-queries" title="20.10.12. C API Support for Multiple Statement Execution">Section 20.10.12, “C API Support for Multiple Statement Execution”</a>.
      </p><p>
        <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> cannot be used for
        statements that contain binary data; you must use
        <a href="connectors-apis.html#mysql-real-query" title="20.10.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> instead.
        (Binary data may contain the
        “<span class="quote"><code class="literal">\0</code></span>” character, which
        <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> interprets as the
        end of the statement string.)
      </p><p>
        If you want to know whether the statement should return a result
        set, you can use
        <a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> to check for
        this. See <a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()">Section 20.10.3.22, “<code class="literal">mysql_field_count()</code>”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the statement was successful. Non-zero if an error
        occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-real-connect"></a>20.10.3.52. <code class="literal">mysql_real_connect()</code></h4></div></div></div><a class="indexterm" name="id3688250"></a><p>
        <code class="literal">MYSQL *mysql_real_connect(MYSQL *mysql, const char
        *host, const char *user, const char *passwd, const char *db,
        unsigned int port, const char *unix_socket, unsigned long
        client_flag)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> attempts to
        establish a connection to a MySQL database engine running on
        <code class="literal">host</code>.
        <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> must
        complete successfully before you can execute any other API
        functions that require a valid <code class="literal">MYSQL</code>
        connection handle structure.
      </p><p>
        The parameters are specified as follows:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            The first parameter should be the address of an existing
            <code class="literal">MYSQL</code> structure. Before calling
            <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> you
            must call <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a> to
            initialize the <code class="literal">MYSQL</code> structure. You can
            change a lot of connect options with the
            <a href="connectors-apis.html#mysql-options" title="20.10.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> call. See
            <a href="connectors-apis.html#mysql-options" title="20.10.3.49. mysql_options()">Section 20.10.3.49, “<code class="literal">mysql_options()</code>”</a>.
          </p></li><li><p>
            The value of <code class="literal">host</code> may be either a host
            name or an IP address. If <code class="literal">host</code> is
            <code class="literal">NULL</code> or the string
            <code class="literal">"localhost"</code>, a connection to the local
            host is assumed: For Windows, the client connects using a
            shared-memory connection, if the server has shared-memory
            connections enabled. Otherwise, TCP/IP is used. For Unix,
            the client connects using a Unix socket file. For local
            connections, you can also influence the type of connection
            to use with the <code class="literal">MYSQL_OPT_PROTOCOL</code> or
            <code class="literal">MYSQL_OPT_NAMED_PIPE</code> options to
            <a href="connectors-apis.html#mysql-options" title="20.10.3.49. mysql_options()"><code class="literal">mysql_options()</code></a>. The type of
            connection must be supported by the server. For a
            <code class="literal">host</code> value of <code class="literal">"."</code> on
            Windows, the client connects using a named pipe, if the
            server has named-pipe connections enabled. If named-pipe
            connections are not enabled, an error occurs.
          </p></li><li><p>
            The <code class="literal">user</code> parameter contains the user's
            MySQL login ID. If <code class="literal">user</code> is
            <code class="literal">NULL</code> or the empty string
            <code class="literal">""</code>, the current user is assumed. Under
            Unix, this is the current login name. Under Windows ODBC,
            the current user name must be specified explicitly. See the
            MyODBC section of <a href="connectors-apis.html" title="Chapter 20. Connectors and APIs">Chapter 20, <i>Connectors and APIs</i></a>.
          </p></li><li><p>
            The <code class="literal">passwd</code> parameter contains the
            password for <code class="literal">user</code>. If
            <code class="literal">passwd</code> is <code class="literal">NULL</code>, only
            entries in the <code class="literal">user</code> table for the user
            that have a blank (empty) password field are checked for a
            match. This allows the database administrator to set up the
            MySQL privilege system in such a way that users get
            different privileges depending on whether they have
            specified a password.
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
              Do not attempt to encrypt the password before calling
              <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>;
              password encryption is handled automatically by the client
              API.
            </p></div></li><li><p>
            The <code class="literal">user</code> and <code class="literal">passwd</code>
            parameters use whatever character set has been configured
            for the <code class="literal">MYSQL</code> object. By default, this is
            <code class="literal">latin1</code>, but can be changed by calling
            <a href="connectors-apis.html#mysql-options" title="20.10.3.49. mysql_options()"><code class="literal">mysql_options(mysql,
            MYSQL_SET_CHARSET_NAME,
            "<em class="replaceable"><code>charset_name</code></em>")</code></a> prior
            to connecting.
          </p></li><li><p>
            <code class="literal">db</code> is the database name. If
            <code class="literal">db</code> is not <code class="literal">NULL</code>, the
            connection sets the default database to this value.
          </p></li><li><p>
            If <code class="literal">port</code> is not 0, the value is used as
            the port number for the TCP/IP connection. Note that the
            <code class="literal">host</code> parameter determines the type of the
            connection.
          </p></li><li><p>
            If <code class="literal">unix_socket</code> is not
            <code class="literal">NULL</code>, the string specifies the socket or
            named pipe that should be used. Note that the
            <code class="literal">host</code> parameter determines the type of the
            connection.
          </p></li><li><p>
            The value of <code class="literal">client_flag</code> is usually 0,
            but can be set to a combination of the following flags to
            enable certain features.
          </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Flag Name</strong></span></td><td><span class="bold"><strong>Flag Description</strong></span></td></tr><tr><td><code class="literal">CLIENT_COMPRESS</code></td><td>Use compression protocol.</td></tr><tr><td><code class="literal">CLIENT_FOUND_ROWS</code></td><td>Return the number of found (matched) rows, not the number of changed
                    rows.</td></tr><tr><td><code class="literal">CLIENT_IGNORE_SIGPIPE</code></td><td>Prevents the client library from installing a <code class="literal">SIGPIPE</code>
                    signal handler. This can be used to avoid conflicts
                    with a handler that the application has already
                    installed.</td></tr><tr><td><code class="literal">CLIENT_IGNORE_SPACE</code></td><td>Allow spaces after function names. Makes all functions names reserved
                    words.</td></tr><tr><td><code class="literal">CLIENT_INTERACTIVE</code></td><td>Allow <a href="server-administration.html#sysvar_interactive_timeout"><code class="literal">interactive_timeout</code></a> seconds
                    (instead of
                    <a href="server-administration.html#sysvar_wait_timeout"><code class="literal">wait_timeout</code></a>
                    seconds) of inactivity before closing the
                    connection. The client's session
                    <a href="server-administration.html#sysvar_wait_timeout"><code class="literal">wait_timeout</code></a>
                    variable is set to the value of the session
                    <a href="server-administration.html#sysvar_interactive_timeout"><code class="literal">interactive_timeout</code></a>
                    variable.</td></tr><tr><td><code class="literal">CLIENT_LOCAL_FILES</code></td><td>Enable <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
                    LOCAL</code></a> handling.</td></tr><tr><td><code class="literal">CLIENT_MULTI_RESULTS</code></td><td>Tell the server that the client can handle multiple result sets from
                    multiple-statement executions or stored procedures.
                    This flag is automatically enabled if
                    <code class="literal">CLIENT_MULTI_STATEMENTS</code> is
                    enabled. See the note following this table for more
                    information about this flag.</td></tr><tr><td><code class="literal">CLIENT_MULTI_STATEMENTS</code></td><td>Tell the server that the client may send multiple statements in a single
                    string (separated by
                    “<span class="quote"><code class="literal">;</code></span>”). If this flag
                    is not set, multiple-statement execution is
                    disabled. See the note following this table for more
                    information about this flag.</td></tr><tr><td><code class="literal">CLIENT_NO_SCHEMA</code></td><td>Don't allow the <em class="replaceable"><code>db_name.tbl_name.col_name</code></em>
                    syntax. This is for ODBC. It causes the parser to
                    generate an error if you use that syntax, which is
                    useful for trapping bugs in some ODBC programs.</td></tr><tr><td><code class="literal">CLIENT_ODBC</code></td><td>Unused.</td></tr><tr><td><code class="literal">CLIENT_SSL</code></td><td>Use SSL (encrypted protocol). This option should not be set by
                    application programs; it is set internally in the
                    client library. Instead, use
                    <a href="connectors-apis.html#mysql-ssl-set" title="20.10.3.67. mysql_ssl_set()"><code class="literal">mysql_ssl_set()</code></a>
                    before calling
                    <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.</td></tr><tr><td><code class="literal">CLIENT_REMEMBER_OPTIONS</code></td><td>Remember options specified by calls to
                    <a href="connectors-apis.html#mysql-options" title="20.10.3.49. mysql_options()"><code class="literal">mysql_options()</code></a>.
                    Without this option, if
                    <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>
                    fails, you must repeat the
                    <a href="connectors-apis.html#mysql-options" title="20.10.3.49. mysql_options()"><code class="literal">mysql_options()</code></a>
                    calls before trying to connect again. With this
                    option, the
                    <a href="connectors-apis.html#mysql-options" title="20.10.3.49. mysql_options()"><code class="literal">mysql_options()</code></a>
                    calls need not be repeated.</td></tr></tbody></table></div></li></ul></div><p>
        If your program uses <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a>
        statements to execute stored procedures, the
        <code class="literal">CLIENT_MULTI_RESULTS</code> flag must be enabled.
        This is because each <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> returns
        a result to indicate the call status, in addition to any result
        sets that might be returned by statements executed within the
        procedure. Because <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> can
        return multiple results, you should process them using a loop
        that calls <a href="connectors-apis.html#mysql-next-result" title="20.10.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a>
        to determine whether there are more results.
      </p><p>
        <code class="literal">CLIENT_MULTI_RESULTS</code> can be enabled when you
        call <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>,
        either explicitly by passing the
        <code class="literal">CLIENT_MULTI_RESULTS</code> flag itself, or
        implicitly by passing <code class="literal">CLIENT_MULTI_STATEMENTS</code>
        (which also enables <code class="literal">CLIENT_MULTI_RESULTS</code>). As
        of MySQL 6.0.8, <code class="literal">CLIENT_MULTI_RESULTS</code> is
        enabled by default.
      </p><p>
        If you enable <code class="literal">CLIENT_MULTI_STATEMENTS</code> or
        <code class="literal">CLIENT_MULTI_RESULTS</code>, you should process the
        result for every call to
        <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> or
        <a href="connectors-apis.html#mysql-real-query" title="20.10.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> by using a
        loop that calls
        <a href="connectors-apis.html#mysql-next-result" title="20.10.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> to determine
        whether there are more results. For an example, see
        <a href="connectors-apis.html#c-api-multiple-queries" title="20.10.12. C API Support for Multiple Statement Execution">Section 20.10.12, “C API Support for Multiple Statement Execution”</a>.
      </p><p>
        For some parameters, it is possible to have the value taken from
        an option file rather than from an explicit value in the
        <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> call. To do
        this, call <a href="connectors-apis.html#mysql-options" title="20.10.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> with
        the <code class="literal">MYSQL_READ_DEFAULT_FILE</code> or
        <code class="literal">MYSQL_READ_DEFAULT_GROUP</code> option before
        calling <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.
        Then, in the
        <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> call,
        specify the “<span class="quote">no-value</span>” value for each parameter to
        be read from an option file:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            For <code class="literal">host</code>, specify a value of
            <code class="literal">NULL</code> or the empty string
            (<code class="literal">""</code>).
          </p></li><li><p>
            For <code class="literal">user</code>, specify a value of
            <code class="literal">NULL</code> or the empty string.
          </p></li><li><p>
            For <code class="literal">passwd</code>, specify a value of
            <code class="literal">NULL</code>. (For the password, a value of the
            empty string in the
            <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> call
            cannot be overridden in an option file, because the empty
            string indicates explicitly that the MySQL account must have
            an empty password.)
          </p></li><li><p>
            For <code class="literal">db</code>, specify a value of
            <code class="literal">NULL</code> or the empty string.
          </p></li><li><p>
            For <code class="literal">port</code>, specify a value of 0.
          </p></li><li><p>
            For <code class="literal">unix_socket</code>, specify a value of
            <code class="literal">NULL</code>.
          </p></li></ul></div><p>
        If no value is found in an option file for a parameter, its
        default value is used as indicated in the descriptions given
        earlier in this section.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A <code class="literal">MYSQL*</code> connection handle if the connection
        was successful, <code class="literal">NULL</code> if the connection was
        unsuccessful. For a successful connection, the return value is
        the same as the value of the first parameter.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_CONN_HOST_ERROR</code>
          </p><p>
            Failed to connect to the MySQL server.
          </p></li><li><p>
            <code class="literal">CR_CONNECTION_ERROR</code>
          </p><p>
            Failed to connect to the local MySQL server.
          </p></li><li><p>
            <code class="literal">CR_IPSOCK_ERROR</code>
          </p><p>
            Failed to create an IP socket.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_SOCKET_CREATE_ERROR</code>
          </p><p>
            Failed to create a Unix socket.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_HOST</code>
          </p><p>
            Failed to find the IP address for the host name.
          </p></li><li><p>
            <code class="literal">CR_VERSION_ERROR</code>
          </p><p>
            A protocol mismatch resulted from attempting to connect to a
            server with a client library that uses a different protocol
            version.
          </p></li><li><p>
            <code class="literal">CR_NAMEDPIPEOPEN_ERROR</code>
          </p><p>
            Failed to create a named pipe on Windows.
          </p></li><li><p>
            <code class="literal">CR_NAMEDPIPEWAIT_ERROR</code>
          </p><p>
            Failed to wait for a named pipe on Windows.
          </p></li><li><p>
            <code class="literal">CR_NAMEDPIPESETSTATE_ERROR</code>
          </p><p>
            Failed to get a pipe handler on Windows.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            If <a href="server-administration.html#sysvar_connect_timeout"><code class="literal">connect_timeout</code></a> &gt; 0
            and it took longer than
            <a href="server-administration.html#sysvar_connect_timeout"><code class="literal">connect_timeout</code></a> seconds to
            connect to the server or if the server died while executing
            the <code class="literal">init-command</code>.
          </p></li><li><p>
            <code class="literal">CR_ALREADY_CONNECTED</code>
          </p><p>
            The <code class="literal">MYSQL</code> connection handle is already
            connected.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">MYSQL mysql;

mysql_init(&amp;mysql);
mysql_options(&amp;mysql,MYSQL_READ_DEFAULT_GROUP,"your_prog_name");
if (!mysql_real_connect(&amp;mysql,"host","user","passwd","database",0,NULL,0))
{
    fprintf(stderr, "Failed to connect to database: Error: %s\n",
          mysql_error(&amp;mysql));
}
</pre><p>
        By using <a href="connectors-apis.html#mysql-options" title="20.10.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> the
        MySQL library reads the <code class="literal">[client]</code> and
        <code class="literal">[your_prog_name]</code> sections in the
        <code class="filename">my.cnf</code> file which ensures that your program
        works, even if someone has set up MySQL in some non-standard
        way.
      </p><p>
        Note that upon connection,
        <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> sets the
        <code class="literal">reconnect</code> flag (part of the
        <code class="literal">MYSQL</code> structure) to a value of
        <code class="literal">1</code> in versions of the API older than 5.0.3, or
        <code class="literal">0</code> in newer versions. A value of
        <code class="literal">1</code> for this flag indicates that if a statement
        cannot be performed because of a lost connection, to try
        reconnecting to the server before giving up. You can use the
        <code class="literal">MYSQL_OPT_RECONNECT</code> option to
        <a href="connectors-apis.html#mysql-options" title="20.10.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> to control
        reconnection behavior.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-real-escape-string"></a>20.10.3.53. <code class="literal">mysql_real_escape_string()</code></h4></div></div></div><a class="indexterm" name="id3689754"></a><p>
        <code class="literal">unsigned long mysql_real_escape_string(MYSQL *mysql,
        char *to, const char *from, unsigned long length)</code>
      </p><p>
        Note that <code class="literal">mysql</code> must be a valid, open
        connection. This is needed because the escaping depends on the
        character set in use by the server.
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is used to create a legal SQL string that you can
        use in an SQL statement. See <a href="language-structure.html#string-syntax" title="8.1.1. Strings">Section 8.1.1, “Strings”</a>.
      </p><p>
        The string in <code class="literal">from</code> is encoded to an escaped
        SQL string, taking into account the current character set of the
        connection. The result is placed in <code class="literal">to</code> and a
        terminating null byte is appended. Characters encoded are
        <code class="literal">NUL</code> (ASCII 0),
        “<span class="quote"><code class="literal">\n</code></span>”,
        “<span class="quote"><code class="literal">\r</code></span>”,
        “<span class="quote"><code class="literal">\</code></span>”,
        “<span class="quote"><code class="literal">'</code></span>”,
        “<span class="quote"><code class="literal">"</code></span>”, and Control-Z (see
        <a href="language-structure.html#literals" title="8.1. Literal Values">Section 8.1, “Literal Values”</a>). (Strictly speaking, MySQL requires
        only that backslash and the quote character used to quote the
        string in the query be escaped. This function quotes the other
        characters to make them easier to read in log files.)
      </p><p>
        The string pointed to by <code class="literal">from</code> must be
        <code class="literal">length</code> bytes long. You must allocate the
        <code class="literal">to</code> buffer to be at least
        <code class="literal">length*2+1</code> bytes long. (In the worst case,
        each character may need to be encoded as using two bytes, and
        you need room for the terminating null byte.) When
        <a href="connectors-apis.html#mysql-real-escape-string" title="20.10.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>
        returns, the contents of <code class="literal">to</code> is a
        null-terminated string. The return value is the length of the
        encoded string, not including the terminating null character.
      </p><p>
        If you need to change the character set of the connection, you
        should use the
        <a href="connectors-apis.html#mysql-set-character-set" title="20.10.3.61. mysql_set_character_set()"><code class="literal">mysql_set_character_set()</code></a>
        function rather than executing a <code class="literal">SET NAMES</code>
        (or <code class="literal">SET CHARACTER SET</code>) statement.
        <a href="connectors-apis.html#mysql-set-character-set" title="20.10.3.61. mysql_set_character_set()"><code class="literal">mysql_set_character_set()</code></a> works
        like <code class="literal">SET NAMES</code> but also affects the character
        set used by
        <a href="connectors-apis.html#mysql-real-escape-string" title="20.10.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>,
        which <code class="literal">SET NAMES</code> does not.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">char query[1000],*end;

end = strmov(query,"INSERT INTO test_table values(");
*end++ = '\'';
end += mysql_real_escape_string(&amp;mysql, end,"What is this",12);
*end++ = '\'';
*end++ = ',';
*end++ = '\'';
end += mysql_real_escape_string(&amp;mysql, end,"binary data: \0\r\n",16);
*end++ = '\'';
*end++ = ')';

if (mysql_real_query(&amp;mysql,query,(unsigned int) (end - query)))
{
   fprintf(stderr, "Failed to insert row, Error: %s\n",
           mysql_error(&amp;mysql));
}
</pre><p>
        The <code class="literal">strmov()</code> function used in the example is
        included in the <code class="literal">mysqlclient</code> library and works
        like <code class="literal">strcpy()</code> but returns a pointer to the
        terminating null of the first parameter.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The length of the value placed into <code class="literal">to</code>, not
        including the terminating null character.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-real-query"></a>20.10.3.54. <code class="literal">mysql_real_query()</code></h4></div></div></div><a class="indexterm" name="id3690067"></a><p>
        <code class="literal">int mysql_real_query(MYSQL *mysql, const char
        *stmt_str, unsigned long length)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Executes the SQL statement pointed to by
        <code class="literal">stmt_str</code>, which should be a string
        <code class="literal">length</code> bytes long. Normally, the string must
        consist of a single SQL statement and you should not add a
        terminating semicolon (“<span class="quote"><code class="literal">;</code></span>”) or
        <code class="literal">\g</code> to the statement. If multiple-statement
        execution has been enabled, the string can contain several
        statements separated by semicolons. See
        <a href="connectors-apis.html#c-api-multiple-queries" title="20.10.12. C API Support for Multiple Statement Execution">Section 20.10.12, “C API Support for Multiple Statement Execution”</a>.
      </p><p>
        <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> cannot be used for
        statements that contain binary data; you must use
        <a href="connectors-apis.html#mysql-real-query" title="20.10.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> instead.
        (Binary data may contain the
        “<span class="quote"><code class="literal">\0</code></span>” character, which
        <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> interprets as the
        end of the statement string.) In addition,
        <a href="connectors-apis.html#mysql-real-query" title="20.10.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> is faster
        than <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> because it
        does not call <code class="literal">strlen()</code> on the statement
        string.
      </p><p>
        If you want to know whether the statement should return a result
        set, you can use
        <a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> to check for
        this. See <a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()">Section 20.10.3.22, “<code class="literal">mysql_field_count()</code>”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the statement was successful. Non-zero if an error
        occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-refresh"></a>20.10.3.55. <code class="literal">mysql_refresh()</code></h4></div></div></div><a class="indexterm" name="id3690313"></a><p>
        <code class="literal">int mysql_refresh(MYSQL *mysql, unsigned int
        options)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function flushes tables or caches, or resets replication
        server information. The connected user must have the
        <a href="server-administration.html#priv_reload"><code class="literal">RELOAD</code></a> privilege.
      </p><p>
        The <code class="literal">options</code> argument is a bit mask composed
        from any combination of the following values. Multiple values
        can be OR'ed together to perform multiple operations with a
        single call.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">REFRESH_BACKUP_LOG</code>
          </p><p>
            Flush the backup logs, like
            <a href="sql-syntax.html#flush" title="12.5.7.3. FLUSH Syntax"><code class="literal">FLUSH BACKUP
            LOGS</code></a>. This option was added in MySQL 6.0.8.
          </p></li><li><p>
            <code class="literal">REFRESH_GRANT</code>
          </p><p>
            Refresh the grant tables, like
            <a href="sql-syntax.html#flush" title="12.5.7.3. FLUSH Syntax"><code class="literal">FLUSH
            PRIVILEGES</code></a>.
          </p></li><li><p>
            <code class="literal">REFRESH_LOG</code>
          </p><p>
            Flush the logs, like
            <a href="sql-syntax.html#flush" title="12.5.7.3. FLUSH Syntax"><code class="literal">FLUSH LOGS</code></a>.
          </p></li><li><p>
            <code class="literal">REFRESH_TABLES</code>
          </p><p>
            Flush the table cache, like
            <a href="sql-syntax.html#flush" title="12.5.7.3. FLUSH Syntax"><code class="literal">FLUSH
            TABLES</code></a>.
          </p></li><li><p>
            <code class="literal">REFRESH_HOSTS</code>
          </p><p>
            Flush the host cache, like
            <a href="sql-syntax.html#flush" title="12.5.7.3. FLUSH Syntax"><code class="literal">FLUSH
            HOSTS</code></a>.
          </p></li><li><p>
            <code class="literal">REFRESH_STATUS</code>
          </p><p>
            Reset status variables, like <code class="literal">FLUSH
            STATUS</code>.
          </p></li><li><p>
            <code class="literal">REFRESH_THREADS</code>
          </p><p>
            Flush the thread cache.
          </p></li><li><p>
            <code class="literal">REFRESH_SLAVE</code>
          </p><p>
            On a slave replication server, reset the master server
            information and restart the slave, like
            <a href="sql-syntax.html#reset-slave" title="12.6.2.3. RESET SLAVE Syntax"><code class="literal">RESET SLAVE</code></a>.
          </p></li><li><p>
            <code class="literal">REFRESH_MASTER</code>
          </p><p>
            On a master replication server, remove the binary log files
            listed in the binary log index and truncate the index file,
            like <a href="sql-syntax.html#reset-master" title="12.6.1.2. RESET MASTER Syntax"><code class="literal">RESET MASTER</code></a>.
          </p></li></ul></div><p>
        As of MySQL 6.0.8,
        <a href="connectors-apis.html#mysql-refresh" title="20.10.3.55. mysql_refresh()"><code class="literal">mysql_refresh()</code></a> causes an
        implicit commit to occur before and after executing.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero for success. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-reload"></a>20.10.3.56. <code class="literal">mysql_reload()</code></h4></div></div></div><a class="indexterm" name="id3690695"></a><p>
        <code class="literal">int mysql_reload(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Asks the MySQL server to reload the grant tables. The connected
        user must have the <a href="server-administration.html#priv_reload"><code class="literal">RELOAD</code></a>
        privilege.
      </p><p>
        This function is deprecated. It is preferable to use
        <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> to issue an SQL
        <a href="sql-syntax.html#flush" title="12.5.7.3. FLUSH Syntax"><code class="literal">FLUSH
        PRIVILEGES</code></a> statement instead.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero for success. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-rollback"></a>20.10.3.57. <code class="literal">mysql_rollback()</code></h4></div></div></div><a class="indexterm" name="id3690863"></a><p>
        <code class="literal">my_bool mysql_rollback(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Rolls back the current transaction.
      </p><p>
        The action of this function is subject to the value of the
        <a href="server-administration.html#sysvar_completion_type"><code class="literal">completion_type</code></a> system
        variable. In particular, if the value of
        <a href="server-administration.html#sysvar_completion_type"><code class="literal">completion_type</code></a> is 2, the
        server performs a release after terminating a transaction and
        closes the client connection. The client program should call
        <a href="connectors-apis.html#mysql-close" title="20.10.3.5. mysql_close()"><code class="literal">mysql_close()</code></a> to close the
        connection from the client side.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if successful. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-row-seek"></a>20.10.3.58. <code class="literal">mysql_row_seek()</code></h4></div></div></div><a class="indexterm" name="id3690962"></a><p>
        <code class="literal">MYSQL_ROW_OFFSET mysql_row_seek(MYSQL_RES *result,
        MYSQL_ROW_OFFSET offset)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Sets the row cursor to an arbitrary row in a query result set.
        The <code class="literal">offset</code> value is a row offset that should
        be a value returned from
        <a href="connectors-apis.html#mysql-row-tell" title="20.10.3.59. mysql_row_tell()"><code class="literal">mysql_row_tell()</code></a> or from
        <a href="connectors-apis.html#mysql-row-seek" title="20.10.3.58. mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a>. This value is
        not a row number; if you want to seek to a row within a result
        set by number, use
        <a href="connectors-apis.html#mysql-data-seek" title="20.10.3.9. mysql_data_seek()"><code class="literal">mysql_data_seek()</code></a> instead.
      </p><p>
        This function requires that the result set structure contains
        the entire result of the query, so
        <a href="connectors-apis.html#mysql-row-seek" title="20.10.3.58. mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a> may be used
        only in conjunction with
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>, not with
        <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The previous value of the row cursor. This value may be passed
        to a subsequent call to
        <a href="connectors-apis.html#mysql-row-seek" title="20.10.3.58. mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a>.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-row-tell"></a>20.10.3.59. <code class="literal">mysql_row_tell()</code></h4></div></div></div><a class="indexterm" name="id3691100"></a><p>
        <code class="literal">MYSQL_ROW_OFFSET mysql_row_tell(MYSQL_RES
        *result)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the current position of the row cursor for the last
        <a href="connectors-apis.html#mysql-fetch-row" title="20.10.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>. This value
        can be used as an argument to
        <a href="connectors-apis.html#mysql-row-seek" title="20.10.3.58. mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a>.
      </p><p>
        You should use <a href="connectors-apis.html#mysql-row-tell" title="20.10.3.59. mysql_row_tell()"><code class="literal">mysql_row_tell()</code></a>
        only after <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>,
        not after <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The current offset of the row cursor.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-select-db"></a>20.10.3.60. <code class="literal">mysql_select_db()</code></h4></div></div></div><a class="indexterm" name="id3691210"></a><p>
        <code class="literal">int mysql_select_db(MYSQL *mysql, const char
        *db)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Causes the database specified by <code class="literal">db</code> to become
        the default (current) database on the connection specified by
        <code class="literal">mysql</code>. In subsequent queries, this database
        is the default for table references that do not include an
        explicit database specifier.
      </p><p>
        <a href="connectors-apis.html#mysql-select-db" title="20.10.3.60. mysql_select_db()"><code class="literal">mysql_select_db()</code></a> fails unless
        the connected user can be authenticated as having permission to
        use the database.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero for success. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-set-character-set"></a>20.10.3.61. <code class="literal">mysql_set_character_set()</code></h4></div></div></div><a class="indexterm" name="id3691373"></a><p>
        <code class="literal">int mysql_set_character_set(MYSQL *mysql, const char
        *csname)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is used to set the default character set for the
        current connection. The string <code class="literal">csname</code>
        specifies a valid character set name. The connection collation
        becomes the default collation of the character set. This
        function works like the <code class="literal">SET NAMES</code> statement,
        but also sets the value of <code class="literal">mysql-&gt;charset</code>,
        and thus affects the character set used by
        <a href="connectors-apis.html#mysql-real-escape-string" title="20.10.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero for success. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">MYSQL mysql;

mysql_init(&amp;mysql);
if (!mysql_real_connect(&amp;mysql,"host","user","passwd","database",0,NULL,0))
{
    fprintf(stderr, "Failed to connect to database: Error: %s\n",
          mysql_error(&amp;mysql));
}

if (!mysql_set_character_set(&amp;mysql, "utf8")) 
{
    printf("New client character set: %s\n", 
           mysql_character_set_name(&amp;mysql));
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-set-local-infile-default"></a>20.10.3.62. <code class="literal">mysql_set_local_infile_default()</code></h4></div></div></div><a class="indexterm" name="id3691485"></a><a class="indexterm" name="id3691495"></a><p>
        <code class="literal">void mysql_set_local_infile_default(MYSQL
        *mysql);</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Sets the <code class="literal">LOAD LOCAL DATA INFILE</code> handler
        callback functions to the defaults used internally by the C
        client library. The library calls this function automatically if
        <a href="connectors-apis.html#mysql-set-local-infile-handler" title="20.10.3.63. mysql_set_local_infile_handler()"><code class="literal">mysql_set_local_infile_handler()</code></a>
        has not been called or does not supply valid functions for each
        of its callbacks.
      </p><p>
        The
        <a href="connectors-apis.html#mysql-set-local-infile-default" title="20.10.3.62. mysql_set_local_infile_default()"><code class="literal">mysql_set_local_infile_default()</code></a>
        function was added in MySQL 4.1.2.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-set-local-infile-handler"></a>20.10.3.63. <code class="literal">mysql_set_local_infile_handler()</code></h4></div></div></div><p>
        <code class="literal">void mysql_set_local_infile_handler(MYSQL *mysql, int
        (*local_infile_init)(void **, const char *, void *), int
        (*local_infile_read)(void *, char *, unsigned int), void
        (*local_infile_end)(void *), int (*local_infile_error)(void *,
        char*, unsigned int), void *userdata);</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function installs callbacks to be used during the execution
        of <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA LOCAL
        INFILE</code></a> statements. It enables application programs to
        exert control over local (client-side) data file reading. The
        arguments are the connection handler, a set of pointers to
        callback functions, and a pointer to a data area that the
        callbacks can use to share information.
      </p><p>
        To use
        <a href="connectors-apis.html#mysql-set-local-infile-handler" title="20.10.3.63. mysql_set_local_infile_handler()"><code class="literal">mysql_set_local_infile_handler()</code></a>,
        you must write the following callback functions:
      </p><pre class="programlisting">int
local_infile_init(void **ptr, const char *filename, void *userdata);
</pre><p>
        The initialization function. This is called once to do any setup
        necessary, open the data file, allocate data structures, and so
        forth. The first <code class="literal">void**</code> argument is a pointer
        to a pointer. You can set the pointer (that is,
        <code class="literal">*ptr</code>) to a value that will be passed to each
        of the other callbacks (as a <code class="literal">void*</code>). The
        callbacks can use this pointed-to value to maintain state
        information. The <code class="literal">userdata</code> argument is the
        same value that is passed to
        <a href="connectors-apis.html#mysql-set-local-infile-handler" title="20.10.3.63. mysql_set_local_infile_handler()"><code class="literal">mysql_set_local_infile_handler()</code></a>.
      </p><p>
        The initialization function should return zero for success,
        non-zero for an error.
      </p><pre class="programlisting">int
local_infile_read(void *ptr, char *buf, unsigned int buf_len);
</pre><p>
        The data-reading function. This is called repeatedly to read the
        data file. <code class="literal">buf</code> points to the buffer where the
        read data should be stored, and <code class="literal">buf_len</code> is
        the maximum number of bytes that the callback can read and store
        in the buffer. (It can read fewer bytes, but should not read
        more.)
      </p><p>
        The return value is the number of bytes read, or zero when no
        more data could be read (this indicates EOF). Return a value
        less than zero if an error occurs.
      </p><pre class="programlisting">void
local_infile_end(void *ptr)
</pre><p>
        The termination function. This is called once after
        <code class="literal">local_infile_read()</code> has returned zero (EOF)
        or an error. This function should deallocate any memory
        allocated by <code class="literal">local_infile_init()</code> and perform
        any other cleanup necessary. It is invoked even if the
        initalization function returns an error.
      </p><pre class="programlisting">int
local_infile_error(void *ptr, 
                   char *error_msg, 
                   unsigned int error_msg_len);
</pre><p>
        The error-handling function. This is called to get a textual
        error message to return to the user in case any of your other
        functions returns an error. <code class="literal">error_msg</code> points
        to the buffer into which the message should be written, and
        <code class="literal">error_msg_len</code> is the length of the buffer.
        The message should be written as a null-terminated string, so
        the message can be at most
        <code class="literal">error_msg_len</code>–1 bytes long.
      </p><p>
        The return value is the error number.
      </p><p>
        Typically, the other callbacks store the error message in the
        data structure pointed to by <code class="literal">ptr</code>, so that
        <code class="literal">local_infile_error()</code> can copy the message
        from there into <code class="literal">error_msg</code>.
      </p><p>
        After calling
        <a href="connectors-apis.html#mysql-set-local-infile-handler" title="20.10.3.63. mysql_set_local_infile_handler()"><code class="literal">mysql_set_local_infile_handler()</code></a>
        in your C code and passing pointers to your callback functions,
        you can then issue a
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA LOCAL
        INFILE</code></a> statement (for example, by using
        <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a>). The client
        library automatically invokes your callbacks. The file name
        specified in <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD
        DATA LOCAL INFILE</code></a> will be passed as the second
        parameter to the <code class="literal">local_infile_init()</code>
        callback.
      </p><p>
        The
        <a href="connectors-apis.html#mysql-set-local-infile-handler" title="20.10.3.63. mysql_set_local_infile_handler()"><code class="literal">mysql_set_local_infile_handler()</code></a>
        function was added in MySQL 4.1.2.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-set-server-option"></a>20.10.3.64. <code class="literal">mysql_set_server_option()</code></h4></div></div></div><a class="indexterm" name="id3691919"></a><p>
        <code class="literal">int mysql_set_server_option(MYSQL *mysql, enum
        enum_mysql_set_option option)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Enables or disables an option for the connection.
        <code class="literal">option</code> can have one of the following values.
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><code class="literal">MYSQL_OPTION_MULTI_STATEMENTS_ON</code></td><td>Enable multiple-statement support</td></tr><tr><td><code class="literal">MYSQL_OPTION_MULTI_STATEMENTS_OFF</code></td><td>Disable multiple-statement support</td></tr></tbody></table></div><p>
        If you enable multiple-statement support, you should retrieve
        results from calls to
        <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> or
        <a href="connectors-apis.html#mysql-real-query" title="20.10.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> by using a
        loop that calls
        <a href="connectors-apis.html#mysql-next-result" title="20.10.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> to determine
        whether there are more results. For an example, see
        <a href="connectors-apis.html#c-api-multiple-queries" title="20.10.12. C API Support for Multiple Statement Execution">Section 20.10.12, “C API Support for Multiple Statement Execution”</a>.
      </p><p>
        Enabling multiple-statement support with
        <code class="literal">MYSQL_OPTION_MULTI_STATEMENTS_ON</code> does not
        have quite the same effect as enabling it by passing the
        <code class="literal">CLIENT_MULTI_STATEMENTS</code> flag to
        <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>:
        <code class="literal">CLIENT_MULTI_STATEMENTS</code> also enables
        <code class="literal">CLIENT_MULTI_RESULTS</code>. If you are using the
        <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> SQL statement in your
        programs, multiple-result support must be enabled; this means
        that <code class="literal">MYSQL_OPTION_MULTI_STATEMENTS_ON</code> by
        itself is insufficient to allow the use of
        <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero for success. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">ER_UNKNOWN_COM_ERROR</code>
          </p><p>
            The server didn't support
            <a href="connectors-apis.html#mysql-set-server-option" title="20.10.3.64. mysql_set_server_option()"><code class="literal">mysql_set_server_option()</code></a>
            (which is the case that the server is older than 4.1.1) or
            the server didn't support the option one tried to set.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-shutdown"></a>20.10.3.65. <code class="literal">mysql_shutdown()</code></h4></div></div></div><a class="indexterm" name="id3692215"></a><p>
        <code class="literal">int mysql_shutdown(MYSQL *mysql, enum
        mysql_enum_shutdown_level shutdown_level)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Asks the database server to shut down. The connected user must
        have the <a href="server-administration.html#priv_shutdown"><code class="literal">SHUTDOWN</code></a> privilege.
        MySQL 6.0 servers support only one type of
        shutdown; <code class="literal">shutdown_level</code> must be equal to
        <code class="literal">SHUTDOWN_DEFAULT</code>. Additional shutdown levels
        are planned to make it possible to choose the desired level.
        Dynamically linked executables which have been compiled with
        older versions of the <code class="literal">libmysqlclient</code> headers
        and call <a href="connectors-apis.html#mysql-shutdown" title="20.10.3.65. mysql_shutdown()"><code class="literal">mysql_shutdown()</code></a> need
        to be used with the old <code class="literal">libmysqlclient</code>
        dynamic library.
      </p><p>
        The shutdown process is described in
        <a href="server-administration.html#server-shutdown" title="5.1.10. The Shutdown Process">Section 5.1.10, “The Shutdown Process”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero for success. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-sqlstate"></a>20.10.3.66. <code class="literal">mysql_sqlstate()</code></h4></div></div></div><a class="indexterm" name="id3692405"></a><p>
        <code class="literal">const char *mysql_sqlstate(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns a null-terminated string containing the SQLSTATE error
        code for the most recently executed SQL statement. The error
        code consists of five characters. <code class="literal">'00000'</code>
        means “<span class="quote">no error</span>”. The values are specified by ANSI
        SQL and ODBC. For a list of possible values, see
        <a href="error-handling.html" title="Appendix B. Errors, Error Codes, and Common Problems">Appendix B, <i>Errors, Error Codes, and Common Problems</i></a>.
      </p><p>
        SQLSTATE values returned by
        <a href="connectors-apis.html#mysql-sqlstate" title="20.10.3.66. mysql_sqlstate()"><code class="literal">mysql_sqlstate()</code></a> differ from
        MySQL-specific error numbers returned by
        <a href="connectors-apis.html#mysql-errno" title="20.10.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a>. For example, the
        <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> client program displays errors using
        the following format, where <code class="literal">1146</code> is the
        <a href="connectors-apis.html#mysql-errno" title="20.10.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> value and
        <code class="literal">'42S02'</code> is the corresponding
        <a href="connectors-apis.html#mysql-sqlstate" title="20.10.3.66. mysql_sqlstate()"><code class="literal">mysql_sqlstate()</code></a> value:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>SELECT * FROM no_such_table;</code></strong>
ERROR 1146 (42S02): Table 'test.no_such_table' doesn't exist
</pre><p>
        Not all MySQL error numbers are mapped to SQLSTATE error codes.
        The value <code class="literal">'HY000'</code> (general error) is used for
        unmapped error numbers.
      </p><p>
        If you call <a href="connectors-apis.html#mysql-sqlstate" title="20.10.3.66. mysql_sqlstate()"><code class="literal">mysql_sqlstate()</code></a>
        after <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>
        fails, <a href="connectors-apis.html#mysql-sqlstate" title="20.10.3.66. mysql_sqlstate()"><code class="literal">mysql_sqlstate()</code></a> might
        not return a useful value. For example, this happens if a host
        is blocked by the server and the connection is closed without
        any SQLSTATE value being sent to the client.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A null-terminated character string containing the SQLSTATE error
        code.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        See <a href="connectors-apis.html#mysql-errno" title="20.10.3.14. mysql_errno()">Section 20.10.3.14, “<code class="literal">mysql_errno()</code>”</a>,
        <a href="connectors-apis.html#mysql-error" title="20.10.3.15. mysql_error()">Section 20.10.3.15, “<code class="literal">mysql_error()</code>”</a>, and
        <a href="connectors-apis.html#mysql-stmt-sqlstate" title="20.10.7.27. mysql_stmt_sqlstate()">Section 20.10.7.27, “<code class="literal">mysql_stmt_sqlstate()</code>”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-ssl-set"></a>20.10.3.67. <code class="literal">mysql_ssl_set()</code></h4></div></div></div><a class="indexterm" name="id3692616"></a><p>
        <code class="literal">my_bool mysql_ssl_set(MYSQL *mysql, const char *key,
        const char *cert, const char *ca, const char *capath, const char
        *cipher)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        <a href="connectors-apis.html#mysql-ssl-set" title="20.10.3.67. mysql_ssl_set()"><code class="literal">mysql_ssl_set()</code></a> is used for
        establishing secure connections using SSL. It must be called
        before <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.
      </p><p>
        <a href="connectors-apis.html#mysql-ssl-set" title="20.10.3.67. mysql_ssl_set()"><code class="literal">mysql_ssl_set()</code></a> does nothing
        unless SSL support is enabled in the client library.
      </p><p>
        <code class="literal">mysql</code> is the connection handler returned from
        <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>. The other
        parameters are specified as follows:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">key</code> is the path name to the key file.
          </p></li><li><p>
            <code class="literal">cert</code> is the path name to the certificate
            file.
          </p></li><li><p>
            <code class="literal">ca</code> is the path name to the certificate
            authority file.
          </p></li><li><p>
            <code class="literal">capath</code> is the path name to a directory
            that contains trusted SSL CA certificates in pem format.
          </p></li><li><p>
            <code class="literal">cipher</code> is a list of allowable ciphers to
            use for SSL encryption.
          </p></li></ul></div><p>
        Any unused SSL parameters may be given as
        <code class="literal">NULL</code>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        This function always returns <code class="literal">0</code>. If SSL setup
        is incorrect,
        <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> returns an
        error when you attempt to connect.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stat"></a>20.10.3.68. <code class="literal">mysql_stat()</code></h4></div></div></div><a class="indexterm" name="id3692813"></a><p>
        <code class="literal">const char *mysql_stat(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns a character string containing information similar to
        that provided by the <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin status</strong></span></a>
        command. This includes uptime in seconds and the number of
        running threads, questions, reloads, and open tables.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A character string describing the server status.
        <code class="literal">NULL</code> if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-store-result"></a>20.10.3.69. <code class="literal">mysql_store_result()</code></h4></div></div></div><a class="indexterm" name="id3692964"></a><p>
        <code class="literal">MYSQL_RES *mysql_store_result(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        After invoking <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> or
        <a href="connectors-apis.html#mysql-real-query" title="20.10.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a>, you must
        call <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> or
        <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> for every
        statement that successfully produces a result set
        (<a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>,
        <a href="sql-syntax.html#show" title="12.5.6. SHOW Syntax"><code class="literal">SHOW</code></a>,
        <a href="sql-syntax.html#describe" title="12.3.1. DESCRIBE Syntax"><code class="literal">DESCRIBE</code></a>,
        <a href="sql-syntax.html#explain" title="12.3.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a>,
        <a href="sql-syntax.html#check-table" title="12.5.2.2. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a>, and so forth). You
        must also call
        <a href="connectors-apis.html#mysql-free-result" title="20.10.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a> after you
        are done with the result set.
      </p><p>
        You don't have to call
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> or
        <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> for other
        statements, but it does not do any harm or cause any notable
        performance degradation if you call
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> in all
        cases. You can detect whether the statement has a result set by
        checking whether
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> returns a
        non-zero value (more about this later on).
      </p><p>
        If you enable multiple-statement support, you should retrieve
        results from calls to
        <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> or
        <a href="connectors-apis.html#mysql-real-query" title="20.10.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> by using a
        loop that calls
        <a href="connectors-apis.html#mysql-next-result" title="20.10.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> to determine
        whether there are more results. For an example, see
        <a href="connectors-apis.html#c-api-multiple-queries" title="20.10.12. C API Support for Multiple Statement Execution">Section 20.10.12, “C API Support for Multiple Statement Execution”</a>.
      </p><p>
        If you want to know whether a statement should return a result
        set, you can use
        <a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> to check for
        this. See <a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()">Section 20.10.3.22, “<code class="literal">mysql_field_count()</code>”</a>.
      </p><p>
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> reads the
        entire result of a query to the client, allocates a
        <code class="literal">MYSQL_RES</code> structure, and places the result
        into this structure.
      </p><p>
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> returns a
        null pointer if the statement didn't return a result set (for
        example, if it was an <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>
        statement).
      </p><p>
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> also
        returns a null pointer if reading of the result set failed. You
        can check whether an error occurred by checking whether
        <a href="connectors-apis.html#mysql-error" title="20.10.3.15. mysql_error()"><code class="literal">mysql_error()</code></a> returns a
        non-empty string, <a href="connectors-apis.html#mysql-errno" title="20.10.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a>
        returns non-zero, or
        <a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> returns
        zero.
      </p><p>
        An empty result set is returned if there are no rows returned.
        (An empty result set differs from a null pointer as a return
        value.)
      </p><p>
        After you have called
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> and gotten
        back a result that isn't a null pointer, you can call
        <a href="connectors-apis.html#mysql-num-rows" title="20.10.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a> to find out how
        many rows are in the result set.
      </p><p>
        You can call <a href="connectors-apis.html#mysql-fetch-row" title="20.10.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>
        to fetch rows from the result set, or
        <a href="connectors-apis.html#mysql-row-seek" title="20.10.3.58. mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a> and
        <a href="connectors-apis.html#mysql-row-tell" title="20.10.3.59. mysql_row_tell()"><code class="literal">mysql_row_tell()</code></a> to obtain or
        set the current row position within the result set.
      </p><p>
        See <a href="connectors-apis.html#null-mysql-store-result" title="20.10.10.1. Why mysql_store_result() Sometimes
        Returns NULL After
        mysql_query() Returns Success">Section 20.10.10.1, “Why <code class="literal">mysql_store_result()</code> Sometimes
        Returns <code class="literal">NULL</code> After
        <code class="literal">mysql_query()</code> Returns Success”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A <code class="literal">MYSQL_RES</code> result structure with the
        results. <code class="literal">NULL</code> (0) if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> resets
        <a href="connectors-apis.html#mysql-error" title="20.10.3.15. mysql_error()"><code class="literal">mysql_error()</code></a> and
        <a href="connectors-apis.html#mysql-errno" title="20.10.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> if it succeeds.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-thread-id"></a>20.10.3.70. <code class="literal">mysql_thread_id()</code></h4></div></div></div><a class="indexterm" name="id3693457"></a><p>
        <code class="literal">unsigned long mysql_thread_id(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the thread ID of the current connection. This value can
        be used as an argument to
        <a href="connectors-apis.html#mysql-kill" title="20.10.3.38. mysql_kill()"><code class="literal">mysql_kill()</code></a> to kill the thread.
      </p><p>
        If the connection is lost and you reconnect with
        <a href="connectors-apis.html#mysql-ping" title="20.10.3.50. mysql_ping()"><code class="literal">mysql_ping()</code></a>, the thread ID
        changes. This means you should not get the thread ID and store
        it for later. You should get it when you need it.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The thread ID of the current connection.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-use-result"></a>20.10.3.71. <code class="literal">mysql_use_result()</code></h4></div></div></div><a class="indexterm" name="id3693547"></a><p>
        <code class="literal">MYSQL_RES *mysql_use_result(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        After invoking <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> or
        <a href="connectors-apis.html#mysql-real-query" title="20.10.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a>, you must
        call <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> or
        <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> for every
        statement that successfully produces a result set
        (<a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>,
        <a href="sql-syntax.html#show" title="12.5.6. SHOW Syntax"><code class="literal">SHOW</code></a>,
        <a href="sql-syntax.html#describe" title="12.3.1. DESCRIBE Syntax"><code class="literal">DESCRIBE</code></a>,
        <a href="sql-syntax.html#explain" title="12.3.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a>,
        <a href="sql-syntax.html#check-table" title="12.5.2.2. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a>, and so forth). You
        must also call
        <a href="connectors-apis.html#mysql-free-result" title="20.10.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a> after you
        are done with the result set.
      </p><p>
        <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> initiates a
        result set retrieval but does not actually read the result set
        into the client like
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> does.
        Instead, each row must be retrieved individually by making calls
        to <a href="connectors-apis.html#mysql-fetch-row" title="20.10.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>. This reads
        the result of a query directly from the server without storing
        it in a temporary table or local buffer, which is somewhat
        faster and uses much less memory than
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>. The client
        allocates memory only for the current row and a communication
        buffer that may grow up to
        <a href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> bytes.
      </p><p>
        On the other hand, you shouldn't use
        <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> if you are
        doing a lot of processing for each row on the client side, or if
        the output is sent to a screen on which the user may type a
        <code class="literal">^S</code> (stop scroll). This ties up the server and
        prevent other threads from updating any tables from which the
        data is being fetched.
      </p><p>
        When using <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>,
        you must execute
        <a href="connectors-apis.html#mysql-fetch-row" title="20.10.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> until a
        <code class="literal">NULL</code> value is returned, otherwise, the
        unfetched rows are returned as part of the result set for your
        next query. The C API gives the error <code class="literal">Commands out of
        sync; you can't run this command now</code> if you forget to
        do this!
      </p><p>
        You may not use
        <a href="connectors-apis.html#mysql-data-seek" title="20.10.3.9. mysql_data_seek()"><code class="literal">mysql_data_seek()</code></a>,
        <a href="connectors-apis.html#mysql-row-seek" title="20.10.3.58. mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a>,
        <a href="connectors-apis.html#mysql-row-tell" title="20.10.3.59. mysql_row_tell()"><code class="literal">mysql_row_tell()</code></a>,
        <a href="connectors-apis.html#mysql-num-rows" title="20.10.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a>, or
        <a href="connectors-apis.html#mysql-affected-rows" title="20.10.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> with a
        result returned from
        <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>, nor may you
        issue other queries until
        <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> has finished.
        (However, after you have fetched all the rows,
        <a href="connectors-apis.html#mysql-num-rows" title="20.10.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a> accurately
        returns the number of rows fetched.)
      </p><p>
        You must call
        <a href="connectors-apis.html#mysql-free-result" title="20.10.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a> once you are
        done with the result set.
      </p><p>
        When using the <code class="literal">libmysqld</code> embedded server, the
        memory benefits are essentially lost because memory usage
        incrementally increases with each row retrieved until
        <a href="connectors-apis.html#mysql-free-result" title="20.10.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a> is called.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A <code class="literal">MYSQL_RES</code> result structure.
        <code class="literal">NULL</code> if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> resets
        <a href="connectors-apis.html#mysql-error" title="20.10.3.15. mysql_error()"><code class="literal">mysql_error()</code></a> and
        <a href="connectors-apis.html#mysql-errno" title="20.10.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> if it succeeds.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-warning-count"></a>20.10.3.72. <code class="literal">mysql_warning_count()</code></h4></div></div></div><a class="indexterm" name="id3694014"></a><p>
        <code class="literal">unsigned int mysql_warning_count(MYSQL
        *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the number of warnings generated during execution of the
        previous SQL statement.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The warning count.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-prepared-statements"></a>20.10.4. C API Prepared Statements</h3></div></div></div><a class="indexterm" name="id3694084"></a><p>
      The MySQL client/server protocol provides for the use of prepared
      statements. This capability uses the <code class="literal">MYSQL_STMT</code>
      statement handler data structure returned by the
      <a href="connectors-apis.html#mysql-stmt-init" title="20.10.7.15. mysql_stmt_init()"><code class="literal">mysql_stmt_init()</code></a> initialization
      function. Prepared execution is an efficient way to execute a
      statement more than once. The statement is first parsed to prepare
      it for execution. Then it is executed one or more times at a later
      time, using the statement handle returned by the initialization
      function.
    </p><p>
      Prepared execution is faster than direct execution for statements
      executed more than once, primarily because the query is parsed
      only once. In the case of direct execution, the query is parsed
      every time it is executed. Prepared execution also can provide a
      reduction of network traffic because for each execution of the
      prepared statement, it is necessary only to send the data for the
      parameters.
    </p><p>
      Prepared statements might not provide a performance increase in
      some situations. For best results, test your application both with
      prepared and non-prepared statements and choose whichever yields
      best performance.
    </p><p>
      Another advantage of prepared statements is that it uses a binary
      protocol that makes data transfer between client and server more
      efficient.
    </p><p>
      The following statements can be used as prepared statements:
    </p><pre class="programlisting">CALL
CREATE TABLE
DELETE
DO
INSERT
REPLACE
SELECT
SET
UPDATE
ANALYZE TABLE
OPTIMIZE TABLE
REPAIR TABLE
CACHE INDEX
CHANGE MASTER
CHECKSUM {TABLE | TABLES}
{CREATE | RENAME | DROP} DATABASE
{CREATE | RENAME | DROP} USER
FLUSH {TABLE | TABLES | TABLES WITH READ LOCK | HOSTS | PRIVILEGES
  | LOGS | STATUS | MASTER | SLAVE | DES_KEY_FILE | USER_RESOURCES}
GRANT
REVOKE
KILL
LOAD INDEX INTO CACHE
RESET {MASTER | SLAVE | QUERY CACHE}
SHOW BINLOG EVENTS
SHOW CREATE {PROCEDURE | FUNCTION | EVENT | TABLE | VIEW}
SHOW {AUTHORS | CONTRIBUTORS | WARNINGS | ERRORS}
SHOW {MASTER | BINARY} LOGS
SHOW {MASTER | SLAVE} STATUS
SLAVE {START | STOP}
INSTALL PLUGIN
UNINSTALL PLUGIN
</pre><p>
      Other statements are not yet supported in MySQL 6.0.
    </p><p>
      As of MySQL 6.0.6, metadata changes to tables or views referred to
      by prepared statements are detected and cause automatic
      repreparation of the statement when it is next executed. For more
      information, see <a href="sql-syntax.html#statement-repreparation" title="12.7.4. Automatic Prepared Statement Repreparation">Section 12.7.4, “Automatic Prepared Statement Repreparation”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-prepared-statement-datatypes"></a>20.10.5. C API Prepared Statement Data types</h3></div></div></div><p>
      Prepared statements use several data structures:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          To prepare a statement, pass the statement string to
          <a href="connectors-apis.html#mysql-stmt-init" title="20.10.7.15. mysql_stmt_init()"><code class="literal">mysql_stmt_init()</code></a>, which
          returns a pointer to a <code class="literal">MYSQL_STMT</code> data
          structure.
        </p></li><li><p>
          To provide input parameters for a prepared statement, set up
          <code class="literal">MYSQL_BIND</code> structures and pass them to
          <a href="connectors-apis.html#mysql-stmt-bind-param" title="20.10.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a>. To
          receive output column values, set up
          <code class="literal">MYSQL_BIND</code> structures and pass them to
          <a href="connectors-apis.html#mysql-stmt-bind-result" title="20.10.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a>.
        </p></li><li><p>
          The <code class="literal">MYSQL_TIME</code> structure is used to
          transfer temporal data in both directions.
        </p></li></ul></div><p>
      The following discussion describes the prepared statement data
      types in detail.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <a class="indexterm" name="id3694282"></a>

          <code class="literal">MYSQL_STMT</code>
        </p><p>
          This structure represents a prepared statement. A statement is
          created by calling
          <a href="connectors-apis.html#mysql-stmt-init" title="20.10.7.15. mysql_stmt_init()"><code class="literal">mysql_stmt_init()</code></a>, which
          returns a statement handle (that is, a pointer to a
          <code class="literal">MYSQL_STMT</code>). The handle is used for all
          subsequent operations with the statement until you close it
          with <a href="connectors-apis.html#mysql-stmt-close" title="20.10.7.6. mysql_stmt_close()"><code class="literal">mysql_stmt_close()</code></a>, at
          which point the handle becomes invalid.
        </p><p>
          The <code class="literal">MYSQL_STMT</code> structure has no members
          that are intended for application use. Also, you should not
          try to make a copy of a <code class="literal">MYSQL_STMT</code>
          structure. There is no guarantee that such a copy will be
          usable.
        </p><p>
          Multiple statement handles can be associated with a single
          connection. The limit on the number of handles depends on the
          available system resources.
        </p></li><li><p>
          <a class="indexterm" name="id3694358"></a>

          <code class="literal">MYSQL_BIND</code>
        </p><p>
          This structure is used both for statement input (data values
          sent to the server) and output (result values returned from
          the server):
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              For input, <code class="literal">MYSQL_BIND</code> is used with
              <a href="connectors-apis.html#mysql-stmt-bind-param" title="20.10.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a> to
              bind parameter data values to buffers for use by
              <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>.
            </p></li><li><p>
              For output, <code class="literal">MYSQL_BIND</code> is used with
              <a href="connectors-apis.html#mysql-stmt-bind-result" title="20.10.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a>
              to bind result set buffers for use in fetching rows with
              <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>.
            </p></li></ul></div><p>
          To use a <code class="literal">MYSQL_BIND</code> structure, you should
          zero its contents to initialize it, and then set its members
          appropriately. For example, to declare and initialize an array
          of three <code class="literal">MYSQL_BIND</code> structures, use this
          code:
        </p><pre class="programlisting">MYSQL_BIND bind[3];
memset(bind, 0, sizeof(bind));
</pre><p>
          The <code class="literal">MYSQL_BIND</code> structure contains the
          following members for use by application programs. For several
          of the members, the manner of use depends on whether the
          structure is used for input or output.
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">enum enum_field_types buffer_type</code>
            </p><p>
              The type of the buffer. This member indicates the data
              type of the C language variable that you are binding to
              the statement parameter. The allowable
              <code class="literal">buffer_type</code> values are listed later in
              this section. For input, <code class="literal">buffer_type</code>
              indicates the type of the variable containing the value
              that you will send to the server. For output, it indicates
              the type of the variable into which you want a value
              received from the server to be stored.
            </p></li><li><p>
              <code class="literal">void *buffer</code>
            </p><p>
              A pointer to the buffer to be used for data transfer. This
              is the address of a variable.
            </p><p>
              For input, <code class="literal">buffer</code> is a pointer to the
              variable in which a statement parameter's data value is
              stored. When you call
              <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>,
              MySQL takes the value that you have stored in the variable
              and uses it in place of the corresponding parameter marker
              in the statement.
            </p><p>
              For output, <code class="literal">buffer</code> is a pointer to the
              variable in which to return a result set column value.
              When you call
              <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>, MySQL
              returns a column value and stores it in this variable. You
              can access the value when the call returns.
            </p><p>
              To minimize the need for MySQL to perform type conversions
              between C language values on the client side and SQL
              values on the server side, use variables that have types
              similar to those of the corresponding SQL values. For
              numeric data types, <code class="literal">buffer</code> should point
              to a variable of the proper numeric C type. (For
              <code class="literal">char</code> or integer variables, you should
              also indicate whether the variable has the
              <code class="literal">unsigned</code> attribute by setting the
              <code class="literal">is_unsigned</code> member, described later in
              this list.) For character (non-binary) and binary string
              data types, <code class="literal">buffer</code> should point to a
              character buffer. For date and time data types,
              <code class="literal">buffer</code> should point to a
              <code class="literal">MYSQL_TIME</code> structure.
            </p><p>
              See the notes about type conversions later in the section.
            </p></li><li><p>
              <code class="literal">unsigned long buffer_length</code>
            </p><p>
              The actual size of <code class="literal">*buffer</code> in bytes.
              This indicates the maximum amount of data that can be
              stored in the buffer. For character and binary C data, the
              <code class="literal">buffer_length</code> value specifies the
              length of <code class="literal">*buffer</code> when used with
              <a href="connectors-apis.html#mysql-stmt-bind-param" title="20.10.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a> to
              specify input values, or the maximum number of output data
              bytes that can be fetched into the buffer when used with
              <a href="connectors-apis.html#mysql-stmt-bind-result" title="20.10.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a>.
            </p></li><li><p>
              <code class="literal">unsigned long *length</code>
            </p><p>
              A pointer to an <code class="literal">unsigned long</code> variable
              that indicates the actual number of bytes of data stored
              in <code class="literal">*buffer</code>. <code class="literal">length</code>
              is used for character or binary C data.
            </p><p>
              For input parameter data binding,
              <code class="literal">length</code> points to an <code class="literal">unsigned
              long</code> variable that indicates the actual length
              of the parameter value stored in
              <code class="literal">*buffer</code>; this is used by
              <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>.
            </p><p>
              For output value binding, the return value of
              <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>
              determines the interpretation of the length:
            </p><div class="itemizedlist"><ul type="square"><li><p>
                  If <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>
                  returns 0, <code class="literal">*length</code> indicates the
                  actual length of the parameter value.
                </p></li><li><p>
                  If <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>
                  returns <code class="literal">MYSQL_DATA_TRUNCATED</code>,
                  <code class="literal">*length</code> indicates the non-truncated
                  length of the parameter value. In this case, the
                  minimum of <code class="literal">*length</code> and
                  <code class="literal">buffer_length</code> indicates the actual
                  length of the value.
                </p></li></ul></div><p>
              <code class="literal">length</code> is ignored for numeric and
              temporal data types because the length of the data value
              is determined by the <code class="literal">buffer_type</code> value.
            </p><p>
              If you need to be able to determine the length of a
              returned value before fetching it with
              <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>, see
              <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()">Section 20.10.7.11, “<code class="literal">mysql_stmt_fetch()</code>”</a>, for some strategies.
            </p></li><li><p>
              <code class="literal">my_bool *is_null</code>
            </p><p>
              This member points to a <code class="literal">my_bool</code>
              variable that is true if a value is
              <code class="literal">NULL</code>, false if it is not
              <code class="literal">NULL</code>. For input, set
              <code class="literal">*is_null</code> to true to indicate that you
              are passing a <code class="literal">NULL</code> value as a statement
              parameter.
            </p><p>
              The reason that <code class="literal">is_null</code> is not a
              boolean scalar but is instead a
              <span class="emphasis"><em>pointer</em></span> to a boolean scalar is to
              provide flexibility in how you specify
              <code class="literal">NULL</code> values:
            </p><div class="itemizedlist"><ul type="square"><li><p>
                  If your data values are always
                  <code class="literal">NULL</code>, use
                  <code class="literal">MYSQL_TYPE_NULL</code> as the
                  <code class="literal">buffer_type</code> value when you bind the
                  column. The other members do not matter.
                </p></li><li><p>
                  If your data values are always <code class="literal">NOT
                  NULL</code>, set the other members appropriately
                  for the variable you are binding, and set
                  <code class="literal">is_null = (my_bool*) 0</code>.
                </p></li><li><p>
                  In all other cases, set the other members
                  appriopriately, and set <code class="literal">is_null</code> to
                  the address of a <code class="literal">my_bool</code> variable.
                  Set that variable's value to true or false
                  appropriately between executions to indicate whether
                  data values are <code class="literal">NULL</code> or
                  <code class="literal">NOT NULL</code>, respectively.
                </p></li></ul></div><p>
              For output, the value pointed to by
              <code class="literal">is_null</code> is set to true after you fetch
              a row if the result set column value returned from the
              statement is <code class="literal">NULL</code>.
            </p></li><li><p>
              <code class="literal">my_bool is_unsigned</code>
            </p><p>
              This member is used for C variables with data types that
              can be <code class="literal">unsigned</code>
              (<code class="literal">char</code>, <code class="literal">short int</code>,
              <code class="literal">int</code>, <code class="literal">long long int</code>).
              Set <code class="literal">is_unsigned</code> to true if the variable
              pointed to by <code class="literal">buffer</code> is
              <code class="literal">unsigned</code> and false otherwise. For
              example, if you bind a <code class="literal">signed char</code>
              variable to <code class="literal">buffer</code>, specify a type code
              of <code class="literal">MYSQL_TYPE_TINY</code> and set
              <code class="literal">is_unsigned</code> to false. If you bind an
              <code class="literal">unsigned char</code> instead, the type code is
              the same but <code class="literal">is_unsigned</code> should be
              true. (For <code class="literal">char</code>, it is not defined
              whether it is signed or unsigned, so it is best to be
              explicit about signedness by using <code class="literal">signed
              char</code> or <code class="literal">unsigned char</code>.)
            </p><p>
              <code class="literal">is_unsigned</code> applies only to the C
              language variable on the client side. It indicates nothing
              about the signedness of the corresponding SQL value on the
              server side. For example, if you use an
              <code class="literal">int</code> variable to supply a value for a
              <code class="literal">BIGINT UNSIGNED</code> column,
              <code class="literal">is_unsigned</code> should be false because
              <code class="literal">int</code> is a signed type. If you use an
              <code class="literal">unsigned int</code> variable to supply a value
              for a <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIGINT</code></a> column,
              <code class="literal">is_unsigned</code> should be true because
              <code class="literal">unsigned int</code> is an unsigned type. MySQL
              performs the proper conversion between signed and unsigned
              values in both directions, although a warning occurs if
              truncation results.
            </p></li><li><p>
              <code class="literal">my_bool *error</code>
            </p><p>
              For output, set this member to point to a
              <code class="literal">my_bool</code> variable to have truncation
              information for the parameter stored there after a row
              fetching operation. (Truncation reporting is enabled by
              default, but can be controlled by calling
              <a href="connectors-apis.html#mysql-options" title="20.10.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> with the
              <code class="literal">MYSQL_REPORT_DATA_TRUNCATION</code> option.)
              When truncation reporting is enabled,
              <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> returns
              <code class="literal">MYSQL_DATA_TRUNCATED</code> and
              <code class="literal">*error</code> is true in the
              <code class="literal">MYSQL_BIND</code> structures for parameters in
              which truncation occurred. Truncation indicates loss of
              sign or significant digits, or that a string was too long
              to fit in a column.
            </p></li></ul></div></li><li><p>
          <a class="indexterm" name="id3695341"></a>

          <code class="literal">MYSQL_TIME</code>
        </p><p>
          This structure is used to send and receive
          <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATE</code></a>,
          <a href="data-types.html#time" title="10.3.2. The TIME Type"><code class="literal">TIME</code></a>,
          <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a>, and
          <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> data directly to and
          from the server. Set the <code class="literal">buffer_type</code> member
          of a <code class="literal">MYSQL_BIND</code> structure to one of the
          temporal types (<code class="literal">MYSQL_TYPE_TIME</code>,
          <code class="literal">MYSQL_TYPE_DATE</code>,
          <code class="literal">MYSQL_TYPE_DATETIME</code>,
          <code class="literal">MYSQL_TYPE_TIMESTAMP</code>), and set the
          <code class="literal">buffer</code> member to point to a
          <code class="literal">MYSQL_TIME</code> structure.
        </p><p>
          The <code class="literal">MYSQL_TIME</code> structure contains the
          members listed in the following table.
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Member</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">unsigned int year</code></td><td>The year</td></tr><tr><td><code class="literal">unsigned int month</code></td><td>The month of the year</td></tr><tr><td><code class="literal">unsigned int day</code></td><td>The day of the month</td></tr><tr><td><code class="literal">unsigned int hour</code></td><td>The hour of the day</td></tr><tr><td><code class="literal">unsigned int minute</code></td><td>The minute of the hour</td></tr><tr><td><code class="literal">unsigned int second</code></td><td>The second of the minute</td></tr><tr><td><code class="literal">my_bool neg</code></td><td>A boolean flag to indicate whether the time is negative</td></tr><tr><td><code class="literal">unsigned long second_part</code></td><td>The fractional part of the second in microseconds; currently unused</td></tr></tbody></table></div><p>
          Only those parts of a <code class="literal">MYSQL_TIME</code> structure
          that apply to a given type of temporal value are used. The
          <code class="literal">year</code>, <code class="literal">month</code>, and
          <code class="literal">day</code> elements are used for
          <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATE</code></a>,
          <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a>, and
          <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> values. The
          <code class="literal">hour</code>, <code class="literal">minute</code>, and
          <code class="literal">second</code> elements are used for
          <a href="data-types.html#time" title="10.3.2. The TIME Type"><code class="literal">TIME</code></a>,
          <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a>, and
          <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> values. See
          <a href="connectors-apis.html#c-api-prepared-statement-date-handling" title="20.10.14. C API Prepared Statement Handling of Date and Time Values">Section 20.10.14, “C API Prepared Statement Handling of Date and Time Values”</a>.
        </p></li></ul></div><p>
      The following table shows the allowable values that may be
      specified in the <code class="literal">buffer_type</code> member of
      <code class="literal">MYSQL_BIND</code> structures for input values. The
      value should be chosen according to the data type of the C
      language variable that you are binding. If the variable is
      <code class="literal">unsigned</code>, you should also set the
      <code class="literal">is_unsigned</code> member to true. The table shows the
      C variable types that you can use, the corresponding type codes,
      and the SQL data types for which the supplied value can be used
      without conversion.
    </p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Input Variable C Type</strong></span></td><td><code class="literal">buffer_type</code> <span class="bold"><strong>Value</strong></span></td><td><span class="bold"><strong>SQL Type of Destination Value</strong></span></td></tr><tr><td><code class="literal">signed char</code></td><td><code class="literal">MYSQL_TYPE_TINY</code></td><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">TINYINT</code></a></td></tr><tr><td><code class="literal">short int</code></td><td><code class="literal">MYSQL_TYPE_SHORT</code></td><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">SMALLINT</code></a></td></tr><tr><td><code class="literal">int</code></td><td><code class="literal">MYSQL_TYPE_LONG</code></td><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">INT</code></a></td></tr><tr><td><code class="literal">long long int</code></td><td><code class="literal">MYSQL_TYPE_LONGLONG</code></td><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIGINT</code></a></td></tr><tr><td><code class="literal">float</code></td><td><code class="literal">MYSQL_TYPE_FLOAT</code></td><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">FLOAT</code></a></td></tr><tr><td><code class="literal">double</code></td><td><code class="literal">MYSQL_TYPE_DOUBLE</code></td><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DOUBLE</code></a></td></tr><tr><td><code class="literal">MYSQL_TIME</code></td><td><code class="literal">MYSQL_TYPE_TIME</code></td><td><a href="data-types.html#time" title="10.3.2. The TIME Type"><code class="literal">TIME</code></a></td></tr><tr><td><code class="literal">MYSQL_TIME</code></td><td><code class="literal">MYSQL_TYPE_DATE</code></td><td><a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATE</code></a></td></tr><tr><td><code class="literal">MYSQL_TIME</code></td><td><code class="literal">MYSQL_TYPE_DATETIME</code></td><td><a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a></td></tr><tr><td><code class="literal">MYSQL_TIME</code></td><td><code class="literal">MYSQL_TYPE_TIMESTAMP</code></td><td><a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a></td></tr><tr><td><code class="literal">char[]</code></td><td><code class="literal">MYSQL_TYPE_STRING</code> (for non-binary data)</td><td><code class="literal">TEXT, CHAR, VARCHAR</code></td></tr><tr><td><code class="literal">char[]</code></td><td><code class="literal">MYSQL_TYPE_BLOB</code> (for binary data)</td><td><code class="literal">BLOB, BINARY, VARBINARY</code></td></tr><tr><td> </td><td><code class="literal">MYSQL_TYPE_NULL</code></td><td><code class="literal">NULL</code></td></tr></tbody></table></div><p>
      The use of <code class="literal">MYSQL_TYPE_NULL</code> is described earlier
      in connection with the <code class="literal">is_null</code> member.
    </p><p>
      The following table shows the allowable values that may be
      specified in the <code class="literal">buffer_type</code> member of
      <code class="literal">MYSQL_BIND</code> structures for output values. The
      value should be chosen according to the data type of the C
      language variable that you are binding. If the variable is
      <code class="literal">unsigned</code>, you should also set the
      <code class="literal">is_unsigned</code> member to true. The table shows the
      SQL types of received values, the corresponding type code that
      such values have in result set metadata, and the recommended C
      language data types to bind to the <code class="literal">MYSQL_BIND</code>
      structure to receive the SQL values without conversion.
    </p><p>
      If there is a mismatch between the C variable type on the client
      side and the corresponding SQL value on the server side, MySQL
      performs implicit type conversions in both directions.
    </p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>SQL Type of Received Value</strong></span></td><td><code class="literal">buffer_type</code> <span class="bold"><strong>Value</strong></span></td><td><span class="bold"><strong>Output Variable C Type</strong></span></td></tr><tr><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">TINYINT</code></a></td><td><code class="literal">MYSQL_TYPE_TINY</code></td><td><code class="literal">signed char</code></td></tr><tr><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">SMALLINT</code></a></td><td><code class="literal">MYSQL_TYPE_SHORT</code></td><td><code class="literal">short int</code></td></tr><tr><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">MEDIUMINT</code></a></td><td><code class="literal">MYSQL_TYPE_INT24</code></td><td><code class="literal">int</code></td></tr><tr><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">INT</code></a></td><td><code class="literal">MYSQL_TYPE_LONG</code></td><td><code class="literal">int</code></td></tr><tr><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIGINT</code></a></td><td><code class="literal">MYSQL_TYPE_LONGLONG</code></td><td><code class="literal">long long int</code></td></tr><tr><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">FLOAT</code></a></td><td><code class="literal">MYSQL_TYPE_FLOAT</code></td><td><code class="literal">float</code></td></tr><tr><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DOUBLE</code></a></td><td><code class="literal">MYSQL_TYPE_DOUBLE</code></td><td><code class="literal">double</code></td></tr><tr><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a></td><td><code class="literal">MYSQL_TYPE_NEWDECIMAL</code></td><td><code class="literal">char[]</code></td></tr><tr><td><a href="data-types.html#year" title="10.3.3. The YEAR Type"><code class="literal">YEAR</code></a></td><td><code class="literal">MYSQL_TYPE_SHORT</code></td><td><code class="literal">short int</code></td></tr><tr><td><a href="data-types.html#time" title="10.3.2. The TIME Type"><code class="literal">TIME</code></a></td><td><code class="literal">MYSQL_TYPE_TIME</code></td><td><code class="literal">MYSQL_TIME</code></td></tr><tr><td><a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATE</code></a></td><td><code class="literal">MYSQL_TYPE_DATE</code></td><td><code class="literal">MYSQL_TIME</code></td></tr><tr><td><a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a></td><td><code class="literal">MYSQL_TYPE_DATETIME</code></td><td><code class="literal">MYSQL_TIME</code></td></tr><tr><td><a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a></td><td><code class="literal">MYSQL_TYPE_TIMESTAMP</code></td><td><code class="literal">MYSQL_TIME</code></td></tr><tr><td><code class="literal">CHAR, BINARY</code></td><td><code class="literal">MYSQL_TYPE_STRING</code></td><td><code class="literal">char[]</code></td></tr><tr><td><code class="literal">VARCHAR, VARBINARY</code></td><td><code class="literal">MYSQL_TYPE_VAR_STRING</code></td><td><code class="literal">char[]</code></td></tr><tr><td><code class="literal">TINYBLOB, TINYTEXT</code></td><td><code class="literal">MYSQL_TYPE_TINY_BLOB</code></td><td><code class="literal">char[]</code></td></tr><tr><td><code class="literal">BLOB, TEXT</code></td><td><code class="literal">MYSQL_TYPE_BLOB</code></td><td><code class="literal">char[]</code></td></tr><tr><td><code class="literal">MEDIUMBLOB, MEDIUMTEXT</code></td><td><code class="literal">MYSQL_TYPE_MEDIUM_BLOB</code></td><td><code class="literal">char[]</code></td></tr><tr><td><code class="literal">LONGBLOB, LONGTEXT</code></td><td><code class="literal">MYSQL_TYPE_LONG_BLOB</code></td><td><code class="literal">char[]</code></td></tr><tr><td><a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIT</code></a></td><td><code class="literal">MYSQL_TYPE_BIT</code></td><td><code class="literal">char[]</code></td></tr></tbody></table></div><p>
      MySQL knows the type code for the SQL value on the server side.
      The <code class="literal">buffer_type</code> value indicates the MySQL the
      type code of the C variable that holds the value on the client
      side. The two codes together tell MySQL what conversion must be
      performed, if any. Here are some examples:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If you use <code class="literal">MYSQL_TYPE_LONG</code> with an
          <code class="literal">int</code> variable to pass an integer value to
          the server that is to be stored into a
          <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">FLOAT</code></a> column, MySQL converts
          the value to floating-point format before storing it.
        </p></li><li><p>
          If you fetch an SQL <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">MEDIUMINT</code></a>
          column value, but specify a <code class="literal">buffer_type</code>
          value of <code class="literal">MYSQL_TYPE_LONGLONG</code> and use a C
          variable of type <code class="literal">long long int</code> as the
          destination buffer, MySQL will convert the
          <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">MEDIUMINT</code></a> value (which requires
          less than 8 bytes) for storage into the <code class="literal">long long
          int</code> (an 8-byte variable).
        </p></li><li><p>
          If you fetch a numeric column with a value of 255 into a
          <code class="literal">char[4]</code> character array and specify a
          <code class="literal">buffer_type</code> value of
          <code class="literal">MYSQL_TYPE_STRING</code>, the resulting value in
          the array will be a 4-byte string containing
          <code class="literal">'255\0'</code>.
        </p></li><li><p>
          <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> values are returned as
          strings, which is why the corresponding C type is
          <code class="literal">char[]</code>.
          <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> values returned by the
          server correspond to the string representation of the original
          server-side value. For example, <code class="literal">12.345</code> is
          returned to the client as <code class="literal">'12.345'</code>. If you
          specify <code class="literal">MYSQL_TYPE_NEWDECIMAL</code> and bind a
          string buffer to the <code class="literal">MYSQL_BIND</code> structure,
          <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> stores the
          value in the buffer without conversion. If instead you specify
          a numeric variable and type code,
          <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> converts
          the string-format <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> value
          to numeric form.
        </p></li><li><p>
          For the <code class="literal">MYSQL_TYPE_BIT</code> type code,
          <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIT</code></a> values are returned into a
          string buffer (thus, the corresponding C type is
          <code class="literal">char[]</code> here, too). The value represents a
          bit string that requires interpretation on the client side. To
          return the value as a type that is easier to deal with, you
          can cause the value to be cast to integer using either of the
          following types of expressions:
        </p><pre class="programlisting">SELECT bit_col + 0 FROM t
SELECT CAST(bit_col AS UNSIGNED) FROM t
</pre><p>
          To retrieve the value, bind an integer variable large enough
          to hold the value and specify the appropriate corresponding
          integer type code.
        </p></li></ul></div><p>
      Before binding variables to the <code class="literal">MYSQL_BIND</code>
      structures that are to be used for fetching column values, you can
      check the type codes for each column of the result set. This might
      be desirable if you want to determine which variable types would
      be best to use to avoid type conversions. To get the type codes,
      call <a href="connectors-apis.html#mysql-stmt-result-metadata" title="20.10.7.23. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a>
      after executing the prepared statement with
      <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>. The metadata
      provides access to the type codes for the result set as described
      in <a href="connectors-apis.html#mysql-stmt-result-metadata" title="20.10.7.23. mysql_stmt_result_metadata()">Section 20.10.7.23, “<code class="literal">mysql_stmt_result_metadata()</code>”</a>, and
      <a href="connectors-apis.html#c-api-datatypes" title="20.10.1. C API Data Types">Section 20.10.1, “C API Data Types”</a>.
    </p><p>
      If you cause the <code class="literal">max_length</code> member of the
      <code class="literal">MYSQL_FIELD</code> column metadata structures to be
      set (by calling
      <a href="connectors-apis.html#mysql-stmt-attr-set" title="20.10.7.3. mysql_stmt_attr_set()"><code class="literal">mysql_stmt_attr_set()</code></a>), be aware
      that the <code class="literal">max_length</code> values for the result set
      indicate the lengths of the longest string representation of the
      result values, not the lengths of the binary representation. That
      is, <code class="literal">max_length</code> does not necessarily correspond
      to the size of the buffers needed to fetch the values with the
      binary protocol used for prepared statements. The size of the
      buffers should be chosen according to the types of the variables
      into which you fetch the values.
    </p><p>
      For input character (non-binary) string data (indicated by
      <code class="literal">MYSQL_TYPE_STRING</code>), the value is assumed to be
      in the character set indicated by the
      <a href="server-administration.html#sysvar_character_set_client"><code class="literal">character_set_client</code></a> system
      variable. If the value is stored into a column with a different
      character set, the appropriate conversion to that character set
      occurs. For input binary string data (indicated by
      <code class="literal">MYSQL_TYPE_BLOB</code>), the value is treated as
      having the <code class="literal">binary</code> character set; that is, it is
      treated as a byte string and no conversion occurs.
    </p><p>
      To determine whether output string values in a result set returned
      from the server contain binary or non-binary data, check whether
      the <code class="literal">charsetnr</code> value of the result set metadata
      is 63 (see <a href="connectors-apis.html#c-api-datatypes" title="20.10.1. C API Data Types">Section 20.10.1, “C API Data Types”</a>). If so, the
      character set is <code class="literal">binary</code>, which indicates binary
      rather than non-binary data. This enables you to distinguish
      <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a> from
      <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>,
      <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> from
      <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>, and the
      <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> types from the
      <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> types.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-prepared-statement-function-overview"></a>20.10.6. C API Prepared Statement Function Overview</h3></div></div></div><a class="indexterm" name="id3697178"></a><a class="indexterm" name="id3697191"></a><p>
      The functions available for prepared statement processing are
      summarized here and described in greater detail in a later
      section. See <a href="connectors-apis.html#c-api-prepared-statement-functions" title="20.10.7. C API Prepared Statement Function Descriptions">Section 20.10.7, “C API Prepared Statement Function Descriptions”</a>.
    </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Function</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-affected-rows" title="20.10.7.1. mysql_stmt_affected_rows()"><code class="literal">mysql_stmt_affected_rows()</code></a></td><td>Returns the number of rows changed, deleted, or inserted by prepared
              <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a>,
              <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>, or
              <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statement</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-attr-get" title="20.10.7.2. mysql_stmt_attr_get()"><code class="literal">mysql_stmt_attr_get()</code></a></td><td>Get value of an attribute for a prepared statement</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-attr-set" title="20.10.7.3. mysql_stmt_attr_set()"><code class="literal">mysql_stmt_attr_set()</code></a></td><td>Sets an attribute for a prepared statement</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-bind-param" title="20.10.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a></td><td>Associates application data buffers with the parameter markers in a
              prepared SQL statement</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-bind-result" title="20.10.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a></td><td>Associates application data buffers with columns in the result set</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-close" title="20.10.7.6. mysql_stmt_close()"><code class="literal">mysql_stmt_close()</code></a></td><td>Frees memory used by prepared statement</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-data-seek" title="20.10.7.7. mysql_stmt_data_seek()"><code class="literal">mysql_stmt_data_seek()</code></a></td><td>Seeks to an arbitrary row number in a statement result set</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-errno" title="20.10.7.8. mysql_stmt_errno()"><code class="literal">mysql_stmt_errno()</code></a></td><td>Returns the error number for the last statement execution</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-error" title="20.10.7.9. mysql_stmt_error()"><code class="literal">mysql_stmt_error()</code></a></td><td>Returns the error message for the last statement execution</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a></td><td>Executes the prepared statement</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a></td><td>Fetches the next row of data from the result set and returns data for
              all bound columns</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-fetch-column" title="20.10.7.12. mysql_stmt_fetch_column()"><code class="literal">mysql_stmt_fetch_column()</code></a></td><td>Fetch data for one column of the current row of the result set</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-field-count" title="20.10.7.13. mysql_stmt_field_count()"><code class="literal">mysql_stmt_field_count()</code></a></td><td>Returns the number of result columns for the most recent statement</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-free-result" title="20.10.7.14. mysql_stmt_free_result()"><code class="literal">mysql_stmt_free_result()</code></a></td><td>Free the resources allocated to the statement handle</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-init" title="20.10.7.15. mysql_stmt_init()"><code class="literal">mysql_stmt_init()</code></a></td><td>Allocates memory for <code class="literal">MYSQL_STMT</code> structure and
              initializes it</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-insert-id" title="20.10.7.16. mysql_stmt_insert_id()"><code class="literal">mysql_stmt_insert_id()</code></a></td><td>Returns the ID generated for an <code class="literal">AUTO_INCREMENT</code> column
              by prepared statement</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-next-result" title="20.10.7.17. mysql_stmt_next_result()"><code class="literal">mysql_stmt_next_result()</code></a></td><td>Returns/initiates the next result in multiple-result executions</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-num-rows" title="20.10.7.18. mysql_stmt_num_rows()"><code class="literal">mysql_stmt_num_rows()</code></a></td><td>Returns total row count from the buffered statement result set</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-param-count" title="20.10.7.19. mysql_stmt_param_count()"><code class="literal">mysql_stmt_param_count()</code></a></td><td>Returns the number of parameters in a prepared SQL statement</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-param-metadata" title="20.10.7.20. mysql_stmt_param_metadata()"><code class="literal">mysql_stmt_param_metadata()</code></a></td><td>(Return parameter metadata in the form of a result set.) Currently, this
              function does nothing</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-prepare" title="20.10.7.21. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a></td><td>Prepares an SQL string for execution</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-reset" title="20.10.7.22. mysql_stmt_reset()"><code class="literal">mysql_stmt_reset()</code></a></td><td>Reset the statement buffers in the server</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-result-metadata" title="20.10.7.23. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a></td><td>Returns prepared statement metadata in the form of a result set</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-row-seek" title="20.10.7.24. mysql_stmt_row_seek()"><code class="literal">mysql_stmt_row_seek()</code></a></td><td>Seeks to a row offset in a statement result set, using value returned
              from <a href="connectors-apis.html#mysql-stmt-row-tell" title="20.10.7.25. mysql_stmt_row_tell()"><code class="literal">mysql_stmt_row_tell()</code></a></td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-row-tell" title="20.10.7.25. mysql_stmt_row_tell()"><code class="literal">mysql_stmt_row_tell()</code></a></td><td>Returns the statement row cursor position</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-send-long-data" title="20.10.7.26. mysql_stmt_send_long_data()"><code class="literal">mysql_stmt_send_long_data()</code></a></td><td>Sends long data in chunks to server</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-sqlstate" title="20.10.7.27. mysql_stmt_sqlstate()"><code class="literal">mysql_stmt_sqlstate()</code></a></td><td>Returns the SQLSTATE error code for the last statement execution</td></tr><tr><td><a href="connectors-apis.html#mysql-stmt-store-result" title="20.10.7.28. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a></td><td>Retrieves the complete result set to the client</td></tr></tbody></table></div><p>
      Call <a href="connectors-apis.html#mysql-stmt-init" title="20.10.7.15. mysql_stmt_init()"><code class="literal">mysql_stmt_init()</code></a> to create a
      statement handle, then
      <a href="connectors-apis.html#mysql-stmt-prepare" title="20.10.7.21. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> to prepare
      it, <a href="connectors-apis.html#mysql-stmt-bind-param" title="20.10.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a> to
      supply the parameter data, and
      <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> to execute
      the statement. You can repeat the
      <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> by changing
      parameter values in the respective buffers supplied through
      <a href="connectors-apis.html#mysql-stmt-bind-param" title="20.10.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a>.
    </p><p>
      If the statement is a <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> or any
      other statement that produces a result set,
      <a href="connectors-apis.html#mysql-stmt-prepare" title="20.10.7.21. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> also returns
      the result set metadata information in the form of a
      <code class="literal">MYSQL_RES</code> result set through
      <a href="connectors-apis.html#mysql-stmt-result-metadata" title="20.10.7.23. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a>.
    </p><p>
      You can supply the result buffers using
      <a href="connectors-apis.html#mysql-stmt-bind-result" title="20.10.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a>, so that
      the <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>
      automatically returns data to these buffers. This is row-by-row
      fetching.
    </p><p>
      You can also send the text or binary data in chunks to server
      using <a href="connectors-apis.html#mysql-stmt-send-long-data" title="20.10.7.26. mysql_stmt_send_long_data()"><code class="literal">mysql_stmt_send_long_data()</code></a>.
      See <a href="connectors-apis.html#mysql-stmt-send-long-data" title="20.10.7.26. mysql_stmt_send_long_data()">Section 20.10.7.26, “<code class="literal">mysql_stmt_send_long_data()</code>”</a>.
    </p><p>
      When statement execution has been completed, the statement handle
      must be closed using
      <a href="connectors-apis.html#mysql-stmt-close" title="20.10.7.6. mysql_stmt_close()"><code class="literal">mysql_stmt_close()</code></a> so that all
      resources associated with it can be freed.
    </p><p>
      If you obtained a <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>
      statement's result set metadata by calling
      <a href="connectors-apis.html#mysql-stmt-result-metadata" title="20.10.7.23. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a>, you
      should also free the metadata using
      <a href="connectors-apis.html#mysql-free-result" title="20.10.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a>.
    </p><p>
      <span class="bold"><strong>Execution Steps</strong></span>
    </p><p>
      To prepare and execute a statement, an application follows these
      steps:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Create a prepared statement handle with
          <a href="connectors-apis.html#mysql-stmt-init" title="20.10.7.15. mysql_stmt_init()"><code class="literal">mysql_stmt_init()</code></a>. To prepare
          the statement on the server, call
          <a href="connectors-apis.html#mysql-stmt-prepare" title="20.10.7.21. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> and pass
          it a string containing the SQL statement.
        </p></li><li><p>
          If the statement produces a result set, call
          <a href="connectors-apis.html#mysql-stmt-result-metadata" title="20.10.7.23. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a>
          to obtain the result set metadata. This metadata is itself in
          the form of result set, albeit a separate one from the one
          that contains the rows returned by the query. The metadata
          result set indicates how many columns are in the result and
          contains information about each column.
        </p></li><li><p>
          Set the values of any parameters using
          <a href="connectors-apis.html#mysql-stmt-bind-param" title="20.10.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a>. All
          parameters must be set. Otherwise, statement execution returns
          an error or produces unexpected results.
        </p></li><li><p>
          Call <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> to
          execute the statement.
        </p></li><li><p>
          If the statement produces a result set, bind the data buffers
          to use for retrieving the row values by calling
          <a href="connectors-apis.html#mysql-stmt-bind-result" title="20.10.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a>.
        </p></li><li><p>
          Fetch the data into the buffers row by row by calling
          <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> repeatedly
          until no more rows are found.
        </p></li><li><p>
          Repeat steps 3 through 6 as necessary, by changing the
          parameter values and re-executing the statement.
        </p></li></ol></div><p>
      When <a href="connectors-apis.html#mysql-stmt-prepare" title="20.10.7.21. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> is
      called, the MySQL client/server protocol performs these actions:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          The server parses the statement and sends the okay status back
          to the client by assigning a statement ID. It also sends total
          number of parameters, a column count, and its metadata if it
          is a result set oriented statement. All syntax and semantics
          of the statement are checked by the server during this call.
        </p></li><li><p>
          The client uses this statement ID for the further operations,
          so that the server can identify the statement from among its
          pool of statements.
        </p></li></ul></div><p>
      When <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> is
      called, the MySQL client/server protocol performs these actions:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          The client uses the statement handle and sends the parameter
          data to the server.
        </p></li><li><p>
          The server identifies the statement using the ID provided by
          the client, replaces the parameter markers with the newly
          supplied data, and executes the statement. If the statement
          produces a result set, the server sends the data back to the
          client. Otherwise, it sends an okay status and total number of
          rows changed, deleted, or inserted.
        </p></li></ul></div><p>
      When <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> is called,
      the MySQL client/server protocol performs these actions:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          The client reads the data from the packet row by row and
          places it into the application data buffers by doing the
          necessary conversions. If the application buffer type is same
          as that of the field type returned from the server, the
          conversions are straightforward.
        </p></li></ul></div><p>
      If an error occurs, you can get the statement error code, error
      message, and SQLSTATE value using
      <a href="connectors-apis.html#mysql-stmt-errno" title="20.10.7.8. mysql_stmt_errno()"><code class="literal">mysql_stmt_errno()</code></a>,
      <a href="connectors-apis.html#mysql-stmt-error" title="20.10.7.9. mysql_stmt_error()"><code class="literal">mysql_stmt_error()</code></a>, and
      <a href="connectors-apis.html#mysql-stmt-sqlstate" title="20.10.7.27. mysql_stmt_sqlstate()"><code class="literal">mysql_stmt_sqlstate()</code></a>,
      respectively.
    </p><p>
      <span class="bold"><strong>Prepared Statement Logging</strong></span>
    </p><p>
      For prepared statements that are executed with the
      <a href="connectors-apis.html#mysql-stmt-prepare" title="20.10.7.21. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> and
      <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> C API
      functions, the server writes <code class="literal">Prepare</code> and
      <code class="literal">Execute</code> lines to the general query log so that
      you can tell when statements are prepared and executed.
    </p><p>
      Suppose that you prepare and execute a statement as follows:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Call <a href="connectors-apis.html#mysql-stmt-prepare" title="20.10.7.21. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> to
          prepare the statement string <code class="literal">"SELECT ?"</code>.
        </p></li><li><p>
          Call <a href="connectors-apis.html#mysql-stmt-bind-param" title="20.10.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a>
          to bind the value <code class="literal">3</code> to the parameter in the
          prepared statement.
        </p></li><li><p>
          Call <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> to
          execute the prepared statement.
        </p></li></ol></div><p>
      As a result of the preceding calls, the server writes the
      following lines to the general query log:
    </p><pre class="programlisting">Prepare  [1] SELECT ?
Execute  [1] SELECT 3
</pre><p>
      Each <code class="literal">Prepare</code> and <code class="literal">Execute</code>
      line in the log is tagged with a
      <code class="literal">[<em class="replaceable"><code>N</code></em>]</code> statement
      identifier so that you can keep track of which prepared statement
      is being logged. <em class="replaceable"><code>N</code></em> is a positive
      integer. If there are multiple prepared statements active
      simultaneously for the client, <em class="replaceable"><code>N</code></em> may be
      greater than 1. Each <code class="literal">Execute</code> lines shows a
      prepared statement after substitution of data values for
      <code class="literal">?</code> parameters.
    </p><p>
      Version notes: <code class="literal">Prepare</code> lines are displayed
      without <code class="literal">[<em class="replaceable"><code>N</code></em>]</code> before
      MySQL 4.1.10. <code class="literal">Execute</code> lines are not displayed
      at all before MySQL 4.1.10.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-prepared-statement-functions"></a>20.10.7. C API Prepared Statement Function Descriptions</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-affected-rows">20.10.7.1. <code class="literal">mysql_stmt_affected_rows()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-attr-get">20.10.7.2. <code class="literal">mysql_stmt_attr_get()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-attr-set">20.10.7.3. <code class="literal">mysql_stmt_attr_set()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-bind-param">20.10.7.4. <code class="literal">mysql_stmt_bind_param()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-bind-result">20.10.7.5. <code class="literal">mysql_stmt_bind_result()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-close">20.10.7.6. <code class="literal">mysql_stmt_close()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-data-seek">20.10.7.7. <code class="literal">mysql_stmt_data_seek()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-errno">20.10.7.8. <code class="literal">mysql_stmt_errno()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-error">20.10.7.9. <code class="literal">mysql_stmt_error()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-execute">20.10.7.10. <code class="literal">mysql_stmt_execute()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-fetch">20.10.7.11. <code class="literal">mysql_stmt_fetch()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-fetch-column">20.10.7.12. <code class="literal">mysql_stmt_fetch_column()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-field-count">20.10.7.13. <code class="literal">mysql_stmt_field_count()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-free-result">20.10.7.14. <code class="literal">mysql_stmt_free_result()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-init">20.10.7.15. <code class="literal">mysql_stmt_init()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-insert-id">20.10.7.16. <code class="literal">mysql_stmt_insert_id()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-next-result">20.10.7.17. <code class="literal">mysql_stmt_next_result()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-num-rows">20.10.7.18. <code class="literal">mysql_stmt_num_rows()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-param-count">20.10.7.19. <code class="literal">mysql_stmt_param_count()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-param-metadata">20.10.7.20. <code class="literal">mysql_stmt_param_metadata()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-prepare">20.10.7.21. <code class="literal">mysql_stmt_prepare()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-reset">20.10.7.22. <code class="literal">mysql_stmt_reset()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-result-metadata">20.10.7.23. <code class="literal">mysql_stmt_result_metadata()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-row-seek">20.10.7.24. <code class="literal">mysql_stmt_row_seek()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-row-tell">20.10.7.25. <code class="literal">mysql_stmt_row_tell()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-send-long-data">20.10.7.26. <code class="literal">mysql_stmt_send_long_data()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-sqlstate">20.10.7.27. <code class="literal">mysql_stmt_sqlstate()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-stmt-store-result">20.10.7.28. <code class="literal">mysql_stmt_store_result()</code></a></span></dt></dl></div><p>
      To prepare and execute queries, use the functions described in
      detail in the following sections.
    </p><p>
      All functions that operate with a <code class="literal">MYSQL_STMT</code>
      structure begin with the prefix <code class="literal">mysql_stmt_</code>.
    </p><p>
      To create a <code class="literal">MYSQL_STMT</code> handle, use the
      <a href="connectors-apis.html#mysql-stmt-init" title="20.10.7.15. mysql_stmt_init()"><code class="literal">mysql_stmt_init()</code></a> function.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-affected-rows"></a>20.10.7.1. <code class="literal">mysql_stmt_affected_rows()</code></h4></div></div></div><a class="indexterm" name="id3698430"></a><p>
        <code class="literal">my_ulonglong mysql_stmt_affected_rows(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the total number of rows changed, deleted, or inserted
        by the last executed statement. May be called immediately after
        <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> for
        <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a>,
        <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>, or
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statements. For
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statements,
        <a href="connectors-apis.html#mysql-stmt-affected-rows" title="20.10.7.1. mysql_stmt_affected_rows()"><code class="literal">mysql_stmt_affected_rows()</code></a> works
        like <a href="connectors-apis.html#mysql-num-rows" title="20.10.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An integer greater than zero indicates the number of rows
        affected or retrieved. Zero indicates that no records were
        updated for an <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement,
        no rows matched the <code class="literal">WHERE</code> clause in the
        query, or that no query has yet been executed. -1 indicates that
        the query returned an error or that, for a
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> query,
        <a href="connectors-apis.html#mysql-stmt-affected-rows" title="20.10.7.1. mysql_stmt_affected_rows()"><code class="literal">mysql_stmt_affected_rows()</code></a> was
        called prior to calling
        <a href="connectors-apis.html#mysql-stmt-store-result" title="20.10.7.28. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>.
        Because
        <a href="connectors-apis.html#mysql-stmt-affected-rows" title="20.10.7.1. mysql_stmt_affected_rows()"><code class="literal">mysql_stmt_affected_rows()</code></a>
        returns an unsigned value, you can check for -1 by comparing the
        return value to <code class="literal">(my_ulonglong)-1</code> (or to
        <code class="literal">(my_ulonglong)~0</code>, which is equivalent).
      </p><p>
        See <a href="connectors-apis.html#mysql-affected-rows" title="20.10.3.1. mysql_affected_rows()">Section 20.10.3.1, “<code class="literal">mysql_affected_rows()</code>”</a>, for additional
        information on the return value.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        For the usage of
        <a href="connectors-apis.html#mysql-stmt-affected-rows" title="20.10.7.1. mysql_stmt_affected_rows()"><code class="literal">mysql_stmt_affected_rows()</code></a>,
        refer to the Example from <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()">Section 20.10.7.10, “<code class="literal">mysql_stmt_execute()</code>”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-attr-get"></a>20.10.7.2. <code class="literal">mysql_stmt_attr_get()</code></h4></div></div></div><a class="indexterm" name="id3698650"></a><p>
        <code class="literal">my_bool mysql_stmt_attr_get(MYSQL_STMT *stmt, enum
        enum_stmt_attr_type option, void *arg)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Can be used to get the current value for a statement attribute.
      </p><p>
        The <code class="literal">option</code> argument is the option that you
        want to get; the <code class="literal">arg</code> should point to a
        variable that should contain the option value. If the option is
        an integer, then <code class="literal">arg</code> should point to the
        value of the integer.
      </p><p>
        See <a href="connectors-apis.html#mysql-stmt-attr-set" title="20.10.7.3. mysql_stmt_attr_set()">Section 20.10.7.3, “<code class="literal">mysql_stmt_attr_set()</code>”</a>, for a list of options
        and option types.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          In MySQL 6.0,
          <a href="connectors-apis.html#mysql-stmt-attr-get" title="20.10.7.2. mysql_stmt_attr_get()"><code class="literal">mysql_stmt_attr_get()</code></a>
          originally used <code class="literal">unsigned int *</code>, not
          <code class="literal">my_bool *</code>, for
          <code class="literal">STMT_ATTR_UPDATE_MAX_LENGTH</code>.
        </p></div><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if successful. Non-zero if <code class="literal">option</code> is
        unknown.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-attr-set"></a>20.10.7.3. <code class="literal">mysql_stmt_attr_set()</code></h4></div></div></div><a class="indexterm" name="id3698792"></a><p>
        <code class="literal">my_bool mysql_stmt_attr_set(MYSQL_STMT *stmt, enum
        enum_stmt_attr_type option, const void *arg)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Can be used to affect behavior for a prepared statement. This
        function may be called multiple times to set several options.
      </p><p>
        The <code class="literal">option</code> argument is the option that you
        want to set. The <code class="literal">arg</code> argument is the value
        for the option. <code class="literal">arg</code> should point to a
        variable that is set to the desired attribute value. The
        variable type is as indicated in the following table.
      </p><p>
        The following table shows the possible <code class="literal">option</code>
        values.
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Option</strong></span></td><td><span class="bold"><strong>Argument Type</strong></span></td><td><span class="bold"><strong>Function</strong></span></td></tr><tr><td><code class="literal">STMT_ATTR_UPDATE_MAX_LENGTH</code></td><td><code class="literal">my_bool *</code></td><td>If set to 1, causes
                <a href="connectors-apis.html#mysql-stmt-store-result" title="20.10.7.28. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>
                to update the metadata
                <code class="literal">MYSQL_FIELD-&gt;max_length</code> value.</td></tr><tr><td><code class="literal">STMT_ATTR_CURSOR_TYPE</code></td><td><code class="literal">unsigned long *</code></td><td>Type of cursor to open for statement when
                <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> is
                invoked. <code class="literal">*arg</code> can be
                <code class="literal">CURSOR_TYPE_NO_CURSOR</code> (the default)
                or <code class="literal">CURSOR_TYPE_READ_ONLY</code>.</td></tr><tr><td><code class="literal">STMT_ATTR_PREFETCH_ROWS</code></td><td><code class="literal">unsigned long *</code></td><td>Number of rows to fetch from server at a time when using a cursor.
                <code class="literal">*arg</code> can be in the range from 1 to
                the maximum value of <code class="literal">unsigned long</code>.
                The default is 1.</td></tr></tbody></table></div><p>
        If you use the <code class="literal">STMT_ATTR_CURSOR_TYPE</code> option
        with <code class="literal">CURSOR_TYPE_READ_ONLY</code>, a cursor is
        opened for the statement when you invoke
        <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>. If there
        is already an open cursor from a previous
        <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> call, it
        closes the cursor before opening a new one.
        <a href="connectors-apis.html#mysql-stmt-reset" title="20.10.7.22. mysql_stmt_reset()"><code class="literal">mysql_stmt_reset()</code></a> also closes
        any open cursor before preparing the statement for re-execution.
        <a href="connectors-apis.html#mysql-stmt-free-result" title="20.10.7.14. mysql_stmt_free_result()"><code class="literal">mysql_stmt_free_result()</code></a> closes
        any open cursor.
      </p><p>
        If you open a cursor for a prepared statement,
        <a href="connectors-apis.html#mysql-stmt-store-result" title="20.10.7.28. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a> is
        unnecessary, because that function causes the result set to be
        buffered on the client side.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if successful. Non-zero if <code class="literal">option</code> is
        unknown.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        The following example opens a cursor for a prepared statement
        and sets the number of rows to fetch at a time to 5:
      </p><pre class="programlisting">MYSQL_STMT *stmt;
int rc;
unsigned long type;
unsigned long prefetch_rows = 5;

stmt = mysql_stmt_init(mysql);
type = (unsigned long) CURSOR_TYPE_READ_ONLY;
rc = mysql_stmt_attr_set(stmt, STMT_ATTR_CURSOR_TYPE, (void*) &amp;type);
/* ... check return value ... */
rc = mysql_stmt_attr_set(stmt, STMT_ATTR_PREFETCH_ROWS,
                         (void*) &amp;prefetch_rows);
/* ... check return value ... */
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-bind-param"></a>20.10.7.4. <code class="literal">mysql_stmt_bind_param()</code></h4></div></div></div><a class="indexterm" name="id3699166"></a><p>
        <code class="literal">my_bool mysql_stmt_bind_param(MYSQL_STMT *stmt,
        MYSQL_BIND *bind)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        <a href="connectors-apis.html#mysql-stmt-bind-param" title="20.10.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a> is used
        to bind input data for the parameter markers in the SQL
        statement that was passed to
        <a href="connectors-apis.html#mysql-stmt-prepare" title="20.10.7.21. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a>. It uses
        <code class="literal">MYSQL_BIND</code> structures to supply the data.
        <code class="literal">bind</code> is the address of an array of
        <code class="literal">MYSQL_BIND</code> structures. The client library
        expects the array to contain one element for each
        “<span class="quote"><code class="literal">?</code></span>” parameter marker that is
        present in the query.
      </p><p>
        Suppose that you prepare the following statement:
      </p><pre class="programlisting">INSERT INTO mytbl VALUES(?,?,?)
</pre><p>
        When you bind the parameters, the array of
        <code class="literal">MYSQL_BIND</code> structures must contain three
        elements, and can be declared like this:
      </p><pre class="programlisting">MYSQL_BIND bind[3];
</pre><p>
        <a href="connectors-apis.html#c-api-prepared-statement-datatypes" title="20.10.5. C API Prepared Statement Data types">Section 20.10.5, “C API Prepared Statement Data types”</a>, describes
        the members of each <code class="literal">MYSQL_BIND</code> element and
        how they should be set to provide input values.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the bind operation was successful. Non-zero if an error
        occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_UNSUPPORTED_PARAM_TYPE</code>
          </p><p>
            The conversion is not supported. Possibly the
            <code class="literal">buffer_type</code> value is illegal or is not
            one of the supported types.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        For the usage of
        <a href="connectors-apis.html#mysql-stmt-bind-param" title="20.10.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a>, refer
        to the Example from <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()">Section 20.10.7.10, “<code class="literal">mysql_stmt_execute()</code>”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-bind-result"></a>20.10.7.5. <code class="literal">mysql_stmt_bind_result()</code></h4></div></div></div><a class="indexterm" name="id3699406"></a><p>
        <code class="literal">my_bool mysql_stmt_bind_result(MYSQL_STMT *stmt,
        MYSQL_BIND *bind)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        <a href="connectors-apis.html#mysql-stmt-bind-result" title="20.10.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a> is used
        to associate (that is, bind) output columns in the result set to
        data buffers and length buffers. When
        <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> is called to
        fetch data, the MySQL client/server protocol places the data for
        the bound columns into the specified buffers.
      </p><p>
        All columns must be bound to buffers prior to calling
        <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>.
        <code class="literal">bind</code> is the address of an array of
        <code class="literal">MYSQL_BIND</code> structures. The client library
        expects the array to contain one element for each column of the
        result set. If you do not bind columns to
        <code class="literal">MYSQL_BIND</code> structures,
        <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> simply
        ignores the data fetch. The buffers should be large enough to
        hold the data values, because the protocol doesn't return data
        values in chunks.
      </p><p>
        A column can be bound or rebound at any time, even after a
        result set has been partially retrieved. The new binding takes
        effect the next time
        <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> is called.
        Suppose that an application binds the columns in a result set
        and calls <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>.
        The client/server protocol returns data in the bound buffers.
        Then suppose that the application binds the columns to a
        different set of buffers. The protocol places data into the
        newly bound buffers when the next call to
        <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> occurs.
      </p><p>
        To bind a column, an application calls
        <a href="connectors-apis.html#mysql-stmt-bind-result" title="20.10.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a> and
        passes the type, address, and length of the output buffer into
        which the value should be stored.
        <a href="connectors-apis.html#c-api-prepared-statement-datatypes" title="20.10.5. C API Prepared Statement Data types">Section 20.10.5, “C API Prepared Statement Data types”</a>, describes
        the members of each <code class="literal">MYSQL_BIND</code> element and
        how they should be set to receive output values.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the bind operation was successful. Non-zero if an error
        occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_UNSUPPORTED_PARAM_TYPE</code>
          </p><p>
            The conversion is not supported. Possibly the
            <code class="literal">buffer_type</code> value is illegal or is not
            one of the supported types.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        For the usage of
        <a href="connectors-apis.html#mysql-stmt-bind-result" title="20.10.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a>, refer
        to the Example from <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()">Section 20.10.7.11, “<code class="literal">mysql_stmt_fetch()</code>”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-close"></a>20.10.7.6. <code class="literal">mysql_stmt_close()</code></h4></div></div></div><a class="indexterm" name="id3699680"></a><p>
        <code class="literal">my_bool mysql_stmt_close(MYSQL_STMT *)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Closes the prepared statement.
        <a href="connectors-apis.html#mysql-stmt-close" title="20.10.7.6. mysql_stmt_close()"><code class="literal">mysql_stmt_close()</code></a> also
        deallocates the statement handle pointed to by
        <code class="literal">stmt</code>.
      </p><p>
        If the current statement has pending or unread results, this
        function cancels them so that the next query can be executed.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the statement was freed successfully. Non-zero if an
        error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        For the usage of
        <a href="connectors-apis.html#mysql-stmt-close" title="20.10.7.6. mysql_stmt_close()"><code class="literal">mysql_stmt_close()</code></a>, refer to the
        Example from <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()">Section 20.10.7.10, “<code class="literal">mysql_stmt_execute()</code>”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-data-seek"></a>20.10.7.7. <code class="literal">mysql_stmt_data_seek()</code></h4></div></div></div><a class="indexterm" name="id3699827"></a><p>
        <code class="literal">void mysql_stmt_data_seek(MYSQL_STMT *stmt,
        my_ulonglong offset)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Seeks to an arbitrary row in a statement result set. The
        <code class="literal">offset</code> value is a row number and should be in
        the range from <code class="literal">0</code> to
        <a href="connectors-apis.html#mysql-stmt-num-rows" title="20.10.7.18. mysql_stmt_num_rows()"><code class="literal">mysql_stmt_num_rows(stmt)-1</code></a>.
      </p><p>
        This function requires that the statement result set structure
        contains the entire result of the last executed query, so
        <a href="connectors-apis.html#mysql-stmt-data-seek" title="20.10.7.7. mysql_stmt_data_seek()"><code class="literal">mysql_stmt_data_seek()</code></a> may be
        used only in conjunction with
        <a href="connectors-apis.html#mysql-stmt-store-result" title="20.10.7.28. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-errno"></a>20.10.7.8. <code class="literal">mysql_stmt_errno()</code></h4></div></div></div><a class="indexterm" name="id3699937"></a><p>
        <code class="literal">unsigned int mysql_stmt_errno(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        For the statement specified by <code class="literal">stmt</code>,
        <a href="connectors-apis.html#mysql-stmt-errno" title="20.10.7.8. mysql_stmt_errno()"><code class="literal">mysql_stmt_errno()</code></a> returns the
        error code for the most recently invoked statement API function
        that can succeed or fail. A return value of zero means that no
        error occurred. Client error message numbers are listed in the
        MySQL <code class="filename">errmsg.h</code> header file. Server error
        message numbers are listed in
        <code class="filename">mysqld_error.h</code>. Errors also are listed at
        <a href="error-handling.html" title="Appendix B. Errors, Error Codes, and Common Problems">Appendix B, <i>Errors, Error Codes, and Common Problems</i></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An error code value. Zero if no error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-error"></a>20.10.7.9. <code class="literal">mysql_stmt_error()</code></h4></div></div></div><a class="indexterm" name="id3700041"></a><p>
        <code class="literal">const char *mysql_stmt_error(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        For the statement specified by <code class="literal">stmt</code>,
        <a href="connectors-apis.html#mysql-stmt-error" title="20.10.7.9. mysql_stmt_error()"><code class="literal">mysql_stmt_error()</code></a> returns a
        null-terminated string containing the error message for the most
        recently invoked statement API function that can succeed or
        fail. An empty string (<code class="literal">""</code>) is returned if no
        error occurred. This means the following two tests are
        equivalent:
      </p><pre class="programlisting">if(*mysql_stmt_errno(stmt))
{
  // an error occurred
}

if (mysql_stmt_error(stmt)[0])
{
  // an error occurred
}
</pre><p>
        The language of the client error messages may be changed by
        recompiling the MySQL client library. Currently, you can choose
        error messages in several different languages.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A character string that describes the error. An empty string if
        no error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-execute"></a>20.10.7.10. <code class="literal">mysql_stmt_execute()</code></h4></div></div></div><a class="indexterm" name="id3700148"></a><p>
        <code class="literal">int mysql_stmt_execute(MYSQL_STMT *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> executes
        the prepared query associated with the statement handle. The
        currently bound parameter marker values are sent to server
        during this call, and the server replaces the markers with this
        newly supplied data.
      </p><p>
        If the statement is an <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a>,
        <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>, or
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>, the total number of
        changed, deleted, or inserted rows can be found by calling
        <a href="connectors-apis.html#mysql-stmt-affected-rows" title="20.10.7.1. mysql_stmt_affected_rows()"><code class="literal">mysql_stmt_affected_rows()</code></a>. If
        this is a statement such as
        <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> that generates a result
        set, you must call
        <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> to fetch the
        data prior to calling any other functions that result in query
        processing. For more information on how to fetch the results,
        refer to <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()">Section 20.10.7.11, “<code class="literal">mysql_stmt_fetch()</code>”</a>.
      </p><p>
        For statements that generate a result set, you can request that
        <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> open a
        cursor for the statement by calling
        <a href="connectors-apis.html#mysql-stmt-attr-set" title="20.10.7.3. mysql_stmt_attr_set()"><code class="literal">mysql_stmt_attr_set()</code></a> before
        executing the statement. If you execute a statement multiple
        times, <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>
        closes any open cursor before opening a new one.
      </p><p>
        As of MySQL 6.0.6, metadata changes to tables or views referred
        to by prepared statements are detected and cause automatic
        repreparation of the statement when it is next executed. For
        more information, see <a href="sql-syntax.html#statement-repreparation" title="12.7.4. Automatic Prepared Statement Repreparation">Section 12.7.4, “Automatic Prepared Statement Repreparation”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if execution was successful. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        The following example demonstrates how to create and populate a
        table using <a href="connectors-apis.html#mysql-stmt-init" title="20.10.7.15. mysql_stmt_init()"><code class="literal">mysql_stmt_init()</code></a>,
        <a href="connectors-apis.html#mysql-stmt-prepare" title="20.10.7.21. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a>,
        <a href="connectors-apis.html#mysql-stmt-param-count" title="20.10.7.19. mysql_stmt_param_count()"><code class="literal">mysql_stmt_param_count()</code></a>,
        <a href="connectors-apis.html#mysql-stmt-bind-param" title="20.10.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a>,
        <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>, and
        <a href="connectors-apis.html#mysql-stmt-affected-rows" title="20.10.7.1. mysql_stmt_affected_rows()"><code class="literal">mysql_stmt_affected_rows()</code></a>. The
        <code class="literal">mysql</code> variable is assumed to be a valid
        connection handle.
      </p><pre class="programlisting">#define STRING_SIZE 50

#define DROP_SAMPLE_TABLE "DROP TABLE IF EXISTS test_table"
#define CREATE_SAMPLE_TABLE "CREATE TABLE test_table(col1 INT,\
                                                 col2 VARCHAR(40),\
                                                 col3 SMALLINT,\
                                                 col4 TIMESTAMP)"
#define INSERT_SAMPLE "INSERT INTO \ 
                       test_table(col1,col2,col3) \
                       VALUES(?,?,?)"

MYSQL_STMT    *stmt;
MYSQL_BIND    bind[3];
my_ulonglong  affected_rows;
int           param_count;
short         small_data;
int           int_data;
char          str_data[STRING_SIZE];
unsigned long str_length;
my_bool       is_null;

if (mysql_query(mysql, DROP_SAMPLE_TABLE))
{
  fprintf(stderr, " DROP TABLE failed\n");
  fprintf(stderr, " %s\n", mysql_error(mysql));
  exit(0);
}

if (mysql_query(mysql, CREATE_SAMPLE_TABLE))
{
  fprintf(stderr, " CREATE TABLE failed\n");
  fprintf(stderr, " %s\n", mysql_error(mysql));
  exit(0);
}

/* Prepare an INSERT query with 3 parameters */
/* (the TIMESTAMP column is not named; the server */
/*  sets it to the current date and time) */
stmt = mysql_stmt_init(mysql);
if (!stmt)
{
  fprintf(stderr, " mysql_stmt_init(), out of memory\n");
  exit(0);
}
if (mysql_stmt_prepare(stmt, INSERT_SAMPLE, strlen(INSERT_SAMPLE)))
{
  fprintf(stderr, " mysql_stmt_prepare(), INSERT failed\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}
fprintf(stdout, " prepare, INSERT successful\n");

/* Get the parameter count from the statement */
param_count= mysql_stmt_param_count(stmt);
fprintf(stdout, " total parameters in INSERT: %d\n", param_count);

if (param_count != 3) /* validate parameter count */
{
  fprintf(stderr, " invalid parameter count returned by MySQL\n");
  exit(0);
}

/* Bind the data for all 3 parameters */

memset(bind, 0, sizeof(bind));

/* INTEGER PARAM */
/* This is a number type, so there is no need 
   to specify buffer_length */
bind[0].buffer_type= MYSQL_TYPE_LONG;
bind[0].buffer= (char *)&amp;int_data;
bind[0].is_null= 0;
bind[0].length= 0;

/* STRING PARAM */
bind[1].buffer_type= MYSQL_TYPE_STRING;
bind[1].buffer= (char *)str_data;
bind[1].buffer_length= STRING_SIZE;
bind[1].is_null= 0;
bind[1].length= &amp;str_length;

/* SMALLINT PARAM */
bind[2].buffer_type= MYSQL_TYPE_SHORT;
bind[2].buffer= (char *)&amp;small_data;
bind[2].is_null= &amp;is_null;
bind[2].length= 0;

/* Bind the buffers */
if (mysql_stmt_bind_param(stmt, bind))
{
  fprintf(stderr, " mysql_stmt_bind_param() failed\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}

/* Specify the data values for the first row */
int_data= 10;             /* integer */
strncpy(str_data, "MySQL", STRING_SIZE); /* string  */
str_length= strlen(str_data);

/* INSERT SMALLINT data as NULL */
is_null= 1;

/* Execute the INSERT statement - 1*/
if (mysql_stmt_execute(stmt))
{
  fprintf(stderr, " mysql_stmt_execute(), 1 failed\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}

/* Get the total number of affected rows */
affected_rows= mysql_stmt_affected_rows(stmt);
fprintf(stdout, " total affected rows(insert 1): %lu\n",
                (unsigned long) affected_rows);

if (affected_rows != 1) /* validate affected rows */
{
  fprintf(stderr, " invalid affected rows by MySQL\n");
  exit(0);
}

/* Specify data values for second row, 
   then re-execute the statement */
int_data= 1000;
strncpy(str_data, "
        The most popular Open Source database", 
        STRING_SIZE);
str_length= strlen(str_data);
small_data= 1000;         /* smallint */
is_null= 0;               /* reset */

/* Execute the INSERT statement - 2*/
if (mysql_stmt_execute(stmt))
{
  fprintf(stderr, " mysql_stmt_execute, 2 failed\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}

/* Get the total rows affected */
affected_rows= mysql_stmt_affected_rows(stmt);
fprintf(stdout, " total affected rows(insert 2): %lu\n",
                (unsigned long) affected_rows);

if (affected_rows != 1) /* validate affected rows */
{
  fprintf(stderr, " invalid affected rows by MySQL\n");
  exit(0);
}

/* Close the statement */
if (mysql_stmt_close(stmt))
{
  fprintf(stderr, " failed while closing the statement\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For complete examples on the use of prepared statement
          functions, refer to the file
          <code class="filename">tests/mysql_client_test.c</code>. This file can
          be obtained from a MySQL source distribution or from the
          Bazaar source repository.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-fetch"></a>20.10.7.11. <code class="literal">mysql_stmt_fetch()</code></h4></div></div></div><a class="indexterm" name="id3700708"></a><p>
        <code class="literal">int mysql_stmt_fetch(MYSQL_STMT *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> returns the
        next row in the result set. It can be called only while the
        result set exists; that is, after a call to
        <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> for a
        statement such as <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> that
        creates a result set.
      </p><p>
        <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> returns row
        data using the buffers bound by
        <a href="connectors-apis.html#mysql-stmt-bind-result" title="20.10.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a>. It
        returns the data in those buffers for all the columns in the
        current row set and the lengths are returned to the
        <code class="literal">length</code> pointer. All columns must be bound by
        the application before it calls
        <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>.
      </p><p>
        By default, result sets are fetched unbuffered a row at a time
        from the server. To buffer the entire result set on the client,
        call <a href="connectors-apis.html#mysql-stmt-store-result" title="20.10.7.28. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>
        after binding the data buffers and before caling
        <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>.
      </p><p>
        If a fetched data value is a <code class="literal">NULL</code> value, the
        <code class="literal">*is_null</code> value of the corresponding
        <code class="literal">MYSQL_BIND</code> structure contains TRUE (1).
        Otherwise, the data and its length are returned in the
        <code class="literal">*buffer</code> and <code class="literal">*length</code>
        elements based on the buffer type specified by the application.
        Each numeric and temporal type has a fixed length, as listed in
        the following table. The length of the string types depends on
        the length of the actual data value, as indicated by
        <code class="literal">data_length</code>.
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Type</strong></span></td><td><span class="bold"><strong>Length</strong></span></td></tr><tr><td><code class="literal">MYSQL_TYPE_TINY</code></td><td>1</td></tr><tr><td><code class="literal">MYSQL_TYPE_SHORT</code></td><td>2</td></tr><tr><td><code class="literal">MYSQL_TYPE_LONG</code></td><td>4</td></tr><tr><td><code class="literal">MYSQL_TYPE_LONGLONG</code></td><td>8</td></tr><tr><td><code class="literal">MYSQL_TYPE_FLOAT</code></td><td>4</td></tr><tr><td><code class="literal">MYSQL_TYPE_DOUBLE</code></td><td>8</td></tr><tr><td><code class="literal">MYSQL_TYPE_TIME</code></td><td><code class="literal">sizeof(MYSQL_TIME)</code></td></tr><tr><td><code class="literal">MYSQL_TYPE_DATE</code></td><td><code class="literal">sizeof(MYSQL_TIME)</code></td></tr><tr><td><code class="literal">MYSQL_TYPE_DATETIME</code></td><td><code class="literal">sizeof(MYSQL_TIME)</code></td></tr><tr><td><code class="literal">MYSQL_TYPE_STRING</code></td><td><code class="literal">data length</code></td></tr><tr><td><code class="literal">MYSQL_TYPE_BLOB</code></td><td><code class="literal">data_length</code></td></tr></tbody></table></div><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Return Value</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td>0</td><td>Successful, the data has been fetched to application data buffers.</td></tr><tr><td>1</td><td>Error occurred. Error code and message can be obtained by calling
                <a href="connectors-apis.html#mysql-stmt-errno" title="20.10.7.8. mysql_stmt_errno()"><code class="literal">mysql_stmt_errno()</code></a> and
                <a href="connectors-apis.html#mysql-stmt-error" title="20.10.7.9. mysql_stmt_error()"><code class="literal">mysql_stmt_error()</code></a>.</td></tr><tr><td><code class="literal">MYSQL_NO_DATA</code></td><td>No more rows/data exists</td></tr><tr><td><code class="literal">MYSQL_DATA_TRUNCATED</code></td><td>Data truncation occurred</td></tr></tbody></table></div><p>
        <code class="literal">MYSQL_DATA_TRUNCATED</code> is returned when
        truncation reporting is enabled. (Reporting is enabled by
        default, but can be controlled with
        <a href="connectors-apis.html#mysql-options" title="20.10.3.49. mysql_options()"><code class="literal">mysql_options()</code></a>.) To determine
        which parameters were truncated when this value is returned,
        check the <code class="literal">error</code> members of the
        <code class="literal">MYSQL_BIND</code> parameter structures.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li><li><p>
            <code class="literal">CR_UNSUPPORTED_PARAM_TYPE</code>
          </p><p>
            The buffer type is <code class="literal">MYSQL_TYPE_DATE</code>,
            <code class="literal">MYSQL_TYPE_TIME</code>,
            <code class="literal">MYSQL_TYPE_DATETIME</code>, or
            <code class="literal">MYSQL_TYPE_TIMESTAMP</code>, but the data type
            is not <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATE</code></a>,
            <a href="data-types.html#time" title="10.3.2. The TIME Type"><code class="literal">TIME</code></a>,
            <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a>, or
            <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a>.
          </p></li><li><p>
            All other unsupported conversion errors are returned from
            <a href="connectors-apis.html#mysql-stmt-bind-result" title="20.10.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a>.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        The following example demonstrates how to fetch data from a
        table using
        <a href="connectors-apis.html#mysql-stmt-result-metadata" title="20.10.7.23. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a>,
        <a href="connectors-apis.html#mysql-stmt-bind-result" title="20.10.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a>, and
        <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>. (This
        example expects to retrieve the two rows inserted by the example
        shown in <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()">Section 20.10.7.10, “<code class="literal">mysql_stmt_execute()</code>”</a>.) The
        <code class="literal">mysql</code> variable is assumed to be a valid
        connection handle.
      </p><pre class="programlisting">#define STRING_SIZE 50

#define SELECT_SAMPLE "SELECT col1, col2, col3, col4 \
                       FROM test_table"

MYSQL_STMT    *stmt;
MYSQL_BIND    bind[4];
MYSQL_RES     *prepare_meta_result;
MYSQL_TIME    ts;
unsigned long length[4];
int           param_count, column_count, row_count;
short         small_data;
int           int_data;
char          str_data[STRING_SIZE];
my_bool       is_null[4];
my_bool       error[4];

/* Prepare a SELECT query to fetch data from test_table */
stmt = mysql_stmt_init(mysql);
if (!stmt)
{
  fprintf(stderr, " mysql_stmt_init(), out of memory\n");
  exit(0);
}
if (mysql_stmt_prepare(stmt, SELECT_SAMPLE, strlen(SELECT_SAMPLE)))
{
  fprintf(stderr, " mysql_stmt_prepare(), SELECT failed\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}
fprintf(stdout, " prepare, SELECT successful\n");

/* Get the parameter count from the statement */
param_count= mysql_stmt_param_count(stmt);
fprintf(stdout, " total parameters in SELECT: %d\n", param_count);

if (param_count != 0) /* validate parameter count */
{
  fprintf(stderr, " invalid parameter count returned by MySQL\n");
  exit(0);
}

/* Fetch result set meta information */
prepare_meta_result = mysql_stmt_result_metadata(stmt);
if (!prepare_meta_result)
{
  fprintf(stderr,
         " mysql_stmt_result_metadata(), \ 
           returned no meta information\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}

/* Get total columns in the query */
column_count= mysql_num_fields(prepare_meta_result);
fprintf(stdout, 
        " total columns in SELECT statement: %d\n", 
        column_count);

if (column_count != 4) /* validate column count */
{
  fprintf(stderr, " invalid column count returned by MySQL\n");
  exit(0);
}

/* Execute the SELECT query */
if (mysql_stmt_execute(stmt))
{
  fprintf(stderr, " mysql_stmt_execute(), failed\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}

/* Bind the result buffers for all 4 columns before fetching them */

memset(bind, 0, sizeof(bind));

/* INTEGER COLUMN */
bind[0].buffer_type= MYSQL_TYPE_LONG;
bind[0].buffer= (char *)&amp;int_data;
bind[0].is_null= &amp;is_null[0];
bind[0].length= &amp;length[0];
bind[0].error= &amp;error[0];

/* STRING COLUMN */
bind[1].buffer_type= MYSQL_TYPE_STRING;
bind[1].buffer= (char *)str_data;
bind[1].buffer_length= STRING_SIZE;
bind[1].is_null= &amp;is_null[1];
bind[1].length= &amp;length[1];
bind[1].error= &amp;error[1];

/* SMALLINT COLUMN */
bind[2].buffer_type= MYSQL_TYPE_SHORT;
bind[2].buffer= (char *)&amp;small_data;
bind[2].is_null= &amp;is_null[2];
bind[2].length= &amp;length[2];
bind[2].error= &amp;error[2];

/* TIMESTAMP COLUMN */
bind[3].buffer_type= MYSQL_TYPE_TIMESTAMP;
bind[3].buffer= (char *)&amp;ts;
bind[3].is_null= &amp;is_null[3];
bind[3].length= &amp;length[3];
bind[3].error= &amp;error[3];

/* Bind the result buffers */
if (mysql_stmt_bind_result(stmt, bind))
{
  fprintf(stderr, " mysql_stmt_bind_result() failed\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}

/* Now buffer all results to client (optional step) */
if (mysql_stmt_store_result(stmt))
{
  fprintf(stderr, " mysql_stmt_store_result() failed\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}

/* Fetch all rows */
row_count= 0;
fprintf(stdout, "Fetching results ...\n");
while (!mysql_stmt_fetch(stmt))
{
  row_count++;
  fprintf(stdout, "  row %d\n", row_count);

  /* column 1 */
  fprintf(stdout, "   column1 (integer)  : ");
  if (is_null[0])
    fprintf(stdout, " NULL\n");
  else
    fprintf(stdout, " %d(%ld)\n", int_data, length[0]);

  /* column 2 */
  fprintf(stdout, "   column2 (string)   : ");
  if (is_null[1])
    fprintf(stdout, " NULL\n");
  else
    fprintf(stdout, " %s(%ld)\n", str_data, length[1]);

  /* column 3 */
  fprintf(stdout, "   column3 (smallint) : ");
  if (is_null[2])
    fprintf(stdout, " NULL\n");
  else
    fprintf(stdout, " %d(%ld)\n", small_data, length[2]);

  /* column 4 */
  fprintf(stdout, "   column4 (timestamp): ");
  if (is_null[3])
    fprintf(stdout, " NULL\n");
  else
    fprintf(stdout, " %04d-%02d-%02d %02d:%02d:%02d (%ld)\n",
                     ts.year, ts.month, ts.day,
                     ts.hour, ts.minute, ts.second,
                     length[3]);
  fprintf(stdout, "\n");
}

/* Validate rows fetched */
fprintf(stdout, " total rows fetched: %d\n", row_count);
if (row_count != 2)
{
  fprintf(stderr, " MySQL failed to return all rows\n");
  exit(0);
}

/* Free the prepared result metadata */
mysql_free_result(prepare_meta_result);


/* Close the statement */
if (mysql_stmt_close(stmt))
{
  fprintf(stderr, " failed while closing the statement\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}
</pre><p>
        In some cases you might want to determine the length of a column
        value before fetching it with
        <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>. For example,
        the value might be a long string or
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> value for which you want to
        know how much space must be allocated. To accomplish this, you
        can use these strategies:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Before invoking
            <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> to
            retrieve individual rows, invoke
            <a href="connectors-apis.html#mysql-stmt-store-result" title="20.10.7.28. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a> to
            buffer the entire result on the client side. Then the
            maximal length of column values will be indicated by the
            <code class="literal">max_length</code> member of the result set
            metadata returned by
            <a href="connectors-apis.html#mysql-stmt-result-metadata" title="20.10.7.23. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a>.
            This strategy requires that you pass
            <code class="literal">STMT_ATTR_UPDATE_MAX_LENGTH</code> to
            <a href="connectors-apis.html#mysql-stmt-attr-set" title="20.10.7.3. mysql_stmt_attr_set()"><code class="literal">mysql_stmt_attr_set()</code></a> or the
            <code class="literal">max_length</code> values will not be calculated.
          </p></li><li><p>
            Invoke <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>
            with a zero-length buffer for the column in question and a
            pointer in which the real length can be stored. Then use the
            real length with
            <a href="connectors-apis.html#mysql-stmt-fetch-column" title="20.10.7.12. mysql_stmt_fetch_column()"><code class="literal">mysql_stmt_fetch_column()</code></a>.
          </p><pre class="programlisting">real_length= 0;

bind[0].buffer= 0;
bind[0].buffer_length= 0;
bind[0].length= &amp;real_length
mysql_stmt_bind_result(stmt, bind);

mysql_stmt_fetch(stmt);
if (real_length &gt; 0)
{
  data= malloc(real_length);
  bind[0].buffer= data;
  bind[0].buffer_length= real_length;
  mysql_stmt_fetch_column(stmt, bind, 0, 0);
}
</pre></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-fetch-column"></a>20.10.7.12. <code class="literal">mysql_stmt_fetch_column()</code></h4></div></div></div><a class="indexterm" name="id3701794"></a><p>
        <code class="literal">int mysql_stmt_fetch_column(MYSQL_STMT *stmt,
        MYSQL_BIND *bind, unsigned int column, unsigned long
        offset)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Fetch one column from the current result set row.
        <code class="literal">bind</code> provides the buffer where data should be
        placed. It should be set up the same way as for
        <a href="connectors-apis.html#mysql-stmt-bind-result" title="20.10.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a>.
        <code class="literal">column</code> indicates which column to fetch. The
        first column is numbered 0. <code class="literal">offset</code> is the
        offset within the data value at which to begin retrieving data.
        This can be used for fetching the data value in pieces. The
        beginning of the value is offset 0.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the value was fetched successfully. Non-zero if an error
        occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_INVALID_PARAMETER_NO</code>
          </p><p>
            Invalid column number.
          </p></li><li><p>
            <code class="literal">CR_NO_DATA</code>
          </p><p>
            The end of the result set has already been reached.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-field-count"></a>20.10.7.13. <code class="literal">mysql_stmt_field_count()</code></h4></div></div></div><a class="indexterm" name="id3701929"></a><p>
        <code class="literal">unsigned int mysql_stmt_field_count(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the number of columns for the most recent statement for
        the statement handler. This value is zero for statements such as
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> or
        <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> that do not produce result
        sets.
      </p><p>
        <a href="connectors-apis.html#mysql-stmt-field-count" title="20.10.7.13. mysql_stmt_field_count()"><code class="literal">mysql_stmt_field_count()</code></a> can be
        called after you have prepared a statement by invoking
        <a href="connectors-apis.html#mysql-stmt-prepare" title="20.10.7.21. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An unsigned integer representing the number of columns in a
        result set.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-free-result"></a>20.10.7.14. <code class="literal">mysql_stmt_free_result()</code></h4></div></div></div><a class="indexterm" name="id3702035"></a><p>
        <code class="literal">my_bool mysql_stmt_free_result(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Releases memory associated with the result set produced by
        execution of the prepared statement. If there is a cursor open
        for the statement,
        <a href="connectors-apis.html#mysql-stmt-free-result" title="20.10.7.14. mysql_stmt_free_result()"><code class="literal">mysql_stmt_free_result()</code></a> closes
        it.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the result set was freed successfully. Non-zero if an
        error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-init"></a>20.10.7.15. <code class="literal">mysql_stmt_init()</code></h4></div></div></div><a class="indexterm" name="id3702110"></a><p>
        <code class="literal">MYSQL_STMT *mysql_stmt_init(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Create a <code class="literal">MYSQL_STMT</code> handle. The handle should
        be freed with <a href="connectors-apis.html#mysql-stmt-close" title="20.10.7.6. mysql_stmt_close()"><code class="literal">mysql_stmt_close(MYSQL_STMT
        *)</code></a>.
      </p><p>
        <span class="bold"><strong>Return values</strong></span>
      </p><p>
        A pointer to a <code class="literal">MYSQL_STMT</code> structure in case
        of success. <code class="literal">NULL</code> if out of memory.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-insert-id"></a>20.10.7.16. <code class="literal">mysql_stmt_insert_id()</code></h4></div></div></div><a class="indexterm" name="id3702220"></a><p>
        <code class="literal">my_ulonglong mysql_stmt_insert_id(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the value generated for an
        <code class="literal">AUTO_INCREMENT</code> column by the prepared
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> or
        <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement. Use this
        function after you have executed a prepared
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statement on a table which
        contains an <code class="literal">AUTO_INCREMENT</code> field.
      </p><p>
        See <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()">Section 20.10.3.37, “<code class="literal">mysql_insert_id()</code>”</a>, for more information.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Value for <code class="literal">AUTO_INCREMENT</code> column which was
        automatically generated or explicitly set during execution of
        prepared statement, or value generated by
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>
        function. Return value is undefined if statement does not set
        <code class="literal">AUTO_INCREMENT</code> value.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-next-result"></a>20.10.7.17. <code class="literal">mysql_stmt_next_result()</code></h4></div></div></div><a class="indexterm" name="id3702369"></a><p>
        <code class="literal">int mysql_stmt_next_result(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is used when you use prepared
        <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statements to execute stored
        procedures, which can return multiple result sets. Use a loop
        that calls
        <a href="connectors-apis.html#mysql-stmt-next-result" title="20.10.7.17. mysql_stmt_next_result()"><code class="literal">mysql_stmt_next_result()</code></a> to
        determine whether there are more results. If a procedure has
        <code class="literal">OUT</code> or <code class="literal">INOUT</code> parameters,
        their values will be returned as a single-row result set
        following any other result sets. The values will appear in the
        order in which they are declared in the procedure parameter
        list.
      </p><p>
        <a href="connectors-apis.html#mysql-stmt-next-result" title="20.10.7.17. mysql_stmt_next_result()"><code class="literal">mysql_stmt_next_result()</code></a> returns
        a status to indicate whether more results exist. If
        <a href="connectors-apis.html#mysql-stmt-next-result" title="20.10.7.17. mysql_stmt_next_result()"><code class="literal">mysql_stmt_next_result()</code></a> returns
        an error, there are no more results.
      </p><p>
        Before each call to
        <a href="connectors-apis.html#mysql-stmt-next-result" title="20.10.7.17. mysql_stmt_next_result()"><code class="literal">mysql_stmt_next_result()</code></a>, you
        must call
        <a href="connectors-apis.html#mysql-stmt-free-result" title="20.10.7.14. mysql_stmt_free_result()"><code class="literal">mysql_stmt_free_result()</code></a> for the
        current result if it produced a result set (rather than just a
        result status).
      </p><p>
        After calling
        <a href="connectors-apis.html#mysql-stmt-next-result" title="20.10.7.17. mysql_stmt_next_result()"><code class="literal">mysql_stmt_next_result()</code></a> the
        state of the connection is as if you had called
        <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>. This means
        that you can call
        <a href="connectors-apis.html#mysql-stmt-bind-result" title="20.10.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a>,
        <a href="connectors-apis.html#mysql-stmt-affected-rows" title="20.10.7.1. mysql_stmt_affected_rows()"><code class="literal">mysql_stmt_affected_rows()</code></a>, and
        so forth.
      </p><p>
        It is also possible to test whether there are more results by
        calling <a href="connectors-apis.html#mysql-more-results" title="20.10.3.45. mysql_more_results()"><code class="literal">mysql_more_results()</code></a>.
        However, this function does not change the connection state, so
        if it returns true, you must still call
        <a href="connectors-apis.html#mysql-stmt-next-result" title="20.10.7.17. mysql_stmt_next_result()"><code class="literal">mysql_stmt_next_result()</code></a> to
        advance to the next result.
      </p><p>
        For an example that shows how to use
        <a href="connectors-apis.html#mysql-stmt-next-result" title="20.10.7.17. mysql_stmt_next_result()"><code class="literal">mysql_stmt_next_result()</code></a>, see
        <a href="connectors-apis.html#c-api-prepared-call-statements" title="20.10.15. C API Support for Prepared CALL
      Statements">Section 20.10.15, “C API Support for Prepared <code class="literal">CALL</code>
      Statements”</a>.
      </p><p>
        <a href="connectors-apis.html#mysql-stmt-next-result" title="20.10.7.17. mysql_stmt_next_result()"><code class="literal">mysql_stmt_next_result()</code></a> was
        added in MySQL 6.0.8.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Return Value</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td>0</td><td>Successful and there are more results</td></tr><tr><td>-1</td><td>Successful and there are no more results</td></tr><tr><td>&gt;0</td><td>An error occurred</td></tr></tbody></table></div><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-num-rows"></a>20.10.7.18. <code class="literal">mysql_stmt_num_rows()</code></h4></div></div></div><a class="indexterm" name="id3702730"></a><p>
        <code class="literal">my_ulonglong mysql_stmt_num_rows(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the number of rows in the result set.
      </p><p>
        The use of <a href="connectors-apis.html#mysql-stmt-num-rows" title="20.10.7.18. mysql_stmt_num_rows()"><code class="literal">mysql_stmt_num_rows()</code></a>
        depends on whether you used
        <a href="connectors-apis.html#mysql-stmt-store-result" title="20.10.7.28. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a> to
        buffer the entire result set in the statement handle.
      </p><p>
        If you use
        <a href="connectors-apis.html#mysql-stmt-store-result" title="20.10.7.28. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>,
        <a href="connectors-apis.html#mysql-stmt-num-rows" title="20.10.7.18. mysql_stmt_num_rows()"><code class="literal">mysql_stmt_num_rows()</code></a> may be
        called immediately. Otherwise, the row count is unavailable
        unless you count the rows as you fetch them.
      </p><p>
        <a href="connectors-apis.html#mysql-stmt-num-rows" title="20.10.7.18. mysql_stmt_num_rows()"><code class="literal">mysql_stmt_num_rows()</code></a> is
        intended for use with statements that return a result set, such
        as <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>. For statements such as
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>,
        <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a>, or
        <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>, the number of affected
        rows can be obtained with
        <a href="connectors-apis.html#mysql-stmt-affected-rows" title="20.10.7.1. mysql_stmt_affected_rows()"><code class="literal">mysql_stmt_affected_rows()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The number of rows in the result set.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-param-count"></a>20.10.7.19. <code class="literal">mysql_stmt_param_count()</code></h4></div></div></div><a class="indexterm" name="id3702890"></a><p>
        <code class="literal">unsigned long mysql_stmt_param_count(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the number of parameter markers present in the prepared
        statement.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An unsigned long integer representing the number of parameters
        in a statement.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        For the usage of
        <a href="connectors-apis.html#mysql-stmt-param-count" title="20.10.7.19. mysql_stmt_param_count()"><code class="literal">mysql_stmt_param_count()</code></a>, refer
        to the Example from <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()">Section 20.10.7.10, “<code class="literal">mysql_stmt_execute()</code>”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-param-metadata"></a>20.10.7.20. <code class="literal">mysql_stmt_param_metadata()</code></h4></div></div></div><a class="indexterm" name="id3702986"></a><p>
        <code class="literal">MYSQL_RES *mysql_stmt_param_metadata(MYSQL_STMT
        *stmt)</code>
      </p><p>
        This function currently does nothing.
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-prepare"></a>20.10.7.21. <code class="literal">mysql_stmt_prepare()</code></h4></div></div></div><a class="indexterm" name="id3703046"></a><p>
        <code class="literal">int mysql_stmt_prepare(MYSQL_STMT *stmt, const char
        *stmt_str, unsigned long length)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Given the statement handle returned by
        <a href="connectors-apis.html#mysql-stmt-init" title="20.10.7.15. mysql_stmt_init()"><code class="literal">mysql_stmt_init()</code></a>, prepares the
        SQL statement pointed to by the string
        <code class="literal">stmt_str</code> and returns a status value. The
        string length should be given by the <code class="literal">length</code>
        argument. The string must consist of a single SQL statement. You
        should not add a terminating semicolon
        (“<span class="quote"><code class="literal">;</code></span>”) or <code class="literal">\g</code>
        to the statement.
      </p><p>
        The application can include one or more parameter markers in the
        SQL statement by embedding question mark
        (“<span class="quote"><code class="literal">?</code></span>”) characters into the SQL
        string at the appropriate positions.
      </p><p>
        The markers are legal only in certain places in SQL statements.
        For example, they are allowed in the <code class="literal">VALUES()</code>
        list of an <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statement (to
        specify column values for a row), or in a comparison with a
        column in a <code class="literal">WHERE</code> clause to specify a
        comparison value. However, they are not allowed for identifiers
        (such as table or column names), or to specify both operands of
        a binary operator such as the <code class="literal">=</code> equal sign.
        The latter restriction is necessary because it would be
        impossible to determine the parameter type. In general,
        parameters are legal only in Data Manipulation Language (DML)
        statements, and not in Data Definition Language (DDL)
        statements.
      </p><p>
        The parameter markers must be bound to application variables
        using <a href="connectors-apis.html#mysql-stmt-bind-param" title="20.10.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a>
        before executing the statement.
      </p><p>
        As of MySQL 6.0.6, metadata changes to tables or views referred
        to by prepared statements are detected and cause automatic
        repreparation of the statement when it is next executed. For
        more information, see <a href="sql-syntax.html#statement-repreparation" title="12.7.4. Automatic Prepared Statement Repreparation">Section 12.7.4, “Automatic Prepared Statement Repreparation”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the statement was prepared successfully. Non-zero if an
        error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div><p>
        If the prepare operation was unsuccessful (that is,
        <a href="connectors-apis.html#mysql-stmt-prepare" title="20.10.7.21. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> returns
        non-zero), the error message can be obtained by calling
        <a href="connectors-apis.html#mysql-stmt-error" title="20.10.7.9. mysql_stmt_error()"><code class="literal">mysql_stmt_error()</code></a>.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        For the usage of
        <a href="connectors-apis.html#mysql-stmt-prepare" title="20.10.7.21. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a>, refer to
        the Example from <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()">Section 20.10.7.10, “<code class="literal">mysql_stmt_execute()</code>”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-reset"></a>20.10.7.22. <code class="literal">mysql_stmt_reset()</code></h4></div></div></div><a class="indexterm" name="id3703360"></a><p>
        <code class="literal">my_bool mysql_stmt_reset(MYSQL_STMT *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Reset the prepared statement on the client and server to state
        after prepare. This is mainly used to reset data sent with
        <a href="connectors-apis.html#mysql-stmt-send-long-data" title="20.10.7.26. mysql_stmt_send_long_data()"><code class="literal">mysql_stmt_send_long_data()</code></a>. Any
        open cursor for the statement is closed.
      </p><p>
        To re-prepare the statement with another query, use
        <a href="connectors-apis.html#mysql-stmt-prepare" title="20.10.7.21. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the statement was reset successfully. Non-zero if an
        error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-result-metadata"></a>20.10.7.23. <code class="literal">mysql_stmt_result_metadata()</code></h4></div></div></div><a class="indexterm" name="id3703518"></a><p>
        <code class="literal">MYSQL_RES *mysql_stmt_result_metadata(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        If a statement passed to
        <a href="connectors-apis.html#mysql-stmt-prepare" title="20.10.7.21. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> is one that
        produces a result set,
        <a href="connectors-apis.html#mysql-stmt-result-metadata" title="20.10.7.23. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a>
        returns the result set metadata in the form of a pointer to a
        <code class="literal">MYSQL_RES</code> structure that can be used to
        process the meta information such as total number of fields and
        individual field information. This result set pointer can be
        passed as an argument to any of the field-based API functions
        that process result set metadata, such as:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <a href="connectors-apis.html#mysql-num-fields" title="20.10.3.47. mysql_num_fields()"><code class="literal">mysql_num_fields()</code></a>
          </p></li><li><p>
            <a href="connectors-apis.html#mysql-fetch-field" title="20.10.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a>
          </p></li><li><p>
            <a href="connectors-apis.html#mysql-fetch-field-direct" title="20.10.3.18. mysql_fetch_field_direct()"><code class="literal">mysql_fetch_field_direct()</code></a>
          </p></li><li><p>
            <a href="connectors-apis.html#mysql-fetch-fields" title="20.10.3.19. mysql_fetch_fields()"><code class="literal">mysql_fetch_fields()</code></a>
          </p></li><li><p>
            <a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a>
          </p></li><li><p>
            <a href="connectors-apis.html#mysql-field-seek" title="20.10.3.23. mysql_field_seek()"><code class="literal">mysql_field_seek()</code></a>
          </p></li><li><p>
            <a href="connectors-apis.html#mysql-field-tell" title="20.10.3.24. mysql_field_tell()"><code class="literal">mysql_field_tell()</code></a>
          </p></li><li><p>
            <a href="connectors-apis.html#mysql-free-result" title="20.10.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a>
          </p></li></ul></div><p>
        The result set structure should be freed when you are done with
        it, which you can do by passing it to
        <a href="connectors-apis.html#mysql-free-result" title="20.10.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a>. This is
        similar to the way you free a result set obtained from a call to
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>.
      </p><p>
        The result set returned by
        <a href="connectors-apis.html#mysql-stmt-result-metadata" title="20.10.7.23. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a>
        contains only metadata. It does not contain any row results. The
        rows are obtained by using the statement handle with
        <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A <code class="literal">MYSQL_RES</code> result structure.
        <code class="literal">NULL</code> if no meta information exists for the
        prepared query.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        For the usage of
        <a href="connectors-apis.html#mysql-stmt-result-metadata" title="20.10.7.23. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a>,
        refer to the Example from <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()">Section 20.10.7.11, “<code class="literal">mysql_stmt_fetch()</code>”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-row-seek"></a>20.10.7.24. <code class="literal">mysql_stmt_row_seek()</code></h4></div></div></div><a class="indexterm" name="id3703839"></a><p>
        <code class="literal">MYSQL_ROW_OFFSET mysql_stmt_row_seek(MYSQL_STMT *stmt,
        MYSQL_ROW_OFFSET offset)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Sets the row cursor to an arbitrary row in a statement result
        set. The <code class="literal">offset</code> value is a row offset that
        should be a value returned from
        <a href="connectors-apis.html#mysql-stmt-row-tell" title="20.10.7.25. mysql_stmt_row_tell()"><code class="literal">mysql_stmt_row_tell()</code></a> or from
        <a href="connectors-apis.html#mysql-stmt-row-seek" title="20.10.7.24. mysql_stmt_row_seek()"><code class="literal">mysql_stmt_row_seek()</code></a>. This
        value is not a row number; if you want to seek to a row within a
        result set by number, use
        <a href="connectors-apis.html#mysql-stmt-data-seek" title="20.10.7.7. mysql_stmt_data_seek()"><code class="literal">mysql_stmt_data_seek()</code></a> instead.
      </p><p>
        This function requires that the result set structure contains
        the entire result of the query, so
        <a href="connectors-apis.html#mysql-stmt-row-seek" title="20.10.7.24. mysql_stmt_row_seek()"><code class="literal">mysql_stmt_row_seek()</code></a> may be
        used only in conjunction with
        <a href="connectors-apis.html#mysql-stmt-store-result" title="20.10.7.28. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The previous value of the row cursor. This value may be passed
        to a subsequent call to
        <a href="connectors-apis.html#mysql-stmt-row-seek" title="20.10.7.24. mysql_stmt_row_seek()"><code class="literal">mysql_stmt_row_seek()</code></a>.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-row-tell"></a>20.10.7.25. <code class="literal">mysql_stmt_row_tell()</code></h4></div></div></div><a class="indexterm" name="id3703970"></a><p>
        <code class="literal">MYSQL_ROW_OFFSET mysql_stmt_row_tell(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the current position of the row cursor for the last
        <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>. This value
        can be used as an argument to
        <a href="connectors-apis.html#mysql-stmt-row-seek" title="20.10.7.24. mysql_stmt_row_seek()"><code class="literal">mysql_stmt_row_seek()</code></a>.
      </p><p>
        You should use
        <a href="connectors-apis.html#mysql-stmt-row-tell" title="20.10.7.25. mysql_stmt_row_tell()"><code class="literal">mysql_stmt_row_tell()</code></a> only after
        <a href="connectors-apis.html#mysql-stmt-store-result" title="20.10.7.28. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The current offset of the row cursor.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-send-long-data"></a>20.10.7.26. <code class="literal">mysql_stmt_send_long_data()</code></h4></div></div></div><a class="indexterm" name="id3704074"></a><p>
        <code class="literal">my_bool mysql_stmt_send_long_data(MYSQL_STMT *stmt,
        unsigned int parameter_number, const char *data, unsigned long
        length)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Allows an application to send parameter data to the server in
        pieces (or “<span class="quote">chunks</span>”). Call this function after
        <a href="connectors-apis.html#mysql-stmt-bind-param" title="20.10.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a> and
        before <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>. It
        can be called multiple times to send the parts of a character or
        binary data value for a column, which must be one of the
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> or
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> data types.
      </p><p>
        <code class="literal">parameter_number</code> indicates which parameter to
        associate the data with. Parameters are numbered beginning with
        0. <code class="literal">data</code> is a pointer to a buffer containing
        data to be sent, and <code class="literal">length</code> indicates the
        number of bytes in the buffer.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The next <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>
          call ignores the bind buffer for all parameters that have been
          used with
          <a href="connectors-apis.html#mysql-stmt-send-long-data" title="20.10.7.26. mysql_stmt_send_long_data()"><code class="literal">mysql_stmt_send_long_data()</code></a>
          since last
          <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> or
          <a href="connectors-apis.html#mysql-stmt-reset" title="20.10.7.22. mysql_stmt_reset()"><code class="literal">mysql_stmt_reset()</code></a>.
        </p></div><p>
        If you want to reset/forget the sent data, you can do it with
        <a href="connectors-apis.html#mysql-stmt-reset" title="20.10.7.22. mysql_stmt_reset()"><code class="literal">mysql_stmt_reset()</code></a>. See
        <a href="connectors-apis.html#mysql-stmt-reset" title="20.10.7.22. mysql_stmt_reset()">Section 20.10.7.22, “<code class="literal">mysql_stmt_reset()</code>”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the data is sent successfully to server. Non-zero if an
        error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_INVALID_BUFFER_USE</code>
          </p><p>
            The parameter does not have a string or binary type.
          </p></li><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        The following example demonstrates how to send the data for a
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> column in chunks. It inserts
        the data value <code class="literal">'MySQL - The most popular Open Source
        database'</code> into the <code class="literal">text_column</code>
        column. The <code class="literal">mysql</code> variable is assumed to be a
        valid connection handle.
      </p><pre class="programlisting">#define INSERT_QUERY "INSERT INTO \
                      test_long_data(text_column) VALUES(?)"

MYSQL_BIND bind[1];
long       length;

stmt = mysql_stmt_init(mysql);
if (!stmt)
{
  fprintf(stderr, " mysql_stmt_init(), out of memory\n");
  exit(0);
}
if (mysql_stmt_prepare(stmt, INSERT_QUERY, strlen(INSERT_QUERY)))
{
  fprintf(stderr, "\n mysql_stmt_prepare(), INSERT failed");
  fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
  exit(0);
}
 memset(bind, 0, sizeof(bind));
 bind[0].buffer_type= MYSQL_TYPE_STRING;
 bind[0].length= &amp;length;
 bind[0].is_null= 0;

/* Bind the buffers */
if (mysql_stmt_bind_param(stmt, bind))
{
  fprintf(stderr, "\n param bind failed");
  fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
  exit(0);
}

 /* Supply data in chunks to server */
 if (mysql_stmt_send_long_data(stmt,0,"MySQL",5))
{
  fprintf(stderr, "\n send_long_data failed");
  fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
  exit(0);
}

 /* Supply the next piece of data */
 if (mysql_stmt_send_long_data(stmt,0,
           " - The most popular Open Source database",40))
{
  fprintf(stderr, "\n send_long_data failed");
  fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
  exit(0);
}

 /* Now, execute the query */
 if (mysql_stmt_execute(stmt))
{
  fprintf(stderr, "\n mysql_stmt_execute failed");
  fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
  exit(0);
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-sqlstate"></a>20.10.7.27. <code class="literal">mysql_stmt_sqlstate()</code></h4></div></div></div><a class="indexterm" name="id3704457"></a><p>
        <code class="literal">const char *mysql_stmt_sqlstate(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        For the statement specified by <code class="literal">stmt</code>,
        <a href="connectors-apis.html#mysql-stmt-sqlstate" title="20.10.7.27. mysql_stmt_sqlstate()"><code class="literal">mysql_stmt_sqlstate()</code></a> returns a
        null-terminated string containing the SQLSTATE error code for
        the most recently invoked prepared statement API function that
        can succeed or fail. The error code consists of five characters.
        <code class="literal">"00000"</code> means “<span class="quote">no error.</span>” The
        values are specified by ANSI SQL and ODBC. For a list of
        possible values, see <a href="error-handling.html" title="Appendix B. Errors, Error Codes, and Common Problems">Appendix B, <i>Errors, Error Codes, and Common Problems</i></a>.
      </p><p>
        Note that not all MySQL errors are yet mapped to SQLSTATE codes.
        The value <code class="literal">"HY000"</code> (general error) is used for
        unmapped errors.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A null-terminated character string containing the SQLSTATE error
        code.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-store-result"></a>20.10.7.28. <code class="literal">mysql_stmt_store_result()</code></h4></div></div></div><a class="indexterm" name="id3704558"></a><p>
        <code class="literal">int mysql_stmt_store_result(MYSQL_STMT *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Result sets are produced by executing prepared statements for
        SQL statements such as <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>,
        <a href="sql-syntax.html#show" title="12.5.6. SHOW Syntax"><code class="literal">SHOW</code></a>,
        <a href="sql-syntax.html#describe" title="12.3.1. DESCRIBE Syntax"><code class="literal">DESCRIBE</code></a>, and
        <a href="sql-syntax.html#explain" title="12.3.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a>. By default, result sets
        for successfully executed prepared statements are not buffered
        on the client and
        <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> fetches them
        one at a time from the server. To cause the complete result set
        to be buffered on the client, call
        <a href="connectors-apis.html#mysql-stmt-store-result" title="20.10.7.28. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a> after
        binding data buffers with
        <a href="connectors-apis.html#mysql-stmt-bind-result" title="20.10.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a> and
        before calling
        <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> to fetch
        rows. (For an example, see <a href="connectors-apis.html#mysql-stmt-fetch" title="20.10.7.11. mysql_stmt_fetch()">Section 20.10.7.11, “<code class="literal">mysql_stmt_fetch()</code>”</a>.)
      </p><p>
        <a href="connectors-apis.html#mysql-stmt-store-result" title="20.10.7.28. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a> is
        optional for result set processing, unless you will call
        <a href="connectors-apis.html#mysql-stmt-data-seek" title="20.10.7.7. mysql_stmt_data_seek()"><code class="literal">mysql_stmt_data_seek()</code></a>,
        <a href="connectors-apis.html#mysql-stmt-row-seek" title="20.10.7.24. mysql_stmt_row_seek()"><code class="literal">mysql_stmt_row_seek()</code></a>, or
        <a href="connectors-apis.html#mysql-stmt-row-tell" title="20.10.7.25. mysql_stmt_row_tell()"><code class="literal">mysql_stmt_row_tell()</code></a>. Those
        functions require a seekable result set.
      </p><p>
        It is unnecessary to call
        <a href="connectors-apis.html#mysql-stmt-store-result" title="20.10.7.28. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a> after
        executing an SQL statement that does not produce a result set,
        but if you do, it does not harm or cause any notable performance
        problem. You can detect whether the statement produced a result
        set by checking if
        <a href="connectors-apis.html#mysql-stmt-result-metadata" title="20.10.7.23. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a>
        returns <code class="literal">NULL</code>. For more information, refer to
        <a href="connectors-apis.html#mysql-stmt-result-metadata" title="20.10.7.23. mysql_stmt_result_metadata()">Section 20.10.7.23, “<code class="literal">mysql_stmt_result_metadata()</code>”</a>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          MySQL doesn't by default calculate
          <code class="literal">MYSQL_FIELD-&gt;max_length</code> for all columns
          in <a href="connectors-apis.html#mysql-stmt-store-result" title="20.10.7.28. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>
          because calculating this would slow down
          <a href="connectors-apis.html#mysql-stmt-store-result" title="20.10.7.28. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>
          considerably and most applications don't need
          <code class="literal">max_length</code>. If you want
          <code class="literal">max_length</code> to be updated, you can call
          <a href="connectors-apis.html#mysql-stmt-attr-set" title="20.10.7.3. mysql_stmt_attr_set()"><code class="literal">mysql_stmt_attr_set(MYSQL_STMT,
          STMT_ATTR_UPDATE_MAX_LENGTH, &amp;flag)</code></a> to enable
          this. See <a href="connectors-apis.html#mysql-stmt-attr-set" title="20.10.7.3. mysql_stmt_attr_set()">Section 20.10.7.3, “<code class="literal">mysql_stmt_attr_set()</code>”</a>.
        </p></div><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the results are buffered successfully. Non-zero if an
        error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-thread-functions"></a>20.10.8. C API Threaded Function Descriptions</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#my-init">20.10.8.1. <code class="literal">my_init()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-thread-end">20.10.8.2. <code class="literal">mysql_thread_end()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-thread-init">20.10.8.3. <code class="literal">mysql_thread_init()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-thread-safe">20.10.8.4. <code class="literal">mysql_thread_safe()</code></a></span></dt></dl></div><p>
      You need to use the following functions when you want to create a
      threaded client. See <a href="connectors-apis.html#threaded-clients" title="20.10.17. How to Make a Threaded Client">Section 20.10.17, “How to Make a Threaded Client”</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="my-init"></a>20.10.8.1. <code class="literal">my_init()</code></h4></div></div></div><a class="indexterm" name="id3704928"></a><p>
        <code class="literal">void my_init(void)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        <a href="connectors-apis.html#my-init" title="20.10.8.1. my_init()"><code class="literal">my_init()</code></a> initializes some
        global variables that MySQL needs. If you are using a
        thread-safe client library, it also calls
        <a href="connectors-apis.html#mysql-thread-init" title="20.10.8.3. mysql_thread_init()"><code class="literal">mysql_thread_init()</code></a> for this
        thread.
      </p><p>
        It is necessary for <a href="connectors-apis.html#my-init" title="20.10.8.1. my_init()"><code class="literal">my_init()</code></a> to
        be called early in the initialization phase of a program's use
        of the MySQL library. However,
        <a href="connectors-apis.html#my-init" title="20.10.8.1. my_init()"><code class="literal">my_init()</code></a> is automatically
        called by <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>,
        <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a>,
        <a href="connectors-apis.html#mysql-server-init" title="20.10.9.1. mysql_server_init()"><code class="literal">mysql_server_init()</code></a>, and
        <a href="connectors-apis.html#mysql-connect" title="20.10.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a>. If you ensure
        that your program invokes one of those functions before any
        other MySQL calls, there is no need to invoke
        <a href="connectors-apis.html#my-init" title="20.10.8.1. my_init()"><code class="literal">my_init()</code></a> explicitly.
      </p><p>
        To access the prototype for
        <a href="connectors-apis.html#my-init" title="20.10.8.1. my_init()"><code class="literal">my_init()</code></a>, your program should
        include these header files:
      </p><pre class="programlisting">#include &lt;my_global.h&gt;
#include &lt;my_sys.h&gt;
</pre><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-thread-end"></a>20.10.8.2. <code class="literal">mysql_thread_end()</code></h4></div></div></div><a class="indexterm" name="id3705076"></a><p>
        <code class="literal">void mysql_thread_end(void)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function needs to be called before calling
        <code class="literal">pthread_exit()</code> to free memory allocated by
        <a href="connectors-apis.html#mysql-thread-init" title="20.10.8.3. mysql_thread_init()"><code class="literal">mysql_thread_init()</code></a>.
      </p><p>
        <a href="connectors-apis.html#mysql-thread-end" title="20.10.8.2. mysql_thread_end()"><code class="literal">mysql_thread_end()</code></a> <span class="emphasis"><em>is
        not invoked automatically by the client library</em></span>. It
        must be called explicitly to avoid a memory leak.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-thread-init"></a>20.10.8.3. <code class="literal">mysql_thread_init()</code></h4></div></div></div><a class="indexterm" name="id3705161"></a><p>
        <code class="literal">my_bool mysql_thread_init(void)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function must be called early within each created thread to
        initialize thread-specific variables. However, you may not
        necessarily need to invoke it explicitly:
        <a href="connectors-apis.html#mysql-thread-init" title="20.10.8.3. mysql_thread_init()"><code class="literal">mysql_thread_init()</code></a> is
        automatically called by
        <a href="connectors-apis.html#my-init" title="20.10.8.1. my_init()"><code class="literal">my_init()</code></a>, which itself is
        automatically called by
        <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>,
        <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a>,
        <a href="connectors-apis.html#mysql-server-init" title="20.10.9.1. mysql_server_init()"><code class="literal">mysql_server_init()</code></a>, and
        <a href="connectors-apis.html#mysql-connect" title="20.10.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a>. If you invoke
        any of those functions,
        <a href="connectors-apis.html#mysql-thread-init" title="20.10.8.3. mysql_thread_init()"><code class="literal">mysql_thread_init()</code></a> will be
        called for you.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if successful. Non-zero if an error occurred.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-thread-safe"></a>20.10.8.4. <code class="literal">mysql_thread_safe()</code></h4></div></div></div><a class="indexterm" name="id3705273"></a><p>
        <code class="literal">unsigned int mysql_thread_safe(void)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function indicates whether the client library is compiled
        as thread-safe.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        1 if the client library is thread-safe, 0 otherwise.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-embedded-server-functions"></a>20.10.9. C API Embedded Server Function Descriptions</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#mysql-server-init">20.10.9.1. <code class="literal">mysql_server_init()</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#mysql-server-end">20.10.9.2. <code class="literal">mysql_server_end()</code></a></span></dt></dl></div><p>
      MySQL applications can be written to use an embedded server. See
      <a href="connectors-apis.html#libmysqld" title="20.9. libmysqld, the Embedded MySQL Server Library">Section 20.9, “libmysqld, the Embedded MySQL Server Library”</a>. To write such an application, you
      must link it against the <code class="literal">libmysqld</code> library by
      using the <code class="option">-lmysqld</code> flag rather than linking it
      against the <code class="literal">libmysqlclient</code> client library by
      using the <code class="option">-lmysqlclient</code> flag. However, the calls
      to initialize and finalize the library are the same whether you
      write a client application or one that uses the embedded server:
      Call <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> to
      initialize the library and
      <a href="connectors-apis.html#mysql-library-end" title="20.10.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a> when you are
      done with it. See <a href="connectors-apis.html#c-api-function-overview" title="20.10.2. C API Function Overview">Section 20.10.2, “C API Function Overview”</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-server-init"></a>20.10.9.1. <code class="literal">mysql_server_init()</code></h4></div></div></div><a class="indexterm" name="id3705394"></a><p>
        <code class="literal">int mysql_server_init(int argc, char **argv, char
        **groups)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function initializes the MySQL library, which must be done
        before you call any other MySQL function. However,
        <a href="connectors-apis.html#mysql-server-init" title="20.10.9.1. mysql_server_init()"><code class="literal">mysql_server_init()</code></a> is
        deprecated and you should call
        <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> instead.
        See <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()">Section 20.10.3.40, “<code class="literal">mysql_library_init()</code>”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if successful. Non-zero if an error occurred.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-server-end"></a>20.10.9.2. <code class="literal">mysql_server_end()</code></h4></div></div></div><a class="indexterm" name="id3705472"></a><p>
        <code class="literal">void mysql_server_end(void)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function finalizes the MySQL library, which should be done
        when you are done using the library. However,
        <a href="connectors-apis.html#mysql-server-end" title="20.10.9.2. mysql_server_end()"><code class="literal">mysql_server_end()</code></a> is deprecated
        and <a href="connectors-apis.html#mysql-library-end" title="20.10.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a> should
        be used instead. See <a href="connectors-apis.html#mysql-library-end" title="20.10.3.39. mysql_library_end()">Section 20.10.3.39, “<code class="literal">mysql_library_end()</code>”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        None.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-problems"></a>20.10.10. Common Questions and Problems When Using the C API</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#null-mysql-store-result">20.10.10.1. Why <code class="literal">mysql_store_result()</code> Sometimes
        Returns <code class="literal">NULL</code> After
        <code class="literal">mysql_query()</code> Returns Success</a></span></dt><dt><span class="section"><a href="connectors-apis.html#query-results">20.10.10.2. What Results You Can Get from a Query</a></span></dt><dt><span class="section"><a href="connectors-apis.html#getting-unique-id">20.10.10.3. How to Get the Unique ID for the Last Inserted Row</a></span></dt><dt><span class="section"><a href="connectors-apis.html#c-api-linking-problems">20.10.10.4. Problems Linking with the C API</a></span></dt></dl></div><a class="indexterm" name="id3705548"></a><a class="indexterm" name="id3705558"></a><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="null-mysql-store-result"></a>20.10.10.1. Why <code class="literal">mysql_store_result()</code> Sometimes
        Returns <code class="literal">NULL</code> After
        <code class="literal">mysql_query()</code> Returns Success</h4></div></div></div><p>
        It is possible for
        <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> to return
        <code class="literal">NULL</code> following a successful call to
        <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a>. When this
        happens, it means one of the following conditions occurred:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            There was a <code class="literal">malloc()</code> failure (for
            example, if the result set was too large).
          </p></li><li><p>
            The data couldn't be read (an error occurred on the
            connection).
          </p></li><li><p>
            The query returned no data (for example, it was an
            <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>,
            <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a>, or
            <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>).
          </p></li></ul></div><p>
        You can always check whether the statement should have produced
        a non-empty result by calling
        <a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a>. If
        <a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> returns
        zero, the result is empty and the last query was a statement
        that does not return values (for example, an
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> or a
        <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>). If
        <a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> returns a
        non-zero value, the statement should have produced a non-empty
        result. See the description of the
        <a href="connectors-apis.html#mysql-field-count" title="20.10.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> function for
        an example.
      </p><p>
        You can test for an error by calling
        <a href="connectors-apis.html#mysql-error" title="20.10.3.15. mysql_error()"><code class="literal">mysql_error()</code></a> or
        <a href="connectors-apis.html#mysql-errno" title="20.10.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="query-results"></a>20.10.10.2. What Results You Can Get from a Query</h4></div></div></div><p>
        In addition to the result set returned by a query, you can also
        get the following information:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <a href="connectors-apis.html#mysql-affected-rows" title="20.10.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a>
            returns the number of rows affected by the last query when
            doing an <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>,
            <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a>, or
            <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>.
          </p><p>
            For a fast re-create, use
            <a href="sql-syntax.html#truncate" title="12.2.11. TRUNCATE Syntax"><code class="literal">TRUNCATE
            TABLE</code></a>.
          </p></li><li><p>
            <a href="connectors-apis.html#mysql-num-rows" title="20.10.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a> returns the
            number of rows in a result set. With
            <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>,
            <a href="connectors-apis.html#mysql-num-rows" title="20.10.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a> may be
            called as soon as
            <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>
            returns. With
            <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>,
            <a href="connectors-apis.html#mysql-num-rows" title="20.10.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a> may be
            called only after you have fetched all the rows with
            <a href="connectors-apis.html#mysql-fetch-row" title="20.10.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>.
          </p></li><li><p>
            <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> returns
            the ID generated by the last query that inserted a row into
            a table with an <code class="literal">AUTO_INCREMENT</code> index. See
            <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()">Section 20.10.3.37, “<code class="literal">mysql_insert_id()</code>”</a>.
          </p></li><li><p>
            Some queries (<code class="literal">LOAD DATA INFILE ...</code>,
            <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT INTO
            ... SELECT ...</code></a>,
            <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a>) return additional
            information. The result is returned by
            <a href="connectors-apis.html#mysql-info" title="20.10.3.35. mysql_info()"><code class="literal">mysql_info()</code></a>. See the
            description for <a href="connectors-apis.html#mysql-info" title="20.10.3.35. mysql_info()"><code class="literal">mysql_info()</code></a>
            for the format of the string that it returns.
            <a href="connectors-apis.html#mysql-info" title="20.10.3.35. mysql_info()"><code class="literal">mysql_info()</code></a> returns a
            <code class="literal">NULL</code> pointer if there is no additional
            information.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="getting-unique-id"></a>20.10.10.3. How to Get the Unique ID for the Last Inserted Row</h4></div></div></div><a class="indexterm" name="id3705969"></a><a class="indexterm" name="id3705978"></a><a class="indexterm" name="id3705990"></a><a class="indexterm" name="id3706002"></a><p>
        If you insert a record into a table that contains an
        <code class="literal">AUTO_INCREMENT</code> column, you can obtain the
        value stored into that column by calling the
        <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> function.
      </p><p>
        You can check from your C applications whether a value was
        stored in an <code class="literal">AUTO_INCREMENT</code> column by
        executing the following code (which assumes that you've checked
        that the statement succeeded). It determines whether the query
        was an <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> with an
        <code class="literal">AUTO_INCREMENT</code> index:
      </p><pre class="programlisting">if ((result = mysql_store_result(&amp;mysql)) == 0 &amp;&amp;
    mysql_field_count(&amp;mysql) == 0 &amp;&amp;
    mysql_insert_id(&amp;mysql) != 0)
{
    used_id = mysql_insert_id(&amp;mysql);
}
</pre><p>
        When a new <code class="literal">AUTO_INCREMENT</code> value has been
        generated, you can also obtain it by executing a <code class="literal">SELECT
        LAST_INSERT_ID()</code> statement with
        <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> and retrieving the
        value from the result set returned by the statement.
      </p><p>
        When inserting multiple values, the last automatically
        incremented value is returned.
      </p><p>
        For <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>, the most
        recently generated ID is maintained in the server on a
        per-connection basis. It is not changed by another client. It is
        not even changed if you update another
        <code class="literal">AUTO_INCREMENT</code> column with a non-magic value
        (that is, a value that is not <code class="literal">NULL</code> and not
        <code class="literal">0</code>). Using
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> and
        <code class="literal">AUTO_INCREMENT</code> columns simultaneously from
        multiple clients is perfectly valid. Each client will receive
        the last inserted ID for the last statement
        <span class="emphasis"><em>that</em></span> client executed.
      </p><p>
        If you want to use the ID that was generated for one table and
        insert it into a second table, you can use SQL statements like
        this:
      </p><pre class="programlisting">INSERT INTO foo (auto,text)
    VALUES(NULL,'text');         # generate ID by inserting NULL
INSERT INTO foo2 (id,text)
    VALUES(LAST_INSERT_ID(),'text');  # use ID in second table
</pre><p>
        Note that <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a>
        returns the value stored into an
        <code class="literal">AUTO_INCREMENT</code> column, whether that value is
        automatically generated by storing <code class="literal">NULL</code> or
        <code class="literal">0</code> or was specified as an explicit value.
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> returns only
        automatically generated <code class="literal">AUTO_INCREMENT</code>
        values. If you store an explicit value other than
        <code class="literal">NULL</code> or <code class="literal">0</code>, it does not
        affect the value returned by
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>.
      </p><p>
        For more information on obtaining the last ID in an
        <code class="literal">AUTO_INCREMENT</code> column:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            For information on
            <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>, which can
            be used within an SQL statement, see
            <a href="functions.html#information-functions" title="11.11.3. Information Functions">Section 11.11.3, “Information Functions”</a>.
          </p></li><li><p>
            For information on
            <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a>, the
            function you use from within the C API, see
            <a href="connectors-apis.html#mysql-insert-id" title="20.10.3.37. mysql_insert_id()">Section 20.10.3.37, “<code class="literal">mysql_insert_id()</code>”</a>.
          </p></li><li><p>
            For information on obtaining the auto-incremented value when
            using Connector/J, see
            <a href="connectors-apis.html#connector-j-usagenotes" title="20.4.5. Connector/J Notes and Tips">Section 20.4.5, “Connector/J Notes and Tips”</a>.
          </p></li><li><p>
            For information on obtaining the auto-incremented value when
            using Connector/ODBC, see
            <a href="connectors-apis.html#connector-odbc-usagenotes-functionality-last-insert-id" title="20.1.7.1.1. Obtaining Auto-Increment Values">Section 20.1.7.1.1, “Obtaining Auto-Increment Values”</a>.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="c-api-linking-problems"></a>20.10.10.4. Problems Linking with the C API</h4></div></div></div><a class="indexterm" name="id3706330"></a><a class="indexterm" name="id3706342"></a><p>
        When linking with the C API, the following errors may occur on
        some systems:
      </p><pre class="programlisting">gcc -g -o client test.o -L/usr/local/lib/mysql \
                        -lmysqlclient -lsocket -lnsl

Undefined        first referenced
 symbol          in file
floor            /usr/local/lib/mysql/libmysqlclient.a(password.o)
ld: fatal: Symbol referencing errors. No output written to client
</pre><p>
        If this happens on your system, you must include the math
        library by adding <code class="option">-lm</code> to the end of the
        compile/link line.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="auto-reconnect"></a>20.10.11. Controlling Automatic Reconnection Behavior</h3></div></div></div><p>
      The MySQL client library can perform an automatic reconnection to
      the server if it finds that the connection is down when you
      attempt to send a statement to the server to be executed. In this
      case, the library tries once to reconnect to the server and send
      the statement again.
    </p><p>
      If it is important for your application to know that the
      connection has been dropped (so that is can exit or take action to
      adjust for the loss of state information), be sure to disable
      auto-reconnect. This can be done explicitly by calling
      <a href="connectors-apis.html#mysql-options" title="20.10.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> with the
      <code class="literal">MYSQL_OPT_RECONNECT</code> option:
    </p><pre class="programlisting">my_bool reconnect = 0;
mysql_options(&amp;mysql, MYSQL_OPT_RECONNECT, &amp;reconnect);
</pre><p>
      In MySQL 6.0, auto-reconnect is disabled by default.
    </p><p>
      If the connection has gone down, the
      <a href="connectors-apis.html#mysql-ping" title="20.10.3.50. mysql_ping()"><code class="literal">mysql_ping()</code></a> function performs a
      reconnect if auto-reconnect is enabled. If auto-reconnect is
      disabled, <a href="connectors-apis.html#mysql-ping" title="20.10.3.50. mysql_ping()"><code class="literal">mysql_ping()</code></a> returns an
      error instead.
    </p><p>
      Some client programs might provide the capability of controlling
      automatic reconnection. For example, <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a>
      reconnects by default, but the
      <a href="programs.html#option_mysql_reconnect"><code class="option">--skip-reconnect</code></a>
      option can be used to suppress this behavior.
    </p><p>
      If an automatic reconnection does occur (for example, as a result
      of calling <a href="connectors-apis.html#mysql-ping" title="20.10.3.50. mysql_ping()"><code class="literal">mysql_ping()</code></a>), there is
      no explicit indication of it. To check for reconnection, call
      <a href="connectors-apis.html#mysql-thread-id" title="20.10.3.70. mysql_thread_id()"><code class="literal">mysql_thread_id()</code></a> to get the
      original connection identifier before calling
      <a href="connectors-apis.html#mysql-ping" title="20.10.3.50. mysql_ping()"><code class="literal">mysql_ping()</code></a>, and then call
      <a href="connectors-apis.html#mysql-thread-id" title="20.10.3.70. mysql_thread_id()"><code class="literal">mysql_thread_id()</code></a> again to see
      whether the identifier has changed.
    </p><p>
      Automatic reconnection can be convenient because you need not
      implement your own reconnect code, but if a reconnection does
      occur, several aspects of the connection state are reset and your
      application will not know about it. The connection-related state
      is affected as follows:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Any active transactions are rolled back and autocommit mode is
          reset.
        </p></li><li><p>
          All table locks are released.
        </p></li><li><p>
          All <code class="literal">TEMPORARY</code> tables are closed (and
          dropped).
        </p></li><li><p>
          Session variables are reinitialized to the values of the
          corresponding variables. This also affects variables that are
          set implicitly by statements such as <code class="literal">SET
          NAMES</code>.
        </p></li><li><p>
          User variable settings are lost.
        </p></li><li><p>
          Prepared statements are released.
        </p></li><li><p>
          <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a> variables are closed.
        </p></li><li><p>
          The value of <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>
          is reset to 0.
        </p></li><li><p>
          Locks acquired with <a href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a>
          are released.
        </p></li></ul></div><p>
      If the connection drops, it is possible that the session
      associated with the connection on the server side will still be
      running if the server has not yet detected that the client is no
      longer connected. In this case, any locks held by the original
      connection still belong to that session, so you may want to kill
      it by calling <a href="connectors-apis.html#mysql-kill" title="20.10.3.38. mysql_kill()"><code class="literal">mysql_kill()</code></a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-multiple-queries"></a>20.10.12. C API Support for Multiple Statement Execution</h3></div></div></div><p>
      By default, <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> and
      <a href="connectors-apis.html#mysql-real-query" title="20.10.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> interpret their
      statement string argument as a single statement to be executed,
      and you process the result according to whether the statement
      produces a result set (a set of rows, as for
      <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>) or an affected-rows count
      (as for <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>,
      <a href="sql-syntax.html#update" title="12.2.12. UPDATE Syntax"><code class="literal">UPDATE</code></a>, and so forth).
    </p><p>
      MySQL 6.0 also supports the execution of a string
      containing multiple statements separated by semicolon
      (“<span class="quote"><code class="literal">;</code></span>”) characters. This capability
      is enabled by special options that are specified either when you
      connect to the server with
      <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> or after
      connecting by calling`
      <a href="connectors-apis.html#mysql-set-server-option" title="20.10.3.64. mysql_set_server_option()"><code class="literal">mysql_set_server_option()</code></a>.
    </p><p>
      Executing a multiple-statement string can produce multiple result
      sets or row-count indicators. Processing these results involves a
      different approach than for the single-statement case: After
      handling the result from the first statement, it is necessary to
      check whether more results exist and process them in turn if so.
      To support multiple-result processing, the C API includes the
      <a href="connectors-apis.html#mysql-more-results" title="20.10.3.45. mysql_more_results()"><code class="literal">mysql_more_results()</code></a> and
      <a href="connectors-apis.html#mysql-next-result" title="20.10.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> functions.
      These functions are used at the end of a loop that iterates as
      long as more results are available. <span class="emphasis"><em>Failure to process
      the result this way may result in a dropped connection to the
      server.</em></span>
    </p><p>
      Multiple-result processing also is required if you execute
      <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statements for stored
      procedures. Results from a stored procedure have these
      characteristics:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Statements within the procedure may produce result sets (for
          example, if it executes <a href="sql-syntax.html#select" title="12.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>
          statements). These result sets are returned in the order that
          they are produced as the procedure executes.
        </p><p>
          In general, the caller cannot know how many result sets a
          procedure will return. Procedure execution may depend on loops
          or conditional statements that cause the execution path to
          differ from one call to the next. Therefore, you must be
          prepared to retrieve multiple results.
        </p></li><li><p>
          The final result from the procedure is a status result that
          includes no result set. The status indicates whether the
          procedure succeeded or an error occurred.
        </p></li></ul></div><p>
      The multiple statement and result capabilities can be used only
      with <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> or
      <a href="connectors-apis.html#mysql-real-query" title="20.10.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a>. They cannot be
      used with the prepared statement interface. Prepared statement
      handles are defined to work only with strings that contain a
      single statement. See <a href="connectors-apis.html#c-api-prepared-statements" title="20.10.4. C API Prepared Statements">Section 20.10.4, “C API Prepared Statements”</a>.
    </p><p>
      To enable multiple-statement execution and result processing, the
      following options may be used:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          The <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>
          function has a <code class="literal">flags</code> argument for which two
          option values are relevent:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">CLIENT_MULTI_RESULTS</code> enables the client
              program to process multiple results. This option
              <span class="emphasis"><em>must</em></span> be enabled if you execute
              <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statements for stored
              procedures that produce result sets. Otherwise, such
              procedures result in an error <code class="literal">Error 1312 (0A000):
              PROCEDURE <em class="replaceable"><code>proc_name</code></em> can't
              return a result set in the given context</code>. As of
              MySQL 6.0.8, <code class="literal">CLIENT_MULTI_RESULTS</code> is
              enabled by default.
            </p></li><li><p>
              <code class="literal">CLIENT_MULTI_STATEMENTS</code> enables
              <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> and
              <a href="connectors-apis.html#mysql-real-query" title="20.10.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> to
              execute statement strings containing multiple statements
              separated by semicolons. This option also enables
              <code class="literal">CLIENT_MULTI_RESULTS</code> implicitly, so a
              <code class="literal">flags</code> argument of
              <code class="literal">CLIENT_MULTI_STATEMENTS</code> to
              <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> is
              equivalent to an argument of
              <code class="literal">CLIENT_MULTI_STATEMENTS |
              CLIENT_MULTI_RESULTS</code>. That is,
              <code class="literal">CLIENT_MULTI_STATEMENTS</code> is sufficient
              to enable multiple-statement execution and all
              multiple-result processing.
            </p></li></ul></div></li><li><p>
          After the connection to the server has been established, you
          can use the
          <a href="connectors-apis.html#mysql-set-server-option" title="20.10.3.64. mysql_set_server_option()"><code class="literal">mysql_set_server_option()</code></a>
          function to enable or disable multiple-statement execution by
          passing it an argument of
          <code class="literal">MYSQL_OPTION_MULTI_STATEMENTS_ON</code> or
          <code class="literal">MYSQL_OPTION_MULTI_STATEMENTS_OFF</code>. Enabling
          multiple-statement execution with this function also enables
          processing of “<span class="quote">simple</span>” results for a
          multiple-statement string where each statement produces a
          single result, but is <span class="emphasis"><em>not</em></span> sufficient to
          allow processing of stored procedures that produce result
          sets.
        </p></li></ul></div><p>
      The following procedure outlines a suggested strategy for handling
      multiple statements:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Pass <code class="literal">CLIENT_MULTI_STATEMENTS</code> to
          <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>, to fully
          enable multiple-statement execution and multiple-result
          processing.
        </p></li><li><p>
          After calling <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> or
          <a href="connectors-apis.html#mysql-real-query" title="20.10.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> and
          verifying that it succeeds, enter a loop within which you
          process statement results.
        </p></li><li><p>
          For each iteration of the loop, handle the current statement
          result, retrieving either a result set or an affected-rows
          count. If an error occurs, exit the loop.
        </p></li><li><p>
          At the end of the loop, call
          <a href="connectors-apis.html#mysql-next-result" title="20.10.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> to check
          whether another result exists and initiate retrieval for it if
          so. If no more results are available, exit the loop.
        </p></li></ol></div><p>
      One possible implementation of the preceding strategy is shown
      following. The final part of the loop can be reduced to a simple
      test of whether
      <a href="connectors-apis.html#mysql-next-result" title="20.10.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> returns
      non-zero. The code as written distinguishes between no more
      results and an error, which allows a message to be printed for the
      latter occurrence.
    </p><pre class="programlisting">/* connect to server with the CLIENT_MULTI_STATEMENTS option */
if (mysql_real_connect (mysql, host_name, user_name, password,
    db_name, port_num, socket_name, CLIENT_MULTI_STATEMENTS) == NULL)
{
  printf("mysql_real_connect() failed\n");
  mysql_close(mysql);
  exit(1);
}

/* execute multiple statements */
status = mysql_query(mysql,
                     "DROP TABLE IF EXISTS test_table;\
                      CREATE TABLE test_table(id INT);\
                      INSERT INTO test_table VALUES(10);\
                      UPDATE test_table SET id=20 WHERE id=10;\
                      SELECT * FROM test_table;\
                      DROP TABLE test_table");
if (status)
{
  printf("Could not execute statement(s)");
  mysql_close(mysql);
  exit(0);
}

/* process each statement result */
do {
  /* did current statement return data? */
  result = mysql_store_result(mysql);
  if (result)
  {
    /* yes; process rows and free the result set */
    process_result_set(mysql, result);
    mysql_free_result(result);
  }
  else          /* no result set or error */
  {
    if (mysql_field_count(mysql) == 0)
    {
      printf("%lld rows affected\n",
            mysql_affected_rows(mysql));
    }
    else  /* some error occurred */
    {
      printf("Could not retrieve result set\n");
      break;
    }
  }
  /* more results? -1 = no, &gt;0 = error, 0 = yes (keep looping) */
  if ((status = mysql_next_result(mysql)) &gt; 0)
    printf("Could not execute statement\n");
} while (status == 0);

mysql_close(mysql);
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-prepared-statement-problems"></a>20.10.13. C API Prepared Statement Problems</h3></div></div></div><p>
      Here follows a list of the currently known problems with prepared
      statements:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <a href="data-types.html#time" title="10.3.2. The TIME Type"><code class="literal">TIME</code></a>,
          <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a>, and
          <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> do not support parts
          of seconds (for example, from
          <a href="functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a>).
        </p></li><li><p>
          <a class="indexterm" name="id3707246"></a>

          When converting an integer to string,
          <code class="literal">ZEROFILL</code> is honored with prepared
          statements in some cases where the MySQL server doesn't print
          the leading zeros. (For example, with
          <a href="functions.html#function_min"><code class="literal">MIN(<em class="replaceable"><code>number-with-zerofill</code></em>)</code></a>).
        </p></li><li><p>
          When converting a floating-point number to a string in the
          client, the rightmost digits of the converted value may differ
          slightly from those of the original value.
        </p></li><li><p>
          Prepared statements use the query cache under the conditions
          described in <a href="optimization.html#query-cache-operation" title="7.5.5.1. How the Query Cache Operates">Section 7.5.5.1, “How the Query Cache Operates”</a>.
        </p></li><li><p>
          Prepared statements do not support multi-statements (that is,
          multiple statements within a single string separated by
          “<span class="quote"><code class="literal">;</code></span>” characters).
        </p></li><li><p>
          Before MySQL 6.0.8, prepared <code class="literal">CALL</code>
          statements cannot invoke stored procedures that return result
          sets because prepared statements do not support multiple
          result sets. Nor can the calling application access a stored
          procedure's <code class="literal">OUT</code> or <code class="literal">INOUT</code>
          parameters when the procedure returns. As of MySQL 6.0.8,
          these capabilities are supported as described in
          <a href="connectors-apis.html#c-api-prepared-call-statements" title="20.10.15. C API Support for Prepared CALL
      Statements">Section 20.10.15, “C API Support for Prepared <code class="literal">CALL</code>
      Statements”</a>.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-prepared-statement-date-handling"></a>20.10.14. C API Prepared Statement Handling of Date and Time Values</h3></div></div></div><p>
      The binary (prepared statement) protocol allows you to send and
      receive date and time values (<a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATE</code></a>,
      <a href="data-types.html#time" title="10.3.2. The TIME Type"><code class="literal">TIME</code></a>,
      <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a>, and
      <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a>), using the
      <code class="literal">MYSQL_TIME</code> structure. The members of this
      structure are described in
      <a href="connectors-apis.html#c-api-prepared-statement-datatypes" title="20.10.5. C API Prepared Statement Data types">Section 20.10.5, “C API Prepared Statement Data types”</a>.
    </p><p>
      To send temporal data values, create a prepared statement using
      <a href="connectors-apis.html#mysql-stmt-prepare" title="20.10.7.21. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a>. Then, before
      calling <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> to
      execute the statement, use the following procedure to set up each
      temporal parameter:
    </p><div class="orderedlist"><ol type="1"><li><p>
          In the <code class="literal">MYSQL_BIND</code> structure associated with
          the data value, set the <code class="literal">buffer_type</code> member
          to the type that indicates what kind of temporal value you're
          sending. For <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATE</code></a>,
          <a href="data-types.html#time" title="10.3.2. The TIME Type"><code class="literal">TIME</code></a>,
          <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a>, or
          <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> values, set
          <code class="literal">buffer_type</code> to
          <code class="literal">MYSQL_TYPE_DATE</code>,
          <code class="literal">MYSQL_TYPE_TIME</code>,
          <code class="literal">MYSQL_TYPE_DATETIME</code>, or
          <code class="literal">MYSQL_TYPE_TIMESTAMP</code>, respectively.
        </p></li><li><p>
          Set the <code class="literal">buffer</code> member of the
          <code class="literal">MYSQL_BIND</code> structure to the address of the
          <code class="literal">MYSQL_TIME</code> structure in which you pass the
          temporal value.
        </p></li><li><p>
          Fill in the members of the <code class="literal">MYSQL_TIME</code>
          structure that are appropriate for the type of temporal value
          to be passed.
        </p></li></ol></div><p>
      Use <a href="connectors-apis.html#mysql-stmt-bind-param" title="20.10.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a> to
      bind the parameter data to the statement. Then you can call
      <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>.
    </p><p>
      To retrieve temporal values, the procedure is similar, except that
      you set the <code class="literal">buffer_type</code> member to the type of
      value you expect to receive, and the <code class="literal">buffer</code>
      member to the address of a <code class="literal">MYSQL_TIME</code> structure
      into which the returned value should be placed. Use
      <a href="connectors-apis.html#mysql-stmt-bind-result" title="20.10.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a> to bind
      the buffers to the statement after calling
      <a href="connectors-apis.html#mysql-stmt-execute" title="20.10.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> and before
      fetching the results.
    </p><p>
      Here is a simple example that inserts
      <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATE</code></a>,
      <a href="data-types.html#time" title="10.3.2. The TIME Type"><code class="literal">TIME</code></a>, and
      <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> data. The
      <code class="literal">mysql</code> variable is assumed to be a valid
      connection handle.
    </p><pre class="programlisting">
  MYSQL_TIME  ts;
  MYSQL_BIND  bind[3];
  MYSQL_STMT  *stmt;

  strmov(query, "INSERT INTO test_table(date_field, time_field, \
                               timestamp_field) VALUES(?,?,?");

  stmt = mysql_stmt_init(mysql);
  if (!stmt)
  {
    fprintf(stderr, " mysql_stmt_init(), out of memory\n");
    exit(0);
  }
  if (mysql_stmt_prepare(mysql, query, strlen(query)))
  {
    fprintf(stderr, "\n mysql_stmt_prepare(), INSERT failed");
    fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
    exit(0);
  }

  /* set up input buffers for all 3 parameters */
  bind[0].buffer_type= MYSQL_TYPE_DATE;
  bind[0].buffer= (char *)&amp;ts;
  bind[0].is_null= 0;
  bind[0].length= 0;
  ...
  bind[1]= bind[2]= bind[0];
  ...

  mysql_stmt_bind_param(stmt, bind);

  /* supply the data to be sent in the ts structure */
  ts.year= 2002;
  ts.month= 02;
  ts.day= 03;

  ts.hour= 10;
  ts.minute= 45;
  ts.second= 20;

  mysql_stmt_execute(stmt);
  ..

</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-prepared-call-statements"></a>20.10.15. C API Support for Prepared <code class="literal">CALL</code>
      Statements</h3></div></div></div><p>
      This section describes prepared-statement support in the C API for
      stored procedures executed via <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a>
      statements:
    </p><p>
      Prior to MySQL 6.0.8, prepared <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a>
      statements can be used only for stored procedures that produce at
      most one result set. Nor can the calling application use
      placeholders for <code class="literal">OUT</code> or
      <code class="literal">INOUT</code> parameters.
    </p><p>
      MySQL 6.0.8 expands support for stored procedures executed via
      prepared <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statements in the
      following ways:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          A stored procedure can produce any number of result sets. The
          number of columns and the data types of the columns need not
          be the same for all result sets.
        </p></li><li><p>
          The final values of <code class="literal">OUT</code> and
          <code class="literal">INOUT</code> parameters are available to the
          calling application after the procedure returns. These
          parameters are returned as an extra single-row result set
          following any result sets produced by the procedure itself.
          The row contains the values of the <code class="literal">OUT</code> and
          <code class="literal">INOUT</code> parameters in the order in which they
          are declared in the procedure parameter list.
        </p></li></ul></div><p>
      The following discussion shows how to use these capabilities via
      the C API for prepared statements. To use prepared
      <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statements via the
      <a href="sql-syntax.html#prepare" title="12.7.1. PREPARE Syntax"><code class="literal">PREPARE</code></a> and
      <a href="sql-syntax.html#execute" title="12.7.2. EXECUTE Syntax"><code class="literal">EXECUTE</code></a> statements, see
      <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax">Section 12.2.1, “<code class="literal">CALL</code> Syntax”</a>.
    </p><p>
      If an application might be compiled or executed in a context where
      a version of MySQL older than 6.0.8 is used, prepared
      <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> capabilities for multiple
      result sets and <code class="literal">OUT</code> or <code class="literal">INOUT</code>
      parameters might not be available:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          For the client side, the application will not compile unless
          the libraries are from MySQL 6.0.8 or higher (the API function
          and symbols introduced in that version will not be present).
        </p></li><li><p>
          To verify at runtime that the server is recent enough, a
          client can use this test:
        </p><pre class="programlisting">if (mysql_get_server_version(mysql) &lt; 60008)
{
  fprintf(stderr,
          "Server does not support required CALL capabilities\n");
  mysql_close(mysql);
  exit (1);
}
</pre></li></ul></div><p>
      An application that executes a prepared
      <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statement should use a loop
      that fetches a result and then invokes
      <a href="connectors-apis.html#mysql-stmt-next-result" title="20.10.7.17. mysql_stmt_next_result()"><code class="literal">mysql_stmt_next_result()</code></a> to
      determine whether there are more results. The results consist of
      any result sets produced by the stored procedure followed by a
      final status value that indicates whether the procedure terminated
      successfully.
    </p><p>
      If the procedure has <code class="literal">OUT</code> or
      <code class="literal">INOUT</code> parameters, the result set preceding the
      final status value contains their values. To determine whether a
      result set contains parameter values, test whether the
      <code class="literal">SERVER_PS_OUT_PARAMS</code> bit is set in the
      <code class="literal">server_status</code> member of the
      <code class="literal">MYSQL</code> connection handler:
    </p><pre class="programlisting">mysql-&gt;server_status &amp; SERVER_PS_OUT_PARAMS
</pre><p>
      The following example uses a prepared
      <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statement to execute a stored
      procedure that produces multiple result sets and that provides
      parameter values back to the caller by means of
      <code class="literal">OUT</code> and <code class="literal">INOUT</code> parameters.
      The procedure takes parameters of all three types
      (<code class="literal">IN</code>, <code class="literal">OUT</code>,
      <code class="literal">INOUT</code>), displays their initial values, assigns
      new values, displays the updated values, and returns. The expected
      return information from the procedure therefore consists of
      multiple result sets and a final status:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          One result set containing the initial parameter values:
          <code class="literal">10</code>, <code class="literal">NULL</code>,
          <code class="literal">30</code>. (The <code class="literal">OUT</code> parameter
          is assigned a value by the caller, but this assignment is
          expected to be ineffective: <code class="literal">OUT</code> parameters
          are seen as <code class="literal">NULL</code> within a procedure until
          assigned a value within the procedure.)
        </p></li><li><p>
          One result set containing the modified parameter values:
          <code class="literal">100</code>, <code class="literal">200</code>,
          <code class="literal">300</code>.
        </p></li><li><p>
          One result set containing the final <code class="literal">OUT</code> and
          <code class="literal">INOUT</code> parameter values:
          <code class="literal">200</code>, <code class="literal">300</code>.
        </p></li><li><p>
          A final status packet.
        </p></li></ul></div><p>
      The code to execute the procedure:
    </p><pre class="programlisting">MYSQL_STMT *stmt;
MYSQL_BIND ps_params[3];  /* input parameter buffers */
int        int_data[3];   /* input parameter values */
my_bool    is_null[3];    /* input parameter nullability */
int        status;
  
/* set up stored procedure */
status = mysql_query(mysql, "DROP PROCEDURE IF EXISTS p1");
test_error(mysql, status);
  
status = mysql_query(mysql,
  "CREATE PROCEDURE p1("
  "  IN p_in INT, "
  "  OUT p_out INT, "
  "  INOUT p_inout INT) "
  "BEGIN "
  "  SELECT p_in, p_out, p_inout; "
  "  SET p_in = 100, p_out = 200, p_inout = 300; "
  "  SELECT p_in, p_out, p_inout; "
  "END");
test_error(mysql, status);
  
/* initialize and prepare CALL statement with parameter placeholders */
stmt = mysql_stmt_init(mysql);
if (!stmt)
{
  printf("Could not initialize statement\n");
  exit(1);
}
status = mysql_stmt_prepare(stmt, "CALL p1(?, ?, ?)", 16);
test_stmt_error(stmt, status);
  
/* initialize parameters: p_in, p_out, p_inout (all INT) */
memset(ps_params, 0, sizeof (ps_params));
 
ps_params[0].buffer_type = MYSQL_TYPE_LONG;
ps_params[0].buffer = (char *) &amp;int_data[0];
ps_params[0].length = 0;
ps_params[0].is_null = 0;
  
ps_params[1].buffer_type = MYSQL_TYPE_LONG;
ps_params[1].buffer = (char *) &amp;int_data[1];
ps_params[1].length = 0;
ps_params[1].is_null = 0;
  
ps_params[2].buffer_type = MYSQL_TYPE_LONG;
ps_params[2].buffer = (char *) &amp;int_data[2];
ps_params[2].length = 0;
ps_params[2].is_null = 0;
  
/* bind parameters */
status = mysql_stmt_bind_param(stmt, ps_params);
test_stmt_error(stmt, status);
  
/* assign values to parameters and execute statement */
int_data[0]= 10;  /* p_in */
int_data[1]= 20;  /* p_inout */
int_data[2]= 30;  /* p_inout */
  
status = mysql_stmt_execute(stmt);
test_stmt_error(stmt, status);
  
/* process results until there are no more */
do {
  int i;
  int num_fields;       /* number of columns in result */
  MYSQL_FIELD *fields;  /* for result set metadata */
  MYSQL_BIND *rs_bind;  /* for output buffers */
  
  /* the column count is &gt; 0 if there is a result set */
  /* 0 if the result is only the final status packet */
  num_fields = mysql_stmt_field_count(stmt);
  
  if (num_fields &gt; 0)
  {
    /* there is a result set to fetch */
    printf("Number of columns in result: %d\n", (int) num_fields);
  
    /* what kind of result set is this? */
    printf("Data: ");
    if(mysql-&gt;server_status &amp; SERVER_PS_OUT_PARAMS)
      printf("this result set contains OUT/INOUT parameters\n");
    else
      printf("this result set is produced by the procedure\n");
  
    MYSQL_RES *rs_metadata = mysql_stmt_result_metadata(stmt);
    test_stmt_error(stmt, rs_metadata == NULL);
  
    fields = mysql_fetch_fields(rs_metadata);
  
    rs_bind = (MYSQL_BIND *) malloc(sizeof (MYSQL_BIND) * num_fields);
    if (!rs_bind)
    {
      printf("Cannot allocate output buffers\n");
      exit(1);
    }
    memset(rs_bind, 0, sizeof (MYSQL_BIND) * num_fields);
  
    /* set up and bind result set output buffers */
    for (i = 0; i &lt; num_fields; ++i)
    {
      rs_bind[i].buffer_type = fields[i].type;
      rs_bind[i].is_null = &amp;is_null[i];
  
      switch (fields[i].type)
      {
        case MYSQL_TYPE_LONG:
          rs_bind[i].buffer = (char *) &amp;(int_data[i]);
          rs_bind[i].buffer_length = sizeof (int_data);
          break;
  
        default:
          fprintf(stderr, "ERROR: unexpected type: %d.\n", fields[i].type);
          exit(1);
      }
    }
  
    status = mysql_stmt_bind_result(stmt, rs_bind);
    test_stmt_error(stmt, status);
  
    /* fetch and display result set rows */
    while (1)
    {
      status = mysql_stmt_fetch(stmt);
  
      if (status == 1 || status == MYSQL_NO_DATA)
        break;
  
      for (i = 0; i &lt; num_fields; ++i)
      {
        switch (rs_bind[i].buffer_type)
        {
          case MYSQL_TYPE_LONG:
            if (*rs_bind[i].is_null)
              printf(" val[%d] = NULL;", i);
            else
              printf(" val[%d] = %ld;",
                     i, (long) *((int *) rs_bind[i].buffer));
            break;
  
          default:
            printf("  unexpected type (%d)\n",
              rs_bind[i].buffer_type);
        }
      }
      printf("\n");
    }
  
    mysql_free_result(rs_metadata); /* free metadata */
    free(rs_bind);                  /* free output buffers */
  }
  else
  {
    /* no columns = final status packet */
    printf("End of procedure output\n");
  }
  
  /* more results? -1 = no, &gt;0 = error, 0 = yes (keep looking) */
  status = mysql_stmt_next_result(stmt);
  if (status &gt; 0)
    test_stmt_error(stmt, status);
} while (status == 0);
  
mysql_stmt_close(stmt);
</pre><p>
      Execution of the procedure should produce the following output:
    </p><pre class="programlisting">Number of columns in result: 3
Data: this result set is produced by the procedure
 val[0] = 10; val[1] = NULL; val[2] = 30;
Number of columns in result: 3
Data: this result set is produced by the procedure
 val[0] = 100; val[1] = 200; val[2] = 300;
Number of columns in result: 2
Data: this result set contains OUT/INOUT parameters
 val[0] = 200; val[1] = 300;
End of procedure output
</pre><p>
      The code uses two utility routines,
      <code class="literal">test_error()</code>
      <code class="literal">test_stmt_error()</code>, to check for errors and
      terminate after printing diagnostic information if an error
      occurred:
    </p><pre class="programlisting">static void test_error(MYSQL *mysql, int status)
{
  if (status)
  {
    printf("Error: %s (errno: %d)\n",
           mysql_error(mysql), mysql_errno(mysql));
    exit(1);
  }
}

static void test_stmt_error(MYSQL_STMT *stmt, int status)
{
  if (status)
  {
    printf("Error: %s (errno: %d)\n",
           mysql_stmt_error(stmt), mysql_stmt_errno(stmt));
    exit(1);
  }
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="building-clients"></a>20.10.16. Building Client Programs</h3></div></div></div><a class="indexterm" name="id3708340"></a><a class="indexterm" name="id3708353"></a><a class="indexterm" name="id3708362"></a><a class="indexterm" name="id3708374"></a><p>
      If you compile MySQL clients that you've written yourself or that
      you obtain from a third-party, they must be linked using the
      <code class="option">-lmysqlclient -lz</code> options in the link command.
      You may also need to specify a <code class="option">-L</code> option to tell
      the linker where to find the library. For example, if the library
      is installed in <code class="filename">/usr/local/mysql/lib</code>, use
      <code class="option">-L/usr/local/mysql/lib -lmysqlclient -lz</code> in the
      link command.
    </p><p>
      For clients that use MySQL header files, you may need to specify
      an <code class="option">-I</code> option when you compile them (for example,
      <code class="option">-I/usr/local/mysql/include</code>), so that the compiler
      can find the header files.
    </p><p>
      To make it simpler to compile MySQL programs on Unix, we have
      provided the <a href="programs.html#mysql-config" title="4.7.2. mysql_config — Get Compile Options for Compiling Clients"><span><strong class="command">mysql_config</strong></span></a> script for you. See
      <a href="programs.html#mysql-config" title="4.7.2. mysql_config — Get Compile Options for Compiling Clients">Section 4.7.2, “<span><strong class="command">mysql_config</strong></span> — Get Compile Options for Compiling Clients”</a>.
    </p><p>
      You can use it to compile a MySQL client as follows:
    </p><pre class="programlisting">CFG=/usr/local/mysql/bin/mysql_config
sh -c "gcc -o progname `$CFG --cflags` progname.c `$CFG --libs`"
</pre><p>
      The <code class="literal">sh -c</code> is needed to get the shell not to
      treat the output from <a href="programs.html#mysql-config" title="4.7.2. mysql_config — Get Compile Options for Compiling Clients"><span><strong class="command">mysql_config</strong></span></a> as one word.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="threaded-clients"></a>20.10.17. How to Make a Threaded Client</h3></div></div></div><a class="indexterm" name="id3708484"></a><a class="indexterm" name="id3708496"></a><p>
      The client library is almost thread-safe. The biggest problem is
      that the subroutines in <code class="filename">net.c</code> that read from
      sockets are not interrupt safe. This was done with the thought
      that you might want to have your own alarm that can break a long
      read to a server. If you install interrupt handlers for the
      <code class="literal">SIGPIPE</code> interrupt, the socket handling should
      be thread-safe.
    </p><p>
      To avoid aborting the program when a connection terminates, MySQL
      blocks <code class="literal">SIGPIPE</code> on the first call to
      <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a>,
      <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>, or
      <a href="connectors-apis.html#mysql-connect" title="20.10.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a>. If you want to
      use your own <code class="literal">SIGPIPE</code> handler, you should first
      call <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> and then
      install your handler.
    </p><p>
      Before MySQL 4.0, binary client libraries that we provided other
      than those for Windows were not normally compiled with the
      thread-safe option. Current binary distributions should have both
      a normal and a thread-safe client library.
    </p><p>
      To create a threaded client where you can interrupt the client
      from other threads and set timeouts when talking with the MySQL
      server, you should use the <code class="literal">net_serv.o</code> code that
      the server uses and the <code class="option">-lmysys</code>,
      <code class="option">-lmystrings</code>, and <code class="option">-ldbug</code>
      libraries.
    </p><p>
      If you don't need interrupts or timeouts, you can just compile a
      thread-safe client library <code class="literal">(mysqlclient_r)</code> and
      use it. In this case, you don't have to worry about the
      <code class="literal">net_serv.o</code> object file or the other MySQL
      libraries.
    </p><p>
      When using a threaded client and you want to use timeouts and
      interrupts, you can make great use of the routines in the
      <code class="filename">thr_alarm.c</code> file. If you are using routines
      from the <code class="literal">mysys</code> library, the only thing you must
      remember is to call <a href="connectors-apis.html#my-init" title="20.10.8.1. my_init()"><code class="literal">my_init()</code></a>
      first! See <a href="connectors-apis.html#c-thread-functions" title="20.10.8. C API Threaded Function Descriptions">Section 20.10.8, “C API Threaded Function Descriptions”</a>.
    </p><p>
      In all cases, be sure to initialize the client library by calling
      <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> before
      calling any other MySQL functions. When you are done with the
      library, call <a href="connectors-apis.html#mysql-library-end" title="20.10.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a>.
    </p><p>
      <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> is not
      thread-safe by default. The following notes describe how to
      compile a thread-safe client library and use it in a thread-safe
      manner. (The notes below for
      <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> also apply to
      the older <a href="connectors-apis.html#mysql-connect" title="20.10.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a> routine
      as well, although <a href="connectors-apis.html#mysql-connect" title="20.10.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a>
      is deprecated and should no longer be used.)
    </p><p>
      To make <a href="connectors-apis.html#mysql-real-connect" title="20.10.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>
      thread-safe, you must configure your MySQL distribution with this
      command:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./configure --enable-thread-safe-client</code></strong>
</pre><p>
      Then recompile the distribution to create a thread-safe client
      library, <code class="literal">libmysqlclient_r</code>. (Assuming that your
      operating system has a thread-safe
      <code class="literal">gethostbyname_r()</code> function.) This library is
      thread-safe per connection. You can let two threads share the same
      connection with the following caveats:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Two threads can't send a query to the MySQL server at the same
          time on the same connection. In particular, you have to ensure
          that between calls to
          <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> and
          <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> no other
          thread is using the same connection.
        </p></li><li><p>
          Many threads can access different result sets that are
          retrieved with
          <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>.
        </p></li><li><p>
          If you use <a href="connectors-apis.html#mysql-use-result" title="20.10.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>,
          you must ensure that no other thread is using the same
          connection until the result set is closed. However, it really
          is best for threaded clients that share the same connection to
          use <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>.
        </p></li><li><p>
          If you want to use multiple threads on the same connection,
          you must have a mutex lock around your pair of
          <a href="connectors-apis.html#mysql-query" title="20.10.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> and
          <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> calls.
          Once <a href="connectors-apis.html#mysql-store-result" title="20.10.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> is
          ready, the lock can be released and other threads may query
          the same connection.
        </p></li><li><p>
          If you use POSIX threads, you can use
          <code class="literal">pthread_mutex_lock()</code> and
          <code class="literal">pthread_mutex_unlock()</code> to establish and
          release a mutex lock.
        </p></li></ul></div><p>
      You need to know the following if you have a thread that is
      calling MySQL functions which did not create the connection to the
      MySQL database:
    </p><p>
      When you call <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>, MySQL
      creates a thread-specific variable for the thread that is used by
      the debug library (among other things). If you call a MySQL
      function before the thread has called
      <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>, the thread does not
      have the necessary thread-specific variables in place and you are
      likely to end up with a core dump sooner or later. To get things
      to work smoothly you must do the following:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Call <a href="connectors-apis.html#mysql-library-init" title="20.10.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a>
          before any other MySQL functions. It is not thread-safe, so
          call it before threads are created, or protect the call with a
          mutex.
        </p></li><li><p>
          Arrange for
          <a href="connectors-apis.html#mysql-thread-init" title="20.10.8.3. mysql_thread_init()"><code class="literal">mysql_thread_init()</code></a> to be
          called early in the thread handler before calling any MySQL
          function. If you call
          <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>, they will call
          <a href="connectors-apis.html#mysql-thread-init" title="20.10.8.3. mysql_thread_init()"><code class="literal">mysql_thread_init()</code></a> for you.
        </p></li><li><p>
          In the thread, call
          <a href="connectors-apis.html#mysql-thread-end" title="20.10.8.2. mysql_thread_end()"><code class="literal">mysql_thread_end()</code></a> before
          calling <code class="literal">pthread_exit()</code>. This frees the
          memory used by MySQL thread-specific variables.
        </p></li></ol></div><p>
      The preceding notes regarding
      <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a> also apply to
      <a href="connectors-apis.html#mysql-connect" title="20.10.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a>, which calls
      <a href="connectors-apis.html#mysql-init" title="20.10.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>.
    </p><p>
      If “<span class="quote">undefined symbol</span>” errors occur when linking your
      client with <code class="literal">libmysqlclient_r</code>, in most cases
      this is because you haven't included the thread libraries on the
      link/compile command.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="apis-php"></a>20.11. MySQL PHP API</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#apis-php-mysql">20.11.1. MySQL</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli">20.11.2. MySQL Improved Extension (<code class="literal">Mysqli</code>)</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-pdo-mysql">20.11.3. MySQL Functions (PDO_MYSQL)</a></span></dt><dt><span class="section"><a href="connectors-apis.html#connector-php">20.11.4. Connector/PHP</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-problems">20.11.5. Common Problems with MySQL and PHP</a></span></dt><dt><span class="section"><a href="connectors-apis.html#php-mysql-mysqli">20.11.6. Enabling Both <code class="literal">mysql</code> and <code class="literal">mysqli</code> in
      PHP</a></span></dt></dl></div><a class="indexterm" name="id3709054"></a><p>
    PHP is a server-side, HTML-embedded scripting language that may be
    used to create dynamic Web pages. It is available for most operating
    systems and Web servers, and can access most common databases,
    including MySQL. PHP may be run as a separate program or compiled as
    a module for use with the Apache Web server.
  </p><p>
    PHP actually provides two different MySQL API extensions:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">mysql</code>: Available for PHP versions 4 and 5,
        this extension is intended for use with MySQL versions prior to
        MySQL 4.1. This extension does not support the improved
        authentication protocol used in MySQL 4.1, nor does it support
        prepared statements or multiple statements. If you wish to use
        this extension with MySQL 4.1, you will likely want to configure
        the MySQL server to use the <span><strong class="command">--old-passwords</strong></span>
        option (see <a href="error-handling.html#old-client" title="B.1.2.4. Client does not support authentication protocol">Section B.1.2.4, “<code class="literal">Client does not support authentication protocol</code>”</a>). This extension is
        documented on the PHP Web site at
        <a href="http://php.net/mysql" target="_top">http://php.net/mysql</a>.
      </p></li><li><p>
        <a href="connectors-apis.html#apis-php-mysqli" title="20.11.2. MySQL Improved Extension (Mysqli)">Section 20.11.2, “MySQL Improved Extension (<code class="literal">Mysqli</code>)”</a> - Stands for “<span class="quote">MySQL,
        Improved</span>”; this extension is available only in PHP 5. It
        is intended for use with MySQL 4.1.1 and later. This extension
        fully supports the authentication protocol used in MySQL 5.0, as
        well as the Prepared Statements and Multiple Statements APIs. In
        addition, this extension provides an advanced, object-oriented
        programming interface. You can read the documentation for the
        <code class="literal">mysqli</code> extension at
        <a href="http://php.net/mysqli" target="_top">http://php.net/mysqli</a>. Helpful article can be
        found at <a href="http://devzone.zend.com/node/view/id/686" target="_top">http://devzone.zend.com/node/view/id/686</a>
        and <a href="http://devzone.zend.com/node/view/id/687" target="_top">http://devzone.zend.com/node/view/id/687</a>.
      </p></li></ul></div><p>
    If you're experiencing problems with enabling both the
    <code class="literal">mysql</code> and the <code class="literal">mysqli</code> extension
    when building PHP on Linux yourself, see
    <a href="connectors-apis.html#php-mysql-mysqli" title="20.11.6. Enabling Both mysql and mysqli in
      PHP">Section 20.11.6, “Enabling Both <code class="literal">mysql</code> and <code class="literal">mysqli</code> in
      PHP”</a>.
  </p><p>
    The PHP distribution and documentation are available from the
    <a href="http://www.php.net/" target="_top">PHP Web site</a>.
  </p><p class="mnmas-kb"><b>MySQL Enterprise</b>
      MySQL Enterprise subscribers will find more information about
      MySQL and PHP in the Knowledge Base articles found at
      <a href="https://kb.mysql.com/search.php?cat=search&amp;category=23" target="_top">
      PHP</a>. Access to the MySQL Knowledge Base collection of
      articles is one of the advantages of subscribing to MySQL
      Enterprise. For more information, see
      <a href="http://www.mysql.com/products/enterprise/knowledgebase.html" target="_top">http://www.mysql.com/products/enterprise/knowledgebase.html</a>.
    </p><p><a name="php-api-copyright"></a>
    <span class="emphasis"><em>Portions of this section are Copyright (c) 1997-2008 the
    PHP Documentation Group</em></span> This material may be distributed
    only subject to the terms and conditions set forth in the Creative
    Commons Attribution 3.0 License or later. A copy of the Creative
    Commons Attribution 3.0 license is distributed with this manual. The
    latest version is presently available at This material may be
    distributed only subject to the terms and conditio\ ns set forth in
    the Open Publication License, v1.0.8 or later (the latest version is
    presently available at
    <a href="http://www.opencontent.org/openpub/" target="_top">http://www.opencontent.org/openpub/</a>).
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="apis-php-mysql"></a>20.11.1. MySQL</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#apis-php-mysql.setup">20.11.1.1. Installing/Configuring</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysql.constants">20.11.1.2. Predefined Constants</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysql.examples">20.11.1.3. Examples</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-ref.mysql">20.11.1.4. MySQL Functions</a></span></dt></dl></div><p>
    <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
    Documentation Group.</a>
  </p><p>
    These functions allow you to access MySQL database servers. More
    information about MySQL can be found at
    <a href="http://www.mysql.com/" target="_top">http://www.mysql.com/</a>.
  </p><p>
    Documentation for MySQL can be found at
    <a href="http://dev.mysql.com/doc/" target="_top">http://dev.mysql.com/doc/</a>.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-mysql.setup"></a>20.11.1.1. Installing/Configuring</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#apis-php-mysql.requirements">20.11.1.1.1. Requirements</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysql.installation">20.11.1.1.2. Installation</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysql.configuration">20.11.1.1.3. Runtime Configuration</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysql.resources">20.11.1.1.4. Resource Types</a></span></dt></dl></div><p>
      <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
      Documentation Group.</a>
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysql.requirements"></a>20.11.1.1.1. Requirements</h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><p>
        In order to have these functions available, you must compile PHP
        with MySQL support.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysql.installation"></a>20.11.1.1.2. Installation</h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#apis-php-mysql.installation.linux">20.11.1.1.2.1. Installation on Linux Systems</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysql.installation.windows">20.11.1.1.2.2. Installation on Windows Systems</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysql.installation.notes">20.11.1.1.2.3. MySQL Installation Notes</a></span></dt></dl></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><p><a name="apis-php-mysql.configure"></a>
        For compiling, simply use the
        <code class="option">--with-mysql[=DIR]</code> configuration option where
        the optional <code class="literal">[DIR]</code> points to the MySQL
        installation directory.
      </p><p>
        Although this MySQL extension is compatible with MySQL 4.1.0 and
        greater, it doesn't support the extra functionality that
        these versions provide. For that, use the
        <a href="connectors-apis.html#apis-php-mysqli" title="20.11.2. MySQL Improved Extension (Mysqli)">MySQLi</a> extension.
      </p><p>
        If you would like to install the mysql extension along with the
        mysqli extension you have to use the same client library to
        avoid any conflicts.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="apis-php-mysql.installation.linux"></a>20.11.1.1.2.1. Installation on Linux Systems</h6></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#id3709406">20.11.1.1.2.1.1. PHP 4</a></span></dt><dt><span class="section"><a href="connectors-apis.html#id3709451">20.11.1.1.2.1.2. PHP 5+</a></span></dt></dl></div><p>
          <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
          Documentation Group.</a>
        </p><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="id3709406"></a>20.11.1.1.2.1.1. PHP 4</h6></div></div></div><p>
            <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the
            PHP Documentation Group.</a>
          </p><p>
            The option <code class="option">--with-mysql</code> is enabled by
            default. This default behavior may be disabled with the
            <code class="option">--without-mysql</code> configure option. If MySQL
            is enabled without specifying the path to the MySQL install
            DIR, PHP will use the bundled MySQL client libraries.
          </p><p>
            Users who run other applications that use MySQL (for
            example, auth-mysql) should not use the bundled library, but
            rather specify the path to MySQL's install directory,
            like so: <code class="option">--with-mysql=/path/to/mysql</code>. This
            will force PHP to use the client libraries installed by
            MySQL, thus avoiding any conflicts.
          </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="id3709451"></a>20.11.1.1.2.1.2. PHP 5+</h6></div></div></div><p>
            <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the
            PHP Documentation Group.</a>
          </p><p>
            MySQL is not enabled by default, nor is the MySQL library
            bundled with PHP. Read this
            <a href="http://www.php.net/manual/en/faq.databases.mysql.php5.php" target="_top">
            FAQ</a> for details on why. Use the
            <code class="option">--with-mysql[=DIR]</code> configure option to
            include MySQL support. You can download <span class="emphasis"><em>headers
            and libraries</em></span> from
            <a href="http://www.mysql.com/" target="_top">MySQL</a>.
          </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="apis-php-mysql.installation.windows"></a>20.11.1.1.2.2. Installation on Windows Systems</h6></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#id3709516">20.11.1.1.2.2.1. PHP 4</a></span></dt><dt><span class="section"><a href="connectors-apis.html#id3709537">20.11.1.1.2.2.2. PHP 5+</a></span></dt></dl></div><p>
          <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
          Documentation Group.</a>
        </p><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="id3709516"></a>20.11.1.1.2.2.1. PHP 4</h6></div></div></div><p>
            <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the
            PHP Documentation Group.</a>
          </p><p>
            The PHP MySQL extension is compiled into PHP.
          </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="id3709537"></a>20.11.1.1.2.2.2. PHP 5+</h6></div></div></div><p>
            <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the
            PHP Documentation Group.</a>
          </p><p>
            MySQL is no longer enabled by default, so the
            <code class="filename">php_mysql.dll</code> DLL must be enabled
            inside of <code class="filename">php.ini</code>. Also, PHP needs
            access to the MySQL client library. A file named
            <code class="filename">libmysql.dll</code> is included in the Windows
            PHP distribution and in order for PHP to talk to MySQL this
            file needs to be available to the Windows systems
            <code class="envar">PATH</code>. See the FAQ titled
            "<a href="http://www.php.net/manual/en/faq.installation.addtopath.php" target="_top">How
            do I add my PHP directory to the PATH on
            Windows</a>" for information on how to do this.
            Although copying <code class="filename">libmysql.dll</code> to the
            Windows system directory also works (because the system
            directory is by default in the system's
            <code class="envar">PATH</code>), it's not recommended.
          </p><p>
            As with enabling any PHP extension (such as
            <code class="filename">php_mysql.dll</code>), the PHP directive
            <a href="http://www.php.net/manual/en/ini.extension-dir.php" target="_top">extension_dir</a>
            should be set to the directory where the PHP extensions are
            located. See also the
            <a href="http://www.php.net/manual/en/install.windows.manual.php" target="_top">Manual
            Windows Installation Instructions</a>. An example
            extension_dir value for PHP 5 is
            <code class="literal">c:\php\ext</code>
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
              If when starting the web server an error similar to the
              following occurs: <code class="literal">"Unable to load dynamic
              library './php_mysql.dll'"</code>, this
              is because <code class="filename">php_mysql.dll</code> and/or
              <code class="filename">libmysql.dll</code> cannot be found by the
              system.
            </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="apis-php-mysql.installation.notes"></a>20.11.1.1.2.3. MySQL Installation Notes</h6></div></div></div><p>
          <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
          Documentation Group.</a>
        </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
            Crashes and startup problems of PHP may be encountered when
            loading this extension in conjunction with the recode
            extension. See the
            <a href="http://www.php.net/manual/en/ref.recode.php" target="_top">recode</a>
            extension for more information.
          </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            If you need charsets other than <span class="emphasis"><em>latin</em></span>
            (default), you have to install external (not bundled)
            libmysql with compiled charset support.
          </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysql.configuration"></a>20.11.1.1.3. Runtime Configuration</h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><p>
The behaviour of these functions is affected by settings in <code class="filename">php.ini</code>.
</p><p>
        </p><div class="table"><a name="id3709752"></a><p class="title"><b>Table 20.4. MySQL Configuration Options</b></p><table summary="MySQL Configuration Options" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Name</th><th>Default</th><th>Changeable</th><th>Changelog</th></tr></thead><tbody><tr><td>mysql.allow_persistent</td><td>"1"</td><td>PHP_INI_SYSTEM</td><td> </td></tr><tr><td>mysql.max_persistent</td><td>"-1"</td><td>PHP_INI_SYSTEM</td><td> </td></tr><tr><td>mysql.max_links</td><td>"-1"</td><td>PHP_INI_SYSTEM</td><td> </td></tr><tr><td>mysql.trace_mode</td><td>"0"</td><td>PHP_INI_ALL</td><td>Available since PHP 4.3.0.</td></tr><tr><td>mysql.default_port</td><td>NULL</td><td>PHP_INI_ALL</td><td> </td></tr><tr><td>mysql.default_socket</td><td>NULL</td><td>PHP_INI_ALL</td><td>Available since PHP 4.0.1.</td></tr><tr><td>mysql.default_host</td><td>NULL</td><td>PHP_INI_ALL</td><td> </td></tr><tr><td>mysql.default_user</td><td>NULL</td><td>PHP_INI_ALL</td><td> </td></tr><tr><td>mysql.default_password</td><td>NULL</td><td>PHP_INI_ALL</td><td> </td></tr><tr><td>mysql.connect_timeout</td><td>"60"</td><td>PHP_INI_ALL</td><td>PHP_INI_SYSTEM in PHP &lt;= 4.3.2. Available since PHP 4.3.0.</td></tr></tbody></table></div><p>

        For further details and definitions of the PHP_INI_* constants,
        see the
        <a href="http://www.php.net/manual/en/ini.php" target="_top">ini</a>.
      </p><p>
        Here's a short explanation of the configuration directives.
      </p><p>
        </p><div class="variablelist"><dl><dt><a name="apis-php-ini.mysql.allow-persistent"></a><span class="term">
              <em class="parameter"><code>mysql.allow_persistent</code></em>
              <span class="type">boolean</span>
            </span></dt><dd><p>
                Whether to allow
                <a href="http://www.php.net/manual/en/features.persistent-connections.php" target="_top">persistent
                connections</a> to MySQL.
              </p></dd><dt><a name="apis-php-ini.mysql.max-persistent"></a><span class="term">
              <em class="parameter"><code>mysql.max_persistent</code></em>
              <span class="type">integer</span>
            </span></dt><dd><p>
                The maximum number of persistent MySQL connections per
                process.
              </p></dd><dt><a name="apis-php-ini.mysql.max-links"></a><span class="term">
              <em class="parameter"><code>mysql.max_links</code></em>
              <span class="type">integer</span>
            </span></dt><dd><p>
                The maximum number of MySQL connections per process,
                including persistent connections.
              </p></dd><dt><a name="apis-php-ini.mysql.trace-mode"></a><span class="term">
              <em class="parameter"><code>mysql.trace_mode</code></em>
              <span class="type">boolean</span>
            </span></dt><dd><p>
                Trace mode. When <code class="literal">mysql.trace_mode</code> is
                enabled, warnings for table/index scans, non free result
                sets, and SQL-Errors will be displayed. (Introduced in
                PHP 4.3.0)
              </p></dd><dt><a name="apis-php-ini.mysql.default-port"></a><span class="term">
              <em class="parameter"><code>mysql.default_port</code></em>
              <span class="type">string</span>
            </span></dt><dd><p>
                The default TCP port number to use when connecting to
                the database server if no other port is specified. If no
                default is specified, the port will be obtained from the
                <code class="envar">MYSQL_TCP_PORT</code> environment variable, the
                <code class="literal">mysql-tcp</code> entry in
                <code class="filename">/etc/services</code> or the compile-time

                <code class="constant">MYSQL_PORT</code>

                constant, in that order. Win32 will only use the

                <code class="constant">MYSQL_PORT</code>

                constant.
              </p></dd><dt><a name="apis-php-ini.mysql.default-socket"></a><span class="term">
              <em class="parameter"><code>mysql.default_socket</code></em>
              <span class="type">string</span>
            </span></dt><dd><p>
                The default socket name to use when connecting to a
                local database server if no other socket name is
                specified.
              </p></dd><dt><a name="apis-php-ini.mysql.default-host"></a><span class="term">
              <em class="parameter"><code>mysql.default_host</code></em>
              <span class="type">string</span>
            </span></dt><dd><p>
                The default server host to use when connecting to the
                database server if no other host is specified.
                Doesn't apply in
                <a href="http://www.php.net/manual/en/ini.sql.safe-mode.php" target="_top">SQL
                safe mode</a>.
              </p></dd><dt><a name="apis-php-ini.mysql.default-user"></a><span class="term">
              <em class="parameter"><code>mysql.default_user</code></em>
              <span class="type">string</span>
            </span></dt><dd><p>
                The default user name to use when connecting to the
                database server if no other name is specified.
                Doesn't apply in
                <a href="http://www.php.net/manual/en/ini.sql.safe-mode.php" target="_top">SQL
                safe mode</a>.
              </p></dd><dt><a name="apis-php-ini.mysql.default-password"></a><span class="term">
              <em class="parameter"><code>mysql.default_password</code></em>
              <span class="type">string</span>
            </span></dt><dd><p>
                The default password to use when connecting to the
                database server if no other password is specified.
                Doesn't apply in
                <a href="http://www.php.net/manual/en/ini.sql.safe-mode.php" target="_top">SQL
                safe mode</a>.
              </p></dd><dt><a name="apis-php-ini.mysql.connect-timeout"></a><span class="term">
              <em class="parameter"><code>mysql.connect_timeout</code></em>
              <span class="type">integer</span>
            </span></dt><dd><p>
                Connect timeout in seconds. On Linux this timeout is
                also used for waiting for the first answer from the
                server.
              </p></dd></dl></div><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysql.resources"></a>20.11.1.1.4. Resource Types</h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><p>
        There are two resource types used in the MySQL module. The first
        one is the link identifier for a database connection, the second
        a resource which holds the result of a query.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-mysql.constants"></a>20.11.1.2. Predefined Constants</h4></div></div></div><p>
      <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
      Documentation Group.</a>
    </p><p>
The constants below are defined by this extension, and
will only be available when the extension has either
been compiled into PHP or dynamically loaded at runtime.
</p><p>
      Since PHP 4.3.0 it is possible to specify additional client flags
      for the
      <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
      and
      <a href="connectors-apis.html#apis-php-function.mysql-pconnect" title="20.11.1.4.39. mysql_pconnect"><code class="function">mysql_pconnect</code></a>
      functions. The following constants are defined:

      </p><div class="table"><a name="apis-php-mysql.client-flags"></a><p class="title"><b>Table 20.5. MySQL client constants</b></p><table summary="MySQL client constants" border="1"><colgroup><col><col></colgroup><thead><tr><th>Constant</th><th>Description</th></tr></thead><tbody><tr><td>MYSQL_CLIENT_COMPRESS</td><td>Use compression protocol</td></tr><tr><td>MYSQL_CLIENT_IGNORE_SPACE</td><td>Allow space after function names</td></tr><tr><td>MYSQL_CLIENT_INTERACTIVE</td><td>Allow interactive_timeout seconds (instead of wait_timeout) of
                inactivity before closing the connection.</td></tr><tr><td>MYSQL_CLIENT_SSL</td><td>Use SSL encryption. This flag is only available with version 4.x of the
                MySQL client library or newer. Version 3.23.x is bundled
                both with PHP 4 and Windows binaries of PHP 5.</td></tr></tbody></table></div><p>
    </p><p>
      The function
      <a href="connectors-apis.html#apis-php-function.mysql-fetch-array" title="20.11.1.4.14. mysql_fetch_array"><code class="function">mysql_fetch_array</code></a>
      uses a constant for the different types of result arrays. The
      following constants are defined:

      </p><div class="table"><a name="id3710510"></a><p class="title"><b>Table 20.6. MySQL fetch constants</b></p><table summary="MySQL fetch constants" border="1"><colgroup><col><col></colgroup><thead><tr><th>Constant</th><th>Description</th></tr></thead><tbody><tr><td>MYSQL_ASSOC</td><td>Columns are returned into the array having the fieldname as the array
                index.</td></tr><tr><td>MYSQL_BOTH</td><td>Columns are returned into the array having both a numerical index and
                the fieldname as the array index.</td></tr><tr><td>MYSQL_NUM</td><td>Columns are returned into the array having a numerical index to the
                fields. This index starts with 0, the first field in the
                result.</td></tr></tbody></table></div><p>
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-mysql.examples"></a>20.11.1.3. Examples</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#apis-php-mysql.examples-basic">20.11.1.3.1. Basic</a></span></dt></dl></div><p>
      <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
      Documentation Group.</a>
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysql.examples-basic"></a>20.11.1.3.1. Basic</h5></div></div></div><p>
        This simple example shows how to connect, execute a query, print
        resulting rows and disconnect from a MySQL database.

        </p><div class="example"><a name="id3710617"></a><p class="title"><b>Example 20.13. MySQL extension overview example</b></p><p>
            <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the
            PHP Documentation Group.</a>
          </p><pre class="programlisting">
&lt;?php
// Connecting, selecting database
$link = mysql_connect('mysql_host', 'mysql_user', 'mysql_password')
    or die('Could not connect: ' . mysql_error());
echo 'Connected successfully';
mysql_select_db('my_database') or die('Could not select database');

// Performing SQL query
$query = 'SELECT * FROM my_table';
$result = mysql_query($query) or die('Query failed: ' . mysql_error());

// Printing results in HTML
echo "&lt;table&gt;\n";
while ($line = mysql_fetch_array($result, MYSQL_ASSOC)) {
    echo "\t&lt;tr&gt;\n";
    foreach ($line as $col_value) {
        echo "\t\t&lt;td&gt;$col_value&lt;/td&gt;\n";
    }
    echo "\t&lt;/tr&gt;\n";
}
echo "&lt;/table&gt;\n";

// Free resultset
mysql_free_result($result);

// Closing connection
mysql_close($link);
?&gt;

    </pre></div><p>
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-ref.mysql"></a>20.11.1.4. MySQL Functions</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-affected-rows">20.11.1.4.1. <code class="literal">mysql_affected_rows</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-change-user">20.11.1.4.2. <code class="literal">mysql_change_user</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-client-encoding">20.11.1.4.3. <code class="literal">mysql_client_encoding</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-close">20.11.1.4.4. <code class="literal">mysql_close</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-connect">20.11.1.4.5. <code class="literal">mysql_connect</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-create-db">20.11.1.4.6. <code class="literal">mysql_create_db</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-data-seek">20.11.1.4.7. <code class="literal">mysql_data_seek</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-db-name">20.11.1.4.8. <code class="literal">mysql_db_name</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-db-query">20.11.1.4.9. <code class="literal">mysql_db_query</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-drop-db">20.11.1.4.10. <code class="literal">mysql_drop_db</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-errno">20.11.1.4.11. <code class="literal">mysql_errno</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-error">20.11.1.4.12. <code class="literal">mysql_error</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-escape-string">20.11.1.4.13. <code class="literal">mysql_escape_string</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-fetch-array">20.11.1.4.14. <code class="literal">mysql_fetch_array</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-fetch-assoc">20.11.1.4.15. <code class="literal">mysql_fetch_assoc</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-fetch-field">20.11.1.4.16. <code class="literal">mysql_fetch_field</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-fetch-lengths">20.11.1.4.17. <code class="literal">mysql_fetch_lengths</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-fetch-object">20.11.1.4.18. <code class="literal">mysql_fetch_object</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-fetch-row">20.11.1.4.19. <code class="literal">mysql_fetch_row</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-field-flags">20.11.1.4.20. <code class="literal">mysql_field_flags</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-field-len">20.11.1.4.21. <code class="literal">mysql_field_len</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-field-name">20.11.1.4.22. <code class="literal">mysql_field_name</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-field-seek">20.11.1.4.23. <code class="literal">mysql_field_seek</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-field-table">20.11.1.4.24. <code class="literal">mysql_field_table</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-field-type">20.11.1.4.25. <code class="literal">mysql_field_type</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-free-result">20.11.1.4.26. <code class="literal">mysql_free_result</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-get-client-info">20.11.1.4.27. <code class="literal">mysql_get_client_info</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-get-host-info">20.11.1.4.28. <code class="literal">mysql_get_host_info</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-get-proto-info">20.11.1.4.29. <code class="literal">mysql_get_proto_info</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-get-server-info">20.11.1.4.30. <code class="literal">mysql_get_server_info</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-info">20.11.1.4.31. <code class="literal">mysql_info</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-insert-id">20.11.1.4.32. <code class="literal">mysql_insert_id</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-list-dbs">20.11.1.4.33. <code class="literal">mysql_list_dbs</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-list-fields">20.11.1.4.34. <code class="literal">mysql_list_fields</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-list-processes">20.11.1.4.35. <code class="literal">mysql_list_processes</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-list-tables">20.11.1.4.36. <code class="literal">mysql_list_tables</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-num-fields">20.11.1.4.37. <code class="literal">mysql_num_fields</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-num-rows">20.11.1.4.38. <code class="literal">mysql_num_rows</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-pconnect">20.11.1.4.39. <code class="literal">mysql_pconnect</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-ping">20.11.1.4.40. <code class="literal">mysql_ping</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-query">20.11.1.4.41. <code class="literal">mysql_query</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-real-escape-string">20.11.1.4.42. <code class="literal">mysql_real_escape_string</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-result">20.11.1.4.43. <code class="literal">mysql_result</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-select-db">20.11.1.4.44. <code class="literal">mysql_select_db</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-set-charset">20.11.1.4.45. <code class="literal">mysql_set_charset</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-stat">20.11.1.4.46. <code class="literal">mysql_stat</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-tablename">20.11.1.4.47. <code class="literal">mysql_tablename</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-thread-id">20.11.1.4.48. <code class="literal">mysql_thread_id</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysql-unbuffered-query">20.11.1.4.49. <code class="literal">mysql_unbuffered_query</code></a></span></dt></dl></div><p>
      <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
      Documentation Group.</a>
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Most MySQL functions accept
        <em class="parameter"><code>link_identifier</code></em> as the last optional
        parameter. If it is not provided, last opened connection is
        used. If it doesn't exist, connection is tried to establish
        with default parameters defined in <code class="filename">php.ini</code>.
        If it is not successful, functions return

        <code class="constant">FALSE</code>

        .
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-affected-rows"></a>20.11.1.4.1. <code class="literal">mysql_affected_rows</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_affected_rows</code>
          </p><p>
            Get number of affected rows in previous MySQL operation
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysql_affected_rows</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Get the number of affected rows by the last INSERT, UPDATE,
        REPLACE or DELETE query associated with
        <em class="parameter"><code>link_identifier</code></em>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the number of affected rows on success, and -1 if the
        last query failed.
      </p><p>
        If the last query was a DELETE query with no WHERE clause, all
        of the records will have been deleted from the table but this
        function will return zero with MySQL versions prior to 4.1.2.
      </p><p>
        When using UPDATE, MySQL will not update columns where the new
        value is the same as the old value. This creates the possibility
        that
        <a href="connectors-apis.html#apis-php-function.mysql-affected-rows" title="20.11.1.4.1. mysql_affected_rows"><code class="function">mysql_affected_rows</code></a>
        may not actually equal the number of rows matched, only the
        number of rows that were literally affected by the query.
      </p><p>
        The REPLACE statement first deletes the record with the same
        primary key and then inserts the new record. This function
        returns the number of deleted records plus the number of
        inserted records.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3710912"></a><p class="title"><b>Example 20.14. <a href="connectors-apis.html#apis-php-function.mysql-affected-rows" title="20.11.1.4.1. mysql_affected_rows"><code class="function">mysql_affected_rows</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db('mydb');

/* this should return the correct numbers of deleted records */
mysql_query('DELETE FROM mytable WHERE id &lt; 10');
printf("Records deleted: %d\n", mysql_affected_rows());

/* with a where clause that is never true, it should return 0 */
mysql_query('DELETE FROM mytable WHERE 0');
printf("Records deleted: %d\n", mysql_affected_rows());
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


Records deleted: 10
Records deleted: 0


          </pre></div><p>
      </p><p>
        </p><div class="example"><a name="id3710957"></a><p class="title"><b>Example 20.15. <a href="connectors-apis.html#apis-php-function.mysql-affected-rows" title="20.11.1.4.1. mysql_affected_rows"><code class="function">mysql_affected_rows</code></a>
            example using transactions</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db('mydb');

/* Update records */
mysql_query("UPDATE mytable SET used=1 WHERE id &lt; 10");
printf ("Updated records: %d\n", mysql_affected_rows());
mysql_query("COMMIT");
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


Updated Records: 10


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Transactions</h3><p>
          If you are using transactions, you need to call
          <a href="connectors-apis.html#apis-php-function.mysql-affected-rows" title="20.11.1.4.1. mysql_affected_rows"><code class="function">mysql_affected_rows</code></a>
          after your INSERT, UPDATE, or DELETE query, not after the
          COMMIT.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">SELECT Statements</h3><p>
          To retrieve the number of rows returned by a SELECT, it is
          possible to use
          <a href="connectors-apis.html#apis-php-function.mysql-num-rows" title="20.11.1.4.38. mysql_num_rows"><code class="function">mysql_num_rows</code></a>.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-num-rows" title="20.11.1.4.38. mysql_num_rows"><code class="function">mysql_num_rows</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-info" title="20.11.1.4.31. mysql_info"><code class="function">mysql_info</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-change-user"></a>20.11.1.4.2. <code class="literal">mysql_change_user</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_change_user</code>
          </p><p>
            Change logged in user of the active connection
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysql_change_user</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">user</span></span>,<br>                      <span class="methodparam"><span class="type">string </span><span class="parameter">password</span></span>,<br>                      <span class="methodparam"><span class="type">string </span><span class="parameter">database</span></span>,<br>                      <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        <a href="connectors-apis.html#apis-php-function.mysql-change-user" title="20.11.1.4.2. mysql_change_user"><code class="function">mysql_change_user</code></a>
        changes the logged in user of the current active connection, or
        the connection given by the optional
        <em class="parameter"><code>link_identifier</code></em> parameter. If a database
        is specified, this will be the current database after the user
        has been changed. If the new user and password authorization
        fails, the current connected user stays active.
      </p><p>
        This function is deprecated and no longer exists in PHP.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>user</code></em>
            </span></dt><dd><p>
                The new MySQL username.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>password</code></em>
            </span></dt><dd><p>
                The new MySQL password.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>database</code></em>
            </span></dt><dd><p>
                The MySQL database. If not specified, the current
                selected database is used.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>ChangeLog</strong></span>
      </p><p>
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Version</th><th>Description</th></tr></thead><tbody><tr><td>3.0.14</td><td>This function was removed from PHP.</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Requirements</h3><p>
          This function requires MySQL 3.23.3 or higher.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-select-db" title="20.11.1.4.44. mysql_select_db"><code class="function">mysql_select_db</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-client-encoding"></a>20.11.1.4.3. <code class="literal">mysql_client_encoding</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_client_encoding</code>
          </p><p>
            Returns the name of the character set
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_client_encoding</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Retrieves the <code class="literal">character_set</code> variable from
        MySQL.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the default character set name for the current
        connection.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3711697"></a><p class="title"><b>Example 20.16. <a href="connectors-apis.html#apis-php-function.mysql-client-encoding" title="20.11.1.4.3. mysql_client_encoding"><code class="function">mysql_client_encoding</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link    = mysql_connect('localhost', 'mysql_user', 'mysql_password');
$charset = mysql_client_encoding($link);

echo "The current character set is: $charset\n";
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


The current character set is: latin1


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-set-charset" title="20.11.1.4.45. mysql_set_charset"><code class="function">mysql_set_charset</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-real-escape-string" title="20.11.1.4.42. mysql_real_escape_string"><code class="function">mysql_real_escape_string</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-close"></a>20.11.1.4.4. <code class="literal">mysql_close</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_close</code>
          </p><p>
            Close MySQL connection
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysql_close</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        <a href="connectors-apis.html#apis-php-function.mysql-close" title="20.11.1.4.4. mysql_close"><code class="function">mysql_close</code></a>
        closes the non-persistent connection to the MySQL server
        that's associated with the specified link identifier. If
        <em class="parameter"><code>link_identifier</code></em> isn't specified, the
        last opened link is used.
      </p><p>
        Using
        <a href="connectors-apis.html#apis-php-function.mysql-close" title="20.11.1.4.4. mysql_close"><code class="function">mysql_close</code></a>
        isn't usually necessary, as non-persistent open links are
        automatically closed at the end of the script's execution.
        See also
        <a href="http://www.php.net/manual/en/language.types.resource.self-destruct.php" target="_top">freeing
        resources</a>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3711996"></a><p class="title"><b>Example 20.17. <a href="connectors-apis.html#apis-php-function.mysql-close" title="20.11.1.4.4. mysql_close"><code class="function">mysql_close</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
echo 'Connected successfully';
mysql_close($link);
?&gt;

    </pre><p>
            The above example will output:
          </p><pre class="screen">


Connected successfully


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <a href="connectors-apis.html#apis-php-function.mysql-close" title="20.11.1.4.4. mysql_close"><code class="function">mysql_close</code></a>
          will not close persistent links created by
          <a href="connectors-apis.html#apis-php-function.mysql-pconnect" title="20.11.1.4.39. mysql_pconnect"><code class="function">mysql_pconnect</code></a>.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-free-result" title="20.11.1.4.26. mysql_free_result"><code class="function">mysql_free_result</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-connect"></a>20.11.1.4.5. <code class="literal">mysql_connect</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_connect</code>
          </p><p>
            Open a connection to a MySQL Server
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">resource </span><span class="methodname">mysql_connect</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">server</span></span>,<br>                       <span class="methodparam"><span class="type">string </span><span class="parameter">username</span></span>,<br>                       <span class="methodparam"><span class="type">string </span><span class="parameter">password</span></span>,<br>                       <span class="methodparam"><span class="type">bool </span><span class="parameter">new_link</span></span>,<br>                       <span class="methodparam"><span class="type">int </span><span class="parameter">client_flags</span></span>);</code><p>
        Opens or reuses a connection to a MySQL server.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>server</code></em>
            </span></dt><dd><p>
                The MySQL server. It can also include a port number.
                e.g. "hostname:port" or a path to a local
                socket e.g. ":/path/to/socket" for the
                localhost.
              </p><p>
                If the PHP directive
                <a href="http://www.php.net/manual/en/ini.mysql.default-host.php" target="_top">
                mysql.default_host</a> is undefined (default), then
                the default value is 'localhost:3306'. In
                <a href="http://www.php.net/manual/en/ini.sql.safe-mode.php" target="_top">SQL
                safe mode</a>, this parameter is ignored and value
                'localhost:3306' is always used.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>username</code></em>
            </span></dt><dd><p>
                The username. Default value is defined by
                <a href="http://www.php.net/manual/en/ini.mysql.default-user.php" target="_top">mysql.default_user</a>.
                In
                <a href="http://www.php.net/manual/en/ini.sql.safe-mode.php" target="_top">SQL
                safe mode</a>, this parameter is ignored and the
                name of the user that owns the server process is used.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>password</code></em>
            </span></dt><dd><p>
                The password. Default value is defined by
                <a href="http://www.php.net/manual/en/ini.mysql.default-password.php" target="_top">mysql.default_password</a>.
                In
                <a href="http://www.php.net/manual/en/ini.sql.safe-mode.php" target="_top">SQL
                safe mode</a>, this parameter is ignored and empty
                password is used.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>new_link</code></em>
            </span></dt><dd><p>
                If a second call is made to
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                with the same arguments, no new link will be
                established, but instead, the link identifier of the
                already opened link will be returned. The
                <em class="parameter"><code>new_link</code></em> parameter modifies this
                behavior and makes
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                always open a new link, even if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called before with the same parameters. In
                <a href="http://www.php.net/manual/en/ini.sql.safe-mode.php" target="_top">SQL
                safe mode</a>, this parameter is ignored.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>client_flags</code></em>
            </span></dt><dd><p>
                The <em class="parameter"><code>client_flags</code></em> parameter can be
                a combination of the following constants: 128 (enable
                <code class="literal">LOAD DATA LOCAL</code> handling),

                <code class="constant">MYSQL_CLIENT_SSL</code>

                ,

                <code class="constant">MYSQL_CLIENT_COMPRESS</code>

                ,

                <code class="constant">MYSQL_CLIENT_IGNORE_SPACE</code>

                or

                <code class="constant">MYSQL_CLIENT_INTERACTIVE</code>

                . Read the section about
                <a href="connectors-apis.html#apis-php-mysql.client-flags" title="Table 20.5. MySQL client constants">Table 20.5, “MySQL client constants”</a> for
                further information. In
                <a href="http://www.php.net/manual/en/ini.sql.safe-mode.php" target="_top">SQL
                safe mode</a>, this parameter is ignored.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a MySQL link identifier on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>ChangeLog</strong></span>
      </p><p>
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Version</th><th>Description</th></tr></thead><tbody><tr><td>4.3.0</td><td>Added the <em class="parameter"><code>client_flags</code></em> parameter.</td></tr><tr><td>4.2.0</td><td>Added the <em class="parameter"><code>new_link</code></em> parameter.</td></tr><tr><td>3.0.10</td><td>Added support for ":/path/to/socket" with
                  <em class="parameter"><code>server</code></em>.</td></tr><tr><td>3.0.0</td><td>Added support for ":port" with <em class="parameter"><code>server</code></em>.</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3712661"></a><p class="title"><b>Example 20.18. <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
echo 'Connected successfully';
mysql_close($link);
?&gt;

    </pre></div><p>
      </p><p>
        </p><div class="example"><a name="id3712692"></a><p class="title"><b>Example 20.19. <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
            example using <code class="literal">hostname:port</code> syntax</b></p><pre class="programlisting">
&lt;?php
// we connect to example.com and port 3307
$link = mysql_connect('example.com:3307', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
echo 'Connected successfully';
mysql_close($link);

// we connect to localhost at port 3307
$link = mysql_connect('127.0.0.1:3307', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
echo 'Connected successfully';
mysql_close($link);
?&gt;

    </pre></div><p>
      </p><p>
        </p><div class="example"><a name="id3712738"></a><p class="title"><b>Example 20.20. <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
            example using ":/path/to/socket" syntax</b></p><pre class="programlisting">
&lt;?php
// we connect to localhost and socket e.g. /tmp/mysql.sock

//variant 1: ommit localhost
$link = mysql_connect(':/tmp/mysql', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
echo 'Connected successfully';
mysql_close($link);


// variant 2: with localhost
$link = mysql_connect('localhost:/tmp/mysql.sock', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
echo 'Connected successfully';
mysql_close($link);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Whenever you specify "localhost" or
          "localhost:port" as server, the MySQL client library
          will override this and try to connect to a local socket (named
          pipe on Windows). If you want to use TCP/IP, use
          "127.0.0.1" instead of "localhost". If the
          MySQL client library tries to connect to the wrong local
          socket, you should set the correct path as
          <a href="http://www.php.net/manual/en/ini.mysql.default-host.php" target="_top">ini.mysql.default-host</a>
          in your PHP configuration and leave the server field blank.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The link to the server will be closed as soon as the execution
          of the script ends, unless it's closed earlier by
          explicitly calling
          <a href="connectors-apis.html#apis-php-function.mysql-close" title="20.11.1.4.4. mysql_close"><code class="function">mysql_close</code></a>.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          You can suppress the error message on failure by prepending a
          <a href="http://www.php.net/manual/en/language.operators.errorcontrol.php" target="_top">@</a>
          to the function name.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Error "Can't create TCP/IP socket (10106)"
          usually means that the
          <a href="http://www.php.net/manual/en/ini.variables-order.php" target="_top">variables_order</a>
          configure directive doesn't contain character
          <code class="literal">E</code>. On Windows, if the environment is not
          copied the <code class="literal">SYSTEMROOT</code> environment variable
          won't be available and PHP will have problems loading
          Winsock.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-pconnect" title="20.11.1.4.39. mysql_pconnect"><code class="function">mysql_pconnect</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-close" title="20.11.1.4.4. mysql_close"><code class="function">mysql_close</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-create-db"></a>20.11.1.4.6. <code class="literal">mysql_create_db</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_create_db</code>
          </p><p>
            Create a MySQL database
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysql_create_db</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">database_name</span></span>,<br>                     <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        <a href="connectors-apis.html#apis-php-function.mysql-create-db" title="20.11.1.4.6. mysql_create_db"><code class="function">mysql_create_db</code></a>
        attempts to create a new database on the server associated with
        the specified link identifier.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>database_name</code></em>
            </span></dt><dd><p>
                The name of the database being created.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3713138"></a><p class="title"><b>Example 20.21. <a href="connectors-apis.html#apis-php-function.mysql-create-db" title="20.11.1.4.6. mysql_create_db"><code class="function">mysql_create_db</code></a>
            alternative example</b></p><p>
            The function
            <a href="connectors-apis.html#apis-php-function.mysql-create-db" title="20.11.1.4.6. mysql_create_db"><code class="function">mysql_create_db</code></a>
            is deprecated. It is preferable to use
            <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>
            to issue a sql <code class="literal">CREATE DATABASE</code> statement
            instead.
          </p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}

$sql = 'CREATE DATABASE my_db';
if (mysql_query($sql, $link)) {
    echo "Database my_db created successfully\n";
} else {
    echo 'Error creating database: ' . mysql_error() . "\n";
}
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


Database my_db created successfully


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="function">mysql_createdb</code>
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This function will not be available if the MySQL extension was
          built against a MySQL 4.x client library.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-select-db" title="20.11.1.4.44. mysql_select_db"><code class="function">mysql_select_db</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-data-seek"></a>20.11.1.4.7. <code class="literal">mysql_data_seek</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_data_seek</code>
          </p><p>
            Move internal result pointer
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysql_data_seek</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                     <span class="methodparam"><span class="type">int </span><span class="parameter">row_number</span></span>);</code><p>
        <a href="connectors-apis.html#apis-php-function.mysql-data-seek" title="20.11.1.4.7. mysql_data_seek"><code class="function">mysql_data_seek</code></a>
        moves the internal row pointer of the MySQL result associated
        with the specified result identifier to point to the specified
        row number. The next call to a MySQL fetch function, such as
        <a href="connectors-apis.html#apis-php-function.mysql-fetch-assoc" title="20.11.1.4.15. mysql_fetch_assoc"><code class="function">mysql_fetch_assoc</code></a>,
        would return that row.
      </p><p>
        <em class="parameter"><code>row_number</code></em> starts at 0. The
        <em class="parameter"><code>row_number</code></em> should be a value in the range
        from 0 to
        <a href="connectors-apis.html#apis-php-function.mysql-num-rows" title="20.11.1.4.38. mysql_num_rows"><code class="function">mysql_num_rows</code></a>
        - 1. However if the result set is empty
        (<a href="connectors-apis.html#apis-php-function.mysql-num-rows" title="20.11.1.4.38. mysql_num_rows"><code class="function">mysql_num_rows</code></a>
        == 0), a seek to 0 will fail with a
        <a href="http://www.php.net/manual/en/errorfunc.constants.errorlevels.e-warning.php" target="_top">E_WARNING</a>
        and
        <a href="connectors-apis.html#apis-php-function.mysql-data-seek" title="20.11.1.4.7. mysql_data_seek"><code class="function">mysql_data_seek</code></a>
        will return

        <code class="constant">FALSE</code>

        .
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>row_number</code></em>
            </span></dt><dd><p>
                The desired row number of the new result pointer.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3713566"></a><p class="title"><b>Example 20.22. <a href="connectors-apis.html#apis-php-function.mysql-data-seek" title="20.11.1.4.7. mysql_data_seek"><code class="function">mysql_data_seek</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
$db_selected = mysql_select_db('sample_db');
if (!$db_selected) {
    die('Could not select database: ' . mysql_error());
}
$query = 'SELECT last_name, first_name FROM friends';
$result = mysql_query($query);
if (!$result) {
    die('Query failed: ' . mysql_error());
}
/* fetch rows in reverse order */
for ($i = mysql_num_rows($result) - 1; $i &gt;= 0; $i--) {
    if (!mysql_data_seek($result, $i)) {
        echo "Cannot seek to row $i: " . mysql_error() . "\n";
        continue;
    }

    if (!($row = mysql_fetch_assoc($result))) {
        continue;
    }

    echo $row['last_name'] . ' ' . $row['first_name'] . "&lt;br /&gt;\n";
}

mysql_free_result($result);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The function
          <a href="connectors-apis.html#apis-php-function.mysql-data-seek" title="20.11.1.4.7. mysql_data_seek"><code class="function">mysql_data_seek</code></a>
          can be used in conjunction only with
          <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>,
          not with
          <a href="connectors-apis.html#apis-php-function.mysql-unbuffered-query" title="20.11.1.4.49. mysql_unbuffered_query"><code class="function">mysql_unbuffered_query</code></a>.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-num-rows" title="20.11.1.4.38. mysql_num_rows"><code class="function">mysql_num_rows</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-row" title="20.11.1.4.19. mysql_fetch_row"><code class="function">mysql_fetch_row</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-assoc" title="20.11.1.4.15. mysql_fetch_assoc"><code class="function">mysql_fetch_assoc</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-array" title="20.11.1.4.14. mysql_fetch_array"><code class="function">mysql_fetch_array</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-object" title="20.11.1.4.18. mysql_fetch_object"><code class="function">mysql_fetch_object</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-db-name"></a>20.11.1.4.8. <code class="literal">mysql_db_name</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_db_name</code>
          </p><p>
            Get result data
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_db_name</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                     <span class="methodparam"><span class="type">int </span><span class="parameter">row</span></span>,<br>                     <span class="methodparam"><span class="type">mixed </span><span class="parameter">field</span></span>);</code><p>
        Retrieve the database name from a call to
        <a href="connectors-apis.html#apis-php-function.mysql-list-dbs" title="20.11.1.4.33. mysql_list_dbs"><code class="function">mysql_list_dbs</code></a>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>result</code></em>
            </span></dt><dd><p>
                The result pointer from a call to
                <a href="connectors-apis.html#apis-php-function.mysql-list-dbs" title="20.11.1.4.33. mysql_list_dbs"><code class="function">mysql_list_dbs</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>row</code></em>
            </span></dt><dd><p>
                The index into the result set.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>field</code></em>
            </span></dt><dd><p>
                The field name.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the database name on success, and

        <code class="constant">FALSE</code>

        on failure. If

        <code class="constant">FALSE</code>

        is returned, use
        <a href="connectors-apis.html#apis-php-function.mysql-error" title="20.11.1.4.12. mysql_error"><code class="function">mysql_error</code></a>
        to determine the nature of the error.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3713988"></a><p class="title"><b>Example 20.23. <a href="connectors-apis.html#apis-php-function.mysql-db-name" title="20.11.1.4.8. mysql_db_name"><code class="function">mysql_db_name</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
error_reporting(E_ALL);

$link = mysql_connect('dbhost', 'username', 'password');
$db_list = mysql_list_dbs($link);

$i = 0;
$cnt = mysql_num_rows($db_list);
while ($i &lt; $cnt) {
    echo mysql_db_name($db_list, $i) . "\n";
    $i++;
}
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="function">mysql_dbname</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-list-dbs" title="20.11.1.4.33. mysql_list_dbs"><code class="function">mysql_list_dbs</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-tablename" title="20.11.1.4.47. mysql_tablename"><code class="function">mysql_tablename</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-db-query"></a>20.11.1.4.9. <code class="literal">mysql_db_query</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_db_query</code>
          </p><p>
            Send a MySQL query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">resource </span><span class="methodname">mysql_db_query</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">database</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>,<br>                        <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        <a href="connectors-apis.html#apis-php-function.mysql-db-query" title="20.11.1.4.9. mysql_db_query"><code class="function">mysql_db_query</code></a>
        selects a database, and executes a query on it.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>database</code></em>
            </span></dt><dd><p>
                The name of the database that will be selected.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>query</code></em>
            </span></dt><dd><p>
                The MySQL query.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a positive MySQL result resource to the query result, or

        <code class="constant">FALSE</code>

        on error. The function also returns

        <code class="constant">TRUE</code>

        /

        <code class="constant">FALSE</code>

        for
        <code class="literal">INSERT</code>/<code class="literal">UPDATE</code>/<code class="literal">DELETE</code>
        queries to indicate success/failure.
      </p><p>
        <span class="bold"><strong>ChangeLog</strong></span>
      </p><p>
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Version</th><th>Description</th></tr></thead><tbody><tr><td>5.3.0</td><td>This function now throws an E_DEPRECATED notice.</td></tr><tr><td>4.0.6</td><td>This function is deprecated, do not use this function. Use
                  <a href="connectors-apis.html#apis-php-function.mysql-select-db" title="20.11.1.4.44. mysql_select_db"><code class="function">mysql_select_db</code></a>
                  and
                  <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>
                  instead.</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3714449"></a><p class="title"><b>Example 20.24. <a href="connectors-apis.html#apis-php-function.mysql-db-query" title="20.11.1.4.9. mysql_db_query"><code class="function">mysql_db_query</code></a>
            alternative example</b></p><pre class="programlisting">
&lt;?php

if (!$link = mysql_connect('mysql_host', 'mysql_user', 'mysql_password')) {
    echo 'Could not connect to mysql';
    exit;
}

if (!mysql_select_db('mysql_dbname', $link)) {
    echo 'Could not select database';
    exit;
}

$sql    = 'SELECT foo FROM bar WHERE id = 42';
$result = mysql_query($sql, $link);

if (!$result) {
    echo "DB Error, could not query the database\n";
    echo 'MySQL Error: ' . mysql_error();
    exit;
}

while ($row = mysql_fetch_assoc($result)) {
    echo $row['foo'];
}

mysql_free_result($result);

?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Be aware that this function does <span class="emphasis"><em>NOT</em></span>
          switch back to the database you were connected before. In
          other words, you can't use this function to
          <span class="emphasis"><em>temporarily</em></span> run a sql query on another
          database, you would have to manually switch back. Users are
          strongly encouraged to use the
          <code class="literal">database.table</code> syntax in their sql queries
          or
          <a href="connectors-apis.html#apis-php-function.mysql-select-db" title="20.11.1.4.44. mysql_select_db"><code class="function">mysql_select_db</code></a>
          instead of this function.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-select-db" title="20.11.1.4.44. mysql_select_db"><code class="function">mysql_select_db</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-drop-db"></a>20.11.1.4.10. <code class="literal">mysql_drop_db</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_drop_db</code>
          </p><p>
            Drop (delete) a MySQL database
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysql_drop_db</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">database_name</span></span>,<br>                   <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        <a href="connectors-apis.html#apis-php-function.mysql-drop-db" title="20.11.1.4.10. mysql_drop_db"><code class="function">mysql_drop_db</code></a>
        attempts to drop (remove) an entire database from the server
        associated with the specified link identifier. This function is
        deprecated, it is preferable to use
        <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>
        to issue a sql <code class="literal">DROP DATABASE</code> statement
        instead.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>database_name</code></em>
            </span></dt><dd><p>
                The name of the database that will be deleted.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3714817"></a><p class="title"><b>Example 20.25. <a href="connectors-apis.html#apis-php-function.mysql-drop-db" title="20.11.1.4.10. mysql_drop_db"><code class="function">mysql_drop_db</code></a>
            alternative example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}

$sql = 'DROP DATABASE my_db';
if (mysql_query($sql, $link)) {
    echo "Database my_db was successfully dropped\n";
} else {
    echo 'Error dropping database: ' . mysql_error() . "\n";
}
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          This function will not be available if the MySQL extension was
          built against a MySQL 4.x client library.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="function">mysql_dropdb</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-errno"></a>20.11.1.4.11. <code class="literal">mysql_errno</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_errno</code>
          </p><p>
            Returns the numerical value of the error message from
            previous MySQL operation
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysql_errno</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Returns the error number from the last MySQL function.
      </p><p>
        Errors coming back from the MySQL database backend no longer
        issue warnings. Instead, use
        <a href="connectors-apis.html#apis-php-function.mysql-errno" title="20.11.1.4.11. mysql_errno"><code class="function">mysql_errno</code></a>
        to retrieve the error code. Note that this function only returns
        the error code from the most recently executed MySQL function
        (not including
        <a href="connectors-apis.html#apis-php-function.mysql-error" title="20.11.1.4.12. mysql_error"><code class="function">mysql_error</code></a>
        and
        <a href="connectors-apis.html#apis-php-function.mysql-errno" title="20.11.1.4.11. mysql_errno"><code class="function">mysql_errno</code></a>),
        so if you want to use it, make sure you check the value before
        calling another MySQL function.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the error number from the last MySQL function, or
        <code class="literal">0</code> (zero) if no error occurred.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3715128"></a><p class="title"><b>Example 20.26. <a href="connectors-apis.html#apis-php-function.mysql-errno" title="20.11.1.4.11. mysql_errno"><code class="function">mysql_errno</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect("localhost", "mysql_user", "mysql_password");

if (!mysql_select_db("nonexistentdb", $link)) {
    echo mysql_errno($link) . ": " . mysql_error($link). "\n";
}

mysql_select_db("kossu", $link);
if (!mysql_query("SELECT * FROM nonexistenttable", $link)) {
    echo mysql_errno($link) . ": " . mysql_error($link) . "\n";
}
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


1049: Unknown database 'nonexistentdb'
1146: Table 'kossu.nonexistenttable' doesn't exist


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-error" title="20.11.1.4.12. mysql_error"><code class="function">mysql_error</code></a>

          </td></tr><tr><td><a href="http://dev.mysql.com/doc/mysql/en/error-handling.html" target="_top">MySQL error codes</a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-error"></a>20.11.1.4.12. <code class="literal">mysql_error</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_error</code>
          </p><p>
            Returns the text of the error message from previous MySQL
            operation
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_error</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Returns the error text from the last MySQL function. Errors
        coming back from the MySQL database backend no longer issue
        warnings. Instead, use
        <a href="connectors-apis.html#apis-php-function.mysql-error" title="20.11.1.4.12. mysql_error"><code class="function">mysql_error</code></a>
        to retrieve the error text. Note that this function only returns
        the error text from the most recently executed MySQL function
        (not including
        <a href="connectors-apis.html#apis-php-function.mysql-error" title="20.11.1.4.12. mysql_error"><code class="function">mysql_error</code></a>
        and
        <a href="connectors-apis.html#apis-php-function.mysql-errno" title="20.11.1.4.11. mysql_errno"><code class="function">mysql_errno</code></a>),
        so if you want to use it, make sure you check the value before
        calling another MySQL function.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the error text from the last MySQL function, or
        <code class="literal">''</code> (empty string) if no error
        occurred.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3715425"></a><p class="title"><b>Example 20.27. <a href="connectors-apis.html#apis-php-function.mysql-error" title="20.11.1.4.12. mysql_error"><code class="function">mysql_error</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect("localhost", "mysql_user", "mysql_password");

mysql_select_db("nonexistentdb", $link);
echo mysql_errno($link) . ": " . mysql_error($link). "\n";

mysql_select_db("kossu", $link);
mysql_query("SELECT * FROM nonexistenttable", $link);
echo mysql_errno($link) . ": " . mysql_error($link) . "\n";
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


1049: Unknown database 'nonexistentdb'
1146: Table 'kossu.nonexistenttable' doesn't exist


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-errno" title="20.11.1.4.11. mysql_errno"><code class="function">mysql_errno</code></a>

          </td></tr><tr><td><a href="http://dev.mysql.com/doc/mysql/en/error-handling.html" target="_top">MySQL error codes</a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-escape-string"></a>20.11.1.4.13. <code class="literal">mysql_escape_string</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_escape_string</code>
          </p><p>
            Escapes a string for use in a mysql_query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_escape_string</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">unescaped_string</span></span>);</code><p>
        This function will escape the
        <em class="parameter"><code>unescaped_string</code></em>, so that it is safe to
        place it in a
        <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>.
        This function is deprecated.
      </p><p>
        This function is identical to
        <a href="connectors-apis.html#apis-php-function.mysql-real-escape-string" title="20.11.1.4.42. mysql_real_escape_string"><code class="function">mysql_real_escape_string</code></a>
        except that
        <a href="connectors-apis.html#apis-php-function.mysql-real-escape-string" title="20.11.1.4.42. mysql_real_escape_string"><code class="function">mysql_real_escape_string</code></a>
        takes a connection handler and escapes the string according to
        the current character set.
        <a href="connectors-apis.html#apis-php-function.mysql-escape-string" title="20.11.1.4.13. mysql_escape_string"><code class="function">mysql_escape_string</code></a>
        does not take a connection argument and does not respect the
        current charset setting.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>unescaped_string</code></em>
            </span></dt><dd><p>
                The string that is to be escaped.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the escaped string.
      </p><p>
        <span class="bold"><strong>ChangeLog</strong></span>
      </p><p>
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Version</th><th>Description</th></tr></thead><tbody><tr><td>5.3.0</td><td>This function now throws an E_DEPRECATED notice.</td></tr><tr><td>4.3.0</td><td>This function became deprecated, do not use this function. Instead, use
                  <a href="connectors-apis.html#apis-php-function.mysql-real-escape-string" title="20.11.1.4.42. mysql_real_escape_string"><code class="function">mysql_real_escape_string</code></a>.</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3715781"></a><p class="title"><b>Example 20.28. <a href="connectors-apis.html#apis-php-function.mysql-escape-string" title="20.11.1.4.13. mysql_escape_string"><code class="function">mysql_escape_string</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$item = "Zak's Laptop";
$escaped_item = mysql_escape_string($item);
printf("Escaped string: %s\n", $escaped_item);
?&gt;

    </pre><p>
            The above example will output:
          </p><pre class="screen">


Escaped string: Zak\'s Laptop


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <a href="connectors-apis.html#apis-php-function.mysql-escape-string" title="20.11.1.4.13. mysql_escape_string"><code class="function">mysql_escape_string</code></a>
          does not escape <code class="literal">%</code> and <code class="literal">_</code>.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-real-escape-string" title="20.11.1.4.42. mysql_real_escape_string"><code class="function">mysql_real_escape_string</code></a>

          </td></tr><tr><td><code class="function">addslashes</code>

          </td></tr><tr><td>The <a href="http://www.php.net/manual/en/ini.magic-quotes-gpc.php" target="_top">magic_quotes_gpc</a> directive.</td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-fetch-array"></a>20.11.1.4.14. <code class="literal">mysql_fetch_array</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_fetch_array</code>
          </p><p>
            Fetch a result row as an associative array, a numeric array,
            or both
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">array </span><span class="methodname">mysql_fetch_array</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                        <span class="methodparam"><span class="type">int </span><span class="parameter">result_type</span></span>);</code><p>
        Returns an array that corresponds to the fetched row and moves
        the internal data pointer ahead.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>result_type</code></em>
            </span></dt><dd><p>
                The type of array that is to be fetched. It's a
                constant and can take the following values:

                <code class="constant">MYSQL_ASSOC</code>

                ,

                <code class="constant">MYSQL_NUM</code>

                , and the default value of

                <code class="constant">MYSQL_BOTH</code>

                .
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an array of strings that corresponds to the fetched row,
        or

        <code class="constant">FALSE</code>

        if there are no more rows. The type of returned array depends on
        how <em class="parameter"><code>result_type</code></em> is defined. By using

        <code class="constant">MYSQL_BOTH</code>

        (default), you'll get an array with both associative and
        number indices. Using

        <code class="constant">MYSQL_ASSOC</code>

        , you only get associative indices (as
        <a href="connectors-apis.html#apis-php-function.mysql-fetch-assoc" title="20.11.1.4.15. mysql_fetch_assoc"><code class="function">mysql_fetch_assoc</code></a>
        works), using

        <code class="constant">MYSQL_NUM</code>

        , you only get number indices (as
        <a href="connectors-apis.html#apis-php-function.mysql-fetch-row" title="20.11.1.4.19. mysql_fetch_row"><code class="function">mysql_fetch_row</code></a>
        works).
      </p><p>
        If two or more columns of the result have the same field names,
        the last column will take precedence. To access the other
        column(s) of the same name, you must use the numeric index of
        the column or make an alias for the column. For aliased columns,
        you cannot access the contents with the original column name.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3716165"></a><p class="title"><b>Example 20.29. Query with aliased duplicate field names</b></p><pre class="programlisting">
SELECT table1.field AS foo, table2.field AS bar FROM table1, table2

    </pre></div><p>
      </p><p>
        </p><div class="example"><a name="id3716182"></a><p class="title"><b>Example 20.30. <a href="connectors-apis.html#apis-php-function.mysql-fetch-array" title="20.11.1.4.14. mysql_fetch_array"><code class="function">mysql_fetch_array</code></a>
            with

            <code class="constant">MYSQL_NUM</code></b></p><pre class="programlisting">
&lt;?php
mysql_connect("localhost", "mysql_user", "mysql_password") or
    die("Could not connect: " . mysql_error());
mysql_select_db("mydb");

$result = mysql_query("SELECT id, name FROM mytable");

while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
    printf("ID: %s  Name: %s", $row[0], $row[1]);  
}

mysql_free_result($result);
?&gt;

    </pre></div><p>
      </p><p>
        </p><div class="example"><a name="id3716221"></a><p class="title"><b>Example 20.31. <a href="connectors-apis.html#apis-php-function.mysql-fetch-array" title="20.11.1.4.14. mysql_fetch_array"><code class="function">mysql_fetch_array</code></a>
            with

            <code class="constant">MYSQL_ASSOC</code></b></p><pre class="programlisting">
&lt;?php
mysql_connect("localhost", "mysql_user", "mysql_password") or
    die("Could not connect: " . mysql_error());
mysql_select_db("mydb");

$result = mysql_query("SELECT id, name FROM mytable");

while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    printf("ID: %s  Name: %s", $row["id"], $row["name"]);
}

mysql_free_result($result);
?&gt;

    </pre></div><p>
      </p><p>
        </p><div class="example"><a name="id3716259"></a><p class="title"><b>Example 20.32. <a href="connectors-apis.html#apis-php-function.mysql-fetch-array" title="20.11.1.4.14. mysql_fetch_array"><code class="function">mysql_fetch_array</code></a>
            with

            <code class="constant">MYSQL_BOTH</code></b></p><pre class="programlisting">
&lt;?php
mysql_connect("localhost", "mysql_user", "mysql_password") or
    die("Could not connect: " . mysql_error());
mysql_select_db("mydb");

$result = mysql_query("SELECT id, name FROM mytable");

while ($row = mysql_fetch_array($result, MYSQL_BOTH)) {
    printf ("ID: %s  Name: %s", $row[0], $row["name"]);
}

mysql_free_result($result);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Performance</h3><p>
          An important thing to note is that using
          <a href="connectors-apis.html#apis-php-function.mysql-fetch-array" title="20.11.1.4.14. mysql_fetch_array"><code class="function">mysql_fetch_array</code></a>
          is <span class="emphasis"><em>not significantly</em></span> slower than using
          <a href="connectors-apis.html#apis-php-function.mysql-fetch-row" title="20.11.1.4.19. mysql_fetch_row"><code class="function">mysql_fetch_row</code></a>,
          while it provides a significant added value.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Field names returned by this function
are <span class="emphasis"><em>case-sensitive</em></span>.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This function sets NULL fields to
the PHP <code class="constant">NULL</code> value.</p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-row" title="20.11.1.4.19. mysql_fetch_row"><code class="function">mysql_fetch_row</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-assoc" title="20.11.1.4.15. mysql_fetch_assoc"><code class="function">mysql_fetch_assoc</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-data-seek" title="20.11.1.4.7. mysql_data_seek"><code class="function">mysql_data_seek</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-fetch-assoc"></a>20.11.1.4.15. <code class="literal">mysql_fetch_assoc</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_fetch_assoc</code>
          </p><p>
            Fetch a result row as an associative array
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">array </span><span class="methodname">mysql_fetch_assoc</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>);</code><p>
        Returns an associative array that corresponds to the fetched row
        and moves the internal data pointer ahead.
        <a href="connectors-apis.html#apis-php-function.mysql-fetch-assoc" title="20.11.1.4.15. mysql_fetch_assoc"><code class="function">mysql_fetch_assoc</code></a>
        is equivalent to calling
        <a href="connectors-apis.html#apis-php-function.mysql-fetch-array" title="20.11.1.4.14. mysql_fetch_array"><code class="function">mysql_fetch_array</code></a>
        with MYSQL_ASSOC for the optional second parameter. It only
        returns an associative array.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an associative array of strings that corresponds to the
        fetched row, or

        <code class="constant">FALSE</code>

        if there are no more rows.
      </p><p>
        If two or more columns of the result have the same field names,
        the last column will take precedence. To access the other
        column(s) of the same name, you either need to access the result
        with numeric indices by using
        <a href="connectors-apis.html#apis-php-function.mysql-fetch-row" title="20.11.1.4.19. mysql_fetch_row"><code class="function">mysql_fetch_row</code></a>
        or add alias names. See the example at the
        <a href="connectors-apis.html#apis-php-function.mysql-fetch-array" title="20.11.1.4.14. mysql_fetch_array"><code class="function">mysql_fetch_array</code></a>
        description about aliases.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3716638"></a><p class="title"><b>Example 20.33. An expanded
            <a href="connectors-apis.html#apis-php-function.mysql-fetch-assoc" title="20.11.1.4.15. mysql_fetch_assoc"><code class="function">mysql_fetch_assoc</code></a>
            example</b></p><pre class="programlisting">
&lt;?php

$conn = mysql_connect("localhost", "mysql_user", "mysql_password");

if (!$conn) {
    echo "Unable to connect to DB: " . mysql_error();
    exit;
}
  
if (!mysql_select_db("mydbname")) {
    echo "Unable to select mydbname: " . mysql_error();
    exit;
}

$sql = "SELECT id as userid, fullname, userstatus 
        FROM   sometable
        WHERE  userstatus = 1";

$result = mysql_query($sql);

if (!$result) {
    echo "Could not successfully run query ($sql) from DB: " . mysql_error();
    exit;
}

if (mysql_num_rows($result) == 0) {
    echo "No rows found, nothing to print so am exiting";
    exit;
}

// While a row of data exists, put that row in $row as an associative array
// Note: If you're expecting just one row, no need to use a loop
// Note: If you put extract($row); inside the following loop, you'll
//       then create $userid, $fullname, and $userstatus
while ($row = mysql_fetch_assoc($result)) {
    echo $row["userid"];
    echo $row["fullname"];
    echo $row["userstatus"];
}

mysql_free_result($result);

?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Performance</h3><p>
          An important thing to note is that using
          <a href="connectors-apis.html#apis-php-function.mysql-fetch-assoc" title="20.11.1.4.15. mysql_fetch_assoc"><code class="function">mysql_fetch_assoc</code></a>
          is <span class="emphasis"><em>not significantly</em></span> slower than using
          <a href="connectors-apis.html#apis-php-function.mysql-fetch-row" title="20.11.1.4.19. mysql_fetch_row"><code class="function">mysql_fetch_row</code></a>,
          while it provides a significant added value.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Field names returned by this function
are <span class="emphasis"><em>case-sensitive</em></span>.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This function sets NULL fields to
the PHP <code class="constant">NULL</code> value.</p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-row" title="20.11.1.4.19. mysql_fetch_row"><code class="function">mysql_fetch_row</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-array" title="20.11.1.4.14. mysql_fetch_array"><code class="function">mysql_fetch_array</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-data-seek" title="20.11.1.4.7. mysql_data_seek"><code class="function">mysql_data_seek</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-error" title="20.11.1.4.12. mysql_error"><code class="function">mysql_error</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-fetch-field"></a>20.11.1.4.16. <code class="literal">mysql_fetch_field</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_fetch_field</code>
          </p><p>
            Get column information from a result and return as an object
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysql_fetch_field</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                         <span class="methodparam"><span class="type">int </span><span class="parameter">field_offset</span></span>);</code><p>
        Returns an object containing field information. This function
        can be used to obtain information about fields in the provided
        query result.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>field_offset</code></em>
            </span></dt><dd><p>
                The numerical field offset. If the field offset is not
                specified, the next field that was not yet retrieved by
                this function is retrieved. The
                <em class="parameter"><code>field_offset</code></em> starts at
                <code class="literal">0</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an <span class="type">object</span> containing field information. The
        properties of the object are:
      </p><p>
        </p><div class="itemizedlist"><ul type="disc"><li>
      name - column name
     </li><li>
      table - name of the table the column belongs to
     </li><li>
      def - default value of the column
     </li><li>
      max_length - maximum length of the column
     </li><li>
      not_null - 1 if the column cannot be <code class="constant">NULL</code>

            </li><li>
      primary_key - 1 if the column is a primary key
     </li><li>
      unique_key - 1 if the column is a unique key
     </li><li>
      multiple_key - 1 if the column is a non-unique key
     </li><li>
      numeric - 1 if the column is numeric
     </li><li>
      blob - 1 if the column is a BLOB
     </li><li>
      type - the type of the column
     </li><li>
      unsigned - 1 if the column is unsigned
     </li><li>
      zerofill - 1 if the column is zero-filled
     </li></ul></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3717157"></a><p class="title"><b>Example 20.34. <a href="connectors-apis.html#apis-php-function.mysql-fetch-field" title="20.11.1.4.16. mysql_fetch_field"><code class="function">mysql_fetch_field</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$conn = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$conn) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db('database');
$result = mysql_query('select * from table');
if (!$result) {
    die('Query failed: ' . mysql_error());
}
/* get column metadata */
$i = 0;
while ($i &lt; mysql_num_fields($result)) {
    echo "Information for column $i:&lt;br /&gt;\n";
    $meta = mysql_fetch_field($result, $i);
    if (!$meta) {
        echo "No information available&lt;br /&gt;\n";
    }
    echo "&lt;pre&gt;
blob:         $meta-&gt;blob
max_length:   $meta-&gt;max_length
multiple_key: $meta-&gt;multiple_key
name:         $meta-&gt;name
not_null:     $meta-&gt;not_null
numeric:      $meta-&gt;numeric
primary_key:  $meta-&gt;primary_key
table:        $meta-&gt;table
type:         $meta-&gt;type
default:      $meta-&gt;def
unique_key:   $meta-&gt;unique_key
unsigned:     $meta-&gt;unsigned
zerofill:     $meta-&gt;zerofill
&lt;/pre&gt;";
    $i++;
}
mysql_free_result($result);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Field names returned by this function
are <span class="emphasis"><em>case-sensitive</em></span>.</p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-field-seek" title="20.11.1.4.23. mysql_field_seek"><code class="function">mysql_field_seek</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-fetch-lengths"></a>20.11.1.4.17. <code class="literal">mysql_fetch_lengths</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_fetch_lengths</code>
          </p><p>
            Get the length of each output in a result
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">array </span><span class="methodname">mysql_fetch_lengths</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>);</code><p>
        Returns an array that corresponds to the lengths of each field
        in the last row fetched by MySQL.
      </p><p>
        <a href="connectors-apis.html#apis-php-function.mysql-fetch-lengths" title="20.11.1.4.17. mysql_fetch_lengths"><code class="function">mysql_fetch_lengths</code></a>
        stores the lengths of each result column in the last row
        returned by
        <a href="connectors-apis.html#apis-php-function.mysql-fetch-row" title="20.11.1.4.19. mysql_fetch_row"><code class="function">mysql_fetch_row</code></a>,
        <a href="connectors-apis.html#apis-php-function.mysql-fetch-assoc" title="20.11.1.4.15. mysql_fetch_assoc"><code class="function">mysql_fetch_assoc</code></a>,
        <a href="connectors-apis.html#apis-php-function.mysql-fetch-array" title="20.11.1.4.14. mysql_fetch_array"><code class="function">mysql_fetch_array</code></a>,
        and
        <a href="connectors-apis.html#apis-php-function.mysql-fetch-object" title="20.11.1.4.18. mysql_fetch_object"><code class="function">mysql_fetch_object</code></a>
        in an array, starting at offset 0.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An <span class="type">array</span> of lengths on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3717469"></a><p class="title"><b>Example 20.35. A
            <a href="connectors-apis.html#apis-php-function.mysql-fetch-lengths" title="20.11.1.4.17. mysql_fetch_lengths"><code class="function">mysql_fetch_lengths</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$result = mysql_query("SELECT id,email FROM people WHERE id = '42'");
if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
}
$row     = mysql_fetch_assoc($result);
$lengths = mysql_fetch_lengths($result);

print_r($row);
print_r($lengths);
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


Array
(
    [id] =&gt; 42
    [email] =&gt; user@example.com
)
Array
(
    [0] =&gt; 2
    [1] =&gt; 16
)


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-field-len" title="20.11.1.4.21. mysql_field_len"><code class="function">mysql_field_len</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-row" title="20.11.1.4.19. mysql_fetch_row"><code class="function">mysql_fetch_row</code></a>

          </td></tr><tr><td><code class="function">strlen</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-fetch-object"></a>20.11.1.4.18. <code class="literal">mysql_fetch_object</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_fetch_object</code>
          </p><p>
            Fetch a result row as an object
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysql_fetch_object</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                          <span class="methodparam"><span class="type">string </span><span class="parameter">class_name</span></span>,<br>                          <span class="methodparam"><span class="type">array </span><span class="parameter">params</span></span>);</code><p>
        Returns an object with properties that correspond to the fetched
        row and moves the internal data pointer ahead.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>class_name</code></em>
            </span></dt><dd><p>
                The name of the class to instantiate, set the properties
                of and return. If not specified, a
                <code class="classname">stdClass</code> object is returned.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>params</code></em>
            </span></dt><dd><p>
                An optional <span class="type">array</span> of parameters to pass to
                the constructor for <em class="parameter"><code>class_name</code></em>
                objects.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an <span class="type">object</span> with string properties that
        correspond to the fetched row, or

        <code class="constant">FALSE</code>

        if there are no more rows.
      </p><p>
        <a href="connectors-apis.html#apis-php-function.mysql-fetch-row" title="20.11.1.4.19. mysql_fetch_row"><code class="function">mysql_fetch_row</code></a>
        fetches one row of data from the result associated with the
        specified result identifier. The row is returned as an array.
        Each result column is stored in an array offset, starting at
        offset 0.
      </p><p>
        <span class="bold"><strong>ChangeLog</strong></span>
      </p><p>
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Version</th><th>Description</th></tr></thead><tbody><tr><td>5.0.0</td><td>Added the ability to return as a different object.</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3717888"></a><p class="title"><b>Example 20.36. <a href="connectors-apis.html#apis-php-function.mysql-fetch-object" title="20.11.1.4.18. mysql_fetch_object"><code class="function">mysql_fetch_object</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
mysql_connect("hostname", "user", "password");
mysql_select_db("mydb");
$result = mysql_query("select * from mytable");
while ($row = mysql_fetch_object($result)) {
    echo $row-&gt;user_id;
    echo $row-&gt;fullname;
}
mysql_free_result($result);
?&gt;

    </pre></div><p>
      </p><p>
        </p><div class="example"><a name="id3717919"></a><p class="title"><b>Example 20.37. <a href="connectors-apis.html#apis-php-function.mysql-fetch-object" title="20.11.1.4.18. mysql_fetch_object"><code class="function">mysql_fetch_object</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
class foo {
    public $name;
}

mysql_connect("hostname", "user", "password");
mysql_select_db("mydb");

$result = mysql_query("select name from mytable limit 1");
$obj = mysql_fetch_object($result, 'foo');
var_dump($obj);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Performance</h3><p>
          Speed-wise, the function is identical to
          <a href="connectors-apis.html#apis-php-function.mysql-fetch-array" title="20.11.1.4.14. mysql_fetch_array"><code class="function">mysql_fetch_array</code></a>,
          and almost as quick as
          <a href="connectors-apis.html#apis-php-function.mysql-fetch-row" title="20.11.1.4.19. mysql_fetch_row"><code class="function">mysql_fetch_row</code></a>
          (the difference is insignificant).
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <a href="connectors-apis.html#apis-php-function.mysql-fetch-object" title="20.11.1.4.18. mysql_fetch_object"><code class="function">mysql_fetch_object</code></a>
          is similar to
          <a href="connectors-apis.html#apis-php-function.mysql-fetch-array" title="20.11.1.4.14. mysql_fetch_array"><code class="function">mysql_fetch_array</code></a>,
          with one difference - an object is returned, instead of an
          array. Indirectly, that means that you can only access the
          data by the field names, and not by their offsets (numbers are
          illegal property names).
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Field names returned by this function
are <span class="emphasis"><em>case-sensitive</em></span>.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This function sets NULL fields to
the PHP <code class="constant">NULL</code> value.</p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-array" title="20.11.1.4.14. mysql_fetch_array"><code class="function">mysql_fetch_array</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-assoc" title="20.11.1.4.15. mysql_fetch_assoc"><code class="function">mysql_fetch_assoc</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-row" title="20.11.1.4.19. mysql_fetch_row"><code class="function">mysql_fetch_row</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-data-seek" title="20.11.1.4.7. mysql_data_seek"><code class="function">mysql_data_seek</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-fetch-row"></a>20.11.1.4.19. <code class="literal">mysql_fetch_row</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_fetch_row</code>
          </p><p>
            Get a result row as an enumerated array
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">array </span><span class="methodname">mysql_fetch_row</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>);</code><p>
        Returns a numerical array that corresponds to the fetched row
        and moves the internal data pointer ahead.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an numerical array of strings that corresponds to the
        fetched row, or

        <code class="constant">FALSE</code>

        if there are no more rows.
      </p><p>
        <a href="connectors-apis.html#apis-php-function.mysql-fetch-row" title="20.11.1.4.19. mysql_fetch_row"><code class="function">mysql_fetch_row</code></a>
        fetches one row of data from the result associated with the
        specified result identifier. The row is returned as an array.
        Each result column is stored in an array offset, starting at
        offset 0.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3718297"></a><p class="title"><b>Example 20.38. Fetching one row with
            <a href="connectors-apis.html#apis-php-function.mysql-fetch-row" title="20.11.1.4.19. mysql_fetch_row"><code class="function">mysql_fetch_row</code></a></b></p><pre class="programlisting">
&lt;?php
$result = mysql_query("SELECT id,email FROM people WHERE id = '42'");
if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
}
$row = mysql_fetch_row($result);

echo $row[0]; // 42
echo $row[1]; // the email value
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This function sets NULL fields to
the PHP <code class="constant">NULL</code> value.</p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-array" title="20.11.1.4.14. mysql_fetch_array"><code class="function">mysql_fetch_array</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-assoc" title="20.11.1.4.15. mysql_fetch_assoc"><code class="function">mysql_fetch_assoc</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-object" title="20.11.1.4.18. mysql_fetch_object"><code class="function">mysql_fetch_object</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-data-seek" title="20.11.1.4.7. mysql_data_seek"><code class="function">mysql_data_seek</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-lengths" title="20.11.1.4.17. mysql_fetch_lengths"><code class="function">mysql_fetch_lengths</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-result" title="20.11.1.4.43. mysql_result"><code class="function">mysql_result</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-field-flags"></a>20.11.1.4.20. <code class="literal">mysql_field_flags</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_field_flags</code>
          </p><p>
            Get the flags associated with the specified field in a
            result
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_field_flags</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                         <span class="methodparam"><span class="type">int </span><span class="parameter">field_offset</span></span>);</code><p>
        <a href="connectors-apis.html#apis-php-function.mysql-field-flags" title="20.11.1.4.20. mysql_field_flags"><code class="function">mysql_field_flags</code></a>
        returns the field flags of the specified field. The flags are
        reported as a single word per flag separated by a single space,
        so that you can split the returned value using
        <code class="function">explode</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> field_offset</code></em>
            </span></dt><dd><p>
                The numerical field offset. The
                <em class="parameter"><code>field_offset</code></em> starts at
                <code class="literal">0</code>. If
                <em class="parameter"><code>field_offset</code></em> does not exist, an
                error of level

                <code class="constant">E_WARNING</code>

                is also issued.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a string of flags associated with the result, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        The following flags are reported, if your version of MySQL is
        current enough to support them:
        <code class="literal">"not_null"</code>,
        <code class="literal">"primary_key"</code>,
        <code class="literal">"unique_key"</code>,
        <code class="literal">"multiple_key"</code>,
        <code class="literal">"blob"</code>,
        <code class="literal">"unsigned"</code>,
        <code class="literal">"zerofill"</code>,
        <code class="literal">"binary"</code>,
        <code class="literal">"enum"</code>,
        <code class="literal">"auto_increment"</code> and
        <code class="literal">"timestamp"</code>.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3718744"></a><p class="title"><b>Example 20.39. A
            <a href="connectors-apis.html#apis-php-function.mysql-field-flags" title="20.11.1.4.20. mysql_field_flags"><code class="function">mysql_field_flags</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$result = mysql_query("SELECT id,email FROM people WHERE id = '42'");
if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
}
$flags = mysql_field_flags($result, 0);

echo $flags;
print_r(explode(' ', $flags));
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


not_null primary_key auto_increment
Array
(
    [0] =&gt; not_null
    [1] =&gt; primary_key
    [2] =&gt; auto_increment
)


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="function">mysql_fieldflags</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-field-type" title="20.11.1.4.25. mysql_field_type"><code class="function">mysql_field_type</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-field-len" title="20.11.1.4.21. mysql_field_len"><code class="function">mysql_field_len</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-field-len"></a>20.11.1.4.21. <code class="literal">mysql_field_len</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_field_len</code>
          </p><p>
            Returns the length of the specified field
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysql_field_len</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                    <span class="methodparam"><span class="type">int </span><span class="parameter">field_offset</span></span>);</code><p>
        <a href="connectors-apis.html#apis-php-function.mysql-field-len" title="20.11.1.4.21. mysql_field_len"><code class="function">mysql_field_len</code></a>
        returns the length of the specified field.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> field_offset</code></em>
            </span></dt><dd><p>
                The numerical field offset. The
                <em class="parameter"><code>field_offset</code></em> starts at
                <code class="literal">0</code>. If
                <em class="parameter"><code>field_offset</code></em> does not exist, an
                error of level

                <code class="constant">E_WARNING</code>

                is also issued.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The length of the specified field index on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3719083"></a><p class="title"><b>Example 20.40. <a href="connectors-apis.html#apis-php-function.mysql-field-len" title="20.11.1.4.21. mysql_field_len"><code class="function">mysql_field_len</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$result = mysql_query("SELECT id,email FROM people WHERE id = '42'");
if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
}

// Will get the length of the id field as specified in the database
// schema. 
$length = mysql_field_len($result, 0);
echo $length;
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="function">mysql_fieldlen</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-lengths" title="20.11.1.4.17. mysql_fetch_lengths"><code class="function">mysql_fetch_lengths</code></a>

          </td></tr><tr><td><code class="function">strlen</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-field-name"></a>20.11.1.4.22. <code class="literal">mysql_field_name</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_field_name</code>
          </p><p>
            Get the name of the specified field in a result
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_field_name</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                        <span class="methodparam"><span class="type">int </span><span class="parameter">field_offset</span></span>);</code><p>
        <a href="connectors-apis.html#apis-php-function.mysql-field-name" title="20.11.1.4.22. mysql_field_name"><code class="function">mysql_field_name</code></a>
        returns the name of the specified field index.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> field_offset</code></em>
            </span></dt><dd><p>
                The numerical field offset. The
                <em class="parameter"><code>field_offset</code></em> starts at
                <code class="literal">0</code>. If
                <em class="parameter"><code>field_offset</code></em> does not exist, an
                error of level

                <code class="constant">E_WARNING</code>

                is also issued.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The name of the specified field index on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3719403"></a><p class="title"><b>Example 20.41. <a href="connectors-apis.html#apis-php-function.mysql-field-name" title="20.11.1.4.22. mysql_field_name"><code class="function">mysql_field_name</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
/* The users table consists of three fields:
*   user_id
*   username
*   password.
*/
$link = @mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect to MySQL server: ' . mysql_error());
}
$dbname = 'mydb';
$db_selected = mysql_select_db($dbname, $link);
if (!$db_selected) {
    die("Could not set $dbname: " . mysql_error());
}
$res = mysql_query('select * from users', $link);

echo mysql_field_name($res, 0) . "\n";
echo mysql_field_name($res, 2);
?&gt;

    </pre><p>
            The above example will output:
          </p><pre class="screen">


user_id
password


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Field names returned by this function
are <span class="emphasis"><em>case-sensitive</em></span>.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="function">mysql_fieldname</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-field-type" title="20.11.1.4.25. mysql_field_type"><code class="function">mysql_field_type</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-field-len" title="20.11.1.4.21. mysql_field_len"><code class="function">mysql_field_len</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-field-seek"></a>20.11.1.4.23. <code class="literal">mysql_field_seek</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_field_seek</code>
          </p><p>
            Set result pointer to a specified field offset
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysql_field_seek</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                      <span class="methodparam"><span class="type">int </span><span class="parameter">field_offset</span></span>);</code><p>
        Seeks to the specified field offset. If the next call to
        <a href="connectors-apis.html#apis-php-function.mysql-fetch-field" title="20.11.1.4.16. mysql_fetch_field"><code class="function">mysql_fetch_field</code></a>
        doesn't include a field offset, the field offset specified
        in
        <a href="connectors-apis.html#apis-php-function.mysql-field-seek" title="20.11.1.4.23. mysql_field_seek"><code class="function">mysql_field_seek</code></a>
        will be returned.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> field_offset</code></em>
            </span></dt><dd><p>
                The numerical field offset. The
                <em class="parameter"><code>field_offset</code></em> starts at
                <code class="literal">0</code>. If
                <em class="parameter"><code>field_offset</code></em> does not exist, an
                error of level

                <code class="constant">E_WARNING</code>

                is also issued.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-field" title="20.11.1.4.16. mysql_fetch_field"><code class="function">mysql_fetch_field</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-field-table"></a>20.11.1.4.24. <code class="literal">mysql_field_table</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_field_table</code>
          </p><p>
            Get name of the table the specified field is in
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_field_table</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                         <span class="methodparam"><span class="type">int </span><span class="parameter">field_offset</span></span>);</code><p>
        Returns the name of the table that the specified field is in.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> field_offset</code></em>
            </span></dt><dd><p>
                The numerical field offset. The
                <em class="parameter"><code>field_offset</code></em> starts at
                <code class="literal">0</code>. If
                <em class="parameter"><code>field_offset</code></em> does not exist, an
                error of level

                <code class="constant">E_WARNING</code>

                is also issued.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The name of the table on success.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3720003"></a><p class="title"><b>Example 20.42. A
            <a href="connectors-apis.html#apis-php-function.mysql-field-table" title="20.11.1.4.24. mysql_field_table"><code class="function">mysql_field_table</code></a>
            example</b></p><pre class="programlisting">
&lt;?php

$query = "SELECT account.*, country.* FROM account, country WHERE country.name = 'Portugal' AND account.country_id = country.id";

// get the result from the DB
$result = mysql_query($query);

// Lists the table name and then the field name
for ($i = 0; $i &lt; mysql_num_fields($result); ++$i) {
    $table = mysql_field_table($result, $i);
    $field = mysql_field_name($result, $i);

    echo  "$table: $field\n";
}

?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="function">mysql_fieldtable</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-list-tables" title="20.11.1.4.36. mysql_list_tables"><code class="function">mysql_list_tables</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-field-type"></a>20.11.1.4.25. <code class="literal">mysql_field_type</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_field_type</code>
          </p><p>
            Get the type of the specified field in a result
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_field_type</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                        <span class="methodparam"><span class="type">int </span><span class="parameter">field_offset</span></span>);</code><p>
        <a href="connectors-apis.html#apis-php-function.mysql-field-type" title="20.11.1.4.25. mysql_field_type"><code class="function">mysql_field_type</code></a>
        is similar to the
        <a href="connectors-apis.html#apis-php-function.mysql-field-name" title="20.11.1.4.22. mysql_field_name"><code class="function">mysql_field_name</code></a>
        function. The arguments are identical, but the field type is
        returned instead.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> field_offset</code></em>
            </span></dt><dd><p>
                The numerical field offset. The
                <em class="parameter"><code>field_offset</code></em> starts at
                <code class="literal">0</code>. If
                <em class="parameter"><code>field_offset</code></em> does not exist, an
                error of level

                <code class="constant">E_WARNING</code>

                is also issued.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The returned field type will be one of
        <code class="literal">"int"</code>,
        <code class="literal">"real"</code>,
        <code class="literal">"string"</code>,
        <code class="literal">"blob"</code>, and others as detailed in
        the <a href="http://dev.mysql.com/doc/" target="_top">MySQL
        documentation</a>.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3720354"></a><p class="title"><b>Example 20.43. <a href="connectors-apis.html#apis-php-function.mysql-field-type" title="20.11.1.4.25. mysql_field_type"><code class="function">mysql_field_type</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
mysql_connect("localhost", "mysql_username", "mysql_password");
mysql_select_db("mysql");
$result = mysql_query("SELECT * FROM func");
$fields = mysql_num_fields($result);
$rows   = mysql_num_rows($result);
$table  = mysql_field_table($result, 0);
echo "Your '" . $table . "' table has " . $fields . " fields and " . $rows . " record(s)\n";
echo "The table has the following fields:\n";
for ($i=0; $i &lt; $fields; $i++) {
    $type  = mysql_field_type($result, $i);
    $name  = mysql_field_name($result, $i);
    $len   = mysql_field_len($result, $i);
    $flags = mysql_field_flags($result, $i);
    echo $type . " " . $name . " " . $len . " " . $flags . "\n";
}
mysql_free_result($result);
mysql_close();
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


Your 'func' table has 4 fields and 1 record(s)
The table has the following fields:
string name 64 not_null primary_key binary
int ret 1 not_null
string dl 128 not_null
string type 9 not_null enum


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="function">mysql_fieldtype</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-field-name" title="20.11.1.4.22. mysql_field_name"><code class="function">mysql_field_name</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-field-len" title="20.11.1.4.21. mysql_field_len"><code class="function">mysql_field_len</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-free-result"></a>20.11.1.4.26. <code class="literal">mysql_free_result</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_free_result</code>
          </p><p>
            Free result memory
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysql_free_result</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>);</code><p>
        <a href="connectors-apis.html#apis-php-function.mysql-free-result" title="20.11.1.4.26. mysql_free_result"><code class="function">mysql_free_result</code></a>
        will free all memory associated with the result identifier
        <em class="parameter"><code>result</code></em>.
      </p><p>
        <a href="connectors-apis.html#apis-php-function.mysql-free-result" title="20.11.1.4.26. mysql_free_result"><code class="function">mysql_free_result</code></a>
        only needs to be called if you are concerned about how much
        memory is being used for queries that return large result sets.
        All associated result memory is automatically freed at the end
        of the script's execution.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        If a non-resource is used for the <em class="parameter"><code>result</code></em>,
        an error of level E_WARNING will be emitted. It's worth
        noting that
        <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>
        only returns a <span class="type">resource</span> for SELECT, SHOW, EXPLAIN,
        and DESCRIBE queries.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3720689"></a><p class="title"><b>Example 20.44. A
            <a href="connectors-apis.html#apis-php-function.mysql-free-result" title="20.11.1.4.26. mysql_free_result"><code class="function">mysql_free_result</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$result = mysql_query("SELECT id,email FROM people WHERE id = '42'");
if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
}
/* Use the result, assuming we're done with it afterwards */
$row = mysql_fetch_assoc($result);

/* Now we free up the result and continue on with our script */
mysql_free_result($result);

echo $row['id'];
echo $row['email'];
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="function">mysql_freeresult</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>

          </td></tr><tr><td><code class="function">is_resource</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-get-client-info"></a>20.11.1.4.27. <code class="literal">mysql_get_client_info</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_get_client_info</code>
          </p><p>
            Get MySQL client info
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_get_client_info</span>();</code><p>
        <a href="connectors-apis.html#apis-php-function.mysql-get-client-info" title="20.11.1.4.27. mysql_get_client_info"><code class="function">mysql_get_client_info</code></a>
        returns a string that represents the client library version.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The MySQL client version.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3720888"></a><p class="title"><b>Example 20.45. <a href="connectors-apis.html#apis-php-function.mysql-get-client-info" title="20.11.1.4.27. mysql_get_client_info"><code class="function">mysql_get_client_info</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
printf("MySQL client info: %s\n", mysql_get_client_info());
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


MySQL client info: 3.23.39


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-get-host-info" title="20.11.1.4.28. mysql_get_host_info"><code class="function">mysql_get_host_info</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-get-proto-info" title="20.11.1.4.29. mysql_get_proto_info"><code class="function">mysql_get_proto_info</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-get-server-info" title="20.11.1.4.30. mysql_get_server_info"><code class="function">mysql_get_server_info</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-get-host-info"></a>20.11.1.4.28. <code class="literal">mysql_get_host_info</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_get_host_info</code>
          </p><p>
            Get MySQL host info
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_get_host_info</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Describes the type of connection in use for the connection,
        including the server host name.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a string describing the type of MySQL connection in use
        for the connection or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3721152"></a><p class="title"><b>Example 20.46. <a href="connectors-apis.html#apis-php-function.mysql-get-host-info" title="20.11.1.4.28. mysql_get_host_info"><code class="function">mysql_get_host_info</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
printf("MySQL host info: %s\n", mysql_get_host_info());
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


MySQL host info: Localhost via UNIX socket


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-get-client-info" title="20.11.1.4.27. mysql_get_client_info"><code class="function">mysql_get_client_info</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-get-proto-info" title="20.11.1.4.29. mysql_get_proto_info"><code class="function">mysql_get_proto_info</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-get-server-info" title="20.11.1.4.30. mysql_get_server_info"><code class="function">mysql_get_server_info</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-get-proto-info"></a>20.11.1.4.29. <code class="literal">mysql_get_proto_info</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_get_proto_info</code>
          </p><p>
            Get MySQL protocol info
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysql_get_proto_info</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Retrieves the MySQL protocol.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the MySQL protocol on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3721420"></a><p class="title"><b>Example 20.47. <a href="connectors-apis.html#apis-php-function.mysql-get-proto-info" title="20.11.1.4.29. mysql_get_proto_info"><code class="function">mysql_get_proto_info</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
printf("MySQL protocol version: %s\n", mysql_get_proto_info());
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


MySQL protocol version: 10


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-get-client-info" title="20.11.1.4.27. mysql_get_client_info"><code class="function">mysql_get_client_info</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-get-host-info" title="20.11.1.4.28. mysql_get_host_info"><code class="function">mysql_get_host_info</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-get-server-info" title="20.11.1.4.30. mysql_get_server_info"><code class="function">mysql_get_server_info</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-get-server-info"></a>20.11.1.4.30. <code class="literal">mysql_get_server_info</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_get_server_info</code>
          </p><p>
            Get MySQL server info
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_get_server_info</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Retrieves the MySQL server version.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the MySQL server version on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3721688"></a><p class="title"><b>Example 20.48. <a href="connectors-apis.html#apis-php-function.mysql-get-server-info" title="20.11.1.4.30. mysql_get_server_info"><code class="function">mysql_get_server_info</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
printf("MySQL server version: %s\n", mysql_get_server_info());
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


MySQL server version: 4.0.1-alpha


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-get-client-info" title="20.11.1.4.27. mysql_get_client_info"><code class="function">mysql_get_client_info</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-get-host-info" title="20.11.1.4.28. mysql_get_host_info"><code class="function">mysql_get_host_info</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-get-proto-info" title="20.11.1.4.29. mysql_get_proto_info"><code class="function">mysql_get_proto_info</code></a>

          </td></tr><tr><td><code class="function">phpversion</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-info"></a>20.11.1.4.31. <code class="literal">mysql_info</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_info</code>
          </p><p>
            Get information about the most recent query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_info</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Returns detailed information about the last query.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns information about the statement on success, or

        <code class="constant">FALSE</code>

        on failure. See the example below for which statements provide
        information, and what the returned value may look like.
        Statements that are not listed will return

        <code class="constant">FALSE</code>

        .
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3721970"></a><p class="title"><b>Example 20.49. Relevant MySQL Statements</b></p><p>
            Statements that return string values. The numbers are only
            for illustrating purpose; their values will correspond to
            the query.
          </p><pre class="programlisting">
INSERT INTO ... SELECT ...
String format: Records: 23 Duplicates: 0 Warnings: 0 
INSERT INTO ... VALUES (...),(...),(...)...
String format: Records: 37 Duplicates: 0 Warnings: 0 
LOAD DATA INFILE ...
String format: Records: 42 Deleted: 0 Skipped: 0 Warnings: 0 
ALTER TABLE
String format: Records: 60 Duplicates: 0 Warnings: 0 
UPDATE
String format: Rows matched: 65 Changed: 65 Warnings: 0

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <a href="connectors-apis.html#apis-php-function.mysql-info" title="20.11.1.4.31. mysql_info"><code class="function">mysql_info</code></a>
          returns a non-

          <code class="constant">FALSE</code>

          value for the INSERT ... VALUES statement only if multiple
          value lists are specified in the statement.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-affected-rows" title="20.11.1.4.1. mysql_affected_rows"><code class="function">mysql_affected_rows</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-insert-id" title="20.11.1.4.32. mysql_insert_id"><code class="function">mysql_insert_id</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-stat" title="20.11.1.4.46. mysql_stat"><code class="function">mysql_stat</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-insert-id"></a>20.11.1.4.32. <code class="literal">mysql_insert_id</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_insert_id</code>
          </p><p>
            Get the ID generated from the previous INSERT operation
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysql_insert_id</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Retrieves the ID generated for an AUTO_INCREMENT column by the
        previous INSERT query.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The ID generated for an AUTO_INCREMENT column by the previous
        INSERT query on success, <code class="literal">0</code> if the previous
        query does not generate an AUTO_INCREMENT value, or

        <code class="constant">FALSE</code>

        if no MySQL connection was established.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3722264"></a><p class="title"><b>Example 20.50. <a href="connectors-apis.html#apis-php-function.mysql-insert-id" title="20.11.1.4.32. mysql_insert_id"><code class="function">mysql_insert_id</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db('mydb');

mysql_query("INSERT INTO mytable (product) values ('kossu')");
printf("Last inserted record has id %d\n", mysql_insert_id());
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>
          <a href="connectors-apis.html#apis-php-function.mysql-insert-id" title="20.11.1.4.32. mysql_insert_id"><code class="function">mysql_insert_id</code></a>
          converts the return type of the native MySQL C API function
          <code class="literal">mysql_insert_id()</code> to a type of
          <code class="literal">long</code> (named <span class="type">int</span> in PHP). If
          your AUTO_INCREMENT column has a column type of BIGINT, the
          value returned by
          <a href="connectors-apis.html#apis-php-function.mysql-insert-id" title="20.11.1.4.32. mysql_insert_id"><code class="function">mysql_insert_id</code></a>
          will be incorrect. Instead, use the internal MySQL SQL
          function <code class="literal">LAST_INSERT_ID()</code> in an SQL query.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Because
          <a href="connectors-apis.html#apis-php-function.mysql-insert-id" title="20.11.1.4.32. mysql_insert_id"><code class="function">mysql_insert_id</code></a>
          acts on the last performed query, be sure to call
          <a href="connectors-apis.html#apis-php-function.mysql-insert-id" title="20.11.1.4.32. mysql_insert_id"><code class="function">mysql_insert_id</code></a>
          immediately after the query that generates the value.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The value of the MySQL SQL function
          <code class="literal">LAST_INSERT_ID()</code> always contains the most
          recently generated AUTO_INCREMENT value, and is not reset
          between queries.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-info" title="20.11.1.4.31. mysql_info"><code class="function">mysql_info</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-list-dbs"></a>20.11.1.4.33. <code class="literal">mysql_list_dbs</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_list_dbs</code>
          </p><p>
            List databases available on a MySQL server
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">resource </span><span class="methodname">mysql_list_dbs</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Returns a result pointer containing the databases available from
        the current mysql daemon.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a result pointer <span class="type">resource</span> on success, or

        <code class="constant">FALSE</code>

        on failure. Use the
        <a href="connectors-apis.html#apis-php-function.mysql-tablename" title="20.11.1.4.47. mysql_tablename"><code class="function">mysql_tablename</code></a>
        function to traverse this result pointer, or any function for
        result tables, such as
        <a href="connectors-apis.html#apis-php-function.mysql-fetch-array" title="20.11.1.4.14. mysql_fetch_array"><code class="function">mysql_fetch_array</code></a>.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3722644"></a><p class="title"><b>Example 20.51. <a href="connectors-apis.html#apis-php-function.mysql-list-dbs" title="20.11.1.4.33. mysql_list_dbs"><code class="function">mysql_list_dbs</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
$db_list = mysql_list_dbs($link);

while ($row = mysql_fetch_object($db_list)) {
     echo $row-&gt;Database . "\n";
}
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


database1
database2
database3


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="function">mysql_listdbs</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-db-name" title="20.11.1.4.8. mysql_db_name"><code class="function">mysql_db_name</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-select-db" title="20.11.1.4.44. mysql_select_db"><code class="function">mysql_select_db</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-list-fields"></a>20.11.1.4.34. <code class="literal">mysql_list_fields</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_list_fields</code>
          </p><p>
            List MySQL table fields
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">resource </span><span class="methodname">mysql_list_fields</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">database_name</span></span>,<br>                           <span class="methodparam"><span class="type">string </span><span class="parameter">table_name</span></span>,<br>                           <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Retrieves information about the given table name.
      </p><p>
        This function is deprecated. It is preferable to use
        <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>
        to issue a SQL <code class="literal">SHOW COLUMNS FROM table [LIKE
        'name']</code> statement instead.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>database_name</code></em>
            </span></dt><dd><p>
                The name of the database that's being queried.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>table_name</code></em>
            </span></dt><dd><p>
                The name of the table that's being queried.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A result pointer <span class="type">resource</span> on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        The returned result can be used with
        <a href="connectors-apis.html#apis-php-function.mysql-field-flags" title="20.11.1.4.20. mysql_field_flags"><code class="function">mysql_field_flags</code></a>,
        <a href="connectors-apis.html#apis-php-function.mysql-field-len" title="20.11.1.4.21. mysql_field_len"><code class="function">mysql_field_len</code></a>,
        <a href="connectors-apis.html#apis-php-function.mysql-field-name" title="20.11.1.4.22. mysql_field_name"><code class="function">mysql_field_name</code></a>
        and
        <a href="connectors-apis.html#apis-php-function.mysql-field-type" title="20.11.1.4.25. mysql_field_type"><code class="function">mysql_field_type</code></a>.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3723061"></a><p class="title"><b>Example 20.52. Alternate to deprecated
            <a href="connectors-apis.html#apis-php-function.mysql-list-fields" title="20.11.1.4.34. mysql_list_fields"><code class="function">mysql_list_fields</code></a></b></p><pre class="programlisting">
&lt;?php
$result = mysql_query("SHOW COLUMNS FROM sometable");
if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
}
if (mysql_num_rows($result) &gt; 0) {
    while ($row = mysql_fetch_assoc($result)) {
        print_r($row);
    }
}
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


Array
(
    [Field] =&gt; id
    [Type] =&gt; int(7)
    [Null] =&gt;  
    [Key] =&gt; PRI
    [Default] =&gt;
    [Extra] =&gt; auto_increment
)
Array
(
    [Field] =&gt; email
    [Type] =&gt; varchar(100)
    [Null] =&gt;
    [Key] =&gt;
    [Default] =&gt;
    [Extra] =&gt;
)


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="function">mysql_listfields</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-field-flags" title="20.11.1.4.20. mysql_field_flags"><code class="function">mysql_field_flags</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-info" title="20.11.1.4.31. mysql_info"><code class="function">mysql_info</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-list-processes"></a>20.11.1.4.35. <code class="literal">mysql_list_processes</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_list_processes</code>
          </p><p>
            List MySQL processes
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">resource </span><span class="methodname">mysql_list_processes</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Retrieves the current MySQL server threads.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A result pointer <span class="type">resource</span> on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3723347"></a><p class="title"><b>Example 20.53. <a href="connectors-apis.html#apis-php-function.mysql-list-processes" title="20.11.1.4.35. mysql_list_processes"><code class="function">mysql_list_processes</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');

$result = mysql_list_processes($link);
while ($row = mysql_fetch_assoc($result)){
    printf("%s %s %s %s %s\n", $row["Id"], $row["Host"], $row["db"],
        $row["Command"], $row["Time"]);
}
mysql_free_result($result);
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


1 localhost test Processlist 0
4 localhost mysql sleep 5


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-thread-id" title="20.11.1.4.48. mysql_thread_id"><code class="function">mysql_thread_id</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-stat" title="20.11.1.4.46. mysql_stat"><code class="function">mysql_stat</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-list-tables"></a>20.11.1.4.36. <code class="literal">mysql_list_tables</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_list_tables</code>
          </p><p>
            List tables in a MySQL database
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">resource </span><span class="methodname">mysql_list_tables</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">database</span></span>,<br>                           <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Retrieves a list of table names from a MySQL database.
      </p><p>
        This function is deprecated. It is preferable to use
        <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>
        to issue a SQL <code class="literal">SHOW TABLES [FROM db_name] [LIKE
        'pattern']</code> statement instead.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>database</code></em>
            </span></dt><dd><p>
                The name of the database
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A result pointer <span class="type">resource</span> on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        Use the
        <a href="connectors-apis.html#apis-php-function.mysql-tablename" title="20.11.1.4.47. mysql_tablename"><code class="function">mysql_tablename</code></a>
        function to traverse this result pointer, or any function for
        result tables, such as
        <a href="connectors-apis.html#apis-php-function.mysql-fetch-array" title="20.11.1.4.14. mysql_fetch_array"><code class="function">mysql_fetch_array</code></a>.
      </p><p>
        <span class="bold"><strong>ChangeLog</strong></span>
      </p><p>
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Version</th><th>Description</th></tr></thead><tbody><tr><td>4.3.7</td><td>This function became deprecated.</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3723747"></a><p class="title"><b>Example 20.54. <a href="connectors-apis.html#apis-php-function.mysql-list-tables" title="20.11.1.4.36. mysql_list_tables"><code class="function">mysql_list_tables</code></a>
            alternative example</b></p><pre class="programlisting">
&lt;?php
$dbname = 'mysql_dbname';

if (!mysql_connect('mysql_host', 'mysql_user', 'mysql_password')) {
    echo 'Could not connect to mysql';
    exit;
}

$sql = "SHOW TABLES FROM $dbname";
$result = mysql_query($sql);

if (!$result) {
    echo "DB Error, could not list tables\n";
    echo 'MySQL Error: ' . mysql_error();
    exit;
}

while ($row = mysql_fetch_row($result)) {
    echo "Table: {$row[0]}\n";
}

mysql_free_result($result);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="function">mysql_listtables</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-list-dbs" title="20.11.1.4.33. mysql_list_dbs"><code class="function">mysql_list_dbs</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-tablename" title="20.11.1.4.47. mysql_tablename"><code class="function">mysql_tablename</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-num-fields"></a>20.11.1.4.37. <code class="literal">mysql_num_fields</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_num_fields</code>
          </p><p>
            Get number of fields in result
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysql_num_fields</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>);</code><p>
        Retrieves the number of fields from a query.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the number of fields in the result set
        <span class="type">resource</span> on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3724011"></a><p class="title"><b>Example 20.55. A
            <a href="connectors-apis.html#apis-php-function.mysql-num-fields" title="20.11.1.4.37. mysql_num_fields"><code class="function">mysql_num_fields</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$result = mysql_query("SELECT id,email FROM people WHERE id = '42'");
if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
}

/* returns 2 because id,email === two fields */
echo mysql_num_fields($result);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="function">mysql_numfields</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-select-db" title="20.11.1.4.44. mysql_select_db"><code class="function">mysql_select_db</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-field" title="20.11.1.4.16. mysql_fetch_field"><code class="function">mysql_fetch_field</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-num-rows" title="20.11.1.4.38. mysql_num_rows"><code class="function">mysql_num_rows</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-num-rows"></a>20.11.1.4.38. <code class="literal">mysql_num_rows</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_num_rows</code>
          </p><p>
            Get number of rows in result
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysql_num_rows</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>);</code><p>
        Retrieves the number of rows from a result set. This command is
        only valid for statements like SELECT or SHOW that return an
        actual result set. To retrieve the number of rows affected by a
        INSERT, UPDATE, REPLACE or DELETE query, use
        <a href="connectors-apis.html#apis-php-function.mysql-affected-rows" title="20.11.1.4.1. mysql_affected_rows"><code class="function">mysql_affected_rows</code></a>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The number of rows in a result set on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3724302"></a><p class="title"><b>Example 20.56. <a href="connectors-apis.html#apis-php-function.mysql-num-rows" title="20.11.1.4.38. mysql_num_rows"><code class="function">mysql_num_rows</code></a>
            example</b></p><pre class="programlisting">
&lt;?php

$link = mysql_connect("localhost", "mysql_user", "mysql_password");
mysql_select_db("database", $link);

$result = mysql_query("SELECT * FROM table1", $link);
$num_rows = mysql_num_rows($result);

echo "$num_rows Rows\n";

?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If you use
          <a href="connectors-apis.html#apis-php-function.mysql-unbuffered-query" title="20.11.1.4.49. mysql_unbuffered_query"><code class="function">mysql_unbuffered_query</code></a>,
          <a href="connectors-apis.html#apis-php-function.mysql-num-rows" title="20.11.1.4.38. mysql_num_rows"><code class="function">mysql_num_rows</code></a>
          will not return the correct value until all the rows in the
          result set have been retrieved.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="function">mysql_numrows</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-affected-rows" title="20.11.1.4.1. mysql_affected_rows"><code class="function">mysql_affected_rows</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-data-seek" title="20.11.1.4.7. mysql_data_seek"><code class="function">mysql_data_seek</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-select-db" title="20.11.1.4.44. mysql_select_db"><code class="function">mysql_select_db</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-pconnect"></a>20.11.1.4.39. <code class="literal">mysql_pconnect</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_pconnect</code>
          </p><p>
            Open a persistent connection to a MySQL server
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">resource </span><span class="methodname">mysql_pconnect</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">server</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">username</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">password</span></span>,<br>                        <span class="methodparam"><span class="type">int </span><span class="parameter">client_flags</span></span>);</code><p>
        Establishes a persistent connection to a MySQL server.
      </p><p>
        <a href="connectors-apis.html#apis-php-function.mysql-pconnect" title="20.11.1.4.39. mysql_pconnect"><code class="function">mysql_pconnect</code></a>
        acts very much like
        <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
        with two major differences.
      </p><p>
        First, when connecting, the function would first try to find a
        (persistent) link that's already open with the same host,
        username and password. If one is found, an identifier for it
        will be returned instead of opening a new connection.
      </p><p>
        Second, the connection to the SQL server will not be closed when
        the execution of the script ends. Instead, the link will remain
        open for future use
        (<a href="connectors-apis.html#apis-php-function.mysql-close" title="20.11.1.4.4. mysql_close"><code class="function">mysql_close</code></a>
        will not close links established by
        <a href="connectors-apis.html#apis-php-function.mysql-pconnect" title="20.11.1.4.39. mysql_pconnect"><code class="function">mysql_pconnect</code></a>).
      </p><p>
        This type of link is therefore called 'persistent'.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>server</code></em>
            </span></dt><dd><p>
                The MySQL server. It can also include a port number.
                e.g. "hostname:port" or a path to a local
                socket e.g. ":/path/to/socket" for the
                localhost.
              </p><p>
                If the PHP directive
                <a href="http://www.php.net/manual/en/ini.mysql.default-host.php" target="_top">
                mysql.default_host</a> is undefined (default), then
                the default value is 'localhost:3306'
              </p></dd><dt><span class="term">
              <em class="parameter"><code>username</code></em>
            </span></dt><dd><p>
                The username. Default value is the name of the user that
                owns the server process.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>password</code></em>
            </span></dt><dd><p>
                The password. Default value is an empty password.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>client_flags</code></em>
            </span></dt><dd><p>
                The <em class="parameter"><code>client_flags</code></em> parameter can be
                a combination of the following constants: 128 (enable
                <code class="literal">LOAD DATA LOCAL</code> handling),

                <code class="constant">MYSQL_CLIENT_SSL</code>

                ,

                <code class="constant">MYSQL_CLIENT_COMPRESS</code>

                ,

                <code class="constant">MYSQL_CLIENT_IGNORE_SPACE</code>

                or

                <code class="constant">MYSQL_CLIENT_INTERACTIVE</code>

                .
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a MySQL persistent link identifier on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>ChangeLog</strong></span>
      </p><p>
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Version</th><th>Description</th></tr></thead><tbody><tr><td>4.3.0</td><td>Added the <em class="parameter"><code>client_flags</code></em> parameter.</td></tr><tr><td>3.0.10</td><td>Added support for ":/path/to/socket" with
                  <em class="parameter"><code>server</code></em>.</td></tr><tr><td>3.0.0</td><td>Added support for ":port" with <em class="parameter"><code>server</code></em>.</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Note, that these kind of links only work if you are using a
          module version of PHP. See the
          <a href="http://www.php.net/manual/en/features.persistent-connections.php" target="_top">Persistent
          Database Connections</a> section for more information.
        </p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          Using persistent connections can require a bit of tuning of
          your Apache and MySQL configurations to ensure that you do not
          exceed the number of connections allowed by MySQL.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          You can suppress the error message on failure by prepending a
          <a href="http://www.php.net/manual/en/language.operators.errorcontrol.php" target="_top">@</a>
          to the function name.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>

          </td></tr><tr><td><a href="http://www.php.net/manual/en/features.persistent-connections.php" target="_top">Persistent
    Database Connections</a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-ping"></a>20.11.1.4.40. <code class="literal">mysql_ping</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_ping</code>
          </p><p>
            Ping a server connection or reconnect if there is no
            connection
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysql_ping</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Checks whether or not the connection to the server is working.
        If it has gone down, an automatic reconnection is attempted.
        This function can be used by scripts that remain idle for a long
        while, to check whether or not the server has closed the
        connection and reconnect if necessary.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Since MySQL 5.0.13, automatic reconnection feature is
          disabled.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        if the connection to the server MySQL server is working,
        otherwise

        <code class="constant">FALSE</code>

        .
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3725187"></a><p class="title"><b>Example 20.57. A
            <a href="connectors-apis.html#apis-php-function.mysql-ping" title="20.11.1.4.40. mysql_ping"><code class="function">mysql_ping</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
set_time_limit(0);

$conn = mysql_connect('localhost', 'mysqluser', 'mypass');
$db   = mysql_select_db('mydb');

/* Assuming this query will take a long time */
$result = mysql_query($sql);
if (!$result) {
    echo 'Query #1 failed, exiting.';
    exit;
}

/* Make sure the connection is still alive, if not, try to reconnect */
if (!mysql_ping($conn)) {
    echo 'Lost connection, exiting after query #1';
    exit;
}
mysql_free_result($result);

/* So the connection is still alive, let's run another query */
$result2 = mysql_query($sql2);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-thread-id" title="20.11.1.4.48. mysql_thread_id"><code class="function">mysql_thread_id</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-list-processes" title="20.11.1.4.35. mysql_list_processes"><code class="function">mysql_list_processes</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-query"></a>20.11.1.4.41. <code class="literal">mysql_query</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_query</code>
          </p><p>
            Send a MySQL query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">resource </span><span class="methodname">mysql_query</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>,<br>                     <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>
        sends an unique query (multiple queries are not supported) to
        the currently active database on the server that's
        associated with the specified
        <em class="parameter"><code>link_identifier</code></em>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>query</code></em>
            </span></dt><dd><p>
                A SQL query
              </p><p>
                The query string should not end with a semicolon.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        For SELECT, SHOW, DESCRIBE, EXPLAIN and other statements
        returning resultset,
        <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>
        returns a <span class="type">resource</span> on success, or

        <code class="constant">FALSE</code>

        on error.
      </p><p>
        For other type of SQL statements, INSERT, UPDATE, DELETE, DROP,
        etc,
        <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>
        returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on error.
      </p><p>
        The returned result resource should be passed to
        <a href="connectors-apis.html#apis-php-function.mysql-fetch-array" title="20.11.1.4.14. mysql_fetch_array"><code class="function">mysql_fetch_array</code></a>,
        and other functions for dealing with result tables, to access
        the returned data.
      </p><p>
        Use
        <a href="connectors-apis.html#apis-php-function.mysql-num-rows" title="20.11.1.4.38. mysql_num_rows"><code class="function">mysql_num_rows</code></a>
        to find out how many rows were returned for a SELECT statement
        or
        <a href="connectors-apis.html#apis-php-function.mysql-affected-rows" title="20.11.1.4.1. mysql_affected_rows"><code class="function">mysql_affected_rows</code></a>
        to find out how many rows were affected by a DELETE, INSERT,
        REPLACE, or UPDATE statement.
      </p><p>
        <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>
        will also fail and return

        <code class="constant">FALSE</code>

        if the user does not have permission to access the table(s)
        referenced by the query.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3725600"></a><p class="title"><b>Example 20.58. Invalid Query</b></p><p>
            The following query is syntactically invalid, so
            <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>
            fails and returns

            <code class="constant">FALSE</code>

            .
          </p><pre class="programlisting">
&lt;?php
$result = mysql_query('SELECT * WHERE 1=1');
if (!$result) {
    die('Invalid query: ' . mysql_error());
}

?&gt;

    </pre></div><p>
      </p><p>
        </p><div class="example"><a name="id3725638"></a><p class="title"><b>Example 20.59. Valid Query</b></p><p>
            The following query is valid, so
            <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>
            returns a <span class="type">resource</span>.
          </p><pre class="programlisting">
&lt;?php
// This could be supplied by a user, for example
$firstname = 'fred';
$lastname  = 'fox';

// Formulate Query
// This is the best way to perform a SQL query
// For more examples, see mysql_real_escape_string()
$query = sprintf("SELECT firstname, lastname, address, age FROM friends WHERE firstname='%s' AND lastname='%s'",
    mysql_real_escape_string($firstname),
    mysql_real_escape_string($lastname));

// Perform Query
$result = mysql_query($query);

// Check result
// This shows the actual query sent to MySQL, and the error. Useful for debugging.
if (!$result) {
    $message  = 'Invalid query: ' . mysql_error() . "\n";
    $message .= 'Whole query: ' . $query;
    die($message);
}

// Use result
// Attempting to print $result won't allow access to information in the resource
// One of the mysql result functions must be used
// See also mysql_result(), mysql_fetch_array(), mysql_fetch_row(), etc.
while ($row = mysql_fetch_assoc($result)) {
    echo $row['firstname'];
    echo $row['lastname'];
    echo $row['address'];
    echo $row['age'];
}

// Free the resources associated with the result set
// This is done automatically at the end of the script
mysql_free_result($result);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-error" title="20.11.1.4.12. mysql_error"><code class="function">mysql_error</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-real-escape-string" title="20.11.1.4.42. mysql_real_escape_string"><code class="function">mysql_real_escape_string</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-result" title="20.11.1.4.43. mysql_result"><code class="function">mysql_result</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-assoc" title="20.11.1.4.15. mysql_fetch_assoc"><code class="function">mysql_fetch_assoc</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-unbuffered-query" title="20.11.1.4.49. mysql_unbuffered_query"><code class="function">mysql_unbuffered_query</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-real-escape-string"></a>20.11.1.4.42. <code class="literal">mysql_real_escape_string</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_real_escape_string</code>
          </p><p>
            Escapes special characters in a string for use in a SQL
            statement
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_real_escape_string</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">unescaped_string</span></span>,<br>                                <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Escapes special characters in the
        <em class="parameter"><code>unescaped_string</code></em>, taking into account the
        current character set of the connection so that it is safe to
        place it in a
        <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>.
        If binary data is to be inserted, this function must be used.
      </p><p>
        <a href="connectors-apis.html#apis-php-function.mysql-real-escape-string" title="20.11.1.4.42. mysql_real_escape_string"><code class="function">mysql_real_escape_string</code></a>
        calls MySQL's library function mysql_real_escape_string,
        which prepends backslashes to the following characters:
        <code class="literal">\x00</code>, <code class="literal">\n</code>,
        <code class="literal">\r</code>, <code class="literal">\</code>,
        <code class="literal">'</code>, <code class="literal">"</code> and
        <code class="literal">\x1a</code>.
      </p><p>
        This function must always (with few exceptions) be used to make
        data safe before sending a query to MySQL.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>unescaped_string</code></em>
            </span></dt><dd><p>
                The string that is to be escaped.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the escaped string, or

        <code class="constant">FALSE</code>

        on error.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3726074"></a><p class="title"><b>Example 20.60. Simple
            <a href="connectors-apis.html#apis-php-function.mysql-real-escape-string" title="20.11.1.4.42. mysql_real_escape_string"><code class="function">mysql_real_escape_string</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
// Connect
$link = mysql_connect('mysql_host', 'mysql_user', 'mysql_password')
    OR die(mysql_error());

// Query
$query = sprintf("SELECT * FROM users WHERE user='%s' AND password='%s'",
            mysql_real_escape_string($user),
            mysql_real_escape_string($password));
?&gt;

    </pre></div><p>
      </p><p>
        </p><div class="example"><a name="id3726110"></a><p class="title"><b>Example 20.61. An example SQL Injection Attack</b></p><pre class="programlisting">
&lt;?php
// Query database to check if there are any matching users
$query = "SELECT * FROM users WHERE user='{$_POST['username']}' AND password='{$_POST['password']}'";
mysql_query($query);

// We didn't check $_POST['password'], it could be anything the user wanted! For example:
$_POST['username'] = 'aidan';
$_POST['password'] = "' OR ''='";

// This means the query sent to MySQL would be:
echo $query;
?&gt;

    </pre><p>
            The query sent to MySQL:
          </p><pre class="screen">


SELECT * FROM users WHERE user='aidan' AND password='' OR ''=''


          </pre><p>
            This would allow anyone to log in without a valid password.
          </p></div><p>
      </p><p>
        </p><div class="example"><a name="id3726156"></a><p class="title"><b>Example 20.62. A "Best Practice" query</b></p><p>
            Using
            <a href="connectors-apis.html#apis-php-function.mysql-real-escape-string" title="20.11.1.4.42. mysql_real_escape_string"><code class="function">mysql_real_escape_string</code></a>
            around each variable prevents SQL Injection. This example
            demonstrates the "best practice" method for
            querying a database, independent of the
            <a href="http://www.php.net/manual/en/security.magicquotes.php" target="_top">Magic
            Quotes</a> setting.
          </p><pre class="programlisting">
&lt;?php

if (isset($_POST['product_name']) &amp;&amp; isset($_POST['product_description']) &amp;&amp; isset($_POST['user_id'])) {
    // Connect

    $link = mysql_connect('mysql_host', 'mysql_user', 'mysql_password');

    if(!is_resource($link)) {

        echo "Failed to connect to the server\n";
        // ... log the error properly

    } else {
        
        // Reverse magic_quotes_gpc/magic_quotes_sybase effects on those vars if ON.

        if(get_magic_quotes_gpc()) {
            $product_name        = stripslashes($_POST['product_name']);
            $product_description = stripslashes($_POST['product_description']);
        } else {
            $product_name        = $_POST['product_name'];
            $product_description = $_POST['product_description'];
        }

        // Make a safe query
        $query = sprintf("INSERT INTO products (`name`, `description`, `user_id`) VALUES ('%s', '%s', %d)",
                    mysql_real_escape_string($product_name, $link),
                    mysql_real_escape_string($product_description, $link),
                    $_POST['user_id']);

        mysql_query($query, $link);

        if (mysql_affected_rows($link) &gt; 0) {
            echo "Product inserted\n";
        }
    }
} else {
    echo "Fill the form properly\n";
}
?&gt;

    </pre><p>
            The query will now execute correctly, and SQL Injection
            attacks will not work.
          </p></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          A MySQL connection is required before using
          <a href="connectors-apis.html#apis-php-function.mysql-real-escape-string" title="20.11.1.4.42. mysql_real_escape_string"><code class="function">mysql_real_escape_string</code></a>
          otherwise an error of level <code class="literal">E_WARNING</code> is
          generated, and

          <code class="constant">FALSE</code>

          is returned. If <em class="parameter"><code>link_identifier</code></em>
          isn't defined, the last MySQL connection is used.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If
          <a href="http://www.php.net/manual/en/ini.magic-quotes-gpc.php" target="_top">magic_quotes_gpc</a>
          is enabled, first apply <code class="function">stripslashes</code> to
          the data. Using this function on data which has already been
          escaped will escape the data twice.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If this function is not used to escape data, the query is
          vulnerable to
          <a href="http://www.php.net/manual/en/security.database.sql-injection.php" target="_top">SQL
          Injection Attacks</a>.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p><a href="connectors-apis.html#apis-php-function.mysql-real-escape-string" title="20.11.1.4.42. mysql_real_escape_string"><code class="function">mysql_real_escape_string</code></a> does not escape
    <code class="literal">%</code> and <code class="literal">_</code>. These are wildcards in
    MySQL if combined with <code class="literal">LIKE</code>, <code class="literal">GRANT</code>,
    or <code class="literal">REVOKE</code>.
   </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-client-encoding" title="20.11.1.4.3. mysql_client_encoding"><code class="function">mysql_client_encoding</code></a>

          </td></tr><tr><td><code class="function">addslashes</code>

          </td></tr><tr><td><code class="function">stripslashes</code>

          </td></tr><tr><td>The <a href="http://www.php.net/manual/en/ini.magic-quotes-gpc.php" target="_top">magic_quotes_gpc</a> directive</td></tr><tr><td>The <a href="http://www.php.net/manual/en/ini.magic-quotes-runtime.php" target="_top">magic_quotes_runtime</a> directive</td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-result"></a>20.11.1.4.43. <code class="literal">mysql_result</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_result</code>
          </p><p>
            Get result data
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_result</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                    <span class="methodparam"><span class="type">int </span><span class="parameter">row</span></span>,<br>                    <span class="methodparam"><span class="type">mixed </span><span class="parameter">field</span></span>);</code><p>
        Retrieves the contents of one cell from a MySQL result set.
      </p><p>
        When working on large result sets, you should consider using one
        of the functions that fetch an entire row (specified below). As
        these functions return the contents of multiple cells in one
        function call, they're MUCH quicker than
        <a href="connectors-apis.html#apis-php-function.mysql-result" title="20.11.1.4.43. mysql_result"><code class="function">mysql_result</code></a>.
        Also, note that specifying a numeric offset for the field
        argument is much quicker than specifying a fieldname or
        tablename.fieldname argument.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>row</code></em>
            </span></dt><dd><p>
                The row number from the result that's being
                retrieved. Row numbers start at <code class="literal">0</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>field</code></em>
            </span></dt><dd><p>
                The name or offset of the field being retrieved.
              </p><p>
                It can be the field's offset, the field's
                name, or the field's table dot field name
                (tablename.fieldname). If the column name has been
                aliased ('select foo as bar from...'), use the
                alias instead of the column name. If undefined, the
                first field is retrieved.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The contents of one cell from a MySQL result set on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3726699"></a><p class="title"><b>Example 20.63. <a href="connectors-apis.html#apis-php-function.mysql-result" title="20.11.1.4.43. mysql_result"><code class="function">mysql_result</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
$result = mysql_query('SELECT name FROM work.employee');
if (!$result) {
    die('Could not query:' . mysql_error());
}
echo mysql_result($result, 2); // outputs third employee's name

mysql_close($link);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Calls to
          <a href="connectors-apis.html#apis-php-function.mysql-result" title="20.11.1.4.43. mysql_result"><code class="function">mysql_result</code></a>
          should not be mixed with calls to other functions that deal
          with the result set.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-row" title="20.11.1.4.19. mysql_fetch_row"><code class="function">mysql_fetch_row</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-array" title="20.11.1.4.14. mysql_fetch_array"><code class="function">mysql_fetch_array</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-assoc" title="20.11.1.4.15. mysql_fetch_assoc"><code class="function">mysql_fetch_assoc</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-fetch-object" title="20.11.1.4.18. mysql_fetch_object"><code class="function">mysql_fetch_object</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-select-db"></a>20.11.1.4.44. <code class="literal">mysql_select_db</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_select_db</code>
          </p><p>
            Select a MySQL database
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysql_select_db</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">database_name</span></span>,<br>                     <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Sets the current active database on the server that's
        associated with the specified link identifier. Every subsequent
        call to
        <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>
        will be made on the active database.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>database_name</code></em>
            </span></dt><dd><p>
                The name of the database that is to be selected.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3727051"></a><p class="title"><b>Example 20.64. <a href="connectors-apis.html#apis-php-function.mysql-select-db" title="20.11.1.4.44. mysql_select_db"><code class="function">mysql_select_db</code></a>
            example</b></p><pre class="programlisting">
&lt;?php

$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Not connected : ' . mysql_error());
}

// make foo the current db
$db_selected = mysql_select_db('foo', $link);
if (!$db_selected) {
    die ('Can\'t use foo : ' . mysql_error());
}
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="function">mysql_selectdb</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-pconnect" title="20.11.1.4.39. mysql_pconnect"><code class="function">mysql_pconnect</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-set-charset"></a>20.11.1.4.45. <code class="literal">mysql_set_charset</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_set_charset</code>
          </p><p>
            Sets the client character set
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysql_set_charset</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">charset</span></span>,<br>                       <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Sets the default character set for the current connection.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>charset</code></em>
            </span></dt><dd><p>
                A valid character set name.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This function requires MySQL 5.0.7 or later.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This is the preferred way to change the charset. Using
          <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>
          to execute <code class="literal">SET NAMES ..</code> is not reccomended.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-client-encoding" title="20.11.1.4.3. mysql_client_encoding"><code class="function">mysql_client_encoding</code></a>

          </td></tr><tr><td><a href="http://dev.mysql.com/doc/refman/5.1/en/charset-charsets.html" target="_top">List of character sets that MySQL supports</a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-stat"></a>20.11.1.4.46. <code class="literal">mysql_stat</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_stat</code>
          </p><p>
            Get current system status
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_stat</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        <a href="connectors-apis.html#apis-php-function.mysql-stat" title="20.11.1.4.46. mysql_stat"><code class="function">mysql_stat</code></a>
        returns the current server status.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a string with the status for uptime, threads, queries,
        open tables, flush tables and queries per second. For a complete
        list of other status variables, you have to use the
        <code class="literal">SHOW STATUS</code> SQL command. If
        <em class="parameter"><code>link_identifier</code></em> is invalid,

        <code class="constant">NULL</code>

        is returned.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3727637"></a><p class="title"><b>Example 20.65. <a href="connectors-apis.html#apis-php-function.mysql-stat" title="20.11.1.4.46. mysql_stat"><code class="function">mysql_stat</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link   = mysql_connect('localhost', 'mysql_user', 'mysql_password');
$status = explode('  ', mysql_stat($link));
print_r($status);
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


Array
(
    [0] =&gt; Uptime: 5380
    [1] =&gt; Threads: 2
    [2] =&gt; Questions: 1321299
    [3] =&gt; Slow queries: 0
    [4] =&gt; Opens: 26
    [5] =&gt; Flush tables: 1
    [6] =&gt; Open tables: 17
    [7] =&gt; Queries per second avg: 245.595
)


          </pre></div><p>
      </p><p>
        </p><div class="example"><a name="id3727682"></a><p class="title"><b>Example 20.66. Alternative
            <a href="connectors-apis.html#apis-php-function.mysql-stat" title="20.11.1.4.46. mysql_stat"><code class="function">mysql_stat</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link   = mysql_connect('localhost', 'mysql_user', 'mysql_password');
$result = mysql_query('SHOW VARIABLES', $link);
while ($row = mysql_fetch_assoc($result)) {
    echo $row['Variable_name'] . ' = ' . $row['Value'] . "\n";
}
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


back_log = 50
basedir = /usr/local/
bdb_cache_size = 8388600
bdb_log_buffer_size = 32768
bdb_home = /var/db/mysql/
bdb_max_lock = 10000
bdb_logdir = 
bdb_shared_data = OFF
bdb_tmpdir = /var/tmp/
...


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-get-server-info" title="20.11.1.4.30. mysql_get_server_info"><code class="function">mysql_get_server_info</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-list-processes" title="20.11.1.4.35. mysql_list_processes"><code class="function">mysql_list_processes</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-tablename"></a>20.11.1.4.47. <code class="literal">mysql_tablename</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_tablename</code>
          </p><p>
            Get table name of field
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_tablename</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                       <span class="methodparam"><span class="type">int </span><span class="parameter">i</span></span>);</code><p>
        Retrieves the table name from a <em class="parameter"><code>result</code></em>.
      </p><p>
        This function deprecated. It is preferable to use
        <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>
        to issue a SQL <code class="literal">SHOW TABLES [FROM db_name] [LIKE
        'pattern']</code> statement instead.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>result</code></em>
            </span></dt><dd><p>
                A result pointer <span class="type">resource</span> that's
                returned from
                <a href="connectors-apis.html#apis-php-function.mysql-list-tables" title="20.11.1.4.36. mysql_list_tables"><code class="function">mysql_list_tables</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>i</code></em>
            </span></dt><dd><p>
                The integer index (row/table number)
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The name of the table on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        Use the
        <a href="connectors-apis.html#apis-php-function.mysql-tablename" title="20.11.1.4.47. mysql_tablename"><code class="function">mysql_tablename</code></a>
        function to traverse this result pointer, or any function for
        result tables, such as
        <a href="connectors-apis.html#apis-php-function.mysql-fetch-array" title="20.11.1.4.14. mysql_fetch_array"><code class="function">mysql_fetch_array</code></a>.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3728014"></a><p class="title"><b>Example 20.67. <a href="connectors-apis.html#apis-php-function.mysql-tablename" title="20.11.1.4.47. mysql_tablename"><code class="function">mysql_tablename</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
mysql_connect("localhost", "mysql_user", "mysql_password");
$result = mysql_list_tables("mydb");
$num_rows = mysql_num_rows($result);
for ($i = 0; $i &lt; $num_rows; $i++) {
    echo "Table: ", mysql_tablename($result, $i), "\n";
}

mysql_free_result($result);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The
          <a href="connectors-apis.html#apis-php-function.mysql-num-rows" title="20.11.1.4.38. mysql_num_rows"><code class="function">mysql_num_rows</code></a>
          function may be used to determine the number of tables in the
          result pointer.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-list-tables" title="20.11.1.4.36. mysql_list_tables"><code class="function">mysql_list_tables</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-field-table" title="20.11.1.4.24. mysql_field_table"><code class="function">mysql_field_table</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-db-name" title="20.11.1.4.8. mysql_db_name"><code class="function">mysql_db_name</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-thread-id"></a>20.11.1.4.48. <code class="literal">mysql_thread_id</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_thread_id</code>
          </p><p>
            Return the current thread ID
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysql_thread_id</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Retrieves the current thread ID. If the connection is lost, and
        a reconnect with
        <a href="connectors-apis.html#apis-php-function.mysql-ping" title="20.11.1.4.40. mysql_ping"><code class="function">mysql_ping</code></a>
        is executed, the thread ID will change. This means only retrieve
        the thread ID when needed.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The thread ID on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3728307"></a><p class="title"><b>Example 20.68. <a href="connectors-apis.html#apis-php-function.mysql-thread-id" title="20.11.1.4.48. mysql_thread_id"><code class="function">mysql_thread_id</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
$thread_id = mysql_thread_id($link);
if ($thread_id){
    printf("current thread id is %d\n", $thread_id);
}
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


current thread id is 73


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-ping" title="20.11.1.4.40. mysql_ping"><code class="function">mysql_ping</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-function.mysql-list-processes" title="20.11.1.4.35. mysql_list_processes"><code class="function">mysql_list_processes</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-unbuffered-query"></a>20.11.1.4.49. <code class="literal">mysql_unbuffered_query</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_unbuffered_query</code>
          </p><p>
            Send an SQL query to MySQL, without fetching and buffering
            the result rows
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">resource </span><span class="methodname">mysql_unbuffered_query</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>,<br>                                <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        <a href="connectors-apis.html#apis-php-function.mysql-unbuffered-query" title="20.11.1.4.49. mysql_unbuffered_query"><code class="function">mysql_unbuffered_query</code></a>
        sends a SQL query <em class="parameter"><code>query</code></em> to MySQL, without
        fetching and buffering the result rows automatically, as
        <a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>
        does. On the one hand, this saves a considerable amount of
        memory with SQL queries that produce large result sets. On the
        other hand, you can start working on the result set immediately
        after the first row has been retrieved: you don't have to
        wait until the complete SQL query has been performed. When using
        multiple DB-connects, you have to specify the optional parameter
        <em class="parameter"><code>link_identifier</code></em>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>query</code></em>
            </span></dt><dd><p>
                A SQL query
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="connectors-apis.html#apis-php-function.mysql-connect" title="20.11.1.4.5. mysql_connect"><code class="function">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        For SELECT, SHOW, DESCRIBE or EXPLAIN statements,
        <a href="connectors-apis.html#apis-php-function.mysql-unbuffered-query" title="20.11.1.4.49. mysql_unbuffered_query"><code class="function">mysql_unbuffered_query</code></a>
        returns a <span class="type">resource</span> on success, or

        <code class="constant">FALSE</code>

        on error.
      </p><p>
        For other type of SQL statements, UPDATE, DELETE, DROP, etc,
        <a href="connectors-apis.html#apis-php-function.mysql-unbuffered-query" title="20.11.1.4.49. mysql_unbuffered_query"><code class="function">mysql_unbuffered_query</code></a>
        returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on error.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The benefits of
          <a href="connectors-apis.html#apis-php-function.mysql-unbuffered-query" title="20.11.1.4.49. mysql_unbuffered_query"><code class="function">mysql_unbuffered_query</code></a>
          come at a cost: You cannot use
          <a href="connectors-apis.html#apis-php-function.mysql-num-rows" title="20.11.1.4.38. mysql_num_rows"><code class="function">mysql_num_rows</code></a>
          and
          <a href="connectors-apis.html#apis-php-function.mysql-data-seek" title="20.11.1.4.7. mysql_data_seek"><code class="function">mysql_data_seek</code></a>
          on a result set returned from
          <a href="connectors-apis.html#apis-php-function.mysql-unbuffered-query" title="20.11.1.4.49. mysql_unbuffered_query"><code class="function">mysql_unbuffered_query</code></a>.
          You also have to fetch all result rows from an unbuffered SQL
          query, before you can send a new SQL query to MySQL.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-function.mysql-query" title="20.11.1.4.41. mysql_query"><code class="function">mysql_query</code></a>

          </td></tr></table><p>
      </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="apis-php-mysqli"></a>20.11.2. MySQL Improved Extension (<code class="literal">Mysqli</code>)</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.examples">20.11.2.1. Examples</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.overview">20.11.2.2. Overview</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.setup">20.11.2.3. Installing/Configuring</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.constants">20.11.2.4. Predefined Constants</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.summary">20.11.2.5. The MySQLi Extension Function Summary</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-class.mysqli">20.11.2.6. The MySQLi class (<code class="literal">MySQLi</code>)</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-class.mysqli-stmt">20.11.2.7. The MySQLi_STMT class (<code class="literal">MySQLi_STMT</code>)</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-class.mysqli-result">20.11.2.8. The MySQLi_Result class (<code class="literal">MySQLi_Result</code>)</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-class.mysqli-driver">20.11.2.9. The MySQLi_Driver class (<code class="literal">MySQLi_Driver</code>)</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-ref.mysqli">20.11.2.10. Aliases and deprecated Mysqli Functions</a></span></dt></dl></div><p>
    <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
    Documentation Group.</a>
  </p><p>
    The <code class="literal">mysqli</code> extension allows you to access the
    functionality provided by MySQL 4.1 and above. More information
    about the MySQL Database server can be found at
    <a href="http://www.mysql.com/" target="_top">http://www.mysql.com/</a>
  </p><p>
    An overview of software available for using MySQL from PHP can be
    found at <a href="connectors-apis.html#apis-php-mysqli.overview" title="20.11.2.2. Overview">Section 20.11.2.2, “Overview”</a>
  </p><p>
    Documentation for MySQL can be found at
    <a href="http://dev.mysql.com/doc/" target="_top">http://dev.mysql.com/doc/</a>.
  </p><p>
    Parts of this documentation included from MySQL manual with
    permissions of MySQL AB.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-mysqli.examples"></a>20.11.2.1. Examples</h4></div></div></div><p>
      <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
      Documentation Group.</a>
    </p><p>
      All Examples in the MySQLI documentation use the world database
      from MySQL AB. The world database can be found at
      <a href="http://dev.mysql.com/get/Downloads/Manual/world.sql.gz/from/pick" target="_top">http://dev.mysql.com/get/Downloads/Manual/world.sql.gz/from/pick</a>
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-mysqli.overview"></a>20.11.2.2. Overview</h4></div></div></div><p>
      <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
      Documentation Group.</a>
    </p><p>
      This section provides an introduction to the options available to
      you when developing a PHP application that needs to interact with
      a MySQL database.
    </p><p>
      <span class="emphasis"><em>What is an API?</em></span>
    </p><p>
      An Application Programming Interface, or API, defines the classes,
      methods, functions and variables that your application will need
      to call in order to carry out its desired task. In the case of PHP
      applications that need to communicate with databases the necessary
      APIs are usually exposed via PHP extensions.
    </p><p>
      APIs can be procedural or object-oriented. With a procedural API
      you call functions to carry out tasks, with the object-oriented
      API you instantiate classes and then call methods on the resulting
      objects. Of the two the latter is usually the preferred interface,
      as it is more modern and leads to better organised code.
    </p><p>
      When writing PHP applications that need to connect to the MySQL
      server there are several API options available. This document
      discusses what is available and how to select the best solution
      for your application.
    </p><p>
      <span class="emphasis"><em>What is a Connector?</em></span>
    </p><p>
      In the MySQL documentation, the term
      <span class="emphasis"><em>connector</em></span> refers to a piece of software that
      allows your application to connect to the MySQL database server.
      MySQL provides connectors for a variety of languages, including
      PHP.
    </p><p>
      If your PHP application needs to communicate with a database
      server you will need to write PHP code to perform such activities
      as connecting to the database server, querying the database and
      other database-related functions. Software is required to provide
      the API that your PHP application will use, and also handle the
      communication between your application and the database server,
      possibly using other intermediate libraries where necessary. This
      software is known generically as a connector, as it allows your
      application to <span class="emphasis"><em>connect</em></span> to a database server.
    </p><p>
      <span class="emphasis"><em>What is a Driver?</em></span>
    </p><p>
      A driver is a piece of software designed to communicate with a
      specific type of database server. The driver may also call a
      library, such as the MySQL Client Library or the MySQL Native
      Driver. These libraries implement the low-level protocol used to
      communicate with the MySQL database server.
    </p><p>
      By way of an example, the
      <a href="connectors-apis.html#apis-php-mysqli.overview.pdo">PHP Data Objects
      (PDO)</a> database abstraction layer may use one of several
      database-specific drivers. One of the drivers it has available is
      the PDO MYSQL driver, which allows it to interface with the MySQL
      server.
    </p><p>
      Sometimes people use the terms connector and driver
      interchangeably, this can be confusing. In the MySQL-related
      documentation the term “<span class="quote">driver</span>” is reserved for
      software that provides the database-specific part of a connector
      package.
    </p><p>
      <span class="emphasis"><em>What is an Extension?</em></span>
    </p><p>
      In the PHP documentation you will come across another term -
      <span class="emphasis"><em>extension</em></span>. The PHP code consists of a core,
      with optional extensions to the core functionality. PHP's
      MySQL-related extensions, such as the <code class="literal">mysqli</code>
      extension, and the <code class="literal">mysql</code> extension, are
      implemented using the PHP extension framework.
    </p><p>
      An extension typically exposes an API to the PHP programmer, to
      allow its facilities to be used programmatically. However, some
      extensions which use the PHP extension framework do not expose an
      API to the PHP programmer.
    </p><p>
      The PDO MySQL driver extension, for example, does not expose an
      API to the PHP programmer, but provides an interface to the PDO
      layer above it.
    </p><p>
      The terms API and extension should not be taken to mean the same
      thing, as an extension may not necessarily expose an API to the
      programmer.
    </p><p>
      <span class="emphasis"><em>What are the main PHP API offerings for using
      MySQL?</em></span>
    </p><p>
      There are three main API options when considering connecting to a
      MySQL database server:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          PHP's MySQL Extension
        </p></li><li><p>
          PHP's mysqli Extension
        </p></li><li><p>
          PHP Data Objects (PDO)
        </p></li></ul></div><p>
      Each has its own advantages and disadvantages. The following
      discussion aims to give a brief introduction to the key aspects of
      each API.
    </p><p>
      <span class="emphasis"><em>What is PHP's MySQL Extension?</em></span>
    </p><p>
      This is the original extension designed to allow you to develop
      PHP applications that interact with a MySQL database. The
      <code class="literal">mysql</code> extension provides a procedural interface
      and is intended for use only with MySQL versions older than 4.1.3.
      This extension can be used with versions of MySQL 4.1.3 or newer,
      but not all of the latest MySQL server features will be available.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        If you are using MySQL versions 4.1.3 or later it is
        <span class="emphasis"><em>strongly</em></span> recommended that you use the
        <code class="literal">mysqli</code> extension instead.
      </p></div><p>
      The <code class="literal">mysql</code> extension source code is located in
      the PHP extension directory <code class="filename">ext/mysql</code>.
    </p><p>
      For further information on the <code class="literal">mysql</code> extension,
      see <a href="connectors-apis.html#apis-php-mysql" title="20.11.1. MySQL">Section 20.11.1, “MySQL”</a>.
    </p><p>
      <span class="emphasis"><em>What is PHP's mysqli Extension?</em></span>
    </p><p>
      The <code class="literal">mysqli</code> extension, or as it is sometimes
      known, the MySQL <span class="emphasis"><em>improved</em></span> extension, was
      developed to take advantage of new features found in MySQL systems
      versions 4.1.3 and newer. The <code class="literal">mysqli</code> extension
      is included with PHP versions 5 and later.
    </p><p>
      The <code class="literal">mysqli</code> extension has a number of benefits,
      the key enhancements over the <code class="literal">mysql</code> extension
      being:

      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Object-oriented interface
          </p></li><li><p>
            Support for Prepared Statements
          </p></li><li><p>
            Support for Multiple Statements
          </p></li><li><p>
            Support for Transactions
          </p></li><li><p>
            Enhanced debugging capabilities
          </p></li><li><p>
            Embedded server support
          </p></li></ul></div><p>
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        If you are using MySQL versions 4.1.3 or later it is
        <span class="emphasis"><em>strongly</em></span> recommended that you use this
        extension.
      </p></div><p>
      As well as the object-oriented interface the extension also
      provides a procedural interface.
    </p><p>
      The <code class="literal">mysqli</code> extension is built using the PHP
      extension frameowrk, its source code is located in the directory
      <code class="filename">ext/mysqli</code>.
    </p><p>
      For further information on the <code class="literal">mysqli</code>
      extension, see <a href="connectors-apis.html#apis-php-mysqli" title="20.11.2. MySQL Improved Extension (Mysqli)">Section 20.11.2, “MySQL Improved Extension (<code class="literal">Mysqli</code>)”</a>.
    </p><p><a name="apis-php-mysqli.overview.pdo"></a>
      <span class="emphasis"><em>What is PDO?</em></span>
    </p><p>
      PHP Data Objects, or PDO, is a database abstraction layer
      specifically for PHP applications. PDO provides a consistent API
      for your PHP application regardless of the type of database server
      your application will connect to. In theory, if you are using the
      PDO API, you could switch the database server you used, from say
      Firebird to MySQL, and only need to make minor changes to your PHP
      code.
    </p><p>
      Other examples of database abstraction layers include JDBC for
      Java applications and DBI for Perl.
    </p><p>
      While PDO has its advantages, such as a clean, simple, portable
      API, its main disadvantage is that it doesn't allow you to
      use all of the advanced features that are available in the latest
      versions of MySQL server. For example, PDO does not allow you to
      use MySQL's support for Multiple Statements.
    </p><p>
      PDO is implemented using the PHP extension framework, its source
      code is located in the directory <code class="filename">ext/pdo</code>.
    </p><p>
      For further information on PDO, see the
      <a href="connectors-apis.html#apis-php-pdo-mysql" title="20.11.3. MySQL Functions (PDO_MYSQL)">Section 20.11.3, “MySQL Functions (PDO_MYSQL)”</a>.
    </p><p>
      <span class="emphasis"><em>What is the PDO MYSQL driver?</em></span>
    </p><p>
      The PDO MYSQL driver is not an API as such, at least from the PHP
      programmer's perspective. In fact the PDO MYSQL driver sits
      in the layer below PDO itself and provides MySQL-specific
      functionality. The programmer still calls the PDO API, but PDO
      uses the PDO MYSQL driver to carry out communication with the
      MySQL server.
    </p><p>
      The PDO MYSQL driver is one of several available PDO drivers.
      Other PDO drivers available include those for the Firebird and
      PostgreSQL database servers.
    </p><p>
      The PDO MYSQL driver is implemented using the PHP extension
      framework. Its source code is located in the directory
      <code class="filename">ext/pdo_mysql</code>. It does not expose an API to
      the PHP programmer.
    </p><p>
      For further information on the PDO MYSQL driver, see
      <a href="connectors-apis.html#apis-php-pdo-mysql" title="20.11.3. MySQL Functions (PDO_MYSQL)">Section 20.11.3, “MySQL Functions (PDO_MYSQL)”</a>.
    </p><p>
      <span class="emphasis"><em>What is PHP's MySQL Native Driver?</em></span>
    </p><p>
      In order to communicate with the MySQL database server the
      <code class="literal">mysql</code> extension, <code class="literal">mysqli</code> and
      the PDO MYSQL driver each use a low-level library that implements
      the required protocol. In the past, the only available library was
      the MySQL Client Library, otherwise known as
      <code class="literal">libmysql</code>.
    </p><p>
      However, the interface presented by <code class="literal">libmysql</code>
      was not optimized for communication with PHP applications, as
      <code class="literal">libmysql</code> was originally designed with C
      applications in mind. For this reason the MySQL Native Driver,
      <code class="literal">mysqlnd</code>, was developed as an alternative to
      <code class="literal">libmysql</code> for PHP applications.
    </p><p>
      The <code class="literal">mysql</code> extension, the
      <code class="literal">mysqli</code> extension and the PDO MySQL driver can
      each be individually configured to use either
      <code class="literal">libmysql</code> or <code class="literal">mysqlnd</code>. As
      <code class="literal">mysqlnd</code> is designed specifically to be utilised
      in the PHP system it has numerous memory and speed enhancements
      over <code class="literal">libmysql</code>. You are strongly encouraged to
      take advantage of these improvements.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        The MySQL Native Driver can only be used with MySQL server
        versions 4.1.3 and later.
      </p></div><p>
      The MySQL Native Driver is implemented using the PHP extension
      framework. The source code is located in
      <code class="filename">ext/mysqlnd</code>. It does not expose an API to the
      PHP programmer.
    </p><p>
      <span class="emphasis"><em>Comparison of Features</em></span>
    </p><p>
      The following table compares the functionality of the three main
      methods of connecting to MySQL from PHP:
    </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th> </th><th>PHP's mysqli Extension</th><th>PDO (Using PDO MySQL Driver and MySQL Native Driver)</th><th>PHP's MySQL Extension</th></tr></thead><tbody><tr><td>PHP version introduced</td><td>5.0</td><td>5.0</td><td>Prior to 3.0</td></tr><tr><td>Included with PHP 5.x</td><td>yes</td><td>yes</td><td>Yes</td></tr><tr><td>Comes with PHP 6.0</td><td>Yes</td><td>Yes</td><td>Yes</td></tr><tr><td>MySQL development status</td><td>Active development</td><td>Active development as of PHP 5.3</td><td>Maintenance only</td></tr><tr><td>Recommended by MySQL for new projects</td><td>Yes - preferred option</td><td>Yes</td><td>No</td></tr><tr><td>API supports Charsets</td><td>Yes</td><td>Yes</td><td>No</td></tr><tr><td>API supports server-side Prepared Statements</td><td>Yes</td><td>Yes</td><td>No</td></tr><tr><td>API supports client-side Prepared Statements</td><td>No</td><td>Yes</td><td>No</td></tr><tr><td>API supports Stored Procedures</td><td>Yes</td><td>Yes</td><td>No</td></tr><tr><td>API supports Multiple Statements</td><td>Yes</td><td>Most</td><td>No</td></tr><tr><td>Supports all MySQL 4.1+ functionality</td><td>Yes</td><td>Most</td><td>No</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-mysqli.setup"></a>20.11.2.3. Installing/Configuring</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.requirements">20.11.2.3.1. Requirements</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.installation">20.11.2.3.2. Installation</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.configuration">20.11.2.3.3. Runtime Configuration</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.resources">20.11.2.3.4. Resource Types</a></span></dt></dl></div><p>
      <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
      Documentation Group.</a>
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.requirements"></a>20.11.2.3.1. Requirements</h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><p>
        In order to have these functions available, you must compile PHP
        with support for the mysqli extension.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The mysqli extension is designed to work with the version
          4.1.3 or above of MySQL. For previous versions, please see the
          <a href="connectors-apis.html#apis-php-mysql" title="20.11.1. MySQL">MySQL</a> extension
          documentation.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.installation"></a>20.11.2.3.2. Installation</h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.installation.windows">20.11.2.3.2.1. Installation on Windows Systems</a></span></dt></dl></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><p><a name="apis-php-mysqli.configure"></a>
        To install the mysqli extension for PHP, use the
        <code class="option">--with-mysqli=mysql_config_path/mysql_config</code>
        configuration option where <code class="literal">mysql_config_path</code>
        represents the location of the <code class="literal">mysql_config</code>
        program that comes with MySQL versions greater than 4.1.
      </p><p>
        If you would like to install the mysql extension along with the
        mysqli extension you have to use the same client library to
        avoid any conflicts.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="apis-php-mysqli.installation.windows"></a>20.11.2.3.2.1. Installation on Windows Systems</h6></div></div></div><p>
          <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
          Documentation Group.</a>
        </p><p>
          MySQLi is not enabled by default, so the
          <code class="filename">php_mysqli.dll</code> DLL must be enabled inside
          of <code class="filename">php.ini</code>. Also, PHP needs access to the
          MySQL client library. A file named
          <code class="filename">libmysql.dll</code> is included in the Windows
          PHP distribution and in order for PHP to talk to MySQL this
          file needs to be available to the Windows systems
          <code class="envar">PATH</code>. See the FAQ titled
          "<a href="http://www.php.net/manual/en/faq.installation.addtopath.php" target="_top">How
          do I add my PHP directory to the PATH on Windows</a>"
          for information on how to do this. Although copying
          <code class="filename">libmysql.dll</code> to the Windows system
          directory also works (because the system directory is by
          default in the system's <code class="envar">PATH</code>), it's
          not recommended.
        </p><p>
          As with enabling any PHP extension (such as
          <code class="filename">php_mysqli.dll</code>), the PHP directive
          <a href="http://www.php.net/manual/en/ini.extension-dir.php" target="_top">extension_dir</a>
          should be set to the directory where the PHP extensions are
          located. See also the
          <a href="http://www.php.net/manual/en/install.windows.manual.php" target="_top">Manual
          Windows Installation Instructions</a>. An example
          extension_dir value for PHP 5 is <code class="literal">c:\php\ext</code>
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            If when starting the web server an error similar to the
            following occurs: <code class="literal">"Unable to load dynamic
            library './php_mysqli.dll'"</code>, this
            is because <code class="filename">php_mysqli.dll</code> and/or
            <code class="filename">libmysql.dll</code> cannot be found by the
            system.
          </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.configuration"></a>20.11.2.3.3. Runtime Configuration</h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><p>
The behaviour of these functions is affected by settings in <code class="filename">php.ini</code>.
</p><p>
        </p><div class="table"><a name="id3730062"></a><p class="title"><b>Table 20.7. MySQLi Configuration Options</b></p><table summary="MySQLi Configuration Options" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Name</th><th>Default</th><th>Changeable</th><th>Changelog</th></tr></thead><tbody><tr><td>mysqli.max_links</td><td>"-1"</td><td>PHP_INI_SYSTEM</td><td>Available since PHP 5.0.0.</td></tr><tr><td>mysqli.default_port</td><td>"3306"</td><td>PHP_INI_ALL</td><td>Available since PHP 5.0.0.</td></tr><tr><td>mysqli.default_socket</td><td>NULL</td><td>PHP_INI_ALL</td><td>Available since PHP 5.0.0.</td></tr><tr><td>mysqli.default_host</td><td>NULL</td><td>PHP_INI_ALL</td><td>Available since PHP 5.0.0.</td></tr><tr><td>mysqli.default_user</td><td>NULL</td><td>PHP_INI_ALL</td><td>Available since PHP 5.0.0.</td></tr><tr><td>mysqli.default_pw</td><td>NULL</td><td>PHP_INI_ALL</td><td>Available since PHP 5.0.0.</td></tr></tbody></table></div><p>
      </p><p>
        For further details and definitions of the above PHP_INI_*
        constants, see the chapter on
        <a href="http://www.php.net/manual/en/configuration.changes.php" target="_top">configuration
        changes</a>.
      </p><p>
        Here's a short explanation of the configuration directives.
      </p><p>
        </p><div class="variablelist"><dl><dt><a name="apis-php-ini.mysqli.max-links"></a><span class="term">
              <em class="parameter"><code>mysqli.max_links</code></em>
              <span class="type">integer</span>
            </span></dt><dd><p>
                The maximum number of MySQL connections per process.
              </p></dd><dt><a name="apis-php-ini.mysqli.default-port"></a><span class="term">
              <em class="parameter"><code>mysqli.default_port</code></em>
              <span class="type">string</span>
            </span></dt><dd><p>
                The default TCP port number to use when connecting to
                the database server if no other port is specified. If no
                default is specified, the port will be obtained from the
                <code class="literal">MYSQL_TCP_PORT</code> environment variable,
                the <code class="literal">mysql-tcp</code> entry in
                <code class="filename">/etc/services</code> or the compile-time
                <code class="literal">MYSQL_PORT</code> constant, in that order.
                Win32 will only use the <code class="literal">MYSQL_PORT</code>
                constant.
              </p></dd><dt><a name="apis-php-ini.mysqli.default-socket"></a><span class="term">
              <em class="parameter"><code>mysqli.default_socket</code></em>
              <span class="type">string</span>
            </span></dt><dd><p>
                The default socket name to use when connecting to a
                local database server if no other socket name is
                specified.
              </p></dd><dt><a name="apis-php-ini.mysqli.default-host"></a><span class="term">
              <em class="parameter"><code>mysqli.default_host</code></em>
              <span class="type">string</span>
            </span></dt><dd><p>
                The default server host to use when connecting to the
                database server if no other host is specified.
                Doesn't apply in
                <a href="http://www.php.net/manual/en/ini.safe-mode.php" target="_top">safe
                mode</a>.
              </p></dd><dt><a name="apis-php-ini.mysqli.default-user"></a><span class="term">
              <em class="parameter"><code>mysqli.default_user</code></em>
              <span class="type">string</span>
            </span></dt><dd><p>
                The default user name to use when connecting to the
                database server if no other name is specified.
                Doesn't apply in
                <a href="http://www.php.net/manual/en/ini.safe-mode.php" target="_top">safe
                mode</a>.
              </p></dd><dt><a name="apis-php-ini.mysqli.default-pw"></a><span class="term">
              <em class="parameter"><code>mysqli.default_pw</code></em>
              <span class="type">string</span>
            </span></dt><dd><p>
                The default password to use when connecting to the
                database server if no other password is specified.
                Doesn't apply in
                <a href="http://www.php.net/manual/en/ini.safe-mode.php" target="_top">safe
                mode</a>.
              </p></dd></dl></div><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.resources"></a>20.11.2.3.4. Resource Types</h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><p>
        This extension has no resource types defined.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-mysqli.constants"></a>20.11.2.4. Predefined Constants</h4></div></div></div><p>
      <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
      Documentation Group.</a>
    </p><div class="variablelist"><dl><dt><a name="apis-php-constantmysqli-read-default-group"></a><span class="term">
          <code class="constant">MYSQLI_READ_DEFAULT_GROUP</code>
        </span></dt><dd><p>
            Read options from the named group from
            <code class="filename">my.cnf</code> or the file specified with

            <code class="constant">MYSQLI_READ_DEFAULT_FILE</code>
          </p></dd><dt><a name="apis-php-constantmysqli-read-default-file"></a><span class="term">
          <code class="constant">MYSQLI_READ_DEFAULT_FILE</code>
        </span></dt><dd><p>
            Read options from the named option file instead of from
            <code class="filename">my.cnf</code>
          </p></dd><dt><a name="apis-php-constantmysqli-opt-connect-timeout"></a><span class="term">
          <code class="constant">MYSQLI_OPT_CONNECT_TIMEOUT</code>
        </span></dt><dd><p>
            Connect timeout in seconds
          </p></dd><dt><a name="apis-php-constantmysqli-opt-local-infile"></a><span class="term">
          <code class="constant">MYSQLI_OPT_LOCAL_INFILE</code>
        </span></dt><dd><p>
            Enables command <code class="literal">LOAD LOCAL INFILE</code>
          </p></dd><dt><a name="apis-php-constantmysqli-init-command"></a><span class="term">
          <code class="constant">MYSQLI_INIT_COMMAND</code>
        </span></dt><dd><p>
            Command to execute when connecting to MySQL server. Will
            automatically be re-executed when reconnecting.
          </p></dd><dt><a name="apis-php-constantmysqli-client-ssl"></a><span class="term">
          <code class="constant">MYSQLI_CLIENT_SSL</code>
        </span></dt><dd><p>
            Use SSL (encrypted protocol). This option should not be set
            by application programs; it is set internally in the MySQL
            client library
          </p></dd><dt><a name="apis-php-constantmysqli-client-compress"></a><span class="term">
          <code class="constant">MYSQLI_CLIENT_COMPRESS</code>
        </span></dt><dd><p>
            Use compression protocol
          </p></dd><dt><a name="apis-php-constantmysqli-client-interactive"></a><span class="term">
          <code class="constant">MYSQLI_CLIENT_INTERACTIVE</code>
        </span></dt><dd><p>
            Allow interactive_timeout seconds (instead of wait_timeout
            seconds) of inactivity before closing the connection. The
            client's session wait_timeout variable will be set to
            the value of the session interactive_timeout variable.
          </p></dd><dt><a name="apis-php-constantmysqli-client-ignore-space"></a><span class="term">
          <code class="constant">MYSQLI_CLIENT_IGNORE_SPACE</code>
        </span></dt><dd><p>
            Allow spaces after function names. Makes all functions names
            reserved words.
          </p></dd><dt><a name="apis-php-constantmysqli-client-no-schema"></a><span class="term">
          <code class="constant">MYSQLI_CLIENT_NO_SCHEMA</code>
        </span></dt><dd><p>
            Don't allow the
            <code class="literal">db_name.tbl_name.col_name</code> syntax.
          </p></dd><dt><a name="apis-php-constantmysqli-client-multi-queries"></a><span class="term">
          <code class="constant">MYSQLI_CLIENT_MULTI_QUERIES</code>
        </span></dt><dd><p>
            Allows multiple semicolon-delimited queries in a single
            <a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>
            call.
          </p></dd><dt><a name="apis-php-constantmysqli-store-result"></a><span class="term">
          <code class="constant">MYSQLI_STORE_RESULT</code>
        </span></dt><dd><p>
            For using buffered resultsets
          </p></dd><dt><a name="apis-php-constantmysqli-use-result"></a><span class="term">
          <code class="constant">MYSQLI_USE_RESULT</code>
        </span></dt><dd><p>
            For using unbuffered resultsets
          </p></dd><dt><a name="apis-php-constantmysqli-assoc"></a><span class="term">
          <code class="constant">MYSQLI_ASSOC</code>
        </span></dt><dd><p>
            Columns are returned into the array having the fieldname as
            the array index.
          </p></dd><dt><a name="apis-php-constantmysqli-num"></a><span class="term">
          <code class="constant">MYSQLI_NUM</code>
        </span></dt><dd><p>
            Columns are returned into the array having an enumerated
            index.
          </p></dd><dt><a name="apis-php-constantmysqli-both"></a><span class="term">
          <code class="constant">MYSQLI_BOTH</code>
        </span></dt><dd><p>
            Columns are returned into the array having both a numerical
            index and the fieldname as the associative index.
          </p></dd><dt><a name="apis-php-constantmysqli-not-null-flag"></a><span class="term">
          <code class="constant">MYSQLI_NOT_NULL_FLAG</code>
        </span></dt><dd><p>
            Indicates that a field is defined as <code class="literal">NOT
            NULL</code>
          </p></dd><dt><a name="apis-php-constantmysqli-pri-key-flag"></a><span class="term">
          <code class="constant">MYSQLI_PRI_KEY_FLAG</code>
        </span></dt><dd><p>
            Field is part of a primary index
          </p></dd><dt><a name="apis-php-constantmysqli-unique-key-flag"></a><span class="term">
          <code class="constant">MYSQLI_UNIQUE_KEY_FLAG</code>
        </span></dt><dd><p>
            Field is part of a unique index.
          </p></dd><dt><a name="apis-php-constantmysqli-multiple-key-flag"></a><span class="term">
          <code class="constant">MYSQLI_MULTIPLE_KEY_FLAG</code>
        </span></dt><dd><p>
            Field is part of an index.
          </p></dd><dt><a name="apis-php-constantmysqli-blob-flag"></a><span class="term">
          <code class="constant">MYSQLI_BLOB_FLAG</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">BLOB</code>
          </p></dd><dt><a name="apis-php-constantmysqli-unsigned-flag"></a><span class="term">
          <code class="constant">MYSQLI_UNSIGNED_FLAG</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">UNSIGNED</code>
          </p></dd><dt><a name="apis-php-constantmysqli-zerofill-flag"></a><span class="term">
          <code class="constant">MYSQLI_ZEROFILL_FLAG</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">ZEROFILL</code>
          </p></dd><dt><a name="apis-php-constantmysqli-auto-increment-flag"></a><span class="term">
          <code class="constant">MYSQLI_AUTO_INCREMENT_FLAG</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">AUTO_INCREMENT</code>
          </p></dd><dt><a name="apis-php-constantmysqli-timestamp-flag"></a><span class="term">
          <code class="constant">MYSQLI_TIMESTAMP_FLAG</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">TIMESTAMP</code>
          </p></dd><dt><a name="apis-php-constantmysqli-set-flag"></a><span class="term">
          <code class="constant">MYSQLI_SET_FLAG</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">SET</code>
          </p></dd><dt><a name="apis-php-constantmysqli-num-flag"></a><span class="term">
          <code class="constant">MYSQLI_NUM_FLAG</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">NUMERIC</code>
          </p></dd><dt><a name="apis-php-constantmysqli-part-key-flag"></a><span class="term">
          <code class="constant">MYSQLI_PART_KEY_FLAG</code>
        </span></dt><dd><p>
            Field is part of an multi-index
          </p></dd><dt><a name="apis-php-constantmysqli-group-flag"></a><span class="term">
          <code class="constant">MYSQLI_GROUP_FLAG</code>
        </span></dt><dd><p>
            Field is part of <code class="literal">GROUP BY</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-decimal"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_DECIMAL</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">DECIMAL</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-newdecimal"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_NEWDECIMAL</code>
        </span></dt><dd><p>
            Precision math <code class="literal">DECIMAL</code> or
            <code class="literal">NUMERIC</code> field (MySQL 5.0.3 and up)
          </p></dd><dt><a name="apis-php-constantmysqli-type-bit"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_BIT</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">BIT</code> (MySQL 5.0.3 and
            up)
          </p></dd><dt><a name="apis-php-constantmysqli-type-tiny"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_TINY</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">TINYINT</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-short"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_SHORT</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">SMALLINT</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-long"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_LONG</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">INT</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-fload"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_FLOAT</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">FLOAT</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-double"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_DOUBLE</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">DOUBLE</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-null"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_NULL</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">DEFAULT NULL</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-timestamp"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_TIMESTAMP</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">TIMESTAMP</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-longlong"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_LONGLONG</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">BIGINT</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-int24"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_INT24</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">MEDIUMINT</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-date"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_DATE</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">DATE</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-time"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_TIME</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">TIME</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-datetime"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_DATETIME</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">DATETIME</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-year"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_YEAR</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">YEAR</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-newdate"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_NEWDATE</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">DATE</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-enum"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_ENUM</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">ENUM</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-set"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_SET</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">SET</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-tiny-blob"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_TINY_BLOB</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">TINYBLOB</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-medium-blob"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_MEDIUM_BLOB</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">MEDIUMBLOB</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-long-blob"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_LONG_BLOB</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">LONGBLOB</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-blob"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_BLOB</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">BLOB</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-string"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_VAR_STRING</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">VARCHAR</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-char"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_STRING</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">CHAR</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-geometry"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_GEOMETRY</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">GEOMETRY</code>
          </p></dd><dt><a name="apis-php-constantmysqli-need-data"></a><span class="term">
          <code class="constant">MYSQLI_NEED_DATA</code>
        </span></dt><dd><p>
            More data available for bind variable
          </p></dd><dt><a name="apis-php-constantmysqli-no-data"></a><span class="term">
          <code class="constant">MYSQLI_NO_DATA</code>
        </span></dt><dd><p>
            No more data available for bind variable
          </p></dd><dt><a name="apis-php-constantmysqli-data-truncated"></a><span class="term">
          <code class="constant">MYSQLI_DATA_TRUNCATED</code>
        </span></dt><dd><p>
            Data truncation occurred. Available since PHP 5.1.0 and
            MySQL 5.0.5.
          </p></dd><dt><a name="apis-php-constantmysqli-enum-flag"></a><span class="term">
          <code class="constant">MYSQLI_ENUM_FLAG</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">ENUM</code>. Available since
            PHP 5.3.0.
          </p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-mysqli.summary"></a>20.11.2.5. The MySQLi Extension Function Summary</h4></div></div></div><p>
      <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
      Documentation Group.</a>
    </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>MySQLi Class</th><td class="auto-generated"> </td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><th>OOP Interface</th><th>Procedural Interface</th><th>Alias (Do not use)</th><th>Description</th></tr></thead><tbody><tr><td><span class="emphasis"><em>Properties</em></span></td><td class="auto-generated"> </td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.affected-rows" title="20.11.2.6.1. mysqli-&gt;affected_rows,
        mysqli_affected_rows">$mysqli-&gt;affected_rows</a></td><td><code class="function">mysqli_affected_rows</code></td><td>N/A</td><td>Gets the number of affected rows in a previous MySQL operation</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.connect-errno" title="20.11.2.6.7. mysqli-&gt;connect_errno,
        mysqli_connect_errno">$mysqli-&gt;connect_errno</a></td><td><code class="function">mysqli_connect_errno</code></td><td>N/A</td><td>Returns the error code from last connect call</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.connect-error" title="20.11.2.6.8. mysqli-&gt;connect_error,
        mysqli_connect_error">$mysqli-&gt;connect_error</a></td><td><code class="function">mysqli_connect_error</code></td><td>N/A</td><td>Returns a string description of the last connect error</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.errno" title="20.11.2.6.12. mysqli-&gt;errno, mysqli_errno">$mysqli-&gt;errno</a></td><td><a href="connectors-apis.html#apis-php-mysqli.errno" title="20.11.2.6.12. mysqli-&gt;errno, mysqli_errno"><code class="function">mysqli_errno</code></a></td><td>N/A</td><td>Returns the error code for the most recent function call</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.error" title="20.11.2.6.13. mysqli-&gt;error, mysqli_error">$mysqli-&gt;error</a></td><td><a href="connectors-apis.html#apis-php-mysqli.error" title="20.11.2.6.13. mysqli-&gt;error, mysqli_error"><code class="function">mysqli_error</code></a></td><td>N/A</td><td>Returns a string description of the last error</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.field-count" title="20.11.2.6.14. mysqli-&gt;field_count,
        mysqli_field_count">$mysqli-&gt;field_count</a></td><td><code class="function">mysqli_field_count</code></td><td>N/A</td><td>Returns the number of columns for the most recent query</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.get-host-info" title="20.11.2.6.18. mysqli-&gt;host_info,
        mysqli_get_host_info">$mysqli-&gt;host_info</a></td><td><code class="function">mysqli_get_host_info</code></td><td>N/A</td><td>Returns a string representing the type of connection used</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.get-proto-info" title="20.11.2.6.19. mysqli-&gt;protocol_version,
        mysqli_get_proto_info">$mysqli-&gt;protocol_version</a></td><td><code class="function">mysqli_get_proto_info</code></td><td>N/A</td><td>Returns the version of the MySQL protocol used</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.get-server-info" title="20.11.2.6.20. mysqli-&gt;server_info,
        mysqli_get_server_info">$mysqli-&gt;server_info</a></td><td><code class="function">mysqli_get_server_info</code></td><td>N/A</td><td>Returns the version of the MySQL server</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.get-server-version" title="20.11.2.6.21. mysqli-&gt;server_version,
        mysqli_get_server_version">$mysqli-&gt;server_version</a></td><td><code class="function">mysqli_get_server_version</code></td><td>N/A</td><td>Returns the version of the MySQL server as an integer</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.info" title="20.11.2.6.23. mysqli-&gt;info, mysqli_info">$mysqli-&gt;info</a></td><td><a href="connectors-apis.html#apis-php-mysqli.info" title="20.11.2.6.23. mysqli-&gt;info, mysqli_info"><code class="function">mysqli_info</code></a></td><td>N/A</td><td>Retrieves information about the most recently executed query</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.insert-id" title="20.11.2.6.25. mysqli-&gt;insert_id,
        mysqli_insert_id">$mysqli-&gt;insert_id</a></td><td><code class="function">mysqli_insert_id</code></td><td>N/A</td><td>Returns the auto generated id used in the last query</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.sqlstate" title="20.11.2.6.42. mysqli-&gt;sqlstate,
        mysqli_sqlstate">$mysqli-&gt;sqlstate</a></td><td><a href="connectors-apis.html#apis-php-mysqli.sqlstate" title="20.11.2.6.42. mysqli-&gt;sqlstate,
        mysqli_sqlstate"><code class="function">mysqli_sqlstate</code></a></td><td>N/A</td><td>Returns the SQLSTATE error from previous MySQL operation</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.warning-count" title="20.11.2.6.50. mysqli::warning_count,
        mysqli_warning_count">$mysqli-&gt;warning_count</a></td><td><code class="function">mysqli_warning_count</code></td><td>N/A</td><td>Returns the number of warnings from the last query for the given link</td></tr><tr><td><span class="emphasis"><em>Methods</em></span></td><td class="auto-generated"> </td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td><code class="methodname">mysqli-&gt;autocommit</code></td><td><a href="connectors-apis.html#apis-php-mysqli.autocommit" title="20.11.2.6.2. mysqli::autocommit,
        mysqli_autocommit"><code class="function">mysqli_autocommit</code></a></td><td>N/A</td><td>Turns on or off auto-commiting database modifications</td></tr><tr><td><code class="methodname">mysqli-&gt;change_user</code></td><td><code class="function">mysqli_change_user</code></td><td>N/A</td><td>Changes the user of the specified database connection</td></tr><tr><td><code class="methodname">mysqli-&gt;character_set_name</code>,<a href="connectors-apis.html#apis-php-mysqli.character-set-name" title="20.11.2.6.4. mysqli::character_set_name,
        mysqli_character_set_name">
              mysqli-&gt;client_encoding</a></td><td><code class="function">mysqli_character_set_name</code></td><td><code class="function">mysqli_client_encoding</code></td><td>Returns the default character set for the database connection</td></tr><tr><td><code class="methodname">mysqli-&gt;close</code></td><td><a href="connectors-apis.html#apis-php-mysqli.close" title="20.11.2.6.5. mysqli::close, mysqli_close"><code class="function">mysqli_close</code></a></td><td>N/A</td><td>Closes a previously opened database connection</td></tr><tr><td><code class="methodname">mysqli-&gt;commit</code></td><td><a href="connectors-apis.html#apis-php-mysqli.commit" title="20.11.2.6.6. mysqli::commit, mysqli_commit"><code class="function">mysqli_commit</code></a></td><td>N/A</td><td>Commits the current transaction</td></tr><tr><td><code class="methodname">mysqli::__construct</code></td><td><a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a></td><td>N/A</td><td>Open a new connection to the MySQL server [Note: static (i.e. class)
              method]</td></tr><tr><td><code class="methodname">mysqli-&gt;debug</code></td><td><a href="connectors-apis.html#apis-php-mysqli.debug" title="20.11.2.6.10. mysqli::debug, mysqli_debug"><code class="function">mysqli_debug</code></a></td><td>N/A</td><td>Performs debugging operations</td></tr><tr><td><code class="methodname">mysqli-&gt;dump_debug_info</code></td><td><code class="function">mysqli_dump_debug_info</code></td><td>N/A</td><td>Dump debugging information into the log</td></tr><tr><td><code class="methodname">mysqli-&gt;get_charset</code></td><td><code class="function">mysqli_get_charset</code></td><td>N/A</td><td>Returns a character set object</td></tr><tr><td><code class="methodname">mysqli-&gt;get_client_info</code></td><td><code class="function">mysqli_get_client_info</code></td><td>N/A</td><td>Returns the MySQL client version as a string</td></tr><tr><td><code class="methodname">mysqli-&gt;get_client_version</code></td><td><code class="function">mysqli_get_client_version</code></td><td>N/A</td><td>Get MySQL client info</td></tr><tr><td>$mysqli-&gt;get_connection_stats()</td><td>mysqli_get_connection_stats()</td><td>N/A</td><td>NOT DOCUMENTED [mysqlnd only]</td></tr><tr><td><code class="methodname">mysqli-&gt;get_server_info</code></td><td><code class="function">mysqli_get_server_info</code></td><td>N/A</td><td>NOT DOCUMENTED</td></tr><tr><td><code class="methodname">mysqli-&gt;get_warnings</code></td><td><code class="function">mysqli_get_warnings</code></td><td>N/A</td><td>NOT DOCUMENTED</td></tr><tr><td><code class="methodname">mysqli_init</code></td><td><a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a></td><td>N/A</td><td>Initializes MySQLi and returns a resource for use with
              mysqli_real_connect. [Not called on an object, as it
              returns a $mysqli object.]</td></tr><tr><td><code class="methodname">mysqli-&gt;kill</code></td><td><a href="connectors-apis.html#apis-php-mysqli.kill" title="20.11.2.6.26. mysqli::kill, mysqli_kill"><code class="function">mysqli_kill</code></a></td><td>N/A</td><td>Asks the server to kill a MySQL thread</td></tr><tr><td><code class="methodname">mysqli-&gt;more_results</code></td><td><code class="function">mysqli_more_results</code></td><td>N/A</td><td>Check if there are any more query results from a multi query</td></tr><tr><td><code class="methodname">mysqli-&gt;multi_query</code></td><td><code class="function">mysqli_multi_query</code></td><td>N/A</td><td>Performs a query on the database</td></tr><tr><td><code class="methodname">mysqli-&gt;next_result</code></td><td><code class="function">mysqli_next_result</code></td><td>N/A</td><td>Prepare next result from multi_query</td></tr><tr><td><code class="methodname">mysqli-&gt;options</code></td><td><a href="connectors-apis.html#apis-php-mysqli.options" title="20.11.2.6.30. mysqli::options, mysqli_options"><code class="function">mysqli_options</code></a></td><td><code class="function">mysqli_set_opt</code></td><td>Set options</td></tr><tr><td><code class="methodname">mysqli-&gt;ping</code></td><td><a href="connectors-apis.html#apis-php-mysqli.ping" title="20.11.2.6.31. mysqli::ping, mysqli_ping"><code class="function">mysqli_ping</code></a></td><td>N/A</td><td>Pings a server connection, or tries to reconnect if the connection has
              gone down</td></tr><tr><td><code class="methodname">mysqli-&gt;prepare</code></td><td><a href="connectors-apis.html#apis-php-mysqli.prepare" title="20.11.2.6.32. mysqli::prepare, mysqli_prepare"><code class="function">mysqli_prepare</code></a></td><td>N/A</td><td>Prepare a SQL statement for execution</td></tr><tr><td><code class="methodname">mysqli-&gt;query</code></td><td><a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a></td><td>N/A</td><td>Performs a query on the database</td></tr><tr><td><code class="methodname">mysqli-&gt;real_connect</code></td><td><code class="function">mysqli_real_connect</code></td><td>N/A</td><td>Opens a connection to a mysql server</td></tr><tr><td><code class="methodname">mysqli-&gt;real_escape_string</code>,
              <code class="methodname">mysqli-&gt;escape_string</code></td><td><code class="function">mysqli_real_escape_string</code></td><td><code class="function">mysqli_escape_string</code></td><td>Escapes special characters in a string for use in a SQL statement,
              taking into account the current charset of the connection</td></tr><tr><td><code class="methodname">mysqli-&gt;real_query</code></td><td><code class="function">mysqli_real_query</code></td><td>N/A</td><td>Execute an SQL query</td></tr><tr><td><code class="methodname">mysqli-&gt;rollback</code></td><td><a href="connectors-apis.html#apis-php-mysqli.rollback" title="20.11.2.6.37. mysqli::rollback, mysqli_rollback"><code class="function">mysqli_rollback</code></a></td><td>N/A</td><td>Rolls back current transaction</td></tr><tr><td><code class="methodname">mysqli-&gt;select_db</code></td><td><code class="function">mysqli_select_db</code></td><td>N/A</td><td>Selects the default database for database queries</td></tr><tr><td><code class="methodname">mysqli-&gt;set_charset</code></td><td><code class="function">mysqli_set_charset</code></td><td>N/A</td><td>Sets the default client character set</td></tr><tr><td><code class="methodname">mysqli-&gt;set_local_infile_default</code></td><td><code class="function">mysqli_set_local_infile_default</code></td><td>N/A</td><td>Unsets user defined handler for load local infile command</td></tr><tr><td><code class="methodname">mysqli-&gt;set_local_infile_handler</code></td><td><code class="function">mysqli_set_local_infile_handler</code></td><td>N/A</td><td>Set callback function for LOAD DATA LOCAL INFILE command</td></tr><tr><td><code class="methodname">mysqli-&gt;ssl_set</code></td><td><code class="function">mysqli_ssl_set</code></td><td>N/A</td><td>Used for establishing secure connections using SSL</td></tr><tr><td><code class="methodname">mysqli-&gt;stat</code></td><td><a href="connectors-apis.html#apis-php-mysqli.stat" title="20.11.2.6.44. mysqli::stat, mysqli_stat"><code class="function">mysqli_stat</code></a></td><td>N/A</td><td>Gets the current system status</td></tr><tr><td><code class="methodname">mysqli-&gt;stmt_init</code></td><td><code class="function">mysqli_stmt_init</code></td><td>N/A</td><td>Initializes a statement and returns an object for use with
              mysqli_stmt_prepare</td></tr><tr><td><code class="methodname">mysqli-&gt;store_result</code></td><td><code class="function">mysqli_store_result</code></td><td>N/A</td><td>Transfers a result set from the last query</td></tr><tr><td><code class="methodname">mysqli-&gt;thread_id</code></td><td><code class="function">mysqli_thread_id</code></td><td>N/A</td><td>Returns the thread ID for the current connection</td></tr><tr><td><code class="methodname">mysqli-&gt;thread_safe</code></td><td><code class="function">mysqli_thread_safe</code></td><td>N/A</td><td>Returns whether thread safety is given or not</td></tr><tr><td><code class="methodname">mysqli-&gt;use_result</code></td><td><code class="function">mysqli_use_result</code></td><td>N/A</td><td>Initiate a result set retrieval</td></tr></tbody></table></div><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>MySQL_STMT</th><td class="auto-generated"> </td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><th>OOP Interface</th><th>Procedural Interface</th><th>Alias (Do not use)</th><th>Description</th></tr></thead><tbody><tr><td><span class="emphasis"><em>Properties</em></span></td><td class="auto-generated"> </td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli-stmt.affected-rows" title="20.11.2.7.1. mysqli_stmt-&gt;affected_rows,
        mysqli_stmt_affected_rows">$mysqli_stmt-&gt;affected_rows</a></td><td><code class="function">mysqli_stmt_affected_rows</code></td><td>N/A</td><td>Returns the total number of rows changed, deleted, or inserted by the
              last executed statement</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli-stmt.errno" title="20.11.2.7.8. mysqli_stmt-&gt;errno,
        mysqli_stmt_errno">$mysqli_stmt-&gt;errno</a></td><td><code class="function">mysqli_stmt_errno</code></td><td>N/A</td><td>Returns the error code for the most recent statement call</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli-stmt.error" title="20.11.2.7.9. mysqli_stmt-&gt;error,
        mysqli_stmt_error">$mysqli_stmt-&gt;error</a></td><td><code class="function">mysqli_stmt_error</code></td><td>N/A</td><td>Returns a string description for last statement error</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli-stmt.field-count" title="20.11.2.7.12. mysqli_stmt-&gt;field_count,
        mysqli_stmt_field_count">$mysqli_stmt-&gt;field_count</a></td><td><code class="function">mysqli_stmt_field_count</code></td><td>N/A</td><td>Returns the number of field in the given statement - not documented</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli-stmt.insert-id" title="20.11.2.7.15. mysqli_stmt-&gt;insert_id,
        mysqli_stmt_insert_id">$mysqli_stmt-&gt;insert_id</a></td><td><code class="function">mysqli_stmt_insert_id</code></td><td>N/A</td><td>Get the ID generated from the previous INSERT operation</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli-stmt.num-rows" title="20.11.2.7.16. mysqli_stmt::num_rows,
        mysqli_stmt_num_rows">$mysqli_stmt-&gt;num_rows</a></td><td><code class="function">mysqli_stmt_num_rows</code></td><td>N/A</td><td>Return the number of rows in statements result set</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli-stmt.param-count" title="20.11.2.7.17. mysqli_stmt-&gt;param_count,
        mysqli_stmt_param_count">$mysqli_stmt-&gt;param_count</a></td><td><code class="function">mysqli_stmt_param_count</code></td><td><code class="function">mysqli_param_count</code></td><td>Returns the number of parameter for the given statement</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli-stmt.sqlstate" title="20.11.2.7.22. mysqli_stmt::sqlstate,
        mysqli_stmt_sqlstate">$mysqli_stmt-&gt;sqlstate</a></td><td><code class="function">mysqli_stmt_sqlstate</code></td><td>N/A</td><td>Returns SQLSTATE error from previous statement operation</td></tr><tr><td><span class="emphasis"><em>Methods</em></span></td><td class="auto-generated"> </td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td><code class="methodname">mysqli_stmt-&gt;attr_get</code></td><td><code class="function">mysqli_stmt_attr_get</code></td><td>N/A</td><td>NOT DOCUMENTED</td></tr><tr><td><code class="methodname">mysqli_stmt-&gt;attr_set</code></td><td><code class="function">mysqli_stmt_attr_set</code></td><td>N/A</td><td>NOT DOCUMENTED</td></tr><tr><td><code class="methodname">mysqli_stmt-&gt;bind_param</code></td><td><code class="function">mysqli_stmt_bind_param</code></td><td><code class="function">mysqli_bind_param</code></td><td>Binds variables to a prepared statement as parameters</td></tr><tr><td><code class="methodname">mysqli_stmt-&gt;bind_result</code></td><td><code class="function">mysqli_stmt_bind_result</code></td><td><code class="function">mysqli_bind_result</code></td><td>Binds variables to a prepared statement for result storage</td></tr><tr><td><code class="methodname">mysqli_stmt-&gt;close</code></td><td><code class="function">mysqli_stmt_close</code></td><td>N/A</td><td>Closes a prepared statement</td></tr><tr><td><code class="methodname">mysqli_stmt-&gt;data_seek</code></td><td><code class="function">mysqli_stmt_data_seek</code></td><td>N/A</td><td>Seeks to an arbitrary row in statement result set</td></tr><tr><td><code class="methodname">mysqli_stmt-&gt;execute</code></td><td><code class="function">mysqli_stmt_execute</code></td><td><code class="function">mysqli_execute</code></td><td>Executes a prepared Query</td></tr><tr><td><code class="methodname">mysqli_stmt-&gt;fetch</code></td><td><code class="function">mysqli_stmt_fetch</code></td><td><code class="function">mysqli_fetch</code></td><td>Fetch results from a prepared statement into the bound variables</td></tr><tr><td><code class="methodname">mysqli_stmt-&gt;free_result</code></td><td><code class="function">mysqli_stmt_free_result</code></td><td>N/A</td><td>Frees stored result memory for the given statement handle</td></tr><tr><td>$mysqli_stmt-&gt;get_result()</td><td>mysqli_stmt_get_result</td><td>N/A</td><td>NOT DOCUMENTED [mysqlnd only]</td></tr><tr><td><code class="methodname">mysqli_stmt-&gt;get_warnings</code></td><td><code class="function">mysqli_stmt_get_warnings</code></td><td>N/A</td><td>NOT DOCUMENTED</td></tr><tr><td>$mysqli_stmt-&gt;more_results()</td><td>mysqli_stmt_more_results()</td><td>N/A</td><td>NOT DOCUMENTED [mysqlnd only]</td></tr><tr><td>$mysqli_stmt-&gt;next_result()</td><td>mysqli_stmt_next_result()</td><td>N/A</td><td>NOT DOCUMENTED [mysqlnd only]</td></tr><tr><td><code class="methodname">mysqli_stmt-&gt;num_rows</code></td><td><code class="function">mysqli_stmt_num_rows</code></td><td>N/A</td><td>NOT DOCUMENTED [see also num_rows property]</td></tr><tr><td><code class="methodname">mysqli_stmt-&gt;prepare</code></td><td><code class="function">mysqli_stmt_prepare</code></td><td>N/A</td><td>Prepare a SQL statement for execution</td></tr><tr><td><code class="methodname">mysqli_stmt-&gt;reset</code></td><td><code class="function">mysqli_stmt_reset</code></td><td>N/A</td><td>Resets a prepared statement</td></tr><tr><td><code class="methodname">mysqli_stmt-&gt;result_metadata</code></td><td><code class="function">mysqli_stmt_result_metadata</code></td><td><code class="function">mysqli_get_metadata</code></td><td>Returns result set metadata from a prepared statement</td></tr><tr><td><code class="methodname">mysqli_stmt-&gt;send_long_data</code></td><td><code class="function">mysqli_stmt_send_long_data</code></td><td><code class="function">mysqli_send_long_data</code></td><td>Send data in blocks</td></tr><tr><td><code class="methodname">mysqli_stmt-&gt;store_result</code></td><td><code class="function">mysqli_stmt_store_result</code></td><td>N/A</td><td>Transfers a result set from a prepared statement</td></tr></tbody></table></div><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>MySQLi_RESULT</th><td class="auto-generated"> </td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><th>OOP Interface</th><th>Procedural Interface</th><th>Alias (Do not use)</th><th>Description</th></tr></thead><tbody><tr><td><span class="emphasis"><em>Properties</em></span></td><td class="auto-generated"> </td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli-result.current-field" title="20.11.2.8.1. mysqli_result-&gt;current_field,
        mysqli_field_tell">$mysqli_result-&gt;current_field</a></td><td><code class="function">mysqli_field_tell</code></td><td>N/A</td><td>Get current field offset of a result pointer</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli-result.field-count" title="20.11.2.8.11. mysqli_result-&gt;field_count,
        mysqli_num_fields">$mysqli_result-&gt;field_count</a></td><td><code class="function">mysqli_num_fields</code></td><td>N/A</td><td>Get the number of fields in a result</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli-result.lengths" title="20.11.2.8.14. mysqli_result-&gt;lengths,
        mysqli_fetch_lengths">$mysqli_result-&gt;lengths</a></td><td><code class="function">mysqli_fetch_lengths</code></td><td>N/A</td><td>Returns the lengths of the columns of the current row in the result set</td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli-result.num-rows" title="20.11.2.8.15. mysqli_result-&gt;num_rows,
        mysqli_num_rows">$mysqli_result-&gt;num_rows</a></td><td><code class="function">mysqli_num_rows</code></td><td>N/A</td><td>Gets the number of rows in a result</td></tr><tr><td><span class="emphasis"><em>Methods</em></span></td><td class="auto-generated"> </td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td><code class="methodname">mysqli_result-&gt;data_seek</code></td><td><code class="function">mysqli_data_seek</code></td><td>N/A</td><td>Adjusts the result pointer to an arbitary row in the result</td></tr><tr><td>$mysqli_result-&gt;fetch_all()</td><td>mysqli_fetch_all()</td><td>N/A</td><td>NOT DOCUMENTED [mysqlnd only]</td></tr><tr><td><code class="methodname">mysqli_result-&gt;fetch_array</code></td><td><code class="function">mysqli_fetch_array</code></td><td>N/A</td><td>Fetch a result row as an associative, a numeric array, or both</td></tr><tr><td><code class="methodname">mysqli_result-&gt;fetch_assoc</code></td><td><code class="function">mysqli_fetch_assoc</code></td><td>N/A</td><td>Fetch a result row as an associative array</td></tr><tr><td><code class="methodname">mysqli_result-&gt;fetch_field_direct</code></td><td><code class="function">mysqli_fetch_field_direct</code></td><td>N/A</td><td>Fetch meta-data for a single field</td></tr><tr><td><code class="methodname">mysqli_result-&gt;fetch_field</code></td><td><code class="function">mysqli_fetch_field</code></td><td>N/A</td><td>Returns the next field in the result set</td></tr><tr><td><code class="methodname">mysqli_result-&gt;fetch_fields</code></td><td><code class="function">mysqli_fetch_fields</code></td><td>N/A</td><td>Returns an array of objects representing the fields in a result set</td></tr><tr><td><code class="methodname">mysqli_result-&gt;fetch_object</code></td><td><code class="function">mysqli_fetch_object</code></td><td>N/A</td><td>Returns the current row of a result set as an object</td></tr><tr><td><code class="methodname">mysqli_result-&gt;fetch_row</code></td><td><code class="function">mysqli_fetch_row</code></td><td>N/A</td><td>Get a result row as an enumerated array</td></tr><tr><td><code class="methodname">mysqli_result-&gt;field_seek</code></td><td><code class="function">mysqli_field_seek</code></td><td>N/A</td><td>Set result pointer to a specified field offset</td></tr><tr><td><code class="methodname">mysqli_result-&gt;free</code>,
              <a href="connectors-apis.html#apis-php-mysqli-result.free" title="20.11.2.8.13. mysqli_result::free,
        mysqli_free_result">mysqli_result-&gt;close</a>,
              <a href="connectors-apis.html#apis-php-mysqli-result.free" title="20.11.2.8.13. mysqli_result::free,
        mysqli_free_result">mysqli_result-&gt;free_result</a></td><td><code class="function">mysqli_free_result</code></td><td>N/A</td><td>Frees the memory associated with a result</td></tr></tbody></table></div><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>MySQL_Driver</th><td class="auto-generated"> </td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><th>OOP Interface</th><th>Procedural Interface</th><th>Alias (Do not use)</th><th>Description</th></tr></thead><tbody><tr><td><span class="emphasis"><em>Properties</em></span></td><td class="auto-generated"> </td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td>N/A</td><td class="auto-generated"> </td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td><span class="emphasis"><em>Methods</em></span></td><td class="auto-generated"> </td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td><code class="methodname">mysqli_driver-&gt;embedded_server_end</code></td><td><code class="function">mysqli_embedded_server_end</code></td><td>N/A</td><td>NOT DOCUMENTED</td></tr><tr><td><code class="methodname">mysqli_driver-&gt;embedded_server_start</code></td><td><code class="function">mysqli_embedded_server_start</code></td><td>N/A</td><td>NOT DOCUMENTED</td></tr></tbody></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Alias functions are provided for backward compatibility purposes
        only. Do not use them in new projects.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-class.mysqli"></a>20.11.2.6. The MySQLi class (<code class="literal">MySQLi</code>)</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.affected-rows">20.11.2.6.1. <code class="literal">mysqli-&gt;affected_rows</code>,
        <code class="literal">mysqli_affected_rows</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.autocommit">20.11.2.6.2. <code class="literal">mysqli::autocommit</code>,
        <code class="literal">mysqli_autocommit</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.change-user">20.11.2.6.3. <code class="literal">mysqli::change_user</code>,
        <code class="literal">mysqli_change_user</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.character-set-name">20.11.2.6.4. <code class="literal">mysqli::character_set_name</code>,
        <code class="literal">mysqli_character_set_name</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.close">20.11.2.6.5. <code class="literal">mysqli::close</code>, <code class="literal">mysqli_close</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.commit">20.11.2.6.6. <code class="literal">mysqli::commit</code>, <code class="literal">mysqli_commit</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.connect-errno">20.11.2.6.7. <code class="literal">mysqli-&gt;connect_errno</code>,
        <code class="literal">mysqli_connect_errno</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.connect-error">20.11.2.6.8. <code class="literal">mysqli-&gt;connect_error</code>,
        <code class="literal">mysqli_connect_error</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.connect">20.11.2.6.9. <code class="literal">mysqli::__construct</code>,
        <code class="literal">mysqli_connect</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.debug">20.11.2.6.10. <code class="literal">mysqli::debug</code>, <code class="literal">mysqli_debug</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.dump-debug-info">20.11.2.6.11. <code class="literal">mysqli::dump_debug_info</code>,
        <code class="literal">mysqli_dump_debug_info</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.errno">20.11.2.6.12. <code class="literal">mysqli-&gt;errno</code>, <code class="literal">mysqli_errno</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.error">20.11.2.6.13. <code class="literal">mysqli-&gt;error</code>, <code class="literal">mysqli_error</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.field-count">20.11.2.6.14. <code class="literal">mysqli-&gt;field_count</code>,
        <code class="literal">mysqli_field_count</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.get-charset">20.11.2.6.15. <code class="literal">mysqli::get_charset</code>,
        <code class="literal">mysqli_get_charset</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.get-client-info">20.11.2.6.16. <code class="literal">mysqli::get_client_info</code>,
        <code class="literal">mysqli_get_client_info</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.get-client-version">20.11.2.6.17. <code class="literal">mysqli::get_client_version</code>,
        <code class="literal">mysqli_get_client_version</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.get-host-info">20.11.2.6.18. <code class="literal">mysqli-&gt;host_info</code>,
        <code class="literal">mysqli_get_host_info</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.get-proto-info">20.11.2.6.19. <code class="literal">mysqli-&gt;protocol_version</code>,
        <code class="literal">mysqli_get_proto_info</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.get-server-info">20.11.2.6.20. <code class="literal">mysqli-&gt;server_info</code>,
        <code class="literal">mysqli_get_server_info</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.get-server-version">20.11.2.6.21. <code class="literal">mysqli-&gt;server_version</code>,
        <code class="literal">mysqli_get_server_version</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.get-warnings">20.11.2.6.22. <code class="literal">mysqli::get_warnings</code>,
        <code class="literal">mysqli_get_warnings</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.info">20.11.2.6.23. <code class="literal">mysqli-&gt;info</code>, <code class="literal">mysqli_info</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.init">20.11.2.6.24. <code class="literal">mysqli::init</code>, <code class="literal">mysqli_init</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.insert-id">20.11.2.6.25. <code class="literal">mysqli-&gt;insert_id</code>,
        <code class="literal">mysqli_insert_id</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.kill">20.11.2.6.26. <code class="literal">mysqli::kill</code>, <code class="literal">mysqli_kill</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.more-results">20.11.2.6.27. <code class="literal">mysqli::more_results</code>,
        <code class="literal">mysqli_more_results</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.multi-query">20.11.2.6.28. <code class="literal">mysqli::multi_query</code>,
        <code class="literal">mysqli_multi_query</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.next-result">20.11.2.6.29. <code class="literal">mysqli::next_result</code>,
        <code class="literal">mysqli_next_result</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.options">20.11.2.6.30. <code class="literal">mysqli::options</code>, <code class="literal">mysqli_options</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.ping">20.11.2.6.31. <code class="literal">mysqli::ping</code>, <code class="literal">mysqli_ping</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.prepare">20.11.2.6.32. <code class="literal">mysqli::prepare</code>, <code class="literal">mysqli_prepare</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.query">20.11.2.6.33. <code class="literal">mysqli::query</code>, <code class="literal">mysqli_query</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.real-connect">20.11.2.6.34. <code class="literal">mysqli::real_connect</code>,
        <code class="literal">mysqli_real_connect</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.real-escape-string">20.11.2.6.35. <code class="literal">mysqli::real_escape_string</code>,
        <code class="literal">mysqli_real_escape_string</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.real-query">20.11.2.6.36. <code class="literal">mysqli::real_query</code>,
        <code class="literal">mysqli_real_query</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.rollback">20.11.2.6.37. <code class="literal">mysqli::rollback</code>, <code class="literal">mysqli_rollback</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.select-db">20.11.2.6.38. <code class="literal">mysqli::select_db</code>,
        <code class="literal">mysqli_select_db</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.set-charset">20.11.2.6.39. <code class="literal">mysqli::set_charset</code>,
        <code class="literal">mysqli_set_charset</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.set-local-infile-default">20.11.2.6.40. <code class="literal">mysqli::set_local_infile_default</code>,
        <code class="literal">mysqli_set_local_infile_default</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.set-local-infile-handler">20.11.2.6.41. <code class="literal">mysqli::set_local_infile_handler</code>,
        <code class="literal">mysqli_set_local_infile_handler</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.sqlstate">20.11.2.6.42. <code class="literal">mysqli-&gt;sqlstate</code>,
        <code class="literal">mysqli_sqlstate</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.ssl-set">20.11.2.6.43. <code class="literal">mysqli::ssl_set</code>, <code class="literal">mysqli_ssl_set</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.stat">20.11.2.6.44. <code class="literal">mysqli::stat</code>, <code class="literal">mysqli_stat</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.stmt-init">20.11.2.6.45. <code class="literal">mysqli::stmt_init</code>,
        <code class="literal">mysqli_stmt_init</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.store-result">20.11.2.6.46. <code class="literal">mysqli::store_result</code>,
        <code class="literal">mysqli_store_result</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.thread-id">20.11.2.6.47. <code class="literal">mysqli::thread_id</code>,
        <code class="literal">mysqli_thread_id</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.thread-safe">20.11.2.6.48. <code class="literal">mysqli::thread_safe</code>,
        <code class="literal">mysqli_thread_safe</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.use-result">20.11.2.6.49. <code class="literal">mysqli::use_result</code>,
        <code class="literal">mysqli_use_result</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli.warning-count">20.11.2.6.50. <code class="literal">mysqli::warning_count</code>,
        <code class="literal">mysqli_warning_count</code></a></span></dt></dl></div><p>
      <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
      Documentation Group.</a>
    </p><p>
      Represents a connection between PHP and a MySQL database.
    </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">MySQLi</span></span> {<br> <span class="ooclass"><span class="classname">MySQLi</span></span>

      Properties<code class="fieldsynopsis">  <span class="type">int </span><span class="varname">affected_rows </span>;</code><br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">connect_errno </span>;</code><br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">connect_error </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">errno </span>;</code><br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">error </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">field_count </span>;</code><br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">host_info </span>;</code><br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">protocol_version </span>;</code><br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">server_info </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">server_version </span>;</code><br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">info </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">insert_id </span>;</code><br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">sqlstate </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">thread_id </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">warning_count </span>;</code><br>Methods<code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_affected_rows</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::autocommit</span>(<span class="methodparam"><span class="type">bool </span><span class="parameter">mode</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::change_user</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">user</span></span>,<br>                           <span class="methodparam"><span class="type">string </span><span class="parameter">password</span></span>,<br>                           <span class="methodparam"><span class="type">string </span><span class="parameter">database</span></span>);</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli::character_set_name</span>();</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::close</span>();</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::commit</span>();</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_connect_errno</span>();</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli_connect_error</span>();</code><br><code class="methodsynopsis">  <span class="type">mysqli </span><span class="methodname">mysqli_connect</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">host</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">username</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">passwd</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">dbname</span></span>,<br>                        <span class="methodparam"><span class="type">int </span><span class="parameter">port</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">socket</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::debug</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">message</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::dump_debug_info</span>();</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_errno</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli_error</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_field_count</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">object </span><span class="methodname">mysqli::get_charset</span>();</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli::get_client_info</span>();</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli::get_client_version</span>();</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli_get_host_info</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_get_proto_info</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli_get_server_info</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_get_server_version</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">object </span><span class="methodname">mysqli::get_warnings</span>();</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli_info</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">mysqli </span><span class="methodname">init</span>();</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_insert_id</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::kill</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">processid</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::more_results</span>();</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::multi_query</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::next_result</span>();</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::options</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">option</span></span>,<br>                       <span class="methodparam"><span class="type">mixed </span><span class="parameter">value</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::ping</span>();</code><br><code class="methodsynopsis">  <span class="type">mysqli_stmt </span><span class="methodname">prepare</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><br><code class="methodsynopsis">  <span class="type">mixed </span><span class="methodname">mysqli::query</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>,<br>                      <span class="methodparam"><span class="type">int </span><span class="parameter">resultmode</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::real_connect</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">host</span></span>,<br>                            <span class="methodparam"><span class="type">string </span><span class="parameter">username</span></span>,<br>                            <span class="methodparam"><span class="type">string </span><span class="parameter">passwd</span></span>,<br>                            <span class="methodparam"><span class="type">string </span><span class="parameter">dbname</span></span>,<br>                            <span class="methodparam"><span class="type">int </span><span class="parameter">port</span></span>,<br>                            <span class="methodparam"><span class="type">string </span><span class="parameter">socket</span></span>,<br>                            <span class="methodparam"><span class="type">int </span><span class="parameter">flags</span></span>);</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli::escape_string</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">escapestr</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">real_query</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::rollback</span>();</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::select_db</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">dbname</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::set_charset</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">charset</span></span>);</code><br><code class="methodsynopsis">  <span class="type">void </span><span class="methodname">mysqli_set_local_infile_default</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_set_local_infile_handler</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                                       <span class="methodparam"><span class="type">callback </span><span class="parameter">read_func</span></span>);</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli_sqlstate</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::ssl_set</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">key</span></span>,<br>                       <span class="methodparam"><span class="type">string </span><span class="parameter">cert</span></span>,<br>                       <span class="methodparam"><span class="type">string </span><span class="parameter">ca</span></span>,<br>                       <span class="methodparam"><span class="type">string </span><span class="parameter">capath</span></span>,<br>                       <span class="methodparam"><span class="type">string </span><span class="parameter">cipher</span></span>);</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli::stat</span>();</code><br><code class="methodsynopsis">  <span class="type">mysqli_stmt </span><span class="methodname">stmt_init</span>();</code><br><code class="methodsynopsis">  <span class="type">mysqli_result </span><span class="methodname">store_result</span>();</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_thread_id</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_thread_safe</span>();</code><br><code class="methodsynopsis">  <span class="type">mysqli_result </span><span class="methodname">use_result</span>();</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_warning_count</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br>}</pre><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.affected-rows"></a>20.11.2.6.1. <code class="literal">mysqli-&gt;affected_rows</code>,
        <code class="literal">mysqli_affected_rows</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;affected_rows</code>
          </p><p>
            <code class="literal">mysqli_affected_rows</code>
          </p><p>
            Gets the number of affected rows in a previous MySQL
            operation
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">affected_rows </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_affected_rows</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Returns the number of rows affected by the last
        <code class="literal">INSERT</code>, <code class="literal">UPDATE</code>,
        <code class="literal">REPLACE</code> or <code class="literal">DELETE</code> query.
      </p><p>
        For SELECT statements <code class="function">mysqli_affected_rows</code>
        works like <code class="function">mysqli_num_rows</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An integer greater than zero indicates the number of rows
        affected or retrieved. Zero indicates that no records where
        updated for an UPDATE statement, no rows matched the
        <code class="literal">WHERE</code> clause in the query or that no query
        has yet been executed. -1 indicates that the query returned an
        error.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If the number of affected rows is greater than maximal int
          value, the number of affected rows will be returned as a
          string.
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3736358"></a><p class="title"><b>Example 20.69. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* Insert rows */
$mysqli-&gt;query("CREATE TABLE Language SELECT * from CountryLanguage");
printf("Affected rows (INSERT): %d\n", $mysqli-&gt;affected_rows);

$mysqli-&gt;query("ALTER TABLE Language ADD Status int default 0");

/* update rows */
$mysqli-&gt;query("UPDATE Language SET Status=1 WHERE Percentage &gt; 50");
printf("Affected rows (UPDATE): %d\n", $mysqli-&gt;affected_rows);

/* delete rows */
$mysqli-&gt;query("DELETE FROM Language WHERE Percentage &lt; 50");
printf("Affected rows (DELETE): %d\n", $mysqli-&gt;affected_rows);

/* select all rows */
$result = $mysqli-&gt;query("SELECT CountryCode FROM Language");
printf("Affected rows (SELECT): %d\n", $mysqli-&gt;affected_rows);

$result-&gt;close();

/* Delete table Language */
$mysqli-&gt;query("DROP TABLE Language");

/* close connection */
$mysqli-&gt;close();
?&gt;

   </pre></div><div class="example"><a name="id3736388"></a><p class="title"><b>Example 20.70. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

if (!$link) {
    printf("Can't connect to localhost. Error: %s\n", mysqli_connect_error());
    exit();
}

/* Insert rows */
mysqli_query($link, "CREATE TABLE Language SELECT * from CountryLanguage");
printf("Affected rows (INSERT): %d\n", mysqli_affected_rows($link));

mysqli_query($link, "ALTER TABLE Language ADD Status int default 0");

/* update rows */
mysqli_query($link, "UPDATE Language SET Status=1 WHERE Percentage &gt; 50");
printf("Affected rows (UPDATE): %d\n", mysqli_affected_rows($link));

/* delete rows */
mysqli_query($link, "DELETE FROM Language WHERE Percentage &lt; 50");
printf("Affected rows (DELETE): %d\n", mysqli_affected_rows($link));

/* select all rows */
$result = mysqli_query($link, "SELECT CountryCode FROM Language");
printf("Affected rows (SELECT): %d\n", mysqli_affected_rows($link));

mysqli_free_result($result);

/* Delete table Language */
mysqli_query($link, "DROP TABLE Language");

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Affected rows (INSERT): 984
Affected rows (UPDATE): 168
Affected rows (DELETE): 815
Affected rows (SELECT): 169


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_num_rows</code>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.info" title="20.11.2.6.23. mysqli-&gt;info, mysqli_info"><code class="function">mysqli_info</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.autocommit"></a>20.11.2.6.2. <code class="literal">mysqli::autocommit</code>,
        <code class="literal">mysqli_autocommit</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::autocommit</code>
          </p><p>
            <code class="literal">mysqli_autocommit</code>
          </p><p>
            Turns on or off auto-commiting database modifications
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method)
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::autocommit</span>(<span class="methodparam"><span class="type">bool </span><span class="parameter">mode</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_autocommit</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                       <span class="methodparam"><span class="type">bool </span><span class="parameter">mode</span></span>);</code><p>
        Turns on or off auto-commit mode on queries for the database
        connection.
      </p><p>
        To determine the current state of autocommit use the SQL command
        <code class="literal">SELECT @@autocommit</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>mode</code></em>
            </span></dt><dd><p>
                Whether to turn on auto-commit or not.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This function doesn't work with non transactional table
          types (like MyISAM or ISAM).
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3736774"></a><p class="title"><b>Example 20.71. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* turn autocommit on */
$mysqli-&gt;autocommit(TRUE);

if ($result = $mysqli-&gt;query("SELECT @@autocommit")) {
    $row = $result-&gt;fetch_row();
    printf("Autocommit is %s\n", $row[0]);
    $result-&gt;free();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

   </pre></div><div class="example"><a name="id3736794"></a><p class="title"><b>Example 20.72. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

if (!$link) {
    printf("Can't connect to localhost. Error: %s\n", mysqli_connect_error());
    exit();
}

/* turn autocommit on */
mysqli_autocommit($link, TRUE);

if ($result = mysqli_query($link, "SELECT @@autocommit")) {
    $row = mysqli_fetch_row($result);
    printf("Autocommit is %s\n", $row[0]);
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Autocommit is 1


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.commit" title="20.11.2.6.6. mysqli::commit, mysqli_commit"><code class="function">mysqli_commit</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.rollback" title="20.11.2.6.37. mysqli::rollback, mysqli_rollback"><code class="function">mysqli_rollback</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.change-user"></a>20.11.2.6.3. <code class="literal">mysqli::change_user</code>,
        <code class="literal">mysqli_change_user</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::change_user</code>
          </p><p>
            <code class="literal">mysqli_change_user</code>
          </p><p>
            Changes the user of the specified database connection
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::change_user</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">user</span></span>,<br>                         <span class="methodparam"><span class="type">string </span><span class="parameter">password</span></span>,<br>                         <span class="methodparam"><span class="type">string </span><span class="parameter">database</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_change_user</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">user</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">password</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">database</span></span>);</code><p>
        Changes the user of the specified database connection and sets
        the current database.
      </p><p>
        In order to successfully change users a valid
        <em class="parameter"><code>username</code></em> and
        <em class="parameter"><code>password</code></em> parameters must be provided and
        that user must have sufficient permissions to access the desired
        database. If for any reason authorization fails, the current
        user authentication will remain.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>user</code></em>
            </span></dt><dd><p>
                The MySQL user name.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>password</code></em>
            </span></dt><dd><p>
                The MySQL password.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>database</code></em>
            </span></dt><dd><p>
                The database to change to.
              </p><p>
                If desired, the

                <code class="constant">NULL</code>

                value may be passed resulting in only changing the user
                and not selecting a database. To select a database in
                this case use the <code class="function">mysqli_select_db</code>
                function.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Using this command will always cause the current database
          connection to behave as if was a completely new database
          connection, regardless of if the operation was completed
          successfully. This reset includes performing a rollback on any
          active transactions, closing all temporary tables, and
          unlocking all locked tables.
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3737284"></a><p class="title"><b>Example 20.73. Object oriented style</b></p><pre class="programlisting">
&lt;?php

/* connect database test */
$mysqli = new mysqli("localhost", "my_user", "my_password", "test");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* Set Variable a */
$mysqli-&gt;query("SET @a:=1");

/* reset all and select a new database */
$mysqli-&gt;change_user("my_user", "my_password", "world");

if ($result = $mysqli-&gt;query("SELECT DATABASE()")) {
    $row = $result-&gt;fetch_row();
    printf("Default database: %s\n", $row[0]);
    $result-&gt;close();
}

if ($result = $mysqli-&gt;query("SELECT @a")) {
    $row = $result-&gt;fetch_row();
    if ($row[0] === NULL) {
        printf("Value of variable a is NULL\n");
    }
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

    </pre></div><div class="example"><a name="id3737316"></a><p class="title"><b>Example 20.74. Procedural style</b></p><pre class="programlisting">
&lt;?php
/* connect database test */
$link = mysqli_connect("localhost", "my_user", "my_password", "test");

/* check connection */
if (!$link) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* Set Variable a */
mysqli_query($link, "SET @a:=1");

/* reset all and select a new database */
mysqli_change_user($link, "my_user", "my_password", "world");

if ($result = mysqli_query($link, "SELECT DATABASE()")) {
    $row = mysqli_fetch_row($result);
    printf("Default database: %s\n", $row[0]);
    mysqli_free_result($result);
}

if ($result = mysqli_query($link, "SELECT @a")) {
    $row = mysqli_fetch_row($result);
    if ($row[0] === NULL) {
        printf("Value of variable a is NULL\n");
    }
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Default database: world
Value of variable a is NULL


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>

          </td></tr><tr><td><code class="function">mysqli_select_db</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.character-set-name"></a>20.11.2.6.4. <code class="literal">mysqli::character_set_name</code>,
        <code class="literal">mysqli_character_set_name</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::character_set_name</code>
          </p><p>
            <code class="literal">mysqli_character_set_name</code>
          </p><p>
            Returns the default character set for the database
            connection
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli::character_set_name</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_character_set_name</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Returns the current character set for the database connection.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The default character set for the current connection
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3737598"></a><p class="title"><b>Example 20.75. Object oriented style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* Print current character set */
$charset = $mysqli-&gt;character_set_name();
printf ("Current character set is %s\n", $charset);

$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3737620"></a><p class="title"><b>Example 20.76. Procedural style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (!$link) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* Print current character set */
$charset = mysqli_character_set_name($link);
printf ("Current character set is %s\n",$charset);

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Current character set is latin1_swedish_ci


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_client_encoding</code>

          </td></tr><tr><td><code class="function">mysqli_real_escape_string</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.close"></a>20.11.2.6.5. <code class="literal">mysqli::close</code>, <code class="literal">mysqli_close</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::close</code>
          </p><p>
            <code class="literal">mysqli_close</code>
          </p><p>
            Closes a previously opened database connection
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::close</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_close</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Closes a previously opened database connection.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>

          </td></tr><tr><td><code class="function">mysqli_real_connect</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.commit"></a>20.11.2.6.6. <code class="literal">mysqli::commit</code>, <code class="literal">mysqli_commit</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::commit</code>
          </p><p>
            <code class="literal">mysqli_commit</code>
          </p><p>
            Commits the current transaction
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method)
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::commit</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_commit</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Commits the current transaction for the database connection.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3738133"></a><p class="title"><b>Example 20.77. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$mysqli-&gt;query("CREATE TABLE Language LIKE CountryLanguage Type=InnoDB");

/* set autocommit to off */
$mysqli-&gt;autocommit(FALSE);

/* Insert some values */
$mysqli-&gt;query("INSERT INTO Language VALUES ('DEU', 'Bavarian', 'F', 11.2)");
$mysqli-&gt;query("INSERT INTO Language VALUES ('DEU', 'Swabian', 'F', 9.4)");

/* commit transaction */
$mysqli-&gt;commit();

/* drop table */
$mysqli-&gt;query("DROP TABLE Language");

/* close connection */
$mysqli-&gt;close();
?&gt;

    </pre></div><p>

        </p><div class="example"><a name="id3738162"></a><p class="title"><b>Example 20.78. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "test");

/* check connection */
if (!$link) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* set autocommit to off */
mysqli_autocommit($link, FALSE);

mysqli_query($link, "CREATE TABLE Language LIKE CountryLanguage Type=InnoDB");

/* Insert some values */
mysqli_query($link, "INSERT INTO Language VALUES ('DEU', 'Bavarian', 'F', 11.2)");
mysqli_query($link, "INSERT INTO Language VALUES ('DEU', 'Swabian', 'F', 9.4)");

/* commit transaction */
mysqli_commit($link);

/* close connection */
mysqli_close($link);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.autocommit" title="20.11.2.6.2. mysqli::autocommit,
        mysqli_autocommit"><code class="function">mysqli_autocommit</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.rollback" title="20.11.2.6.37. mysqli::rollback, mysqli_rollback"><code class="function">mysqli_rollback</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.connect-errno"></a>20.11.2.6.7. <code class="literal">mysqli-&gt;connect_errno</code>,
        <code class="literal">mysqli_connect_errno</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;connect_errno</code>
          </p><p>
            <code class="literal">mysqli_connect_errno</code>
          </p><p>
            Returns the error code from last connect call
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">connect_errno </span>;</code><br>}</pre><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_connect_errno</span>();</code><p>
        Returns the last error code number from the last call to
        <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Client error message numbers are listed in the MySQL
          <code class="filename">errmsg.h</code> header file, server error
          message numbers are listed in
          <code class="filename">mysqld_error.h</code>. In the MySQL source
          distribution you can find a complete list of error messages
          and error numbers in the file
          <code class="filename">Docs/mysqld_error.txt</code>.
        </p></div><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An error code value for the last call to
        <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>,
        if it failed. zero means no error occurred.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3738416"></a><p class="title"><b>Example 20.79. <code class="function">mysqli_connect_errno</code> example</b></p><pre class="programlisting">
&lt;?php

$link = @mysqli_connect("localhost", "nonexisting_user", "");

if (!$link) {
    printf("Can't connect to localhost. Errorcode: %d\n", mysqli_connect_errno());
}
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>

          </td></tr><tr><td><code class="function">mysqli_connect_error</code>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.errno" title="20.11.2.6.12. mysqli-&gt;errno, mysqli_errno"><code class="function">mysqli_errno</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.error" title="20.11.2.6.13. mysqli-&gt;error, mysqli_error"><code class="function">mysqli_error</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.sqlstate" title="20.11.2.6.42. mysqli-&gt;sqlstate,
        mysqli_sqlstate"><code class="function">mysqli_sqlstate</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.connect-error"></a>20.11.2.6.8. <code class="literal">mysqli-&gt;connect_error</code>,
        <code class="literal">mysqli_connect_error</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;connect_error</code>
          </p><p>
            <code class="literal">mysqli_connect_error</code>
          </p><p>
            Returns a string description of the last connect error
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">connect_error </span>;</code><br>}</pre><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_connect_error</span>();</code><p>
        Returns the last error message string from the last call to
        <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A string that describes the error. An empty string if no error
        occurred.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3738651"></a><p class="title"><b>Example 20.80. <code class="function">mysqli_connect_error</code> example</b></p><pre class="programlisting">
&lt;?php

$link = @mysqli_connect("localhost", "nonexisting_user", "");

if (!$link) {
    printf("Can't connect to localhost. Error: %s\n", mysqli_connect_error());
}
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>

          </td></tr><tr><td><code class="function">mysqli_connect_errno</code>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.errno" title="20.11.2.6.12. mysqli-&gt;errno, mysqli_errno"><code class="function">mysqli_errno</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.error" title="20.11.2.6.13. mysqli-&gt;error, mysqli_error"><code class="function">mysqli_error</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.sqlstate" title="20.11.2.6.42. mysqli-&gt;sqlstate,
        mysqli_sqlstate"><code class="function">mysqli_sqlstate</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.connect"></a>20.11.2.6.9. <code class="literal">mysqli::__construct</code>,
        <code class="literal">mysqli_connect</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::__construct</code>
          </p><p>
            <code class="literal">mysqli_connect</code>
          </p><p>
            Open a new connection to the MySQL server
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (constructor):
      </p><code class="constructorsynopsis"><span class="methodname">mysqli::__construct</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">host</span></span>,<br>                    <span class="methodparam"><span class="type">string </span><span class="parameter">username</span></span>,<br>                    <span class="methodparam"><span class="type">string </span><span class="parameter">passwd</span></span>,<br>                    <span class="methodparam"><span class="type">string </span><span class="parameter">dbname</span></span>,<br>                    <span class="methodparam"><span class="type">int </span><span class="parameter">port</span></span>,<br>                    <span class="methodparam"><span class="type">string </span><span class="parameter">socket</span></span>);</code><br><p>
        Procedural style
      </p><code class="methodsynopsis"><span class="type">mysqli </span><span class="methodname">mysqli_connect</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">host</span></span>,<br>                      <span class="methodparam"><span class="type">string </span><span class="parameter">username</span></span>,<br>                      <span class="methodparam"><span class="type">string </span><span class="parameter">passwd</span></span>,<br>                      <span class="methodparam"><span class="type">string </span><span class="parameter">dbname</span></span>,<br>                      <span class="methodparam"><span class="type">int </span><span class="parameter">port</span></span>,<br>                      <span class="methodparam"><span class="type">string </span><span class="parameter">socket</span></span>);</code><p>
        Opens a connection to the MySQL Server running on.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>host</code></em>
            </span></dt><dd><p>
                Can be either a host name or an IP address. Passing the

                <code class="constant">NULL</code>

                value or the string "localhost" to this
                parameter, the local host is assumed. When possible,
                pipes will be used instead of the TCP/IP protocol.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>username</code></em>
            </span></dt><dd><p>
                The MySQL user name.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>passwd</code></em>
            </span></dt><dd><p>
                If not provided or

                <code class="constant">NULL</code>

                , the MySQL server will attempt to authenticate the user
                against those user records which have no password only.
                This allows one username to be used with different
                permissions (depending on if a password as provided or
                not).
              </p></dd><dt><span class="term">
              <em class="parameter"><code>dbname</code></em>
            </span></dt><dd><p>
                If provided will specify the default database to be used
                when performing queries.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>port</code></em>
            </span></dt><dd><p>
                Specifies the port number to attempt to connect to the
                MySQL server.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>socket</code></em>
            </span></dt><dd><p>
                Specifies the socket or named pipe that should be used.
              </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                  Specifying the <em class="parameter"><code>socket</code></em> parameter
                  will not explicitly determine the type of connection
                  to be used when connecting to the MySQL server. How
                  the connection is made to the MySQL database is
                  determined by the <em class="parameter"><code>host</code></em>
                  parameter.
                </p></div></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a object which represents the connection to a MySQL
        Server.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3739227"></a><p class="title"><b>Example 20.81. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if ($mysqli-&gt;connect_error) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

printf("Host information: %s\n", $mysqli-&gt;host_info);

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3739252"></a><p class="title"><b>Example 20.82. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (!$link) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

printf("Host information: %s\n", mysqli_get_host_info($link));

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Host information: Localhost via UNIX socket


      </pre><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          OO syntax only: If a connection fails an object is still
          returned. To check if the connection failed then use the
          <a href="connectors-apis.html#apis-php-mysqli.connect-error" title="20.11.2.6.8. mysqli-&gt;connect_error,
        mysqli_connect_error">mysqli-&gt;connect_error</a>
          property like in the examples above.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Error "Can't create TCP/IP socket (10106)"
          usually means that the
          <a href="http://www.php.net/manual/en/ini.variables-order.php" target="_top">variables_order</a>
          configure directive doesn't contain character
          <code class="literal">E</code>. On Windows, if the environment is not
          copied the <code class="literal">SYSTEMROOT</code> environment variable
          won't be available and PHP will have problems loading
          Winsock.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.debug"></a>20.11.2.6.10. <code class="literal">mysqli::debug</code>, <code class="literal">mysqli_debug</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::debug</code>
          </p><p>
            <code class="literal">mysqli_debug</code>
          </p><p>
            Performs debugging operations
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::debug</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">message</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_debug</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">message</span></span>);</code><p>
        Performs debugging operations using the Fred Fish debugging
        library.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>message</code></em>
            </span></dt><dd><p>
                A string representing the debugging operation to perform
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        .
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          To use the
          <a href="connectors-apis.html#apis-php-mysqli.debug" title="20.11.2.6.10. mysqli::debug, mysqli_debug"><code class="function">mysqli_debug</code></a>
          function you must complile the MySQL client library to support
          debugging.
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3739561"></a><p class="title"><b>Example 20.83. Generating a Trace File</b></p><pre class="programlisting">
&lt;?php

/* Create a trace file in '/tmp/client.trace' on the local (client) machine: */
mysqli_debug("d:t:0,/tmp/client.trace");

?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_dump_debug_info</code>

          </td></tr><tr><td><code class="function">mysqli_report</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.dump-debug-info"></a>20.11.2.6.11. <code class="literal">mysqli::dump_debug_info</code>,
        <code class="literal">mysqli_dump_debug_info</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::dump_debug_info</code>
          </p><p>
            <code class="literal">mysqli_dump_debug_info</code>
          </p><p>
            Dump debugging information into the log
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::dump_debug_info</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_dump_debug_info</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        This function is designed to be executed by an user with the
        SUPER privilege and is used to dump debugging information into
        the log for the MySQL Server relating to the connection.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.debug" title="20.11.2.6.10. mysqli::debug, mysqli_debug"><code class="function">mysqli_debug</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.errno"></a>20.11.2.6.12. <code class="literal">mysqli-&gt;errno</code>, <code class="literal">mysqli_errno</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;errno</code>
          </p><p>
            <code class="literal">mysqli_errno</code>
          </p><p>
            Returns the error code for the most recent function call
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">errno </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_errno</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Returns the last error code for the most recent MySQLi function
        call that can succeed or fail.
      </p><p>
        Client error message numbers are listed in the MySQL
        <code class="filename">errmsg.h</code> header file, server error message
        numbers are listed in <code class="filename">mysqld_error.h</code>. In
        the MySQL source distribution you can find a complete list of
        error messages and error numbers in the file
        <code class="filename">Docs/mysqld_error.txt</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An error code value for the last call, if it failed. zero means
        no error occurred.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3740064"></a><p class="title"><b>Example 20.84. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if (!$mysqli-&gt;query("SET a=1")) {
    printf("Errorcode: %d\n", $mysqli-&gt;errno);
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3740084"></a><p class="title"><b>Example 20.85. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if (!mysqli_query($link, "SET a=1")) {
    printf("Errorcode: %d\n", mysqli_errno($link));
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Errorcode: 1193


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_connect_errno</code>

          </td></tr><tr><td><code class="function">mysqli_connect_error</code>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.error" title="20.11.2.6.13. mysqli-&gt;error, mysqli_error"><code class="function">mysqli_error</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.sqlstate" title="20.11.2.6.42. mysqli-&gt;sqlstate,
        mysqli_sqlstate"><code class="function">mysqli_sqlstate</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.error"></a>20.11.2.6.13. <code class="literal">mysqli-&gt;error</code>, <code class="literal">mysqli_error</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;error</code>
          </p><p>
            <code class="literal">mysqli_error</code>
          </p><p>
            Returns a string description of the last error
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">error </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_error</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Returns the last error message for the most recent MySQLi
        function call that can succeed or fail.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A string that describes the error. An empty string if no error
        occurred.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3740378"></a><p class="title"><b>Example 20.86. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if (!$mysqli-&gt;query("SET a=1")) {
    printf("Errormessage: %s\n", $mysqli-&gt;error);
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3740398"></a><p class="title"><b>Example 20.87. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if (!mysqli_query($link, "SET a=1")) {
    printf("Errormessage: %s\n", mysqli_error($link));
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Errormessage: Unknown system variable 'a'


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_connect_errno</code>

          </td></tr><tr><td><code class="function">mysqli_connect_error</code>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.errno" title="20.11.2.6.12. mysqli-&gt;errno, mysqli_errno"><code class="function">mysqli_errno</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.sqlstate" title="20.11.2.6.42. mysqli-&gt;sqlstate,
        mysqli_sqlstate"><code class="function">mysqli_sqlstate</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.field-count"></a>20.11.2.6.14. <code class="literal">mysqli-&gt;field_count</code>,
        <code class="literal">mysqli_field_count</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;field_count</code>
          </p><p>
            <code class="literal">mysqli_field_count</code>
          </p><p>
            Returns the number of columns for the most recent query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_result</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">field_count </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_field_count</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Returns the number of columns for the most recent query on the
        connection represented by the <em class="parameter"><code>link</code></em>
        parameter. This function can be useful when using the
        <code class="function">mysqli_store_result</code> function to determine
        if the query should have produced a non-empty result set or not
        without knowing the nature of the query.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An integer representing the number of fields in a result set.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3740710"></a><p class="title"><b>Example 20.88. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "test");

$mysqli-&gt;query( "DROP TABLE IF EXISTS friends");
$mysqli-&gt;query( "CREATE TABLE friends (id int, name varchar(20))");

$mysqli-&gt;query( "INSERT INTO friends VALUES (1,'Hartmut'), (2, 'Ulf')");


$mysqli-&gt;real_query("SELECT * FROM friends");

if ($mysqli-&gt;field_count) {
    /* this was a select/show or describe query */
    $result = $mysqli-&gt;store_result();

    /* process resultset */
    $row = $result-&gt;fetch_row();

    /* free resultset */
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

    </pre></div><p>

        </p><div class="example"><a name="id3740741"></a><p class="title"><b>Example 20.89. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "test");

mysqli_query($link, "DROP TABLE IF EXISTS friends");
mysqli_query($link, "CREATE TABLE friends (id int, name varchar(20))");

mysqli_query($link, "INSERT INTO friends VALUES (1,'Hartmut'), (2, 'Ulf')");

mysqli_real_query($link, "SELECT * FROM friends");

if (mysqli_field_count($link)) {
    /* this was a select/show or describe query */
    $result = mysqli_store_result($link);

    /* process resultset */
    $row = mysqli_fetch_row($result);

    /* free resultset */
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

    </pre></div><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.get-charset"></a>20.11.2.6.15. <code class="literal">mysqli::get_charset</code>,
        <code class="literal">mysqli_get_charset</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::get_charset</code>
          </p><p>
            <code class="literal">mysqli_get_charset</code>
          </p><p>
            Returns a character set object
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli::get_charset</span>();</code><br><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli_get_charset</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Returns a character set object providing several properties of
        the current active characer set.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The function returns a character set object with the following
        properties:

        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>charset</code></em>
            </span></dt><dd><p>
                Character set name
              </p></dd><dt><span class="term">
              <em class="parameter"><code>collation</code></em>
            </span></dt><dd><p>
                Collation name
              </p></dd><dt><span class="term">
              <em class="parameter"><code>dir</code></em>
            </span></dt><dd><p>
                Directory the charset description was fetched from (?)
                or "" for builtin character sets
              </p></dd><dt><span class="term">
              <em class="parameter"><code>min_length</code></em>
            </span></dt><dd><p>
                Minimum character lenght in bytes
              </p></dd><dt><span class="term">
              <em class="parameter"><code>max_length</code></em>
            </span></dt><dd><p>
                Maximum character length in bytes
              </p></dd><dt><span class="term">
              <em class="parameter"><code>number</code></em>
            </span></dt><dd><p>
                Internal character set number
              </p></dd><dt><span class="term">
              <em class="parameter"><code>state</code></em>
            </span></dt><dd><p>
                Characer set status (?)
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3741099"></a><p class="title"><b>Example 20.90. Object oriented style</b></p><pre class="programlisting">
&lt;?php
  $db = mysqli_init();
  $db-&gt;real_connect("localhost","root","","test");
  var_dump($db-&gt;get_charset());
?&gt;

   </pre></div><div class="example"><a name="id3741116"></a><p class="title"><b>Example 20.91. Procedural style</b></p><pre class="programlisting">
&lt;?php
  $db = mysqli_init();
  mysqli_real_connect($db, "localhost","root","","test");
  var_dump($db-&gt;get_charset());
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


object(stdClass)#2 (7) {
  ["charset"]=&gt;
  string(6) "latin1"
  ["collation"]=&gt;
  string(17) "latin1_swedish_ci"
  ["dir"]=&gt;
  string(0) ""
  ["min_length"]=&gt;
  int(1)
  ["max_length"]=&gt;
  int(1)
  ["number"]=&gt;
  int(8)
  ["state"]=&gt;
  int(801)
}


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_characters_set_name</code>

          </td></tr><tr><td><code class="function">mysqli_set_charset</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.get-client-info"></a>20.11.2.6.16. <code class="literal">mysqli::get_client_info</code>,
        <code class="literal">mysqli_get_client_info</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::get_client_info</code>
          </p><p>
            <code class="literal">mysqli_get_client_info</code>
          </p><p>
            Returns the MySQL client version as a string
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli::get_client_info</span>();</code><br><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_get_client_info</span>();</code><p>
        The <code class="function">mysqli_get_client_info</code> function is used
        to return a string representing the client version being used in
        the MySQLi extension.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A string that represents the MySQL client library version
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3741307"></a><p class="title"><b>Example 20.92. mysqli_get_client_info</b></p><pre class="programlisting">
&lt;?php

/* We don't need a connection to determine
   the version of mysql client library */

printf("Client library version: %s\n", mysqli_get_client_info());
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_get_client_version</code>

          </td></tr><tr><td><code class="function">mysqli_get_server_info</code>

          </td></tr><tr><td><code class="function">mysqli_get_server_version</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.get-client-version"></a>20.11.2.6.17. <code class="literal">mysqli::get_client_version</code>,
        <code class="literal">mysqli_get_client_version</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::get_client_version</code>
          </p><p>
            <code class="literal">mysqli_get_client_version</code>
          </p><p>
            Get MySQL client info
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli::get_client_version</span>();</code><br><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_get_client_version</span>();</code><p>
        Returns client version number as an integer.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A number that represents the MySQL client library version in
        format: <code class="literal">main_version*10000 + minor_version *100 +
        sub_version</code>. For example, 4.1.0 is returned as 40100.
      </p><p>
        This is useful to quickly determine the version of the client
        library to know if some capability exits.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3741500"></a><p class="title"><b>Example 20.93. mysqli_get_client_version</b></p><pre class="programlisting">
&lt;?php

/* We don't need a connection to determine
   the version of mysql client library */

printf("Client library version: %d\n", mysqli_get_client_version());
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_get_client_info</code>

          </td></tr><tr><td><code class="function">mysqli_get_server_info</code>

          </td></tr><tr><td><code class="function">mysqli_get_server_version</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.get-host-info"></a>20.11.2.6.18. <code class="literal">mysqli-&gt;host_info</code>,
        <code class="literal">mysqli_get_host_info</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;host_info</code>
          </p><p>
            <code class="literal">mysqli_get_host_info</code>
          </p><p>
            Returns a string representing the type of connection used
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">host_info </span>;</code><br>}</pre><p>
        Procdural style:
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_get_host_info</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        The <code class="function">mysqli_get_host_info</code> function returns a
        string describing the connection represented by the
        <em class="parameter"><code>link</code></em> parameter is using (including the
        server host name).
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A character string representing the server hostname and the
        connection type.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3741777"></a><p class="title"><b>Example 20.94. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* print host information */
printf("Host info: %s\n", $mysqli-&gt;host_info);

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3741799"></a><p class="title"><b>Example 20.95. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* print host information */
printf("Host info: %s\n", mysqli_get_host_info($link));

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Host info: Localhost via UNIX socket


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_get_proto_info</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.get-proto-info"></a>20.11.2.6.19. <code class="literal">mysqli-&gt;protocol_version</code>,
        <code class="literal">mysqli_get_proto_info</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;protocol_version</code>
          </p><p>
            <code class="literal">mysqli_get_proto_info</code>
          </p><p>
            Returns the version of the MySQL protocol used
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">protocol_version </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_get_proto_info</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Returns an integer representing the MySQL protocol version used
        by the connection represented by the <em class="parameter"><code>link</code></em>
        parameter.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an integer representing the protocol version.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3742069"></a><p class="title"><b>Example 20.96. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* print protocol version */
printf("Protocol version: %d\n", $mysqli-&gt;protocol_version);

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3742091"></a><p class="title"><b>Example 20.97. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* print protocol version */
printf("Protocol version: %d\n", mysqli_get_proto_info($link));

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Protocol version: 10


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_get_host_info</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.get-server-info"></a>20.11.2.6.20. <code class="literal">mysqli-&gt;server_info</code>,
        <code class="literal">mysqli_get_server_info</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;server_info</code>
          </p><p>
            <code class="literal">mysqli_get_server_info</code>
          </p><p>
            Returns the version of the MySQL server
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">server_info </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_get_server_info</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Returns a string representing the version of the MySQL server
        that the MySQLi extension is connected to.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A character string representing the server version.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3742354"></a><p class="title"><b>Example 20.98. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* print server version */
printf("Server version: %s\n", $mysqli-&gt;server_info);

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3742375"></a><p class="title"><b>Example 20.99. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* print server version */
printf("Server version: %s\n", mysqli_get_server_info($link));

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Server version: 4.1.2-alpha-debug


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_get_client_info</code>

          </td></tr><tr><td><code class="function">mysqli_get_client_version</code>

          </td></tr><tr><td><code class="function">mysqli_get_server_version</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.get-server-version"></a>20.11.2.6.21. <code class="literal">mysqli-&gt;server_version</code>,
        <code class="literal">mysqli_get_server_version</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;server_version</code>
          </p><p>
            <code class="literal">mysqli_get_server_version</code>
          </p><p>
            Returns the version of the MySQL server as an integer
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">server_version </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_get_server_version</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        The <code class="function">mysqli_get_server_version</code> function
        returns the version of the server connected to (represented by
        the <em class="parameter"><code>link</code></em> parameter) as an integer.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An integer representing the server version.
      </p><p>
        The form of this version number is <code class="literal">main_version * 10000
        + minor_version * 100 + sub_version</code> (i.e. version
        4.1.0 is 40100).
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3742679"></a><p class="title"><b>Example 20.100. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* print server version */
printf("Server version: %d\n", $mysqli-&gt;server_version);

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3742701"></a><p class="title"><b>Example 20.101. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* print server version */
printf("Server version: %d\n", mysqli_get_server_version($link));

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Server version: 40102


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_get_client_info</code>

          </td></tr><tr><td><code class="function">mysqli_get_client_version</code>

          </td></tr><tr><td><code class="function">mysqli_get_server_info</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.get-warnings"></a>20.11.2.6.22. <code class="literal">mysqli::get_warnings</code>,
        <code class="literal">mysqli_get_warnings</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::get_warnings</code>
          </p><p>
            <code class="literal">mysqli_get_warnings</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli::get_warnings</span>();</code><br><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli_get_warnings</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.info"></a>20.11.2.6.23. <code class="literal">mysqli-&gt;info</code>, <code class="literal">mysqli_info</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;info</code>
          </p><p>
            <code class="literal">mysqli_info</code>
          </p><p>
            Retrieves information about the most recently executed query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property)
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">info </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_info</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        The
        <a href="connectors-apis.html#apis-php-mysqli.info" title="20.11.2.6.23. mysqli-&gt;info, mysqli_info"><code class="function">mysqli_info</code></a>
        function returns a string providing information about the last
        query executed. The nature of this string is provided below:
      </p><p>
        </p><div class="table"><a name="id3743020"></a><p class="title"><b>Table 20.8. Possible mysqli_info return values</b></p><table summary="Possible mysqli_info return values" border="1"><colgroup><col><col></colgroup><thead><tr><th>Query type</th><th>Example result string</th></tr></thead><tbody><tr><td>INSERT INTO...SELECT...</td><td>Records: 100 Duplicates: 0 Warnings: 0</td></tr><tr><td>INSERT INTO...VALUES (...),(...),(...)</td><td>Records: 3 Duplicates: 0 Warnings: 0</td></tr><tr><td>LOAD DATA INFILE ...</td><td>Records: 1 Deleted: 0 Skipped: 0 Warnings: 0</td></tr><tr><td>ALTER TABLE ...</td><td>Records: 3 Duplicates: 0 Warnings: 0</td></tr><tr><td>UPDATE ...</td><td>Rows matched: 40 Changed: 40 Warnings: 0</td></tr></tbody></table></div><p>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Queries which do not fall into one of the above formats are
          not supported. In these situations,
          <a href="connectors-apis.html#apis-php-mysqli.info" title="20.11.2.6.23. mysqli-&gt;info, mysqli_info"><code class="function">mysqli_info</code></a>
          will return an empty string.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A character string representing additional information about the
        most recently executed query.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3743210"></a><p class="title"><b>Example 20.102. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$mysqli-&gt;query("CREATE TEMPORARY TABLE t1 LIKE City");

/* INSERT INTO .. SELECT */
$mysqli-&gt;query("INSERT INTO t1 SELECT * FROM City ORDER BY ID LIMIT 150");
printf("%s\n", $mysqli-&gt;info);

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3743237"></a><p class="title"><b>Example 20.103. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

mysqli_query($link, "CREATE TEMPORARY TABLE t1 LIKE City");

/* INSERT INTO .. SELECT */
mysqli_query($link, "INSERT INTO t1 SELECT * FROM City ORDER BY ID LIMIT 150");
printf("%s\n", mysqli_info($link));

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Records: 150  Duplicates: 0  Warnings: 0


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_affected_rows</code>

          </td></tr><tr><td><code class="function">mysqli_warning_count</code>

          </td></tr><tr><td><code class="function">mysqli_num_rows</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.init"></a>20.11.2.6.24. <code class="literal">mysqli::init</code>, <code class="literal">mysqli_init</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::init</code>
          </p><p>
            <code class="literal">mysqli_init</code>
          </p><p>
            Initializes MySQLi and returns a resource for use with
            mysqli_real_connect()
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">mysqli </span><span class="methodname">init</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">mysqli </span><span class="methodname">mysqli_init</span>();</code><p>
        Allocates or initializes a MYSQL object suitable for
        <a href="connectors-apis.html#apis-php-mysqli.options" title="20.11.2.6.30. mysqli::options, mysqli_options"><code class="function">mysqli_options</code></a>
        and <code class="function">mysqli_real_connect</code>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Any subsequent calls to any mysqli function (except
          <a href="connectors-apis.html#apis-php-mysqli.options" title="20.11.2.6.30. mysqli::options, mysqli_options"><code class="function">mysqli_options</code></a>)
          will fail until <code class="function">mysqli_real_connect</code> was
          called.
        </p></div><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an object.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.options" title="20.11.2.6.30. mysqli::options, mysqli_options"><code class="function">mysqli_options</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.close" title="20.11.2.6.5. mysqli::close, mysqli_close"><code class="function">mysqli_close</code></a>

          </td></tr><tr><td><code class="function">mysqli_real_connect</code>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.insert-id"></a>20.11.2.6.25. <code class="literal">mysqli-&gt;insert_id</code>,
        <code class="literal">mysqli_insert_id</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;insert_id</code>
          </p><p>
            <code class="literal">mysqli_insert_id</code>
          </p><p>
            Returns the auto generated id used in the last query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">insert_id </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_insert_id</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        The <code class="function">mysqli_insert_id</code> function returns the
        ID generated by a query on a table with a column having the
        AUTO_INCREMENT attribute. If the last query wasn't an
        INSERT or UPDATE statement or if the modified table does not
        have a column with the AUTO_INCREMENT attribute, this function
        will return zero.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Performing an INSERT or UPDATE statement using the
          LAST_INSERT_ID() function will also modify the value returned
          by the <code class="function">mysqli_insert_id</code> function.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The value of the <code class="literal">AUTO_INCREMENT</code> field that
        was updated by the previous query. Returns zero if there was no
        previous query on the connection or if the query did not update
        an <code class="literal">AUTO_INCREMENT</code> value.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If the number is greater than maximal int value,
          <code class="function">mysqli_insert_id</code> will return a string.
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3743788"></a><p class="title"><b>Example 20.104. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$mysqli-&gt;query("CREATE TABLE myCity LIKE City");

$query = "INSERT INTO myCity VALUES (NULL, 'Stuttgart', 'DEU', 'Stuttgart', 617000)";
$mysqli-&gt;query($query);

printf ("New Record has id %d.\n", $mysqli-&gt;insert_id);

/* drop table */
$mysqli-&gt;query("DROP TABLE myCity");

/* close connection */
$mysqli-&gt;close();
?&gt;

   </pre></div><div class="example"><a name="id3743817"></a><p class="title"><b>Example 20.105. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

mysqli_query($link, "CREATE TABLE myCity LIKE City");

$query = "INSERT INTO myCity VALUES (NULL, 'Stuttgart', 'DEU', 'Stuttgart', 617000)";
mysqli_query($link, $query);

printf ("New Record has id %d.\n", mysqli_insert_id($link));

/* drop table */
mysqli_query($link, "DROP TABLE myCity");

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


New Record has id 1.


      </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.kill"></a>20.11.2.6.26. <code class="literal">mysqli::kill</code>, <code class="literal">mysqli_kill</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::kill</code>
          </p><p>
            <code class="literal">mysqli_kill</code>
          </p><p>
            Asks the server to kill a MySQL thread
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method)
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::kill</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">processid</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_kill</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                 <span class="methodparam"><span class="type">int </span><span class="parameter">processid</span></span>);</code><p>
        This function is used to ask the server to kill a MySQL thread
        specified by the <em class="parameter"><code>processid</code></em> parameter.
        This value must be retrieved by calling the
        <code class="function">mysqli_thread_id</code> function.
      </p><p>
        To stop a running query you should use the SQL command
        <code class="literal">KILL QUERY processid</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3744110"></a><p class="title"><b>Example 20.106. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* determine our thread id */
$thread_id = $mysqli-&gt;thread_id;

/* Kill connection */
$mysqli-&gt;kill($thread_id);

/* This should produce an error */
if (!$mysqli-&gt;query("CREATE TABLE myCity LIKE City")) {
    printf("Error: %s\n", $mysqli-&gt;error);
    exit;
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3744132"></a><p class="title"><b>Example 20.107. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* determine our thread id */
$thread_id = mysqli_thread_id($link);

/* Kill connection */
mysqli_kill($link, $thread_id);

/* This should produce an error */
if (!mysqli_query($link, "CREATE TABLE myCity LIKE City")) {
    printf("Error: %s\n", mysqli_error($link));
    exit;
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Error: MySQL server has gone away


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_thread_id</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.more-results"></a>20.11.2.6.27. <code class="literal">mysqli::more_results</code>,
        <code class="literal">mysqli_more_results</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::more_results</code>
          </p><p>
            <code class="literal">mysqli_more_results</code>
          </p><p>
            Check if there are any more query results from a multi query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::more_results</span>();</code><br><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_more_results</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Indicates if one or more result sets are available from a
        previous call to <code class="function">mysqli_multi_query</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        See <code class="function">mysqli_multi_query</code>.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_multi_query</code>

          </td></tr><tr><td><code class="function">mysqli_next_result</code>

          </td></tr><tr><td><code class="function">mysqli_store_result</code>

          </td></tr><tr><td><code class="function">mysqli_use_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.multi-query"></a>20.11.2.6.28. <code class="literal">mysqli::multi_query</code>,
        <code class="literal">mysqli_multi_query</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::multi_query</code>
          </p><p>
            <code class="literal">mysqli_multi_query</code>
          </p><p>
            Performs a query on the database
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::multi_query</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_multi_query</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><p>
        Executes one or multiple queries which are concatenated by a
        semicolon.
      </p><p>
        To retrieve the resultset from the first query you can use
        <code class="function">mysqli_use_result</code> or
        <code class="function">mysqli_store_result</code>. All subsequent query
        results can be processed using
        <code class="function">mysqli_more_results</code> and
        <code class="function">mysqli_next_result</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>query</code></em>
            </span></dt><dd><p>
                The query, as a string.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">FALSE</code>

        if the first statement failed. To retrieve subsequent errors
        from other statements you have to call
        <code class="function">mysqli_next_result</code> first.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3744741"></a><p class="title"><b>Example 20.108. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query  = "SELECT CURRENT_USER();";
$query .= "SELECT Name FROM City ORDER BY ID LIMIT 20, 5";

/* execute multi query */
if ($mysqli-&gt;multi_query($query)) {
    do {
        /* store first result set */
        if ($result = $mysqli-&gt;store_result()) {
            while ($row = $result-&gt;fetch_row()) {
                printf("%s\n", $row[0]);
            }
            $result-&gt;free();
        }
        /* print divider */
        if ($mysqli-&gt;more_results()) {
            printf("-----------------\n");
        }
    } while ($mysqli-&gt;next_result());
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3744780"></a><p class="title"><b>Example 20.109. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query  = "SELECT CURRENT_USER();";
$query .= "SELECT Name FROM City ORDER BY ID LIMIT 20, 5";

/* execute multi query */
if (mysqli_multi_query($link, $query)) {
    do {
        /* store first result set */
        if ($result = mysqli_store_result($link)) {
            while ($row = mysqli_fetch_row($result)) {
                printf("%s\n", $row[0]);
            }
            mysqli_free_result($result);
        }
        /* print divider */
        if (mysqli_more_results($link)) {
            printf("-----------------\n");
        }
    } while (mysqli_next_result($link));
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output something similar to:
      </p><pre class="screen">


my_user@localhost
-----------------
Amersfoort
Maastricht
Dordrecht
Leiden
Haarlemmermeer


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_use_result</code>

          </td></tr><tr><td><code class="function">mysqli_store_result</code>

          </td></tr><tr><td><code class="function">mysqli_next_result</code>

          </td></tr><tr><td><code class="function">mysqli_more_results</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.next-result"></a>20.11.2.6.29. <code class="literal">mysqli::next_result</code>,
        <code class="literal">mysqli_next_result</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::next_result</code>
          </p><p>
            <code class="literal">mysqli_next_result</code>
          </p><p>
            Prepare next result from multi_query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::next_result</span>();</code><br><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_next_result</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Prepares next result set from a previous call to
        <code class="function">mysqli_multi_query</code> which can be retrieved
        by <code class="function">mysqli_store_result</code> or
        <code class="function">mysqli_use_result</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        See <code class="function">mysqli_multi_query</code>.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_multi_query</code>

          </td></tr><tr><td><code class="function">mysqli_more_results</code>

          </td></tr><tr><td><code class="function">mysqli_store_result</code>

          </td></tr><tr><td><code class="function">mysqli_use_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.options"></a>20.11.2.6.30. <code class="literal">mysqli::options</code>, <code class="literal">mysqli_options</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::options</code>
          </p><p>
            <code class="literal">mysqli_options</code>
          </p><p>
            Set options
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method)
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::options</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">option</span></span>,<br>                     <span class="methodparam"><span class="type">mixed </span><span class="parameter">value</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_options</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                    <span class="methodparam"><span class="type">int </span><span class="parameter">option</span></span>,<br>                    <span class="methodparam"><span class="type">mixed </span><span class="parameter">value</span></span>);</code><p>
        Used to set extra connect options and affect behavior for a
        connection.
      </p><p>
        This function may be called multiple times to set several
        options.
      </p><p>
        <a href="connectors-apis.html#apis-php-mysqli.options" title="20.11.2.6.30. mysqli::options, mysqli_options"><code class="function">mysqli_options</code></a>
        should be called after
        <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
        and before <code class="function">mysqli_real_connect</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>option</code></em>
            </span></dt><dd><p>
                The option that you want to set. It can be one of the
                following values:

                </p><div class="table"><a name="id3745431"></a><p class="title"><b>Table 20.9. Valid options</b></p><table summary="Valid options" border="1"><colgroup><col><col></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="constant">MYSQLI_OPT_CONNECT_TIMEOUT</code></td><td>connection timeout in seconds</td></tr><tr><td><code class="constant">MYSQLI_OPT_LOCAL_INFILE</code></td><td>enable/disable use of <code class="literal">LOAD LOCAL INFILE</code></td></tr><tr><td><code class="constant">MYSQLI_INIT_COMMAND</code></td><td>command to execute after when connecting to MySQL server</td></tr><tr><td><code class="constant">MYSQLI_READ_DEFAULT_FILE</code></td><td>Read options from named option file instead of
                          <code class="filename">my.cnf</code></td></tr><tr><td><code class="constant">MYSQLI_READ_DEFAULT_GROUP</code></td><td>Read options from the named group from <code class="filename">my.cnf</code> or
                          the file specified with

                          <code class="constant">MYSQL_READ_DEFAULT_FILE</code>

                          .</td></tr></tbody></table></div><p>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>value</code></em>
            </span></dt><dd><p>
                The value for the option.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        See <code class="function">mysqli_real_connect</code>.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>

          </td></tr><tr><td><code class="function">mysqli_real_connect</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.ping"></a>20.11.2.6.31. <code class="literal">mysqli::ping</code>, <code class="literal">mysqli_ping</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::ping</code>
          </p><p>
            <code class="literal">mysqli_ping</code>
          </p><p>
            Pings a server connection, or tries to reconnect if the
            connection has gone down
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::ping</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_ping</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Checks whether the connection to the server is working. If it
        has gone down, and global option
        <code class="literal">mysqli.reconnect</code> is enabled an automatic
        reconnection is attempted.
      </p><p>
        This function can be used by clients that remain idle for a long
        while, to check whether the server has closed the connection and
        reconnect if necessary.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3745866"></a><p class="title"><b>Example 20.110. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* check if server is alive */
if ($mysqli-&gt;ping()) {
    printf ("Our connection is ok!\n");
} else {
    printf ("Error: %s\n", $mysqli-&gt;error);
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3745887"></a><p class="title"><b>Example 20.111. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* check if server is alive */
if (mysqli_ping($link)) {
    printf ("Our connection is ok!\n");
} else {
    printf ("Error: %s\n", mysqli_error($link));
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Our connection is ok!


      </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.prepare"></a>20.11.2.6.32. <code class="literal">mysqli::prepare</code>, <code class="literal">mysqli_prepare</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::prepare</code>
          </p><p>
            <code class="literal">mysqli_prepare</code>
          </p><p>
            Prepare a SQL statement for execution
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method)
      </p><code class="methodsynopsis"><span class="type">mysqli_stmt </span><span class="methodname">prepare</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><br><p>
        Procedure style:
      </p><code class="methodsynopsis"><span class="type">mysqli_stmt </span><span class="methodname">mysqli_prepare</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                           <span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><p>
        Prepares the SQL query pointed to by the null-terminated string
        query, and returns a statement handle to be used for further
        operations on the statement. The query must consist of a single
        SQL statement.
      </p><p>
        The parameter markers must be bound to application variables
        using <code class="function">mysqli_stmt_bind_param</code> and/or
        <code class="function">mysqli_stmt_bind_result</code> before executing
        the statement or fetching rows.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>query</code></em>
            </span></dt><dd><p>
                The query, as a string.
              </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                  You should not add a terminating semicolon or
                  <code class="literal">\g</code> to the statement.
                </p></div><p>
                This parameter can include one or more parameter markers
                in the SQL statement by embedding question mark
                (<code class="literal">?</code>) characters at the appropriate
                positions.
              </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                  The markers are legal only in certain places in SQL
                  statements. For example, they are allowed in the
                  <code class="literal">VALUES()</code> list of an
                  <code class="literal">INSERT</code> statement (to specify column
                  values for a row), or in a comparison with a column in
                  a <code class="literal">WHERE</code> clause to specify a
                  comparison value.
                </p><p>
                  However, they are not allowed for identifiers (such as
                  table or column names), in the select list that names
                  the columns to be returned by a
                  <code class="literal">SELECT</code> statement, or to specify
                  both operands of a binary operator such as the
                  <code class="literal">=</code> equal sign. The latter
                  restriction is necessary because it would be
                  impossible to determine the parameter type. It's
                  not allowed to compare marker with
                  <code class="literal">NULL</code> by <code class="literal">? IS
                  NULL</code> too. In general, parameters are legal
                  only in Data Manipulation Languange (DML) statements,
                  and not in Data Defination Language (DDL) statements.
                </p></div></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        <a href="connectors-apis.html#apis-php-mysqli.prepare" title="20.11.2.6.32. mysqli::prepare, mysqli_prepare"><code class="function">mysqli_prepare</code></a>
        returns a statement object or

        <code class="constant">FALSE</code>

        if an error occured.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3746296"></a><p class="title"><b>Example 20.112. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$city = "Amersfoort";

/* create a prepared statement */
if ($stmt = $mysqli-&gt;prepare("SELECT District FROM City WHERE Name=?")) {

    /* bind parameters for markers */
    $stmt-&gt;bind_param("s", $city);

    /* execute query */
    $stmt-&gt;execute();

    /* bind result variables */
    $stmt-&gt;bind_result($district);

    /* fetch value */
    $stmt-&gt;fetch();

    printf("%s is in district %s\n", $city, $district);

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3746331"></a><p class="title"><b>Example 20.113. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$city = "Amersfoort";

/* create a prepared statement */
if ($stmt = mysqli_prepare($link, "SELECT District FROM City WHERE Name=?")) {

    /* bind parameters for markers */
    mysqli_stmt_bind_param($stmt, "s", $city);

    /* execute query */
    mysqli_stmt_execute($stmt);

    /* bind result variables */
    mysqli_stmt_bind_result($stmt, $district);

    /* fetch value */
    mysqli_stmt_fetch($stmt);

    printf("%s is in district %s\n", $city, $district);

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Amersfoort is in district Utrecht


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_stmt_execute</code>

          </td></tr><tr><td><code class="function">mysqli_stmt_fetch</code>

          </td></tr><tr><td><code class="function">mysqli_stmt_bind_param</code>

          </td></tr><tr><td><code class="function">mysqli_stmt_bind_result</code>

          </td></tr><tr><td><code class="function">mysqli_stmt_close</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.query"></a>20.11.2.6.33. <code class="literal">mysqli::query</code>, <code class="literal">mysqli_query</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::query</code>
          </p><p>
            <code class="literal">mysqli_query</code>
          </p><p>
            Performs a query on the database
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">mixed </span><span class="methodname">mysqli::query</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>,<br>                    <span class="methodparam"><span class="type">int </span><span class="parameter">resultmode</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">mixed </span><span class="methodname">mysqli_query</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                   <span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>,<br>                   <span class="methodparam"><span class="type">int </span><span class="parameter">resultmode</span></span>);</code><p>
        Performs a <em class="parameter"><code>query</code></em> against the database.
      </p><p>
        Functionally, using this function is identical to calling
        <code class="function">mysqli_real_query</code> followed either by
        <code class="function">mysqli_use_result</code> or
        <code class="function">mysqli_store_result</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>query</code></em>
            </span></dt><dd><p>
                The query string.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>resultmode</code></em>
            </span></dt><dd><p>
                Either the constant

                <code class="constant">MYSQLI_USE_RESULT</code>

                or

                <code class="constant">MYSQLI_STORE_RESULT</code>

                depending on the desired behavior. By default,

                <code class="constant">MYSQLI_STORE_RESULT</code>

                is used.
              </p><p>
                If you use

                <code class="constant">MYSQLI_USE_RESULT</code>

                all subsequent calls will return error <code class="literal">Commands
                out of sync</code> unless you call
                <code class="function">mysqli_free_result</code>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure. For <code class="literal">SELECT, SHOW, DESCRIBE</code> or
        <code class="literal">EXPLAIN</code>
        <a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>
        will return a result object.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3746824"></a><p class="title"><b>Example 20.114. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* Create table doesn't return a resultset */
if ($mysqli-&gt;query("CREATE TEMPORARY TABLE myCity LIKE City") === TRUE) {
    printf("Table myCity successfully created.\n");
}

/* Select queries return a resultset */
if ($result = $mysqli-&gt;query("SELECT Name FROM City LIMIT 10")) {
    printf("Select returned %d rows.\n", $result-&gt;num_rows);

    /* free result set */
    $result-&gt;close();
}

/* If we have to retrieve large amount of data we use MYSQLI_USE_RESULT */
if ($result = $mysqli-&gt;query("SELECT * FROM City", MYSQLI_USE_RESULT)) {

    /* Note, that we can't execute any functions which interact with the
       server until result set was closed. All calls will return an
       'out of sync' error */
    if (!$mysqli-&gt;query("SET @a:='this will not work'")) {
        printf("Error: %s\n", $mysqli-&gt;error);
    }
    $result-&gt;close();
}

$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3746858"></a><p class="title"><b>Example 20.115. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* Create table doesn't return a resultset */
if (mysqli_query($link, "CREATE TEMPORARY TABLE myCity LIKE City") === TRUE) {
    printf("Table myCity successfully created.\n");
}

/* Select queries return a resultset */
if ($result = mysqli_query($link, "SELECT Name FROM City LIMIT 10")) {
    printf("Select returned %d rows.\n", mysqli_num_rows($result));

    /* free result set */
    mysqli_free_result($result);
}

/* If we have to retrieve large amount of data we use MYSQLI_USE_RESULT */
if ($result = mysqli_query($link, "SELECT * FROM City", MYSQLI_USE_RESULT)) {

    /* Note, that we can't execute any functions which interact with the
       server until result set was closed. All calls will return an
       'out of sync' error */
    if (!mysqli_query($link, "SET @a:='this will not work'")) {
        printf("Error: %s\n", mysqli_error($link));
    }
    mysqli_free_result($result);
}

mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Table myCity successfully created.
Select returned 10 rows.
Error: Commands out of sync;  You can't run this command now


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_real_query</code>

          </td></tr><tr><td><code class="function">mysqli_multi_query</code>

          </td></tr><tr><td><code class="function">mysqli_free_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.real-connect"></a>20.11.2.6.34. <code class="literal">mysqli::real_connect</code>,
        <code class="literal">mysqli_real_connect</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::real_connect</code>
          </p><p>
            <code class="literal">mysqli_real_connect</code>
          </p><p>
            Opens a connection to a mysql server
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method)
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::real_connect</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">host</span></span>,<br>                          <span class="methodparam"><span class="type">string </span><span class="parameter">username</span></span>,<br>                          <span class="methodparam"><span class="type">string </span><span class="parameter">passwd</span></span>,<br>                          <span class="methodparam"><span class="type">string </span><span class="parameter">dbname</span></span>,<br>                          <span class="methodparam"><span class="type">int </span><span class="parameter">port</span></span>,<br>                          <span class="methodparam"><span class="type">string </span><span class="parameter">socket</span></span>,<br>                          <span class="methodparam"><span class="type">int </span><span class="parameter">flags</span></span>);</code><br><p>
        Procedural style
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_real_connect</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                         <span class="methodparam"><span class="type">string </span><span class="parameter">host</span></span>,<br>                         <span class="methodparam"><span class="type">string </span><span class="parameter">username</span></span>,<br>                         <span class="methodparam"><span class="type">string </span><span class="parameter">passwd</span></span>,<br>                         <span class="methodparam"><span class="type">string </span><span class="parameter">dbname</span></span>,<br>                         <span class="methodparam"><span class="type">int </span><span class="parameter">port</span></span>,<br>                         <span class="methodparam"><span class="type">string </span><span class="parameter">socket</span></span>,<br>                         <span class="methodparam"><span class="type">int </span><span class="parameter">flags</span></span>);</code><p>
        Establish a connection to a MySQL database engine.
      </p><p>
        This function differs from
        <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="function">mysqli_real_connect</code> needs a valid
            object which has to be created by function
            <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>.
          </p></li><li><p>
            With function
            <a href="connectors-apis.html#apis-php-mysqli.options" title="20.11.2.6.30. mysqli::options, mysqli_options"><code class="function">mysqli_options</code></a>
            you can set various options for connection.
          </p></li><li><p>
            There is a <em class="parameter"><code>flags</code></em> parameter.
          </p></li></ul></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>host</code></em>
            </span></dt><dd><p>
                Can be either a host name or an IP address. Passing the

                <code class="constant">NULL</code>

                value or the string "localhost" to this
                parameter, the local host is assumed. When possible,
                pipes will be used instead of the TCP/IP protocol.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>username</code></em>
            </span></dt><dd><p>
                The MySQL user name.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>passwd</code></em>
            </span></dt><dd><p>
                If provided or

                <code class="constant">NULL</code>

                , the MySQL server will attempt to authenticate the user
                against those user records which have no password only.
                This allows one username to be used with different
                permissions (depending on if a password as provided or
                not).
              </p></dd><dt><span class="term">
              <em class="parameter"><code>dbname</code></em>
            </span></dt><dd><p>
                If provided will specify the default database to be used
                when performing queries.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>port</code></em>
            </span></dt><dd><p>
                Specifies the port number to attempt to connect to the
                MySQL server.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>socket</code></em>
            </span></dt><dd><p>
                Specifies the socket or named pipe that should be used.
              </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                  Specifying the <em class="parameter"><code>socket</code></em> parameter
                  will not explicitly determine the type of connection
                  to be used when connecting to the MySQL server. How
                  the connection is made to the MySQL database is
                  determined by the <em class="parameter"><code>host</code></em>
                  parameter.
                </p></div></dd><dt><span class="term">
              <em class="parameter"><code>flags</code></em>
            </span></dt><dd><p>
                With the parameter <em class="parameter"><code>flags</code></em> you can
                set different connection options:
              </p><div class="table"><a name="id3747602"></a><p class="title"><b>Table 20.10. Supported flags</b></p><table summary="Supported flags" border="1"><colgroup><col><col></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="constant">MYSQLI_CLIENT_COMPRESS</code></td><td>Use compression protocol</td></tr><tr><td><code class="constant">MYSQLI_CLIENT_FOUND_ROWS</code></td><td>return number of matched rows, not the number of affected rows</td></tr><tr><td><code class="constant">MYSQLI_CLIENT_IGNORE_SPACE</code></td><td>Allow spaces after function names. Makes all function names reserved
                        words.</td></tr><tr><td><code class="constant">MYSQLI_CLIENT_INTERACTIVE</code></td><td>Allow <code class="literal">interactive_timeout</code> seconds (instead of
                        <code class="literal">wait_timeout</code> seconds) of
                        inactivity before closing the connection</td></tr><tr><td><code class="constant">MYSQLI_CLIENT_SSL</code></td><td>Use SSL (encryption)</td></tr></tbody></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                  For security reasons the

                  <code class="constant">MULTI_STATEMENT</code>

                  flag is not supported in PHP. If you want to execute
                  multiple queries use the
                  <code class="function">mysqli_multi_query</code> function.
                </p></div></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3747768"></a><p class="title"><b>Example 20.116. Object oriented style</b></p><pre class="programlisting">
&lt;?php

/* create a connection object which is not connected */
$mysqli = mysqli_init();

/* set connection options */
$mysqli-&gt;options(MYSQLI_INIT_COMMAND, "SET AUTOCOMMIT=0");
$mysqli-&gt;options(MYSQLI_OPT_CONNECT_TIMEOUT, 5);

/* connect to server */
$mysqli-&gt;real_connect('localhost', 'my_user', 'my_password', 'world');

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

printf ("Connection: %s\n.", $mysqli-&gt;host_info);

$mysqli-&gt;close();
?&gt;

   </pre></div><div class="example"><a name="id3747797"></a><p class="title"><b>Example 20.117. Procedural style</b></p><pre class="programlisting">
&lt;?php

/* create a connection object which is not connected */
$link = mysqli_init();

/* set connection options */
mysqli_options($link, MYSQLI_INIT_COMMAND, "SET AUTOCOMMIT=0");
mysqli_options($link, MYSQLI_OPT_CONNECT_TIMEOUT, 5);

/* connect to server */
mysqli_real_connect($link, 'localhost', 'my_user', 'my_password', 'world');

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

printf ("Connection: %s\n.", mysqli_get_host_info($link));

mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Connection: Localhost via UNIX socket



      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.options" title="20.11.2.6.30. mysqli::options, mysqli_options"><code class="function">mysqli_options</code></a>

          </td></tr><tr><td><code class="function">mysqli_ssl_set</code>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.close" title="20.11.2.6.5. mysqli::close, mysqli_close"><code class="function">mysqli_close</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.real-escape-string"></a>20.11.2.6.35. <code class="literal">mysqli::real_escape_string</code>,
        <code class="literal">mysqli_real_escape_string</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::real_escape_string</code>
          </p><p>
            <code class="literal">mysqli_real_escape_string</code>
          </p><p>
            Escapes special characters in a string for use in a SQL
            statement, taking into account the current charset of the
            connection
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (both methods are equivalent):
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli::escape_string</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">escapestr</span></span>);</code><br><code class="methodsynopsis"><span class="type">string </span><span class="methodname">real_escape_string</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">escapestr</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_real_escape_string</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                                 <span class="methodparam"><span class="type">string </span><span class="parameter">escapestr</span></span>);</code><p>
        This function is used to create a legal SQL string that you can
        use in an SQL statement. The given string is encoded to an
        escaped SQL string, taking into account the current character
        set of the connection.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>escapestr</code></em>
            </span></dt><dd><p>
                The string to be escaped.
              </p><p>
                Characters encoded are <code class="literal">NUL (ASCII 0), \n, \r,
                \, ', ", and Control-Z</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an escaped string.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3748193"></a><p class="title"><b>Example 20.118. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$mysqli-&gt;query("CREATE TEMPORARY TABLE myCity LIKE City");

$city = "'s Hertogenbosch";

/* this query will fail, cause we didn't escape $city */
if (!$mysqli-&gt;query("INSERT into myCity (Name) VALUES ('$city')")) {
    printf("Error: %s\n", $mysqli-&gt;sqlstate);
}

$city = $mysqli-&gt;real_escape_string($city);

/* this query with escaped $city will work */
if ($mysqli-&gt;query("INSERT into myCity (Name) VALUES ('$city')")) {
    printf("%d Row inserted.\n", $mysqli-&gt;affected_rows);
}

$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3748223"></a><p class="title"><b>Example 20.119. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

mysqli_query($link, "CREATE TEMPORARY TABLE myCity LIKE City");

$city = "'s Hertogenbosch";

/* this query will fail, cause we didn't escape $city */
if (!mysqli_query($link, "INSERT into myCity (Name) VALUES ('$city')")) {
    printf("Error: %s\n", mysqli_sqlstate($link));
}

$city = mysqli_real_escape_string($link, $city);

/* this query with escaped $city will work */
if (mysqli_query($link, "INSERT into myCity (Name) VALUES ('$city')")) {
    printf("%d Row inserted.\n", mysqli_affected_rows($link));
}

mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Error: 42000
1 Row inserted.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_character_set_name</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.real-query"></a>20.11.2.6.36. <code class="literal">mysqli::real_query</code>,
        <code class="literal">mysqli_real_query</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::real_query</code>
          </p><p>
            <code class="literal">mysqli_real_query</code>
          </p><p>
            Execute an SQL query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">real_query</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><br><p>
        Procedural style
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_real_query</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                       <span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><p>
        Executes a single query against the database whose result can
        then be retrieved or stored using the
        <code class="function">mysqli_store_result</code> or
        <code class="function">mysqli_use_result</code> functions.
      </p><p>
        In order to determine if a given query should return a result
        set or not, see <code class="function">mysqli_field_count</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>query</code></em>
            </span></dt><dd><p>
                The query, as a string.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>

          </td></tr><tr><td><code class="function">mysqli_store_result</code>

          </td></tr><tr><td><code class="function">mysqli_use_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.rollback"></a>20.11.2.6.37. <code class="literal">mysqli::rollback</code>, <code class="literal">mysqli_rollback</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::rollback</code>
          </p><p>
            <code class="literal">mysqli_rollback</code>
          </p><p>
            Rolls back current transaction
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::rollback</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_rollback</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Rollbacks the current transaction for the database.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3748806"></a><p class="title"><b>Example 20.120. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* disable autocommit */
$mysqli-&gt;autocommit(FALSE);

$mysqli-&gt;query("CREATE TABLE myCity LIKE City");
$mysqli-&gt;query("ALTER TABLE myCity Type=InnoDB");
$mysqli-&gt;query("INSERT INTO myCity SELECT * FROM City LIMIT 50");

/* commit insert */
$mysqli-&gt;commit();

/* delete all rows */
$mysqli-&gt;query("DELETE FROM myCity");

if ($result = $mysqli-&gt;query("SELECT COUNT(*) FROM myCity")) {
    $row = $result-&gt;fetch_row();
    printf("%d rows in table myCity.\n", $row[0]);
    /* Free result */
    $result-&gt;close();
}

/* Rollback */
$mysqli-&gt;rollback();

if ($result = $mysqli-&gt;query("SELECT COUNT(*) FROM myCity")) {
    $row = $result-&gt;fetch_row();
    printf("%d rows in table myCity (after rollback).\n", $row[0]);
    /* Free result */
    $result-&gt;close();
}

/* Drop table myCity */
$mysqli-&gt;query("DROP TABLE myCity");

$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3748854"></a><p class="title"><b>Example 20.121. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* disable autocommit */
mysqli_autocommit($link, FALSE);

mysqli_query($link, "CREATE TABLE myCity LIKE City");
mysqli_query($link, "ALTER TABLE myCity Type=InnoDB");
mysqli_query($link, "INSERT INTO myCity SELECT * FROM City LIMIT 50");

/* commit insert */
mysqli_commit($link);

/* delete all rows */
mysqli_query($link, "DELETE FROM myCity");

if ($result = mysqli_query($link, "SELECT COUNT(*) FROM myCity")) {
    $row = mysqli_fetch_row($result);
    printf("%d rows in table myCity.\n", $row[0]);
    /* Free result */
    mysqli_free_result($result);
}

/* Rollback */
mysqli_rollback($link);

if ($result = mysqli_query($link, "SELECT COUNT(*) FROM myCity")) {
    $row = mysqli_fetch_row($result);
    printf("%d rows in table myCity (after rollback).\n", $row[0]);
    /* Free result */
    mysqli_free_result($result);
}

/* Drop table myCity */
mysqli_query($link, "DROP TABLE myCity");

mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


0 rows in table myCity.
50 rows in table myCity (after rollback).


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.commit" title="20.11.2.6.6. mysqli::commit, mysqli_commit"><code class="function">mysqli_commit</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.autocommit" title="20.11.2.6.2. mysqli::autocommit,
        mysqli_autocommit"><code class="function">mysqli_autocommit</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.select-db"></a>20.11.2.6.38. <code class="literal">mysqli::select_db</code>,
        <code class="literal">mysqli_select_db</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::select_db</code>
          </p><p>
            <code class="literal">mysqli_select_db</code>
          </p><p>
            Selects the default database for database queries
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::select_db</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">dbname</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_select_db</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                      <span class="methodparam"><span class="type">string </span><span class="parameter">dbname</span></span>);</code><p>
        Selects the default database to be used when performing queries
        against the database connection.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This function should only be used to change the default
          database for the connection. You can select the default
          database with 4th parameter in
          <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>dbname</code></em>
            </span></dt><dd><p>
                The database name.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3749225"></a><p class="title"><b>Example 20.122. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "test");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* return name of current default database */
if ($result = $mysqli-&gt;query("SELECT DATABASE()")) {
    $row = $result-&gt;fetch_row();
    printf("Default database is %s.\n", $row[0]);
    $result-&gt;close();
}

/* change db to world db */
$mysqli-&gt;select_db("world");

/* return name of current default database */
if ($result = $mysqli-&gt;query("SELECT DATABASE()")) {
    $row = $result-&gt;fetch_row();
    printf("Default database is %s.\n", $row[0]);
    $result-&gt;close();
}

$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3749258"></a><p class="title"><b>Example 20.123. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "test");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* return name of current default database */
if ($result = mysqli_query($link, "SELECT DATABASE()")) {
    $row = mysqli_fetch_row($result);
    printf("Default database is %s.\n", $row[0]);
    mysqli_free_result($result);
}

/* change db to world db */
mysqli_select_db($link, "world");

/* return name of current default database */
if ($result = mysqli_query($link, "SELECT DATABASE()")) {
    $row = mysqli_fetch_row($result);
    printf("Default database is %s.\n", $row[0]);
    mysqli_free_result($result);
}

mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Default database is test.
Default database is world.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>

          </td></tr><tr><td><code class="function">mysqli_real_connect</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.set-charset"></a>20.11.2.6.39. <code class="literal">mysqli::set_charset</code>,
        <code class="literal">mysqli_set_charset</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::set_charset</code>
          </p><p>
            <code class="literal">mysqli_set_charset</code>
          </p><p>
            Sets the default client character set
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::set_charset</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">charset</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_set_charset</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">charset</span></span>);</code><p>
        Sets the default character set to be used when sending data from
        and to the database server.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>charset</code></em>
            </span></dt><dd><p>
                The charset to be set as default.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          To use this function on a Windows platform you need MySQL
          client library version 4.1.11 or above (for MySQL 5.0 you need
          5.0.6 or above).
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This is the preferred way to change the charset. Using
          <code class="function">mysqli::query</code> to execute <code class="literal">SET
          NAMES ..</code> is not reccomended.
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3749645"></a><p class="title"><b>Example 20.124. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "test");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* change character set to utf8 */
if (!$mysqli-&gt;set_charset("utf8")) {
    printf("Error loading character set utf8: %s\n", $mysqli-&gt;error);
} else {
    printf("Current character set: %s\n", $mysqli-&gt;character_set_name());
}

$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3749666"></a><p class="title"><b>Example 20.125. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect('localhost', 'my_user', 'my_password', 'test');

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* change character set to utf8 */
if (!mysqli_set_charset($link, "utf8")) {
    printf("Error loading character set utf8: %s\n", mysqli_error($link));
} else {
    printf("Current character set: %s\n", mysqli_character_set_name($link));
}

mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Current character set: utf8


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_character_set_name</code>

          </td></tr><tr><td><code class="function">mysqli_real_escape_string</code>

          </td></tr><tr><td><a href="http://dev.mysql.com/doc/refman/5.1/en/charset-charsets.html" target="_top">List of character sets that MySQL supports</a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.set-local-infile-default"></a>20.11.2.6.40. <code class="literal">mysqli::set_local_infile_default</code>,
        <code class="literal">mysqli_set_local_infile_default</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::set_local_infile_default</code>
          </p><p>
            <code class="literal">mysqli_set_local_infile_default</code>
          </p><p>
            Unsets user defined handler for load local infile command
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_set_local_infile_default</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Deactivates a <code class="literal">LOAD DATA INFILE LOCAL</code> handler
        previously set with
        <code class="function">mysqli_set_local_infile_handler</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        No value is returned.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        See <code class="function">mysqli_set_local_infile_handler</code>
        examples
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_set_local_infile_handler</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.set-local-infile-handler"></a>20.11.2.6.41. <code class="literal">mysqli::set_local_infile_handler</code>,
        <code class="literal">mysqli_set_local_infile_handler</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::set_local_infile_handler</code>
          </p><p>
            <code class="literal">mysqli_set_local_infile_handler</code>
          </p><p>
            Set callback function for LOAD DATA LOCAL INFILE command
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_set_local_infile_handler</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                                     <span class="methodparam"><span class="type">callback </span><span class="parameter">read_func</span></span>);</code><p>
        Object oriented style (method)
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">set_local_infile_handler</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                                <span class="methodparam"><span class="type">callback </span><span class="parameter">read_func</span></span>);</code><br>}</pre><p>
        Set callback function for LOAD DATA LOCAL INFILE command
      </p><p>
        The callbacks task is to read input from the file specified in
        the <code class="literal">LOAD DATA LOCAL INFILE</code> and to reformat it
        into the format understood by <code class="literal">LOAD DATA
        INFILE</code>.
      </p><p>
        The returned data needs to match the format speficied in the
        <code class="literal">LOAD DATA</code>
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>read_func</code></em>
            </span></dt><dd><p>
                A callback function or object method taking the
                following parameters:
              </p><div class="variablelist"><dl><dt><span class="term">
                    <em class="parameter"><code>stream</code></em>
                  </span></dt><dd><p>
                      A PHP stream associated with the SQL commands
                      INFILE
                    </p></dd><dt><span class="term">
                    <em class="parameter"><code>&amp;buffer</code></em>
                  </span></dt><dd><p>
                      A string buffer to store the rewritten input into
                    </p></dd><dt><span class="term">
                    <em class="parameter"><code>buflen</code></em>
                  </span></dt><dd><p>
                      The maximum number of characters to be stored in
                      the buffer
                    </p></dd><dt><span class="term">
                    <em class="parameter"><code>&amp;errormsg</code></em>
                  </span></dt><dd><p>
                      If an error occures you can store an error message
                      in here
                    </p></dd></dl></div></dd></dl></div><p>
      </p><p>
        The callback function should return the number of characters
        stored in the <em class="parameter"><code>buffer</code></em> or a negative value
        if an error occured.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3750372"></a><p class="title"><b>Example 20.126. Object oriented style</b></p><pre class="programlisting">
&lt;?php
  $db = mysqli_init();
  $db-&gt;real_connect("localhost","root","","test");

  function callme($stream, &amp;$buffer, $buflen, &amp;$errmsg)
  {
    $buffer = fgets($stream);

    echo $buffer;

    // convert to upper case and replace "," delimiter with [TAB]
    $buffer = strtoupper(str_replace(",", "\t", $buffer));

    return strlen($buffer);
  }


  echo "Input:\n";

  $db-&gt;set_local_infile_handler("callme");
  $db-&gt;query("LOAD DATA LOCAL INFILE 'input.txt' INTO TABLE t1");
  $db-&gt;set_local_infile_default();

  $res = $db-&gt;query("SELECT * FROM t1");

  echo "\nResult:\n";
  while ($row = $res-&gt;fetch_assoc()) {
    echo join(",", $row)."\n";
  }
?&gt;

   </pre></div><div class="example"><a name="id3750403"></a><p class="title"><b>Example 20.127. Procedural style</b></p><pre class="programlisting">
&lt;?php
  $db = mysqli_init();
  mysqli_real_connect($db, "localhost","root","","test");

  function callme($stream, &amp;$buffer, $buflen, &amp;$errmsg)
  {
    $buffer = fgets($stream);

    echo $buffer;

    // convert to upper case and replace "," delimiter with [TAB]
    $buffer = strtoupper(str_replace(",", "\t", $buffer));

    return strlen($buffer);
  }


  echo "Input:\n";

  mysqli_set_local_infile_handler($db, "callme");
  mysqli_query($db, "LOAD DATA LOCAL INFILE 'input.txt' INTO TABLE t1");
  mysqli_set_local_infile_default($db);

  $res = mysqli_query($db, "SELECT * FROM t1");


  echo "\nResult:\n";
  while ($row = mysqli_fetch_assoc($res)) {
    echo join(",", $row)."\n";
  }
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Input:
23,foo
42,bar

Output:
23,FOO
42,BAR


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_set_local_infile_default</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.sqlstate"></a>20.11.2.6.42. <code class="literal">mysqli-&gt;sqlstate</code>,
        <code class="literal">mysqli_sqlstate</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;sqlstate</code>
          </p><p>
            <code class="literal">mysqli_sqlstate</code>
          </p><p>
            Returns the SQLSTATE error from previous MySQL operation
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">sqlstate </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_sqlstate</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Returns a string containing the SQLSTATE error code for the last
        error. The error code consists of five characters.
        <code class="literal">'00000'</code> means no error. The values
        are specified by ANSI SQL and ODBC. For a list of possible
        values, see
        <a href="http://dev.mysql.com/doc/mysql/en/error-handling.html" target="_top">http://dev.mysql.com/doc/mysql/en/error-handling.html</a>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Note that not all MySQL errors are yet mapped to
          SQLSTATE's. The value <code class="literal">HY000</code> (general
          error) is used for unmapped errors.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a string containing the SQLSTATE error code for the last
        error. The error code consists of five characters.
        <code class="literal">'00000'</code> means no error.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3750719"></a><p class="title"><b>Example 20.128. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* Table City already exists, so we should get an error */
if (!$mysqli-&gt;query("CREATE TABLE City (ID INT, Name VARCHAR(30))")) {
    printf("Error - SQLSTATE %s.\n", $mysqli-&gt;sqlstate);
}

$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3750741"></a><p class="title"><b>Example 20.129. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* Table City already exists, so we should get an error */
if (!mysqli_query($link, "CREATE TABLE City (ID INT, Name VARCHAR(30))")) {
    printf("Error - SQLSTATE %s.\n", mysqli_sqlstate($link));
}

mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Error - SQLSTATE 42S01.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.errno" title="20.11.2.6.12. mysqli-&gt;errno, mysqli_errno"><code class="function">mysqli_errno</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.error" title="20.11.2.6.13. mysqli-&gt;error, mysqli_error"><code class="function">mysqli_error</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.ssl-set"></a>20.11.2.6.43. <code class="literal">mysqli::ssl_set</code>, <code class="literal">mysqli_ssl_set</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::ssl_set</code>
          </p><p>
            <code class="literal">mysqli_ssl_set</code>
          </p><p>
            Used for establishing secure connections using SSL
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::ssl_set</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">key</span></span>,<br>                     <span class="methodparam"><span class="type">string </span><span class="parameter">cert</span></span>,<br>                     <span class="methodparam"><span class="type">string </span><span class="parameter">ca</span></span>,<br>                     <span class="methodparam"><span class="type">string </span><span class="parameter">capath</span></span>,<br>                     <span class="methodparam"><span class="type">string </span><span class="parameter">cipher</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_ssl_set</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                    <span class="methodparam"><span class="type">string </span><span class="parameter">key</span></span>,<br>                    <span class="methodparam"><span class="type">string </span><span class="parameter">cert</span></span>,<br>                    <span class="methodparam"><span class="type">string </span><span class="parameter">ca</span></span>,<br>                    <span class="methodparam"><span class="type">string </span><span class="parameter">capath</span></span>,<br>                    <span class="methodparam"><span class="type">string </span><span class="parameter">cipher</span></span>);</code><p>
        Used for establishing secure connections using SSL. It must be
        called before <code class="function">mysqli_real_connect</code>. This
        function does nothing unless OpenSSL support is enabled.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>key</code></em>
            </span></dt><dd><p>
                The path name to the key file.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>cert</code></em>
            </span></dt><dd><p>
                The path name to the certificate file.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>ca</code></em>
            </span></dt><dd><p>
                The path name to the certificate authority file.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>capath</code></em>
            </span></dt><dd><p>
                The pathname to a directory that contains trusted SSL CA
                certificates in PEM format.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>cipher</code></em>
            </span></dt><dd><p>
                A list of allowable ciphers to use for SSL encryption.
              </p></dd></dl></div><p>
      </p><p>
        Any unused SSL parameters may be given as

        <code class="constant">NULL</code>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        This function always returns

        <code class="constant">TRUE</code>

        value. If SSL setup is incorrect
        <code class="function">mysqli_real_connect</code> will return an error
        when you attempt to connect.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.options" title="20.11.2.6.30. mysqli::options, mysqli_options"><code class="function">mysqli_options</code></a>

          </td></tr><tr><td><code class="function">mysqli_real_connect</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.stat"></a>20.11.2.6.44. <code class="literal">mysqli::stat</code>, <code class="literal">mysqli_stat</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::stat</code>
          </p><p>
            <code class="literal">mysqli_stat</code>
          </p><p>
            Gets the current system status
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli::stat</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_stat</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        <a href="connectors-apis.html#apis-php-mysqli.stat" title="20.11.2.6.44. mysqli::stat, mysqli_stat"><code class="function">mysqli_stat</code></a>
        returns a string containing information similar to that provided
        by the 'mysqladmin status' command. This includes
        uptime in seconds and the number of running threads, questions,
        reloads, and open tables.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A string describing the server status.

        <code class="constant">FALSE</code>

        if an error occurred.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3751528"></a><p class="title"><b>Example 20.130. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

printf ("System status: %s\n", $mysqli-&gt;stat());

$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3751549"></a><p class="title"><b>Example 20.131. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

printf("System status: %s\n", mysqli_stat($link));

mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


System status: Uptime: 272  Threads: 1  Questions: 5340  Slow queries: 0
Opens: 13  Flush tables: 1  Open tables: 0  Queries per second avg: 19.632
Memory in use: 8496K  Max memory used: 8560K


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_get_server_info</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.stmt-init"></a>20.11.2.6.45. <code class="literal">mysqli::stmt_init</code>,
        <code class="literal">mysqli_stmt_init</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::stmt_init</code>
          </p><p>
            <code class="literal">mysqli_stmt_init</code>
          </p><p>
            Initializes a statement and returns an object for use with
            mysqli_stmt_prepare
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="methodsynopsis">  <span class="type">mysqli_stmt </span><span class="methodname">stmt_init</span>();</code><br>}</pre><p>
        Procedural style :
      </p><code class="methodsynopsis"><span class="type">mysqli_stmt </span><span class="methodname">mysqli_stmt_init</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Allocates and initializes a statement object suitable for
        <code class="function">mysqli_stmt_prepare</code>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Any subsequent calls to any mysqli_stmt function will fail
          until <code class="function">mysqli_stmt_prepare</code> was called.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an object.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_stmt_prepare</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.store-result"></a>20.11.2.6.46. <code class="literal">mysqli::store_result</code>,
        <code class="literal">mysqli_store_result</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::store_result</code>
          </p><p>
            <code class="literal">mysqli_store_result</code>
          </p><p>
            Transfers a result set from the last query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">mysqli_result </span><span class="methodname">store_result</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">mysqli_result </span><span class="methodname">mysqli_store_result</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Transfers the result set from the last query on the database
        connection represented by the <em class="parameter"><code>link</code></em>
        parameter to be used with the
        <code class="function">mysqli_data_seek</code> function.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a buffered result object or

        <code class="constant">FALSE</code>

        if an error occurred.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <code class="function">mysqli_store_result</code> returns

          <code class="constant">FALSE</code>

          in case the query didn't return a result set (if the
          query was, for example an INSERT statement). This function
          also returns

          <code class="constant">FALSE</code>

          if the reading of the result set failed. You can check if you
          have got an error by checking if
          <a href="connectors-apis.html#apis-php-mysqli.error" title="20.11.2.6.13. mysqli-&gt;error, mysqli_error"><code class="function">mysqli_error</code></a>
          doesn't return an empty string, if
          <a href="connectors-apis.html#apis-php-mysqli.errno" title="20.11.2.6.12. mysqli-&gt;errno, mysqli_errno"><code class="function">mysqli_errno</code></a>
          returns a non zero value, or if
          <code class="function">mysqli_field_count</code> returns a non zero
          value. Also possible reason for this function returning

          <code class="constant">FALSE</code>

          after successfull call to
          <a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>
          can be too large result set (memory for it cannot be
          allocated). If <code class="function">mysqli_field_count</code> returns
          a non-zero value, the statement should have produced a
          non-empty result set.
        </p></div><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Although it is always good practice to free the memory used by
          the result of a query using the
          <code class="function">mysqli_free_result</code> function, when
          transfering large result sets using the
          <code class="function">mysqli_store_result</code> this becomes
          particularly important.
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        See <code class="function">mysqli_multi_query</code>.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_real_query</code>

          </td></tr><tr><td><code class="function">mysqli_use_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.thread-id"></a>20.11.2.6.47. <code class="literal">mysqli::thread_id</code>,
        <code class="literal">mysqli_thread_id</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::thread_id</code>
          </p><p>
            <code class="literal">mysqli_thread_id</code>
          </p><p>
            Returns the thread ID for the current connection
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">thread_id </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_thread_id</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        The <code class="function">mysqli_thread_id</code> function returns the
        thread ID for the current connection which can then be killed
        using the
        <a href="connectors-apis.html#apis-php-mysqli.kill" title="20.11.2.6.26. mysqli::kill, mysqli_kill"><code class="function">mysqli_kill</code></a>
        function. If the connection is lost and you reconnect with
        <a href="connectors-apis.html#apis-php-mysqli.ping" title="20.11.2.6.31. mysqli::ping, mysqli_ping"><code class="function">mysqli_ping</code></a>,
        the thread ID will be other. Therefore you should get the thread
        ID only when you need it.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The thread ID is assigned on a connection-by-connection basis.
          Hence, if the connection is broken and then re-established a
          new thread ID will be assigned.
        </p><p>
          To kill a running query you can use the SQL command
          <code class="literal">KILL QUERY processid</code>.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the Thread ID for the current connection.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3752463"></a><p class="title"><b>Example 20.132. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* determine our thread id */
$thread_id = $mysqli-&gt;thread_id;

/* Kill connection */
$mysqli-&gt;kill($thread_id);

/* This should produce an error */
if (!$mysqli-&gt;query("CREATE TABLE myCity LIKE City")) {
    printf("Error: %s\n", $mysqli-&gt;error);
    exit;
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3752484"></a><p class="title"><b>Example 20.133. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* determine our thread id */
$thread_id = mysqli_thread_id($link);

/* Kill connection */
mysqli_kill($link, $thread_id);

/* This should produce an error */
if (!mysqli_query($link, "CREATE TABLE myCity LIKE City")) {
    printf("Error: %s\n", mysqli_error($link));
    exit;
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Error: MySQL server has gone away


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.kill" title="20.11.2.6.26. mysqli::kill, mysqli_kill"><code class="function">mysqli_kill</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.thread-safe"></a>20.11.2.6.48. <code class="literal">mysqli::thread_safe</code>,
        <code class="literal">mysqli_thread_safe</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::thread_safe</code>
          </p><p>
            <code class="literal">mysqli_thread_safe</code>
          </p><p>
            Returns whether thread safety is given or not
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_thread_safe</span>();</code><p>
        Tells whether the client library is compiled as thread-safe.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        <code class="constant">TRUE</code>

        if the client library is thread-safe, otherwise

        <code class="constant">FALSE</code>

        .
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.use-result"></a>20.11.2.6.49. <code class="literal">mysqli::use_result</code>,
        <code class="literal">mysqli_use_result</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::use_result</code>
          </p><p>
            <code class="literal">mysqli_use_result</code>
          </p><p>
            Initiate a result set retrieval
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">mysqli_result </span><span class="methodname">use_result</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">mysqli_result </span><span class="methodname">mysqli_use_result</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Used to initiate the retrieval of a result set from the last
        query executed using the <code class="function">mysqli_real_query</code>
        function on the database connection.
      </p><p>
        Either this or the <code class="function">mysqli_store_result</code>
        function must be called before the results of a query can be
        retrieved, and one or the other must be called to prevent the
        next query on that database connection from failing.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The <code class="function">mysqli_use_result</code> function does not
          transfer the entire result set from the database and hence
          cannot be used functions such as
          <code class="function">mysqli_data_seek</code> to move to a particular
          row within the set. To use this functionality, the result set
          must be stored using <code class="function">mysqli_store_result</code>.
          One should not use <code class="function">mysqli_use_result</code> if a
          lot of processing on the client side is performed, since this
          will tie up the server and prevent other threads from updating
          any tables from which the data is being fetched.
        </p></div><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an unbuffered result object or

        <code class="constant">FALSE</code>

        if an error occurred.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3752864"></a><p class="title"><b>Example 20.134. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query  = "SELECT CURRENT_USER();";
$query .= "SELECT Name FROM City ORDER BY ID LIMIT 20, 5";

/* execute multi query */
if ($mysqli-&gt;multi_query($query)) {
    do {
        /* store first result set */
        if ($result = $mysqli-&gt;use_result()) {
            while ($row = $result-&gt;fetch_row()) {
                printf("%s\n", $row[0]);
            }
            $result-&gt;close();
        }
        /* print divider */
        if ($mysqli-&gt;more_results()) {
            printf("-----------------\n");
        }
    } while ($mysqli-&gt;next_result());
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3752903"></a><p class="title"><b>Example 20.135. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query  = "SELECT CURRENT_USER();";
$query .= "SELECT Name FROM City ORDER BY ID LIMIT 20, 5";

/* execute multi query */
if (mysqli_multi_query($link, $query)) {
    do {
        /* store first result set */
        if ($result = mysqli_use_result($link)) {
            while ($row = mysqli_fetch_row($result)) {
                printf("%s\n", $row[0]);
            }
            mysqli_free_result($result);
        }
        /* print divider */
        if (mysqli_more_results($link)) {
            printf("-----------------\n");
        }
    } while (mysqli_next_result($link));
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


my_user@localhost
-----------------
Amersfoort
Maastricht
Dordrecht
Leiden
Haarlemmermeer


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_real_query</code>

          </td></tr><tr><td><code class="function">mysqli_store_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.warning-count"></a>20.11.2.6.50. <code class="literal">mysqli::warning_count</code>,
        <code class="literal">mysqli_warning_count</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::warning_count</code>
          </p><p>
            <code class="literal">mysqli_warning_count</code>
          </p><p>
            Returns the number of warnings from the last query for the
            given link
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">warning_count </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_warning_count</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Returns the number of warnings from the last query in the
        connection.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For retrieving warning messages you can use the SQL command
          <code class="literal">SHOW WARNINGS [limit row_count]</code>.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="connectors-apis.html#apis-php-mysqli.connect" title="20.11.2.6.9. mysqli::__construct,
        mysqli_connect"><code class="function">mysqli_connect</code></a>
                or
                <a href="connectors-apis.html#apis-php-mysqli.init" title="20.11.2.6.24. mysqli::init, mysqli_init"><code class="function">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Number of warnings or zero if there are no warnings.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3753205"></a><p class="title"><b>Example 20.136. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$mysqli-&gt;query("CREATE TABLE myCity LIKE City");

/* a remarkable city in Wales */
$query = "INSERT INTO myCity (CountryCode, Name) VALUES('GBR',
        'Llanfairpwllgwyngyllgogerychwyrndrobwllllantysiliogogogoch')";

$mysqli-&gt;query($query);

if ($mysqli-&gt;warning_count) {
    if ($result = $mysqli-&gt;query("SHOW WARNINGS")) {
        $row = $result-&gt;fetch_row();
        printf("%s (%d): %s\n", $row[0], $row[1], $row[2]);
        $result-&gt;close();
    }
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3753233"></a><p class="title"><b>Example 20.137. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

mysqli_query($link, "CREATE TABLE myCity LIKE City");

/* a remarkable long city name in Wales */
$query = "INSERT INTO myCity (CountryCode, Name) VALUES('GBR',
        'Llanfairpwllgwyngyllgogerychwyrndrobwllllantysiliogogogoch')";

mysqli_query($link, $query);

if (mysqli_warning_count($link)) {
    if ($result = mysqli_query($link, "SHOW WARNINGS")) {
        $row = mysqli_fetch_row($result);
        printf("%s (%d): %s\n", $row[0], $row[1], $row[2]);
        mysqli_free_result($result);
    }
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Warning (1264): Data truncated for column 'Name' at row 1


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.errno" title="20.11.2.6.12. mysqli-&gt;errno, mysqli_errno"><code class="function">mysqli_errno</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.error" title="20.11.2.6.13. mysqli-&gt;error, mysqli_error"><code class="function">mysqli_error</code></a>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.sqlstate" title="20.11.2.6.42. mysqli-&gt;sqlstate,
        mysqli_sqlstate"><code class="function">mysqli_sqlstate</code></a>

          </td></tr></table><p>
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-class.mysqli-stmt"></a>20.11.2.7. The MySQLi_STMT class (<code class="literal">MySQLi_STMT</code>)</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.affected-rows">20.11.2.7.1. <code class="literal">mysqli_stmt-&gt;affected_rows</code>,
        <code class="literal">mysqli_stmt_affected_rows</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.attr-get">20.11.2.7.2. <code class="literal">mysqli_stmt::attr_get</code>,
        <code class="literal">mysqli_stmt_attr_get</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.attr-set">20.11.2.7.3. <code class="literal">mysqli_stmt::attr_set</code>,
        <code class="literal">mysqli_stmt_attr_set</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.bind-param">20.11.2.7.4. <code class="literal">mysqli_stmt::bind_param</code>,
        <code class="literal">mysqli_stmt_bind_param</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.bind-result">20.11.2.7.5. <code class="literal">mysqli_stmt::bind_result</code>,
        <code class="literal">mysqli_stmt_bind_result</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.close">20.11.2.7.6. <code class="literal">mysqli_stmt::close</code>,
        <code class="literal">mysqli_stmt_close</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.data-seek">20.11.2.7.7. <code class="literal">mysqli_stmt::data_seek</code>,
        <code class="literal">mysqli_stmt_data_seek</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.errno">20.11.2.7.8. <code class="literal">mysqli_stmt-&gt;errno</code>,
        <code class="literal">mysqli_stmt_errno</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.error">20.11.2.7.9. <code class="literal">mysqli_stmt-&gt;error</code>,
        <code class="literal">mysqli_stmt_error</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.execute">20.11.2.7.10. <code class="literal">mysqli_stmt-&gt;execute</code>,
        <code class="literal">mysqli_stmt_execute</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.fetch">20.11.2.7.11. <code class="literal">mysqli_stmt::fetch</code>,
        <code class="literal">mysqli_stmt_fetch</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.field-count">20.11.2.7.12. <code class="literal">mysqli_stmt-&gt;field_count</code>,
        <code class="literal">mysqli_stmt_field_count</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.free-result">20.11.2.7.13. <code class="literal">stmt::free_result</code>,
        <code class="literal">mysqli_stmt_free_result</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.get-warnings">20.11.2.7.14. <code class="literal">mysqli_stmt::get_warnings</code>,
        <code class="literal">mysqli_stmt_get_warnings</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.insert-id">20.11.2.7.15. <code class="literal">mysqli_stmt-&gt;insert_id</code>,
        <code class="literal">mysqli_stmt_insert_id</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.num-rows">20.11.2.7.16. <code class="literal">mysqli_stmt::num_rows</code>,
        <code class="literal">mysqli_stmt_num_rows</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.param-count">20.11.2.7.17. <code class="literal">mysqli_stmt-&gt;param_count</code>,
        <code class="literal">mysqli_stmt_param_count</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.prepare">20.11.2.7.18. <code class="literal">mysqli_stmt::prepare</code>,
        <code class="literal">mysqli_stmt_prepare</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.reset">20.11.2.7.19. <code class="literal">mysqli_stmt::reset</code>,
        <code class="literal">mysqli_stmt_reset</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.result-metadata">20.11.2.7.20. <code class="literal">mysqli_stmt::result_metadata</code>,
        <code class="literal">mysqli_stmt_result_metadata</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.send-long-data">20.11.2.7.21. <code class="literal">mysqli_stmt::send_long_data</code>,
        <code class="literal">mysqli_stmt_send_long_data</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.sqlstate">20.11.2.7.22. <code class="literal">mysqli_stmt::sqlstate</code>,
        <code class="literal">mysqli_stmt_sqlstate</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-stmt.store-result">20.11.2.7.23. <code class="literal">mysqli_stmt::store_result</code>,
        <code class="literal">mysqli_stmt_store_result</code></a></span></dt></dl></div><p>
      <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
      Documentation Group.</a>
    </p><p>
      Represents a prepared statement.
    </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">MySQLi_STMT</span></span> {<br> <span class="ooclass"><span class="classname">MySQLi_STMT</span></span>

      Properties<code class="fieldsynopsis">  <span class="type">int </span><span class="varname">affected_rows </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">errno </span>;</code><br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">error </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">field_count </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">insert_id </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">num_rows </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">param_count </span>;</code><br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">sqlstate </span>;</code><br>Methods<code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_stmt_affected_rows</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_stmt::attr_get</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">attr</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_stmt::attr_set</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">attr</span></span>,<br>                             <span class="methodparam"><span class="type">int </span><span class="parameter">mode</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_stmt::bind_param</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">types</span></span>,<br>                               <span class="methodparam"><span class="type">mixed </span><span class="parameter">var1</span></span>,<br>                               <span class="methodparam"><span class="type">mixed </span><span class="parameter">...</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_stmt::bind_result</span>(<span class="methodparam"><span class="type">mixed </span><span class="parameter">var1</span></span>,<br>                                <span class="methodparam"><span class="type">mixed </span><span class="parameter">...</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_stmt::close</span>();</code><br><code class="methodsynopsis">  <span class="type">void </span><span class="methodname">mysqli_stmt::data_seek</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">offset</span></span>);</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_stmt_errno</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli_stmt_error</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_stmt::execute</span>();</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_stmt::fetch</span>();</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_stmt_field_count</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><br><code class="methodsynopsis">  <span class="type">void </span><span class="methodname">mysqli_stmt::free_result</span>();</code><br><code class="methodsynopsis">  <span class="type">object </span><span class="methodname">mysqli_stmt::get_warnings</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><br><code class="methodsynopsis">  <span class="type">mixed </span><span class="methodname">mysqli_stmt_insert_id</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_stmt_num_rows</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_stmt_param_count</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><br><code class="methodsynopsis">  <span class="type">mixed </span><span class="methodname">mysqli_stmt::prepare</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_stmt::reset</span>();</code><br><code class="methodsynopsis">  <span class="type">mysqli_result </span><span class="methodname">mysqli_stmt::result_metadata</span>();</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_stmt::send_long_data</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">param_nr</span></span>,<br>                                   <span class="methodparam"><span class="type">string </span><span class="parameter">data</span></span>);</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli_stmt_sqlstate</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_stmt::store_result</span>();</code><br>}</pre><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.affected-rows"></a>20.11.2.7.1. <code class="literal">mysqli_stmt-&gt;affected_rows</code>,
        <code class="literal">mysqli_stmt_affected_rows</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt-&gt;affected_rows</code>
          </p><p>
            <code class="literal">mysqli_stmt_affected_rows</code>
          </p><p>
            Returns the total number of rows changed, deleted, or
            inserted by the last executed statement
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_stmt</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">affected_rows </span>;</code><br>}</pre><p>
        Procedural style :
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_stmt_affected_rows</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Returns the number of rows affected by
        <code class="literal">INSERT</code>, <code class="literal">UPDATE</code>, or
        <code class="literal">DELETE</code> query.
      </p><p>
        This function only works with queries which update a table. In
        order to get the number of rows from a SELECT query, use
        <code class="function">mysqli_stmt_num_rows</code> instead.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="function">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An integer greater than zero indicates the number of rows
        affected or retrieved. Zero indicates that no records where
        updated for an UPDATE/DELETE statement, no rows matched the
        WHERE clause in the query or that no query has yet been
        executed. -1 indicates that the query has returned an error.
        NULL indicates an invalid argument was supplied to the function.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If the number of affected rows is greater than maximal PHP int
          value, the number of affected rows will be returned as a
          string value.
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3754259"></a><p class="title"><b>Example 20.138. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* create temp table */
$mysqli-&gt;query("CREATE TEMPORARY TABLE myCountry LIKE Country");

$query = "INSERT INTO myCountry SELECT * FROM Country WHERE Code LIKE ?";

/* prepare statement */
if ($stmt = $mysqli-&gt;prepare($query)) {

    /* Bind variable for placeholder */
    $code = 'A%';
    $stmt-&gt;bind_param("s", $code);

    /* execute statement */
    $stmt-&gt;execute();

    printf("rows inserted: %d\n", $stmt-&gt;affected_rows);

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3754291"></a><p class="title"><b>Example 20.139. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* create temp table */
mysqli_query($link, "CREATE TEMPORARY TABLE myCountry LIKE Country");

$query = "INSERT INTO myCountry SELECT * FROM Country WHERE Code LIKE ?";

/* prepare statement */
if ($stmt = mysqli_prepare($link, $query)) {

    /* Bind variable for placeholder */
    $code = 'A%';
    mysqli_stmt_bind_param($stmt, "s", $code);

    /* execute statement */
    mysqli_stmt_execute($stmt);

    printf("rows inserted: %d\n", mysqli_stmt_affected_rows($stmt));

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


rows inserted: 17


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_stmt_num_rows</code>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.prepare" title="20.11.2.6.32. mysqli::prepare, mysqli_prepare"><code class="function">mysqli_prepare</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.attr-get"></a>20.11.2.7.2. <code class="literal">mysqli_stmt::attr_get</code>,
        <code class="literal">mysqli_stmt_attr_get</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::attr_get</code>
          </p><p>
            <code class="literal">mysqli_stmt_attr_get</code>
          </p><p>
            Used to get the current value of a statement attribute
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_stmt::attr_get</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">attr</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_stmt_attr_get</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>,<br>                         <span class="methodparam"><span class="type">int </span><span class="parameter">attr</span></span>);</code><p>
        Gets the current value of a statement attribute.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="function">mysqli_stmt_init</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>attr</code></em>
            </span></dt><dd><p>
                The attribute that you want to get.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">FALSE</code>

        if the attribute is not found, otherwise returns the value of
        the attribute.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.attr-set"></a>20.11.2.7.3. <code class="literal">mysqli_stmt::attr_set</code>,
        <code class="literal">mysqli_stmt_attr_set</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::attr_set</code>
          </p><p>
            <code class="literal">mysqli_stmt_attr_set</code>
          </p><p>
            Used to modify the behavior of a prepared statement
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt::attr_set</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">attr</span></span>,<br>                           <span class="methodparam"><span class="type">int </span><span class="parameter">mode</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt_attr_set</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>,<br>                          <span class="methodparam"><span class="type">int </span><span class="parameter">attr</span></span>,<br>                          <span class="methodparam"><span class="type">int </span><span class="parameter">mode</span></span>);</code><p>
        Used to modify the behavior of a prepared statement. This
        function may be called multiple times to set several attributes.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="function">mysqli_stmt_init</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>attr</code></em>
            </span></dt><dd><p>
                The attribute that you want to set. It can have one of
                the following values:

                </p><div class="table"><a name="id3754835"></a><p class="title"><b>Table 20.11. Attribute values</b></p><table summary="Attribute values" border="1"><colgroup><col><col></colgroup><thead><tr><th>Character</th><th>Description</th></tr></thead><tbody><tr><td>MYSQLI_STMT_ATTR_UPDATE_MAX_LENGTH</td><td>If set to 1, causes <code class="function">mysqli_stmt_store_result</code> to
                          update the metadata
                          <code class="literal">MYSQL_FIELD-&gt;max_length</code>
                          value.</td></tr><tr><td>MYSQLI_STMT_ATTR_CURSOR_TYPE</td><td>Type of cursor to open for statement when
                          <code class="function">mysqli_stmt_execute</code> is
                          invoked. <em class="parameter"><code>mode</code></em> can be
                          <code class="literal">MYSQLI_CURSOR_TYPE_NO_CURSOR</code>
                          (the default) or
                          <code class="literal">MYSQLI_CURSOR_TYPE_READ_ONLY</code>.</td></tr><tr><td>MYSQLI_STMT_ATTR_PREFETCH_ROWS</td><td>Number of rows to fetch from server at a time when using a cursor.
                          <em class="parameter"><code>mode</code></em> can be in the
                          range from 1 to the maximum value of unsigned
                          long. The default is 1.</td></tr></tbody></table></div><p>
              </p><p>
                If you use the
                <code class="literal">MYSQLI_STMT_ATTR_CURSOR_TYPE</code> option
                with <code class="literal">MYSQLI_CURSOR_TYPE_READ_ONLY</code>, a
                cursor is opened for the statement when you invoke
                <code class="function">mysqli_stmt_execute</code>. If there is
                already an open cursor from a previous
                <code class="function">mysqli_stmt_execute</code> call, it closes
                the cursor before opening a new one.
                <code class="function">mysqli_stmt_reset</code> also closes any
                open cursor before preparing the statement for
                re-execution.
                <code class="function">mysqli_stmt_free_result</code> closes any
                open cursor.
              </p><p>
                If you open a cursor for a prepared statement,
                <code class="function">mysqli_stmt_store_result</code> is
                unnecessary.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>mode</code></em>
            </span></dt><dd><p>
                The value to assign to the attribute.
              </p></dd></dl></div><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.bind-param"></a>20.11.2.7.4. <code class="literal">mysqli_stmt::bind_param</code>,
        <code class="literal">mysqli_stmt_bind_param</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::bind_param</code>
          </p><p>
            <code class="literal">mysqli_stmt_bind_param</code>
          </p><p>
            Binds variables to a prepared statement as parameters
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt::bind_param</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">types</span></span>,<br>                             <span class="methodparam"><span class="type">mixed </span><span class="parameter">var1</span></span>,<br>                             <span class="methodparam"><span class="type">mixed </span><span class="parameter">...</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt_bind_param</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>,<br>                            <span class="methodparam"><span class="type">string </span><span class="parameter">types</span></span>,<br>                            <span class="methodparam"><span class="type">mixed </span><span class="parameter">var1</span></span>,<br>                            <span class="methodparam"><span class="type">mixed </span><span class="parameter">...</span></span>);</code><p>
        Bind variables for the parameter markers in the SQL statement
        that was passed to
        <a href="connectors-apis.html#apis-php-mysqli.prepare" title="20.11.2.6.32. mysqli::prepare, mysqli_prepare"><code class="function">mysqli_prepare</code></a>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If data size of a variable exceeds max. allowed packet size
          (max_allowed_packet), you have to specify <code class="literal">b</code>
          in <em class="parameter"><code>types</code></em> and use
          <code class="function">mysqli_stmt_send_long_data</code> to send the
          data in packets.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="function">mysqli_stmt_init</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>types</code></em>
            </span></dt><dd><p>
                A string that contains one or more characters which
                specify the types for the corresponding bind variables:

                </p><div class="table"><a name="id3755344"></a><p class="title"><b>Table 20.12. Type specification chars</b></p><table summary="Type specification chars" border="1"><colgroup><col><col></colgroup><thead><tr><th>Character</th><th>Description</th></tr></thead><tbody><tr><td>i</td><td>corresponding variable has type integer</td></tr><tr><td>d</td><td>corresponding variable has type double</td></tr><tr><td>s</td><td>corresponding variable has type string</td></tr><tr><td>b</td><td>corresponding variable is a blob and will be sent in packets</td></tr></tbody></table></div><p>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>var1</code></em>
            </span></dt><dd><p>
                The number of variables and length of string
                <em class="parameter"><code>types</code></em> must match the parameters
                in the statement.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3755485"></a><p class="title"><b>Example 20.140. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli('localhost', 'my_user', 'my_password', 'world');

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$stmt = $mysqli-&gt;prepare("INSERT INTO CountryLanguage VALUES (?, ?, ?, ?)");
$stmt-&gt;bind_param('sssd', $code, $language, $official, $percent);

$code = 'DEU';
$language = 'Bavarian';
$official = "F";
$percent = 11.2;

/* execute prepared statement */
$stmt-&gt;execute();

printf("%d Row inserted.\n", $stmt-&gt;affected_rows);

/* close statement and connection */
$stmt-&gt;close();

/* Clean up table CountryLanguage */
$mysqli-&gt;query("DELETE FROM CountryLanguage WHERE Language='Bavarian'");
printf("%d Row deleted.\n", $mysqli-&gt;affected_rows);

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3755519"></a><p class="title"><b>Example 20.141. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect('localhost', 'my_user', 'my_password', 'world');

/* check connection */
if (!$link) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$stmt = mysqli_prepare($link, "INSERT INTO CountryLanguage VALUES (?, ?, ?, ?)");
mysqli_stmt_bind_param($stmt, 'sssd', $code, $language, $official, $percent);

$code = 'DEU';
$language = 'Bavarian';
$official = "F";
$percent = 11.2;

/* execute prepared statement */
mysqli_stmt_execute($stmt);

printf("%d Row inserted.\n", mysqli_stmt_affected_rows($stmt));

/* close statement and connection */
mysqli_stmt_close($stmt);

/* Clean up table CountryLanguage */
mysqli_query($link, "DELETE FROM CountryLanguage WHERE Language='Bavarian'");
printf("%d Row deleted.\n", mysqli_affected_rows($link));

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


1 Row inserted.
1 Row deleted.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_stmt_bind_result</code>

          </td></tr><tr><td><code class="function">mysqli_stmt_execute</code>

          </td></tr><tr><td><code class="function">mysqli_stmt_fetch</code>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.prepare" title="20.11.2.6.32. mysqli::prepare, mysqli_prepare"><code class="function">mysqli_prepare</code></a>

          </td></tr><tr><td><code class="function">mysqli_stmt_send_long_data</code>

          </td></tr><tr><td><code class="function">mysqli_stmt_errno</code>

          </td></tr><tr><td><code class="function">mysqli_stmt_error</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.bind-result"></a>20.11.2.7.5. <code class="literal">mysqli_stmt::bind_result</code>,
        <code class="literal">mysqli_stmt_bind_result</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::bind_result</code>
          </p><p>
            <code class="literal">mysqli_stmt_bind_result</code>
          </p><p>
            Binds variables to a prepared statement for result storage
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt::bind_result</span>(<span class="methodparam"><span class="type">mixed </span><span class="parameter">var1</span></span>,<br>                              <span class="methodparam"><span class="type">mixed </span><span class="parameter">...</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt_bind_result</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>,<br>                             <span class="methodparam"><span class="type">mixed </span><span class="parameter">var1</span></span>,<br>                             <span class="methodparam"><span class="type">mixed </span><span class="parameter">...</span></span>);</code><p>
        Binds columns in the result set to variables.
      </p><p>
        When <code class="function">mysqli_stmt_fetch</code> is called to fetch
        data, the MySQL client/server protocol places the data for the
        bound columns into the specified variables <em class="parameter"><code>var1,
        ...</code></em>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Note that all columns must be bound after
          <code class="function">mysqli_stmt_execute</code> and prior to calling
          <code class="function">mysqli_stmt_fetch</code>. Depending on column
          types bound variables can silently change to the corresponding
          PHP type.
        </p><p>
          A column can be bound or rebound at any time, even after a
          result set has been partially retrieved. The new binding takes
          effect the next time <code class="function">mysqli_stmt_fetch</code> is
          called.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="function">mysqli_stmt_init</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>var1</code></em>
            </span></dt><dd><p>
                The variable to be bound.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3755968"></a><p class="title"><b>Example 20.142. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* prepare statement */
if ($stmt = $mysqli-&gt;prepare("SELECT Code, Name FROM Country ORDER BY Name LIMIT 5")) {
    $stmt-&gt;execute();

    /* bind variables to prepared statement */
    $stmt-&gt;bind_result($col1, $col2);

    /* fetch values */
    while ($stmt-&gt;fetch()) {
        printf("%s %s\n", $col1, $col2);
    }

    /* close statement */
    $stmt-&gt;close();
}
/* close connection */
$mysqli-&gt;close();

?&gt;

  </pre></div><div class="example"><a name="id3755999"></a><p class="title"><b>Example 20.143. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (!$link) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* prepare statement */
if ($stmt = mysqli_prepare($link, "SELECT Code, Name FROM Country ORDER BY Name LIMIT 5")) {
    mysqli_stmt_execute($stmt);

    /* bind variables to prepared statement */
    mysqli_stmt_bind_result($stmt, $col1, $col2);

    /* fetch values */
    while (mysqli_stmt_fetch($stmt)) {
        printf("%s %s\n", $col1, $col2);
    }

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


AFG Afghanistan
ALB Albania
DZA Algeria
ASM American Samoa
AND Andorra


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_stmt_bind_param</code>

          </td></tr><tr><td><code class="function">mysqli_stmt_execute</code>

          </td></tr><tr><td><code class="function">mysqli_stmt_fetch</code>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.prepare" title="20.11.2.6.32. mysqli::prepare, mysqli_prepare"><code class="function">mysqli_prepare</code></a>

          </td></tr><tr><td><code class="function">mysqli_stmt_prepare</code>

          </td></tr><tr><td><code class="function">mysqli_stmt_init</code>

          </td></tr><tr><td><code class="function">mysqli_stmt_errno</code>

          </td></tr><tr><td><code class="function">mysqli_stmt_error</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.close"></a>20.11.2.7.6. <code class="literal">mysqli_stmt::close</code>,
        <code class="literal">mysqli_stmt_close</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::close</code>
          </p><p>
            <code class="literal">mysqli_stmt_close</code>
          </p><p>
            Closes a prepared statement
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt::close</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt_close</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Closes a prepared statement.
        <code class="function">mysqli_stmt_close</code> also deallocates the
        statement handle. If the current statement has pending or unread
        results, this function cancels them so that the next query can
        be executed.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="function">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.prepare" title="20.11.2.6.32. mysqli::prepare, mysqli_prepare"><code class="function">mysqli_prepare</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.data-seek"></a>20.11.2.7.7. <code class="literal">mysqli_stmt::data_seek</code>,
        <code class="literal">mysqli_stmt_data_seek</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::data_seek</code>
          </p><p>
            <code class="literal">mysqli_stmt_data_seek</code>
          </p><p>
            Seeks to an arbitrary row in statement result set
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_stmt::data_seek</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">offset</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_stmt_data_seek</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>,<br>                           <span class="methodparam"><span class="type">int </span><span class="parameter">offset</span></span>);</code><p>
        Seeks to an arbitrary result pointer in the statement result
        set.
      </p><p>
        <code class="function">mysqli_stmt_store_result</code> must be called
        prior to <code class="function">mysqli_stmt_data_seek</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="function">mysqli_stmt_init</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>offset</code></em>
            </span></dt><dd><p>
                Must be between zero and the total number of rows minus
                one (0.. <code class="function">mysqli_stmt_num_rows</code> - 1).
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        No value is returned.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3756597"></a><p class="title"><b>Example 20.144. Object oriented style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER BY Name";
if ($stmt = $mysqli-&gt;prepare($query)) {

    /* execute query */
    $stmt-&gt;execute();

    /* bind result variables */
    $stmt-&gt;bind_result($name, $code);

    /* store result */
    $stmt-&gt;store_result();

    /* seek to row no. 400 */
    $stmt-&gt;data_seek(399);

    /* fetch values */
    $stmt-&gt;fetch();

    printf ("City: %s  Countrycode: %s\n", $name, $code);

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3756634"></a><p class="title"><b>Example 20.145. Procedural style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER BY Name";
if ($stmt = mysqli_prepare($link, $query)) {

    /* execute query */
    mysqli_stmt_execute($stmt);

    /* bind result variables */
    mysqli_stmt_bind_result($stmt, $name, $code);

    /* store result */
    mysqli_stmt_store_result($stmt);

    /* seek to row no. 400 */
    mysqli_stmt_data_seek($stmt, 399);

    /* fetch values */
    mysqli_stmt_fetch($stmt);

    printf ("City: %s  Countrycode: %s\n", $name, $code);

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


City: Benin City  Countrycode: NGA


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.prepare" title="20.11.2.6.32. mysqli::prepare, mysqli_prepare"><code class="function">mysqli_prepare</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.errno"></a>20.11.2.7.8. <code class="literal">mysqli_stmt-&gt;errno</code>,
        <code class="literal">mysqli_stmt_errno</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt-&gt;errno</code>
          </p><p>
            <code class="literal">mysqli_stmt_errno</code>
          </p><p>
            Returns the error code for the most recent statement call
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_stmt</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">errno </span>;</code><br>}</pre><p>
        Procedural style :
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_stmt_errno</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Returns the error code for the most recently invoked statement
        function that can succeed or fail.
      </p><p>
        Client error message numbers are listed in the MySQL
        <code class="filename">errmsg.h</code> header file, server error message
        numbers are listed in <code class="filename">mysqld_error.h</code>. In
        the MySQL source distribution you can find a complete list of
        error messages and error numbers in the file
        <code class="filename">Docs/mysqld_error.txt</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="function">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An error code value. Zero means no error occurred.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3756928"></a><p class="title"><b>Example 20.146. Object oriented style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$mysqli-&gt;query("CREATE TABLE myCountry LIKE Country");
$mysqli-&gt;query("INSERT INTO myCountry SELECT * FROM Country");


$query = "SELECT Name, Code FROM myCountry ORDER BY Name";
if ($stmt = $mysqli-&gt;prepare($query)) {

    /* drop table */
    $mysqli-&gt;query("DROP TABLE myCountry");

    /* execute query */
    $stmt-&gt;execute();

    printf("Error: %d.\n", $stmt-&gt;errno);

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3756957"></a><p class="title"><b>Example 20.147. Procedural style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

mysqli_query($link, "CREATE TABLE myCountry LIKE Country");
mysqli_query($link, "INSERT INTO myCountry SELECT * FROM Country");


$query = "SELECT Name, Code FROM myCountry ORDER BY Name";
if ($stmt = mysqli_prepare($link, $query)) {

    /* drop table */
    mysqli_query($link, "DROP TABLE myCountry");

    /* execute query */
    mysqli_stmt_execute($stmt);

    printf("Error: %d.\n", mysqli_stmt_errno($stmt));

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Error: 1146.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_stmt_error</code>

          </td></tr><tr><td><code class="function">mysqli_stmt_sqlstate</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.error"></a>20.11.2.7.9. <code class="literal">mysqli_stmt-&gt;error</code>,
        <code class="literal">mysqli_stmt_error</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt-&gt;error</code>
          </p><p>
            <code class="literal">mysqli_stmt_error</code>
          </p><p>
            Returns a string description for last statement error
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_stmt</span></span> {<br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">error </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_stmt_error</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Returns a containing the error message for the most recently
        invoked statement function that can succeed or fail.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="function">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A string that describes the error. An empty string if no error
        occurred.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3757216"></a><p class="title"><b>Example 20.148. Object oriented style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$mysqli-&gt;query("CREATE TABLE myCountry LIKE Country");
$mysqli-&gt;query("INSERT INTO myCountry SELECT * FROM Country");


$query = "SELECT Name, Code FROM myCountry ORDER BY Name";
if ($stmt = $mysqli-&gt;prepare($query)) {

    /* drop table */
    $mysqli-&gt;query("DROP TABLE myCountry");

    /* execute query */
    $stmt-&gt;execute();

    printf("Error: %s.\n", $stmt-&gt;error);

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3757245"></a><p class="title"><b>Example 20.149. Procedural style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

mysqli_query($link, "CREATE TABLE myCountry LIKE Country");
mysqli_query($link, "INSERT INTO myCountry SELECT * FROM Country");


$query = "SELECT Name, Code FROM myCountry ORDER BY Name";
if ($stmt = mysqli_prepare($link, $query)) {

    /* drop table */
    mysqli_query($link, "DROP TABLE myCountry");

    /* execute query */
    mysqli_stmt_execute($stmt);

    printf("Error: %s.\n", mysqli_stmt_error($stmt));

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Error: Table 'world.myCountry' doesn't exist.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_stmt_errno</code>

          </td></tr><tr><td><code class="function">mysqli_stmt_sqlstate</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.execute"></a>20.11.2.7.10. <code class="literal">mysqli_stmt-&gt;execute</code>,
        <code class="literal">mysqli_stmt_execute</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt-&gt;execute</code>
          </p><p>
            <code class="literal">mysqli_stmt_execute</code>
          </p><p>
            Executes a prepared Query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt::execute</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt_execute</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Executes a query that has been previously prepared using the
        <a href="connectors-apis.html#apis-php-mysqli.prepare" title="20.11.2.6.32. mysqli::prepare, mysqli_prepare"><code class="function">mysqli_prepare</code></a>
        function. When executed any parameter markers which exist will
        automatically be replaced with the appropiate data.
      </p><p>
        If the statement is <code class="literal">UPDATE</code>,
        <code class="literal">DELETE</code>, or <code class="literal">INSERT</code>, the
        total number of affected rows can be determined by using the
        <code class="function">mysqli_stmt_affected_rows</code> function.
        Likewise, if the query yields a result set the
        <code class="function">mysqli_stmt_fetch</code> function is used.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          When using <code class="function">mysqli_stmt_execute</code>, the
          <code class="function">mysqli_stmt_fetch</code> function must be used
          to fetch the data prior to performing any additional queries.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="function">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3757584"></a><p class="title"><b>Example 20.150. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$mysqli-&gt;query("CREATE TABLE myCity LIKE City");

/* Prepare an insert statement */
$query = "INSERT INTO myCity (Name, CountryCode, District) VALUES (?,?,?)";
$stmt = $mysqli-&gt;prepare($query);

$stmt-&gt;bind_param("sss", $val1, $val2, $val3);

$val1 = 'Stuttgart';
$val2 = 'DEU';
$val3 = 'Baden-Wuerttemberg';

/* Execute the statement */
$stmt-&gt;execute();

$val1 = 'Bordeaux';
$val2 = 'FRA';
$val3 = 'Aquitaine';

/* Execute the statement */
$stmt-&gt;execute();

/* close statement */
$stmt-&gt;close();

/* retrieve all rows from myCity */
$query = "SELECT Name, CountryCode, District FROM myCity";
if ($result = $mysqli-&gt;query($query)) {
    while ($row = $result-&gt;fetch_row()) {
        printf("%s (%s,%s)\n", $row[0], $row[1], $row[2]);
    }
    /* free result set */
    $result-&gt;close();
}

/* remove table */
$mysqli-&gt;query("DROP TABLE myCity");

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3757616"></a><p class="title"><b>Example 20.151. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

mysqli_query($link, "CREATE TABLE myCity LIKE City");

/* Prepare an insert statement */
$query = "INSERT INTO myCity (Name, CountryCode, District) VALUES (?,?,?)";
$stmt = mysqli_prepare($link, $query);

mysqli_stmt_bind_param($stmt, "sss", $val1, $val2, $val3);

$val1 = 'Stuttgart';
$val2 = 'DEU';
$val3 = 'Baden-Wuerttemberg';

/* Execute the statement */
mysqli_stmt_execute($stmt);

$val1 = 'Bordeaux';
$val2 = 'FRA';
$val3 = 'Aquitaine';

/* Execute the statement */
mysqli_stmt_execute($stmt);

/* close statement */
mysqli_stmt_close($stmt);

/* retrieve all rows from myCity */
$query = "SELECT Name, CountryCode, District FROM myCity";
if ($result = mysqli_query($link, $query)) {
    while ($row = mysqli_fetch_row($result)) {
        printf("%s (%s,%s)\n", $row[0], $row[1], $row[2]);
    }
    /* free result set */
    mysqli_free_result($result);
}

/* remove table */
mysqli_query($link, "DROP TABLE myCity");

/* close connection */
mysqli_close($link);
?&gt;

     </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Stuttgart (DEU,Baden-Wuerttemberg)
Bordeaux (FRA,Aquitaine)


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.prepare" title="20.11.2.6.32. mysqli::prepare, mysqli_prepare"><code class="function">mysqli_prepare</code></a>

          </td></tr><tr><td><code class="function">mysqli_stmt_bind_param</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.fetch"></a>20.11.2.7.11. <code class="literal">mysqli_stmt::fetch</code>,
        <code class="literal">mysqli_stmt_fetch</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::fetch</code>
          </p><p>
            <code class="literal">mysqli_stmt_fetch</code>
          </p><p>
            Fetch results from a prepared statement into the bound
            variables
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt::fetch</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt_fetch</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Fetch the result from a prepared statement into the variables
        bound by <code class="function">mysqli_stmt_bind_result</code>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Note that all columns must be bound by the application before
          calling <code class="function">mysqli_stmt_fetch</code>.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Data are transferred unbuffered without calling
          <code class="function">mysqli_stmt_store_result</code> which can
          decrease performance (but reduces memory cost).
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="function">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><div class="table"><a name="id3757919"></a><p class="title"><b>Table 20.13. Return Values</b></p><table summary="Return Values" border="1"><colgroup><col><col></colgroup><thead><tr><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code class="constant">TRUE</code></td><td>Success. Data has been fetched</td></tr><tr><td><code class="constant">FALSE</code></td><td>Error occured</td></tr><tr><td><code class="constant">NULL</code></td><td>No more rows/data exists or data truncation occurred</td></tr></tbody></table></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3757999"></a><p class="title"><b>Example 20.152. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER by ID DESC LIMIT 150,5";

if ($stmt = $mysqli-&gt;prepare($query)) {

    /* execute statement */
    $stmt-&gt;execute();

    /* bind result variables */
    $stmt-&gt;bind_result($name, $code);

    /* fetch values */
    while ($stmt-&gt;fetch()) {
        printf ("%s (%s)\n", $name, $code);
    }

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3758033"></a><p class="title"><b>Example 20.153. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER by ID DESC LIMIT 150,5";

if ($stmt = mysqli_prepare($link, $query)) {

    /* execute statement */
    mysqli_stmt_execute($stmt);

    /* bind result variables */
    mysqli_stmt_bind_result($stmt, $name, $code);

    /* fetch values */
    while (mysqli_stmt_fetch($stmt)) {
        printf ("%s (%s)\n", $name, $code);
    }

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Rockford (USA)
Tallahassee (USA)
Salinas (USA)
Santa Clarita (USA)
Springfield (USA)


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.prepare" title="20.11.2.6.32. mysqli::prepare, mysqli_prepare"><code class="function">mysqli_prepare</code></a>

          </td></tr><tr><td><code class="function">mysqli_stmt_errno</code>

          </td></tr><tr><td><code class="function">mysqli_stmt_error</code>

          </td></tr><tr><td><code class="function">mysqli_stmt_bind_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.field-count"></a>20.11.2.7.12. <code class="literal">mysqli_stmt-&gt;field_count</code>,
        <code class="literal">mysqli_stmt_field_count</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt-&gt;field_count</code>
          </p><p>
            <code class="literal">mysqli_stmt_field_count</code>
          </p><p>
            Returns the number of field in the given statement
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_stmt</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">field_count </span>;</code><br>}</pre><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_stmt_field_count</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.free-result"></a>20.11.2.7.13. <code class="literal">stmt::free_result</code>,
        <code class="literal">mysqli_stmt_free_result</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">stmt::free_result</code>
          </p><p>
            <code class="literal">mysqli_stmt_free_result</code>
          </p><p>
            Frees stored result memory for the given statement handle
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_stmt::free_result</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_stmt_free_result</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Frees the result memory associated with the statement, which was
        allocated by <code class="function">mysqli_stmt_store_result</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="function">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        No value is returned.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_stmt_store_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.get-warnings"></a>20.11.2.7.14. <code class="literal">mysqli_stmt::get_warnings</code>,
        <code class="literal">mysqli_stmt_get_warnings</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::get_warnings</code>
          </p><p>
            <code class="literal">mysqli_stmt_get_warnings</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli_stmt::get_warnings</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><br><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli_stmt_get_warnings</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.insert-id"></a>20.11.2.7.15. <code class="literal">mysqli_stmt-&gt;insert_id</code>,
        <code class="literal">mysqli_stmt_insert_id</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt-&gt;insert_id</code>
          </p><p>
            <code class="literal">mysqli_stmt_insert_id</code>
          </p><p>
            Get the ID generated from the previous INSERT operation
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_stmt</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">insert_id </span>;</code><br>}</pre><code class="methodsynopsis"><span class="type">mixed </span><span class="methodname">mysqli_stmt_insert_id</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.num-rows"></a>20.11.2.7.16. <code class="literal">mysqli_stmt::num_rows</code>,
        <code class="literal">mysqli_stmt_num_rows</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::num_rows</code>
          </p><p>
            <code class="literal">mysqli_stmt_num_rows</code>
          </p><p>
            Return the number of rows in statements result set
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_stmt</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">num_rows </span>;</code><br>}</pre><p>
        Procedural style :
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_stmt_num_rows</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Returns the number of rows in the result set. The use of
        <code class="function">mysqli_stmt_num_rows</code> depends on whether or
        not you used <code class="function">mysqli_stmt_store_result</code> to
        buffer the entire result set in the statement handle.
      </p><p>
        If you use <code class="function">mysqli_stmt_store_result</code>,
        <code class="function">mysqli_stmt_num_rows</code> may be called
        immediately.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="function">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An integer representing the number of rows in result set.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3758914"></a><p class="title"><b>Example 20.154. Object oriented style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER BY Name LIMIT 20";
if ($stmt = $mysqli-&gt;prepare($query)) {

    /* execute query */
    $stmt-&gt;execute();

    /* store result */
    $stmt-&gt;store_result();

    printf("Number of rows: %d.\n", $stmt-&gt;num_rows);

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3758937"></a><p class="title"><b>Example 20.155. Procedural style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER BY Name LIMIT 20";
if ($stmt = mysqli_prepare($link, $query)) {

    /* execute query */
    mysqli_stmt_execute($stmt);

    /* store result */
    mysqli_stmt_store_result($stmt);

    printf("Number of rows: %d.\n", mysqli_stmt_num_rows($stmt));

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Number of rows: 20.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_stmt_affected_rows</code>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.prepare" title="20.11.2.6.32. mysqli::prepare, mysqli_prepare"><code class="function">mysqli_prepare</code></a>

          </td></tr><tr><td><code class="function">mysqli_stmt_store_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.param-count"></a>20.11.2.7.17. <code class="literal">mysqli_stmt-&gt;param_count</code>,
        <code class="literal">mysqli_stmt_param_count</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt-&gt;param_count</code>
          </p><p>
            <code class="literal">mysqli_stmt_param_count</code>
          </p><p>
            Returns the number of parameter for the given statement
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_stmt</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">param_count </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_stmt_param_count</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Returns the number of parameter markers present in the prepared
        statement.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="function">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an integer representing the number of parameters.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3759215"></a><p class="title"><b>Example 20.156. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if ($stmt = $mysqli-&gt;prepare("SELECT Name FROM Country WHERE Name=? OR Code=?")) {

    $marker = $stmt-&gt;param_count;
    printf("Statement has %d markers.\n", $marker);

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3759243"></a><p class="title"><b>Example 20.157. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if ($stmt = mysqli_prepare($link, "SELECT Name FROM Country WHERE Name=? OR Code=?")) {

    $marker = mysqli_stmt_param_count($stmt);
    printf("Statement has %d markers.\n", $marker);

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Statement has 2 markers.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.prepare" title="20.11.2.6.32. mysqli::prepare, mysqli_prepare"><code class="function">mysqli_prepare</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.prepare"></a>20.11.2.7.18. <code class="literal">mysqli_stmt::prepare</code>,
        <code class="literal">mysqli_stmt_prepare</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::prepare</code>
          </p><p>
            <code class="literal">mysqli_stmt_prepare</code>
          </p><p>
            Prepare a SQL statement for execution
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method)
      </p><code class="methodsynopsis"><span class="type">mixed </span><span class="methodname">mysqli_stmt::prepare</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><br><p>
        Procedure style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt_prepare</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>,<br>                         <span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><p>
        Prepares the SQL query pointed to by the null-terminated string
        query.
      </p><p>
        The parameter markers must be bound to application variables
        using <code class="function">mysqli_stmt_bind_param</code> and/or
        <code class="function">mysqli_stmt_bind_result</code> before executing
        the statement or fetching rows.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="function">mysqli_stmt_init</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>query</code></em>
            </span></dt><dd><p>
                The query, as a string. It must consist of a single SQL
                statement.
              </p><p>
                You can include one or more parameter markers in the SQL
                statement by embedding question mark
                (<code class="literal">?</code>) characters at the appropriate
                positions.
              </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                  You should not add a terminating semicolon or
                  <code class="literal">\g</code> to the statement.
                </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                  The markers are legal only in certain places in SQL
                  statements. For example, they are allowed in the
                  VALUES() list of an INSERT statement (to specify
                  column values for a row), or in a comparison with a
                  column in a WHERE clause to specify a comparison
                  value.
                </p><p>
                  However, they are not allowed for identifiers (such as
                  table or column names), in the select list that names
                  the columns to be returned by a SELECT statement), or
                  to specify both operands of a binary operator such as
                  the <code class="literal">=</code> equal sign. The latter
                  restriction is necessary because it would be
                  impossible to determine the parameter type. In
                  general, parameters are legal only in Data
                  Manipulation Languange (DML) statements, and not in
                  Data Definition Language (DDL) statements.
                </p></div></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3759628"></a><p class="title"><b>Example 20.158. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$city = "Amersfoort";

/* create a prepared statement */
$stmt =  $mysqli-&gt;stmt_init();
if ($stmt-&gt;prepare("SELECT District FROM City WHERE Name=?")) {

    /* bind parameters for markers */
    $stmt-&gt;bind_param("s", $city);

    /* execute query */
    $stmt-&gt;execute();

    /* bind result variables */
    $stmt-&gt;bind_result($district);

    /* fetch value */
    $stmt-&gt;fetch();

    printf("%s is in district %s\n", $city, $district);

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3759661"></a><p class="title"><b>Example 20.159. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$city = "Amersfoort";

/* create a prepared statement */
$stmt = mysqli_stmt_init($link);
if (mysqli_stmt_prepare($stmt, 'SELECT District FROM City WHERE Name=?')) {

    /* bind parameters for markers */
    mysqli_stmt_bind_param($stmt, "s", $city);

    /* execute query */
    mysqli_stmt_execute($stmt);

    /* bind result variables */
    mysqli_stmt_bind_result($stmt, $district);

    /* fetch value */
    mysqli_stmt_fetch($stmt);

    printf("%s is in district %s\n", $city, $district);

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Amersfoort is in district Utrecht


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        <code class="function">mysqli_stmt_init</code>,
        <code class="function">mysqli_stmt_execute</code>,
        <code class="function">mysqli_stmt_fetch</code>,
        <code class="function">mysqli_stmt_bind_param</code>,
        <code class="function">mysqli_stmt_bind_result</code>
        <code class="function">mysqli_stmt_close</code>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.reset"></a>20.11.2.7.19. <code class="literal">mysqli_stmt::reset</code>,
        <code class="literal">mysqli_stmt_reset</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::reset</code>
          </p><p>
            <code class="literal">mysqli_stmt_reset</code>
          </p><p>
            Resets a prepared statement
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt::reset</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt_reset</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Resets a prepared statement on client and server to state after
        prepare.
      </p><p>
        For now this is mainly used to reset data sent with
        <code class="function">mysqli_stmt_send_long_data</code>.
      </p><p>
        To prepare a statement with another query use function
        <code class="function">mysqli_stmt_prepare</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="function">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.prepare" title="20.11.2.6.32. mysqli::prepare, mysqli_prepare"><code class="function">mysqli_prepare</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.result-metadata"></a>20.11.2.7.20. <code class="literal">mysqli_stmt::result_metadata</code>,
        <code class="literal">mysqli_stmt_result_metadata</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::result_metadata</code>
          </p><p>
            <code class="literal">mysqli_stmt_result_metadata</code>
          </p><p>
            Returns result set metadata from a prepared statement
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">mysqli_result </span><span class="methodname">mysqli_stmt::result_metadata</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">mysqli_result </span><span class="methodname">mysqli_stmt_result_metadata</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        If a statement passed to
        <a href="connectors-apis.html#apis-php-mysqli.prepare" title="20.11.2.6.32. mysqli::prepare, mysqli_prepare"><code class="function">mysqli_prepare</code></a>
        is one that produces a result set,
        <code class="function">mysqli_stmt_result_metadata</code> returns the
        result object that can be used to process the meta information
        such as total number of fields and individual field information.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This result set pointer can be passed as an argument to any of
          the field-based functions that process result set metadata,
          such as:

          </p><div class="itemizedlist"><ul type="disc"><li><p>
                <code class="function">mysqli_num_fields</code>
              </p></li><li><p>
                <code class="function">mysqli_fetch_field</code>
              </p></li><li><p>
                <code class="function">mysqli_fetch_field_direct</code>
              </p></li><li><p>
                <code class="function">mysqli_fetch_fields</code>
              </p></li><li><p>
                <code class="function">mysqli_field_count</code>
              </p></li><li><p>
                <code class="function">mysqli_field_seek</code>
              </p></li><li><p>
                <code class="function">mysqli_field_tell</code>
              </p></li><li><p>
                <code class="function">mysqli_free_result</code>
              </p></li></ul></div><p>
        </p></div><p>
        The result set structure should be freed when you are done with
        it, which you can do by passing it to
        <code class="function">mysqli_free_result</code>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The result set returned by
          <code class="function">mysqli_stmt_result_metadata</code> contains only
          metadata. It does not contain any row results. The rows are
          obtained by using the statement handle with
          <code class="function">mysqli_stmt_fetch</code>.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="function">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a result object or

        <code class="constant">FALSE</code>

        if an error occured.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3760340"></a><p class="title"><b>Example 20.160. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "test");

$mysqli-&gt;query("DROP TABLE IF EXISTS friends");
$mysqli-&gt;query("CREATE TABLE friends (id int, name varchar(20))");

$mysqli-&gt;query("INSERT INTO friends VALUES (1,'Hartmut'), (2, 'Ulf')");

$stmt = $mysqli-&gt;prepare("SELECT id, name FROM friends");
$stmt-&gt;execute();

/* get resultset for metadata */
$result = $stmt-&gt;result_metadata();

/* retrieve field information from metadata result set */
$field = $result-&gt;fetch_field();

printf("Fieldname: %s\n", $field-&gt;name);

/* close resultset */
$result-&gt;close();

/* close connection */
$mysqli-&gt;close();
?&gt;

    </pre></div><p>

        </p><div class="example"><a name="id3760371"></a><p class="title"><b>Example 20.161. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "test");

mysqli_query($link, "DROP TABLE IF EXISTS friends");
mysqli_query($link, "CREATE TABLE friends (id int, name varchar(20))");

mysqli_query($link, "INSERT INTO friends VALUES (1,'Hartmut'), (2, 'Ulf')");

$stmt = mysqli_prepare($link, "SELECT id, name FROM friends");
mysqli_stmt_execute($stmt);

/* get resultset for metadata */
$result = mysqli_stmt_result_metadata($stmt);

/* retrieve field information from metadata result set */
$field = mysqli_fetch_field($result);

printf("Fieldname: %s\n", $field-&gt;name);

/* close resultset */
mysqli_free_result($result);

/* close connection */
mysqli_close($link);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.prepare" title="20.11.2.6.32. mysqli::prepare, mysqli_prepare"><code class="function">mysqli_prepare</code></a>

          </td></tr><tr><td><code class="function">mysqli_free_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.send-long-data"></a>20.11.2.7.21. <code class="literal">mysqli_stmt::send_long_data</code>,
        <code class="literal">mysqli_stmt_send_long_data</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::send_long_data</code>
          </p><p>
            <code class="literal">mysqli_stmt_send_long_data</code>
          </p><p>
            Send data in blocks
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method)
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt::send_long_data</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">param_nr</span></span>,<br>                                 <span class="methodparam"><span class="type">string </span><span class="parameter">data</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt_send_long_data</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>,<br>                                <span class="methodparam"><span class="type">int </span><span class="parameter">param_nr</span></span>,<br>                                <span class="methodparam"><span class="type">string </span><span class="parameter">data</span></span>);</code><p>
        Allows to send parameter data to the server in pieces (or
        chunks), e.g. if the size of a blob exceeds the size of
        <code class="literal">max_allowed_packet</code>. This function can be
        called multiple times to send the parts of a character or binary
        data value for a column, which must be one of the TEXT or BLOB
        datatypes.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="function">mysqli_stmt_init</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>param_nr</code></em>
            </span></dt><dd><p>
                Indicates which parameter to associate the data with.
                Parameters are numbered beginning with 0.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>data</code></em>
            </span></dt><dd><p>
                A string containing data to be sent.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3760740"></a><p class="title"><b>Example 20.162. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$stmt = $mysqli-&gt;prepare("INSERT INTO messages (message) VALUES (?)");
$null = NULL;
$stmt-&gt;bind_param("b", $null);
$fp = fopen("messages.txt", "r");
while (!feof($fp)) {
    $stmt-&gt;send_long_data(0, fread($fp, 8192));
}
fclose($fp);
$stmt-&gt;execute();
?&gt;

  </pre></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.prepare" title="20.11.2.6.32. mysqli::prepare, mysqli_prepare"><code class="function">mysqli_prepare</code></a>

          </td></tr><tr><td><code class="function">mysqli_stmt_bind_param</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.sqlstate"></a>20.11.2.7.22. <code class="literal">mysqli_stmt::sqlstate</code>,
        <code class="literal">mysqli_stmt_sqlstate</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::sqlstate</code>
          </p><p>
            <code class="literal">mysqli_stmt_sqlstate</code>
          </p><p>
            Returns SQLSTATE error from previous statement operation
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_stmt</span></span> {<br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">sqlstate </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_stmt_sqlstate</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Returns a string containing the SQLSTATE error code for the most
        recently invoked prepared statement function that can succeed or
        fail. The error code consists of five characters.
        <code class="literal">'00000'</code> means no error. The values
        are specified by ANSI SQL and ODBC. For a list of possible
        values, see
        <a href="http://dev.mysql.com/doc/mysql/en/error-handling.html" target="_top">http://dev.mysql.com/doc/mysql/en/error-handling.html</a>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="function">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a string containing the SQLSTATE error code for the last
        error. The error code consists of five characters.
        <code class="literal">'00000'</code> means no error.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Note that not all MySQL errors are yet mapped to
          SQLSTATE's. The value <code class="literal">HY000</code> (general
          error) is used for unmapped errors.
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3761036"></a><p class="title"><b>Example 20.163. Object oriented style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$mysqli-&gt;query("CREATE TABLE myCountry LIKE Country");
$mysqli-&gt;query("INSERT INTO myCountry SELECT * FROM Country");


$query = "SELECT Name, Code FROM myCountry ORDER BY Name";
if ($stmt = $mysqli-&gt;prepare($query)) {

    /* drop table */
    $mysqli-&gt;query("DROP TABLE myCountry");

    /* execute query */
    $stmt-&gt;execute();

    printf("Error: %s.\n", $stmt-&gt;sqlstate);

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3761065"></a><p class="title"><b>Example 20.164. Procedural style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

mysqli_query($link, "CREATE TABLE myCountry LIKE Country");
mysqli_query($link, "INSERT INTO myCountry SELECT * FROM Country");


$query = "SELECT Name, Code FROM myCountry ORDER BY Name";
if ($stmt = mysqli_prepare($link, $query)) {

    /* drop table */
    mysqli_query($link, "DROP TABLE myCountry");

    /* execute query */
    mysqli_stmt_execute($stmt);

    printf("Error: %s.\n", mysqli_stmt_sqlstate($stmt));

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Error: 42S02.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_stmt_errno</code>

          </td></tr><tr><td><code class="function">mysqli_stmt_error</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.store-result"></a>20.11.2.7.23. <code class="literal">mysqli_stmt::store_result</code>,
        <code class="literal">mysqli_stmt_store_result</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::store_result</code>
          </p><p>
            <code class="literal">mysqli_stmt_store_result</code>
          </p><p>
            Transfers a result set from a prepared statement
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt::store_result</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt_store_result</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        You must call <code class="function">mysqli_stmt_store_result</code> for
        every query that successfully produces a result set
        (<code class="literal">SELECT, SHOW, DESCRIBE, EXPLAIN</code>), and only
        if you want to buffer the complete result set by the client, so
        that the subsequent <code class="function">mysqli_stmt_fetch</code> call
        returns buffered data.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          It is unnecessary to call
          <code class="function">mysqli_stmt_store_result</code> for other
          queries, but if you do, it will not harm or cause any notable
          performance in all cases. You can detect whether the query
          produced a result set by checking if
          <code class="function">mysqli_stmt_result_metadata</code> returns NULL.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="function">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3761380"></a><p class="title"><b>Example 20.165. Object oriented style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER BY Name LIMIT 20";
if ($stmt = $mysqli-&gt;prepare($query)) {

    /* execute query */
    $stmt-&gt;execute();

    /* store result */
    $stmt-&gt;store_result();

    printf("Number of rows: %d.\n", $stmt-&gt;num_rows);

    /* free result */
    $stmt-&gt;free_result();

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3761403"></a><p class="title"><b>Example 20.166. Procedural style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER BY Name LIMIT 20";
if ($stmt = mysqli_prepare($link, $query)) {

    /* execute query */
    mysqli_stmt_execute($stmt);

    /* store result */
    mysqli_stmt_store_result($stmt);

    printf("Number of rows: %d.\n", mysqli_stmt_num_rows($stmt));

    /* free result */
    mysqli_stmt_free_result($stmt);

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Number of rows: 20.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.prepare" title="20.11.2.6.32. mysqli::prepare, mysqli_prepare"><code class="function">mysqli_prepare</code></a>

          </td></tr><tr><td><code class="function">mysqli_stmt_result_metadata</code>

          </td></tr><tr><td><code class="function">mysqli_stmt_fetch</code>

          </td></tr></table><p>
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-class.mysqli-result"></a>20.11.2.8. The MySQLi_Result class (<code class="literal">MySQLi_Result</code>)</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-result.current-field">20.11.2.8.1. <code class="literal">mysqli_result-&gt;current_field</code>,
        <code class="literal">mysqli_field_tell</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-result.data-seek">20.11.2.8.2. <code class="literal">mysqli_result::data_seek</code>,
        <code class="literal">mysqli_data_seek</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-result.fetch-all">20.11.2.8.3. <code class="literal">mysqli_result::fetch_all</code>,
        <code class="literal">mysqli_fetch_all</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-result.fetch-array">20.11.2.8.4. <code class="literal">mysqli_result::fetch_array</code>,
        <code class="literal">mysqli_fetch_array</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-result.fetch-assoc">20.11.2.8.5. <code class="literal">mysqli_result::fetch_assoc</code>,
        <code class="literal">mysqli_fetch_assoc</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-result.fetch-field-direct">20.11.2.8.6. <code class="literal">mysqli_result::fetch_field_direct</code>,
        <code class="literal">mysqli_fetch_field_direct</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-result.fetch-field">20.11.2.8.7. <code class="literal">mysqli_result::fetch_field</code>,
        <code class="literal">mysqli_fetch_field</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-result.fetch-fields">20.11.2.8.8. <code class="literal">mysqli_result::fetch_fields</code>,
        <code class="literal">mysqli_fetch_fields</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-result.fetch-object">20.11.2.8.9. <code class="literal">mysqli_result::fetch_object</code>,
        <code class="literal">mysqli_fetch_object</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-result.fetch-row">20.11.2.8.10. <code class="literal">mysqli_result::fetch_row</code>,
        <code class="literal">mysqli_fetch_row</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-result.field-count">20.11.2.8.11. <code class="literal">mysqli_result-&gt;field_count</code>,
        <code class="literal">mysqli_num_fields</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-result.field-seek">20.11.2.8.12. <code class="literal">mysqli_result::field_seek</code>,
        <code class="literal">mysqli_field_seek</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-result.free">20.11.2.8.13. <code class="literal">mysqli_result::free</code>,
        <code class="literal">mysqli_free_result</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-result.lengths">20.11.2.8.14. <code class="literal">mysqli_result-&gt;lengths</code>,
        <code class="literal">mysqli_fetch_lengths</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-result.num-rows">20.11.2.8.15. <code class="literal">mysqli_result-&gt;num_rows</code>,
        <code class="literal">mysqli_num_rows</code></a></span></dt></dl></div><p>
      <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
      Documentation Group.</a>
    </p><p>
      Represents the result set obtained from a query against the
      database.
    </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">MySQLi_Result</span></span> {<br> <span class="ooclass"><span class="classname">MySQLi_Result</span></span>

      Properties<code class="fieldsynopsis">  <span class="type">int </span><span class="varname">current_field </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">field_count </span>;</code><br><code class="fieldsynopsis">  <span class="type">array </span><span class="varname">lengths </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">num_rows </span>;</code><br>Methods<code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_field_tell</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_result::data_seek</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">offset</span></span>);</code><br><code class="methodsynopsis">  <span class="type">mixed </span><span class="methodname">mysqli_result::fetch_all</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">resulttype</span></span>);</code><br><code class="methodsynopsis">  <span class="type">mixed </span><span class="methodname">mysqli_result::fetch_array</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">resulttype</span></span>);</code><br><code class="methodsynopsis">  <span class="type">array </span><span class="methodname">mysqli_result::fetch_assoc</span>();</code><br><code class="methodsynopsis">  <span class="type">object </span><span class="methodname">mysqli_result::fetch_field_direct</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">fieldnr</span></span>);</code><br><code class="methodsynopsis">  <span class="type">object </span><span class="methodname">mysqli_result::fetch_field</span>();</code><br><code class="methodsynopsis">  <span class="type">array </span><span class="methodname">mysqli_result::fetch_fields</span>();</code><br><code class="methodsynopsis">  <span class="type">object </span><span class="methodname">mysqli_result::fetch_object</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">class_name</span></span>,<br>                                     <span class="methodparam"><span class="type">array </span><span class="parameter">params</span></span>);</code><br><code class="methodsynopsis">  <span class="type">mixed </span><span class="methodname">mysqli_result::fetch_row</span>();</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_num_fields</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_result::field_seek</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">fieldnr</span></span>);</code><br><code class="methodsynopsis">  <span class="type">void </span><span class="methodname">mysqli_result::free</span>();</code><br><code class="methodsynopsis">  <span class="type">array </span><span class="methodname">mysqli_fetch_lengths</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_num_rows</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><br>}</pre><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.current-field"></a>20.11.2.8.1. <code class="literal">mysqli_result-&gt;current_field</code>,
        <code class="literal">mysqli_field_tell</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result-&gt;current_field</code>
          </p><p>
            <code class="literal">mysqli_field_tell</code>
          </p><p>
            Get current field offset of a result pointer
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_result</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">current_field </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_field_tell</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><p>
        Returns the position of the field cursor used for the last
        <code class="function">mysqli_fetch_field</code> call. This value can be
        used as an argument to <code class="function">mysqli_field_seek</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>,
                <code class="function">mysqli_store_result</code> or
                <code class="function">mysqli_use_result</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns current offset of field cursor.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3762129"></a><p class="title"><b>Example 20.167. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, SurfaceArea from Country ORDER BY Code LIMIT 5";

if ($result = $mysqli-&gt;query($query)) {

    /* Get field information for all columns */
    while ($finfo = $result-&gt;fetch_field()) {

        /* get fieldpointer offset */
        $currentfield = $result-&gt;current_field;

        printf("Column %d:\n", $currentfield);
        printf("Name:     %s\n", $finfo-&gt;name);
        printf("Table:    %s\n", $finfo-&gt;table);
        printf("max. Len: %d\n", $finfo-&gt;max_length);
        printf("Flags:    %d\n", $finfo-&gt;flags);
        printf("Type:     %d\n\n", $finfo-&gt;type);
    }
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3762164"></a><p class="title"><b>Example 20.168. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, SurfaceArea from Country ORDER BY Code LIMIT 5";

if ($result = mysqli_query($link, $query)) {

    /* Get field information for all fields */
    while ($finfo = mysqli_fetch_field($result)) {

        /* get fieldpointer offset */
        $currentfield = mysqli_field_tell($result);

        printf("Column %d:\n", $currentfield);
        printf("Name:     %s\n", $finfo-&gt;name);
        printf("Table:    %s\n", $finfo-&gt;table);
        printf("max. Len: %d\n", $finfo-&gt;max_length);
        printf("Flags:    %d\n", $finfo-&gt;flags);
        printf("Type:     %d\n\n", $finfo-&gt;type);
    }
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Column 1:
Name:     Name
Table:    Country
max. Len: 11
Flags:    1
Type:     254

Column 2:
Name:     SurfaceArea
Table:    Country
max. Len: 10
Flags:    32769
Type:     4



      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_fetch_field</code>

          </td></tr><tr><td><code class="function">mysqli_field_seek</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.data-seek"></a>20.11.2.8.2. <code class="literal">mysqli_result::data_seek</code>,
        <code class="literal">mysqli_data_seek</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result::data_seek</code>
          </p><p>
            <code class="literal">mysqli_data_seek</code>
          </p><p>
            Adjusts the result pointer to an arbitary row in the result
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_result::data_seek</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">offset</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_data_seek</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>,<br>                      <span class="methodparam"><span class="type">int </span><span class="parameter">offset</span></span>);</code><p>
        The <code class="function">mysqli_data_seek</code> function seeks to an
        arbitrary result pointer specified by the
        <em class="parameter"><code>offset</code></em> in the result set.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>,
                <code class="function">mysqli_store_result</code> or
                <code class="function">mysqli_use_result</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>offset</code></em>
            </span></dt><dd><p>
                The field offset. Must be between zero and the total
                number of rows minus one
                (0..<code class="function">mysqli_num_rows</code> - 1).
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This function can only be used with buffered results attained
          from the use of the <code class="function">mysqli_store_result</code>
          or
          <a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>
          functions.
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3762560"></a><p class="title"><b>Example 20.169. Object oriented style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER BY Name";
if ($result = $mysqli-&gt;query( $query)) {

    /* seek to row no. 400 */
    $result-&gt;data_seek(399);

    /* fetch row */
    $row = $result-&gt;fetch_row();

    printf ("City: %s  Countrycode: %s\n", $row[0], $row[1]);

    /* free result set*/
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3762583"></a><p class="title"><b>Example 20.170. Procedural style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (!$link) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER BY Name";

if ($result = mysqli_query($link, $query)) {

    /* seek to row no. 400 */
    mysqli_data_seek($result, 399);

    /* fetch row */
    $row = mysqli_fetch_row($result);

    printf ("City: %s  Countrycode: %s\n", $row[0], $row[1]);

    /* free result set*/
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


City: Benin City  Countrycode: NGA


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_store_result</code>

          </td></tr><tr><td><code class="function">mysqli_fetch_row</code>

          </td></tr><tr><td><code class="function">mysqli_fetch_array</code>

          </td></tr><tr><td><code class="function">mysqli_fetch_assoc</code>

          </td></tr><tr><td><code class="function">mysqli_fetch_object</code>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>

          </td></tr><tr><td><code class="function">mysqli_num_rows</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.fetch-all"></a>20.11.2.8.3. <code class="literal">mysqli_result::fetch_all</code>,
        <code class="literal">mysqli_fetch_all</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result::fetch_all</code>
          </p><p>
            <code class="literal">mysqli_fetch_all</code>
          </p><p>
            Fetches all result rows as an associative array, a numeric
            array, or both
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">mixed </span><span class="methodname">mysqli_result::fetch_all</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">resulttype</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">mixed </span><span class="methodname">mysqli_fetch_all</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>,<br>                       <span class="methodparam"><span class="type">int </span><span class="parameter">resulttype</span></span>);</code><p>
        Available only with <code class="literal">mysqlnd</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>,
                <code class="function">mysqli_store_result</code> or
                <code class="function">mysqli_use_result</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>resulttype</code></em>
            </span></dt><dd><p>
                This optional parameter is a constant indicating what
                type of array should be produced from the current row
                data. The possible values for this parameter are the
                constants

                <code class="constant">MYSQLI_ASSOC</code>

                ,

                <code class="constant">MYSQLI_NUM</code>

                , or

                <code class="constant">MYSQLI_BOTH</code>

                . Defaults to

                <code class="constant">MYSQLI_NUM</code>

                .
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an array of associative or numeric arrays holding result
        rows.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_fetch_array</code>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.fetch-array"></a>20.11.2.8.4. <code class="literal">mysqli_result::fetch_array</code>,
        <code class="literal">mysqli_fetch_array</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result::fetch_array</code>
          </p><p>
            <code class="literal">mysqli_fetch_array</code>
          </p><p>
            Fetch a result row as an associative, a numeric array, or
            both
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">mixed </span><span class="methodname">mysqli_result::fetch_array</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">resulttype</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">mixed </span><span class="methodname">mysqli_fetch_array</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>,<br>                         <span class="methodparam"><span class="type">int </span><span class="parameter">resulttype</span></span>);</code><p>
        Returns an array that corresponds to the fetched row or

        <code class="constant">NULL</code>

        if there are no more rows for the resultset represented by the
        <em class="parameter"><code>result</code></em> parameter.
      </p><p>
        <code class="function">mysqli_fetch_array</code> is an extended version
        of the <code class="function">mysqli_fetch_row</code> function. In
        addition to storing the data in the numeric indices of the
        result array, the <code class="function">mysqli_fetch_array</code>
        function can also store the data in associative indices, using
        the field names of the result set as keys.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Field names returned by this function
are <span class="emphasis"><em>case-sensitive</em></span>.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This function sets NULL fields to
the PHP <code class="constant">NULL</code> value.</p></div><p>
        If two or more columns of the result have the same field names,
        the last column will take precedence and overwrite the earlier
        data. In order to access multiple columns with the same name,
        the numerically indexed version of the row must be used.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>,
                <code class="function">mysqli_store_result</code> or
                <code class="function">mysqli_use_result</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>resulttype</code></em>
            </span></dt><dd><p>
                This optional parameter is a constant indicating what
                type of array should be produced from the current row
                data. The possible values for this parameter are the
                constants

                <code class="constant">MYSQLI_ASSOC</code>

                ,

                <code class="constant">MYSQLI_NUM</code>

                , or

                <code class="constant">MYSQLI_BOTH</code>

                . Defaults to

                <code class="constant">MYSQLI_BOTH</code>

                .
              </p><p>
                By using the

                <code class="constant">MYSQLI_ASSOC</code>

                constant this function will behave identically to the
                <code class="function">mysqli_fetch_assoc</code>, while

                <code class="constant">MYSQLI_NUM</code>

                will behave identically to the
                <code class="function">mysqli_fetch_row</code> function. The
                final option

                <code class="constant">MYSQLI_BOTH</code>

                will create a single array with the attributes of both.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an array of strings that corresponds to the fetched row
        or

        <code class="constant">NULL</code>

        if there are no more rows in resultset.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3763375"></a><p class="title"><b>Example 20.171. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER by ID LIMIT 3";
$result = $mysqli-&gt;query($query);

/* numeric array */
$row = $result-&gt;fetch_array(MYSQLI_NUM);
printf ("%s (%s)\n", $row[0], $row[1]);

/* associative array */
$row = $result-&gt;fetch_array(MYSQLI_ASSOC);
printf ("%s (%s)\n", $row["Name"], $row["CountryCode"]);

/* associative and numeric array */
$row = $result-&gt;fetch_array(MYSQLI_BOTH);
printf ("%s (%s)\n", $row[0], $row["CountryCode"]);

/* free result set */
$result-&gt;close();

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3763411"></a><p class="title"><b>Example 20.172. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER by ID LIMIT 3";
$result = mysqli_query($link, $query);

/* numeric array */
$row = mysqli_fetch_array($result, MYSQLI_NUM);
printf ("%s (%s)\n", $row[0], $row[1]);

/* associative array */
$row = mysqli_fetch_array($result, MYSQLI_ASSOC);
printf ("%s (%s)\n", $row["Name"], $row["CountryCode"]);

/* associative and numeric array */
$row = mysqli_fetch_array($result, MYSQLI_BOTH);
printf ("%s (%s)\n", $row[0], $row["CountryCode"]);

/* free result set */
mysqli_free_result($result);

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Kabul (AFG)
Qandahar (AFG)
Herat (AFG)


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_fetch_assoc</code>

          </td></tr><tr><td><code class="function">mysqli_fetch_row</code>

          </td></tr><tr><td><code class="function">mysqli_fetch_object</code>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>

          </td></tr><tr><td><code class="function">mysqli_data_seek</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.fetch-assoc"></a>20.11.2.8.5. <code class="literal">mysqli_result::fetch_assoc</code>,
        <code class="literal">mysqli_fetch_assoc</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result::fetch_assoc</code>
          </p><p>
            <code class="literal">mysqli_fetch_assoc</code>
          </p><p>
            Fetch a result row as an associative array
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">array </span><span class="methodname">mysqli_result::fetch_assoc</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">array </span><span class="methodname">mysqli_fetch_assoc</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><p>
        Returns an associative array that corresponds to the fetched row
        or

        <code class="constant">NULL</code>

        if there are no more rows.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Field names returned by this function
are <span class="emphasis"><em>case-sensitive</em></span>.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This function sets NULL fields to
the PHP <code class="constant">NULL</code> value.</p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>,
                <code class="function">mysqli_store_result</code> or
                <code class="function">mysqli_use_result</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an associative array of strings representing the fetched
        row in the result set, where each key in the array represents
        the name of one of the result set's columns or

        <code class="constant">NULL</code>

        if there are no more rows in resultset.
      </p><p>
        If two or more columns of the result have the same field names,
        the last column will take precedence. To access the other
        column(s) of the same name, you either need to access the result
        with numeric indices by using
        <code class="function">mysqli_fetch_row</code> or add alias names.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3763766"></a><p class="title"><b>Example 20.173. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER by ID DESC LIMIT 50,5";

if ($result = $mysqli-&gt;query($query)) {

    /* fetch associative array */
    while ($row = $result-&gt;fetch_assoc()) {
        printf ("%s (%s)\n", $row["Name"], $row["CountryCode"]);
    }

    /* free result set */
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3763788"></a><p class="title"><b>Example 20.174. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER by ID DESC LIMIT 50,5";

if ($result = mysqli_query($link, $query)) {

    /* fetch associative array */
    while ($row = mysqli_fetch_assoc($result)) {
        printf ("%s (%s)\n", $row["Name"], $row["CountryCode"]);
    }

    /* free result set */
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Pueblo (USA)
Arvada (USA)
Cape Coral (USA)
Green Bay (USA)
Santa Clara (USA)


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_fetch_array</code>

          </td></tr><tr><td><code class="function">mysqli_fetch_row</code>

          </td></tr><tr><td><code class="function">mysqli_fetch_object</code>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>

          </td></tr><tr><td><code class="function">mysqli_data_seek</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.fetch-field-direct"></a>20.11.2.8.6. <code class="literal">mysqli_result::fetch_field_direct</code>,
        <code class="literal">mysqli_fetch_field_direct</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result::fetch_field_direct</code>
          </p><p>
            <code class="literal">mysqli_fetch_field_direct</code>
          </p><p>
            Fetch meta-data for a single field
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli_result::fetch_field_direct</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">fieldnr</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli_fetch_field_direct</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>,<br>                                 <span class="methodparam"><span class="type">int </span><span class="parameter">fieldnr</span></span>);</code><p>
        Returns an object which contains field definition informations
        from specified resultset.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>,
                <code class="function">mysqli_store_result</code> or
                <code class="function">mysqli_use_result</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>fieldnr</code></em>
            </span></dt><dd><p>
                The field number. This value must be in the range from
                <code class="literal">0</code> to <code class="literal">number of fields -
                1</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an object which contains field definition information or

        <code class="constant">FALSE</code>

        if no field information for specified <code class="literal">fieldnr</code>
        is available.
      </p><p>
        </p><div class="table"><a name="id3764157"></a><p class="title"><b>Table 20.14. Object attributes</b></p><table summary="Object attributes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Attribute</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>The name of the column</td></tr><tr><td>orgname</td><td>Original column name if an alias was specified</td></tr><tr><td>table</td><td>The name of the table this field belongs to (if not calculated)</td></tr><tr><td>orgtable</td><td>Original table name if an alias was specified</td></tr><tr><td>def</td><td>The default value for this field, represented as a string</td></tr><tr><td>max_length</td><td>The maximum width of the field for the result set.</td></tr><tr><td>length</td><td>The width of the field, as specified in the tabl definition.</td></tr><tr><td>charsetnr</td><td>The character set number for the field.</td></tr><tr><td>flags</td><td>An integer representing the bit-flags for the field.</td></tr><tr><td>type</td><td>The data type used for this field</td></tr><tr><td>decimals</td><td>The number of decimals used (for integer fields)</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3764322"></a><p class="title"><b>Example 20.175. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, SurfaceArea from Country ORDER BY Name LIMIT 5";

if ($result = $mysqli-&gt;query($query)) {

    /* Get field information for column 'SurfaceArea' */
    $finfo = $result-&gt;fetch_field_direct(1);

    printf("Name:     %s\n", $finfo-&gt;name);
    printf("Table:    %s\n", $finfo-&gt;table);
    printf("max. Len: %d\n", $finfo-&gt;max_length);
    printf("Flags:    %d\n", $finfo-&gt;flags);
    printf("Type:     %d\n", $finfo-&gt;type);

    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3764357"></a><p class="title"><b>Example 20.176. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, SurfaceArea from Country ORDER BY Name LIMIT 5";

if ($result = mysqli_query($link, $query)) {

    /* Get field information for column 'SurfaceArea' */
    $finfo = mysqli_fetch_field_direct($result, 1);

    printf("Name:     %s\n", $finfo-&gt;name);
    printf("Table:    %s\n", $finfo-&gt;table);
    printf("max. Len: %d\n", $finfo-&gt;max_length);
    printf("Flags:    %d\n", $finfo-&gt;flags);
    printf("Type:     %d\n", $finfo-&gt;type);

    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Name:     SurfaceArea
Table:    Country
max. Len: 10
Flags:    32769
Type:     4


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_num_fields</code>

          </td></tr><tr><td><code class="function">mysqli_fetch_field</code>

          </td></tr><tr><td><code class="function">mysqli_fetch_fields</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.fetch-field"></a>20.11.2.8.7. <code class="literal">mysqli_result::fetch_field</code>,
        <code class="literal">mysqli_fetch_field</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result::fetch_field</code>
          </p><p>
            <code class="literal">mysqli_fetch_field</code>
          </p><p>
            Returns the next field in the result set
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli_result::fetch_field</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli_fetch_field</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><p>
        Returns the definition of one column of a result set as an
        object. Call this function repeatedly to retrieve information
        about all columns in the result set.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>,
                <code class="function">mysqli_store_result</code> or
                <code class="function">mysqli_use_result</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an object which contains field definition information or

        <code class="constant">FALSE</code>

        if no field information is available.
      </p><p>
        </p><div class="table"><a name="id3764635"></a><p class="title"><b>Table 20.15. Object properties</b></p><table summary="Object properties" border="1"><colgroup><col><col></colgroup><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>The name of the column</td></tr><tr><td>orgname</td><td>Original column name if an alias was specified</td></tr><tr><td>table</td><td>The name of the table this field belongs to (if not calculated)</td></tr><tr><td>orgtable</td><td>Original table name if an alias was specified</td></tr><tr><td>def</td><td>The default value for this field, represented as a string</td></tr><tr><td>max_length</td><td>The maximum width of the field for the result set.</td></tr><tr><td>length</td><td>The width of the field, as specified in the table definition.</td></tr><tr><td>charsetnr</td><td>The character set number for the field.</td></tr><tr><td>flags</td><td>An integer representing the bit-flags for the field.</td></tr><tr><td>type</td><td>The data type used for this field</td></tr><tr><td>decimals</td><td>The number of decimals used (for integer fields)</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3764800"></a><p class="title"><b>Example 20.177. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, SurfaceArea from Country ORDER BY Code LIMIT 5";

if ($result = $mysqli-&gt;query($query)) {

    /* Get field information for all columns */
    while ($finfo = $result-&gt;fetch_field()) {

        printf("Name:     %s\n", $finfo-&gt;name);
        printf("Table:    %s\n", $finfo-&gt;table);
        printf("max. Len: %d\n", $finfo-&gt;max_length);
        printf("Flags:    %d\n", $finfo-&gt;flags);
        printf("Type:     %d\n\n", $finfo-&gt;type);
    }
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3764835"></a><p class="title"><b>Example 20.178. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, SurfaceArea from Country ORDER BY Code LIMIT 5";

if ($result = mysqli_query($link, $query)) {

    /* Get field information for all fields */
    while ($finfo = mysqli_fetch_field($result)) {

        printf("Name:     %s\n", $finfo-&gt;name);
        printf("Table:    %s\n", $finfo-&gt;table);
        printf("max. Len: %d\n", $finfo-&gt;max_length);
        printf("Flags:    %d\n", $finfo-&gt;flags);
        printf("Type:     %d\n\n", $finfo-&gt;type);
    }
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Name:     Name
Table:    Country
max. Len: 11
Flags:    1
Type:     254

Name:     SurfaceArea
Table:    Country
max. Len: 10
Flags:    32769
Type:     4



      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_num_fields</code>

          </td></tr><tr><td><code class="function">mysqli_fetch_field_direct</code>

          </td></tr><tr><td><code class="function">mysqli_fetch_fields</code>

          </td></tr><tr><td><code class="function">mysqli_field_seek</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.fetch-fields"></a>20.11.2.8.8. <code class="literal">mysqli_result::fetch_fields</code>,
        <code class="literal">mysqli_fetch_fields</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result::fetch_fields</code>
          </p><p>
            <code class="literal">mysqli_fetch_fields</code>
          </p><p>
            Returns an array of objects representing the fields in a
            result set
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">array </span><span class="methodname">mysqli_result::fetch_fields</span>();</code><br><p>
        Procedural Style:
      </p><code class="methodsynopsis"><span class="type">array </span><span class="methodname">mysqli_fetch_fields</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><p>
        This function serves an identical purpose to the
        <code class="function">mysqli_fetch_field</code> function with the single
        difference that, instead of returning one object at a time for
        each field, the columns are returned as an array of objects.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>,
                <code class="function">mysqli_store_result</code> or
                <code class="function">mysqli_use_result</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an array of objects which contains field definition
        information or

        <code class="constant">FALSE</code>

        if no field information is available.
      </p><p>
        </p><div class="table"><a name="id3765130"></a><p class="title"><b>Table 20.16. Object properties</b></p><table summary="Object properties" border="1"><colgroup><col><col></colgroup><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>The name of the column</td></tr><tr><td>orgname</td><td>Original column name if an alias was specified</td></tr><tr><td>table</td><td>The name of the table this field belongs to (if not calculated)</td></tr><tr><td>orgtable</td><td>Original table name if an alias was specified</td></tr><tr><td>def</td><td>The default value for this field, represented as a string</td></tr><tr><td>max_length</td><td>The maximum width of the field for the result set.</td></tr><tr><td>length</td><td>The width of the field, as specified in the table definition.</td></tr><tr><td>charsetnr</td><td>The character set number for the field.</td></tr><tr><td>flags</td><td>An integer representing the bit-flags for the field.</td></tr><tr><td>type</td><td>The data type used for this field</td></tr><tr><td>decimals</td><td>The number of decimals used (for integer fields)</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3765295"></a><p class="title"><b>Example 20.179. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, SurfaceArea from Country ORDER BY Code LIMIT 5";

if ($result = $mysqli-&gt;query($query)) {

    /* Get field information for all columns */
    $finfo = $result-&gt;fetch_fields();

    foreach ($finfo as $val) {
        printf("Name:     %s\n", $val-&gt;name);
        printf("Table:    %s\n", $val-&gt;table);
        printf("max. Len: %d\n", $val-&gt;max_length);
        printf("Flags:    %d\n", $val-&gt;flags);
        printf("Type:     %d\n\n", $val-&gt;type);
    }
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3765330"></a><p class="title"><b>Example 20.180. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, SurfaceArea from Country ORDER BY Code LIMIT 5";

if ($result = mysqli_query($link, $query)) {

    /* Get field information for all columns */
    $finfo = mysqli_fetch_fields($result);

    foreach ($finfo as $val) {
        printf("Name:     %s\n", $val-&gt;name);
        printf("Table:    %s\n", $val-&gt;table);
        printf("max. Len: %d\n", $val-&gt;max_length);
        printf("Flags:    %d\n", $val-&gt;flags);
        printf("Type:     %d\n\n", $val-&gt;type);
    }
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Name:     Name
Table:    Country
max. Len: 11
Flags:    1
Type:     254

Name:     SurfaceArea
Table:    Country
max. Len: 10
Flags:    32769
Type:     4



      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_num_fields</code>

          </td></tr><tr><td><code class="function">mysqli_fetch_field_direct</code>

          </td></tr><tr><td><code class="function">mysqli_fetch_field</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.fetch-object"></a>20.11.2.8.9. <code class="literal">mysqli_result::fetch_object</code>,
        <code class="literal">mysqli_fetch_object</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result::fetch_object</code>
          </p><p>
            <code class="literal">mysqli_fetch_object</code>
          </p><p>
            Returns the current row of a result set as an object
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli_result::fetch_object</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">class_name</span></span>,<br>                                   <span class="methodparam"><span class="type">array </span><span class="parameter">params</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli_fetch_object</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>,<br>                           <span class="methodparam"><span class="type">string </span><span class="parameter">class_name</span></span>,<br>                           <span class="methodparam"><span class="type">array </span><span class="parameter">params</span></span>);</code><p>
        The <code class="function">mysqli_fetch_object</code> will return the
        current row result set as an object where the attributes of the
        object represent the names of the fields found within the result
        set.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>,
                <code class="function">mysqli_store_result</code> or
                <code class="function">mysqli_use_result</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>class_name</code></em>
            </span></dt><dd><p>
                The name of the class to instantiate, set the properties
                of and return. If not specified, a
                <code class="classname">stdClass</code> object is returned.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>params</code></em>
            </span></dt><dd><p>
                An optional <span class="type">array</span> of parameters to pass to
                the constructor for <em class="parameter"><code>class_name</code></em>
                objects.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an object with string properties that corresponds to the
        fetched row or

        <code class="constant">NULL</code>

        if there are no more rows in resultset.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Field names returned by this function
are <span class="emphasis"><em>case-sensitive</em></span>.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This function sets NULL fields to
the PHP <code class="constant">NULL</code> value.</p></div><p>
        <span class="bold"><strong>ChangeLog</strong></span>
      </p><p>
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Version</th><th>Description</th></tr></thead><tbody><tr><td>5.0.0</td><td>Added the ability to return as a different object.</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3765817"></a><p class="title"><b>Example 20.181. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}
 
$query = "SELECT Name, CountryCode FROM City ORDER by ID DESC LIMIT 50,5";

if ($result = $mysqli-&gt;query($query)) {

    /* fetch object array */
    while ($obj = $result-&gt;fetch_object()) {
        printf ("%s (%s)\n", $obj-&gt;Name, $obj-&gt;CountryCode);
    }

    /* free result set */
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

   </pre></div><div class="example"><a name="id3765840"></a><p class="title"><b>Example 20.182. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER by ID DESC LIMIT 50,5";

if ($result = mysqli_query($link, $query)) {

    /* fetch associative array */
    while ($obj = mysqli_fetch_object($result)) {
        printf ("%s (%s)\n", $obj-&gt;Name, $obj-&gt;CountryCode);
    }

    /* free result set */
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Pueblo (USA)
Arvada (USA)
Cape Coral (USA)
Green Bay (USA)
Santa Clara (USA)


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_fetch_array</code>

          </td></tr><tr><td><code class="function">mysqli_fetch_assoc</code>

          </td></tr><tr><td><code class="function">mysqli_fetch_row</code>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>

          </td></tr><tr><td><code class="function">mysqli_data_seek</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.fetch-row"></a>20.11.2.8.10. <code class="literal">mysqli_result::fetch_row</code>,
        <code class="literal">mysqli_fetch_row</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result::fetch_row</code>
          </p><p>
            <code class="literal">mysqli_fetch_row</code>
          </p><p>
            Get a result row as an enumerated array
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">mixed </span><span class="methodname">mysqli_result::fetch_row</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">mixed </span><span class="methodname">mysqli_fetch_row</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><p>
        Fetches one row of data from the result set and returns it as an
        enumerated array, where each column is stored in an array offset
        starting from 0 (zero). Each subsequent call to this function
        will return the next row within the result set, or

        <code class="constant">NULL</code>

        if there are no more rows.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>,
                <code class="function">mysqli_store_result</code> or
                <code class="function">mysqli_use_result</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        <code class="function">mysqli_fetch_row</code> returns an array of
        strings that corresponds to the fetched row or

        <code class="constant">NULL</code>

        if there are no more rows in result set.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This function sets NULL fields to
the PHP <code class="constant">NULL</code> value.</p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3766166"></a><p class="title"><b>Example 20.183. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER by ID DESC LIMIT 50,5";

if ($result = $mysqli-&gt;query($query)) {

    /* fetch object array */
    while ($row = $result-&gt;fetch_row()) {
        printf ("%s (%s)\n", $row[0], $row[1]);
    }

    /* free result set */
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3766189"></a><p class="title"><b>Example 20.184. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER by ID DESC LIMIT 50,5";

if ($result = mysqli_query($link, $query)) {

    /* fetch associative array */
    while ($row = mysqli_fetch_row($result)) {
        printf ("%s (%s)\n", $row[0], $row[1]);
    }

    /* free result set */
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Pueblo (USA)
Arvada (USA)
Cape Coral (USA)
Green Bay (USA)
Santa Clara (USA)


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_fetch_array</code>

          </td></tr><tr><td><code class="function">mysqli_fetch_assoc</code>

          </td></tr><tr><td><code class="function">mysqli_fetch_object</code>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>

          </td></tr><tr><td><code class="function">mysqli_data_seek</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.field-count"></a>20.11.2.8.11. <code class="literal">mysqli_result-&gt;field_count</code>,
        <code class="literal">mysqli_num_fields</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result-&gt;field_count</code>
          </p><p>
            <code class="literal">mysqli_num_fields</code>
          </p><p>
            Get the number of fields in a result
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_result</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">field_count </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_num_fields</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><p>
        Returns the number of fields from specified result set.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>,
                <code class="function">mysqli_store_result</code> or
                <code class="function">mysqli_use_result</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The number of fields from a result set.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3766498"></a><p class="title"><b>Example 20.185. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if ($result = $mysqli-&gt;query("SELECT * FROM City ORDER BY ID LIMIT 1")) {

    /* determine number of fields in result set */
    $field_cnt = $result-&gt;field_count;

    printf("Result set has %d fields.\n", $field_cnt);

    /* close result set */
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3766529"></a><p class="title"><b>Example 20.186. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if ($result = mysqli_query($link, "SELECT * FROM City ORDER BY ID LIMIT 1")) {

    /* determine number of fields in result set */
    $field_cnt = mysqli_num_fields($result);

    printf("Result set has %d fields.\n", $field_cnt);

    /* close result set */
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Result set has 5 fields.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_fetch_field</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.field-seek"></a>20.11.2.8.12. <code class="literal">mysqli_result::field_seek</code>,
        <code class="literal">mysqli_field_seek</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result::field_seek</code>
          </p><p>
            <code class="literal">mysqli_field_seek</code>
          </p><p>
            Set result pointer to a specified field offset
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_result::field_seek</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">fieldnr</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_field_seek</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>,<br>                       <span class="methodparam"><span class="type">int </span><span class="parameter">fieldnr</span></span>);</code><p>
        Sets the field cursor to the given offset. The next call to
        <code class="function">mysqli_fetch_field</code> will retrieve the field
        definition of the column associated with that offset.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          To seek to the beginning of a row, pass an offset value of
          zero.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>,
                <code class="function">mysqli_store_result</code> or
                <code class="function">mysqli_use_result</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>fieldnr</code></em>
            </span></dt><dd><p>
                The field number. This value must be in the range from
                <code class="literal">0</code> to <code class="literal">number of fields -
                1</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3766878"></a><p class="title"><b>Example 20.187. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, SurfaceArea from Country ORDER BY Code LIMIT 5";

if ($result = $mysqli-&gt;query($query)) {

    /* Get field information for 2nd column */
    $result-&gt;field_seek(1);
    $finfo = $result-&gt;fetch_field();

    printf("Name:     %s\n", $finfo-&gt;name);
    printf("Table:    %s\n", $finfo-&gt;table);
    printf("max. Len: %d\n", $finfo-&gt;max_length);
    printf("Flags:    %d\n", $finfo-&gt;flags);
    printf("Type:     %d\n\n", $finfo-&gt;type);

    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3766912"></a><p class="title"><b>Example 20.188. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, SurfaceArea from Country ORDER BY Code LIMIT 5";

if ($result = mysqli_query($link, $query)) {

    /* Get field information for 2nd column */
    mysqli_field_seek($result, 1);
    $finfo = mysqli_fetch_field($result);

    printf("Name:     %s\n", $finfo-&gt;name);
    printf("Table:    %s\n", $finfo-&gt;table);
    printf("max. Len: %d\n", $finfo-&gt;max_length);
    printf("Flags:    %d\n", $finfo-&gt;flags);
    printf("Type:     %d\n\n", $finfo-&gt;type);

    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Name:     SurfaceArea
Table:    Country
max. Len: 10
Flags:    32769
Type:     4



      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_fetch_field</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.free"></a>20.11.2.8.13. <code class="literal">mysqli_result::free</code>,
        <code class="literal">mysqli_free_result</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result::free</code>
          </p><p>
            <code class="literal">mysqli_free_result</code>
          </p><p>
            Frees the memory associated with a result
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (all methods are equivalent):
      </p><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_result::free</span>();</code><br><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_result::close</span>();</code><br><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_result::free_result</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_free_result</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><p>
        Frees the memory associated with the result.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          You should always free your result with
          <code class="function">mysqli_free_result</code>, when your result
          object is not needed anymore.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>,
                <code class="function">mysqli_store_result</code> or
                <code class="function">mysqli_use_result</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        No value is returned.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>

          </td></tr><tr><td><code class="function">mysqli_stmt_store_result</code>

          </td></tr><tr><td><code class="function">mysqli_store_result</code>

          </td></tr><tr><td><code class="function">mysqli_use_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.lengths"></a>20.11.2.8.14. <code class="literal">mysqli_result-&gt;lengths</code>,
        <code class="literal">mysqli_fetch_lengths</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result-&gt;lengths</code>
          </p><p>
            <code class="literal">mysqli_fetch_lengths</code>
          </p><p>
            Returns the lengths of the columns of the current row in the
            result set
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_result</span></span> {<br><code class="fieldsynopsis">  <span class="type">array </span><span class="varname">lengths </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">array </span><span class="methodname">mysqli_fetch_lengths</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><p>
        The <code class="function">mysqli_fetch_lengths</code> function returns
        an array containing the lengths of every column of the current
        row within the result set.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>,
                <code class="function">mysqli_store_result</code> or
                <code class="function">mysqli_use_result</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An array of integers representing the size of each column (not
        including any terminating null characters).

        <code class="constant">FALSE</code>

        if an error occurred.
      </p><p>
        <code class="function">mysqli_fetch_lengths</code> is valid only for the
        current row of the result set. It returns

        <code class="constant">FALSE</code>

        if you call it before calling mysqli_fetch_row/array/object or
        after retrieving all rows in the result.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3767491"></a><p class="title"><b>Example 20.189. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT * from Country ORDER BY Code LIMIT 1";

if ($result = $mysqli-&gt;query($query)) {

    $row = $result-&gt;fetch_row();

    /* display column lengths */
    foreach ($result-&gt;lengths as $i =&gt; $val) {
        printf("Field %2d has Length %2d\n", $i+1, $val);
    }
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id3767513"></a><p class="title"><b>Example 20.190. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT * from Country ORDER BY Code LIMIT 1";

if ($result = mysqli_query($link, $query)) {

    $row = mysqli_fetch_row($result);

    /* display column lengths */
    foreach (mysqli_fetch_lengths($result) as $i =&gt; $val) {
        printf("Field %2d has Length %2d\n", $i+1, $val);
    }
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Field  1 has Length  3
Field  2 has Length  5
Field  3 has Length 13
Field  4 has Length  9
Field  5 has Length  6
Field  6 has Length  1
Field  7 has Length  6
Field  8 has Length  4
Field  9 has Length  6
Field 10 has Length  6
Field 11 has Length  5
Field 12 has Length 44
Field 13 has Length  7
Field 14 has Length  3
Field 15 has Length  2


      </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.num-rows"></a>20.11.2.8.15. <code class="literal">mysqli_result-&gt;num_rows</code>,
        <code class="literal">mysqli_num_rows</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result-&gt;num_rows</code>
          </p><p>
            <code class="literal">mysqli_num_rows</code>
          </p><p>
            Gets the number of rows in a result
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_result</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">num_rows </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_num_rows</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><p>
        Returns the number of rows in the result set.
      </p><p>
        The use of <code class="function">mysqli_num_rows</code> depends on
        whether you use buffered or unbuffered result sets. In case you
        use unbuffered resultsets <code class="function">mysqli_num_rows</code>
        will not correct the correct number of rows until all the rows
        in the result have been retrieved.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>,
                <code class="function">mysqli_store_result</code> or
                <code class="function">mysqli_use_result</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns number of rows in the result set.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If the number of rows is greater than maximal int value, the
          number will be returned as a string.
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id3767788"></a><p class="title"><b>Example 20.191. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if ($result = $mysqli-&gt;query("SELECT Code, Name FROM Country ORDER BY Name")) {

    /* determine number of rows result set */
    $row_cnt = $result-&gt;num_rows;

    printf("Result set has %d rows.\n", $row_cnt);

    /* close result set */
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

   </pre></div><div class="example"><a name="id3767818"></a><p class="title"><b>Example 20.192. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if ($result = mysqli_query($link, "SELECT Code, Name FROM Country ORDER BY Name")) {

    /* determine number of rows result set */
    $row_cnt = mysqli_num_rows($result);

    printf("Result set has %d rows.\n", $row_cnt);

    /* close result set */
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Result set has 239 rows.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_affected_rows</code>

          </td></tr><tr><td><code class="function">mysqli_store_result</code>

          </td></tr><tr><td><code class="function">mysqli_use_result</code>

          </td></tr><tr><td><a href="connectors-apis.html#apis-php-mysqli.query" title="20.11.2.6.33. mysqli::query, mysqli_query"><code class="function">mysqli_query</code></a>

          </td></tr></table><p>
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-class.mysqli-driver"></a>20.11.2.9. The MySQLi_Driver class (<code class="literal">MySQLi_Driver</code>)</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-driver.embedded-server-end">20.11.2.9.1. <code class="literal">mysqli_driver::embedded_server_end</code>,
        <code class="literal">mysqli_embedded_server_end</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-mysqli-driver.embedded-server-start">20.11.2.9.2. <code class="literal">mysqli_driver::embedded_server_start</code>,
        <code class="literal">mysqli_embedded_server_start</code></a></span></dt></dl></div><p>
      <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
      Documentation Group.</a>
    </p><p>
      MySQLi Driver.
    </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">MySQLi_Driver</span></span> {<br> <span class="ooclass"><span class="classname">MySQLi_Driver</span></span>

      Properties<code class="fieldsynopsis">  <span class="modifier">public </span><span class="modifier">readonly </span><span class="type">string </span><span class="varname">client_info </span>;</code><br><code class="fieldsynopsis">  <span class="modifier">public </span><span class="modifier">readonly </span><span class="type">string </span><span class="varname">client_version </span>;</code><br><code class="fieldsynopsis">  <span class="modifier">public </span><span class="modifier">readonly </span><span class="type">string </span><span class="varname">driver_version </span>;</code><br><code class="fieldsynopsis">  <span class="modifier">public </span><span class="modifier">readonly </span><span class="type">string </span><span class="varname">embedded </span>;</code><br><code class="fieldsynopsis">  <span class="modifier">public </span><span class="type">bool </span><span class="varname">reconnect </span>;</code><br><code class="fieldsynopsis">  <span class="modifier">public </span><span class="type">int </span><span class="varname">report-mode </span>;</code><br>Methods<code class="methodsynopsis">  <span class="type">void </span><span class="methodname">mysqli_driver::embedded_server_end</span>();</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_driver::embedded_server_start</span>(<span class="methodparam"><span class="type">bool </span><span class="parameter">start</span></span>,<br>                                            <span class="methodparam"><span class="type">array </span><span class="parameter">arguments</span></span>,<br>                                            <span class="methodparam"><span class="type">array </span><span class="parameter">groups</span></span>);</code><br>}</pre><div class="variablelist"><dl><dt><a name="apis-php-mysqli-driver.props.client-info"></a><span class="term">
          <code class="varname">client_info</code>
        </span></dt><dd><p>
            The Client API header version
          </p></dd><dt><a name="apis-php-mysqli-driver.props.client-version"></a><span class="term">
          <code class="varname">client_version</code>
        </span></dt><dd><p>
            The Client version
          </p></dd><dt><a name="apis-php-mysqli-driver.props.driver-version"></a><span class="term">
          <code class="varname">driver_version</code>
        </span></dt><dd><p>
            The MySQLi Driver version
          </p></dd><dt><a name="apis-php-mysqli-driver.props.embedded"></a><span class="term">
          <code class="varname">embedded</code>
        </span></dt><dd><p>
            Wether MySQLi Embedded support is enabled
          </p></dd><dt><a name="apis-php-mysqli-driver.props.reconnect"></a><span class="term">
          <code class="varname">reconnect</code>
        </span></dt><dd><p>
            Allow or prevent reconnect (see the mysqli.reconnect INI
            directive)
          </p></dd><dt><a name="apis-php-mysqli-driver.props.report-mode"></a><span class="term">
          <code class="varname">report_mode</code>
        </span></dt><dd><p>
            Set to

            <code class="constant">MYSQLI_REPORT_STRICT</code>

            to throw Exceptions for errors
          </p></dd></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-driver.embedded-server-end"></a>20.11.2.9.1. <code class="literal">mysqli_driver::embedded_server_end</code>,
        <code class="literal">mysqli_embedded_server_end</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_driver::embedded_server_end</code>
          </p><p>
            <code class="literal">mysqli_embedded_server_end</code>
          </p><p>
            Stop embedded server
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_driver::embedded_server_end</span>();</code><br><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_embedded_server_end</span>();</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-driver.embedded-server-start"></a>20.11.2.9.2. <code class="literal">mysqli_driver::embedded_server_start</code>,
        <code class="literal">mysqli_embedded_server_start</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_driver::embedded_server_start</code>
          </p><p>
            <code class="literal">mysqli_embedded_server_start</code>
          </p><p>
            Initialize and start embedded server
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_driver::embedded_server_start</span>(<span class="methodparam"><span class="type">bool </span><span class="parameter">start</span></span>,<br>                                          <span class="methodparam"><span class="type">array </span><span class="parameter">arguments</span></span>,<br>                                          <span class="methodparam"><span class="type">array </span><span class="parameter">groups</span></span>);</code><br><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_embedded_server_start</span>(<span class="methodparam"><span class="type">bool </span><span class="parameter">start</span></span>,<br>                                  <span class="methodparam"><span class="type">array </span><span class="parameter">arguments</span></span>,<br>                                  <span class="methodparam"><span class="type">array </span><span class="parameter">groups</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-ref.mysqli"></a>20.11.2.10. Aliases and deprecated Mysqli Functions</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysqli-bind-param">20.11.2.10.1. <code class="literal">mysqli_bind_param</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysqli-bind-result">20.11.2.10.2. <code class="literal">mysqli_bind_result</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysqli-client-encoding">20.11.2.10.3. <code class="literal">mysqli_client_encoding</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysqli-disable-reads-from-master">20.11.2.10.4. <code class="literal">mysqli_disable_reads_from_master</code>,
        <code class="literal">mysqli-&gt;disable_reads_from_master</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysqli-disable-rpl-parse">20.11.2.10.5. <code class="literal">mysqli_disable_rpl_parse</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysqli-enable-reads-from-master">20.11.2.10.6. <code class="literal">mysqli_enable_reads_from_master</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysqli-enable-rpl-parse">20.11.2.10.7. <code class="literal">mysqli_enable_rpl_parse</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysqli-escape-string">20.11.2.10.8. <code class="literal">mysqli_escape_string</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysqli-execute">20.11.2.10.9. <code class="literal">mysqli_execute</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysqli-fetch">20.11.2.10.10. <code class="literal">mysqli_fetch</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysqli-get-metadata">20.11.2.10.11. <code class="literal">mysqli_get_metadata</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysqli-master-query">20.11.2.10.12. <code class="literal">mysqli_master_query</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysqli-param-count">20.11.2.10.13. <code class="literal">mysqli_param_count</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysqli-report">20.11.2.10.14. <code class="literal">mysqli_report</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysqli-rpl-parse-enabled">20.11.2.10.15. <code class="literal">mysqli_rpl_parse_enabled</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysqli-rpl-probe">20.11.2.10.16. <code class="literal">mysqli_rpl_probe</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysqli-rpl-query-type">20.11.2.10.17. <code class="literal">mysqli_rpl_query_type</code>,
        <code class="literal">mysqli-&gt;rpl_query_type</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysqli-send-long-data">20.11.2.10.18. <code class="literal">mysqli_send_long_data</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysqli-send-query">20.11.2.10.19. <code class="literal">mysqli_send_query</code>,
        <code class="literal">mysqli-&gt;send_query</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysqli-set-opt">20.11.2.10.20. <code class="literal">mysqli_set_opt</code></a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-php-function.mysqli-slave-query">20.11.2.10.21. <code class="literal">mysqli_slave_query</code></a></span></dt></dl></div><p>
      <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
      Documentation Group.</a>
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-bind-param"></a>20.11.2.10.1. <code class="literal">mysqli_bind_param</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_bind_param</code>
          </p><p>
            Alias for <code class="function">mysqli_stmt_bind_param</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is an alias of
        <code class="function">mysqli_stmt_bind_param</code>.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <code class="function">mysqli_bind_param</code> is deprecated and will
          be removed.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_stmt_bind_param</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-bind-result"></a>20.11.2.10.2. <code class="literal">mysqli_bind_result</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_bind_result</code>
          </p><p>
            Alias for <code class="function">mysqli_stmt_bind_result</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is an alias of
        <code class="function">mysqli_stmt_bind_result</code>.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <code class="function">mysqli_bind_result</code> is deprecated and will
          be removed.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_stmt_bind_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-client-encoding"></a>20.11.2.10.3. <code class="literal">mysqli_client_encoding</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_client_encoding</code>
          </p><p>
            Alias of <code class="function">mysqli_character_set_name</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is an alias of
        <code class="function">mysqli_character_set_name</code>.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_real_escape_string</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-disable-reads-from-master"></a>20.11.2.10.4. <code class="literal">mysqli_disable_reads_from_master</code>,
        <code class="literal">mysqli-&gt;disable_reads_from_master</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_disable_reads_from_master</code>
          </p><p>
            <code class="literal">mysqli-&gt;disable_reads_from_master</code>
          </p><p>
            Disable reads from master
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_disable_reads_from_master</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Object oriented style (method):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="methodsynopsis">  <span class="type">void </span><span class="methodname">disable_reads_from_master</span>();</code><br>}</pre><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function has been
<span class="emphasis"><em>DEPRECATED</em></span> and <span class="emphasis"><em>REMOVED</em></span> as of PHP 5.3.0.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-disable-rpl-parse"></a>20.11.2.10.5. <code class="literal">mysqli_disable_rpl_parse</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_disable_rpl_parse</code>
          </p><p>
            Disable RPL parse
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_disable_rpl_parse</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function has been
<span class="emphasis"><em>DEPRECATED</em></span> and <span class="emphasis"><em>REMOVED</em></span> as of PHP 5.3.0.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-enable-reads-from-master"></a>20.11.2.10.6. <code class="literal">mysqli_enable_reads_from_master</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_enable_reads_from_master</code>
          </p><p>
            Enable reads from master
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_enable_reads_from_master</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function has been
<span class="emphasis"><em>DEPRECATED</em></span> and <span class="emphasis"><em>REMOVED</em></span> as of PHP 5.3.0.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-enable-rpl-parse"></a>20.11.2.10.7. <code class="literal">mysqli_enable_rpl_parse</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_enable_rpl_parse</code>
          </p><p>
            Enable RPL parse
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_enable_rpl_parse</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function has been
<span class="emphasis"><em>DEPRECATED</em></span> and <span class="emphasis"><em>REMOVED</em></span> as of PHP 5.3.0.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-escape-string"></a>20.11.2.10.8. <code class="literal">mysqli_escape_string</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_escape_string</code>
          </p><p>
            Alias of <code class="function">mysqli_real_escape_string</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is an alias of
        <code class="function">mysqli_real_escape_string</code>.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_real_escape_string</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-execute"></a>20.11.2.10.9. <code class="literal">mysqli_execute</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_execute</code>
          </p><p>
            Alias for <code class="function">mysqli_stmt_execute</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is an alias of
        <code class="function">mysqli_stmt_execute</code>.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <code class="function">mysqli_execute</code> is deprecated and will be
          removed.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_stmt_execute</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-fetch"></a>20.11.2.10.10. <code class="literal">mysqli_fetch</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_fetch</code>
          </p><p>
            Alias for <code class="function">mysqli_stmt_fetch</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is an alias of
        <code class="function">mysqli_stmt_fetch</code>.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <code class="function">mysqli_fetch</code> is deprecated and will be
          removed.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_stmt_fetch</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-get-metadata"></a>20.11.2.10.11. <code class="literal">mysqli_get_metadata</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_get_metadata</code>
          </p><p>
            Alias for <code class="function">mysqli_stmt_result_metadata</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is an alias of
        <code class="function">mysqli_stmt_result_metadata</code>.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <code class="function">mysqli_get_metadata</code> is deprecated and
          will be removed.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_stmt_result_metadata</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-master-query"></a>20.11.2.10.12. <code class="literal">mysqli_master_query</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_master_query</code>
          </p><p>
            Enforce execution of a query on the master in a master/slave
            setup
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_master_query</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                         <span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function has been
<span class="emphasis"><em>DEPRECATED</em></span> and <span class="emphasis"><em>REMOVED</em></span> as of PHP 5.3.0.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-param-count"></a>20.11.2.10.13. <code class="literal">mysqli_param_count</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_param_count</code>
          </p><p>
            Alias for <code class="function">mysqli_stmt_param_count</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is an alias of
        <code class="function">mysqli_stmt_param_count</code>.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <code class="function">mysqli_param_count</code> is deprecated and will
          be removed.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_stmt_param_count</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-report"></a>20.11.2.10.14. <code class="literal">mysqli_report</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_report</code>
          </p><p>
            Enables or disables internal report functions
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_report</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">flags</span></span>);</code><p>
        <code class="function">mysqli_report</code> is a powerful function to
        improve your queries and code during development and testing
        phase. Depending on the flags it reports errors from mysqli
        function calls or queries which don't use an index (or use
        a bad index).
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>flags</code></em>
            </span></dt><dd><p>
                </p><div class="table"><a name="id3770127"></a><p class="title"><b>Table 20.17. Supported flags</b></p><table summary="Supported flags" border="1"><colgroup><col><col></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="constant">MYSQLI_REPORT_OFF</code></td><td>Turns reporting off</td></tr><tr><td><code class="constant">MYSQLI_REPORT_ERROR</code></td><td>Report errors from mysqli function calls</td></tr><tr><td><code class="constant">MYSQLI_REPORT_STRICT</code></td><td>Report warnings from mysqli function calls</td></tr><tr><td><code class="constant">MYSQLI_REPORT_INDEX</code></td><td>Report if no index or bad index was used in a query</td></tr><tr><td><code class="constant">MYSQLI_REPORT_ALL</code></td><td>Set all options (report all)</td></tr></tbody></table></div><p>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id3770260"></a><p class="title"><b>Example 20.193. Object oriented style</b></p><pre class="programlisting">
&lt;?php
/* activate reporting */
mysqli_report(MYSQLI_REPORT_ALL);

$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* this query should report an error */
$result = $mysqli-&gt;query("SELECT Name FROM Nonexistingtable WHERE population &gt; 50000");

/* this query should report a warning */
$result = $mysqli-&gt;query("SELECT Name FROM City WHERE population &gt; 50000");
$result-&gt;close();

$mysqli-&gt;close();
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="connectors-apis.html#apis-php-mysqli.debug" title="20.11.2.6.10. mysqli::debug, mysqli_debug"><code class="function">mysqli_debug</code></a>

          </td></tr><tr><td><code class="function">mysqli_dump_debug_info</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-rpl-parse-enabled"></a>20.11.2.10.15. <code class="literal">mysqli_rpl_parse_enabled</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_rpl_parse_enabled</code>
          </p><p>
            Check if RPL parse is enabled
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_rpl_parse_enabled</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function has been
<span class="emphasis"><em>DEPRECATED</em></span> and <span class="emphasis"><em>REMOVED</em></span> as of PHP 5.3.0.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-rpl-probe"></a>20.11.2.10.16. <code class="literal">mysqli_rpl_probe</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_rpl_probe</code>
          </p><p>
            RPL probe
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_rpl_probe</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function has been
<span class="emphasis"><em>DEPRECATED</em></span> and <span class="emphasis"><em>REMOVED</em></span> as of PHP 5.3.0.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-rpl-query-type"></a>20.11.2.10.17. <code class="literal">mysqli_rpl_query_type</code>,
        <code class="literal">mysqli-&gt;rpl_query_type</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_rpl_query_type</code>
          </p><p>
            <code class="literal">mysqli-&gt;rpl_query_type</code>
          </p><p>
            Returns RPL query type
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_rpl_query_type</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                          <span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><p>
        Object oriented style (method)
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">rpl_query_type</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><br>}</pre><p>
        Returns

        <code class="constant">MYSQLI_RPL_MASTER</code>

        ,

        <code class="constant">MYSQLI_RPL_SLAVE</code>

        or

        <code class="constant">MYSQLI_RPL_ADMIN</code>

        depending on a query type. <code class="literal">INSERT</code>,
        <code class="literal">UPDATE</code> and similar are
        <span class="emphasis"><em>master</em></span> queries, <code class="literal">SELECT</code>
        is <span class="emphasis"><em>slave</em></span>, and <code class="literal">FLUSH</code>,
        <code class="literal">REPAIR</code> and similar are
        <span class="emphasis"><em>admin</em></span>.
      </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function has been
<span class="emphasis"><em>DEPRECATED</em></span> and <span class="emphasis"><em>REMOVED</em></span> as of PHP 5.3.0.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-send-long-data"></a>20.11.2.10.18. <code class="literal">mysqli_send_long_data</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_send_long_data</code>
          </p><p>
            Alias for <code class="function">mysqli_stmt_send_long_data</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is an alias of
        <code class="function">mysqli_stmt_send_long_data</code>.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <code class="function">mysqli_send_long_data</code> is deprecated and
          will be removed.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">mysqli_stmt_send_long_data</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-send-query"></a>20.11.2.10.19. <code class="literal">mysqli_send_query</code>,
        <code class="literal">mysqli-&gt;send_query</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_send_query</code>
          </p><p>
            <code class="literal">mysqli-&gt;send_query</code>
          </p><p>
            Send the query and return
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_send_query</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                       <span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><p>
        Object oriented style (method)
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">send_query</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><br>}</pre><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function has been
<span class="emphasis"><em>DEPRECATED</em></span> and <span class="emphasis"><em>REMOVED</em></span> as of PHP 5.3.0.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-set-opt"></a>20.11.2.10.20. <code class="literal">mysqli_set_opt</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_set_opt</code>
          </p><p>
            Alias of
            <a href="connectors-apis.html#apis-php-mysqli.options" title="20.11.2.6.30. mysqli::options, mysqli_options"><code class="function">mysqli_options</code></a>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is an alias of
        <a href="connectors-apis.html#apis-php-mysqli.options" title="20.11.2.6.30. mysqli::options, mysqli_options"><code class="function">mysqli_options</code></a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-slave-query"></a>20.11.2.10.21. <code class="literal">mysqli_slave_query</code></h5></div></div></div><p>
        <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
        Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_slave_query</code>
          </p><p>
            Force execution of a query on a slave in a master/slave
            setup
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_slave_query</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function has been
<span class="emphasis"><em>DEPRECATED</em></span> and <span class="emphasis"><em>REMOVED</em></span> as of PHP 5.3.0.</p></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="apis-php-pdo-mysql"></a>20.11.3. MySQL Functions (PDO_MYSQL)</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#apis-php-ref.pdo-mysql.connection">20.11.3.1. <code class="literal">PDO_MYSQL DSN</code></a></span></dt></dl></div><p>
    <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
    Documentation Group.</a>
  </p><p>
    PDO_MYSQL is a driver that implements the
    <a href="http://www.php.net/manual/en/intro.pdo.php" target="_top">PHP Data
    Objects (PDO) interface</a> to enable access from PHP to MySQL
    3.x, 4.x and 5.x databases.
  </p><p>
    PDO_MYSQL will take advantage of native prepared statement support
    present in MySQL 4.1 and higher. If you're using an older
    version of the mysql client libraries, PDO will emulate them for
    you.
  </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
      Beware: Some MySQL table types (storage engines) do not support
      transactions. When writing transactional database code using a
      table type that does not support transactions, MySQL will pretend
      that a transaction was initiated successfully. In addition, any
      DDL queries issued will implicitly commit any pending
      transactions.
    </p></div><p>The constants below are defined by
this driver, and will only be available when the extension has been either
compiled into PHP or dynamically loaded at runtime. In addition, these
driver-specific constants should only be used if you are using this driver.
Using mysql-specific attributes with the postgres driver may result in
unexpected behaviour. <code class="function">PDO::getAttribute</code> may be used to
obtain the <code class="constant">PDO_ATTR_DRIVER_NAME</code> attribute to check the
driver, if your code can run against multiple drivers.</p><div class="variablelist"><dl><dt><span class="term">
        <code class="constant">PDO::MYSQL_ATTR_USE_BUFFERED_QUERY</code>

        (<span class="type">integer</span>)
      </span></dt><dd><p>
     If this attribute is set to <code class="constant">TRUE</code> on a
     <code class="classname">PDOStatement</code>, the MySQL driver will use the
     buffered versions of the MySQL API.  If you're writing portable code, you
     should use <code class="function">PDOStatement::fetchAll</code> instead.
    </p><p>
          </p><div class="example"><a name="id3771342"></a><p class="title"><b>Example 20.194. Forcing queries to be buffered in mysql</b></p><pre class="programlisting">
&lt;?php
if ($db-&gt;getAttribute(PDO::ATTR_DRIVER_NAME) == 'mysql') {
    $stmt = $db-&gt;prepare('select * from foo',
        array(PDO::MYSQL_ATTR_USE_BUFFERED_QUERY =&gt; true));
} else {
    die("my application only works with mysql; I should use \$stmt-&gt;fetchAll() instead");
}
?&gt;

      </pre></div><p>
        </p></dd><dt><span class="term">
        <code class="constant">PDO::MYSQL_ATTR_LOCAL_INFILE</code>

        (<span class="type">integer</span>)
      </span></dt><dd><p>
          Enable <code class="literal">LOAD LOCAL INFILE</code>.
        </p></dd><dt><span class="term">
        <code class="constant">PDO::MYSQL_ATTR_INIT_COMMAND</code>

        (<span class="type">integer</span>)
      </span></dt><dd><p>
          Command to execute when connecting to the MySQL server. Will
          automatically be re-executed when reconnecting.
        </p></dd><dt><span class="term">
        <code class="constant">PDO::MYSQL_ATTR_READ_DEFAULT_FILE</code>

        (<span class="type">integer</span>)
      </span></dt><dd><p>
          Read options from the named option file instead of from
          <code class="filename">my.cnf</code>.
        </p></dd><dt><span class="term">
        <code class="constant">PDO::MYSQL_ATTR_READ_DEFAULT_GROUP</code>

        (<span class="type">integer</span>)
      </span></dt><dd><p>
          Read options from the named group from
          <code class="filename">my.cnf</code> or the file specified with

          <code class="constant">MYSQL_READ_DEFAULT_FILE</code>

          .
        </p></dd><dt><span class="term">
        <code class="constant">PDO::MYSQL_ATTR_MAX_BUFFER_SIZE</code>

        (<span class="type">integer</span>)
      </span></dt><dd><p>
          Maximum buffer size. Defaults to 1 MiB.
        </p></dd><dt><span class="term">
        <code class="constant">PDO::MYSQL_ATTR_DIRECT_QUERY</code>

        (<span class="type">integer</span>)
      </span></dt><dd><p>
          Perform direct queries, don't use prepared statements.
        </p></dd></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-ref.pdo-mysql.connection"></a>20.11.3.1. <code class="literal">PDO_MYSQL DSN</code></h4></div></div></div><p>
      <a href="connectors-apis.html#php-api-copyright">Copyright 1997-2008 the PHP
      Documentation Group.</a>
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">PDO_MYSQL DSN</code>
        </p><p>
          Connecting to MySQL databases
        </p></li></ul></div><p>
      <span class="bold"><strong>Description</strong></span>
    </p><p>
      The PDO_MYSQL Data Source Name (DSN) is composed of the following
      elements:

      </p><div class="variablelist"><dl><dt><span class="term">
            DSN prefix
          </span></dt><dd><p>
              The DSN prefix is <strong class="userinput"><code>mysql:</code></strong>.
            </p></dd><dt><span class="term">
            <code class="constant">host</code>
          </span></dt><dd><p>
              The hostname on which the database server resides.
            </p></dd><dt><span class="term">
            <code class="constant">port</code>
          </span></dt><dd><p>
              The port number where the database server is listening.
            </p></dd><dt><span class="term">
            <code class="constant">dbname</code>
          </span></dt><dd><p>
              The name of the database.
            </p></dd><dt><span class="term">
            <code class="constant">unix_socket</code>
          </span></dt><dd><p>
              The MySQL Unix socket (shouldn't be used with
              <code class="literal">host</code> or <code class="literal">port</code>).
            </p></dd></dl></div><p>
    </p><p>
      <span class="bold"><strong>Examples</strong></span>
    </p><p>
      </p><div class="example"><a name="id3771696"></a><p class="title"><b>Example 20.195. PDO_MYSQL DSN examples</b></p><p>
          The following example shows a PDO_MYSQL DSN for connecting to
          MySQL databases:

</p><pre class="programlisting">
mysql:host=localhost;dbname=testdb

       </pre><p>

          More complete examples:

</p><pre class="programlisting">
mysql:host=localhost;port=3307;dbname=testdb
mysql:unix_socket=/tmp/mysql.sock;dbname=testdb

       </pre><p>
        </p></div><p>
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-php"></a>20.11.4. Connector/PHP</h3></div></div></div><p>
      The MySQL Connector/PHP is a version of the
      <code class="literal">mysql</code> and <code class="literal">mysqli</code> extensions
      for PHP optimized for the Windows operating system. Later versions
      of the main PHP <code class="literal">mysql</code>/<code class="literal">mysqli</code>
      drivers are compatible with Windows and a separate, Windows
      specific driver is no longer required.
    </p><p>
      For PHP for all platforms, including Windows, you should use the
      <code class="literal">mysql</code> or <code class="literal">mysqli</code> extensions
      shipped with the PHP sources. See <a href="connectors-apis.html#apis-php" title="20.11. MySQL PHP API">Section 20.11, “MySQL PHP API”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="apis-php-problems"></a>20.11.5. Common Problems with MySQL and PHP</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">Error: Maximum Execution Time Exceeded</code>:
          This is a PHP limit; go into the <code class="filename">php.ini</code>
          file and set the maximum execution time up from 30 seconds to
          something higher, as needed. It is also not a bad idea to
          double the RAM allowed per script to 16MB instead of 8MB.
        </p></li><li><p>
          <code class="literal">Fatal error: Call to unsupported or undefined
          function mysql_connect() in ...</code>: This means that
          your PHP version isn't compiled with MySQL support. You can
          either compile a dynamic MySQL module and load it into PHP or
          recompile PHP with built-in MySQL support. This process is
          described in detail in the PHP manual.
        </p></li><li><p>
          <code class="literal">Error: Undefined reference to 'uncompress'</code>:
          This means that the client library is compiled with support
          for a compressed client/server protocol. The fix is to add
          <code class="option">-lz</code> last when linking with
          <code class="option">-lmysqlclient</code>.
        </p></li><li><p>
          <code class="literal">Error: Client does not support authentication
          protocol</code>: This is most often encountered when trying
          to use the older <code class="literal">mysql</code> extension with MySQL
          4.1.1 and later. Possible solutions are: downgrade to MySQL
          4.0; switch to PHP 5 and the newer <code class="literal">mysqli</code>
          extension; or configure the MySQL server with
          <a href="server-administration.html#option_mysqld_old-passwords"><code class="option">--old-passwords</code></a>. (See
          <a href="error-handling.html#old-client" title="B.1.2.4. Client does not support authentication protocol">Section B.1.2.4, “<code class="literal">Client does not support authentication protocol</code>”</a>, for more information.)
        </p></li></ul></div><p>
      Those with PHP4 legacy code can make use of a compatibility layer
      for the old and new MySQL libraries, such as this one:
      <a href="http://www.coggeshall.org/oss/mysql2i" target="_top">http://www.coggeshall.org/oss/mysql2i</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="php-mysql-mysqli"></a>20.11.6. Enabling Both <code class="literal">mysql</code> and <code class="literal">mysqli</code> in
      PHP</h3></div></div></div><p>
      If you're experiencing problems with enabling both the
      <code class="literal">mysql</code> and the <code class="literal">mysqli</code>
      extension when building PHP on Linux yourself, you should try the
      following procedure.
    </p><div class="orderedlist"><ol type="1"><li><p>
          Configure PHP like this:

</p><pre class="programlisting">./configure --with-mysqli=/usr/bin/mysql_config --with-mysql=/usr  
</pre><p>
        </p></li><li><p>
          Edit the <code class="filename">Makefile</code> and search for a line
          that starts with <code class="literal">EXTRA_LIBS</code>. It might look
          like this (all on one line):

</p><pre class="programlisting">EXTRA_LIBS = -lcrypt -lcrypt -lmysqlclient -lz -lresolv -lm -ldl -lnsl
-lxml2 -lz -lm -lxml2 -lz -lm -lmysqlclient -lz -lcrypt -lnsl -lm
-lxml2 -lz -lm -lcrypt -lxml2 -lz -lm -lcrypt
</pre><p>

          Remove all duplicates, so that the line looks like this (all
          on one line):

</p><pre class="programlisting">EXTRA_LIBS = -lcrypt -lcrypt -lmysqlclient -lz -lresolv -lm -ldl -lnsl
-lxml2
</pre><p>
        </p></li><li><p>
          Build and install PHP:

</p><pre class="programlisting">make
make install
</pre><p>
        </p></li></ol></div><p class="mnmas-kb"><b>MySQL Enterprise</b>
        MySQL Enterprise subscribers will find more information about
        the mysqli extension in the Knowledge Base articles found at
        <a href="https://kb.mysql.com/search.php?cat=search&amp;cat=search&amp;keywords=mysqli&amp;go=Go" target="_top">
        mysqli</a>. Access to the MySQL Knowledge Base collection of
        articles is one of the advantages of subscribing to MySQL
        Enterprise. For more information, see
        <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="apis-perl"></a>20.12. MySQL Perl API</h2></div></div></div><a class="indexterm" name="id3772074"></a><a class="indexterm" name="id3772086"></a><a class="indexterm" name="id3772095"></a><a class="indexterm" name="id3772104"></a><p>
    The Perl <code class="literal">DBI</code> module provides a generic interface
    for database access. You can write a DBI script that works with many
    different database engines without change. To use DBI, you must
    install the <code class="literal">DBI</code> module, as well as a DataBase
    Driver (DBD) module for each type of server you want to access. For
    MySQL, this driver is the <code class="literal">DBD::mysql</code> module.
  </p><p>
    Perl DBI is the recommended Perl interface. It replaces an older
    interface called <code class="literal">mysqlperl</code>, which should be
    considered obsolete.
  </p><p>
    Installation instructions for Perl DBI support are given in
    <a href="installing.html#perl-support" title="2.14. Perl Installation Notes">Section 2.14, “Perl Installation Notes”</a>.
  </p><p>
    DBI information is available at the command line, online, or in
    printed form:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        Once you have the <code class="literal">DBI</code> and
        <code class="literal">DBD::mysql</code> modules installed, you can get
        information about them at the command line with the
        <code class="literal">perldoc</code> command:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>perldoc DBI</code></strong>
shell&gt; <strong class="userinput"><code>perldoc DBI::FAQ</code></strong>
shell&gt; <strong class="userinput"><code>perldoc DBD::mysql</code></strong>
</pre><p>
        You can also use <code class="literal">pod2man</code>,
        <code class="literal">pod2html</code>, and so forth to translate this
        information into other formats.
      </p></li><li><p>
        For online information about Perl DBI, visit the DBI Web site,
        <a href="http://dbi.perl.org/" target="_top">http://dbi.perl.org/</a>. That site hosts a general
        DBI mailing list. Sun Microsystems, Inc. hosts a list
        specifically about <code class="literal">DBD::mysql</code>; see
        <a href="introduction.html#mailing-lists" title="1.5.1. MySQL Mailing Lists">Section 1.5.1, “MySQL Mailing Lists”</a>.
      </p></li><li><p>
        For printed information, the official DBI book is
        <em class="citetitle">Programming the Perl DBI</em> (Alligator
        Descartes and Tim Bunce, O'Reilly &amp; Associates, 2000).
        Information about the book is available at the DBI Web site,
        <a href="http://dbi.perl.org/" target="_top">http://dbi.perl.org/</a>.
      </p><p>
        For information that focuses specifically on using DBI with
        MySQL, see <em class="citetitle">MySQL and Perl for the Web</em>
        (Paul DuBois, New Riders, 2001). This book's Web site is
        <a href="http://www.kitebird.com/mysql-perl/" target="_top">http://www.kitebird.com/mysql-perl/</a>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="apis-cplusplus"></a>20.13. MySQL C++ API</h2></div></div></div><a class="indexterm" name="id3772318"></a><a class="indexterm" name="id3772327"></a><p>
    <code class="literal">MySQL++</code> is a MySQL API for C++. Warren Young has
    taken over this project. More information can be found at
    <a href="http://tangentsoft.net/mysql++/doc" target="_top">http://tangentsoft.net/mysql++/doc</a>.
  </p><p class="mnmas-kb"><b>MySQL Enterprise</b>
      MySQL Enterprise subscribers will find more information about
      using C++ with the MySQL API in the MySQL Knowledge Base. articles
      found at
      <a href="https://kb.mysql.com/search.php?cat=search&amp;pagerRow=0&amp;category=18" target="_top">
      C++</a>. Access to the MySQL Knowledge Base collection of
      articles is one of the advantages of subscribing to MySQL
      Enterprise. For more information, see
      <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="apis-python"></a>20.14. MySQL Python API</h2></div></div></div><a class="indexterm" name="id3772394"></a><p>
    <code class="literal">MySQLdb</code> provides MySQL support for Python,
    compliant with the Python DB API version 2.0. It can be found at
    <a href="http://sourceforge.net/projects/mysql-python/" target="_top">http://sourceforge.net/projects/mysql-python/</a>.
  </p><p class="mnmas-kb"><b>MySQL Enterprise</b>
      MySQL Enterprise subscribers will find more information about
      using Python with the MySQL API in the MySQL Knowledge Base
      articles found at
      <a href="https://kb.mysql.com/search.php?cat=search&amp;category=24" target="_top">
      Python</a>. Access to the MySQL Knowledge Base collection of
      articles is one of the advantages of subscribing to MySQL
      Enterprise. For more information, see
      <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="apis-ruby"></a>20.15. MySQL Ruby APIs</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="connectors-apis.html#apis-ruby-mysqlruby">20.15.1. The MySQL/Ruby API</a></span></dt><dt><span class="section"><a href="connectors-apis.html#apis-ruby-rubymysql">20.15.2. The Ruby/MySQL API</a></span></dt></dl></div><a class="indexterm" name="id3772461"></a><p>
    Two APIs available for Ruby programmers. The MySQL/Ruby API is based
    on the <code class="literal">libmysql</code> API library. The Ruby/MySQL API
    is written to use the native MySQL network protocol (a native
    driver).
  </p><p>
    For more information on Ruby, see
    <a href="http://www.ruby-lang.org" target="_top">Ruby Programming
    Language</a>.
  </p><p>
    For information on installing and using the MySQL/Ruby API, see
    <a href="connectors-apis.html#apis-ruby-mysqlruby" title="20.15.1. The MySQL/Ruby API">Section 20.15.1, “The MySQL/Ruby API”</a>.
  </p><p>
    For information on installing and using the Ruby/MySQL API, see
    <a href="connectors-apis.html#apis-ruby-rubymysql" title="20.15.2. The Ruby/MySQL API">Section 20.15.2, “The Ruby/MySQL API”</a>.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="apis-ruby-mysqlruby"></a>20.15.1. The MySQL/Ruby API</h3></div></div></div><p>
      The MySQL/Ruby module provides access to MySQL databases using
      Ruby through <code class="literal">libmysql</code>.
    </p><p>
      For information on installing the module, and the functions
      exposed, see
      <a href="http://tmtm.org/en/mysql/ruby/" target="_top">MySQL/Ruby</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="apis-ruby-rubymysql"></a>20.15.2. The Ruby/MySQL API</h3></div></div></div><p>
      The Ruby/MySQL module provides access to MySQL databases using
      Ruby through a native driver interface using the MySQL network
      protocol.
    </p><p>
      For information on installing the module, and the functions
      exposed, see
      <a href="http://tmtm.org/en/ruby/mysql/README_en.html" target="_top">Ruby/MySQL</a>.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="apis-tcl"></a>20.16. MySQL Tcl API</h2></div></div></div><a class="indexterm" name="id3772582"></a><p>
    <code class="literal">MySQLtcl</code> is a simple API for accessing a MySQL
    database server from the Tcl programming language. It can be found
    at <a href="http://www.xdobry.de/mysqltcl/" target="_top">http://www.xdobry.de/mysqltcl/</a>.
  </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="apis-eiffel"></a>20.17. MySQL Eiffel Wrapper</h2></div></div></div><a class="indexterm" name="id3772619"></a><a class="indexterm" name="id3772628"></a><p>
    Eiffel MySQL is an interface to the MySQL database server using the
    Eiffel programming language, written by Michael Ravits. It can be
    found at
    <a href="http://efsa.sourceforge.net/archive/ravits/mysql.htm" target="_top">http://efsa.sourceforge.net/archive/ravits/mysql.htm</a>.
  </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="information-schema.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="extending-mysql.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 19. <code class="literal">INFORMATION_SCHEMA</code> Tables </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 21. Extending MySQL</td></tr></table></div></body></html>
