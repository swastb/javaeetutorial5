<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Chapter 15. MySQL Enterprise Monitor</title><link rel="stylesheet" href="mysql-html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="MySQL 6.0 Reference Manual"><link rel="up" href="index.html" title="MySQL 6.0 Reference Manual"><link rel="prev" href="ha-overview.html" title="Chapter 14. High Availability and Scalability"><link rel="next" href="replication.html" title="Chapter 16. Replication"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 15. MySQL Enterprise Monitor</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ha-overview.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="replication.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="mem-introduction"></a>Chapter 15. MySQL Enterprise Monitor</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="mem-introduction.html#mem-overview">15.1. An Overview of the Service</a></span></dt><dd><dl><dt><span class="section"><a href="mem-introduction.html#mem-service-architecture">15.1.1. The Service Architecture</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-features">15.1.2. Service Features</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-security">15.1.3. Security</a></span></dt></dl></dd><dt><span class="section"><a href="mem-introduction.html#mem-conventions">15.2. Conventions Used in This Document</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-install">15.3. Installation and Upgrades</a></span></dt><dd><dl><dt><span class="section"><a href="mem-introduction.html#mem-user-roles">15.3.1. User Roles</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-install-server">15.3.2. Service Manager Installation</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-install-agent">15.3.3. Monitor Agent Installation</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-unattended-installation">15.3.4. Unattended Installation</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-install-post-installation">15.3.5. Post-Installation Considerations</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-upgradeorchange">15.3.6. Upgrading, Re-Installing or Changing Your Installation</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-uninstall">15.3.7. Uninstalling the MySQL Enterprise Monitor</a></span></dt></dl></dd><dt><span class="section"><a href="mem-introduction.html#mem-deployment">15.4. Deploying MySQL Enterprise Service Manager</a></span></dt><dd><dl><dt><span class="section"><a href="mem-introduction.html#mem-deployment-backup">15.4.1. Backing up MySQL Enterprise Service Manager</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-deployment-migration-2-0">15.4.2. Migrating 1.3.x Historical Data to MySQL Enterprise Monitor 2.0</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-deployment-maintenance">15.4.3. Regular MySQL Enterprise Monitor Maintenance</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-deployment-config">15.4.4. Choosing Suitable MySQL Enterprise Service Manager Hardware Configurations</a></span></dt></dl></dd><dt><span class="section"><a href="mem-introduction.html#mem-dashboard">15.5. MySQL Enterprise Dashboard</a></span></dt><dd><dl><dt><span class="section"><a href="mem-introduction.html#mem-server-tree">15.5.1. The Server Tree</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-monitor-page-graphs">15.5.2. The Server Graphs and Critical Events</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-heat-chart">15.5.3. The Heat Chart</a></span></dt></dl></dd><dt><span class="section"><a href="mem-introduction.html#mem-dashboard-settings">15.6. The Settings Page</a></span></dt><dd><dl><dt><span class="section"><a href="mem-introduction.html#mem-global-settings">15.6.1. Global Settings</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-user-preferences">15.6.2. User Preferences</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-managing-servers">15.6.3. Manage Servers</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-managing-users">15.6.4. Managing Users</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-notification-groups">15.6.5. Manage Notification Groups</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-logs">15.6.6. Logs</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-product-info">15.6.7. The Product Information Screen</a></span></dt></dl></dd><dt><span class="section"><a href="mem-introduction.html#mem-advisors">15.7. The Advisors Page</a></span></dt><dd><dl><dt><span class="section"><a href="mem-introduction.html#mem-update-advisors">15.7.1. Installing and Updating Advisors</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-scheduling-rules">15.7.2. Scheduling Rules</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-editing-built-in-rules">15.7.3. Editing Built-in Rules</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-creating-advisors-and-rules">15.7.4. Creating Advisors and Rules</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-unscheduling-advisors">15.7.5. Disabling and Unscheduling Rules</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-advisor-blackouts">15.7.6. Advisor Blackout Periods</a></span></dt></dl></dd><dt><span class="section"><a href="mem-introduction.html#mem-events">15.8. The Events Page</a></span></dt><dd><dl><dt><span class="section"><a href="mem-introduction.html#mem-closing-events">15.8.1. Closing an Event</a></span></dt></dl></dd><dt><span class="section"><a href="mem-introduction.html#mem-graphs">15.9. The Graphs Page</a></span></dt><dd><dl><dt><span class="section"><a href="mem-introduction.html#mem-available-graphs">15.9.1. Displaying Graphs</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-setting-graph-interval">15.9.2. Setting an Interval</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-setting-graph-time-span">15.9.3. Setting a Time Span</a></span></dt></dl></dd><dt><span class="section"><a href="mem-introduction.html#mem-query-analysis">15.10. The Query Analyzer Page</a></span></dt><dd><dl><dt><span class="section"><a href="mem-introduction.html#mem-query-analysis-enabling">15.10.1. Enabling Query Analyzer</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-query-analysis-queries">15.10.2. Getting Detailed Query Information</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-query-analysis-filtering">15.10.3. Filtering Query Analyzer Data</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-query-analysis-using">15.10.4. Using Query Analyzer Data</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-query-analysis-troubleshooting">15.10.5. Troubleshooting Query Analyzer</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-query-analysis-settings">15.10.6. Query Analyzer Settings</a></span></dt></dl></dd><dt><span class="section"><a href="mem-introduction.html#mem-replication">15.11. The Replication Page</a></span></dt><dd><dl><dt><span class="section"><a href="mem-introduction.html#mem-replication-details">15.11.1. Replication Page Details</a></span></dt></dl></dd><dt><span class="section"><a href="mem-introduction.html#mem-faq">15.12. MySQL Enterprise Monitor Frequently Asked Questions</a></span></dt></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      MySQL Enterprise subscription, MySQL Enterprise Monitor, MySQL
      Replication Monitor, and MySQL Query Analyzer are only available
      to commercial customers. To learn more, see:
      <a href="http://www.mysql.com/products/enterprise/features.html" target="_top">http://www.mysql.com/products/enterprise/features.html</a>.
    </p></div><p>
    The MySQL Enterprise Monitor serves as an automated assistant for MySQL database
    administrators. This service is designed to help administrators with
    their day-to-day tasks by monitoring MySQL servers and identifying
    potential problems. These features are designed to save the database
    administrator's time and effort by providing the information you
    need through a simplified interface.
  </p><p>
    An extension of existing MySQL Enterprise services, MySQL Enterprise Monitor
    monitors enterprise database environments and provides expert advice
    on how customers can tighten security and optimize the performance
    and uptime of their MySQL servers.
  </p><p>
    MySQL Enterprise Monitor helps administrators:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        Intelligently stay up to date with releases and bug fixes
      </p></li><li><p>
        Know what's going on with their system
      </p></li><li><p>
        Manage day-to-day database maintenance tasks
      </p></li><li><p>
        Improve the performance of their system
      </p></li><li><p>
        Manage and prevent crises
      </p></li></ul></div><p>
    The MySQL Enterprise Monitor was designed to tackle the job of managing the
    performance of any number of MySQL database servers, regardless of
    their physical or geographical location. Although MySQL Enterprise Monitor can
    easily track just a handful of MySQL servers, the service is
    specifically designed to greatly curtail the time it takes to get a
    handle on the availability and performance levels of many database
    servers at once.
  </p><p>
    The MySQL Enterprise Monitor does this by providing an web-based interface —
    called the Enterprise Dashboard — that serves as the portal
    for viewing information about your MySQL database servers. MySQL
    professionals can manage all their servers by group or individually
    if need be.
  </p><p>
    The Enterprise Dashboard web interface does not have to be installed
    on individual desktops, but is instead available from a centrally
    located machine that serves as the main location for the Monitoring
    and Advisory service.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mem-overview"></a>15.1. An Overview of the Service</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-service-architecture">15.1.1. The Service Architecture</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-features">15.1.2. Service Features</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-security">15.1.3. Security</a></span></dt></dl></div><p>
      The MySQL Enterprise Monitor is a collection of components that work together to
      monitor and help administer your MySQL server installations. This
      service includes server management agents, advisors, and a central
      MySQL Enterprise Service Manager, all working in tandem with the MySQL Enterprise
      to keep your MySQL servers secure and up to date. All of this is
      controlled through the MySQL Enterprise Dashboard — a lightweight
      web-based interface that gives you complete control of your MySQL
      servers from any location.
    </p><div class="figure"><a name="fig-mem-overview"></a><p class="title"><b>Figure 15.1. MySQL Enterprise Monitor Architecture</b></p><div class="mediaobject"><img src="images/mem-overview.png" width="942" height="512" alt="MySQL Enterprise Monitor Architecture"></div></div><p>
      The service is made up of a number of components, including the
      Monitor Agent (MySQL Enterprise Monitor Agent), the Service Manager
      (MySQL Enterprise Service Manager), the Enterprise Dashboard, the Repository and
      the Advisors.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-service-architecture"></a>15.1.1. The Service Architecture</h3></div></div></div><p>
        The MySQL Enterprise Monitor is powered by a distributed web-based application
        that is deployed within the confines of the corporate firewall.
        The Enterprise Dashboard provides the interface to the server
        data, advisor notifications, live information and communication
        with the MySQL Enterprise Update Service.
      </p><p>
        Subscribers are kept up to date about the latest releases of the
        MySQL server or issues that may affect their specific
        implementation of MySQL by using the MySQL Enterprise Update
        Service. This same mechanism is used to notify MySQL Enterprise Monitor users of
        updates to the application or to the MySQL Advisors and Rules.
        The various components are described below.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <span class="bold"><strong>Monitor Agent</strong></span>
          </p><p>
            Monitor Agents are the foot soldiers of the MySQL Enterprise Monitor; they
            monitor each MySQL server. Running as a Windows service or
            Unix daemon, the Agent uses a combination of MySQL specific
            commands, SQL queries, and custom scripts to collect and
            report MySQL server or operating system (OS) specific data.
            The Monitor Agent initiates a “<span class="quote">heartbeat</span>” to
            the Service Manager on a regular basis to ensure specific
            MySQL server and OS level data collections are current.
          </p><p>
            In the overall architecture, the Monitor Agent is the only
            component of the MySQL Enterprise Monitor that establishes or maintains a
            connection with the monitored MySQL Server. As with any
            MySQL client, the Monitor Agent is authenticated on the
            monitored MySQL server and requires a user name and password
            to establish a connection.
          </p><p>
            In addition, the MySQL Enterprise Monitor Agent also provides a proxy
            service that allows for information about queries to be
            captured and reported as part of the Query Analyzer
            functionality. The MySQL Enterprise Monitor Agent accepts client connections
            and forwards the SQL statements on to the server and returns
            the results. In the background, the agent is collecting
            information about the query execution, row counts, times and
            other data so that queries and their execution can be
            monitored.
          </p></li><li><p>
            <span class="bold"><strong>Service Manager</strong></span>
          </p><p>
            The Service Manager is the heart and soul of the MySQL Enterprise Monitor.
            It is built on a collection of Java services hosted on a
            single Windows or Unix server. The Service Manager interacts
            with all of the Monitor Agents under its domain to collect
            MySQL server and OS level data for each of the monitored
            MySQL servers.
          </p><p>
            The Service Manager performs many duties including:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                Enterprise Dashboard, the main interface to the
                MySQL Enterprise Service Manager.
              </p></li><li><p>
                Autodiscovery of monitored MySQL Servers.
              </p></li><li><p>
                Creation and management of Monitor Agent tasks.
              </p></li><li><p>
                Storage of data collections from Monitor Agents.
              </p></li><li><p>
                Monitoring of key MySQL server and OS level metric data
                collections.
              </p></li><li><p>
                Reporting MySQL best practice events and violations.
              </p></li><li><p>
                Providing MySQL expert advice for MySQL best practice
                violations.
              </p></li><li><p>
                Autodiscovery of replication topology (Not available for
                all subscription levels)
              </p></li></ul></div></li><li><p>
            <span class="bold"><strong>The Repository</strong></span>
          </p><p>
            The Repository is built on MySQL
            5.0.<em class="replaceable"><code>x</code></em> and is used to store MySQL
            server and OS level data collections for each of the
            monitored MySQL Servers. This information is used by the
            Service Manager to evaluate and report the health and status
            of the monitored MySQL environment(s).
          </p></li><li><p>
            <span class="bold"><strong>The Enterprise Dashboard</strong></span>
          </p><p>
            The MySQL Enterprise web client provides the graphical user
            interface (GUI) for the MySQL Enterprise Monitor. This interface is the
            primary means of monitoring the state of your MySQL servers,
            identifying rule violations and providing advice on how best
            to address and correct any underlying issues.
          </p><p>
            This interface also provides an easy means of configuring
            advisors, adding users, creating notification groups, and
            receiving updates from MySQL Enterprise.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-features"></a>15.1.2. Service Features</h3></div></div></div><p>
        The key features of the MySQL Enterprise Monitor can be summarized as follows:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Group-level or Server-level management options
          </p></li><li><p>
            Enterprise Dashboard for managing all MySQL Servers from a
            consolidated console
          </p></li><li><p>
            Monitoring page for “<span class="quote">at a glance</span>” global health
            check of key systems
          </p></li><li><p>
            MySQL-provided Advisors and Advisor Rules for enforcing
            MySQL Best Practices
          </p></li><li><p>
            Advisor Rule Scheduling for unattended operations
          </p></li><li><p>
            Customizable Thresholds and Alerts for identifying Advisor
            Rule violations
          </p></li><li><p>
            User-Defined Advisor Rules
          </p></li><li><p>
            Event/Alert History browser for researching advisor-specific
            events and annotations
          </p></li><li><p>
            Query Analyzer functionality allowing you to monitor the
            execution times, row counts and other data about queries
            executed on your MySQL server.
          </p></li></ul></div><p>
        These features are presented through the MySQL Enterprise Dashboard which
        is made up of six main pages:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            The <span class="guilabel">Monitor</span> page comprises:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                The <span class="guilabel">Server Tree</span>: Easily navigate
                monitored servers
              </p></li><li><p>
                The <span class="guilabel">Graphing</span>: This capability is
                built in so you can quickly assess critical functions
                such as activity, performance metrics, and number of
                connections
              </p></li><li><p>
                The <span class="guilabel">Heat Chart</span>: Color-coded buttons
                provide key operating system and database metrics
              </p></li></ul></div></li><li><p>
            The <span class="guilabel">Advisors</span> page
          </p><p>
            This page shows the advisors that are currently scheduled.
            There are advisors for a variety of topics such as security
            and indexing. Users can add, edit, or create their own
            advisors.
          </p></li><li><p>
            The <span class="guilabel">Events</span> page
          </p><p>
            This page shows rule violations, indicating the server,
            severity, and time of occurrence. A number of filter options
            are available, allowing various views of events.
          </p></li><li><p>
            The <span class="guilabel">Graphs</span> page
          </p><p>
            Use this page to view all the available graphs and to adjust
            the scale of the graphs, for a more or less detailed view as
            the situation requires.
          </p></li><li><p>
            The <span class="guilabel">Query Analyzer</span> page
          </p></li><li><p>
            The <span class="guilabel">Replication</span> page
          </p><p>
            Use this page to keep track of your masters and their slaves
            (Not available for all subscription levels)
          </p></li><li><p>
            The <span class="guilabel">Settings</span> page
          </p><p>
            On this page you configure servers, users, email addresses,
            and notification groups. Entering a user name and password
            for MySQL Enterprise provides automatic updates.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-security"></a>15.1.3. Security</h3></div></div></div><p>
        Using the Tomcat/Apache web server for the user interface allows
        an administrator to configure the web server to meet any
        security regulations. The MySQL Enterprise Monitor architecture is designed to
        be as secure as possible, even when monitoring systems outside
        of the local network.
      </p><p>
        Communications between the MySQL Enterprise Monitor Agent and MySQL Enterprise Service Manager
        can be protected by Secure Socket Layer (SSL) encryption and
        server and agent can use SSL certificates to provide
        authentication and prevent spoofing.
      </p><p>
        The MySQL Enterprise Monitor Agent is like a web browser—it is an HTTP
        client application that initiates all communication with the
        MySQL Enterprise Service Manager. If the server requires action from the agent,
        it must wait until the agent next initiates contact and sends
        its request in a response. This means you do not need to open an
        inbound port on the machine on which the agent is running
        because it does not listen for requests. However, an outbound
        port must be open for the agent to contact the MySQL Enterprise Service Manager.
      </p><p>
        As an additional security feature, each Agent can have a
        separate Advisory Service login which minimizes exposure should
        any one agent be compromised.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mem-conventions"></a>15.2. Conventions Used in This Document</h2></div></div></div><p>
      This document uses certain typographical conventions:
    </p><a class="indexterm" name="id3506766"></a><a class="indexterm" name="id3506776"></a><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">Text in this style</code> is used for SQL
          statements; database, table, and column names; program
          listings and source code; and environment variables. Example:
          “<span class="quote">To reload the grant tables, use the <code class="literal">FLUSH
          PRIVILEGES</code> statement.</span>”
        </p></li><li><p>
          <strong class="userinput"><code>Text in this style</code></strong> indicates input that
          you type in examples.
        </p></li><li><p>
          <span><strong class="command">Text in this style</strong></span> indicates the names of
          executable programs and scripts, examples being
          <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> (the MySQL command line client
          program) and <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> (the MySQL server
          executable).
        </p></li><li><p>
          <em class="replaceable"><code>Text in this style</code></em> is used for
          variable input for which you should substitute a value of your
          own choosing.
        </p></li><li><p>
          File names and directory names are written like this:
          “<span class="quote">The global <code class="filename">my.cnf</code> file is located
          in the <code class="filename">/etc</code> directory.</span>”
        </p></li><li><p>
          Character sequences are written like this: “<span class="quote">To specify a
          wildcard, use the ‘<code class="literal">%</code>’
          character.</span>”
        </p></li><li><p>
          <span class="emphasis"><em>Text in this style</em></span> is used for emphasis.
        </p></li><li><p>
          <span class="bold"><strong>Text in this style</strong></span> is used in
          table headings and to convey especially strong emphasis.
        </p></li></ul></div><p>
      When commands are shown that are meant to be executed from within
      a particular program, the prompt shown preceding the command
      indicates which command to use. For example,
      <code class="literal">shell&gt;</code> indicates a command that you execute
      from your login shell or from the command line in Windows:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>type a shell command here</code></strong>
</pre><p>
      The “<span class="quote">shell</span>” is your command interpreter. On Unix,
      this is typically a program such as <span><strong class="command">sh</strong></span>,
      <span><strong class="command">csh</strong></span>, or <span><strong class="command">bash</strong></span>. On Windows,
      the equivalent program is <span><strong class="command">command.com</strong></span> or
      <span><strong class="command">cmd.exe</strong></span>, typically run in a console window.
    </p><p>
      When you enter a command or statement shown in an example, do not
      type the prompt shown in the example.
    </p><p>
      Sometimes, what appears on one line in a console window cannot be
      represented in the documentation on a single line. In cases such
      as this the character ‘<code class="literal">»</code>’ is
      used. For example:
    </p><pre class="programlisting">Please specify the directory where the MySQL Enterprise Monitor Â»
 will be installed.
</pre><p>
      Where Unix commands are concerned, the continuation character
      ‘<code class="literal">\</code>’ is used. Doing this allows
      commands to be copied and pasted to the command line verbatim. For
      example:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>/opt/mysql/enterprise/agent/bin/mysql-monitor-agent -f \
 /opt/mysql/enterprise/agent/etc/mysql-monitor-agent.ini</code></strong>
</pre><p>
      SQL keywords are not case sensitive and may be written in either
      case. This document uses uppercase.
    </p><p>
      In syntax descriptions, square brackets
      (‘<code class="literal">[</code>’ and
      ‘<code class="literal">]</code>’) indicate optional words or
      clauses. For example, in the following statement, <code class="literal">IF
      EXISTS</code> is optional:
    </p><pre class="programlisting">DROP TABLE [IF EXISTS] <em class="replaceable"><code>tbl_name</code></em>
</pre><p>
      When a syntax element consists of a number of alternatives, the
      alternatives are separated by vertical bars
      (‘<code class="literal">|</code>’). When one member from a set
      of choices <span class="emphasis"><em>may</em></span> be chosen, the alternatives
      are listed within square brackets
      (‘<code class="literal">[</code>’ and
      ‘<code class="literal">]</code>’):
    </p><pre class="programlisting">TRIM([[BOTH | LEADING | TRAILING] [<em class="replaceable"><code>remstr</code></em>] FROM] <em class="replaceable"><code>str</code></em>)
</pre><p>
      When one member from a set of choices <span class="emphasis"><em>must</em></span> be
      chosen, the alternatives are listed within braces
      (‘<code class="literal">{</code>’ and
      ‘<code class="literal">}</code>’):
    </p><pre class="programlisting">{DESCRIBE | DESC} <em class="replaceable"><code>tbl_name</code></em> [<em class="replaceable"><code>col_name</code></em> | <em class="replaceable"><code>wild</code></em>]
</pre><p>
      An ellipsis (<code class="literal">...</code>) indicates the omission of a
      section of a statement, typically to provide a shorter version of
      more complex syntax. For example, <code class="literal">INSERT ...
      SELECT</code> is shorthand for the form of
      <code class="literal">INSERT</code> statement that is followed by a
      <code class="literal">SELECT</code> statement.
    </p><p>
      An ellipsis can also indicate that the preceding syntax element of
      a statement may be repeated. In the following example, multiple
      <em class="replaceable"><code>reset_option</code></em> values may be given, with
      each of those after the first preceded by commas:
    </p><pre class="programlisting">RESET <em class="replaceable"><code>reset_option</code></em> [,<em class="replaceable"><code>reset_option</code></em>] ...
</pre><p>
      Commands for setting shell variables are shown using Bourne shell
      syntax. For example, the sequence to set the <code class="literal">CC</code>
      environment variable and run the <span><strong class="command">configure</strong></span>
      command looks like this in Bourne shell syntax:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>CC=gcc ./configure</code></strong>
</pre><a class="indexterm" name="id3507269"></a><a class="indexterm" name="id3507278"></a><p>
      If you are using <span><strong class="command">csh</strong></span> or
      <span><strong class="command">tcsh</strong></span>, you must issue commands somewhat
      differently:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>setenv CC gcc</code></strong>
shell&gt; <strong class="userinput"><code>./configure</code></strong>
</pre><p>
      Throughout this document the term
      ‘<code class="literal">Unix</code>’ is used to describe any Unix
      or Unix-like operating system. For an up-to-date list of operating
      systems supported by the MySQL Enterprise Monitor please see the
      <a href="https://enterprise.mysql.com/" target="_top">MySQL Enterprise web
      site</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mem-install"></a>15.3. Installation and Upgrades</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-user-roles">15.3.1. User Roles</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-install-server">15.3.2. Service Manager Installation</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-install-agent">15.3.3. Monitor Agent Installation</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-unattended-installation">15.3.4. Unattended Installation</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-install-post-installation">15.3.5. Post-Installation Considerations</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-upgradeorchange">15.3.6. Upgrading, Re-Installing or Changing Your Installation</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-uninstall">15.3.7. Uninstalling the MySQL Enterprise Monitor</a></span></dt></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      MySQL Enterprise subscription, MySQL Enterprise Monitor, MySQL
      Replication Monitor, and MySQL Query Analyzer are only available
      to commercial customers. To learn more, see:
      <a href="http://www.mysql.com/products/enterprise/features.html" target="_top">http://www.mysql.com/products/enterprise/features.html</a>.
    </p></div><p>
    This chapter describes the process of installing the MySQL Enterprise Monitor on all
    operating systems. A working installation requires the installation
    of a MySQL Enterprise Service Manager, the MySQL Enterprise Advisors and one or more
    MySQL Enterprise Monitor Agents. Simply described, the agent inspects the MySQL
    server it is monitoring, reports to the Service Manager, and the
    results are interpreted by the advisors and displayed in the
    MySQL Enterprise Dashboard for viewing in a web browser.
  </p><p>
    One Monitor Agent is installed for each MySQL server that is being
    monitored. The Monitor Agent usually runs on the same machine that
    hosts the monitored MySQL server but it may run on any machine that
    has access to both the monitored MySQL server and the
    MySQL Enterprise Dashboard. The agent reports its findings to the Service
    Manager and these results are interpreted by Advisors and displayed
    in the dashboard. The end user opens a web browser to view the
    information presented in the dashboard. The Service Manager and
    dashboard run on the same machine and both have access to a local
    MySQL server installed as part of the MySQL Enterprise Monitor. This server is known
    as the repository and provides storage for the data provided by the
    agent.
  </p><p>
    Installation is a three step process:
  </p><div class="orderedlist"><ol type="1"><li><p>
        Install and start the Service Manager on the monitoring system.
      </p></li><li><p>
        Configure the Service Manager and install the Advisors.
      </p></li><li><p>
        Install and start the Monitor Agent to monitor the targeted
        MySQL server.
      </p></li></ol></div><p>
    <span class="bold"><strong>Installation Requirements</strong></span>
  </p><p>
    The Service Manager is available for Windows, Mac OS X, and a
    variety of Unix and Linux operating systems.
  </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      The Mac OS X Service Manager is only supported on Intel
      architecture. However, the Mac OS X agent is supported for both
      Intel and the PowerPC.
    </p></div><p>
    To install the MySQL Enterprise Monitor on Windows requires approximately 260 MB of
    space and approximately 450 MB on Unix, Linux and Mac OS X. The
    installer checks that there is enough free space on the destination
    disk. However, disk space usage will increase with time since the
    repository stores historical data.
  </p><p>
    The minimum recommended requirements for the service manager are at
    least a 2GHz CPU and at least 1GB of RAM. If you are monitoring a
    large number of services, then there will be an increased load on
    the server manager. Running the service manager on a machine that is
    already running other tasks is only recommended if you are
    monitoring a small number of agents. For monitor five or more agents
    simultaneously, you should dedicate a machine to the process.
  </p><p>
    For more information, see <a href="mem-introduction.html#mem-deployment-config" title="15.4.4. Choosing Suitable MySQL Enterprise Service Manager Hardware Configurations">Section 15.4.4, “Choosing Suitable MySQL Enterprise Service Manager Hardware Configurations”</a>.
  </p><p>
    The Monitor Agent is available for a wide range of operating
    systems. For an up-to-date list please see the
    <a href="https://enterprise.mysql.com/" target="_top">MySQL Enterprise web
    site</a>. The agent can be used to monitor any MySQL server from
    version 4.0.x through 6.0.x.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-user-roles"></a>15.3.1. User Roles</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-existing-users">15.3.1.1. Existing Users</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-created-users">15.3.1.2. User Created During Installation</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-users-created-first-login">15.3.1.3. Users Created on First Log-in</a></span></dt></dl></div><p>
      Prior to installation you will need to have at hand credentials
      for access to the MySQL server you plan to monitor and also your
      MySQL Enterprise credentials. <span class="emphasis"><em>During</em></span>
      installation and when first logging in, you will set up a variety
      of users with different roles and credentials. This can become
      confusing. This section outlines the various users associated with
      the MySQL Enterprise Monitor and gives a brief description of their roles.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-existing-users"></a>15.3.1.1. Existing Users</h4></div></div></div><p>
        The <span class="bold"><strong>MySQL Enterprise user</strong></span>
        – These are the credentials you use to log in to the
        MySQL Enterprise web site. You will need them in order to
        acquire the Advisor files and receive updates and, if necessary,
        acquire a product key.
      </p><p>
        The <span class="bold"><strong>MySQL user</strong></span> – For
        Monitor Agents to report the status of a MySQL server they must
        have privileges on that server. To perform all functions an
        agent must have <code class="literal">SHOW DATABASES</code>,
        <code class="literal">REPLICATION CLIENT</code>, <code class="literal">SUPER</code>,
        <code class="literal">CREATE</code>, and <code class="literal">SELECT</code>
        privileges. In short, the Monitor Agent needs to have read
        access to all data. Details about this account are given in
        <a href="mem-introduction.html#mem-agent-rights" title="15.3.3.1. Creating a MySQL User Account for the Monitor Agent">Section 15.3.3.1, “Creating a MySQL User Account for the Monitor Agent”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-created-users"></a>15.3.1.2. User Created During Installation</h4></div></div></div><p>
        The <span class="bold"><strong>Repository user</strong></span> –
        This user is the only user in the <code class="literal">user</code> table
        in the <code class="literal">mysql</code> database in the bundled MySQL
        server. To avoid confusion with monitored MySQL servers, this
        server is referred to throughout this document as the
        <code class="literal">repository</code>. The repository user can log in
        from <code class="literal">localhost</code> using the password specified
        during installation and has all privileges on all databases.
        These credentials are used to create the repository and its
        tables and to record data in them. During installation the
        default value for the user name for this role is
        <code class="literal">service_manager</code>. No default password is
        specified. You can use these credentials to manage the
        repository from the command line or when using a program such as
        MySQL Administrator.
      </p><p>
        During installation the file
        <code class="filename">configuration_report.txt</code> is created.
        Reference this file for the credentials of the repository
        manager. After the MySQL Enterprise Service Manager is installed, look for this
        file in the following directories:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Windows – <code class="filename">C:\Program
              Files\MySQL\Enterprise\Monitor</code>
            </p></li><li><p>
              Unix –
              <code class="filename">/opt/mysql/enterprise/monitor</code>
            </p></li><li><p>
              Mac OS X –
              <code class="filename">/Applications/mysql/enterprise/monitor</code>
            </p></li></ul></div><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-users-created-first-login"></a>15.3.1.3. Users Created on First Log-in</h4></div></div></div><p>
        The <span class="bold"><strong>Root user</strong></span> – This user
        is the administrator of the dashboard. The first time you log in
        to the dashboard you must log in as this user. The default user
        name for this user is <code class="literal">admin</code>. There is no
        default password for this user.
      </p><p>
        The <span class="bold"><strong>Agent user</strong></span> – The
        Monitor Agent needs to report the status of the MySQL server it
        is monitoring. For this reason it needs to log in to the
        dashboard. The default user name for this user is
        <code class="literal">agent</code>. There is no default password for this
        user.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The Monitor Agent has two roles in the MySQL Enterprise Monitor; it must have
          access to the dashboard and to the MySQL server it is
          monitoring. For a description of the agent as a MySQL user see
          <a href="mem-introduction.html#mem-existing-users" title="15.3.1.1. Existing Users">Section 15.3.1.1, “Existing Users”</a>.
        </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-install-server"></a>15.3.2. Service Manager Installation</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-server-install-generic">15.3.2.1. Service Manager Installation Common Parameters</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-server-install-windows">15.3.2.2. Service Manager Installation on Windows</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-server-install-osx">15.3.2.3. Service Manager Installation on Mac OS X</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-server-install-unix">15.3.2.4. Service Manager Installation on Unix</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-server-starting-windows">15.3.2.5. Starting/Stopping the MySQL Enterprise Monitor Service on Windows</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-server-starting-unix-osx">15.3.2.6. Starting/Stopping the MySQL Enterprise Monitor Service on Unix and Mac OS X</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-server-initial-config">15.3.2.7. MySQL Enterprise Service Manager Configuration Settings and Advisor Installation</a></span></dt></dl></div><p>
    The MySQL Enterprise Service Manager is the core element of the MySQL Enterprise Monitor. The
    installation process for this element is completely self-contained,
    but the installation includes the following components:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        Apache Tomcat
      </p></li><li><p>
        MySQL Server
      </p></li><li><p>
        Java VM
      </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      After installation you can determine the version number of the
      various components by entering
      <code class="literal">http://<em class="replaceable"><code>server_name:18080</code></em>/main?command=list_versions</code>
      into the web browsers address bar.
    </p></div><p>
    During installation, versions of MySQL and Tomcat will be installed
    onto the machine. The installer automatically provides default
    network ports that are different from standard installation for
    these applications. You can change the ports during installation.
  </p><p>
    During installation, default values are shown for user names and
    ports. This is for your convenience only; you may choose different
    values. The installer detect ports that are already in use and
    allows you to select different ports.
  </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
      The MySQL Enterprise Service Manager version 2.0 requires agents using 2.0 or
      higher.
    </p></div><p>
    All the installations share the same basic configuration parameters
    that you will be asked to confirm during installation. Before you
    start your installation, please review the section on these common
    paramaters, then proceed to section specific to your installation
    platform. For details of the common parameters, see
    <a href="mem-introduction.html#mem-server-install-generic" title="15.3.2.1. Service Manager Installation Common Parameters">Section 15.3.2.1, “Service Manager Installation Common Parameters”</a>. For information on
    installation under Windows, see
    <a href="mem-introduction.html#mem-server-install-windows" title="15.3.2.2. Service Manager Installation on Windows">Section 15.3.2.2, “Service Manager Installation on Windows”</a>, for Mac OS X see
    <a href="mem-introduction.html#mem-server-install-osx" title="15.3.2.3. Service Manager Installation on Mac OS X">Section 15.3.2.3, “Service Manager Installation on Mac OS X”</a>, and for Unix/Linux, see
    <a href="mem-introduction.html#mem-server-install-unix" title="15.3.2.4. Service Manager Installation on Unix">Section 15.3.2.4, “Service Manager Installation on Unix”</a>.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-server-install-generic"></a>15.3.2.1. Service Manager Installation Common Parameters</h4></div></div></div><p>
      All installations of the Service Manager install the Tomcat and
      MySQL applications using the same basic set of parameters. The
      defaults provided by the installation process are designed to be
      unique so that they do not interfere with existing installations
      of either product. However, you should check these parameters
      before installation to ensure that you do not experience any
      problems.
    </p><p>
      The common parameters are divided into those applying to the
      Tomcat server, and the MySQL server (Repository Configuration):
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <span class="bold"><strong>Tomcat Server Options</strong></span>
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              Tomcat Server port — the default port that the
              Tomcat server will use when listening for connections. If
              you change this option, then the port that you need to use
              when connecting to the Service Manager must be modified
              accordingly. The default value is 18080.
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                If you are not currently running a web server on port 80
                you may find it more convenient to use the well known
                port rather than <code class="literal">18080</code>. Since port
                <code class="literal">80</code> is the default for a web server,
                you can then open the dashboard without specifying a
                port.
              </p></div></li><li><p>
              Tomcat Shutdown port —the port used by the
              management scripts that is used to shut the Tomcat server
              down when you need to stop the Service Manager. The
              default value is 18005.
            </p></li><li><p>
              Tomcat SSL Port — the standard port used to connect
              to the Service Manager when you want to use Secure Sockets
              Layer (SSL) encrypted communication. The default value is
              18443.
            </p></li></ul></div></li><li><p>
          <span class="bold"><strong>Repository Configuration (MySQL
          Server)</strong></span>
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              Repository Username — the user name created and used
              to store information within the MySQL server to hold the
              information used by the Service Manager. In normal use,
              you should not need to use or modify this information, but
              it may be required if you have a support issue. The
              default value is <code class="literal">service_manager</code>.
            </p></li><li><p>
              Repository User password — the password to be used
              for the Repository Username. This should be set to a
              secure password so that the repository data is secure.
            </p></li></ul></div></li></ul></div><p>
      The information that you configure during installation will always
      be recorded within the
      <code class="filename">configuration_report.txt</code> file within the
      installation directory for the Service Manager.
    </p><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>
        Because the information stored within the
        <code class="filename">configuration_report.txt</code> file is in plain
        text, the Repository user name and password information are also
        exposed within this file. Make sure that the installation
        directory and file are secure that they can only be accessed by
        those users who would need to use the information.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-server-install-windows"></a>15.3.2.2. Service Manager Installation on Windows</h4></div></div></div><p>
      On Windows the installation modes are <code class="literal">win32</code> and
      <code class="literal">unattended</code> only. <code class="literal">unattended</code>
      mode is especially useful if you are doing multiple installations.
      For more information on this topic see
      <a href="mem-introduction.html#mem-unattended-installation" title="15.3.4. Unattended Installation">Section 15.3.4, “Unattended Installation”</a>.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        In order to install the Service Manager as a Windows service,
        you must do the installation as a privileged user.
      </p><p>
        On Windows Vista, if user account control is on, an operating
        system dialog box requests confirmation of the installation.
      </p></div><p>
      To install the Service Manager on Windows, find the executable
      file named
      <code class="filename">mysqlmonitor-<em class="replaceable"><code>version</code></em>-windows-installer.exe</code>
      (where <em class="replaceable"><code>version</code></em> represents the
      three-part version number).
    </p><div class="orderedlist"><ol type="1"><li><p>
          Double click on the MySQL Monitor installer. You should be
          presented with the Language Selection prompt. Select the
          language to use for the installer and then click
          <span class="guibutton">OK</span>.
        </p><div class="figure"><a name="fig-monitor-install-win1"></a><p class="title"><b>Figure 15.2. MySQL Enterprise Monitor: Installing Monitor on Windows: Language
            Selection</b></p><div class="mediaobject"><img src="images/monitor-install-win1.png" width="244" height="163" alt="MySQL Enterprise Monitor: Installing
              Monitor on Windows: Language Selection"></div></div></li><li><p>
          With the installation language selected, the remainder of the
          installation sets up the installation location and the main
          configuration parameters required by MySQL Enterprise Service Manager. Click
          <span class="guibutton">Next</span> to continue.
        </p></li><li><p>
          Select the installation directory where you want the
          MySQL Enterprise Service Manager components installed. By default on Windows
          the directory is <code class="filename">C:\Program
          Files\MySQL\Enterprise\Monitor</code>. You click the
          button next to the installation directory field to select a
          directory using the File chooser, or type the directory
          manually. Click <span class="guibutton">Next</span> to continue.
        </p><div class="figure"><a name="fig-monitor-install-win3"></a><p class="title"><b>Figure 15.3. MySQL Enterprise Monitor: Installing Monitor on Windows: Installation
            Directory</b></p><div class="mediaobject"><img src="images/monitor-install-win3.png" width="507" height="383" alt="MySQL Enterprise Monitor: Installing
              Monitor on Windows: Installation Directory"></div></div></li><li><p>
          Configure the options that set the network ports used by the
          Tomcat server. For more information, see
          <a href="mem-introduction.html#mem-server-install-generic" title="15.3.2.1. Service Manager Installation Common Parameters">Section 15.3.2.1, “Service Manager Installation Common Parameters”</a>. Click
          <span class="guibutton">Next</span> to continue.
        </p><div class="figure"><a name="fig-monitor-install-win4"></a><p class="title"><b>Figure 15.4. MySQL Enterprise Monitor: Installing Monitor on Windows: Tomcat Server
            Options</b></p><div class="mediaobject"><img src="images/monitor-install-win4.png" width="506" height="383" alt="MySQL Enterprise Monitor: Installing
              Monitor on Windows: Tomcat Server Options"></div></div></li><li><p>
          Configure the repository settings, setting the user name,
          password and port used to communicate with the bundled MySQL
          server that will be used to store the information and
          statistics for your installation. For more information, see
          <a href="mem-introduction.html#mem-server-install-generic" title="15.3.2.1. Service Manager Installation Common Parameters">Section 15.3.2.1, “Service Manager Installation Common Parameters”</a>. Click
          <span class="guibutton">Next</span> to continue.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            If the Windows firewall is enabled you will be asked to
            unblock ports for Apache/Tomcat and the MySQL server.
          </p></div><div class="figure"><a name="fig-monitor-install-win5"></a><p class="title"><b>Figure 15.5. MySQL Enterprise Monitor: Installing Monitor on Windows: Repository
            Configuration</b></p><div class="mediaobject"><img src="images/monitor-install-win5.png" width="507" height="383" alt="MySQL Enterprise Monitor: Installing
              Monitor on Windows: Repository Configuration"></div></div></li><li><p>
          You will be provided with information and a warning about the
          configuration options and how they are stored in the
          <code class="filename">configuration_report.txt</code> file, and it's
          location. Take a note of the full path to this file in case
          you need to look up the information later. Click
          <span class="guibutton">Next</span> to continue.
        </p></li><li><p>
          You should now be prompted to start the installation process.
          Click <span class="guibutton">Next</span> to continue.
        </p></li><li><p>
          Once the installation has been completed, you will be provided
          with the information on how to uninstall MySQL Enterprise Service Manager.
          Click <span class="guibutton">Next</span> to continue.
        </p></li><li><p>
          To complete the installation and set up your MySQL Enterprise Service Manager,
          you will need to login to the Dashboard. You can do this
          automatically by checking the box on the final window before
          clicking <span class="guibutton">Finish</span>. This checkbox is
          selected by default. If you do not want to run the Dashboard
          at this time, uncheck the box and clock
          <span class="guibutton">Finish</span>.
        </p></li></ol></div><p>
      For instructions on starting the MySQL Enterprise Monitor services under Windows,
      see <a href="mem-introduction.html#mem-server-starting-windows" title="15.3.2.5. Starting/Stopping the MySQL Enterprise Monitor Service on Windows">Section 15.3.2.5, “Starting/Stopping the MySQL Enterprise Monitor Service on Windows”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-server-install-osx"></a>15.3.2.3. Service Manager Installation on Mac OS X</h4></div></div></div><p>
      On Mac OS X there are three installation modes
      <code class="literal">osx</code>, <code class="literal">text</code>, and
      <code class="literal">unattended</code>. For more information on this topic
      see <a href="mem-introduction.html#mem-unattended-installation" title="15.3.4. Unattended Installation">Section 15.3.4, “Unattended Installation”</a>. The
      <code class="literal">text</code> mode installation for Mac OS X is
      identical to <code class="literal">text</code> installation under Unix. For
      <code class="literal">text</code> mode installation instructions see
      <a href="mem-introduction.html#mem-server-install-unix" title="15.3.2.4. Service Manager Installation on Unix">Section 15.3.2.4, “Service Manager Installation on Unix”</a>.
    </p><p>
      Installing the MySQL Enterprise Service Manager on Mac OS X requires an existing
      installation of Java. The minimum required version is 1.5.0_7. If
      this version is not installed on your machine you can download it
      from Apple. This version of Java requires Mac OS X version 10.4.5
      as a minimum, so you may need to upgrade your operating system in
      order to install it.
    </p><p>
      For reasons of backwards compatibility, Mac OS X is usually
      installed with multiple versions of Java. When installing in
      <code class="literal">osx</code> mode, version 1.5.0_7 must be the default
      version. Upon installation, Java 1.5.0_7 sets itself as the
      default so this is usually not a problem.
    </p><p>
      If you have changed the default you can reset it or you may
      install the MySQL Enterprise Service Manager in <code class="literal">text</code> mode,
      setting the environment variables to point to the correct version
      of Java. To install in <code class="literal">text</code> mode, find the
      <code class="filename">installbuilder</code> file in the
      <code class="filename">Contents/MacOS</code> directory immediately below
      the
      <code class="filename">mysqlmonitor-<em class="replaceable"><code>version</code></em>-osx-installer.app</code>
      directory. Installing the MySQL Enterprise Service Manager in
      <code class="literal">text</code> mode is identical to the procedure
      described in <a href="mem-introduction.html#mem-server-install-unix" title="15.3.2.4. Service Manager Installation on Unix">Section 15.3.2.4, “Service Manager Installation on Unix”</a> with the
      minor differences noted above.
    </p><p>
      To install using the GUI (<code class="literal">osx</code>) installation,
      follow these instructions:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Double click on the MySQL Monitor installer. You should be
          presented with the Language Selection prompt. Select the
          language to use for the installer and then click
          <span class="guibutton">OK</span>.
        </p><div class="figure"><a name="fig-monitor-install-osx1"></a><p class="title"><b>Figure 15.6. MySQL Enterprise Monitor: Installing Monitor on OS X: Language Selection</b></p><div class="mediaobject"><img src="images/monitor-install-osx1.png" width="284" height="140" alt="MySQL Enterprise Monitor: Installing
              Monitor on OS X: Language Selection"></div></div></li><li><p>
          If you have multiple Java installations on your machine, you
          will be asked to choose which Java to use with your
          MySQL Enterprise Service Manager installation. Choose the Java version you want
          to use (1.5.0 or later is required), and click
          <span class="guibutton">OK</span>.
        </p><div class="figure"><a name="fig-monitor-install-osx2"></a><p class="title"><b>Figure 15.7. MySQL Enterprise Monitor: Installing Monitor on OS X: Java Selection</b></p><div class="mediaobject"><img src="images/monitor-install-osx2.png" width="677" height="141" alt="MySQL Enterprise Monitor: Installing
              Monitor on OS X: Java Selection"></div></div></li><li><p>
          With the installation language and Java version selected, the
          remainder of the installation sets up the installation
          location and the main configuration parameters required by
          MySQL Enterprise Service Manager. Click <span class="guibutton">Next</span> to
          contintue.
        </p></li><li><p>
          Select the installation directory where you want the
          MySQL Enterprise Service Manager components installed. By default on Mac OS X
          the directory is
          <code class="filename">/Applications/mysql/enterprise/monitor</code>.
          You click the button next to the installation directory field
          to select a directory using the File chooser, or type the
          directory manually. Click <span class="guibutton">Next</span> to
          continue.
        </p><div class="figure"><a name="fig-monitor-install-osx4"></a><p class="title"><b>Figure 15.8. MySQL Enterprise Monitor: Installing Monitor on OS X: Installation
            Directory</b></p><div class="mediaobject"><img src="images/monitor-install-osx4.png" width="500" height="372" alt="MySQL Enterprise Monitor: Installing
              Monitor on OS X: Installation Directory"></div></div></li><li><p>
          Configure the options that set the network ports used by the
          Tomcat server. For more information, see
          <a href="mem-introduction.html#mem-server-install-generic" title="15.3.2.1. Service Manager Installation Common Parameters">Section 15.3.2.1, “Service Manager Installation Common Parameters”</a>. Click
          <span class="guibutton">Next</span> to continue.
        </p><div class="figure"><a name="fig-monitor-install-osx5"></a><p class="title"><b>Figure 15.9. MySQL Enterprise Monitor: Installing Monitor on OS X: Tomcat Server
            Options</b></p><div class="mediaobject"><img src="images/monitor-install-osx5.png" width="502" height="374" alt="MySQL Enterprise Monitor: Installing
              Monitor on OS X: Tomcat Server Options"></div></div></li><li><p>
          Configure the repository settings, setting the user name,
          password and port used to communicate with the bundled MySQL
          server that will be used to store the information and
          statistics for your installation. For more information, see
          <a href="mem-introduction.html#mem-server-install-generic" title="15.3.2.1. Service Manager Installation Common Parameters">Section 15.3.2.1, “Service Manager Installation Common Parameters”</a>. Click
          <span class="guibutton">Next</span> to continue.
        </p><div class="figure"><a name="fig-monitor-install-osx6"></a><p class="title"><b>Figure 15.10. MySQL Enterprise Monitor: Installing Monitor on OS X: Repository
            Configuration</b></p><div class="mediaobject"><img src="images/monitor-install-osx6.png" width="500" height="372" alt="MySQL Enterprise Monitor: Installing
              Monitor on OS X: Repository Configuration"></div></div></li><li><p>
          You will be provided with information and a warning about the
          configuration options and how they are stored in the
          <code class="filename">configuration_report.txt</code> file, and it's
          location. Take a note of the full path to this file in case
          you need to look up the information later. Click
          <span class="guibutton">Next</span> to continue.
        </p></li><li><p>
          You should now be prompted to start the installation process.
          Click <span class="guibutton">Next</span> to continue.
        </p></li><li><p>
          Once the installation has been completed, you will be provided
          with the information on how to uninstall MySQL Enterprise Service Manager.
          Click <span class="guibutton">Next</span> to continue.
        </p></li><li><p>
          To complete the installation and set up your MySQL Enterprise Service Manager,
          you will need to login to the Dashboard. You can do this
          automatically by checking the box on the final window before
          clicking <span class="guibutton">Finish</span>. This checkbox is
          selected by default. If you do not want to run the Dashboard
          at this time, uncheck the box and clock
          <span class="guibutton">Finish</span>.
        </p></li></ol></div><p>
      Your installation should now be complete. To continue with the
      configuration of MySQL Enterprise Service Manager, see
      <a href="mem-introduction.html#mem-server-initial-config" title="15.3.2.7. MySQL Enterprise Service Manager Configuration Settings and Advisor Installation">Section 15.3.2.7, “MySQL Enterprise Service Manager Configuration Settings and Advisor Installation”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-server-install-unix"></a>15.3.2.4. Service Manager Installation on Unix</h4></div></div></div><p>
      To install the Service Manager find the file named
      <code class="filename">mysqlmonitor-<em class="replaceable"><code>version</code></em>-installer.bin</code>
      (where <em class="replaceable"><code>version</code></em> indicates the version
      number, the OS, and the architecture ). Ensure that this file is
      executable by typing:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>chmod +x mysqlmonitor-<em class="replaceable"><code>version</code></em>-installer.bin</code></strong>
</pre><p>
      To install to the default directory
      (<code class="filename">/opt/mysql/enterprise/monitor</code>) you need to
      be logged in as <code class="literal">root</code>. Installing as an
      unprivileged user installs to the
      <code class="filename">/home/<em class="replaceable"><code>user_name</code></em>/mysql/enterprise/monitor/</code>
      directory.
    </p><p>
      What follows describes installation from the command line. You may
      install the Service Manager graphically by running the installer
      from within a windows manager. In both cases the steps are
      identical. You may also install the Service Manager in
      <code class="literal">unattended</code> mode. This is especially useful if
      you are doing multiple installations. For more information on this
      topic see <a href="mem-introduction.html#mem-unattended-installation" title="15.3.4. Unattended Installation">Section 15.3.4, “Unattended Installation”</a>.
    </p><div class="orderedlist"><ol type="1"><li><p>
          Begin installation by typing:
        </p><pre class="programlisting">  shell&gt; <strong class="userinput"><code>./mysqlmonitor-<em class="replaceable"><code>version</code></em>-installer.bin</code></strong>
</pre></li><li><p>
          First choose the language for the installation:
        </p><pre class="programlisting">Language Selection

Please select the installation language
[1] English
[2] Japanese
Please choose an option [1] : 
</pre></li><li><p>
          Throughout the installation process you will be asked the
          configuration questions for different options. Default values
          are shown between square brackets; to use the default press
          <span><strong class="keycap">Enter</strong></span>. Otherwise, enter the new value and
          press <span><strong class="keycap">Enter</strong></span>:
        </p><p>
          First, select the directory where you want MySQL Enterprise Service Manager to
          be installed. The default is
          <code class="filename">/opt/mysql/enterprise/monitor/</code>. Make sure
          that the location you choose has enough space to hold the
          installation files and the database information that will be
          created when MySQL Enterprise Service Manager is running.
        </p><pre class="programlisting"> 
Please specify the directory where the MySQL Enterprise Service Manager 
 will be installed.

Installation directory [/opt/mysql/enterprise/monitor/]: 
 </pre></li><li><p>
          Now set the Tomcat Server options. For more details on these
          parameters, see <a href="mem-introduction.html#mem-server-install-generic" title="15.3.2.1. Service Manager Installation Common Parameters">Section 15.3.2.1, “Service Manager Installation Common Parameters”</a>.
        </p><pre class="programlisting">----------------------------------------------------------------------------
Tomcat Server Options

Please specify the following parameters for the bundled Tomcat Server

Tomcat Server Port [18080]: 

Tomcat Shutdown Port [18005]: 

Tomcat SSL Port [18443]: 
</pre><p>
          You will also be asked if SSL support is required. SSL support
          allows your agents and monitor to communicate with each other
          using SSL. Using SSL means that the data exchanged by the
          agent and MySQL Enterprise Service Manager are secure and can be used to
          monitor servers securely, or to monitor agents over a public
          connection.
        </p><p>
          You can enable SSL by pressing <span><strong class="keycap">Y</strong></span> when
          prompted during installation:
        </p><pre class="programlisting">Is SSL support required?           [y/N]: </pre></li><li><p>
          Set the repository (embedded MySQL server) configuration
          options. For more details on these parameters, see
          <a href="mem-introduction.html#mem-server-install-generic" title="15.3.2.1. Service Manager Installation Common Parameters">Section 15.3.2.1, “Service Manager Installation Common Parameters”</a>.
        </p><pre class="programlisting">----------------------------------------------------------------------------

Repository Configuration

Please specify the following parameters for the bundled MySQL server


Repository Username  [service_manager]:

Password :

Re-enter :

Bundled MySQL Database Port [13306]: 

</pre></li><li><p>
          Before the final installation process, you will provided with
          the location of the file that contains a copy of all of the
          settings. Be sure to follow the instructions and store this
          report in a secure location. There is no password recovery
          feature.
        </p><pre class="programlisting">----------------------------------------------------------------------------
  
Configuration Report 

Note:

The settings you specified will be saved here:

/opt/mysql/enterprise/monitor/configuration_report.txt

IMPORTANT: This configuration report includes passwords stored in plain text; it 
is intended to help you install and configure your agents. We strongly advise 
you to secure or delete this text file immediately after installation.
			

Press [Enter] to continue : 

</pre></li><li><p>
          You you will now be asked to confirm the installation process.
        </p><pre class="programlisting">Setup is now ready to begin installing MySQL Enterprise Monitor 
 on your computer. 

Do you want to continue? [Y/n]: Y
        
Please wait while Setup installs MySQL Enterprise Monitor 
 on your computer.       
</pre><p>
          The installation process may take a few minutes to complete.
          Upon completion you should see:
        </p><pre class="programlisting">Completed installing files

Setup has completed installing MySQL Enterprise files on your computer

Uninstalling the MySQL Enterprise files can be done by invoking:

/opt/mysql/enterprise/monitor/uninstall

To complete the installation, launch the MySQL Enterprise Dashboard and complete 
the initial setup and product activation information. Refer to the readme file 
for additional information and a list of known issues.


Press [Enter] to continue : 

</pre></li><li><p>
          Finally, you will be given the opportunity to read a supplied
          <code class="filename">Readme</code> file that is supplied with the
          installation. The <code class="filename">Readme</code> contains
          important information about how to use and start your
          MySQL Enterprise Service Manager.
        </p><pre class="programlisting">----------------------------------------------------------------------------

Setup has finished installing MySQL Enterprise Monitor on your computer.

View Readme File [Y/n]: n
          </pre><p>
          Once the <code class="filename">Readme</code> file has been displayed,
          or if you did not elect to read the file, the installation
          provides information about how to continue with your
          installation.
        </p><pre class="programlisting">Info: To access the MySQL Enterprise Monitor please visit the
following page: http://localhost:18080/Auth.action

Press [Enter] to continue : 
</pre></li></ol></div><p>
      The Enterprise Dashboard will not start up automatically if you
      perform a <code class="literal">text</code> mode installation. For more
      information on starting and stopping MySQL Enterprise Service Manager, see
      <a href="mem-introduction.html#mem-server-starting-unix-osx" title="15.3.2.6. Starting/Stopping the MySQL Enterprise Monitor Service on Unix and Mac OS X">Section 15.3.2.6, “Starting/Stopping the MySQL Enterprise Monitor Service on Unix and Mac OS X”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-server-starting-windows"></a>15.3.2.5. Starting/Stopping the MySQL Enterprise Monitor Service on Windows</h4></div></div></div><p>
      You can choose to start up the MySQL Enterprise Service Manager on installation.
      The installed services are called:

      </p><div class="itemizedlist"><ul type="disc"><li><p>
            MySQL Enterprise Tomcat
          </p></li><li><p>
            MySQL Enterprise MySQL
          </p></li></ul></div><p>
    </p><p>
      You can stop or start the services from the Microsoft Management
      Console Services window. Look for the <code class="literal">MySQL Enterprise
      Tomcat</code> and the <code class="literal">MySQL Enterprise MySQL</code>
      entries.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        On Windows Vista, starting these services requires
        administrative privileges — you must be logged in as an
        administrator. To start or stop a service right click it and
        choose the <span class="guimenu">Run as Administrator</span> menu option.
        The same restriction applies to using the menu options discussed
        in the following and to starting the services from the command
        line. To open an administrator <code class="literal">cmd</code> window
        right click the <code class="literal">cmd</code> icon and choose the
        <span class="guimenu">Run as Administrator</span> menu option.
      </p></div><p>
      To start or stop a service, right click it and choose from the
      options in the pop-up menu.
    </p><p>
      There is also a menu entry for starting and stopping the services.
      Navigate to the <code class="literal">Program</code>,
      <code class="literal">MySQL</code>, <code class="literal">MySQL Enterprise Monitor</code>,
      <code class="literal">Services</code> entry to stop or start the services.
    </p><p>
      You can also stop or start a service from the command line. To
      start the Tomcat service type:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>sc start MySQLEnterpriseTomcat</code></strong> 
</pre><p>
      or:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>net start MySQLEnterpriseTomcat</code></strong> 
</pre><p>
      To stop this service type:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>sc stop MySQLEnterpriseTomcat</code></strong>
</pre><p>
      or:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>net stop MySQLEnterpriseTomcat</code></strong>
</pre><p>
      In similar fashion, you may stop or start the MySQL server from
      the command line. The service name is
      <code class="literal">MySQLEnterpriseMySQL</code>.
    </p><p>
      You may also start, stop, and restart a specific service or both
      services using the <code class="filename">mysqlmonitorctl.bat</code> file.
      To execute this file, go to the command line and navigate to the
      <code class="filename">C:\Program Files\MySQL\Enterprise\Monitor</code>
      directory. Typing <strong class="userinput"><code>mysqlmonitorctl.bat help</code></strong>
      produces the following output:
    </p><pre class="programlisting">usage: mysqlmonitorctl.bat help
       mysqlmonitorctl.bat (start|stop|restart|install|uninstall)
       mysqlmonitorctl.bat (start|stop|restart) tomcat
       mysqlmonitorctl.bat (start|stop|restart) mysql

help       - this screen
start      - start the service(s)
stop       - stop the service(s)
restart    - restart or start the service(s)
install    - install the service(s)
uninstall  - uninstall the service(s)
</pre><p>
      To stop a specific service, pass the argument
      <code class="literal">tomcat</code> or <code class="literal">mysql</code> in addition
      to the status change argument. If you wish to change the status of
      both services, do not specify a service name. You may also
      uninstall the services using this batch file.
    </p><p>
      Configuration of the dashboard begins immediately after the
      Service Manager is installed. To continue a Windows installation
      skip the next section and go to
      <a href="mem-introduction.html#mem-server-initial-config" title="15.3.2.7. MySQL Enterprise Service Manager Configuration Settings and Advisor Installation">Section 15.3.2.7, “MySQL Enterprise Service Manager Configuration Settings and Advisor Installation”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-server-starting-unix-osx"></a>15.3.2.6. Starting/Stopping the MySQL Enterprise Monitor Service on Unix and Mac OS X</h4></div></div></div><p>
      The services incorporated into the MySQL Enterprise Service Manager are:

      </p><div class="itemizedlist"><ul type="disc"><li><p>
            The MySQL Server
          </p></li><li><p>
            The Apache/Tomcat Server
          </p></li></ul></div><p>
    </p><p>
      Should you need to stop, start, or restart the MySQL Enterprise Service Manager
      call the <code class="filename">mysqlmonitorctl.sh</code> file located in
      the <code class="filename">/opt/mysql/enterprise/monitor/</code> directory
      on Unix or the
      <code class="filename">/Applications/mysql/enterprise/monitor/</code> on
      Mac OS X. To see all the available options navigate to the
      appropriate directory and type:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>/opt/mysql/enterprise/monitor/mysqlmonitorctl.sh help</code></strong>
</pre><p>
      Executing this script produces the following output:
    </p><pre class="programlisting">usage: ./mysqlmonitorctl.sh help
./mysqlmonitorctl.sh (start|stop|status|restart)
./mysqlmonitorctl.sh (start|stop|status|restart) mysql
./mysqlmonitorctl.sh (start|stop|status|restart) tomcat

help       - this screen
start      - start the service(s)
stop       - stop  the service(s)
restart    - restart or start the service(s)
status     - report the status of the service
</pre><p>
      Using this script you can stop, start, or restart all the Service
      Manager components. To do this make a call to
      <code class="filename">mysqlmonitorctl.sh start</code> from your start-up
      script.
    </p><p>
      To start the service:
    </p><pre class="programlisting">shell&gt; ./mysqlmonitorctl.sh start
./mysqlmonitorctl.sh : mysql  started
nohup: redirecting stderr to stdout
Starting mysqld daemon with databases from /opt/mysql/enterprise/monitor/mysql/data/
Using CATALINA_BASE:   /opt/mysql/enterprise/monitor/apache-tomcat
Using CATALINA_HOME:   /opt/mysql/enterprise/monitor/apache-tomcat
Using CATALINA_TMPDIR: /opt/mysql/enterprise/monitor/apache-tomcat/temp
Using JRE_HOME:       /opt/mysql/enterprise/monitor/java
</pre><p>
      If you try to start the service and it is already running, you
      will be warned that the services are already running:
    </p><pre class="programlisting">shell&gt; ./mysqlmonitorctl.sh start
./mysqlmonitorctl.sh : mysql  (pid 18403) already running
./mysqlmonitorctl.sh : tomcat  (pid 18480) already running
</pre><p>
      To stop the service:
    </p><pre class="programlisting">shell&gt; ./mysqlmonitorctl.sh stop
Using CATALINA_BASE:   /Applications/mysql/enterprise/monitor/apache-tomcat
Using CATALINA_HOME:   /Applications/mysql/enterprise/monitor/apache-tomcat
Using CATALINA_TMPDIR: /Applications/mysql/enterprise/monitor/apache-tomcat/temp
Using JRE_HOME:       /System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home
Stopping tomcat service .. [ OK ]
STOPPING server from pid file /Applications/mysql/enterprise/monitor/mysql/data/mysqld.pid
090209 15:37:09  mysqld ended
</pre><p>
      The <code class="literal">restart</code> command is equivalent to executing
      a <code class="literal">stop</code> and then <code class="literal">start</code>
      operation.
    </p><p>
      This script can also be used to check the status of the Tomcat web
      server or the MySQL repository.
    </p><pre class="programlisting">shell&gt; ./mysqlmonitorctl.sh status
MySQL Network MySQL is running
MySQL Network Tomcat is running
</pre><p>
      Configuration of the dashboard begins immediately after the
      MySQL Enterprise Service Manager is installed.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-server-initial-config"></a>15.3.2.7. MySQL Enterprise Service Manager Configuration Settings and Advisor Installation</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-first-login-dashboard">15.3.2.7.1. Initial Dashboard Log-in</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-localization">15.3.2.7.2. Setting the Timezone and Locale</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-advisor-installation-after-login">15.3.2.7.3. Installing Advisors After Initial Log-in</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-upgrading-updating-advisors">15.3.2.7.4. Upgrading and Updating Advisors</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-outgoing-email-settings">15.3.2.7.5. Outgoing Email Settings</a></span></dt></dl></div><p>
      The Enterprise Dashboard is the web-based interface to the Service
      Manager so the procedure for starting the dashboard is identical
      for all platforms. From the dashboard you can configure the
      settings necessary for receiving updates from MySQL Enterprise and
      for the initial installation of the Advisors.
    </p><p>
      If you installed the Service Manager using a graphical interface,
      you have the option of launching the dashboard on the final
      installation screen (as long as the <span class="guibutton">Launch
      MySQL Enterprise Monitor Now</span> checkbox is checked).
    </p><p>
      Otherwise, you can view the dashboard by typing
      <code class="literal">http://localhost:<em class="replaceable"><code>18080</code></em>/Auth.action</code>
      into the address bar of your web browser. If you are unsure of the
      host name and port to use, check the
      <code class="filename">configuration_report.txt</code> file.
    </p><p>
      Under Windows it is also possible to open the dashboard by
      choosing the <code class="literal">MySQL</code> menu item and finding the
      <code class="literal">MySQL Enterprise Monitor</code> entry. Under this entry choose
      <code class="literal">Start Service Manager</code>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-first-login-dashboard"></a>15.3.2.7.1. Initial Dashboard Log-in</h5></div></div></div><p>
        If this is the first time that you have attempted to log in to
        the dashboard you should see a screen similar to the following:
      </p><div class="figure"><a name="fig-first-dashboard-login"></a><p class="title"><b>Figure 15.11. MySQL Enterprise Monitor: Initial dashboard log-in</b></p><div class="mediaobject"><img src="images/first-dashboard-login.png" width="620" height="638" alt="MySQL Enterprise Monitor: Initial
            dashboard log-in"></div></div><p>
        Use this screen to perform the following tasks:

        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Install the Advisors
            </p></li><li><p>
              Set up your MySQL Enterprise credentials
            </p></li><li><p>
              Create a user name and password for the dashboard
              administrator
            </p></li><li><p>
              Create a user name and password for the Monitor Agent
            </p></li></ul></div><p>
      </p><p>
        If you have been provided with a <code class="literal">MySQL Enterprise
        Product Key</code> and an Advisors file click the
        <span class="guibutton">Browse</span> button and locate these files. The
        advisor file bears the name,
        <code class="filename">AdvisorScript-<em class="replaceable"><code>version</code></em>.jar</code>
        and the product key,
        <code class="filename"><em class="replaceable"><code>Subscription-level_date</code></em>.xml</code>.
        If you do not allow Internet access from the dashboard you must
        install the advisors in this way. It is strongly recommended
        that you install the Advisors at this point, but you may do so
        later. For instructions on doing this see,
        <a href="mem-introduction.html#mem-advisor-installation-after-login" title="15.3.2.7.3. Installing Advisors After Initial Log-in">Section 15.3.2.7.3, “Installing Advisors After Initial Log-in”</a>. If the
        product key that you provide is invalid a notification appears
        and you will be unable to import the advisors.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If you are activating the MySQL Enterprise Monitor using a product key
          do<span class="emphasis"><em>not</em></span> enter your MySQL credentials;
          entering both produces an error message.
        </p></div><p>
        If you have Internet access from the dashboard, activate
        MySQL Enterprise Monitor by supplying your MySQL Enterprise credentials. Enter
        your email address as the <code class="literal">MySQL Enterprise
        Login</code> and enter and confirm your MySQL Enterprise
        password. If you specify incorrect credentials, you receive the
        error message, “<span class="quote">Unable to connect to verify
        credentials.</span>”
      </p><p>
        In the <span class="guilabel">Create Administrator</span> section of this
        screen, enter credentials for the dashboard administrator. This
        creates the <code class="literal">root user</code> described in
        <a href="mem-introduction.html#mem-users-created-first-login" title="15.3.1.3. Users Created on First Log-in">Section 15.3.1.3, “Users Created on First Log-in”</a>. Make note of
        the user name and password as these credentials are required for
        any future login.
      </p><p>
        In the <span class="guilabel">Configure Agent Credentials</span> section
        of this screen enter the credentials for the agent. This is the
        <code class="literal">agent user</code> also described in
        <a href="mem-introduction.html#mem-users-created-first-login" title="15.3.1.3. Users Created on First Log-in">Section 15.3.1.3, “Users Created on First Log-in”</a>. The agent needs
        to log in in order to report its findings. Make note of the
        agent's credentials; this information is required when
        installing the agent.
      </p><p>
        When all the settings have been specified, click the
        <span class="guibutton">complete setup</span> button. If you log in
        successfully you should see a message displaying the number of
        graphs and advisors that have been imported. This number varies
        depending upon your subscription level.
      </p><p>
        If importation of the advisor files fails, you will see the
        message:
      </p><pre class="programlisting">Unable to import Advisor Jar. You may download the jar 
manually from the Enterprise Portal and import it from the 'Check For Updates' page.
</pre><p>
        In this case you may download the advisor file from the
        Enterprise website and install it as described in
        <a href="mem-introduction.html#mem-advisor-installation-after-login" title="15.3.2.7.3. Installing Advisors After Initial Log-in">Section 15.3.2.7.3, “Installing Advisors After Initial Log-in”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-localization"></a>15.3.2.7.2. Setting the Timezone and Locale</h5></div></div></div><p>
        If this is the first time that you have launched the dashboard
        you are asked to set your time zone and locale. Choose the
        appropriate values from the drop-down list boxes. Setting the
        time zone ensures that you have an accurate time reference for
        any notifications from the MySQL Enterprise Advisors.
      </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          It is especially important that the time zone be set correctly
          as this may also affect the way the graphs display. For this
          reason, also ensure that the time reported by the operating
          system is correct. To change the time zone or locale see
          <a href="mem-introduction.html#mem-user-preferences" title="15.6.2. User Preferences">Section 15.6.2, “User Preferences”</a>.
        </p><p>
          The locale chosen determines the user's default language when
          logging in to the Dashboard. Note that this will override the
          default browser settings whenever this specific user logs in.
        </p></div><p>
        After specifying your time zone and locale, the dashboard opens
        on the <code class="literal">Monitor</code> page. For a detailed
        examination of the <code class="literal">Monitor</code> Screen see,
        <a href="mem-introduction.html#mem-dashboard" title="15.5. MySQL Enterprise Dashboard">Section 15.5, “MySQL Enterprise Dashboard”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-advisor-installation-after-login"></a>15.3.2.7.3. Installing Advisors After Initial Log-in</h5></div></div></div><p>
        The Advisors interpret the data sent by the Monitor Agents and
        display the results in the dashboard. A minimal set of Advisors
        are preinstalled with the Service Manager. To obtain the full
        set of Advisors and get the most value from the MySQL Enterprise Monitor, you
        must download Advisors from MySQL Enterprise.
      </p><p>
        If you did not install the Advisors when you first logged in to
        the MySQL Enterprise Dashboard, open the dashboard, find the
        <code class="literal">Advisors</code> tab, and choose the <code class="literal">Check
        for Updates</code> link. Doing this downloads the latest
        version of the Advisors from the MySQL Enterprise web site. In
        order to install the advisors in this fashion you must specify
        your MySQL Enterprise credentials. Find instructions for doing
        this in <a href="mem-introduction.html#mem-global-settings" title="15.6.1. Global Settings">Section 15.6.1, “Global Settings”</a>.
      </p><p>
        If you do not allow Internet access from the dashboard, you must
        install the Advisors from a local file. To do this you need an
        advisor file bearing the name,
        <code class="filename">AdvisorScript-<em class="replaceable"><code>version</code></em>.jar</code>.
        If you don't already have this file, you can find it on the
        MySQL Enterprise downloads page. Download the Advisors file to
        a location that is accessible from the dashboard. Use the
        <span class="guibutton">Browse</span> button to find the Advisors file
        and then choose <span class="guibutton">import</span> to load the
        advisors.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-upgrading-updating-advisors"></a>15.3.2.7.4. Upgrading and Updating Advisors</h5></div></div></div><p>
        The process for upgrading advisors is exactly the same as the
        initial installation. Advisors are updated by choosing the
        <span class="guibutton">update</span> button on the <code class="literal">Check for
        Updates</code> page. If you do not have Internet access from
        the dashboard you can import the Advisors from a local file as
        described in
        <a href="mem-introduction.html#mem-advisor-installation-after-login" title="15.3.2.7.3. Installing Advisors After Initial Log-in">Section 15.3.2.7.3, “Installing Advisors After Initial Log-in”</a>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          You may choose to upgrade your MySQL Enterprise Monitor subscription level at
          any time.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-outgoing-email-settings"></a>15.3.2.7.5. Outgoing Email Settings</h5></div></div></div><p>
        Alert notification via email is a key component of the MySQL Enterprise Monitor
        Advisor solution. For this reason you may want to immediately
        configure an SMTP account for at least one recipient.
      </p><p>
        To do this choose the <code class="literal">Settings</code> tab and go to
        the <code class="literal">Global Settings</code> screen by clicking the
        appropriate link. Here you can configure the email settings.
        These settings apply to the currently logged-in user.
      </p><p>
        Find the <code class="literal">Outgoing Email Settings</code> on the left
        of this page.
      </p><div class="figure"><a name="fig-email-settings"></a><p class="title"><b>Figure 15.12. MySQL Enterprise Monitor: Outgoing email settings</b></p><div class="mediaobject"><img src="images/email-settings.png" width="443" height="367" alt="MySQL Enterprise Monitor: Outgoing email
            settings"></div></div><p>
        Ensure that the <code class="literal">Enable Email Notifications</code>
        checkbox is checked and enter information as appropriate.
      </p><p>
        The default value for the SMTP port is <code class="literal">25</code>. If
        your mail server runs on a different port simply specify it,
        separating it from the server name using a colon. For example,
        if your mail server runs on port 587 enter
        <code class="literal"><em class="replaceable"><code>email.myserver.com</code></em>:587</code>
        into the <span class="guilabel">SMTP Server</span> text box.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          An email server must be available for sending email alerts.
        </p><p>
          The SMTP client uses Transport Layer Security (TLS) if the
          SMTP server supports it.
        </p><p>
          If your SMTP server incorrectly indicates that it supports
          TLS, check the <span class="guilabel">Disable JavaMail TLS/SSL</span>
          check box.
        </p></div><p>
        The email settings page is dealt with in more detail in
        <a href="mem-introduction.html#mem-dashboard-settings" title="15.6. The Settings Page">Section 15.6, “The Settings Page”</a>.
      </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-install-agent"></a>15.3.3. Monitor Agent Installation</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-agent-rights">15.3.3.1. Creating a MySQL User Account for the Monitor Agent</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-install-agent-windows">15.3.3.2. Installing the Agent on Microsoft Windows</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-install-agent-osx">15.3.3.3. Installing the Agent on Mac OS X</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-install-agent-unix">15.3.3.4. Installing the Monitor Agent on Unix</a></span></dt><dt><span class="section"><a href="mem-introduction.html#agent-starting-stopping">15.3.3.5. Starting/Stopping the MySQL Enterprise Monitor Agent</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-advanced-agent-configuration">15.3.3.6. Advanced Agent Configuration</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-troubleshooting-agent-start">15.3.3.7. Troubleshooting the Agent</a></span></dt></dl></div><p>
    A MySQL Enterprise Monitor Agent monitors a MySQL server and sends data to the
    Advisors. These data are interpreted and displayed in the dashboard.
    The Monitor Agent is installed on all platforms using the steps
    described in the next section.
  </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
      The MySQL Enterprise Service Manager version 2.0 or higher requires agents with a
      version number of 2.0 or higher.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-agent-rights"></a>15.3.3.1. Creating a MySQL User Account for the Monitor Agent</h4></div></div></div><p>
      Before setting up an agent to monitor a MySQL server you need to
      ensure that there is a user account for the agent on that server.
    </p><p>
      The privileges required for this user account vary depending on
      the information you wish to gather using the MySQL Enterprise Monitor Agent. The
      following privileges allow the Monitor Agent to perform its
      assigned duties without limitation:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">SHOW DATABASES</code>: Allows the MySQL Enterprise Monitor Agent
          to gather inventory about the monitored MySQL server.
        </p></li><li><p>
          <code class="literal">REPLICATION CLIENT</code>: Allows the
          MySQL Enterprise Monitor Agent to gather Replication master/slave status data.
          This privilege is only needed if the MySQL Replication Advisor
          Rules are employed.
        </p></li><li><p>
          <code class="literal">SELECT</code>: Allows the MySQL Enterprise Monitor Agent to
          collect statistics for table objects.
        </p></li><li><p>
          <code class="literal">SUPER</code>: Allows the MySQL Enterprise Monitor Agent to execute
          <code class="literal">SHOW ENGINE INNODB STATUS</code> in order to
          collect data about InnoDB tables.
        </p></li><li><p>
          <code class="literal">PROCESS</code>: When monitoring a MySQL server
          running MySQL 5.1.24 or above with <code class="literal">InnoDB</code>,
          the <code class="literal">PROCESS</code> privilege is required to
          execute <code class="literal">SHOW ENGINE INNODB STATUS</code>.
        </p></li><li><p>
          <code class="literal">INSERT</code>: Required to create the UUID
          required by the agent.
        </p></li><li><p>
          <code class="literal">CREATE</code>: Allows the MySQL Enterprise Monitor Agent to create
          tables. During discovery, the agent creates the table
          <code class="literal">inventory</code> within the
          <code class="literal">mysql</code> database that is used to the UUID for
          the server. Without this table, the agent cannot determine the
          UUID of the server and therefore use this when sending
          information to MySQL Enterprise Service Manager.
        </p></li></ul></div><p>
      For example, the following <code class="literal">GRANT</code> statement will
      give the agent the required <code class="literal">SELECT</code>,
      <code class="literal">REPLICATION CLIENT</code>, <code class="literal">SHOW
      DATABASES</code> and <code class="literal">SUPER</code> rights:
    </p><pre class="programlisting">GRANT SELECT, REPLICATION CLIENT, SHOW DATABASES, SUPER, PROCESS
  ON *.* 
  TO  '<em class="replaceable"><code>mysqluser</code></em>'@'<em class="replaceable"><code>localhost</code></em>' 
  IDENTIFIED BY '<em class="replaceable"><code>agent_password</code></em>';
</pre><p>
      For security reasons, you may wish to limit the
      <code class="literal">CREATE</code> and <code class="literal">INSERT</code> privileges
      to the agent so that it can only create tables within the
      <code class="literal">mysql</code> database:
    </p><pre class="programlisting">GRANT CREATE, INSERT
  ON mysql.* 
  TO  '<em class="replaceable"><code>mysqluser</code></em>'@'<em class="replaceable"><code>localhost</code></em>' 
  IDENTIFIED BY '<em class="replaceable"><code>agent_password</code></em>';
</pre><p>
      To enable replication discovery to work, you should also grant the
      <code class="literal">SELECT</code> privilege on the
      <code class="literal">mysql.inventory</code> table for each user with
      replication privileges on the corresponding replication master.
      This is required to let the MySQL Enterprise Monitor Agent read the replication
      master UUID. For example:
    </p><pre class="programlisting">GRANT SELECT
  ON mysql.inventory 
  TO  '<em class="replaceable"><code>replicationuser</code></em>'@'<em class="replaceable"><code>%</code></em>' 
  IDENTIFIED BY '<em class="replaceable"><code>replication_password</code></em>';
</pre><p>
      If the agent is unable to access the information from the table
      then a warning containing this information will be written to the
      agent log.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        You may want to disable logging for the grant statement to
        prevent the grant information being replicated to the slaves. If
        this is the case, execute the statement <code class="literal">SET
        SQL_LOG_BIN=0</code> before you execute the above
        <code class="literal">GRANT</code> statement.
      </p></div><p>
      In a typical configuration, the agent runs on the same machine as
      the MySQL server it is monitoring so the host name will be
      <em class="replaceable"><code>localhost</code></em>. However, this will change if
      the agent is running on a machine other than the one that hosts
      the monitored MySQL server. In this case, change
      <em class="replaceable"><code>localhost</code></em> to the appropriate value. For
      more information about remote monitoring see
      <a href="mem-introduction.html#mem-install-agent-remote" title="15.3.3.6.4. Configuring an Agent to Monitor a Remote MySQL Server">Section 15.3.3.6.4, “Configuring an Agent to Monitor a Remote MySQL Server”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-install-agent-windows"></a>15.3.3.2. Installing the Agent on Microsoft Windows</h4></div></div></div><p>
      To install the MySQL Enterprise Monitor Agent on Windows, double-click the
      <code class="filename">mysqlmonitoragent-<em class="replaceable"><code>version</code></em>-windows-installer.exe</code>
      (where <em class="replaceable"><code>version</code></em> indicates the three-part
      version number) installer.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        In order to install the agent as a Windows service, you must do
        the installation as a privileged user.
      </p><p>
        On Windows Vista, if user account control is on, an operating
        system dialog box requests confirmation of the installation.
      </p></div><p>
      You may also install the Monitor Agent in
      <code class="literal">unattended</code> mode. This is especially useful if
      you are doing multiple installations. For more information on this
      topic see, <a href="mem-introduction.html#mem-unattended-installation" title="15.3.4. Unattended Installation">Section 15.3.4, “Unattended Installation”</a>.
    </p><div class="orderedlist"><ol type="1"><li><p>
          First, select the language for the MySQL Enterprise Monitor Agent
          installation. Click <span class="guibutton">OK</span> to continue
          installation.
        </p><div class="figure"><a name="fig-agent-install-win1"></a><p class="title"><b>Figure 15.13. MySQL Enterprise Monitor: Installing Agent on Windows: Language
            Selection</b></p><div class="mediaobject"><img src="images/agent-install-win1.png" width="242" height="161" alt="MySQL Enterprise Monitor: Installing
              Agent on Windows: Language Selection"></div></div></li><li><p>
          Click <span class="guibutton">Next</span> to start the installation
          process.
        </p></li><li><p>
          Select the installation directory. The default installation
          directory is <code class="filename">C:\Program
          Files\MySQL\Enterprise\Agent</code>. Select the
          installation directory, or type the new directory location.
          Click <span class="guibutton">Next</span> to continue the installation
          process.
        </p><div class="figure"><a name="fig-agent-install-win3"></a><p class="title"><b>Figure 15.14. MySQL Enterprise Monitor: Installing Agent on Windows: Installation
            Directory</b></p><div class="mediaobject"><img src="images/agent-install-win3.png" width="506" height="432" alt="MySQL Enterprise Monitor: Installing
              Agent on Windows: Installation Directory"></div></div></li><li><p>
          You need to specify the information about the MySQL server
          that you want to monitor. You must enter the IP address or
          host name of the host you want to monitor, and the port, user
          name and password that you will use to connect to the MySQL
          server. If you want to confirm that the MySQL server is
          currently reachable using the information, ensure that the
          <span class="guilabel">Validate MySQL host name or IP address</span>
          checkbox is selected.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Currently, on Windows, the service agent only includes support for connecting to the server to be monitored via TCP/IP, so if the server has been started with <code class="option">--skip-networking</code> it cannot be monitored.</p><p>If the MySQL server to be monitored has been started using the command option <code class="option">--bind-address</code> then the server will only listen for connections on the IP address specified, that is, the IP address of the MySQL server. If the service agent has been started using TCP/IP networking and the default address of 127.0.0.1 it will not be able to connect to the server to be monitored. Also, if “<span class="quote">localhost</span>” is specified as the host name during agent configuration, a connection will not be established, as the server will be listening for connections on the address specified with the <code class="option">--bind-address</code> option, not 127.0.0.1.</p></div><div class="figure"><a name="fig-agent-install-win4"></a><p class="title"><b>Figure 15.15. MySQL Enterprise Monitor: Installing Agent on Windows: Monitored
            Database Information</b></p><div class="mediaobject"><img src="images/agent-install-win4.png" width="506" height="432" alt="MySQL Enterprise Monitor: Installing
              Agent on Windows: Monitored Database Information"></div></div><p>
          Click <span class="guibutton">Next</span> to continue the
          installation.
        </p></li><li><p>
          If you want to use Query Analyzer, then you need to enable the
          MySQL Enterprise Monitor Agent Proxy. The Proxy is enabled by default. If you
          disable the Proxy during installation, you will need to enable
          it later before you are able to use Query Analysis. For more
          information on Query Analyzer, see
          <a href="mem-introduction.html#mem-query-analysis" title="15.10. The Query Analyzer Page">Section 15.10, “The Query Analyzer Page”</a>.
        </p><p>
          When Proxy is enabled, MySQL Enterprise Monitor Agent listens on a network
          port for client applications, and forwards the connections to
          the backend MySQL server. You can change the port number that
          MySQL Enterprise Monitor Agent listens for connections The default port is
          4040.
        </p><div class="figure"><a name="fig-agent-install-win5"></a><p class="title"><b>Figure 15.16. MySQL Enterprise Monitor: Installing Agent on Windows: Query Analyzer
            Configuration</b></p><div class="mediaobject"><img src="images/agent-install-win5.png" width="506" height="432" alt="MySQL Enterprise Monitor: Installing
              Agent on Windows: Query Analyzer Configuration"></div></div></li><li><p>
          The MySQL Enterprise Service Manager that you want to use must be configured
          during installation. The host name, port and agent
          authentication information must be entered. If you have
          already installed MySQL Enterprise Service Manager then you can locate the
          information in the installation report file created during
          installation. Enter the required information and then click
          <span class="guibutton">Next</span> to continue.
        </p><div class="figure"><a name="fig-agent-install-win6"></a><p class="title"><b>Figure 15.17. MySQL Enterprise Monitor: Installing Agent on Windows: MySQL Enterprise Service Manager
            Options</b></p><div class="mediaobject"><img src="images/agent-install-win6.png" width="506" height="432" alt="MySQL Enterprise Monitor: Installing
              Agent on Windows: MySQL Enterprise Service Manager Options"></div></div></li><li><p>
          You will be provided with a Configuration Report containing
          the information that you have entered during the installation.
          Check the information provided in the report. If you see a
          problem, use <span class="guibutton">Back</span> to go back to the
          configuration screen and change the information. If the
          information is correct, click <span class="guibutton">Next</span> to
          continue.
        </p></li><li><p>
          You are given a final opportunity to change the installation
          parameters. Click <span class="guibutton">Next</span> to start the
          installation process.
        </p></li><li><p>
          Once the agent has been installed, you will get a confirmation
          message. Click <span class="guibutton">Next</span> to finalize the
          installation.
        </p></li><li><p>
          You can start the MySQL Enterprise Monitor Agent automatically now the
          installation has been completed. To allow the agent to be
          started, leave the checkbox selected. To start the agent
          separately, uncheck the checkbox. Click
          <span class="guibutton">Finish</span> to exit the installation.
        </p></li></ol></div><p>
      Once the Monitor Agent is installed, it needs to be started. For
      information on how to start and stop the Agent, see
      <a href="mem-introduction.html#mem-starting-agent-windows" title="15.3.3.5.1. Starting/Stopping the Agent on Windows">Section 15.3.3.5.1, “Starting/Stopping the Agent on Windows”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-install-agent-osx"></a>15.3.3.3. Installing the Agent on Mac OS X</h4></div></div></div><p>
      To install the MySQL Enterprise Monitor Agent on Mac OS X, decompress the
      <code class="filename">mysqlmonitoragent-<em class="replaceable"><code>version</code></em>-installer.app.zip</code>
      and then run the
      <code class="filename">mysqlenterpriseagent-<em class="replaceable"><code>version</code></em>-installer</code>
      application.
    </p><div class="orderedlist"><ol type="1"><li><p>
          First, select the language for the MySQL Enterprise Monitor Agent
          installation. Click <span class="guibutton">OK</span> to continue
          installation.
        </p><div class="figure"><a name="fig-agent-install-osx1"></a><p class="title"><b>Figure 15.18. MySQL Enterprise Monitor: Installing Agent on Mac OS X: Language
            Selection</b></p><div class="mediaobject"><img src="images/agent-install-osx1.png" width="284" height="140" alt="MySQL Enterprise Monitor: Installing
              Agent on Mac OS X: Language Selection"></div></div></li><li><p>
          Click <span class="guibutton">Next</span> to start the installation
          process.
        </p></li><li><p>
          Select the installation directory. The default installation
          directory is <code class="filename">C:\Program
          Files\MySQL\Enterprise\Agent</code>. Select the
          installation directory, or type the new directory location.
        </p><p>
          You also need to select the method that the agent will use to
          communicate with the MySQL server. You can choose either to
          use a TCP/IP (network) connection, or a Socket (local)
          connection. Choose the connection method, and click
          <span class="guibutton">Next</span>.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The service agent always associates “<span class="quote">localhost</span>” with the TCP/IP address 127.0.0.1, not the MySQL socket. This is in contrast to the MySQL Command Line Tool, which connects via the MySQL socket by default on Unix, if the hostname “<span class="quote">localhost</span>” is specified.</p><p>If the MySQL server you wish to monitor has been started with the <code class="option">--skip-networking</code> command option then you will not be able to connect to it via TCP/IP, as the server will not listen for TCP/IP connections. In this case the service agent will need to be configured to use the MySQL socket. This can be done during installation by selecting “<span class="quote">socket</span>” rather than “<span class="quote">TCP/IP</span>” and then specifying the MySQL socket name. This can also be configured after installation by editing the <code class="filename">agent-instance.ini</code> configuration file, for further information on this refer to <a href="mem-introduction.html#mem-cfg-agent-ini" title="15.3.3.6.2. MySQL Server (agent-instance.ini) Configuration">Section 15.3.3.6.2, “MySQL Server (<code class="literal">agent-instance.ini</code>) Configuration”</a>.</p><p>If the MySQL server to be monitored has been started using the command option <code class="option">--bind-address</code> then the server will only listen for connections on the IP address specified, that is, the IP address of the MySQL server. If the service agent has been started using TCP/IP networking and the default address of 127.0.0.1 it will not be able to connect to the server to be monitored. Also, if “<span class="quote">localhost</span>” is specified as the host name during agent configuration, a connection will not be established, as the server will be listening for connections on the address specified with the <code class="option">--bind-address</code> option, not 127.0.0.1.</p></div><div class="figure"><a name="fig-agent-install-osx3"></a><p class="title"><b>Figure 15.19. MySQL Enterprise Monitor: Installing Agent on Mac OS X: Installation
            Directory</b></p><div class="mediaobject"><img src="images/agent-install-osx3.png" width="500" height="462" alt="MySQL Enterprise Monitor: Installing
              Agent on Mac OS X: Installation Directory"></div></div></li><li><p>
          You need to specify the information about the MySQL server
          that you want to monitor. The configuration information you
          enter will depend on the connection method selected in the
          previous screen.
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              If you chose TCP/IP as the connection method, you must
              enter the IP address or host name of the host you want to
              monitor, and the port, user name and password that you
              will use to connect to the MySQL server. If you want to
              confirm that the MySQL server is currently reachable using
              the information, ensure that the <span class="guilabel">Validate MySQL
              host name or IP address</span> checkbox is selected.
            </p><div class="figure"><a name="fig-agent-install-osx4"></a><p class="title"><b>Figure 15.20. MySQL Enterprise Monitor: Installing Agent on Mac OS X: Monitored
                Database Information</b></p><div class="mediaobject"><img src="images/agent-install-osx4.png" width="500" height="462" alt="MySQL Enterprise Monitor: Installing
                  Agent on Mac OS X: Monitored Database
                  Information"></div></div></li><li><p>
              If you chose Socket as the connection method, you must
              enter the full path name to the Unix socket created by
              your MySQL server, and the user name and password that
              will be used to authenticate with the server. Typical
              values include <code class="filename">/tmp/mysql.sock</code> and
              <code class="filename">/var/mysql/mysql.sock</code>.
            </p><div class="figure"><a name="fig-agent-install-osx5"></a><p class="title"><b>Figure 15.21. MySQL Enterprise Monitor: Installing Agent on Mac OS X: Monitored
                Database Information</b></p><div class="mediaobject"><img src="images/agent-install-osx5.png" width="500" height="462" alt="MySQL Enterprise Monitor: Installing
                  Agent on Mac OS X: Monitored Database
                  Information"></div></div></li></ul></div><p>
          Click <span class="guibutton">Next</span> to continue the
          installation.
        </p></li><li><p>
          If you want to use Query Analyzer, then you need to enable the
          MySQL Enterprise Monitor Agent Proxy. The Proxy is enabled by default. If you
          disable the Proxy during installation, you will need to enable
          it later before you are able to use Query Analysis. For more
          information on Query Analyzer, see
          <a href="mem-introduction.html#mem-query-analysis" title="15.10. The Query Analyzer Page">Section 15.10, “The Query Analyzer Page”</a>.
        </p><p>
          When Proxy is enabled, MySQL Enterprise Monitor Agent listens on a network
          port for client applications, and forwards the connections to
          the backend MySQL server. You can change the port number that
          MySQL Enterprise Monitor Agent listens for connections The default port is
          4040.
        </p><div class="figure"><a name="fig-agent-install-osx6"></a><p class="title"><b>Figure 15.22. MySQL Enterprise Monitor: Installing Agent on Mac OS X: Query Analyzer
            Configuration</b></p><div class="mediaobject"><img src="images/agent-install-osx6.png" width="500" height="462" alt="MySQL Enterprise Monitor: Installing
              Agent on Mac OS X: Query Analyzer Configuration"></div></div></li><li><p>
          The MySQL Enterprise Service Manager that you want to use must be configured
          during installation. The host name, port and agent
          authentication information must be entered. If you have
          already installed MySQL Enterprise Service Manager then you can locate the
          information in the installation report file created during
          installation. Enter the required information and then click
          <span class="guibutton">Next</span> to continue.
        </p><div class="figure"><a name="fig-agent-install-osx7"></a><p class="title"><b>Figure 15.23. MySQL Enterprise Monitor: Installing Agent on Mac OS X: MySQL Enterprise Service Manager
            Options</b></p><div class="mediaobject"><img src="images/agent-install-osx7.png" width="500" height="462" alt="MySQL Enterprise Monitor: Installing
              Agent on Mac OS X: MySQL Enterprise Service Manager Options"></div></div></li><li><p>
          You will be provided with a Configuration Report containing
          the information that you have entered during the installation.
          Check the information provided in the report. If you see a
          problem, use <span class="guibutton">Back</span> to go back to the
          configuration screen and change the information. If the
          information is correct, click <span class="guibutton">Next</span> to
          continue.
        </p></li><li><p>
          You are given a final opportunity to change the installation
          parameters. Click <span class="guibutton">Next</span> to start the
          installation process.
        </p></li><li><p>
          Once the agent has been installed, you will get a confirmation
          message. Click <span class="guibutton">Next</span> to finalize the
          installation.
        </p></li><li><p>
          You can start the MySQL Enterprise Monitor Agent automatically now the
          installation has been completed. To allow the agent to be
          started, leave the checkbox selected. To start the agent
          separately, uncheck the checkbox. Click
          <span class="guibutton">Finish</span> to exit the installation.
        </p></li></ol></div><p>
      Once the Monitor Agent is installed, it needs to be started. For
      information on how to start and stop the Agent, see
      <a href="mem-introduction.html#mem-starting-agent-osx" title="15.3.3.5.2. Starting/Stopping the Agent on Mac OS X">Section 15.3.3.5.2, “Starting/Stopping the Agent on Mac OS X”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-install-agent-unix"></a>15.3.3.4. Installing the Monitor Agent on Unix</h4></div></div></div><p>
      As a prerequisite for installing the MySQL Enterprise Monitor Agent on Linux
      systems you must have the Linux Standards Base (LSB)
      initialization functions installed.
    </p><p>
      To install the agent navigate to the directory that contains the
      file,
      <code class="filename">mysqlmonitoragent-<em class="replaceable"><code>version</code></em>-installer.bin</code>
      (where <em class="replaceable"><code>version</code></em> indicates the three-part
      version number, the OS, and the architecture). Ensure that this
      file is executable by typing:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>chmod +x mysqlmonitoragent-<em class="replaceable"><code>version</code></em>-installer.bin</code></strong>
</pre><p>
      To install to the default directory
      (<code class="filename">/opt/mysql/enterprise/agent</code>) you need to be
      logged in as <code class="literal">root</code>. Installing as an
      unprivileged user installs to the
      <code class="filename">/home/<em class="replaceable"><code>user_name</code></em>/mysql/enterprise/agent</code>
      directory.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        If you install the agent as an unprivileged user, it will not
        automatically start up on rebooting.
      </p></div><p>
      What follows describes installation from the command line. You may
      install the Monitor Agent graphically by running the installer
      from within a windows manager. In both cases the steps are
      identical. You may also install the Monitor Agent in
      <code class="literal">unattended</code> mode. This is especially useful if
      you are doing multiple installations. For more information on this
      topic see <a href="mem-introduction.html#mem-unattended-installation" title="15.3.4. Unattended Installation">Section 15.3.4, “Unattended Installation”</a>.
    </p><p>
      Begin installation from the command line by typing:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./mysqlmonitoragent-<em class="replaceable"><code>version</code></em>-installer.bin --mode text</code></strong>
</pre><p>
      The various options are shown in what follows. Default values are
      indicated by square brackets; to select them press
      <span class="guibutton">Enter</span>. Otherwise enter a value of your
      choosing.
    </p><div class="orderedlist"><ol type="1"><li><p>
          First, you must select the Language you want to use during the
          installation process:
        </p><pre class="programlisting">Language Selection

Please select the installation language
[1] English
[2] Japanese
Please choose an option [1] : 
</pre></li><li><p>
          Next, specify the directory where you want the agent
          installed:
        </p><pre class="programlisting">----------------------------------------------------------------------------
Welcome to the MySQL Enterprise Monitor Agent Setup Wizard.

----------------------------------------------------------------------------
Please specify the directory where MySQL Enterprise Monitor Agent will be installed

Installation directory [/opt/mysql/enterprise/agent]:   
</pre></li><li><p>
          Specify the MySQL server that you want to monitor. First, you
          must specify whether you want to use a TCP/IP or socket-based
          connection to communicate with the MySQL Server:
        </p><pre class="programlisting">How will the agent connect to the database it is monitoring?


[1] TCP/IP
[2] Socket
Please choose an option [1] :</pre><p>
          If you select TCP/IP, then you will be asked to enter the
          TCP/IP address and port number:
        </p><pre class="programlisting">----------------------------------------------------------------------------
Monitored Database Information

IMPORTANT: The agent user account specified below requires special MySQL privileges.

Visit the following URL for more information:
https://enterprise.mysql.com/docs/monitor/2.0/en/mem-install.html#mem-agent-rights

MySQL hostname or IP address [127.0.0.1]: 



Validate MySQL hostname or IP address [Y/n]: 


MySQL Port [3306]: 

</pre><p>
          If you select Socket, then you will be asked to provide the
          path name to the MySQL socket. Typical values are
          <code class="filename">/tmp/mysql.sock</code>,
          <code class="filename">/var/lib/mysql.sock</code>, or
          <code class="filename">/var/run/mysql.sock</code>.
        </p><pre class="programlisting">----------------------------------------------------------------------------
Monitored Database Information

IMPORTANT: The agent user account specified below requires special MySQL privileges.

Visit the following URL for more information:
https://enterprise.mysql.com/docs/monitor/2.0/en/mem-install.html#mem-agent-rights

MySQL Socket []: 
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The service agent always associates “<span class="quote">localhost</span>” with the TCP/IP address 127.0.0.1, not the MySQL socket. This is in contrast to the MySQL Command Line Tool, which connects via the MySQL socket by default on Unix, if the hostname “<span class="quote">localhost</span>” is specified.</p><p>If the MySQL server you wish to monitor has been started with the <code class="option">--skip-networking</code> command option then you will not be able to connect to it via TCP/IP, as the server will not listen for TCP/IP connections. In this case the service agent will need to be configured to use the MySQL socket. This can be done during installation by selecting “<span class="quote">socket</span>” rather than “<span class="quote">TCP/IP</span>” and then specifying the MySQL socket name. This can also be configured after installation by editing the <code class="filename">agent-instance.ini</code> configuration file, for further information on this refer to <a href="mem-introduction.html#mem-cfg-agent-ini" title="15.3.3.6.2. MySQL Server (agent-instance.ini) Configuration">Section 15.3.3.6.2, “MySQL Server (<code class="literal">agent-instance.ini</code>) Configuration”</a>.</p><p>If the MySQL server to be monitored has been started using the command option <code class="option">--bind-address</code> then the server will only listen for connections on the IP address specified, that is, the IP address of the MySQL server. If the service agent has been started using TCP/IP networking and the default address of 127.0.0.1 it will not be able to connect to the server to be monitored. Also, if “<span class="quote">localhost</span>” is specified as the host name during agent configuration, a connection will not be established, as the server will be listening for connections on the address specified with the <code class="option">--bind-address</code> option, not 127.0.0.1.</p></div></li><li><p>
          Specify the user credentials for the MySQL server that you
          want to monitor:
        </p><pre class="programlisting">
MySQL Username []: <em class="replaceable"><code>service_agent</code></em> 

MySQL Password :

Re-enter :
</pre></li><li><p>
          Select whether you want to enable Query Analyzer. If you
          disable the Query Analyzer during installation, you will need
          to manually edit the configuration file to re-enable the Query
          Analyzer functionality. If you enable Query Analysis (Proxy),
          you must specify the port on which the agent will listen for
          queries.
        </p><pre class="programlisting">----------------------------------------------------------------------------
Query Analyzer Configuration

MySQL Proxy enables query monitoring and analysis by listening on a specified port for client connections that are then passed through to a backend MySQL database server. It is not needed for basic monitoring functionality.

Click here for more information.
 [Y/n]: 

Enable Proxy (recommended) [Y/n]: 


Proxy Port [4040]: 

Backend Host: 127.0.0.1   (cannot be changed)

Backend Port: 3306   (cannot be changed)
</pre><p>
          For more information on enabling Query Analyzer if you
          disabled it during installation, see
          <a href="mem-introduction.html#mem-query-analysis" title="15.10. The Query Analyzer Page">Section 15.10, “The Query Analyzer Page”</a>.
        </p></li><li><p>
          Enter the details of the MySQL Enterprise Service Manager that you want to use
          with this agent. The configuration information required is
          available within the installation report generated when you
          installed MySQL Enterprise Service Manager
        </p><pre class="programlisting">    
----------------------------------------------------------------------------

MySQL Enterprise Monitor Options


Hostname or IP address []: <em class="replaceable"><code>192.168.0.197</code></em> 

Tomcat Server Port [18080]: 

Tomcat SSL Port [18443]:
</pre><p>
          The agent and MySQL Enterprise Service Manager support using SSL for
          communication. If you want to enable SSL communication between
          the agent and the MySQL Enterprise Service Manager, you must reply
          <span><strong class="keycap">Y</strong></span> to the following question.
        </p><pre class="programlisting">
Use SSL? [y/N]: 

Agent Username [agent]:  

Agent Password :

Re-enter : 

----------------------------------------------------------------------------
    </pre></li><li><p>
          Before installation starts, you will be provided with a
          summary of the installation settings that you have specified:
        </p><pre class="programlisting">Here are the settings you specified: 

Installation directory: /opt/mysql/enterprise/agent 

Monitored MySQL Database:  
-------------------------
Hostname or IP address: 127.0.0.1
Port: 3306
MySQL username: <em class="replaceable"><code>mysql_user</code></em>
MySQL password: <em class="replaceable"><code>password</code></em>

Query Analyzer Configuration
-------------------------
Proxy Enabled: yes
Proxy Port: 4040

MySQL Enterprise Manager: 
------------------------------

Hostname or IP address: <em class="replaceable"><code>192.168.0.197</code></em>

Tomcat Server Port: 18080
Tomcat SSL Port: 18443
Use SSL: 0
Agent username: <em class="replaceable"><code>agent</code></em>

Press [Enter] to continue : 


----------------------------------------------------------------------------
  
Setup is now ready to begin installing MySQL Enterprise Monitor Agent on your computer.

Do you want to continue? [Y/n]: y
    </pre></li><li><p>
          The installer will copy the necessary files and create the
          configuration file required to run the agent:
        </p><pre class="programlisting">----------------------------------------------------------------------------
Please wait while Setup installs MySQL Enterprise Monitor Agent on your computer.

 Installing
 0% ______________ 50% ______________ 100%
 #########################################

----------------------------------------------------------------------------
Info to start MySQL Agent

The MySQL agent was successfully installed. To start the MySQL Agent please 
invoke:
/opt/mysql/enterprise/agent/etc/init.d/mysql-monitor-agent start
Press [Enter] to continue : 

----------------------------------------------------------------------------
Setup has finished installing MySQL Enterprise Monitor Agent on your computer.
</pre></li><li><p>
          Finally, you can read the supplied <code class="filename">README</code>
          file when prompted. The file is provided within the
          <code class="filename">share/doc/README_en.txt</code> file within the
          agent installation directory if you would like to read this
          file separately.
        </p></li></ol></div><p>
      For information on starting the agent, see
      <a href="mem-introduction.html#mem-starting-agent-unix" title="15.3.3.5.3. Starting/Stopping the Agent on Unix">Section 15.3.3.5.3, “Starting/Stopping the Agent on Unix”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="agent-starting-stopping"></a>15.3.3.5. Starting/Stopping the MySQL Enterprise Monitor Agent</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-starting-agent-windows">15.3.3.5.1. Starting/Stopping the Agent on Windows</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-starting-agent-osx">15.3.3.5.2. Starting/Stopping the Agent on Mac OS X</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-starting-agent-unix">15.3.3.5.3. Starting/Stopping the Agent on Unix</a></span></dt></dl></div><p>
      The MySQL Enterprise Monitor Agent can be started and stopped at any time. When
      not running, information about the current status of your server
      will not be available, and MySQL Enterprise Service Manager will provide a warning
      if an agent and the MySQL server that it monitors is unavailable.
    </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
        If you are using Query Analyzer, then turning off the agent will
        prevent your applications from communicating with the MySQL
        server. See <a href="mem-introduction.html#mem-query-analysis" title="15.10. The Query Analyzer Page">Section 15.10, “The Query Analyzer Page”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-starting-agent-windows"></a>15.3.3.5.1. Starting/Stopping the Agent on Windows</h5></div></div></div><p>
        You have the option of starting the Monitor Agent from the final
        installation screen. Otherwise you can do this by going to the
        <code class="literal">Start Menu</code> and under
        <code class="literal">Programs</code> find <code class="literal">MySQL</code> and
        then the <code class="literal">MySQL Enterprise Monitor Agent</code> entry. Simply select
        the <code class="literal">Start MySQL Enterprise Monitor Agent</code> option.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          On Windows Vista, starting the agent requires administrative
          privileges — you must be logged in as an administrator.
          To start or stop the agent right click the menu item and
          choose the <span class="guimenu">Run as Administrator</span> menu
          option. The same restriction applies to starting the agent
          from the command line. To open an administrator
          <code class="literal">cmd</code> window right-click the
          <code class="literal">cmd</code> icon and choose the <span class="guimenu">Run as
          Administrator</span> menu option.
        </p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          To report its findings, the agent needs to be able to connect
          to the dashboard through the port specified during
          installation. The default value for this port is
          <code class="literal">18080</code>; ensure that this port is not
          blocked. If you need help troubleshooting the agent
          installation see,
          <a href="mem-introduction.html#mem-troubleshooting-agent-start" title="15.3.3.7. Troubleshooting the Agent">Section 15.3.3.7, “Troubleshooting the Agent”</a>.
        </p></div><p>
        Alternately, you can start the agent from the command line by
        entering:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>sc start MySQLEnterpriseMonitorAgent</code></strong>
</pre><p>
        or:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>net start MySQLEnterpriseMonitorAgent</code></strong>
</pre><p>
        You can also start the agent by issuing the command,
        <span><strong class="command">agentctl.bat start</strong></span>. Stop the agent by passing
        the argument, <code class="literal">stop</code>. This batch file is found
        in the <code class="filename">Agent</code> directory.
      </p><p>
        For confirmation that the service is running you can open the
        Microsoft Management Console Services window. To do this go to
        the Control Panel, find <code class="literal">Administrative Tools</code>
        and click on the link to <code class="literal">Services</code>. Locate the
        service named <code class="literal">MySQL Enterprise Monitor Agent</code>
        and look under the <span class="guilabel">Status</span> column.
      </p><p>
        You may also start the agent from this window rather than from
        the <code class="literal">Start</code> menu or the command line. Simply
        right click <code class="literal">MySQL Enterprise Monitor Agent</code> and choose
        <code class="literal">Start</code> from the pop-up menu. Starting the
        agent from this window opens an error dialog box if the agent
        cannot connect to the MySQL server it is monitoring. No error is
        displayed if the agent is unable to connect to the
        MySQL Enterprise Service Manager.
      </p><p>
        The pop-up menu for starting the agent also offers the option of
        stopping the agent. To stop the agent from the command line you
        only need type:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>sc stop MySQLEnterpriseMonitorAgent</code></strong>
</pre><p>
        or:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>net stop MySQLEnterpriseMonitorAgent</code></strong>
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <code class="literal">MySQLEnterpriseMonitorAgent</code> is the default
          name of the Monitor Agent service. If you have added an
          additional agent as described in
          <a href="mem-introduction.html#mem-cfg-agent-ini" title="15.3.3.6.2. MySQL Server (agent-instance.ini) Configuration">Section 15.3.3.6.2, “MySQL Server (<code class="literal">agent-instance.ini</code>) Configuration”</a>, replace
          <code class="literal">MySQLEnterpriseMonitorAgent</code> with the
          appropriate agent name.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-starting-agent-osx"></a>15.3.3.5.2. Starting/Stopping the Agent on Mac OS X</h5></div></div></div><p>
        The script to start the agent on Mac OS X is located in the
        <code class="filename">/Applications/mysql/enterprise/agent/etc/init.d</code>
        directory. To start the agent navigate to this directory and at
        the command line type:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./mysql-monitor-agent start</code></strong>
</pre><p>
        To stop the agent, use the <code class="literal">stop</code> command:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./mysql-monitor-agent stop</code></strong>
</pre><p>
        If the agent cannot be stopped because the
        <code class="literal">pid</code> file that contains the agent's process ID
        cannot be found, you can use <a href="sql-syntax.html#kill" title="12.5.7.4. KILL Syntax"><span><strong class="command">kill</strong></span></a> to send a
        <code class="literal">TERM</code> signal to the running process:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>kill -TERM <em class="replaceable"><code>PID</code></em></code></strong>
</pre><p>
        If you are running more than one agent on a specific machine,
        you must also specify the path to the <code class="filename">ini</code>
        file when you are stopping the agent. Executing
        <code class="filename">mysql-monitor-agent stop</code> without an
        <code class="filename">ini</code> file will only stop the agent
        associated with the default <code class="filename">ini</code> file.
      </p><p>
        For more information about creating additional agents see,
        <a href="mem-introduction.html#mem-cfg-agent-ini" title="15.3.3.6.2. MySQL Server (agent-instance.ini) Configuration">Section 15.3.3.6.2, “MySQL Server (<code class="literal">agent-instance.ini</code>) Configuration”</a>.
      </p><p>
        To verify that the agent is running use the following command:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./mysql-monitor-agent status</code></strong>
</pre><p>
        The resulting message indicates whether the agent is running or
        not. If the agent is not running, use the following command to
        view the last ten entries in the agent log file:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>tail /Applications/mysql/enterprise/agent/log/mysql-monitor-agent.log</code></strong>
</pre><p>
        For further information on troubleshooting the agent see
        <a href="mem-introduction.html#mem-troubleshooting-agent-start" title="15.3.3.7. Troubleshooting the Agent">Section 15.3.3.7, “Troubleshooting the Agent”</a>.
      </p><p>
        Installation creates the directory
        <code class="filename">/Applications/mysql/enterprise/agent</code> with
        the settings stored in the
        <code class="literal">mysql-monitor-agent.ini</code> file located directly
        below this directory in the <code class="filename">etc</code> directory.
        The <code class="filename">log</code> directory is also located
        immediately below the <code class="filename">agent</code> directory.
      </p><p>
        To see all the command-line options available when running the
        service agent, navigate to the
        <code class="filename">/Applications/mysql/enterprise/agent/etc/init.d</code>
        directory and execute <strong class="userinput"><code>mysql-monitor-agent</code></strong>
        <code class="option">help</code>. You should see the message:
      </p><pre class="programlisting">Usage: ./mysql-monitor-agent {start|stop|restart|status} [ini-file-name]
</pre><p>
        The <code class="literal">ini-file-name</code> option only needs to be
        used if the <code class="filename">ini</code> file is not installed to
        the default location or you have changed the name of the
        <code class="filename">ini</code> file. You will need to use this option
        if you are installing more than one agent on the same machine.
        Pass the full path to the <code class="filename">ini</code> file. For
        example, after navigating to the
        <code class="filename">/Applications/mysql/enterprise/agent/etc/init.d</code>
        directory, issue the command:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./mysql-monitor-agent start /Applications/mysql/enterprise/agent/etc/<em class="replaceable"><code>new-mysql-monitor-agent</code></em>.ini</code></strong>
</pre><p>
        If you installed the agent as <code class="literal">root</code>, on reboot
        the <code class="literal">mysql-monitor-agent</code> daemon will start up
        automatically. If you installed the agent as an unprivileged
        user, you must manually start the agent on reboot or write a
        script to perform this task. Likewise, if you have added an
        additional agent as described in
        <a href="mem-introduction.html#mem-cfg-agent-ini" title="15.3.3.6.2. MySQL Server (agent-instance.ini) Configuration">Section 15.3.3.6.2, “MySQL Server (<code class="literal">agent-instance.ini</code>) Configuration”</a>, and you wish to start this
        agent on reboot, create a system initialization script
        appropriate to your operating system. To determine whether the
        agent is running or not navigate to the
        <code class="filename">init.d</code> directory and issue the command
        <strong class="userinput"><code>./mysql-monitor-agent status</code></strong>.
      </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          To report its findings, the agent needs to be able to connect
          to the dashboard through the port specified during
          installation. The default value for this port is
          <code class="literal">18080</code>; ensure that this port is not
          blocked. If you need help troubleshooting the agent
          installation see,
          <a href="mem-introduction.html#mem-troubleshooting-agent-start" title="15.3.3.7. Troubleshooting the Agent">Section 15.3.3.7, “Troubleshooting the Agent”</a>.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-starting-agent-unix"></a>15.3.3.5.3. Starting/Stopping the Agent on Unix</h5></div></div></div><p>
        When installation is finished, you can start the service agent
        from the command line by typing:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>/opt/mysql/enterprise/agent/etc/init.d/mysql-monitor-agent start</code></strong>
</pre><p>
        For a non-root installation the command would be:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>/home/&lt;user name&gt;/mysql/enterprise/agent/etc/init.d/mysql-monitor-agent start</code></strong></pre><p>
        To stop the agent, use the <code class="literal">stop</code> command:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./mysql-monitor-agent stop</code></strong>
</pre><p>
        If the agent cannot be stopped because the
        <code class="literal">pid</code> file that contains the agent's process ID
        cannot be found, you can use <a href="sql-syntax.html#kill" title="12.5.7.4. KILL Syntax"><span><strong class="command">kill</strong></span></a> to send a
        <code class="literal">TERM</code> signal to the running process:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>kill -TERM <em class="replaceable"><code>PID</code></em></code></strong>
</pre><p>
        If you are running more than one agent on a specific machine,
        you must also specify the path to the <code class="filename">ini</code>
        file when you are stopping the agent. Executing
        <code class="filename">mysql-monitor-agent stop</code> without an
        <code class="filename">ini</code> file will only stop the agent
        associated with the default <code class="filename">ini</code> file.
        Likewise, when checking the status of an agent specify its
        <code class="filename">ini</code> file.
      </p><p>
        For more information about creating additional agents see,
        <a href="mem-introduction.html#mem-cfg-agent-ini" title="15.3.3.6.2. MySQL Server (agent-instance.ini) Configuration">Section 15.3.3.6.2, “MySQL Server (<code class="literal">agent-instance.ini</code>) Configuration”</a>.
      </p><p>
        To verify that the agent is running use the following command:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./mysql-monitor-agent status</code></strong>
</pre><p>
        The resulting message indicates whether the agent is running or
        not. If the agent is not running, use the following command to
        view the last ten entries in the agent log file:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>tail /opt/mysql/enterprise/agent/log/mysql-monitor-agent.log</code></strong>
</pre><p>
        For further information on troubleshooting the agent see
        <a href="mem-introduction.html#mem-troubleshooting-agent-start" title="15.3.3.7. Troubleshooting the Agent">Section 15.3.3.7, “Troubleshooting the Agent”</a>.
      </p><p>
        Installation creates the directory
        <code class="filename">/opt/mysql/enterprise/agent</code> with the
        settings stored in the
        <code class="literal">mysql-monitor-agent.ini</code> file located directly
        below this directory in the <code class="filename">etc</code> directory.
        The <code class="filename">log</code> directory is also located
        immediately below the <code class="filename">agent</code> directory.
      </p><p>
        To see all the command-line options available when running the
        service agent, navigate to the
        <code class="filename">/opt/mysql/enterprise/agent/etc/init.d</code>
        directory and execute <strong class="userinput"><code>mysql-monitor-agent</code></strong>
        <code class="option">help</code>. You should see the message:
      </p><pre class="programlisting">Usage: ./mysql-monitor-agent {start|stop|restart|status} [ini-file-name]
</pre><p>
        The <code class="literal">ini-file-name</code> option only needs to be
        used if the <code class="filename">ini</code> file is not installed to
        the default location or you have changed the name of the
        <code class="filename">ini</code> file. You will need to use this option
        if you are installing more than one agent on the same machine.
        Pass the full path to the <code class="filename">ini</code> file. For
        example, after navigating to the
        <code class="filename">/opt/mysql/enterprise/agent/etc/init.d</code>
        directory, issue the command:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./mysql-monitor-agent start /opt/mysql/enterprise/agent/etc/<em class="replaceable"><code>new-mysql-monitor-agent</code></em>.ini</code></strong>
</pre><p>
        If you installed the agent as <code class="literal">root</code>, on reboot
        the <code class="literal">mysql-monitor-agent</code> daemon will start up
        automatically. If you installed the agent as an unprivileged
        user, you must manually start the agent on reboot or write a
        script to perform this task. Likewise, if you have added an
        additional agent as described in
        <a href="mem-introduction.html#mem-cfg-agent-ini" title="15.3.3.6.2. MySQL Server (agent-instance.ini) Configuration">Section 15.3.3.6.2, “MySQL Server (<code class="literal">agent-instance.ini</code>) Configuration”</a>, and you wish to start this
        agent on reboot, create a system initialization script
        appropriate to your operating system. To determine whether the
        agent is running or not navigate to the
        <code class="filename">init.d</code> directory and issue the command
        <strong class="userinput"><code>./mysql-monitor-agent status</code></strong>.
      </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          To report its findings, the agent needs to be able to connect
          to the dashboard through the port specified during
          installation. The default value for this port is
          <code class="literal">18080</code>; ensure that this port is not
          blocked. If you need help troubleshooting the agent
          installation see,
          <a href="mem-introduction.html#mem-troubleshooting-agent-start" title="15.3.3.7. Troubleshooting the Agent">Section 15.3.3.7, “Troubleshooting the Agent”</a>.
        </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-advanced-agent-configuration"></a>15.3.3.6. Advanced Agent Configuration</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-cfg-mysql-monitor-agent-ini">15.3.3.6.1. MySQL Enterprise Monitor Agent (<code class="filename">mysql-monitor-agent.ini</code>)
        Configuration</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-cfg-agent-ini">15.3.3.6.2. MySQL Server (<code class="literal">agent-instance.ini</code>) Configuration</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-install-agent-multiple">15.3.3.6.3. Monitoring Multiple MySQL Servers</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-install-agent-remote">15.3.3.6.4. Configuring an Agent to Monitor a Remote MySQL Server</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-ssh-tunnel">15.3.3.6.5. Monitoring Outside the Firewall with an SSH Tunnel</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-install-new-uuid">15.3.3.6.6. Generating a new UUID</a></span></dt></dl></div><p>
      The MySQL Enterprise Monitor Agent is configured through files located within the
      <code class="filename">etc</code> directory within the directory where you
      installed the agent.
    </p><p>
      Configuration is stored in multiple files, according to a
      predetermined file and directory layout. The primary configuration
      file contains specific information about the agent and how the
      agent communicates with MySQL Enterprise Service Manager. The main configuration is
      located within the <code class="filename">mysql-monitor-agent.ini</code>
      file.
    </p><p>
      Additional configuration files contain information about the MySQL
      server that is being monitored. You can configure which directory
      is used for storing this information within the
      <code class="filename">mysql-monitor-agent.ini</code> file. The default
      location is the <code class="filename">etc/instances</code> directory
      within the MySQL Enterprise Monitor Agent directory.
    </p><p>
      The server you want to monitor should have a directory within the
      specified location, optionally using the name of the server you
      are monitoring, and within that directory, an
      <code class="filename">agent-instance.ini</code> file. This file contains
      the configuration information for connecting to the MySQL server,
      including the host name, port, user credentials and display name.
    </p><p>
      You can see an example of the file layout of the
      <code class="filename">etc</code> directory:
    </p><pre class="programlisting">.
./init.d
./init.d/mysql-monitor-agent
./instances
./instances/agent
./instances/agent/agent-instance.ini
./mysql-monitor-agent.ini
</pre><p>
      For more information on the configuration of the
      <code class="filename">mysql-monitor-agent.ini</code> file, see
      <a href="mem-introduction.html#mem-cfg-mysql-monitor-agent-ini" title="15.3.3.6.1. MySQL Enterprise Monitor Agent (mysql-monitor-agent.ini)
        Configuration">Section 15.3.3.6.1, “MySQL Enterprise Monitor Agent (<code class="filename">mysql-monitor-agent.ini</code>)
        Configuration”</a>. For details on
      the content of the individual MySQL instance configuration files,
      see <a href="mem-introduction.html#mem-cfg-agent-ini" title="15.3.3.6.2. MySQL Server (agent-instance.ini) Configuration">Section 15.3.3.6.2, “MySQL Server (<code class="literal">agent-instance.ini</code>) Configuration”</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-cfg-mysql-monitor-agent-ini"></a>15.3.3.6.1. MySQL Enterprise Monitor Agent (<code class="filename">mysql-monitor-agent.ini</code>)
        Configuration</h5></div></div></div><p>
        The <code class="filename">mysql-monitor-agent.ini</code> files contains
        the base configuration information for the MySQL Enterprise Monitor Agent. The
        file sets the core information about the supported functionality
        for the entire agent.
      </p><p>
        You can see a sample of the configuration file below:
      </p><pre class="programlisting"># WARNING - the UUID defined below must be unique for each agent.
#
# To use this .ini file as a template for configuring additional
# agents, do not simply copy and start a new agent without first
# modifying the UUID.
#
# Refer to the documentation for more detailed information and
# instructions.
# 
# Version: 20080718_230416_r7011

[mysql-proxy]

plugins=proxy,agent
agent-mgmt-hostname = http://agent:password@monitor-server:18080/heartbeat
mysqld-instance-dir= etc/instances
agent-item-files = share/mysql-proxy/items/quan.lua,share/mysql-proxy/items/items-mysql-monitor.xml
proxy-address=:4040
proxy-backend-addresses = 127.0.0.1:3306
proxy-lua-script        = share/mysql-proxy/quan.lua


agent-uuid = 8770ead5-3632-4b29-a413-4a7c92437e26
log-file = mysql-monitor-agent.log
pid-file=/Applications/mysql/enterprise/agent/mysql-monitor-agent.pid
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Do not copy the agent configuration information from one
          machine to another without changing the
          <code class="literal">agent-uuid</code>. Each agent instance must have a
          unique agent id.
        </p></div><p>
        The main configuration information must be located within the
        <code class="literal">[mysql-proxy]</code> section of the configuration
        file. The main configurable parameters within this file are:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">plugins</code> — configures the plugins to
            be used by the agent. When monitoring servers you must have
            the <code class="literal">agent</code> plugin configured. If you want
            to support Query Analyzer then you must also have the
            <code class="literal">proxy</code> module enabled. Plugins should be
            specified as a comma separated list of plugin names.
          </p><p>
            If you selected to support Query Analyzer during
            installation of the agent, the default value will be
            <code class="literal">proxy,agent</code>. If you disabled Query
            Analysis during installation, the default value will be
            <code class="literal">agent</code>.
          </p></li><li><p>
            <code class="literal">log-level</code> — sets the logging level
            of the agent. The default level is
            <code class="literal">message</code>.
          </p><p><a name="mem-log-error-levels"></a>
            Valid values for <code class="literal">log-level</code> are as
            follows:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                <code class="literal">debug</code> — provides detailed
                information about what the agent is doing and the
                information being provided by the agent to the
                MySQL Enterprise Service Manager.
              </p></li><li><p>
                <code class="literal">critical</code> — lists critical
                messages highlighting problems with the agent.
              </p></li><li><p>
                <code class="literal">error</code> — lists error messages.
              </p></li><li><p>
                <code class="literal">warning</code> — provides only warning
                messages generated by the agent.
              </p></li><li><p>
                <code class="literal">message</code> — provides information
                about the agent and basic processing information.
              </p></li><li><p>
                <code class="literal">info</code> — provides messages used
                for informational purposes.
              </p></li></ul></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
              Be careful when setting the <code class="literal">log-level</code>
              to <code class="literal">debug</code>. Doing this will rapidly
              increase the size of your
              <code class="filename">mysql-monitor-agent.log</code> file. To
              avoid disk space problems, put the log files on a
              different drive from your MySQL server and the
              MySQL Enterprise Dashboard.
            </p><p>
              It is strongly recommended that you use a
              <code class="literal">log-level</code> of
              <code class="literal">critical</code> or <code class="literal">error</code> in
              a production server. Use the higher-levels to provide more
              detailed information only for debugging problems with your
              agent.
            </p><p>
              Under Windows, if you restart the agent from the command
              line after setting the <code class="literal">log-level</code> to
              <code class="literal">debug</code>, extensive debug information is
              displayed to the console as well as to the log file.
            </p></div></li><li><p>
            <code class="literal">agent-mgmt-hostname</code> — sets the URL
            to use when reporting information. This value will be
            automatically set to your MySQL Enterprise Service Manager during
            installation.
          </p></li><li><p>
            <code class="literal">mysqld-instance-dir</code> — sets the
            directory where the configuration files that specify the
            MySQL servers to be monitored can be located.
          </p></li><li><p>
            <code class="literal">agent-item-files</code> — sets the
            information that is provided up to the MySQL Enterprise Service Manager when
            the agent is reporting status information. You should leave
            this item with the default setting of the
            <code class="filename">share/mysql-proxy/items/quan.lua</code> (which
            provides Query Analyzer data) and
            <code class="filename">share/mysql-proxy/items/items-mysql-monitor.xml</code>
            (which provides the core agent monitoring data).
          </p></li><li><p>
            <code class="literal">proxy-address</code> — sets the address
            and/or port number for the proxy to listen to for
            connections. The setting is used when employing Query
            Analysis as the address/port that you must configure your
            application to use in place of your normal MySQL server. By
            default this item is set during installation. The default
            value is 4040. If you want to support a different local host
            name/IP address and port, specify the host name and the port
            number, separated by a colon.
          </p></li><li><p>
            <code class="literal">proxy-backend-addresses</code> — sets the
            host name and port number to be used when communicating the
            backend MySQL server when employing query analyzer. This is
            the MySQL server where packets from the client are sent when
            communicating with the proxy on the host name/port set by
            the <code class="literal">proxy-address</code>.
          </p></li><li><p>
            <code class="literal">proxy-lua-script</code> — sets the Lua
            script to be used by the proxy when forwarding queries. To
            use Query Analyzer, this parameter should be set to
            <code class="filename">share/mysql-proxy/quan.lua</code>. This is the
            default value.
          </p></li><li><p>
            <code class="literal">agent-uuid</code> — sets the UUID
            (Universally Unique ID) of the agent. This value should be
            unique for all agents communicating with the same server, as
            the UUID is used to uniquely ID the agent within
            MySQL Enterprise Service Manager
          </p><p>
            If you are setting up multiple hosts and copying the
            configuration between hosts, make sure that the
            <code class="literal">agent-uuid</code> is unique. You can have the
            agent create a new UUID by leavig this configuration
            property blank.
          </p></li><li><p>
            <code class="literal">log-file</code> — sets the location of the
            log file used to record information about the agent when it
            is running. If you do not specify a full path name, then the
            log file location is considered to be relative to the
            installation directory of the agent.
          </p></li><li><p>
            <code class="literal">pid-file</code> — sets the location of the
            file used to record the Process ID of the agent. This is
            used by the script that shuts down the agent to identify the
            process to be shutdown. The default value is the
            <code class="filename">mysql-monitor-agent.pid</code> file within the
            base installation directory as created by the agent
            installer.
          </p></li></ul></div><p>
        A number of optional parameters are also configurable within the
        <code class="filename">mysql-monitor-agent.ini</code> file:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">backlog-threshold</code> — determines the
            amount of time that the agent will collect information after
            detecting that the service manager is down. The default
            value for this option is 600 seconds. In cases where there
            is a short network outage no information will be lost. If
            the outage is longer than the value of
            <code class="literal">backlog-threshold</code> older data is dropped
            as the new data is acquired.
          </p><p>
            A setting of 600 seconds means that excessive memory usage
            is avoided should there be a long outage. In most
            circumstances, there is no need to change this option. To
            set <code class="literal">backlog-threshold</code> to a value other
            than the default, add a line with the information specifying
            the number of seconds.
          </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
              Setting this option to a value higher than the default can
              exhaust memory.
            </p></div></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-cfg-agent-ini"></a>15.3.3.6.2. MySQL Server (<code class="literal">agent-instance.ini</code>) Configuration</h5></div></div></div><p>
        For the MySQL server that you want to monitor, you must create
        an <code class="filename">agent-instance.ini</code> within the directory
        specified by the <code class="filename">mysqld-instance-dir</code>
        configuration parameter within the main
        <code class="filename">mysql-monitor-agent.ini</code> file.
      </p><p>
        The <code class="filename">agent-instance.ini</code> file contains the
        host name and user credentials for connecting to the MySQL
        server that you want the agent to monitor. The format of the
        file is as follows:
      </p><pre class="programlisting"># WARNING - the displayname defined below must be unique for each
# MySQL server being monitored.
#
# To use this .ini file as a template for configuring additional
# instances to monitor, do not simply copy and start a new agent
# without first modifying the displayname.
#
# Refer to the documentation for more detailed information and
# instructions.
# 
# Version: 20080718_230416_r7011

[mysqld]
hostname = 127.0.0.1
port     = 3306
user     = root
password = 
</pre><p>
        The individual configuration parameters can be defined as
        follows:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">hostname</code> — the host name of the
            MySQL server that you want to monitor.
          </p></li><li><p>
            <code class="literal">port</code> — the TCP/IP port of the MySQL
            server that you want to monitor.
          </p></li><li><p>
            <code class="literal">user</code> — the user to use when
            connecting to the MySQL server that you want to monitor.
          </p></li><li><p>
            <code class="literal">password</code> — the corresponding
            password to use when connecting to the MySQL server that you
            want to monitor.
          </p></li></ul></div><p>
        It is also possible to configure the agent to use sockets. This
        can be done during installation by selecting
        “<span class="quote">socket</span>” rather than “<span class="quote">TCP/IP</span>” from the
        menu and then specifying the socket name. This can also be
        configured after installation by editing the
        <code class="filename">agent-instance.ini</code> configuration file, and
        adding the line:
      </p><pre class="programlisting">socket = /full/path/to/mysql.sock</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-install-agent-multiple"></a>15.3.3.6.3. Monitoring Multiple MySQL Servers</h5></div></div></div><p>
        You can monitor multiple MySQL servers (either on the same
        machine, or across different machines) using two different
        methods:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            By using a single agent instance to monitor multiple MySQL
            servers. You can use this method if you want to monitor
            multiple servers, but do not want or need to support Query
            Analysis on the additional servers.
          </p></li><li><p>
            By using multiple copies of the MySQL Enterprise Monitor Agent to monitor
            each server individually. Using this method requires
            additional overhead to monitor each server, while also
            allowing you to supply Query Analysis data.
          </p></li></ul></div><p>
        <span class="bold"><strong>Using a Single Agent Instance</strong></span>
      </p><p>
        To use a single agent to monitor multiple instances, you can
        create additional directories and configuration files within the
        <code class="filename">instances</code> directory for the agent. For
        example, you can see the default structure of the agent
        configuration directory:
      </p><pre class="programlisting">./init.d
./init.d/mysql-monitor-agent
./instances
./instances/agent
./instances/agent/agent-instance.ini
./mysql-monitor-agent.ini
</pre><p>
        Within the <code class="literal">instances</code> directory, you can add
        further directories, one for each monitored server. Each
        additional directory must have a suitable
        <code class="filename">agent-instance.ini</code> file containing the
        connection information for the new MySQL server instance. For
        example, the following structure demonstrates an agent
        monitoring four MySQL servers:
      </p><pre class="programlisting">./init.d
./init.d/mysql-monitor-agent
./instances
./instances/agent
./instances/agent/agent-instance.ini
./instances/mysql2
./instances/mysql2/agent-instance.ini
./instances/mysql-rep
./instances/mysql-rep/agent-instance.ini
./instances/mysql-backup
./instances/mysql-backup/agent-instance.ini
./mysql-monitor-agent.ini
</pre><p>
        To add another MySQL monitored server, follow these steps:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Make sure that the MySQL instance that you want to monitor
            has a suitable user to use for connecting to the server. For
            more information, see <a href="mem-introduction.html#mem-agent-rights" title="15.3.3.1. Creating a MySQL User Account for the Monitor Agent">Section 15.3.3.1, “Creating a MySQL User Account for the Monitor Agent”</a>.
          </p></li><li><p>
            Copy an existing configuration directory and configuration
            files to the new directory:
          </p><pre class="programlisting">shell&gt; cp -R etc/instances/agent etc/instances/<em class="replaceable"><code>mysql2</code></em></pre></li><li><p>
            Edit the configuration file within the new directory, for
            example <code class="filename">mysql2/agent-instance.ini</code>, and
            set the <code class="literal">user</code>, <code class="literal">password</code>
            and either the <code class="literal">hostname</code> and
            <code class="literal">port</code>, or <code class="literal">socket</code>
            parameters.
          </p></li><li><p>
            Restart the agent:
          </p><pre class="programlisting">shell&gt; mysql-monitor-agent restart</pre></li></ol></div><p>
        <span class="bold"><strong>Using Multiple Agent Instances</strong></span>
      </p><p>
        To use multiple agents to monitor multiple MySQL servers you
        need to create a new configuration structure for both the agent
        and the MySQL server instances you need to monitor, including
        the binaries and configuration files, and then update the
        configuration to set the corresponding parameters to monitor the
        new server. Using this method allows you to enable query analyis
        by redirecting requests to the target server using the built-in
        proxy service within the agent.
      </p><p>
        For example, the directory structure below shows the
        configuration directory for two agents monitoring a single MySQL
        server each:
      </p><pre class="programlisting">./init.d
./init.d/mysql-monitor-agent
./instances
./instances/agent
./instances/agent/agent-instance.ini
./instances-second/agent
./instances-second/agent/agent-instance.ini
./mysql-monitor-agent.ini
./mysql-second-agent.ini</pre><p>
        The <code class="filename">mysql-monitor-agent.ini</code> file contains
        the configuration for the first agent, with the MySQL servers
        monitored defined within the <code class="filename">instances</code>
        directory. The <code class="filename">mysql-second-agent.ini</code> file
        contains the configuration information for the second agent,
        with the MySQL servers monitor defined within the
        <code class="filename">instances-second</code> directory.
      </p><p>
        To set up multiple agents:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Make sure that the MySQL instance that you want to monitor
            has a suitable user to use for connecting to the server. For
            more information, see <a href="mem-introduction.html#mem-agent-rights" title="15.3.3.1. Creating a MySQL User Account for the Monitor Agent">Section 15.3.3.1, “Creating a MySQL User Account for the Monitor Agent”</a>.
          </p></li><li><p>
            You need to generate a new UUID for the new agent:
          </p><pre class="programlisting">shell&gt; mysql-monitor-agent --agent-generate-uuid
ee9296d7-f7cd-4fee-8b26-ead884ebf398
2009-03-05 11:49:37: (critical) shutting down normally
</pre><p>
            Keep a record of the UUID to update the configuration file.
          </p><p>
            Note, the agent should not be running when the UUID is
            generated.
          </p></li><li><p>
            Copy the main agent configuration file,
            <code class="filename">mysql-monitor-agent.ini</code>:
          </p><pre class="programlisting">shell&gt; cp mysql-monitor-agent.ini <em class="replaceable"><code>mysql-second-agent.ini</code></em></pre></li><li><p>
            Edit the new configuration file, changing the following
            settings:
          </p><div class="itemizedlist"><ul type="disc"><li><p>
                Change the <code class="literal">mysqld-instance-dir</code> to the
                new directory that will contain the individual MySQL
                server configuration files.
              </p></li><li><p>
                Change the <code class="literal">proxy-address</code> to a
                different value than the first agent configuration.
              </p></li><li><p>
                Change the <code class="literal">proxy-backend-addresses</code> to
                specify the IP address and MySQL port number for the
                MySQL server.
              </p></li><li><p>
                Change the <code class="literal">agent-uuid</code> to the new
                value obtained in an earlier step.
              </p></li><li><p>
                Change the <code class="literal">log-file</code> parameter to
                specify a different file to use when logging errors and
                problems. You cannot log to the same file from two
                different agents.
              </p></li><li><p>
                Change the <code class="literal">pid-file</code> parameter to
                specify the file that will be used to store the process
                ID of the agent.
              </p></li></ul></div></li><li><p>
            Copy an existing configuration directory and configuration
            files to the new directory:
          </p><pre class="programlisting">shell&gt; cp -R etc/instances etc/<em class="replaceable"><code>instances-second</code></em></pre></li><li><p>
            Edit the configuration file,
            <code class="filename">instances/second/agent/agent-instance.ini</code>
            within the new directory, and set the
            <code class="literal">user</code>, <code class="literal">password</code> and
            either the <code class="literal">hostname</code> and
            <code class="literal">port</code>, or <code class="literal">socket</code>
            parameters.
          </p></li><li><p>
            With multiple instances, you must start each agent
            individually, specifying the location of the main
            configuration file. For example, to start the original
            (default) service:
          </p><pre class="programlisting">shell&gt; mysql-monitor-agent start /opt/mysql/monitor/agent/etc/mysql-monitor-agent.ini</pre><p>
            To start the second instance:
          </p><pre class="programlisting">shell&gt; mysql-monitor-agent start /opt/mysql/monitor/agent/etc/mysql-second-agent.ini</pre></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-install-agent-remote"></a>15.3.3.6.4. Configuring an Agent to Monitor a Remote MySQL Server</h5></div></div></div><p>
        Typically, the agent runs on the same machine as the MySQL
        server it is monitoring. Fortunately, this is not a requirement.
        If you want to monitor a MySQL server running on an operating
        system for which there is no agent available, you can install
        the agent on a machine other than the one hosting the MySQL
        server.
      </p><p>
        The process for installing an agent to monitor a MySQL server on
        a remote machine is identical to the process described in
        <a href="mem-introduction.html#mem-install-agent" title="15.3.3. Monitor Agent Installation">Section 15.3.3, “Monitor Agent Installation”</a>. Follow the directions given
        there, being careful to specify the correct IP address or host
        name for the MySQL Enterprise Service Manager and likewise for the MySQL server
        — since the agent is not running on the same machine as
        the MySQL server, it cannot be the default,
        <code class="literal">localhost</code>.
      </p><p>
        Don't forget that the agent must be given rights to log in to
        the MySQL server from a host other than
        <code class="literal">localhost</code> and that the port used by the MySQL
        server, typically <code class="literal">3306</code> must be open for
        remote access. For more information about the database
        credentials required by agents see,
        <a href="mem-introduction.html#mem-agent-rights" title="15.3.3.1. Creating a MySQL User Account for the Monitor Agent">Section 15.3.3.1, “Creating a MySQL User Account for the Monitor Agent”</a>.
      </p><p>
        The agent also needs to be able to log in to the
        MySQL Enterprise Service Manager, typically using port <code class="literal">18080</code>,
        so ensure that the appropriate port is open.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Monitoring a MySQL server from a remote machine affects how
          information is displayed in the dashboard. The
          <code class="literal">OS</code> and <code class="literal">CPU</code> information
          applies to the machine on which the agent is running not the
          machine hosting the monitored server. For more information on
          this topic see <a href="mem-introduction.html#mem-dashboard" title="15.5. MySQL Enterprise Dashboard">Section 15.5, “MySQL Enterprise Dashboard”</a>.
        </p><p>
          If your subscription level entitles you to replication
          autodiscovery, do <span class="bold"><strong>not</strong></span> use
          remote monitoring with replication slaves or masters. The
          agent must be installed on the same machine as the server you
          are monitoring in order for discovery to work properly. For
          more information, see <a href="mem-introduction.html#mem-replication" title="15.11. The Replication Page">Section 15.11, “The Replication Page”</a>.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-ssh-tunnel"></a>15.3.3.6.5. Monitoring Outside the Firewall with an SSH Tunnel</h5></div></div></div><p>
        If you run an SSH server on the machine that hosts the
        MySQL Enterprise Service Manager and an SSH client on the machine that hosts the
        agent, you can create an SSH tunnel so that the agent can bypass
        your firewall. First, you need to make an adjustment to the
        <code class="literal">hostname</code> value specified in the
        <code class="literal">[mysql-proxy]</code> section of the
        <code class="filename">.ini</code> file. (For more information about the
        contents and location of the <code class="literal">.ini</code> file see
        <a href="mem-introduction.html#mem-cfg-mysql-monitor-agent-ini" title="15.3.3.6.1. MySQL Enterprise Monitor Agent (mysql-monitor-agent.ini)
        Configuration">Section 15.3.3.6.1, “MySQL Enterprise Monitor Agent (<code class="filename">mysql-monitor-agent.ini</code>)
        Configuration”</a>.) Stop the
        agent and change the <code class="literal">hostname</code> value as shown
        in the following:
      </p><pre class="programlisting">hostname = http://<em class="replaceable"><code>agent_name:password</code></em>@localhost:<em class="replaceable"><code>18080</code></em>/heartbeat
</pre><p>
        Replace the <code class="literal">agent_name</code> and
        <code class="literal">password</code> with suitable values. Likewise
        replace port <code class="literal">18080</code> if you are not running the
        dashboard on this port. Use <code class="literal">localhost</code> for the
        host name, since the agent is connecting through an SSH tunnel.
      </p><p>
        Next, execute the following command on the machine where the
        agent is running:
      </p><pre class="programlisting">shell&gt; <span><strong class="command">ssh -L <em class="replaceable"><code>18080:Dashboard_Host:18080</code></em> -l <em class="replaceable"><code>user_name</code></em> -N <em class="replaceable"><code>Dashboard_Host</code></em></strong></span>
</pre><p>
        When prompted, enter the password for
        <em class="replaceable"><code>user_name</code></em>.
      </p><p>
        If you are not running the MySQL Enterprise Service Manager on port
        <code class="literal">18080</code>, substitute the appropriate port
        number. Likewise, replace <code class="literal">Dashboard_Host</code> with
        the correct value. <code class="literal">user_name</code> represents a
        valid operating system user on the machine that hosts the
        MySQL Enterprise Service Manager.
      </p><p>
        Be sure to restart the agent so that the new value for the
        <code class="literal">hostname</code> takes effect. For instructions on
        restarting the agent see:

        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Under Windows see,
              <a href="mem-introduction.html#mem-starting-agent-windows" title="15.3.3.5.1. Starting/Stopping the Agent on Windows">Section 15.3.3.5.1, “Starting/Stopping the Agent on Windows”</a>.
            </p></li><li><p>
              Under Unix see, <a href="mem-introduction.html#mem-starting-agent-unix" title="15.3.3.5.3. Starting/Stopping the Agent on Unix">Section 15.3.3.5.3, “Starting/Stopping the Agent on Unix”</a>.
            </p></li><li><p>
              Under Mac OS X see,
              <a href="mem-introduction.html#mem-starting-agent-osx" title="15.3.3.5.2. Starting/Stopping the Agent on Mac OS X">Section 15.3.3.5.2, “Starting/Stopping the Agent on Mac OS X”</a>.
            </p></li></ul></div><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-install-new-uuid"></a>15.3.3.6.6. Generating a new UUID</h5></div></div></div><p>
        In Unix go to the command line and type:
      </p><pre class="programlisting">shell&gt; /opt/mysql/enterprise/agent/bin/mysql-monitor-agent --agent-generate-uuid</pre><p>
        In Mac OS X go to the command line and type:
      </p><pre class="programlisting">shell&gt; /Applications/mysql/enterprise/agent/bin/mysql-monitor-agent --agent-generate-uuid</pre><p>
        This should display a line similar to the following:
      </p><pre class="programlisting">ee9296d7-f7cd-4fee-8b26-ead884ebf398</pre><p>
        Paste this line into the <code class="literal">[mysql-proxy]</code>
        section of the <code class="filename">ini</code> file for the
        <code class="literal">agent-uuid</code> parameter.
      </p><p>
        Ensure that the newly created file
        <code class="filename">mysql-service-agent-3307.ini</code>, is in the
        <code class="filename">C:\Program Files\MySQL\Enterprise\Agent</code>
        directory.
      </p><p>
        Navigate to this directory and execute
        <span><strong class="command">mysql-service-agent -uf
        mysql-service-agent-3307.ini</strong></span>. Doing this generates a
        new UUID and inserts it into the configuration file.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-troubleshooting-agent-start"></a>15.3.3.7. Troubleshooting the Agent</h4></div></div></div><p>
      The first step in troubleshooting the agent is finding out whether
      it is running or not. To do this see:

      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Windows – <a href="mem-introduction.html#mem-starting-agent-windows" title="15.3.3.5.1. Starting/Stopping the Agent on Windows">Section 15.3.3.5.1, “Starting/Stopping the Agent on Windows”</a>
          </p></li><li><p>
            Unix – <a href="mem-introduction.html#mem-starting-agent-unix" title="15.3.3.5.3. Starting/Stopping the Agent on Unix">Section 15.3.3.5.3, “Starting/Stopping the Agent on Unix”</a>
          </p></li><li><p>
            Mac OS X – <a href="mem-introduction.html#mem-starting-agent-osx" title="15.3.3.5.2. Starting/Stopping the Agent on Mac OS X">Section 15.3.3.5.2, “Starting/Stopping the Agent on Mac OS X”</a>
          </p></li></ul></div><p>
    </p><p>
      If incorrect credentials are specified for the agent login to the
      MySQL server that it is monitoring, then the agent will not run on
      start-up. Log in to the monitored MySQL server and check the
      agent's credentials. Compare the values of the
      <code class="literal">Host</code>, <code class="literal">User</code>, and
      <code class="literal">Password</code> fields in the
      <code class="literal">mysql.user</code> table with the values shown in the
      <code class="literal">[mysqld]</code> section of the
      <code class="filename">etc/instances/mysql/agent-instance.ini</code>. If
      incorrect credentials are specified in the
      <code class="filename">ini</code> file, simply correct them and restart the
      agent. Remember, changes to the <code class="filename">ini</code> file do
      not take effect until the agent is restarted.
    </p><p>
      The agent will not start up if incorrect credentials are specified
      for the service manager login. Using incorrect credentials for
      logging in to the service manager creates an entry in the agent
      log file. For the location of this log file see
      <a href="http://dev.mysql.com/doc/mysql-monitor/2.0/en/mem-agent-log-and-pid-files.html" target="_top">Agent Log and PID Files</a>.
    </p><p>
      If the agent starts up but no server appears in the dashboard,
      check the <code class="literal">hostname</code> specified in the
      <code class="literal">[mysql-proxy]</code> portion of the
      <code class="filename">mysql-monitor-agent.ini</code> file. Incorrect
      credentials, IP address, or port will all cause the MySQL server
      to fail to appear in the dashboard. Also, ensure that the port
      specified in this file is not blocked on the machine hosting the
      MySQL Enterprise Service Manager.
    </p><p>
      An easy way to confirm that the agent can log in to the service
      manager is to type
      <strong class="userinput"><code>http://<em class="replaceable"><code>Dashboard_Host:18080</code></em>/heartbeat</code></strong>
      into the address bar of your web browser, substituting the
      appropriate host name and port. When the HTTP authentication
      dialog box opens, enter the agent user name and password. If you
      log in successfully, you should see the following message:
    </p><pre class="programlisting">&lt;exceptions&gt;
&lt;error&gt;E1031:  Agent payload parameter NULL.&lt;/error&gt;
&lt;/exceptions&gt;
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Despite the fact that the preceding listing shows an error, you
        have logged in successfully. This error appears
        <span class="emphasis"><em>because</em></span> you have logged in but with no
        “<span class="quote">payload</span>”.
      </p></div><p>
      If you can log in successfully in the way described above and the
      agent is running, then there are errors in the
      <code class="filename">mysql-monitor-agent.ini</code> file. Compare the
      host name, port, agent name, and password found in the
      <code class="filename">ini</code> file with the values you entered into the
      address bar of your web browser.
    </p><p>
      If HTTP authentication fails then you are using incorrect
      credentials for the agent. Attempting to log in to the service
      manager using incorrect credentials creates an entry in the agent
      log file. For the location of this log file see
      <a href="http://dev.mysql.com/doc/mysql-monitor/2.0/en/mem-agent-log-and-pid-files.html" target="_top">Agent Log and PID Files</a>.
    </p><p>
      If no HTTP authentication dialog box appears, and you are unable
      to connect at all, then you may have specified an incorrect host
      name or port. Confirm the values you entered against those
      described as the <code class="literal">Application hostname and port:</code>
      in the <code class="filename">configuration_report.txt</code> file. Failure
      to connect could also indicate that the port is blocked on the
      machine hosting the MySQL Enterprise Service Manager.
    </p><p>
      To check if a blocked port is the problem, temporarily bring down
      your firewall. If the agent is then able to connect, open up the
      port specified during installation and restart the agent. If
      necessary you can monitor outside the firewall using an SSH
      tunnel. For more information, see
      <a href="mem-introduction.html#mem-ssh-tunnel" title="15.3.3.6.5. Monitoring Outside the Firewall with an SSH Tunnel">Section 15.3.3.6.5, “Monitoring Outside the Firewall with an SSH Tunnel”</a>.
    </p><p>
      You can also check the agent error log file to help determine any
      problems. An error such as the following might indicate a blocked
      port:
    </p><pre class="programlisting">(critical) connection to  merlin-server 
'http://<em class="replaceable"><code>agent:test@172.11.1.1:18080</code></em>/heartbeat' failed:
"connect() timed out!" error.
</pre><p>
      For the location of the agent error log file see,
      <a href="http://dev.mysql.com/doc/mysql-monitor/2.0/en/mem-agent-log-and-pid-files.html" target="_top">Agent Log and PID Files</a>.
    </p><p>
      Setting the <code class="literal">log-level</code> entry in your
      <code class="filename">ini</code> file is also a good debugging technique.
      For more information on this subject see,
      <a href="mem-introduction.html#mem-cfg-mysql-monitor-agent-ini" title="15.3.3.6.1. MySQL Enterprise Monitor Agent (mysql-monitor-agent.ini)
        Configuration">Section 15.3.3.6.1, “MySQL Enterprise Monitor Agent (<code class="filename">mysql-monitor-agent.ini</code>)
        Configuration”</a>.
    </p><p>
      Running the agent from the command line sometimes displays errors
      that fail to appear in the log file or on the screen when the
      agent is started from a menu option. To start the agent from the
      command line see the instructions given at the start of this
      section.
    </p><p>
      If you have more than one agent running on the same machine, the
      <code class="literal">UUID</code> must be unique and the
      <code class="literal">log-file</code> and <code class="literal">pid-file</code> values
      must be different. For more information, see
      <a href="mem-introduction.html#mem-cfg-agent-ini" title="15.3.3.6.2. MySQL Server (agent-instance.ini) Configuration">Section 15.3.3.6.2, “MySQL Server (<code class="literal">agent-instance.ini</code>) Configuration”</a>.
    </p><p>
      If the agent is not running on the same machine that hosts the
      MySQL server it is monitoring, then you must ensure that the
      correct <code class="literal">host</code> is specified for the agent
      account. The correct port, typically 3306, must also be open for
      remote login. For more information about remote monitoring see,
      <a href="mem-introduction.html#mem-install-agent-remote" title="15.3.3.6.4. Configuring an Agent to Monitor a Remote MySQL Server">Section 15.3.3.6.4, “Configuring an Agent to Monitor a Remote MySQL Server”</a>.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-unattended-installation"></a>15.3.4. Unattended Installation</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-command-line-options-monitoring">15.3.4.1. Command-Line Options</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-unattended-windows">15.3.4.2. Unattended Windows Installation</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-unattended-unix-osx">15.3.4.3. Unattended Unix and Mac OS X Installation</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-unattended-install-starting-services">15.3.4.4. Starting the Services</a></span></dt></dl></div><p>
    It is possible to install the MySQL Enterprise Monitor without any direct user
    interaction. This is done by passing the command-line option
    <code class="option">--mode unattended</code> to the installation file.
  </p><p>
    Using this mode and other command-line parameters means the user
    will not be prompted for input during installation. This is
    especially useful when doing multiple installations of the MySQL Enterprise Monitor.
  </p><p>
    However, rather than passing numerous parameters from the command
    line, it is usually more convenient to save your options in a text
    file and invoke the installer using the <code class="option">optionfile</code>
    option. This is a more reusable and less error-prone solution.
  </p><p>
    Before attempting an unattended installation, it is recommended that
    you install the MySQL Enterprise Monitor interactively at least once. Failing this,
    as a minimum, read the regular installation instructions since some
    tasks still remain after an unattended installation; you must
    configure the MySQL Enterprise settings, import the advisors, and
    start up all the services/daemons.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-command-line-options-monitoring"></a>15.3.4.1. Command-Line Options</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-command-line-options-server">15.3.4.1.1. MySQL Enterprise Service Manager Options</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-command-line-options-service-agent">15.3.4.1.2. MySQL Enterprise Monitor Agent Options</a></span></dt></dl></div><p>
      To view the available options for the monitor installer or for the
      agent installer, at the command line type the executable file name
      along with the <code class="option">help</code> option.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-command-line-options-server"></a>15.3.4.1.1. MySQL Enterprise Service Manager Options</h5></div></div></div><p>
        The following listing shows the command line options for the
        MySQL Enterprise Service Manager.
      </p><pre class="programlisting">--help                         Display the list of valid options

--version                      Display product information

--optionfile &lt;optionfile&gt;      Installation option file

                               Default: 

--mode &lt;mode&gt;                  Installation mode

                               (Windows)Default: win32                                
                               (Unix)Default: gtk
                               (Mac OS X)Default: osx 
                               (Windows)Allowed: win32 unattended
                               (Unix)Allowed: gtk text xwindow unattended  
                               (Mac OS X)Allowed: osx text unattended
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The default modes are different for different operating
          systems. The values allowed also differ. There is no
          <code class="literal">text</code> installation mode under Windows.
        </p></div><pre class="programlisting">--debugtrace &lt;debugtrace&gt;      Debug filename
                               Default: 
                               
--installer-language &lt;installer-language&gt; Language selection
                               Default:
                               Allowed: en  jp                               

--installdir &lt;installdir&gt;      Installation directory
                               (Windows)Default:C:\Program »
                               Files\MySQL\Enterprise\Monitor
                               (Unix)Default:/opt/mysql/enterprise/monitor/
                               (Mac OS X)Default:/Applications/mysql/enterprise/monitor/


--tomcatport &lt;tomcatport&gt;      Tomcat Server Port
                               Default: 18080

--tomcatshutdownport &lt;tomcatshutdownport&gt; Tomcat Shutdown Port
                               Default: 18005

--tomcatsslport &lt;tomcatsslport&gt;Tomcat SSL Port
                               Default: 18443

--usessl &lt;usessl&gt;              Should communication between the Dashboard »
                                      and Service Manager be encrypted?
                               Default: 0


--adminuser &lt;adminuser&gt;        Repository Username 
                               Default: service_manager


--adminpassword &lt;adminpassword&gt;Password
                               Default: 
</pre><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          The repository user name and password are stored in
          unencrypted form in the <code class="filename">config.properties</code>
          file. To locate this file on your operating system see
          <a href="http://dev.mysql.com/doc/mysql-monitor/2.0/en/mem-config-properties-file-location.html" target="_top">The <code class="literal">config.properties</code> File</a>.
        </p></div><pre class="programlisting">
--dbport &lt;dbport&gt;              Bundled MySQL Database Port
                               Default: 13306
</pre><p>
        The monitor installation options are the same for all operating
        systems except as noted in the preceding listing.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-command-line-options-service-agent"></a>15.3.4.1.2. MySQL Enterprise Monitor Agent Options</h5></div></div></div><p>
        To view all the options available for an unattended
        <span class="emphasis"><em>agent</em></span> installation, invoke the agent
        installer file passing in the <code class="option">help</code> option.
        (Under Windows you must redirect the output to a file as shown
        in <a href="mem-introduction.html#mem-command-line-options-monitoring" title="15.3.4.1. Command-Line Options">Section 15.3.4.1, “Command-Line Options”</a>). You
        should see a listing similar to the following:
      </p><pre class="programlisting">--help                         Display the list of valid options

--version                      Display product information
                               Default: 

--optionfile &lt;optionfile&gt;      Installation option file
                                Default: 

--mode &lt;mode&gt;                  Installation mode
                               (Windows)Default: win32 
                               (Unix)Default: gtk
                               (Mac OS X)Default: osx
                               (Windows)Allowed: win32 unattended
                               (Unix)Allowed: gtk text xwindow unattended
                               (Mac OS X)Allowed: osx text unattended
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The default modes are different for different operating
          systems. The values allowed also differ. There is no
          <code class="literal">text</code> installation mode under Windows.
        </p></div><pre class="programlisting">--debugtrace &lt;debugtrace&gt;      Debug filename
                               Default: 

--installer-language &lt;installer-language&gt; Language selection
                               Default:
                               Allowed: en  jp

--installdir &lt;installdir&gt;      Installation directory
                               (Windows)Default: C:\Program Files\MySQL\Enterprise\Agent
                               (Unix)Default:/opt/mysql/enterprise/agent
                               (Mac OS X)Default:/Applications/mysql/enterprise/agent

--mysqlhost &lt;mysqlhost&gt;         MySQL hostname or IP address
                                Default: 127.0.0.1

--checkmysqlhost &lt;checkMysqlhost&gt;Validation of MySQL hostname or IP address
                                Default: yes

--mysqlport &lt;mysqlport&gt;         MySQL port on <em class="replaceable"><code>127.0.0.1</code></em>
                                Default: 3306

--mysqluser &lt;mysqluser&gt;         User name on <em class="replaceable"><code>127.0.0.1:3306</code></em>
                                Default:

--mysqlpassword &lt;mysqlpassword&gt; Password for mysqluser on <em class="replaceable"><code>127.0.0.1:3306
</code></em>                                Default: 

--managerhost &lt;managerhost&gt;     Hostname or IP address
                                Default: 127.0.0.1

--tomcatport &lt;tomcatport&gt;       Port on <em class="replaceable"><code>127.0.0.1</code></em>
                                Default: 18080

--agentuser &lt;agentuser&gt;         Agent username on <em class="replaceable"><code>127.0.0.1:18080</code></em>
                                Default: agent

--agentpassword &lt;agentpassword&gt; Agent password for <em class="replaceable"><code>agent</code></em> on <em class="replaceable"><code>127.0.0.1:18080</code></em>
                                Default: 

--servername &lt;servername&gt;       Hostname to display
                                Default: 

</pre><p>
        Again, the agent options are the same for all operating systems
        except as noted.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-unattended-windows"></a>15.3.4.2. Unattended Windows Installation</h4></div></div></div><p>
      For unattended installation on Windows, create an option file
      named <code class="filename">options.server.txt</code>. The following is an
      example of what the contents of an option file might be.
    </p><pre class="programlisting">debugtrace=C:\Program Files\MySQL\Enterprise\install.debugtrace.log
mode=unattended
installdir=C:\Program Files\MySQL\Enterprise
tomcatport=8080
tomcatshutdownport=8005
tomcatsslport=8443
adminpassword=myadminpassword
dbport=3300
</pre><p>
      This file identifies a directory and file name for a log file,
      sets the <code class="option">mode</code> to <code class="literal">unattended</code>,
      and uses the <code class="option">installdir</code> option to specify an
      installation directory. The meaning of the other options is fairly
      self-evident.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Set the <code class="literal">installdir</code> and
        <code class="literal">debugtrace</code> options to values appropriate to
        your locale and operating system.
      </p><p>
        The only options that must be specified in an option file when
        installing the MySQL Enterprise Service Manager are <code class="literal">mode</code> (if
        not specified at the command line),
        <code class="literal">installdir</code>, and
        <code class="literal">adminpassword</code>.
      </p><p>
        Check the options in your option file closely before
        installation; no warnings will be issued if there are errors.
      </p></div><p>
      Ensure that the monitor installer file and the options file are in
      the same directory and, if you saved the options file as
      <code class="filename">options.server.txt</code>, you can invoke an
      unattended installation from the command line by typing:
    </p><pre class="programlisting">  C:\ <strong class="userinput"><code>mysqlmonitor-<em class="replaceable"><code>version</code></em>-windows-installer.exe --optionfile options.server.txt</code></strong>
</pre><p>
      You can install the MySQL Enterprise Monitor Agent in exactly the same fashion.
      Create an agent option file and call the agent installer using the
      <code class="option">optionfile</code> option.
    </p><p>
      As a minimum for the agent installation, you must specify the
      <code class="literal">mode</code> (if not specified at the command line),
      <code class="literal">mysqluser</code>, <code class="literal">installdir</code>,
      <code class="literal">mysqlpassword</code>, <code class="literal">installdir</code>,
      <code class="literal">managerhost</code>, and
      <code class="literal">agentpassword</code> options. Create a file containing
      these values and use it with the <code class="option">optionfile</code>
      option for unattended agent installation.
    </p><p>
      If you wish, you can create one script that calls both the Service
      Manager and the Monitor Agent programs passing appropriate
      <code class="option">optionfile</code> options.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-unattended-unix-osx"></a>15.3.4.3. Unattended Unix and Mac OS X Installation</h4></div></div></div><p>
      For unattended installation on Unix, create an option file named
      <code class="filename">options.server.txt</code>. The following is an
      example of what the contents of an option file might be for
      installation on Unix.
    </p><pre class="programlisting">debugtrace=/opt/mysql/enterprise/install.debugtrace.monitor.log
mode=unattended
installdir=/opt/mysql/enterprise/monitor
tomcatport=8080
tomcatshutdownport=8005
tomcatsslport=8443
adminpassword=myadminpassword
dbport=3300
</pre><p>
      This file identifies a directory and file name for a log file,
      sets the <code class="option">mode</code> to <code class="literal">unattended</code>,
      and uses the <code class="option">installdir</code> option to specify an
      installation directory. The meaning of the other options is fairly
      self-evident.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Set the <code class="literal">installdir</code> and
        <code class="literal">debugtrace</code> options to values appropriate to
        your locale and operating system.
      </p><p>
        The only options that must be specified in an option file when
        installing the MySQL Enterprise Service Manager are <code class="literal">mode</code> (if
        not specified at the command line),
        <code class="literal">installdir</code>, and
        <code class="literal">adminpassword</code>.
      </p><p>
        Check the options in your option file closely before
        installation; no warnings will be issued if there are errors.
      </p></div><p>
      Ensure that the monitor installer file and the options file are in
      the same directory and, if you saved the options file as
      <code class="literal">options.server.txt</code>, you can invoke an
      unattended installation from the command line by typing:
    </p><pre class="programlisting">  shell&gt; <strong class="userinput"><code>mysqlmonitor-<em class="replaceable"><code>version</code></em>-installer.bin --optionfile options.server.txt</code></strong>
</pre><p>
      You can install the MySQL Enterprise Monitor Agent in exactly the same fashion.
      Create an agent option file and call the agent installer using the
      <code class="option">optionfile</code> option.
    </p><p>
      As a minimum for the agent installation, you must specify the
      <code class="literal">mode</code> (if not specified at the command line),
      <code class="literal">mysqluser</code>, <code class="literal">installdir</code>,
      <code class="literal">mysqlpassword</code>, and
      <code class="literal">agentpassword</code> options. Create a file containing
      these values and use it with the <code class="option">optionfile</code>
      option for unattended agent installation.
    </p><p>
      If you wish, you can create one script that calls both the Service
      Manager and the Monitor Agent programs passing appropriate
      <code class="option">optionfile</code> options.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        The Service Manager does not automatically start up on
        rebooting. For more information, see <a href="http://bugs.mysql.com/31676" target="_top">Bug#31676</a>.
      </p></div><p>
      The procedure for unattended agent installation under Mac OS X is
      identical to the procedure under Unix.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-unattended-install-starting-services"></a>15.3.4.4. Starting the Services</h4></div></div></div><p>
      For instructions on starting the services needed by the
      MySQL Enterprise Service Manager see, <a href="mem-introduction.html#mem-server-starting-windows" title="15.3.2.5. Starting/Stopping the MySQL Enterprise Monitor Service on Windows">Section 15.3.2.5, “Starting/Stopping the MySQL Enterprise Monitor Service on Windows”</a>
      for Windows and, <a href="mem-introduction.html#mem-server-starting-unix-osx" title="15.3.2.6. Starting/Stopping the MySQL Enterprise Monitor Service on Unix and Mac OS X">Section 15.3.2.6, “Starting/Stopping the MySQL Enterprise Monitor Service on Unix and Mac OS X”</a>
      for Unix and Mac OS X.
    </p><p>
      For instructions on starting the MySQL Enterprise Monitor Agent see:

      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Windows – <a href="mem-introduction.html#mem-starting-agent-windows" title="15.3.3.5.1. Starting/Stopping the Agent on Windows">Section 15.3.3.5.1, “Starting/Stopping the Agent on Windows”</a>
          </p></li><li><p>
            Unix – <a href="mem-introduction.html#mem-starting-agent-unix" title="15.3.3.5.3. Starting/Stopping the Agent on Unix">Section 15.3.3.5.3, “Starting/Stopping the Agent on Unix”</a>
          </p></li><li><p>
            Mac OS X – <a href="mem-introduction.html#mem-starting-agent-osx" title="15.3.3.5.2. Starting/Stopping the Agent on Mac OS X">Section 15.3.3.5.2, “Starting/Stopping the Agent on Mac OS X”</a>
          </p></li></ul></div><p>
    </p><p>
      If you wish, you can script the startup of these services.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-install-post-installation"></a>15.3.5. Post-Installation Considerations</h3></div></div></div><p>
    Depending upon how you plan to use the MySQL Enterprise Monitor, there are some
    tasks you may want to perform after installation. Find some
    suggestions in the following list:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        <span class="bold"><strong>Email settings</strong></span> — Test
        email notification by deliberately triggering an alert.
      </p></li><li><p>
        <span class="bold"><strong>Auto Startup</strong></span> — On Unix
        systems, the MySQL Enterprise Service Manager does not automatically restart when
        the system is rebooted. You may wish to create a system
        initialization script appropriate to your operating system.
      </p></li><li><p>
        <span class="bold"><strong>Log files</strong></span> — Check the log
        files for any irregularities. For the locations of the various
        log files see <a href="http://dev.mysql.com/doc/mysql-monitor/2.0/en/mem-files.html" target="_top">Files Associated with The MySQL Enterprise Monitor</a>.
      </p></li><li><p>
        <span class="bold"><strong>Agent Log file rotation</strong></span> —
        Implement log file rotation for the service agent.
      </p></li><li><p>
        <span class="bold"><strong>Back up the repository</strong></span> —
        For a back-up strategy suitable to your circumstances, see the
        <a href="http://dev.mysql.com/doc/" target="_top">MySQL reference manual
        documentation</a>.
      </p></li><li><p>
        <span class="bold"><strong>Configuration backup</strong></span> —
        Back up the <code class="filename">mysql-monitor-agent.ini</code> file
        and the associated <code class="filename">instances</code> directory and
        contents.
      </p><p>
        For more information about the
        <code class="filename">mysql-monitor-agent.ini</code> file see
        <a href="mem-introduction.html#mem-advanced-agent-configuration" title="15.3.3.6. Advanced Agent Configuration">Section 15.3.3.6, “Advanced Agent Configuration”</a>.
      </p></li><li><p>
        <span class="bold"><strong>Configuration file</strong></span> —
        Store the <code class="filename">configuration_report.txt</code> in a
        safe place. There is no mechanism for retrieving the password
        stored in this file.
      </p></li><li><p>
        <span class="bold"><strong>Repository credentials</strong></span> —
        The repository user name and password are stored in unencrypted
        form in the <code class="filename">config.properties</code> file. Take
        care to protect this file.
      </p></li><li><p>
        <span class="bold"><strong>Disk management</strong></span> — Remove
        installation files, and monitor the space used by the
        repository. Ensure that you have adequate disk space by
        regularly purging data. For more information, see
        <a href="mem-introduction.html#mem-data-purge">???</a>.
      </p></li><li><p>
        <span class="bold"><strong>Firewall changes</strong></span> — You
        may want to limit or expand access to the MySQL Enterprise Service Manager.
      </p></li><li><p>
        <span class="bold"><strong>Open ports</strong></span> — As with
        firewall changes, you may want to limit or expand access to the
        MySQL Enterprise Service Manager. The dashboard uses non-standard ports, none of
        which are usually open by default.
      </p></li><li><p>
        <span class="bold"><strong>Server upgrades</strong></span> — See
        <a href="mem-introduction.html#mem-ungrading-monitored-server" title="15.3.6.3.1. Upgrading the Monitored MySQL Server">Section 15.3.6.3.1, “Upgrading the Monitored MySQL Server”</a> for
        instructions on upgrading a server.
      </p></li><li><p>
        <span class="bold"><strong>Repository access</strong></span> — You
        may want to add other users.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-upgradeorchange"></a>15.3.6. Upgrading, Re-Installing or Changing Your Installation</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-upgrading">15.3.6.1. Upgrading MySQL Enterprise Monitor</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-reinstalling-mysqlmonitor">15.3.6.2. Reinstalling MySQL Enterprise Monitor</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-changing-installation">15.3.6.3. Changing Your MySQL Enterprise Monitor Installation</a></span></dt></dl></div><p>
    You can upgrade
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        For instructions on upgrading your existing installation, see
        <a href="mem-introduction.html#mem-upgrading" title="15.3.6.1. Upgrading MySQL Enterprise Monitor">Section 15.3.6.1, “Upgrading MySQL Enterprise Monitor”</a>.
      </p></li><li><p>
        For more information on re-installing an existing installation,
        see <a href="mem-introduction.html#mem-reinstalling-mysqlmonitor" title="15.3.6.2. Reinstalling MySQL Enterprise Monitor">Section 15.3.6.2, “Reinstalling MySQL Enterprise Monitor”</a>.
      </p></li><li><p>
        To change an existing installation, such as changing the
        monitored server, see
        <a href="mem-introduction.html#mem-changing-installation" title="15.3.6.3. Changing Your MySQL Enterprise Monitor Installation">Section 15.3.6.3, “Changing Your MySQL Enterprise Monitor Installation”</a>.
      </p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-upgrading"></a>15.3.6.1. Upgrading MySQL Enterprise Monitor</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-upgrading-2.0">15.3.6.1.1. Upgrading from MySQL Enterprise Monitor 1.3 to 2.0</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-unattended-update">15.3.6.1.2. Unattended MySQL Enterprise Monitor Update</a></span></dt></dl></div><p>
      From time to time there may be updates to the MySQL Enterprise Service Manager or
      the MySQL Enterprise Monitor Agent. This section describes how to perform an
      update for either of these components.
    </p><p>
      You cannot use the update installers to change to a different
      operating system or chip architecture. For example, you cannot
      update a 32-bit Linux installation to a 64-bit version using an
      update installer — in cases such as this you must do a fresh
      installation.
    </p><p>
      The name of the update file varies but it shows the target
      operating system and the version the update applies to. If a
      specific component is being updated it may also appear in the file
      name. For example, a file named
      <code class="filename"><em class="replaceable"><code>mysqlenterprisemanager-2.0.0-windows-update-installer.exe</code></em></code>
      would indicate a Windows update to MySQL Enterprise Service Manager version 2.0.0.
    </p><p>
      You may install an update in the same way that you initially
      installed the service manager or the agent; in
      <code class="literal">win32</code> or <code class="literal">unattended</code> mode on
      Windows in <code class="literal">gtk</code>, <code class="literal">text</code>,
      <code class="literal">xwindow</code>, or <code class="literal">unattended</code> mode
      on Unix and in <code class="literal">osx</code>, <code class="literal">text </code>,
      or <code class="literal">unattended</code> mode on OS X.
    </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
        Before updating the MySQL Enterprise Service Manager stop all agents that are
        reporting to that MySQL Enterprise Service Manager. If you are updating the
        MySQL Enterprise Monitor Agent you must also stop the MySQL Enterprise Service Manager. On a
        machine that runs more than one agent, the primary agent will
        restart when the update is complete. Any secondary agents must
        be restarted manually. To stop or start agents see:

        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Windows –
              <a href="mem-introduction.html#mem-starting-agent-windows" title="15.3.3.5.1. Starting/Stopping the Agent on Windows">Section 15.3.3.5.1, “Starting/Stopping the Agent on Windows”</a>
            </p></li><li><p>
              Unix – <a href="mem-introduction.html#mem-starting-agent-unix" title="15.3.3.5.3. Starting/Stopping the Agent on Unix">Section 15.3.3.5.3, “Starting/Stopping the Agent on Unix”</a>
            </p></li><li><p>
              Mac OS X – <a href="mem-introduction.html#mem-starting-agent-osx" title="15.3.3.5.2. Starting/Stopping the Agent on Mac OS X">Section 15.3.3.5.2, “Starting/Stopping the Agent on Mac OS X”</a>
            </p></li></ul></div><p>
      </p></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
        The upgrade installer will overwrite
        <code class="filename">items-mysql-monitor.xml</code>. On Windows this
        file is found in the <code class="filename">C:\Program
        Files\MySQL\Enterprise\Agent\share\mysql-monitor-agent</code>
        directory and on Unix in the
        <code class="filename">/opt/mysql/enterprise/agent/share/mysql-monitor-agent</code>
        directory. You should back this file up if you have made any
        changes to it.
      </p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
        If you use the Upgrade installer to update MySQL Enterprise Service Manager and
        you have made any changes to the <code class="filename">my.cnf</code>
        within your MySQL Enterprise Service Manager installation, any changes will be
        lost. You should copy the existing <code class="filename">my.cnf</code>
        file before starting the upgrade installer.
      </p></div><p>
      Otherwise, updating is a fairly straightforward process. Run the
      installation file and choose the directory of your current
      installation and whether or not you wish to back up your current
      installation. The time required to complete the process varies
      depending upon the nature of the update.
    </p><p>
      If you chose to back up your current installation, a directory
      named <code class="filename">backup</code> will be created in the current
      installation directory. This directory will contain copies of the
      directory or directories that were replaced during the update. In
      cases where only specific files are replaced, the
      <code class="filename">backup</code> directory may contain only these
      files. If you are unhappy with the update simply overwrite the new
      files or directories with the originals found in the
      <code class="filename">backup</code> directory. Be sure to stop both the
      MySQL Enterprise Service Manager and MySQL Enterprise Monitor Agent before restoring the original
      files. You can delete or archive this directory when you are
      satisfied that the update was successful.
    </p><p>
      If you choose to back up your current installation, the installer
      checks that there is adequate disk space for your repository
      backup. If there is not enough space, you are given the option of
      choosing another location; you may also choose not to back up the
      repository.
    </p><p>
      To update your Advisors see,
      <a href="mem-introduction.html#mem-upgrading-updating-advisors" title="15.3.2.7.4. Upgrading and Updating Advisors">Section 15.3.2.7.4, “Upgrading and Updating Advisors”</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-upgrading-2.0"></a>15.3.6.1.1. Upgrading from MySQL Enterprise Monitor 1.3 to 2.0</h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-upgrading-2.0-server">15.3.6.1.1.1. Upgrading to MySQL Enterprise Service Manager 2.0</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-upgrading-2.0-agent">15.3.6.1.1.2. Upgrading to MySQL Enterprise Monitor Agent 2.0</a></span></dt></dl></div><p>
        To upgrade your existing installation from MySQL Enterprise Monitor 1.3 to
        MySQL Enterprise Monitor 2.0, you need to upgrade both your MySQL Enterprise Service Manager and
        your MySQL Enterprise Monitor Agent on each machine that you are monitoring.
      </p><p>
        To perform the update process you must use an
        <code class="literal">update</code> installer. This ensures that your
        current configuration information is migrated to the new version
        of MySQL Enterprise Service Manager.
      </p><p>
        Before you start the migration, shutdown your MySQL Enterprise Service Manager
        and MySQL Enterprise Monitor Agent on each monitored host. Then install the
        updated MySQL Enterprise Service Manager application to migrate the configuration
        and data of the main application and repository. Once the new
        MySQL Enterprise Service Manager is running, you can start to update and migrate
        each agent.
      </p><p>
        For more information on upgrading your MySQL Enterprise Service Manager, see
        <a href="mem-introduction.html#mem-upgrading-2.0-server" title="15.3.6.1.1.1. Upgrading to MySQL Enterprise Service Manager 2.0">Section 15.3.6.1.1.1, “Upgrading to MySQL Enterprise Service Manager 2.0”</a>. For more information
        on upgrading an MySQL Enterprise Monitor Agent, see
        <a href="mem-introduction.html#mem-upgrading-2.0-agent" title="15.3.6.1.1.2. Upgrading to MySQL Enterprise Monitor Agent 2.0">Section 15.3.6.1.1.2, “Upgrading to MySQL Enterprise Monitor Agent 2.0”</a>.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="mem-upgrading-2.0-server"></a>15.3.6.1.1.1. Upgrading to MySQL Enterprise Service Manager 2.0</h6></div></div></div><p>
          Upgrading MySQL Enterprise Service Manager requires you to use on of the
          <span class="emphasis"><em>update</em></span> installers. The update installer
          performs a number of operations during installation:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              A new database, required to support 2.0
              functionality, is created.
            </p></li><li><p>
              You core dashboard, user, and rule information is migrated
              from the old database to the new database.
            </p></li><li><p>
              The core configuration parameters for the MySQL Enterprise Service Manager
              are migrated from MySQL Enterprise Monitor 1.3 are migrated to MySQL Enterprise Monitor
              2.0.
            </p></li></ul></div><p>
          The installation of the new software using the update
          installer follows this basic sequence:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Request the installation language.
            </p></li><li><p>
              Confirm the location of the current MySQL Enterprise Service Manager
              installation.
            </p></li><li><p>
              Specify whether you want to keep a copy of the old server,
              application, and database files.
            </p></li><li><p>
              Configure the Tomcat server settings, including whether
              the new server should support SSL connections from agents.
            </p></li><li><p>
              If requested, the application and database information is
              backed up and upgraded, before the new application is
              installed.
            </p></li></ol></div><p>
          The installation process is consistent for all platforms. A
          sample of the process for Max OS X has been provided below:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Double click on the update installer. The update installer
              will have <code class="literal">update</code> in the file name. For
              example,
              <code class="filename">mysqlmonitor-2.0.0.7101-osx-update-installer.app</code>.
            </p></li><li><p>
              Confirm the language you want to use when installing the
              software.
            </p><div class="figure"><a name="fig-monitor-update-install-1"></a><p class="title"><b>Figure 15.24. MySQL Enterprise Monitor: Server Update: Language Selection</b></p><div class="mediaobject"><img src="images/monitor-update-install-1.png" width="364" height="220" alt="MySQL Enterprise Monitor: Server
                  Update: Language Selection"></div></div><p>
              Click <span class="guibutton">OK</span>
            </p></li><li><p>
              You will be presented with an information screen showing
              the application you are installing. Click
              <span class="guibutton">Next</span> to continue.
            </p></li><li><p>
              Specify, or locate, the previous installation of
              MySQL Enterprise Service Manager If you installed the server within the
              default location, the current version of the application
              should be located automatically.
            </p><div class="figure"><a name="fig-monitor-update-install-3"></a><p class="title"><b>Figure 15.25. MySQL Enterprise Monitor: Server Update: Previous Installation</b></p><div class="mediaobject"><img src="images/monitor-update-install-3.png" width="580" height="452" alt="MySQL Enterprise Monitor: Server
                  Update: Previous Installation"></div></div></li><li><p>
              The installer can keep a backup copy of your existing
              application, including keeping a complete backup of the
              data stored within your MySQL Enterprise Monitor repository database.
            </p><div class="figure"><a name="fig-monitor-update-install-4"></a><p class="title"><b>Figure 15.26. MySQL Enterprise Monitor: Server Update: Backup of Previous Installation</b></p><div class="mediaobject"><img src="images/monitor-update-install-4.png" width="580" height="452" alt="MySQL Enterprise Monitor: Server
                  Update: Backup of Previous Installation"></div></div><p>
              Specify the location of the backup (default is to use the
              <code class="filename">backup</code> directory within your
              installation directory). Note that backing up the database
              in addition to the main application will increase the
              installation time as the files have to be copied. The
              larger the size of your repository data, the longer the
              installation process will take.
            </p></li><li><p>
              Specify the Tomcat Server options. The Tomcat Server Port
              is the default port you will use to access the
              MySQL Enterprise Dashboard. If you want to support agents using SSL
              to communicate to MySQL Enterprise Service Manager, you must check the
              <span class="guilabel">Is SSL support required?</span>
            </p></li><li><p>
              Confirm that you want to continue the installation. Once
              installation has started, the backup of you existing
              application (and database) will start, although the
              process may take some time. Wait until the process
              completes.
            </p></li><li><p>
              Once the process has completed you will be provided with a
              notification of the installation process, including how to
              uninstall the application if you want to do so in the
              future. If any errors occurred, they will be reported
              here.
            </p><div class="figure"><a name="fig-monitor-update-install-7"></a><p class="title"><b>Figure 15.27. MySQL Enterprise Monitor: Server Update: Completed installing files</b></p><div class="mediaobject"><img src="images/monitor-update-install-7.png" width="580" height="452" alt="MySQL Enterprise Monitor: Server
                  Update: Completed installing files"></div></div></li><li><p>
              The installation has now completed. You can automatically
              start the MySQL Enterprise Service Manager and view the attached Readme
              file by ensuring the checkboxes on this page are selected.
            </p></li><li><p>
              You can now quit the installer.
            </p></li></ol></div><p>
          Once the installation has completed, the first time you login
          to MySQL Enterprise Dashboard you will be asked to provide your login
          credentials, if they do not already exist in the server
          configuration, or to provide a copy of the Advisor jar
          suitable for your MySQL Enterprise Service Manager version.
        </p><div class="figure"><a name="fig-monitor-update-install-9"></a><p class="title"><b>Figure 15.28. MySQL Enterprise Monitor: Server Update: Final Setup</b></p><div class="mediaobject"><img src="images/monitor-update-install-9.png" width="831" height="544" alt="MySQL Enterprise Monitor: Server Update:
              Final Setup"></div></div><p>
          MySQL Enterprise Monitor has now been updated. You must update each of your
          agents to MySQL Enterprise Monitor Agent 2.0 to ensure that they are providing
          the correct information to MySQL Enterprise Service Manager
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="mem-upgrading-2.0-agent"></a>15.3.6.1.1.2. Upgrading to MySQL Enterprise Monitor Agent 2.0</h6></div></div></div><p>
          To upgrade an agent you should use a <code class="literal">update</code>
          installer. This will migrate your configuration information,
          simplifying the upgrade process significantly.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            The agent log file,
            <code class="filename">mysql-service-agent.log</code>, if it exists,
            will be retained during the upgrade. A new log file,
            <code class="filename">mysql-monitor-agent.log</code> is used by
            MySQL Enterprise Monitor Agent 2.0.
          </p></div><p>
          The core sequence is the same on all platforms, the update
          process on Linux is shown below:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Start the update installer.
            </p><pre class="programlisting">shell&gt; ./mysqlmonitoragent-2.0.0.7101-linux-glibc2.3-x86-32bit-update-installer.bin</pre></li><li><p>
              Set the language for the installation process.
            </p><pre class="programlisting">Language Selection

Please select the installation language
[1] English
[2] Japanese
Please choose an option [1] : 
</pre></li><li><p>
              Confirm or update the location of the installation
              directory of the previous version.
            </p><pre class="programlisting">----------------------------------------------------------------------------
Welcome to the setup wizard for the MySQL Enterprise Monitor Agent Update

----------------------------------------------------------------------------
Please specify the directory that contains the previous installation of 
the MySQL Enterprise Monitor Agent

Installation directory [/opt/mysql/enterprise/agent]: 
    </pre></li><li><p>
              Specify whether you want to create a backup of the current
              application and configuration information, and if so,
              where the backup directory should be created.
            </p><pre class="programlisting">----------------------------------------------------------------------------
Current installation backup

Do you want to create a backup during the update process?

Backup the current installation [Y/n]: Y


Backup directory [/opt/mysql/enterprise/agent/patchbackup]: 

      </pre></li><li><p>
              You will be asked whether you want to enable the Query
              Analyzer. The Query Analyzer enables you to monitor the
              execution stateistics for individual queries executed
              through your MySQL servers. To enable, you must specify
              the proxy port, MySQL server and MySQL server port that
              you want to use. If you do not enable Query Analyzer now,
              you can enable it later. See
              <a href="mem-introduction.html#mem-query-analysis" title="15.10. The Query Analyzer Page">Section 15.10, “The Query Analyzer Page”</a>.
            </p><pre class="programlisting">----------------------------------------------------------------------------
Query Analysis Configuration

MySQL Proxy enables query monitoring and analysis by listening on the port 
specified below for client connections that are then passed through to a 
backend MySQL database server. It is not needed for basic monitoring 
functionality, but is required for query monitoring and analysis.

Visit the following URL for more information:
https://enterprise.mysql.com/docs/monitor/2.0/en/mem-query-analysis.html



Enable Proxy (recommended) [Y/n]: 


Proxy Port [4040]: 

Backend Host: 127.0.0.1   (cannot be changed)

Backend Port: 3306   (cannot be changed)
      </pre></li><li><p>
              You are now ready to complete the installation. Confirm
              that you want to continue.
            </p><pre class="programlisting">----------------------------------------------------------------------------
Setup is now ready to begin installing MySQL Enterprise Monitor Agent Update on your computer.

Do you want to continue? [Y/n]: 

----------------------------------------------------------------------------
Please wait while Setup installs MySQL Enterprise Monitor Agent Update on your computer.

 Installing
 0% ______________ 50% ______________ 100%
 #########################################

----------------------------------------------------------------------------
Setup has finished installing MySQL Enterprise Monitor Agent Update on your computer.

Restart MySQL Enterprise Monitor Agent now [Y/n]: 

View Readme File [Y/n]: n
      </pre></li></ol></div><p>
          Before connecting your MySQL Enterprise Monitor Agent to your MySQL server you
          must update the grants for the MySQL Enterprise Monitor Agent. Connect to the
          MySQL server and run this statement to update the required
          grants:
        </p><pre class="programlisting">GRANT CREATE, INSERT
  ON mysql.* 
  TO  '<em class="replaceable"><code>mysqluser</code></em>'@'<em class="replaceable"><code>localhost</code></em>' 
  IDENTIFIED BY '<em class="replaceable"><code>agent_password</code></em>';
</pre><p>
          Replacing the <code class="literal">mysqluser</code> and
          <code class="literal">agent_password</code> parameters with the values
          used for connecting your agent to your MySQL server.
        </p><p>
          Once the update agent has communicated with the
          MySQL Enterprise Service Manager the core information about the agent and the
          MySQL server it is monitoring will be migrated to the new data
          format required by MySQL Enterprise Service Manager 2.0. To migrate the
          existing stored data, see
          <a href="mem-introduction.html#mem-deployment-migration-2-0" title="15.4.2. Migrating 1.3.x Historical Data to MySQL Enterprise Monitor 2.0">Section 15.4.2, “Migrating 1.3.x Historical Data to MySQL Enterprise Monitor 2.0”</a>.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-unattended-update"></a>15.3.6.1.2. Unattended MySQL Enterprise Monitor Update</h5></div></div></div><p>
        The options available when performing an unattended
        MySQL Enterprise Service Manager update are as follows:
      </p><pre class="programlisting">--help                         Display the list of valid options

--version                      Display product information

--optionfile &lt;optionfile&gt;      Installation option file
                               Default: 

--mode &lt;mode&gt;                  Installation mode
                               (Windows)Default: win32
                               (Unix)Default: gtk
                               (Mac OS X)Default: osx
                               (Windows)Allowed: win32 unattended
                               (Unix)Allowed: gtk text xwindow unattended
                               (Mac OS X)Allowed: osx text unattended

--debugtrace &lt;debugtrace&gt;      Debug filename
                               Default:                                
                               
--installer-language &lt;installer-language&gt; Language selection
                                Default:
                                Allowed: en  jp

--installdir &lt;installdir&gt;      Previous Installation
                               Default: 
                                
--createDataBackup &lt;createDataBackup&gt;
   
                               Default: 1
                               
--backupDir &lt;backupDir&gt;        Backup directory 
                               Default:
                               
</pre><p>
        The options for an unattended update of the agent differ only in
        that the <code class="literal">createDataBackup</code> option is replaced
        by <code class="literal">createBackup</code>.
      </p><p>
        If you did not install the MySQL Enterprise Service Manager to the default
        directory the <code class="literal">installdir</code> option must be
        specified. <code class="literal">mode</code> must also be specified when
        performing an unattended update. Otherwise, performing an
        unattended update is identical to the process described in
        <a href="mem-introduction.html#mem-unattended-installation" title="15.3.4. Unattended Installation">Section 15.3.4, “Unattended Installation”</a>.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-reinstalling-mysqlmonitor"></a>15.3.6.2. Reinstalling MySQL Enterprise Monitor</h4></div></div></div><p>
      In some cases you may want to reinstall MySQL Enterprise Monitor rather than
      updating your current installation. To reinstall rather than
      update MySQL Enterprise Monitor follow these steps:

      </p><div class="orderedlist"><ol type="1"><li><p>
            Stop all the Monitor Agents
          </p></li><li><p>
            Run the <code class="literal">uninstall</code> programs for both the
            MySQL Enterprise Service Manager and the MySQL Enterprise Monitor Agent
          </p></li><li><p>
            Begin the new installation
          </p></li></ol></div><p>
    </p><p>
      To stop the Monitor Agents see:

      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Windows – <a href="mem-introduction.html#mem-starting-agent-windows" title="15.3.3.5.1. Starting/Stopping the Agent on Windows">Section 15.3.3.5.1, “Starting/Stopping the Agent on Windows”</a>
          </p></li><li><p>
            Unix – <a href="mem-introduction.html#mem-starting-agent-unix" title="15.3.3.5.3. Starting/Stopping the Agent on Unix">Section 15.3.3.5.3, “Starting/Stopping the Agent on Unix”</a>
          </p></li><li><p>
            Mac OS X – <a href="mem-introduction.html#mem-starting-agent-osx" title="15.3.3.5.2. Starting/Stopping the Agent on Mac OS X">Section 15.3.3.5.2, “Starting/Stopping the Agent on Mac OS X”</a>
          </p></li></ul></div><p>
    </p><p>
      Instructions for removing the MySQL Enterprise Service Manager and the
      MySQL Enterprise Monitor Agent are given in <a href="mem-introduction.html#mem-uninstall" title="15.3.7. Uninstalling the MySQL Enterprise Monitor">Section 15.3.7, “Uninstalling the MySQL Enterprise Monitor”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-changing-installation"></a>15.3.6.3. Changing Your MySQL Enterprise Monitor Installation</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-ungrading-monitored-server">15.3.6.3.1. Upgrading the Monitored MySQL Server</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-changing-monitored-server">15.3.6.3.2. Changing the Server That an Agent Monitors</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-suspending-agent">15.3.6.3.3. Temporarily Suspending the Agent</a></span></dt></dl></div><p>
      This section describes the best practices to employ when changing
      your MySQL Enterprise Monitor installation.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-ungrading-monitored-server"></a>15.3.6.3.1. Upgrading the Monitored MySQL Server</h5></div></div></div><p>
        When upgrading a monitored MySQL server first stop the agent. To
        stop the agent see:

        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Windows –
              <a href="mem-introduction.html#mem-starting-agent-windows" title="15.3.3.5.1. Starting/Stopping the Agent on Windows">Section 15.3.3.5.1, “Starting/Stopping the Agent on Windows”</a>
            </p></li><li><p>
              Unix – <a href="mem-introduction.html#mem-starting-agent-unix" title="15.3.3.5.3. Starting/Stopping the Agent on Unix">Section 15.3.3.5.3, “Starting/Stopping the Agent on Unix”</a>
            </p></li><li><p>
              Mac OS X – <a href="mem-introduction.html#mem-starting-agent-osx" title="15.3.3.5.2. Starting/Stopping the Agent on Mac OS X">Section 15.3.3.5.2, “Starting/Stopping the Agent on Mac OS X”</a>
            </p></li></ul></div><p>
      </p><p>
        
      </p><p>
        Stop the MySQL server and perform the upgrade. For instructions
        on stopping and restarting the MySQL service under Windows see
        <a href="mem-introduction.html#mem-server-starting-windows" title="15.3.2.5. Starting/Stopping the MySQL Enterprise Monitor Service on Windows">Section 15.3.2.5, “Starting/Stopping the MySQL Enterprise Monitor Service on Windows”</a>.
      </p><p>
        To stop and restart the MySQL daemon under Unix and Mac OS X,
        see, <a href="mem-introduction.html#mem-server-starting-unix-osx" title="15.3.2.6. Starting/Stopping the MySQL Enterprise Monitor Service on Unix and Mac OS X">Section 15.3.2.6, “Starting/Stopping the MySQL Enterprise Monitor Service on Unix and Mac OS X”</a>.
      </p><p>
        Once the service/daemon is stopped you may upgrade your server.
        For instructions on upgrading your MySQL server see the
        reference manual pertaining to your server version. When the
        upgrade is complete restart the MySQL server.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The agent's log file will show that the server was down.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-changing-monitored-server"></a>15.3.6.3.2. Changing the Server That an Agent Monitors</h5></div></div></div><p>
        You need not reinstall the MySQL Enterprise Monitor Agent in order to change the
        MySQL server that it monitors. It is possible to adapt an
        existing agent so that it monitors a different server.
      </p><p>
        To do this you must stop the service agent and then remove the
        server that it is monitoring. To stop the agent see:

        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Windows –
              <a href="mem-introduction.html#mem-starting-agent-windows" title="15.3.3.5.1. Starting/Stopping the Agent on Windows">Section 15.3.3.5.1, “Starting/Stopping the Agent on Windows”</a>
            </p></li><li><p>
              Unix – <a href="mem-introduction.html#mem-starting-agent-unix" title="15.3.3.5.3. Starting/Stopping the Agent on Unix">Section 15.3.3.5.3, “Starting/Stopping the Agent on Unix”</a>
            </p></li><li><p>
              Mac OS X– <a href="mem-introduction.html#mem-starting-agent-osx" title="15.3.3.5.2. Starting/Stopping the Agent on Mac OS X">Section 15.3.3.5.2, “Starting/Stopping the Agent on Mac OS X”</a>
            </p></li></ul></div><p>
      </p><p>
        For instructions on removing a server see,
        <a href="mem-introduction.html#mem-deleting-mysql-server" title="15.6.3.3. Removing a Server From the Dashboard">Section 15.6.3.3, “Removing a Server From the Dashboard”</a>.
      </p><p>
        Once the agent is stopped and the server is removed from the
        Dashboard, changes may be made to the
        <code class="filename">mysql-monitor-agent.ini</code>, or the
        <code class="filename">agent-instance.ini</code> file within the agent
        <code class="filename">instances</code> instances directory. You can find
        the location of the directory by examining the content of the
        <code class="filename">mysql-monitor-agent.ini</code> and checking the
        value of the <code class="literal">mysqld-instance-dir</code> parameter.
      </p><p>
        If you want to make changes to the monitored MySQL server, edit
        the <code class="filename">agent-instance.ini</code> file. Change the
        <code class="literal">user</code>, <code class="literal">password</code>,
        <code class="literal">hostname</code>, and <code class="literal">port</code> values
        if required. For more information, see
        <a href="mem-introduction.html#mem-cfg-agent-ini" title="15.3.3.6.2. MySQL Server (agent-instance.ini) Configuration">Section 15.3.3.6.2, “MySQL Server (<code class="literal">agent-instance.ini</code>) Configuration”</a>.
      </p><p>
        To change other settings, such as enabling proxy support
        (required for Query Analyzer), the management host, or the port
        number used by the agent, modify the
        <code class="filename">mysql-monitor-agent.ini</code> file. For more
        information, see
        <a href="mem-introduction.html#mem-cfg-mysql-monitor-agent-ini" title="15.3.3.6.1. MySQL Enterprise Monitor Agent (mysql-monitor-agent.ini)
        Configuration">Section 15.3.3.6.1, “MySQL Enterprise Monitor Agent (<code class="filename">mysql-monitor-agent.ini</code>)
        Configuration”</a>.
      </p><p>
        To restart the agent see:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Windows – <a href="mem-introduction.html#mem-starting-agent-windows" title="15.3.3.5.1. Starting/Stopping the Agent on Windows">Section 15.3.3.5.1, “Starting/Stopping the Agent on Windows”</a>
          </p></li><li><p>
            Unix – <a href="mem-introduction.html#mem-starting-agent-unix" title="15.3.3.5.3. Starting/Stopping the Agent on Unix">Section 15.3.3.5.3, “Starting/Stopping the Agent on Unix”</a>
          </p></li><li><p>
            Mac OS X– <a href="mem-introduction.html#mem-starting-agent-osx" title="15.3.3.5.2. Starting/Stopping the Agent on Mac OS X">Section 15.3.3.5.2, “Starting/Stopping the Agent on Mac OS X”</a>
          </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If you are adapting an existing agent to monitor a remote
          server make sure that the agent has the credentials for remote
          access and that the port on the remote MySQL server instance
          is open. For more information, see
          <a href="mem-introduction.html#mem-install-agent-remote" title="15.3.3.6.4. Configuring an Agent to Monitor a Remote MySQL Server">Section 15.3.3.6.4, “Configuring an Agent to Monitor a Remote MySQL Server”</a>.
        </p><p>
          If you experience difficulties starting the agent, check
          <a href="mem-introduction.html#mem-troubleshooting-agent-start" title="15.3.3.7. Troubleshooting the Agent">Section 15.3.3.7, “Troubleshooting the Agent”</a>.
        </p></div><p>
        Log in to the Dashboard and you should find your new server in
        the <code class="literal">All Servers</code> group.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-suspending-agent"></a>15.3.6.3.3. Temporarily Suspending the Agent</h5></div></div></div><p>
        In some situations you may need to bring down a monitored
        server. When this is necessary, it is good practice to stop the
        agent first—doing so will avoid generating a “<span class="quote">Server
        is unreachable</span>” event.
      </p><p>
        For instance, suppose you need to stop the server in order to do
        a backup. The steps to follow are:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Stop the agent
          </p></li><li><p>
            Stop the service/daemon
          </p></li><li><p>
            Perform the backup
          </p></li><li><p>
            Restart the service/daemon
          </p></li><li><p>
            Restart the agent
          </p></li></ol></div><p>
        To stop or start the agent see:

        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Windows – see
              <a href="mem-introduction.html#mem-starting-agent-windows" title="15.3.3.5.1. Starting/Stopping the Agent on Windows">Section 15.3.3.5.1, “Starting/Stopping the Agent on Windows”</a>
            </p></li><li><p>
              Unix – see <a href="mem-introduction.html#mem-starting-agent-unix" title="15.3.3.5.3. Starting/Stopping the Agent on Unix">Section 15.3.3.5.3, “Starting/Stopping the Agent on Unix”</a>
            </p></li><li><p>
              Mac OS X – see
              <a href="mem-introduction.html#mem-starting-agent-osx" title="15.3.3.5.2. Starting/Stopping the Agent on Mac OS X">Section 15.3.3.5.2, “Starting/Stopping the Agent on Mac OS X”</a>
            </p></li></ul></div><p>
      </p><p>
        To stop the MySQL service/daemon see the MySQL reference manual
        for your server version. You can find the manual online at
        <a href="http://dev.mysql.com/doc/refman" target="_top">http://dev.mysql.com/doc/refman</a>.
      </p><p>
        Follow these steps and there will be no “<span class="quote">noise</span>”
        associated with backing up your server. In contrast, if you
        leave the agent running while bringing down the server, you will
        generate a “<span class="quote">Server is unreachable</span>” event.
      </p><p>
        As an alternative to stopping the agent, you can change the
        logic associated with a rule. For instance, you could alter the
        threshold of the rule “<span class="quote">Server is unreachable</span>”:
      </p><pre class="programlisting">%server.reachable% == THRESHOLD
</pre><p>
        to:
      </p><pre class="programlisting">%server.reachable% == THRESHOLD  &amp;&amp; CURTIME() NOT BETWEEN '22:00:00' AND '23:00:00'
</pre><p>
        This would effectively blackout the rule between 10 and 11 pm,
        during which time you could perform a backup.
      </p><p>
        For more information about editing rules see
        <a href="mem-introduction.html#mem-editing-built-in-rules" title="15.7.3. Editing Built-in Rules">Section 15.7.3, “Editing Built-in Rules”</a>. To blackout all
        events associated with a specific server or group of servers see
        <a href="mem-introduction.html#mem-advisor-blackouts" title="15.7.6. Advisor Blackout Periods">Section 15.7.6, “Advisor Blackout Periods”</a>.
      </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-uninstall"></a>15.3.7. Uninstalling the MySQL Enterprise Monitor</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-windows-removal">15.3.7.1. Removing the MySQL Enterprise Monitor: Windows</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-unix-osx-removal">15.3.7.2. Removing the MySQL Enterprise Monitor: Unix and Mac OS X</a></span></dt></dl></div><p>
    Removal of the MySQL Enterprise Monitor requires removal of the MySQL Enterprise Service Manager and
    the MySQL Enterprise Monitor Agent Service. In some circumstances, when running
    multiple agents on one machine for instance, you may not want to
    remove the entire MySQL Enterprise Monitor Agent Service but only a single monitored
    server.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-windows-removal"></a>15.3.7.1. Removing the MySQL Enterprise Monitor: Windows</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-remove-windows">15.3.7.1.1. Removing the MySQL Enterprise Service Manager</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-removing-agent-windows">15.3.7.1.2. Removing the Monitor Agent</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-remove-windows"></a>15.3.7.1.1. Removing the MySQL Enterprise Service Manager</h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-remove-windows-services">15.3.7.1.1.1. Removing MySQL Enterprise Monitor Services Only</a></span></dt></dl></div><p>
        Remove the MySQL Enterprise Service Manager by going to the <code class="literal">Control
        Panel</code> and choosing <code class="literal">Add or Remove
        Programs</code>. Find the entry for <code class="literal">MySQL Enterprise
        Monitoring and Advisory Service</code> and remove it. During
        the uninstall process you will be given the option of saving
        existing data and log files. Choose this option if you plan to
        reinstall the MySQL Enterprise Monitor.
      </p><p>
        If you are not saving existing data, after MySQL Enterprise Service Manager has
        been removed you may delete the <code class="filename">C:\Program
        Files\MySQL\Enterprise\Monitor</code> directory.
      </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          If you chose not to remove existing data and log files when
          uninstalling MySQL Enterprise Service Manager do
          <span class="bold"><strong>not</strong></span> remove the
          <code class="filename">C:\Program Files\MySQL\Enterprise\Monitor</code>
          directory. Doing so will delete these files.
        </p></div><p>
        If you added the Tomcat/Apache web server to the list of Windows
        firewall exceptions, remove this service by opening the
        <code class="literal">Windows Firewall</code> from the <code class="literal">Control
        Panel</code>. Choose the <code class="literal">Exceptions</code> tab
        and delete the <code class="literal">Tomcat/Apache</code> entry.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="mem-remove-windows-services"></a>15.3.7.1.1.1. Removing MySQL Enterprise Monitor Services Only</h6></div></div></div><p>
          When the MySQL Enterprise Service Manager is installed, the Tomcat/Apache and
          MySQL server services are started. It is possible to remove
          these services without also removing your MySQL Enterprise Service Manager
          installation. (For more information about these services see,
          <a href="mem-introduction.html#mem-server-starting-windows" title="15.3.2.5. Starting/Stopping the MySQL Enterprise Monitor Service on Windows">Section 15.3.2.5, “Starting/Stopping the MySQL Enterprise Monitor Service on Windows”</a> or,
          <a href="mem-introduction.html#mem-server-starting-unix-osx" title="15.3.2.6. Starting/Stopping the MySQL Enterprise Monitor Service on Unix and Mac OS X">Section 15.3.2.6, “Starting/Stopping the MySQL Enterprise Monitor Service on Unix and Mac OS X”</a>.)

          
        </p><p>
          Do this by finding the <code class="literal">MySQL Enterprise Monitor</code> menu option
          and choosing <code class="literal">Services</code> and then
          <code class="literal">Uninstall MySQL Enterprise Monitor Services</code>. This will
          remove all the services associated with MySQL Enterprise Service Manager.
        </p><p>
          You can confirm that these services have been removed by
          checking services in the Microsoft Management Console Services
          window.
        </p><p>
          If you wish to reinstall these services you can do this by
          using the <code class="literal">Install MySQL Enterprise Monitor Services</code> menu
          option.
        </p><p>
          It is also possible to remove services using the
          <code class="filename">mysqlmonitorctl.bat</code> file found in the
          <code class="filename">C:\Program Files\MySQL\Enterprise\Monitor</code>
          directory. To see the available options, go to the command
          line and type: <strong class="userinput"><code>myqlnetworkctrl help</code></strong>.
          This batch file is discussed in more detail in
          <a href="mem-introduction.html#mem-server-starting-windows" title="15.3.2.5. Starting/Stopping the MySQL Enterprise Monitor Service on Windows">Section 15.3.2.5, “Starting/Stopping the MySQL Enterprise Monitor Service on Windows”</a>.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-removing-agent-windows"></a>15.3.7.1.2. Removing the Monitor Agent</h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-remove-single-agent-windows">15.3.7.1.2.1. Removing a Single Agent</a></span></dt></dl></div><p>
        To remove the Monitor Agent itself, open the <code class="literal">Control
        Panel</code> and choose <code class="literal">Add or Remove
        Programs</code>. Find the entry for <code class="literal">MySQL Enterprise
        Monitor Agent</code> and remove it. This will execute the
        uninstall program located in the <code class="filename">C:\Program
        Files\MySQL\MySQL\Enterprise\Agent</code> directory.
      </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          If you are running more than one agent on the same machine and
          wish to remove only one of the agents, do
          <span class="bold"><strong>not</strong></span> remove the <code class="literal">MySQL
          Enterprise Monitor Agent</code> entry from the <code class="literal">Add
          or Remove Programs</code> menu. To remove a single agent
          see <a href="mem-introduction.html#mem-remove-single-agent-windows" title="15.3.7.1.2.1. Removing a Single Agent">Section 15.3.7.1.2.1, “Removing a Single Agent”</a>.
        </p></div><p>
        After removing the Monitor Agent you may also need to remove the
        directories, <code class="filename">C:\Program
        Files\MySQL\Enterprise</code> and <code class="filename">C:\Program
        Files\MySQL\Enterprise\Agent</code>.
      </p><p>
        Removing the Monitor Agent in this fashion will remove the
        default service. However, if you are running additional Monitor
        Agents as described in <a href="mem-introduction.html#mem-cfg-agent-ini" title="15.3.3.6.2. MySQL Server (agent-instance.ini) Configuration">Section 15.3.3.6.2, “MySQL Server (<code class="literal">agent-instance.ini</code>) Configuration”</a>, you
        will have to remove those agents manually. See the next section
        for instructions on doing this.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="mem-remove-single-agent-windows"></a>15.3.7.1.2.1. Removing a Single Agent</h6></div></div></div><p>
          If you are running more than one agent on the same machine and
          wish to remove only one of the agents, do
          <span class="bold"><strong>not</strong></span> remove the <code class="literal">MySQL
          Enterprise Monitor Agent</code> entry from the <code class="literal">Add
          or Remove Programs</code> menu. To remove a single agent
          and leave other agents intact follow these steps:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Stop the agent
            </p></li><li><p>
              Confirm the location of the log files
            </p></li><li><p>
              Remove the agent as a service
            </p></li><li><p>
              Remove/Archive the associated files
            </p></li></ol></div><p>
          It is best to stop the agent before removing it; for
          instructions on stopping an agent see,
          <a href="mem-introduction.html#mem-starting-agent-windows" title="15.3.3.5.1. Starting/Stopping the Agent on Windows">Section 15.3.3.5.1, “Starting/Stopping the Agent on Windows”</a>.
        </p><p>
          You can confirm the location of the agent log files by
          checking the <code class="filename">ini</code> file. For more
          information on this topic see
          <a href="mem-introduction.html#mem-cfg-mysql-monitor-agent-ini" title="15.3.3.6.1. MySQL Enterprise Monitor Agent (mysql-monitor-agent.ini)
        Configuration">Section 15.3.3.6.1, “MySQL Enterprise Monitor Agent (<code class="filename">mysql-monitor-agent.ini</code>)
        Configuration”</a>.
        </p><p>
          Go to the command line and remove the MySQL Enterprise Monitor Agent as a
          Windows service by typing:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>sc delete <em class="replaceable"><code>AgentName</code></em></code></strong>
</pre><p>
          You can confirm that the agent has been removed by checking
          the Microsoft Management Console Services window. There should
          no longer be an entry for the removed agent.
        </p><p>
          You should also remove or archive any log or configuration
          files associated with this agent. If you have installed any
          additional agents, remove them in the same fashion.
        </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-unix-osx-removal"></a>15.3.7.2. Removing the MySQL Enterprise Monitor: Unix and Mac OS X</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-remove-unix-osx">15.3.7.2.1. Removing the MySQL Enterprise Service Manager</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-removing-service-agent-unix-osx">15.3.7.2.2. Removing the Monitor Agent</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-remove-unix-osx"></a>15.3.7.2.1. Removing the MySQL Enterprise Service Manager</h5></div></div></div><p>
        To remove the MySQL Enterprise Service Manager, find the
        <code class="filename">uninstall</code> file in the
        <code class="filename">/opt/mysql/enterprise/monitor</code> directory.
      </p><p>
        Execute this file by typing:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./uninstall</code></strong>
</pre><p>
        During the uninstall process you will be given the option of
        saving existing data and log files. Choose this option if you
        plan to reinstall the MySQL Enterprise Monitor.
      </p><p>
        If you are not saving existing data, after uninstalling the
        MySQL Enterprise Service Manager you may remove the
        <code class="filename">/opt/mysql/enterprise/monitor</code> directory.
      </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          If you chose not to remove existing data and log files when
          uninstalling the MySQL Enterprise Monitor do
          <span class="bold"><strong>not</strong></span> remove the
          <code class="filename">/opt/mysql/enterprise/monitor</code> directory;
          doing so will delete these files.
        </p></div><p>
        On Red Hat Enterprise Linux 4 and Fedora Core 4, the uninstall
        script may not stop the Tomcat server. Do this manually if
        necessary. To do this see,
        <a href="mem-introduction.html#mem-server-starting-unix-osx" title="15.3.2.6. Starting/Stopping the MySQL Enterprise Monitor Service on Unix and Mac OS X">Section 15.3.2.6, “Starting/Stopping the MySQL Enterprise Monitor Service on Unix and Mac OS X”</a>.
      </p><p>
        There may be other Java processes running on your system. Be
        careful not to accidentally stop them.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-removing-service-agent-unix-osx"></a>15.3.7.2.2. Removing the Monitor Agent</h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-remove-agent-unix-osx">15.3.7.2.2.1. Removing a Single Agent</a></span></dt></dl></div><p>
        Prior to removal of the Monitor Agent Service you should stop
        any agents. Do this by changing to the
        <code class="filename">init.d</code> directory and issuing the command,
        <span><strong class="command">./mysql-monitor-agent stop</strong></span>.
      </p><p>
        You will find the <code class="filename">uninstall</code> file in the
        <code class="filename">/opt/mysql/enterprise/agent</code> directory under
        Unix and in the
        <code class="filename">/Applications/mysql/enterprise/agent</code>
        directory on Mac OS X. Execute this file by navigating to this
        directory and typing:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./uninstall</code></strong>
</pre><p>
        After uninstalling the Monitor Agent you may remove the
        <code class="filename">/opt/mysql/enterprise/agent</code> directory.
        Under Mac OS X this directory is called
        <code class="filename">/Applications/mysql/enterprise/agent</code>.
      </p><p>
        Removing the Monitor Agent in this fashion will remove the
        default service, and all the configuration files for different
        instances.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="mem-remove-agent-unix-osx"></a>15.3.7.2.2.1. Removing a Single Agent</h6></div></div></div><p>
          If you are running more than one agent on the same machine and
          wish to remove only one of the agents, do
          <span class="bold"><strong>not</strong></span> run the uninstall
          program. To remove a single agent and leave other agents
          intact follow these steps:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Stop the agent
            </p></li><li><p>
              Confirm the location of the log files
            </p></li><li><p>
              Remove the agent as a service
            </p></li><li><p>
              Remove/Archive associated files
            </p></li></ol></div><p>
          It is best to stop the agent before removing it; for
          instructions on stopping an agent see:

          </p><div class="itemizedlist"><ul type="disc"><li><p>
                Unix – <a href="mem-introduction.html#mem-starting-agent-unix" title="15.3.3.5.3. Starting/Stopping the Agent on Unix">Section 15.3.3.5.3, “Starting/Stopping the Agent on Unix”</a>
              </p></li><li><p>
                Mac OS X –
                <a href="mem-introduction.html#mem-starting-agent-osx" title="15.3.3.5.2. Starting/Stopping the Agent on Mac OS X">Section 15.3.3.5.2, “Starting/Stopping the Agent on Mac OS X”</a>
              </p></li></ul></div><p>
        </p><p>
          You can confirm the location of the agent log files by
          checking the <code class="filename">ini</code> file. For more
          information on this topic see
          <a href="mem-introduction.html#mem-cfg-mysql-monitor-agent-ini" title="15.3.3.6.1. MySQL Enterprise Monitor Agent (mysql-monitor-agent.ini)
        Configuration">Section 15.3.3.6.1, “MySQL Enterprise Monitor Agent (<code class="filename">mysql-monitor-agent.ini</code>)
        Configuration”</a>.
        </p><p>
          You may then remove the agent as a daemon by removing its
          entry in the <code class="filename">init.d</code> directory. You should
          also remove or archive any log or configuration files
          associated with this agent.
        </p><p>
          If you have installed any additional agents, remove them in
          the same fashion.
        </p></div></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mem-deployment"></a>15.4. Deploying MySQL Enterprise Service Manager</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-deployment-backup">15.4.1. Backing up MySQL Enterprise Service Manager</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-deployment-migration-2-0">15.4.2. Migrating 1.3.x Historical Data to MySQL Enterprise Monitor 2.0</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-deployment-maintenance">15.4.3. Regular MySQL Enterprise Monitor Maintenance</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-deployment-config">15.4.4. Choosing Suitable MySQL Enterprise Service Manager Hardware Configurations</a></span></dt></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      MySQL Enterprise subscription, MySQL Enterprise Monitor, MySQL
      Replication Monitor, and MySQL Query Analyzer are only available
      to commercial customers. To learn more, see:
      <a href="http://www.mysql.com/products/enterprise/features.html" target="_top">http://www.mysql.com/products/enterprise/features.html</a>.
    </p></div><p>
    This chapter provides some notes and guidance on deploying
    MySQL Enterprise Service Manager, including hardware and server requirements for the
    MySQL Enterprise Service Manager, and how to backup the monitoring data.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-deployment-backup"></a>15.4.1. Backing up MySQL Enterprise Service Manager</h3></div></div></div><p>
      If you want to backup the data stored within your MySQL Enterprise Service Manager,
      you can use any of the typical backup solutions, such as
      <code class="literal">mysqldump</code>, to save your data. All you need to
      backup the information is host name, user name and password
      details that were set during the installation of the
      MySQL Enterprise Service Manager
    </p><p>
      You can locate this information by examining the contents of the
      <code class="filename">configuration_report.txt</code> file that was
      generated when MySQL Enterprise Service Manager was installed. A scample of the
      file is provided below:
    </p><pre class="programlisting">MySQL Enterprise Monitor (Version 2.0.0.7088 : 20081031_152749_r7088)
Here are the settings you specified:
Application hostname and port: http://127.0.0.1:18080
Tomcat Ports: 18080 - 18443 (SSL)
MySQL Port : 13306
Repository Credentials (bundled MySQL):
---------------------------------------
service_manager/Password
Use the following command to login to the MySQL Enterprise Monitor database:
mysql -uservice_manager -pPassword -P13306 -h127.0.0.1
</pre><p>
      The last line provides the information about how to connect to the
      server using the standard <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> command line
      client.
    </p><p>
      All the MySQL Enterprise Monitor repository information, including your
      configuration, rule and historical data is stored within the
      <code class="literal">mem</code> database.
    </p><p>
      To backup this information using <code class="literal">mysqldump</code> you
      might use the following command:
    </p><pre class="programlisting">shell&gt; mysqldump --single-transaction »
-uservice_manager -pPassword -P13306 -h127.0.0.1 mem &gt;mem.dump
</pre><p>
      The above command would create a file,
      <code class="filename">mem.dump</code>, containing all of the MySQL Enterprise Monitor
      data.
    </p><p>
      To ensure consistency in a recovery situation, you may also want
      to backup the agent configuration and metadata stored on each
      monitored MySQL server. To do this:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Backup the configuration files of each agent. You should keep
          a copy of the <code class="filename">etc</code> directory for each
          agent. This directory contains the main configuration file,
          <code class="filename">mysql-monitor-agent.ini</code>, and the
          configuration information for each server being monitored,
          which is stored within the <code class="filename">etc/instances</code>
          directory.
        </p></li><li><p>
          On each server being monitored, retain a copy of the
          <code class="literal">mysql.inventory</code> table, which contains the
          unique ID of the MySQL server.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-deployment-migration-2-0"></a>15.4.2. Migrating 1.3.x Historical Data to MySQL Enterprise Monitor 2.0</h3></div></div></div><p>
      You can migrate the data generated during a MySQL Enterprise Monitor 1.3.x
      installation using the Data Migration functionality of the
      <span class="guilabel">Server Configuration</span> panel.
    </p><p>
      To use the data migration feature, you must have installed
      MySQL Enterprise Service Manager using an <span class="emphasis"><em>update</em></span> installer.
      The update installer performs the initial migration of your
      configuration, rules, schedule, and events data. The historical
      data is not migrated until you explicitly request the migration of
      information within the <span class="guilabel">Manage Servers</span> section
      of the <span class="guilabel">Settings</span> panel.
    </p><p>
      Data migration works on a single server, allowing you to select on
      which servers you want to migrate information. The migration is
      subject to the following:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          You must elect to migrate the data from each server
          individually.
        </p></li><li><p>
          Migration takes approximately 5-6 hours, for each month, for
          each server. Therefore, if you have six months of data on 10
          servers it could take between 300 and 360 hours (15 days) to
          migrate all of your historical data one server at a time.
        </p></li><li><p>
          To limit the data migration, set the <span class="guilabel">Data Purge
          Behavior</span> within the <span class="guilabel">Settings</span>
          page. Only data more recent than the specified purge period
          will be migrated. Data older than the purge period will be
          ignored.
        </p></li><li><p>
          To prevent performance issues, migrate only one or a small
          number of servers concurrently.
        </p></li><li><p>
          You can start and stop the migration of the data at any time.
          As a general guide, you should avoid stopping the data
          migration process and allow it to complete unless:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              Run out of disk space.
            </p></li><li><p>
              MySQL Enterprise Service Manager becomes too slow and unresponsive.
            </p></li><li><p>
              Migration never completes.
            </p></li></ul></div><p>
          With the last item, where the migration never completes,
          occasionally there are some aspects of the data that cannot be
          migrated successfully. This will prevent the migration process
          completing, but does not affect the conversion of any data
          that could be migrated.
        </p></li></ul></div><p>
      <span class="bold"><strong>Starting Historical Data
      Migration</strong></span>
    </p><p>
      To start data migration:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Switch to the <span class="guilabel">Manage Servers</span> display of
          the <span class="guilabel">Settings</span> panel within
          MySQL Enterprise Dashboard.
        </p></li><li><p>
          Ensure that the data migration functionality has been enabled.
          The <span class="guibutton">Start</span> and
          <span class="guibutton">Stop</span> buttons next to
          <span class="guilabel">Historical Data Migration</span> will be
          visible.
        </p><div class="figure"><a name="fig-monitor-migration-check"></a><p class="title"><b>Figure 15.29. MySQL Enterprise Monitor: Historical Data Migration Availability</b></p><div class="mediaobject"><img src="images/monitor-migration-check.png" width="1251" height="282" alt="MySQL Enterprise Monitor: Historical
              Data Migration Availability"></div></div></li><li><p>
          Select the servers you want to migrate by using the checkbox
          next to each server name. You can select one or more servers
          to migrate. Servers that are suitable for migration will show
          their migration status within the <span class="guilabel">Migration
          Status</span> columnn. If the server is not able to be
          migrated, <code class="literal">N/A</code> will be shown.
        </p></li><li><p>
          Click <span class="guibutton">Start</span> next to
          <span class="guilabel">Historical Data Migration</span>.
        </p></li><li><p>
          You will be presented with a confirmation dialog box. To start
          the migration, click <span class="guibutton">start migration</span>.
          To cancel migration, click <span class="guibutton">cancel</span>.
        </p></li><li><p>
          The servers that have been selected for migration will show
          <code class="literal">Queued for Migration</code> in the
          <span class="guilabel">Migration Status</span> column.
        </p><div class="figure"><a name="fig-monitor-migration-confirm"></a><p class="title"><b>Figure 15.30. MySQL Enterprise Monitor: Confirming Historical Data Migration</b></p><div class="mediaobject"><img src="images/monitor-migration-confirm.png" width="403" height="169" alt="MySQL Enterprise Monitor: Confirming
              Historical Data Migration"></div></div></li></ul></div><p>
      <span class="bold"><strong>Monitoring Historical Data
      Migration</strong></span>
    </p><p>
      You can check the migration status of any individual server by
      examining the <span class="guilabel">Migration Status</span> column for
      each server. You can see an example of the migration status below.
    </p><div class="figure"><a name="monitor-migration-progress"></a><p class="title"><b>Figure 15.31. MySQL Enterprise Monitor: Historical Data Migration Progress</b></p><div class="mediaobject"><img src="images/monitor-migration-progress.png" width="1090" height="170" alt="MySQL Enterprise Monitor: Historical Data
          Migration Progress"></div></div><p>
      Note that the migration status is shown according to the state of
      migration at the time the page was loaded. The actual migration
      continues in the background, and the current state may not match
      the state of the migration at the time it is viewed.
    </p><p>
      Servers showing <code class="literal">Done</code> in the <span class="guilabel">Migration
      Status</span> column have already completed their migration.
    </p><p>
      You can check the overall migration status by examining the
      <span class="guilabel">Upgrade Status</span> display.
    </p><p>
      <span class="bold"><strong>Stopping Historical Data
      Migration</strong></span>
    </p><p>
      You can stop the migration process for any server that is still
      migrating data. The migration can be restarted at any time without
      causing any problems.
    </p><p>
      To stop the historical data migration:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Select the servers you want to stop migrating by using the
          checkbox next to each server name. You can select one or more
          servers to stop migrating.
        </p></li><li><p>
          Click <span class="guibutton">Stop</span> next to <span class="guilabel">Historical
          Data Migration</span>.
        </p></li></ol></div><p>
      Confirmation that the migration has been stopped will be provided.
      If migration has already completed, you will be notified.
    </p><p>
      <span class="bold"><strong>Removing Old Data</strong></span>
    </p><p>
      Once data migration has been completed for all the servers you
      want to migrate, you may want to delete or remove access to the
      old data within your MySQL Enterprise Monitor repository. Data for MySQL Enterprise Monitor 1.3
      was stored in a database called <code class="literal">merlin</code> within
      the MySQL repository. Data for MySQL Enterprise Monitor 2.0 is stored within a
      database called <code class="literal">mem</code>.
    </p><p>
      To create a backup of the old information, use
      <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a>:
    </p><pre class="programlisting">shell&gt; mysqldump -uservice_manager -pPassword -P13306 -h127.0.0.1 merlin &gt;data-1.3.sql</pre><p>
      The above will create a file, <code class="filename">data-1.3.sql</code>
      containg all of the MySQL Enterprise Monitor 1.3 information.
    </p><p>
      If you remove access to the old data, then the data migration
      options for old servers will be removed from the <span class="guilabel">Manage
      Servers</span> panel within MySQL Enterprise Service Manager. To remove access,
      you need to <code class="literal">REVOKE</code> access to the
      <code class="literal">merlin</code> database:
    </p><pre class="programlisting">mysql&amp; REVOKE ALL on merlin.* FROM 'service_manager';</pre><p>
      Note that revoking access to the old data will not reclaim any of
      the disk space used by the old data.
    </p><p>
      To delete the data from the database and free up the space being
      used by the historical information, <code class="literal">DROP</code> the
      <code class="literal">merlin</code> database:
    </p><pre class="programlisting">mysql&amp; DROP DATABASE merlin;</pre><p>
      Once all the data has been migrated you can hide the migration
      user interface by clicking on the <span class="guibutton">hide migration
      interface</span> button.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-deployment-maintenance"></a>15.4.3. Regular MySQL Enterprise Monitor Maintenance</h3></div></div></div><p>
      MySQL Enterprise Monitor is generally self managing and does not need excessive
      maintenance. You should, however, be aware of certain maintentnace
      tasks that you can automate or will need to manually perform to
      keep your MySQL Enterprise Monitor running efficiently.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Make sure you have set the purge interval for your data to an
          appropriate value according to durationa nd history of data
          that you want to keep. For more information, see
          <a href="mem-introduction.html#mem-data-purge">???</a>.
        </p></li><li><p>
          Check, and delete, the contents of the temporary directory
          with your MySQL Enterprise Service Manager installation directory.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-deployment-config"></a>15.4.4. Choosing Suitable MySQL Enterprise Service Manager Hardware Configurations</h3></div></div></div><p>
      Running MySQL Enterprise Service Manager places a reasonable load on your system,
      and this load increases linearly as you add more agents monitoring
      more servers. Ideally, you should use a dedicated machine for
      MySQL Enterprise Service Manager, rather than running it alongside other
      applications and services.
    </p><p>
      <span class="bold"><strong>Minimum System Requirements</strong></span>
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          2 or more CPU cores
        </p></li><li><p>
          2 or more GB of RAM
        </p></li><li><p>
          Disk I/O subsystem applicable for a write-intensive database
        </p></li></ul></div><p>
      <span class="bold"><strong>Recommended System Requirements (if
      monitoring 100 or more MySQL servers)</strong></span>
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          4 or more CPU cores
        </p></li><li><p>
          8 or more GB of RAM
        </p></li><li><p>
          Disk I/O subsystem applicable for a write-intensive database
          (RAID10, RAID 0+1)
        </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mem-dashboard"></a>15.5. MySQL Enterprise Dashboard</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-server-tree">15.5.1. The Server Tree</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-monitor-page-graphs">15.5.2. The Server Graphs and Critical Events</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-heat-chart">15.5.3. The Heat Chart</a></span></dt></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      MySQL Enterprise subscription, MySQL Enterprise Monitor, MySQL
      Replication Monitor, and MySQL Query Analyzer are only available
      to commercial customers. To learn more, see:
      <a href="http://www.mysql.com/products/enterprise/features.html" target="_top">http://www.mysql.com/products/enterprise/features.html</a>.
    </p></div><p>
    The purpose of the MySQL Enterprise Dashboard is to provide you with
    information about your MySQL servers. It provides a list of the
    latest MySQL Enterprise Advisor reports, server status information,
    MySQL Enterprise alerts, and updated views of monitored MySQL
    servers. The <code class="literal">Monitor</code> screen gives a quick
    overview of the status of your MySQL servers.
  </p><p>
    Open the Dashboard by typing the host name into the address bar of
    your web browser. If you are unsure of the host name check the
    <code class="literal">Application host name and port</code> in the
    <code class="filename">configuration_report.txt</code> file. The default
    value is <code class="literal">http://127.0.0.1:18080/Auth.action</code> but
    this login is only valid if you are logging in from the machine that
    hosts the dashboard. If you are logging in from a remote machine you
    will have to specify a value other than
    <code class="literal">127.0.0.1</code>. Likewise, choose a different port if
    you are not using the default. After logging in, select the
    <code class="literal">Monitor</code> tab.
  </p><p>
    The Monitoring page provides an instant health check for all of the
    MySQL servers across the enterprise.
  </p><p>
    From this page users can:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        View monitoring data and all critical MySQL Advisor Rule
        violations for all or selected servers.
      </p></li><li><p>
        Close and annotate MySQL Advisor Rule violations.
      </p></li><li><p>
        Quickly determine if there is a Monitor Agent that is not
        communicating with the Service Manager.
      </p></li><li><p>
        Quickly determine if there is a server that is in trouble or
        completely down.
      </p></li><li><p>
        View indicator value graphs for key MySQL and operating system
        (OS) level metrics. Graph presentation will default to a
        thumbnail view but will open into a larger image upon being
        clicked.
      </p></li></ul></div><p>
    The monitored server or servers are displayed in a tab on the left
    known as the <code class="literal">Server Tree</code>. You can navigate to a
    number pages that provide more detailed information. These pages
    include:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">Monitor</code> — the overview page providing
        you with a quick summary of the servers, their status, events,
        availability and load. The remainder of this chapter details the
        contents of this page.
      </p></li><li><p>
        <code class="literal">Advisors</code> — shows the various advisors
        configured in your installation and allows you to schedule their
        execution on different servers, apply and manage rules and
        manage the advisor installation itself. For more information,
        see <a href="mem-introduction.html#mem-advisors" title="15.7. The Advisors Page">Section 15.7, “The Advisors Page”</a>.
      </p></li><li><p>
        <code class="literal">Events</code> — provides an interface into the
        event system that highlights specific issues and problems on
        your monitored servers. For more information on using Events,
        see <a href="mem-introduction.html#mem-events" title="15.8. The Events Page">Section 15.8, “The Events Page”</a>.
      </p></li><li><p>
        <code class="literal">Query Analyzer</code> — interfaces to the
        query monitoring system that can be used to monitor and track
        the individual queries that are being executed on a system and
        help to highlight problem queries that may need optimization or
        that may be affecting server load. For more information, see
        <a href="mem-introduction.html#mem-query-analysis" title="15.10. The Query Analyzer Page">Section 15.10, “The Query Analyzer Page”</a>.
      </p></li><li><p>
        <code class="literal">Graphs</code> — enables you to view and
        configure a number of individual graphcs covering a range of
        different statistics. For more details on how to view and use
        these graphs, see <a href="mem-introduction.html#mem-graphs" title="15.9. The Graphs Page">Section 15.9, “The Graphs Page”</a>.
      </p></li><li><p>
        <code class="literal">Replication</code> — provides information on
        the status and structure of your servers that are using
        replication. This page is only available if you have a suitable
        subscription level. For more information, see
        <a href="mem-introduction.html#mem-replication" title="15.11. The Replication Page">Section 15.11, “The Replication Page”</a>.
      </p></li><li><p>
        <code class="literal">Settings</code> — controls the settings for
        the server, including email configuration, passwords, and server
        and user management. For more information, see
        <a href="mem-introduction.html#mem-dashboard-settings" title="15.6. The Settings Page">Section 15.6, “The Settings Page”</a>.
      </p></li></ul></div><p>
    Graphs are shown in the center of the page beneath the tabs. If
    applicable, you'll also find a list of critical events.
  </p><p>
    On the right is the color-coded <code class="literal">Heat Chart</code>,
    showing the advisors that are installed by default. The
    <code class="literal">Heat Chart</code> shows the most important advisors,
    allowing a quick overview of the state of your servers. You may open
    the <code class="literal">Heat Chart</code> in its own window by clicking the
    <code class="literal">Standalone Heat Chart</code> link. If applicable, you'll
    also find a list of critical events.
  </p><p>
    The <code class="literal">Show/Hide Legend</code> link toggles display of the
    key to the icons used in the <code class="literal">Heat Chart</code>.
  </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      Find colorblind-accessible icons in the
      <code class="filename">alternate</code> directory. On Linux this directory
      is immediately below the
      <code class="filename">/monitor/apache-tomcat/webapps/ROOT/web/resources/images/</code>
      directory. These images are stored in the same directory on
      Windows. To use them, backup the originals and then copy and paste
      the alternate set into the <code class="filename">images</code> directory.
    </p></div><p>
    If a specific server is selected in the <code class="literal">Server
    Tree</code> details about this server are shown beneath the
    legend in the <code class="literal">Meta Info</code> area. The information
    shown in this area is the host name, the MySQL version number, the
    number of scheduled rules, the operating system, and the CPU.
  </p><p>
    The <code class="literal">Meta Info</code> section also shows how long the
    agent has been running, when it last contacted the MySQL server it
    is monitoring, and the last time the agent contacted the dashboard.
    Mouse over the date shown beside <span class="guilabel">Up Since</span> and a
    pop-up box displays the time that has elapsed since the server
    instance was last started. You can also mouse over the
    <span class="guilabel">Last MySQL Contact</span> and the <span class="guilabel">Last Agent
    Contact</span> dates.
  </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      In the case of remote monitoring, the agent runs on a different
      machine than the MySQL server that it is monitoring. The
      <code class="literal">Hostname</code>, <code class="literal">MySQL</code>, and
      <code class="literal">Rules</code> information applies to the system being
      monitored. The <code class="literal">OS</code> and <code class="literal">CPU</code>
      information applies to the machine on which the agent is running.
      For more information about remote monitoring see,
      <a href="mem-introduction.html#mem-install-agent-remote" title="15.3.3.6.4. Configuring an Agent to Monitor a Remote MySQL Server">Section 15.3.3.6.4, “Configuring an Agent to Monitor a Remote MySQL Server”</a>.
    </p></div><p>
    The top of the screen shows the refresh cycle and
    <code class="literal">Help</code> and <code class="literal">Log Out</code> links. Click
    the <code class="literal">Help</code> link to open the documentation in a
    separate browser window. Choose <code class="literal">Log Out</code> if you
    wish to leave the Dashboard or to log in as a different user.
    Different refresh rates are available from the drop-down listbox.
  </p><p>
    In the footer are external links to MySQL Enterprise and
    information about the current user. Users can remain connected to
    the Dashboard and update their subscription, use the Enterprise
    Knowledge Base, and contact technical support. Your subscription
    information is also displayed here, showing the number of days
    remaining and the number of licenses. The number of licenses
    indicates to the number of machines that may be monitored; any
    number of MySQL servers may be running on a specific machine.
  </p><p>
    The footer also contains a link to the <code class="literal">Settings</code>
    page. If your subscription is current it reads
    <span class="guilabel">Subscription is up-to-date. More info....</span>. For
    more information about the <code class="literal">Settings</code> page see
    <a href="mem-introduction.html#mem-product-info" title="15.6.7. The Product Information Screen">Section 15.6.7, “The Product Information Screen”</a>.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-server-tree"></a>15.5.1. The Server Tree</h3></div></div></div><p>
      The tab on the left displays the Server tree. By default the first
      group of servers is selected. This selection determines the
      information shown on the <code class="literal">Monitor</code> page.
    </p><p>
      If a server group is selected, the information presented on the
      <code class="literal">Monitor</code> page is aggregate information for this
      group; if only one server is selected the information applies to
      that server only.
    </p><p>
      Change your server selection and the information shown in the
      graphs and in the <code class="literal">Heat Chart</code> changes.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        For more information about server groups see,
        <a href="mem-introduction.html#mem-server-grouping" title="15.6.3.2. Grouping Servers">Section 15.6.3.2, “Grouping Servers”</a>.
      </p></div><p>
      The individual server, or server group, selected in the Server
      Tree also determines what information appears when the
      <code class="literal">Advisors</code> tab or the <code class="literal">Events</code>
      tab is selected.
    </p><p>
      The Server Tree presents an easy way to navigate to different
      groups or to specific servers.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-monitor-page-graphs"></a>15.5.2. The Server Graphs and Critical Events</h3></div></div></div><p>
      The center of the <code class="literal">Monitor</code> page gives a visual
      representation of the state of your servers.
    </p><div class="figure"><a name="mem-server-graphs"></a><p class="title"><b>Figure 15.32. MySQL Enterprise Dashboard: The Graphs screen</b></p><div class="mediaobject"><img src="images/server-graphs.png" width="429" height="251" alt="MySQL Enterprise Dashboard: The Graphs screen"></div></div><p>
      The graphs present information about the currently selected server
      or server group. The default graphs show the hit ratios, CPU
      utilization, connections, and database activity for a specific
      interval.
    </p><p>
      To set the interval click the <code class="literal">configure graphs</code>
      link immediately below the graphs. This opens a dialog box where
      you can choose the default interval for the x-axis of the graphs.
      Defining a shorter or longer interval gives you a shorter or
      longer term view of server activity. The thumbnail and full-size
      graph dimensions can also be adjusted from this dialog box. Save
      any changes that you have made and the values chosen will be the
      defaults whenever you log in.
    </p><p>
      You can also choose the default graphs shown on the
      <code class="literal">Monitor</code> page. To do this click the
      <code class="literal">edit favorites</code> link and choose the graphs you
      want from the drop-down list box. To choose contiguous graphs,
      hold down the <span><strong class="keycap">Shift</strong></span> key and click on the desired
      graphs. For a non-contiguous selection, click the desired graphs
      while holding down the <span><strong class="keycap">Ctrl</strong></span> key. The maximum
      number of graphs that can be displayed on the
      <code class="literal">Monitor</code> page is six. Save your changes and
      these will be the default graphs whenever you log in.
      
    </p><p>
      Color coding helps distinguish different aspects of each graph.
      With <code class="literal">Database Activity</code> for example, you can
      readily distinguish <code class="literal">SELECT</code> statements from
      database insertions.
    </p><p>
      Clicking a graph opens a detailed view with <span class="guilabel">Graph
      Display</span> and <span class="guilabel">Configure</span> tabs. Choose
      the <code class="literal">Configure</code> tab to temporarily change the way
      that a graph displays. Changes made from this tab only apply to
      the standalone graph while it is open. Persistent changes are made
      as described above.
    </p><p><a name="mem-graph-interval"></a>
      Dismiss the enlarged graph by clicking the
      <span class="guibutton">hide</span> button.
    </p><p>
      <code class="literal">Critical</code> alerts appear on this page immediately
      below the graphs–quickly attracting your attention. For a
      description of all the different alarm levels see,
      <a href="mem-introduction.html#mem-heat-chart" title="15.5.3. The Heat Chart">Section 15.5.3, “The Heat Chart”</a>. This is the subject of
      discussion in <a href="mem-introduction.html#mem-events" title="15.8. The Events Page">Section 15.8, “The Events Page”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-heat-chart"></a>15.5.3. The Heat Chart</h3></div></div></div><p>
      The <code class="literal">Heat Chart</code> is found on the right side of
      the <code class="literal">Monitor</code> page and shows the status of
      critical rules. Monitored servers are organized by groups. To view
      the status of a specific server, click the
      <span class="guibutton">+</span> button next to the appropriate server
      group.
    </p><p>
      Whenever a new agent contacts the Service Manager for the first
      time, all the rules in the Heat Chart Advisor are automatically
      activated. These Advisors monitor the status of the server and
      agent, critical operating system indicators, and important events
      related to your MySQL servers. An example follows.
    </p><div class="figure"><a name="fig-mem-heat-chart"></a><p class="title"><b>Figure 15.33. MySQL Enterprise Dashboard: The Heat Chart</b></p><div class="mediaobject"><img src="images/heat-chart.png" width="404" height="388" alt="MySQL Enterprise Dashboard: The Heat Chart"></div></div><p>
      To interpret the Heat Chart see the following legend.
    </p><div class="figure"><a name="fig-mem-heat-chart-legend"></a><p class="title"><b>Figure 15.34. MySQL Enterprise Dashboard: The Heat Chart legend</b></p><div class="mediaobject"><img src="images/heat-chart-legend.png" width="273" height="150" alt="MySQL Enterprise Dashboard: The Heat Chart legend"></div></div><p>
      The status <code class="literal">unknown</code> will typically apply when an
      agent is down and can no longer report the status of the server
      that it is monitoring. The status <code class="literal">unknown</code> may
      also apply if the data collection that should be collected is not
      available on the server being monitored.
    </p><p>
      You may open the Heat Chart in its own browser window by clicking
      the <code class="literal">Standalone Heat Chart</code> link immediately
      below the <code class="literal">Heat Chart</code> on the left. If you like,
      the refresh rate can be set to a different rate than the setting
      on the <code class="literal">Monitor</code> page.
    </p><p>
      In addition to showing the most important advisors, the
      <code class="literal">Heat Chart</code> also has columns that display the
      number of critical, warning, and informational alarms. Clicking
      the hyperlink in any one of these columns takes you to the
      <code class="literal">Event</code> screen, which gives more detailed
      information. For more information about events see,
      <a href="mem-introduction.html#mem-events" title="15.8. The Events Page">Section 15.8, “The Events Page”</a>.
    </p><p>
      When the Dashboard is first installed no notification groups are
      associated with the Advisors shown in the Heat Chart. For more
      information on this topic see,
      <a href="mem-introduction.html#mem-advisor-installation-after-login" title="15.3.2.7.3. Installing Advisors After Initial Log-in">Section 15.3.2.7.3, “Installing Advisors After Initial Log-in”</a> and,
      <a href="mem-introduction.html#mem-notification-groups" title="15.6.5. Manage Notification Groups">Section 15.6.5, “Manage Notification Groups”</a>.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mem-dashboard-settings"></a>15.6. The Settings Page</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-global-settings">15.6.1. Global Settings</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-user-preferences">15.6.2. User Preferences</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-managing-servers">15.6.3. Manage Servers</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-managing-users">15.6.4. Managing Users</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-notification-groups">15.6.5. Manage Notification Groups</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-logs">15.6.6. Logs</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-product-info">15.6.7. The Product Information Screen</a></span></dt></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      MySQL Enterprise subscription, MySQL Enterprise Monitor, MySQL
      Replication Monitor, and MySQL Query Analyzer are only available
      to commercial customers. To learn more, see:
      <a href="http://www.mysql.com/products/enterprise/features.html" target="_top">http://www.mysql.com/products/enterprise/features.html</a>.
    </p></div><p>
    Upon initial installation you may have configured your
    MySQL Enterprise credentials and also outgoing email settings.
    This section explores the configuration settings in more detail, and
    also shows how to manage servers, users, notification groups, Simple
    Network Management Protocol (SNMP) traps, log files, and the product
    information screen.
  </p><p>
    Knowledge of server management is a prerequisite for properly
    configuring advisors — the subject of
    <a href="mem-introduction.html#mem-advisors" title="15.7. The Advisors Page">Section 15.7, “The Advisors Page”</a>.
  </p><p>
    To get to the <code class="literal">Settings</code> page open the Dashboard
    and choose the <code class="literal">Settings</code> tab.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-global-settings"></a>15.6.1. Global Settings</h3></div></div></div><p>
      The <span class="guilabel">Global Settings</span> control the main
      confirguration parameters for the entire MySQL Enterprise Monitor system,
      including your email notifications, data purge, and Enterprise
      website credentials.
    </p><div class="figure"><a name="fig-mem-settings-global"></a><p class="title"><b>Figure 15.35. MySQL Enterprise Dashboard: Settings</b></p><div class="mediaobject"><img src="images/mem-settings-global.png" width="969" height="801" alt="MySQL Enterprise Dashboard: Settings"></div></div><p>
      The <span class="guilabel">Global Settings</span> page is divided into a
      number of different sections:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <span class="guilabel">Outgoing Email Settings</span>
        </p><p>
          Configures the settings for email notificated by
          MySQL Enterprise Service Manager. You must configure the <span class="guilabel">From
          Address</span> <span class="guilabel">SMTP Server</span> settings.
          If your server requires authorization, complete the necessary
          server login details, and whether SSL is required.
        </p><p>
          You can test your configuration immediately by adding an email
          address to the <span class="guilabel">On Save, Send Test Email Message
          to</span> box.
        </p><p>
          For more information about <code class="literal">Outgoing Email
          Settings</code> see,
          <a href="mem-introduction.html#mem-outgoing-email-settings" title="15.3.2.7.5. Outgoing Email Settings">Section 15.3.2.7.5, “Outgoing Email Settings”</a>.
        </p></li><li><p><a name="mem-snmp-traps"></a>
          <span class="guilabel">SNMP Traps</span>
        </p><p>
          The <code class="literal">SNMP Traps</code> section of the
          <code class="literal">Global Preferences </code> page allows you to
          enable Simple Network Management Protocol so that your Network
          Management System (NMS) can handle events created by the
          MySQL Enterprise Monitor. Configure this section to route alerts and
          notifications to standard SNMP-enabled nodes on your network.
        </p><p>
          In the <span class="guilabel">target</span> text box enter the IP
          address or the host name of your NMS listener. The port number
          defaults to the well-known SNMP port, <code class="literal">162</code>.
          If you are not using this port, enter the port that your
          Network Management System is listening on.
        </p><p>
          Enter the appropriate community string in the
          <code class="literal">Community String</code> text box. The default
          value for this string is <code class="literal">public</code>.
        </p><p>
          To ensure that the target you have specified is valid, check
          the <code class="literal">On Save, Send Test Trap</code> check box. The
          remaining check boxes help you to configure how your NMS
          responds to MySQL Enterprise Monitor. Check the <span class="guilabel">Up/Down
          Application</span> check box to configure NMS for starting
          up or shutting down the MySQL Enterprise Monitor. For configuration of advisor
          events choose a level of severity and check the
          <span class="guilabel">Advisor event with the severity of
          <em class="replaceable"><code>Critical</code></em></span> check box.
          Finally, choose the <span class="guilabel">Application Error</span>
          check box to configure NMS to support application error traps.
          Be sure to save your settings before exiting.
        </p><p>
          If you wish to enable SNMP traps globally, check the
          <code class="literal">Enable SNMP Notifications</code> checkbox. To
          enable SNMP traps only for specific rules run against specific
          servers or server groups leave this checkbox unchecked —
          enabling specific SNMP traps is done as rules are scheduled.
          For instructions on doing this see
          <a href="mem-introduction.html#mem-scheduling-rules" title="15.7.2. Scheduling Rules">Section 15.7.2, “Scheduling Rules”</a>.
        </p><p>
          The Management Information Base (MIB) file associated with
          SNMP trapping is called <code class="filename">MONITOR.MIB</code>. For
          the location this file see
          <a href="http://dev.mysql.com/doc/mysql-monitor/2.0/en/mem-mib-file-location.html" target="_top">The Management Information Base (MIB) File</a>.
        </p></li><li><p>
          <span class="guilabel">Server Locale</span>
        </p><p>
          The <code class="literal">Server Locale</code> setting determines the
          language of notification for the following items:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                Email notifications
              </p></li><li><p>
                SNMP traps
              </p></li><li><p>
                The naming conventions for shared resources such as a
                replication group name prefix
              </p></li></ul></div><p>
        </p><p>
          The initial value in this drop down list box is the locale for
          the OS on which the Dashboard is running.
        </p></li><li><p><a name="mem-data-purge"></a>
          <span class="guilabel">Data Purge Behavior</span>
        </p><p>
          The <code class="literal">Data Purge Behavior</code> section of the
          <code class="literal">Global Preferences</code> page lets you remove old
          log files and also old data from the repository. The default
          purge interval is <code class="literal">never</code>. If you wish to
          purge data, change this setting by choosing from the drop-down
          list. Choosing <code class="literal">52 weeks</code>, for example, will
          remove all data that is older than a year.
        </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
            Purging data will permanently remove information from the
            repository. Since events are derived from data contained in
            the repository, they will be purged along with the data.
          </p><p>
            Ensure that there is adequate disk space for the repository.
            If you are monitoring numerous servers and running many
            rules the size of the repository can increase rapidly.
            Choose purge behavior accordingly.
          </p><p>
            The default value for purging, <code class="literal">never</code>, is
            the safest option. However, please choose a purge setting
            that makes sense for your environment.
          </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            The purge process is started approximately once every
            minute. If you change the purge duration from a larger
            timespan to a smaller one, the data may start to be purged
            immediately.
          </p></div><p>
          You can configure the data purge behavior for a number of
          different systems individually:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <span class="bold"><strong>Remove Historial Data Collection
              Older Than</strong></span> configures the duration that the
              main data about your servers is retained. This includes
              all data collections, including CPU, memory and
              connections and activity statistics.
            </p></li><li><p>
              <span class="bold"><strong>Remove Service Manager Logs Older
              Than</strong></span> configures the duration that the main
              MySQL Enterprise Service Manager logs are retained.
            </p></li><li><p>
              <span class="bold"><strong>Remove Query Analyzer Data Older
              Than</strong></span> configures the duration tha the query
              analyzer statistics and information about individual
              queries is retained.
            </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            Purging can be carried out manually by enabling the
            <code class="literal">innodb_file_per_table</code> for the repository
            database and then using an <code class="literal">OPTIMIZE TABLE</code>
            operation to reclaim space from deleted rows in the table.
          </p></div></li><li><p>
          <span class="guilabel">Remote Server Inventory Schedule</span>
        </p><p>
          MySQL Enterprise Monitor keeps track of all the databases and tables in a
          server, as well as the amount of RAM, disk space, and other
          items. A re-inventory updates this information in case you've
          added or dropped databases and tables. Depending upon the
          configuration of your system, this operation can tax
          resources. If you are monitoring many remote servers this is
          an operation you may want to perform in off-peak hours only.
        </p></li><li><p>
          <span class="guilabel">MySQL Enterprise Credentials</span>
        </p><p>
          You can specify the credentials for logging into the MySQL
          Enterprise Website. These should match the user name and
          password that you have registered with MySQL for your
          enterprise subscription.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            Only administrators can change the <code class="literal">MySQL Enterprise
            Credentials</code> section or enter a product key; for
            other users, this section does not show up in the interface.
            For more information about different users and their rights
            see <a href="mem-introduction.html#mem-managing-users" title="15.6.4. Managing Users">Section 15.6.4, “Managing Users”</a>. Specifying
            incorrect credentials results in the error message,
            “<span class="quote">Your credentials do not appear to be valid.</span>”
          </p></div></li><li><p>
          <span class="guilabel">MySQL Enterprise Product Key</span>
        </p><p>
          You may update your <code class="literal">MySQL Enterprise Product
          Key</code>. If you do not have access to the Internet from
          the Dashboard, this provides an alternate way to update or
          activate the MySQL Enterprise Monitor.
        </p><p>
          To enter your product key first download it from the MySQL
          Enterprise website. Copy the key to a location accessible from
          the Dashboard. Use the <span class="guibutton">Browse</span> button to
          locate the key and then press the <span class="guibutton">save</span>
          button.
        </p><p>
          If you wish to switch from using your MySQL Enterprise
          credentials to using a product key to update MySQL Enterprise Monitor, you
          must first clear your credentials. Do this by removing the
          email address from the <span class="guilabel">MySQL Enterprise
          Credentials</span> section and then clicking the
          <span class="guibutton">save</span> button. You may then enter and
          save your MySQL Enterprise product key.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            Only administrators can change the <code class="literal">MySQL Enterprise
            Credentials</code> section or enter a product key; for
            other users, this section does not show up in the interface.
            For more information about different users and their rights
            see <a href="mem-introduction.html#mem-managing-users" title="15.6.4. Managing Users">Section 15.6.4, “Managing Users”</a>. Specifying
            incorrect credentials results in the error message,
            “<span class="quote">Your credentials do not appear to be valid.</span>”
          </p></div></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-user-preferences"></a>15.6.2. User Preferences</h3></div></div></div><p>
      On this page users can change their passwords, user names, and
      locale information.
    </p><div class="figure"><a name="fig-mem-settings-user"></a><p class="title"><b>Figure 15.36. MySQL Enterprise Dashboard: User Preferences</b></p><div class="mediaobject"><img src="images/mem-settings-user.png" width="965" height="323" alt="MySQL Enterprise Dashboard: User Preferences"></div></div><p>
      Change your password by entering a new value into the
      <span class="guilabel">Password</span> text box. To change your user name
      enter a new value into the <span class="guilabel">Username</span> text box.
      Click the <span class="guibutton">save user properties</span> button to
      commit this change.
    </p><p>
      You may also adjust your time zone and locale information from
      this page. The settings on this page apply only to the user who is
      currently logged in.
    </p><p>
      The MySQL Enterprise Service Manager determines the default value for the locale by
      looking at your browser settings. Changing this value, determines
      the language setting for any future logins to the Dashboard,
      overriding your browser settings.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Be sure to set the correct time zone so that alerts are time
        stamped correctly.
      </p><p>
        This setting applies only to the specific user.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-managing-servers"></a>15.6.3. Manage Servers</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-server-rename">15.6.3.1. Renaming a Server</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-server-grouping">15.6.3.2. Grouping Servers</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-deleting-mysql-server">15.6.3.3. Removing a Server From the Dashboard</a></span></dt></dl></div><p>
      To help with server management, the Service Manager supports the
      logical grouping of MySQL servers. This allows you to group
      servers in any fashion you choose. For example, you can manage
      servers according to purpose. You can group servers by whether the
      servers handle Internet or intranet data, by whether they power
      finance or HR applications, or, if you prefer, you may organize
      them by physical location rather than by functionality.
    </p><div class="figure"><a name="fig-mem-settings-servers"></a><p class="title"><b>Figure 15.37. MySQL Enterprise Dashboard: Manage Servers</b></p><div class="mediaobject"><img src="images/mem-settings-servers.png" width="1293" height="227" alt="MySQL Enterprise Dashboard: Manage Servers"></div></div><p>
      For a server to appear in the Dashboard there must be an agent
      monitoring it. If you wish to add a server to the Dashboard follow
      the procedure for installing an agent found at
      <a href="mem-introduction.html#mem-install-agent" title="15.3.3. Monitor Agent Installation">Section 15.3.3, “Monitor Agent Installation”</a>. Instructions for adding a
      remote server are found at
      <a href="mem-introduction.html#mem-install-agent-remote" title="15.3.3.6.4. Configuring an Agent to Monitor a Remote MySQL Server">Section 15.3.3.6.4, “Configuring an Agent to Monitor a Remote MySQL Server”</a>.
    </p><p>
      The <span class="guilabel">Manage Servers</span> panel also allows you
      control the Query Analyzer and Data Migration. For more
      information, see <a href="mem-introduction.html#mem-query-analysis-settings" title="15.10.6. Query Analyzer Settings">Section 15.10.6, “Query Analyzer Settings”</a> and
      <a href="mem-introduction.html#mem-deployment-migration-2-0" title="15.4.2. Migrating 1.3.x Historical Data to MySQL Enterprise Monitor 2.0">Section 15.4.2, “Migrating 1.3.x Historical Data to MySQL Enterprise Monitor 2.0”</a>.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        The <code class="literal">All Servers</code> group is built in and every
        monitored server is a member of this group.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-server-rename"></a>15.6.3.1. Renaming a Server</h4></div></div></div><p>
        You can rename an existing server without losing the current
        historical data or configuration information. Renaming the
        server also allows you to modify the name of the server to be
        more descriptive according to the server's role within your
        organization. For example, you may want to rename a server from
        the default host name to include the department and application
        for the MySQL server.
      </p><p>
        To rename a server, click the <span class="guibutton">rename</span> link
        next to the server. You will be prompted with information about
        the server, including the host name and registered IP addresses
        for the agent. Fill in the alternative name that you want to be
        displayed in the text box at the bottom of the window.
      </p><div class="figure"><a name="fig-mem-server-rename"></a><p class="title"><b>Figure 15.38. MySQL Enterprise Dashboard: Server Renaming</b></p><div class="mediaobject"><img src="images/server-rename.png" width="401" height="296" alt="MySQL Enterprise Dashboard: Server Renaming"></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-server-grouping"></a>15.6.3.2. Grouping Servers</h4></div></div></div><p>
        All monitored servers are automatically included in the top
        level server grouping, <code class="literal">All Servers</code>. Other
        server groupings are replication groups or user-defined groups.
      </p><p>
        You can create a user-defined group by clicking on the
        <code class="literal">Manage Servers</code> link. Add a group name and
        then click the <span class="guibutton">create group</span> button. The
        new group will be displayed immediately.
      </p><p>
        Replication groups are automatically discovered by MySQL Enterprise Monitor and
        in this respect differ from user-defined groups. For more
        information about replication groups see
        <a href="mem-introduction.html#mem-replication" title="15.11. The Replication Page">Section 15.11, “The Replication Page”</a>. However, like user-defined
        groups you can edit the name of a replication group and add
        other servers to it.
      </p><p>
        To add to a group, select the <code class="literal">add to group</code>
        link. Choose the server or servers you wish to add and then
        complete the operation by choosing the <span class="guibutton">add to
        group</span> button. You can add a server to a group even
        if the agent is down.
      </p><p>
        To remove a server from a group expand the server group tree and
        click the <code class="literal">remove from group</code> link. To delete a
        server altogether see
        <a href="mem-introduction.html#mem-deleting-mysql-server" title="15.6.3.3. Removing a Server From the Dashboard">Section 15.6.3.3, “Removing a Server From the Dashboard”</a>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Slaves removed from a replication group will be rediscovered
          and re-added to that group.
        </p></div><p>
        There are three ways to modify an existing group; by renaming
        it, adding to it, or removing it. Select the
        <code class="literal">rename</code> link to change the name of a group and
        <code class="literal">add to group</code> to add additional servers.
        Deleting a group simply requires clicking the <code class="literal">remove
        all from group</code> link. This removes the server group but
        has no effect on individual servers.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-deleting-mysql-server"></a>15.6.3.3. Removing a Server From the Dashboard</h4></div></div></div><p>
        If you no longer wish to monitor a MySQL server you can remove
        it from the Dashboard. There is no provision for deleting an
        active server from the Dashboard—to remove a server you
        must make it inactive by stopping the agent.
      </p><p>
        For instructions on stopping an agent see:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Windows –
              <a href="mem-introduction.html#mem-starting-agent-windows" title="15.3.3.5.1. Starting/Stopping the Agent on Windows">Section 15.3.3.5.1, “Starting/Stopping the Agent on Windows”</a>
            </p></li><li><p>
              Unix – <a href="mem-introduction.html#mem-starting-agent-unix" title="15.3.3.5.3. Starting/Stopping the Agent on Unix">Section 15.3.3.5.3, “Starting/Stopping the Agent on Unix”</a>
            </p></li><li><p>
              Mac OS X – <a href="mem-introduction.html#mem-starting-agent-osx" title="15.3.3.5.2. Starting/Stopping the Agent on Mac OS X">Section 15.3.3.5.2, “Starting/Stopping the Agent on Mac OS X”</a>
            </p></li></ul></div><p>
      </p><p>
        Once the agent is stopped you may delete the monitored server.
        Deleting a server simply means that it will no longer show up in
        the Dashboard.
      </p><p>
        Remove a server by choosing the <code class="literal">Settings</code> tab
        and then the <code class="literal">Manage Servers</code> link. Find the
        server you wish to remove and delete it by clicking the
        <code class="literal">delete</code> link. Deleting a server from the
        <code class="literal">All Servers</code> group or from any other group
        will remove it from the Dashboard entirely.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          A <code class="literal">delete</code> link will not appear beside an
          active server. You must stop the agent before this link will
          appear.
        </p><p>
          You may remove a server from any group at any time. Removing
          the last server from a group also removes that group.
        </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-managing-users"></a>15.6.4. Managing Users</h3></div></div></div><p>
      The <span class="guilabel">Manage Servers</span> panel allows to create,
      delete and manage individual users that have access to
      MySQL Enterprise Service Manager
    </p><div class="figure"><a name="fig-mem-settings-users"></a><p class="title"><b>Figure 15.39. MySQL Enterprise Dashboard: Manage Users</b></p><div class="mediaobject"><img src="images/mem-settings-users.png" width="1291" height="153" alt="MySQL Enterprise Dashboard: Manage Users"></div></div><p>
      To log in to the Dashboard a user account is required. There are
      three types of users with varying privileges; Administrators,
      Database Administrators, and Agents. The
      <code class="literal">Administrator</code> can create additional users and
      differs from a <code class="literal">DBA</code> in this respect. For this
      reason the <code class="literal">Manage Users</code> does not display if a
      DBA user logs in. Additionally, only administrators can change the
      MySQL Enterprise Credentials section or enter a product key on the
      <code class="literal">Global Settings</code> page. These sections do not
      appear when DBA users log in. For more information on this subject
      see <a href="mem-introduction.html#mem-global-settings" title="15.6.1. Global Settings">Section 15.6.1, “Global Settings”</a>. The
      <code class="literal">Agent</code> account simply allows the MySQL Enterprise Monitor Agent
      to communicate with the Dashboard. There is no need for more than
      one agent account but defining an account for each server that is
      monitored can be an advantage since this minimizes exposure should
      any one agent be compromised. You cannot log in to the Dashboard
      using the agent's credentials.
    </p><p>
      When the Dashboard is first launched there are two default users,
      <code class="literal">Administrator</code> and <code class="literal">Agent</code>,
      both created during installation. Their default user names are
      respectively, <code class="literal">admin</code> and
      <code class="literal">agent</code>. The Administrator defined during
      installation as having the root role is unique; this user cannot
      be deleted.
    </p><p>
      If you are logged in as an <code class="literal">Administrator</code>, you
      can add a new user by choosing the <code class="literal">Manage Users</code>
      link from the <code class="literal">Settings</code> page. To create a user
      click the <span class="guibutton">create user</span> button, select a role
      for the user, and enter a user name and password.
    </p><p>
      When a new user first logs in, a dialog box opens requesting time
      zone and locale information. This information may be changed later
      from the <code class="literal">User Preferences</code> page. For more
      information, see <a href="mem-introduction.html#mem-user-preferences" title="15.6.2. User Preferences">Section 15.6.2, “User Preferences”</a>.
    </p><p>
      If you installed the Advisors through the Dashboard you should
      have already configured the settings for the root role user. (See
      <a href="mem-introduction.html#mem-global-settings" title="15.6.1. Global Settings">Section 15.6.1, “Global Settings”</a> and following for more
      information about this topic.)
    </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
        To receive MySQL Enterprise and Advisor updates configure the
        MySQL Enterprise settings for at least one user. The MySQL
        Enterprise settings were set up on the first login to the
        Dashboard. For information on changing these settings see,
        <a href="mem-introduction.html#mem-global-settings" title="15.6.1. Global Settings">Section 15.6.1, “Global Settings”</a>.
      </p></div><p>
      To edit an existing user's information, select the <code class="literal">Manage
      Users</code> link, then select the user you wish to edit. Make
      your desired changes in the fields provided and then save your
      changes.
    </p><p>
      To delete an existing user, merely select the
      <code class="literal">delete</code> link.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-notification-groups"></a>15.6.5. Manage Notification Groups</h3></div></div></div><p>
      The <span class="guilabel">Manage Notification Groups</span> panels allows
      you to create and manage the notification groups used when
      different notifications and warnings are distributed.
    </p><div class="figure"><a name="fig-mem-settings-notification"></a><p class="title"><b>Figure 15.40. MySQL Enterprise Dashboard: Manage Notification Groups</b></p><div class="mediaobject"><img src="images/mem-settings-notification.png" width="1293" height="150" alt="MySQL Enterprise Dashboard: Manage Notification
          Groups"></div></div><p>
      Notification groups are collections of users who should be
      notified when advisor alerts occur. These users may have login
      credentials for the Dashboard but this is not a requirement.
    </p><p>
      You can create a group by clicking on the <code class="literal">create
      group</code> link. Specify a group name and add recipients.
      When adding a user an email address must be specified. If you are
      adding multiple users separate them with commas.
    </p><p>
      To modify an existing notification group, select the
      <code class="literal">edit</code> link next to the group name. Deleting a
      group simply requires clicking the <code class="literal">delete</code> link.
    </p><p>
      If a rule triggers an alarm, an email will be sent to the members
      of the notification group specified when the rule was scheduled.
      For more information about scheduling rules see
      <a href="mem-introduction.html#mem-scheduling-rules" title="15.7.2. Scheduling Rules">Section 15.7.2, “Scheduling Rules”</a>.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        You should ensure that there is a mail server available for
        sending out alerts and that there is an account configured for
        receiving any alerts that are created.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-logs"></a>15.6.6. Logs</h3></div></div></div><p>
      Use the <code class="literal">Logs</code> link to inspect the various log
      files associated with the MySQL Enterprise Service Manager. The following image is
      an example of this screen.
    </p><div class="figure"><a name="fig-mem-settings-logs"></a><p class="title"><b>Figure 15.41. MySQL Enterprise Dashboard: Logs</b></p><div class="mediaobject"><img src="images/mem-settings-logs.png" width="1294" height="524" alt="MySQL Enterprise Dashboard: Logs"></div></div><p>
      The various categories of logs are shown in alphabetical order.
      The most recent changes to each log are shown in the
      <span class="guilabel">Last Modified</span> column. The number of entries
      in any specific log is shown under the
      <span class="guilabel">Entries</span> column.
    </p><p>
      To view detailed information click the <code class="literal">Log
      Name</code>. This will open a separate browser window showing
      the date, time, alert type, and accompanying message.
    </p><p>
      On this screen you can filter log information in a couple of ways;
      by the message type and by time period .
    </p><p>
      To filter by message type select from the options in the
      <span class="guilabel">level</span> drop-down box. These are, in order of
      decreasing severity:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          All
        </p></li><li><p>
          Error
        </p></li><li><p>
          Warning
        </p></li><li><p>
          Information
        </p></li><li><p>
          Trace
        </p></li><li><p>
          Debug
        </p></li></ul></div><p>
      You can also adjust the number of items that appear on each page.
    </p><p>
      Press the <code class="literal">clear all logs</code> link to remove all log
      entries. To remove entries of a specific kind click the
      <code class="literal">clear logs</code> link associated with the specific
      log you would like to remove. A confirmation dialog box allows you
      to back out of this operation and avoid accidentally removing log
      information.
    </p><p>
      To clear log files of a specific age see the <code class="literal">Data Purge
      Behavior</code> section of the <code class="literal">Global
      Preferences</code> page. For more information on this topic see
      <a href="mem-introduction.html#mem-data-purge">???</a>.
    </p><p>
      Use the <code class="literal">edit log level</code> link to change the type
      of error logged. The value selected from the <code class="literal">Edit Log
      Level</code> dialog box determines what appears under the
      <span class="guilabel">Threshold</span> column (second from the left in
      <a href="mem-introduction.html#mem-data-purge">???</a>).
    </p><p>
      Selecting <code class="literal">Error</code> from the list box will create
      the least number of log entries and <code class="literal">Debug</code> the
      most. Choosing <code class="literal">None</code> turns off logging
      altogether.
    </p><p>
      It is also possible to download a compressed version of all the
      log files. For more information, see
      <a href="mem-introduction.html#mem-product-info" title="15.6.7. The Product Information Screen">Section 15.6.7, “The Product Information Screen”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-product-info"></a>15.6.7. The Product Information Screen</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-subscriptions-warning">15.6.7.1. Subscription Warning</a></span></dt></dl></div><p>
      Use the <code class="literal">Product Information</code> link to view
      detailed information about your subscription level and contract
      status.
    </p><p>
      The <span class="guilabel">Contract Status</span> section displays the
      subscription level, expiration date, contract number, the number
      of servers supported, and your MySQL Enterprise user name. The
      <span class="guilabel">Subscription Level</span> section gives more
      detailed information, including features and any restrictions that
      may apply. You may update your subscription at any time by
      clicking the <span class="guibutton">update</span> button.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        The <span class="guibutton">update</span> button was added in version
        1.3 of the MySQL Enterprise Monitor. If your version of MySQL Enterprise Monitor does not have
        an <span class="guibutton">update</span> button, saving your credentials
        again will download a new key. See
        <a href="mem-introduction.html#mem-global-settings" title="15.6.1. Global Settings">Section 15.6.1, “Global Settings”</a> for instructions on doing
        this. If you do not have Internet access from the Dashboard, you
        can install a new key manually. This process is described in
        <a href="mem-introduction.html#mem-global-settings" title="15.6.1. Global Settings">Section 15.6.1, “Global Settings”</a>.
      </p></div><p>
      This page also contains Enterprise Dashboard Server information;
      the version number, uptime, and other information related to the
      memory used by the Java Virtual Machine.
    </p><p>
      The <code class="literal">Enterprise Dashboard Server information</code>
      section also contains the hyperlink, <code class="literal">Download diagnostic
      report</code>. Click this link to download a compressed version
      of the MySQL Enterprise Service Manager log files. All the log files found on the
      <code class="literal">Logs</code> page (for more information about logs see
      <a href="mem-introduction.html#mem-logs" title="15.6.6. Logs">Section 15.6.6, “Logs”</a>) are contained in this file. It also
      contains the Java properties file, the monitored MySQL servers
      property file, information about the status of the JDBC connection
      and Java threads, and the <code class="filename">subscription.xml</code>
      file. This report is especially useful for debugging the
      MySQL Enterprise Service Manager and the MySQL Enterprise Monitor Agent.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-subscriptions-warning"></a>15.6.7.1. Subscription Warning</h4></div></div></div><p>
        The <code class="literal">Subscriptions Warning</code> section on the
        product information page displays any warnings relative to your
        subscription. For example, if your subscription has expired you
        may receive a message such as the following:
      </p><pre class="programlisting">Your Subscription Needs to be Updated
* Your Platinum subscription expired 3 days ago on Feb 14, 2008 11:59:59 PM.
If the subscription information on this page is not current, you can
update it by going to the Enterprise Monitor Global Settings page and
providing MySQL Enterprise credentials or by importing a new product
key that you downloaded from http://www.mysql.com/enterprise/download.php.
To update or renew your subscription, please contact your MySQL
Account Representative at sales@mysql.com or visit
http://www.mysql.com/about/contact/renew.html.  After the update or
renewal is complete you can then follow the above instructions for
updating your subscription.
</pre><p>
        Follow these instructions to update your subscription. If you
        see this message and your subscription has already been updated,
        simply click the <span class="guibutton">update</span> button in the
        <span class="guilabel">Contract Status</span> section of this page. This
        should update your subscription and remove the warning.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          After updating your subscription remember to also update your
          advisors. For instructions on doing this see
          <a href="mem-introduction.html#mem-update-advisors" title="15.7.1. Installing and Updating Advisors">Section 15.7.1, “Installing and Updating Advisors”</a>.
        </p></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mem-advisors"></a>15.7. The Advisors Page</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-update-advisors">15.7.1. Installing and Updating Advisors</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-scheduling-rules">15.7.2. Scheduling Rules</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-editing-built-in-rules">15.7.3. Editing Built-in Rules</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-creating-advisors-and-rules">15.7.4. Creating Advisors and Rules</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-unscheduling-advisors">15.7.5. Disabling and Unscheduling Rules</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-advisor-blackouts">15.7.6. Advisor Blackout Periods</a></span></dt></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      MySQL Enterprise subscription, MySQL Enterprise Monitor, MySQL
      Replication Monitor, and MySQL Query Analyzer are only available
      to commercial customers. To learn more, see:
      <a href="http://www.mysql.com/products/enterprise/features.html" target="_top">http://www.mysql.com/products/enterprise/features.html</a>.
    </p></div><p>
    MySQL Enterprise Advisors are a series of scripts that gather information
    from your MySQL servers via the Service Manager and the Service
    Agents, analyze that information based on custom rules developed by
    MySQL AB, and then offer alerts and advice when necessary. As new
    rules are introduced, the MySQL Enterprise Advisors can be updated through
    the MySQL Enterprise website.
  </p><p>
    The MySQL Enterprise Advisors fall into the following categories:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        Administration
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Better manage databases
          </p></li></ul></div><div class="itemizedlist"><ul type="circle"><li><p>
            Suggest improvements for smoother operation
          </p></li></ul></div></li><li><p>
        Heat Chart
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Drive the status indicators in the Heat Chart
          </p></li></ul></div><div class="itemizedlist"><ul type="circle"><li><p>
            Identify up/down status and performance issues
          </p></li></ul></div></li><li><p>
        Performance
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Identify potential performance bottlenecks
          </p></li></ul></div><div class="itemizedlist"><ul type="circle"><li><p>
            Make suggestions for improved database speed
          </p></li></ul></div></li><li><p>
        Replication
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Identify replication bottlenecks
          </p></li></ul></div><div class="itemizedlist"><ul type="circle"><li><p>
            Improve replication design
          </p></li></ul></div></li><li><p>
        Schema
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Identify schema changes
          </p></li></ul></div><div class="itemizedlist"><ul type="circle"><li><p>
            Find security loopholes
          </p></li></ul></div></li><li><p>
        Security
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Protect MySQL servers
          </p></li></ul></div><div class="itemizedlist"><ul type="circle"><li><p>
            Find security loopholes
          </p></li></ul></div></li></ul></div><p>
    An advisor category provides a set of rules designed to enforce
    MySQL best practices for that specific category. Rules can be
    targeted to run at the individual server or group level and, upon
    rule violation, provide alerts and expert advice on how to address
    and correct a problem before it becomes a costly outage.
  </p><p>
    Individual rules are defined in the
    <code class="filename">items-mysql-monitor.xml</code> file. On Windows this
    file is found in the <code class="filename">C:\Program
    Files\mySQL\Enterprise\Agent\share\mysql-monitor-agent</code>
    directory and on Unix in the
    <code class="filename">/opt/mysql/enterprise/agent/share/mysql-monitor-agent</code>
    directory. Find below the rule for discovering a
    <code class="literal">root</code> account with no password.
  </p><pre class="programlisting">&lt;ITEM&gt;
  &lt;NAME&gt;no_root_password&lt;/NAME&gt;
  &lt;FIELD&gt;no_password&lt;/FIELD&gt;
  &lt;SCOPE&gt;table&lt;/SCOPE&gt;
  &lt;CODE&gt;
    &lt;![CDATA[SELECT COUNT(*) AS no_password FROM mysql.user WHERE user='root' AND password='']]&gt;
  &lt;/CODE&gt;  
  &lt;NAMESPACE&gt;mysql&lt;/NAMESPACE&gt;
  &lt;RETURNS&gt;INTEGER&lt;/RETURNS&gt;  
  &lt;SOURCE&gt;table&lt;/SOURCE&gt;
  &lt;INSTANCE&gt;mysql.user&lt;/INSTANCE&gt;  
&lt;/ITEM&gt;
</pre><p>
    Your MySQL Enterprise subscription level determines which rules
    are available to you. Subscription levels are cumulative, meaning
    that higher MySQL Enterprise levels have access to all the rules
    of the lower levels.
  </p><p>
    When the Dashboard is first installed, the only rules that are
    scheduled are those that belong to the <code class="literal">Heat Chart</code>
    group.
  </p><p>
    Go to the Advisors screen by logging in to the Dashboard and
    choosing the <code class="literal">Advisors</code> tab.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-update-advisors"></a>15.7.1. Installing and Updating Advisors</h3></div></div></div><p>
      Instructions for installing Advisors are given in
      <a href="mem-introduction.html#mem-advisor-installation-after-login" title="15.3.2.7.3. Installing Advisors After Initial Log-in">Section 15.3.2.7.3, “Installing Advisors After Initial Log-in”</a>, and
      following. Principally, you need to configure your
      MySQL Enterprise login or enter your product key before you can
      update your Advisors.
    </p><p>
      If your MySQL Enterprise login is configured, you can download
      the latest Advisors by navigating to the
      <code class="literal">Advisors</code> page and finding the <code class="literal">Check
      for Updates</code> link. You can periodically update advisors
      in this way.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        If you do not have Internet access and cannot use the online
        update option you can manually import advisors. This process is
        described in
        <a href="mem-introduction.html#mem-advisor-installation-after-login" title="15.3.2.7.3. Installing Advisors After Initial Log-in">Section 15.3.2.7.3, “Installing Advisors After Initial Log-in”</a>.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-scheduling-rules"></a>15.7.2. Scheduling Rules</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-heat-chart-notifications">15.7.2.1. Heat Chart Notifications</a></span></dt></dl></div><p>
      Once the MySQL Enterprise Advisors have been installed, you can configure
      which advisors you would like to run on a scheduled basis.
    </p><p>
      You can schedule rules by individual server or by group. This is
      done by first selecting the desired server or server group from
      the <code class="literal">Server</code> tree found on the left side of the
      screen. Next select the <code class="literal">Advisors</code> tab.
    </p><p>
      Opening the <code class="literal">Advisors</code> tab takes you to the
      <code class="literal">Current Schedule</code> page. If you have only just
      installed the MySQL Enterprise Monitor then you will only see the <code class="literal">Heat
      Chart</code> group of advisors. Clicking the
      <span class="guibutton">+</span> button will show all the rules in the
      Heat Chart group.
    </p><p>
      Clicking the <span class="guibutton">+</span> button beside any specific
      rule will show the servers that this rule is running on, its
      frequency, and its status. Initially, all the <code class="literal">Heat
      Chart</code> rules are enabled.
    </p><p>
      For a more complete description of a rule, click the rule's name.
      This opens a dialog box that gives detailed information about the
      rule.
    </p><p>
      To view the advisors other than the Heat Chart group, select the
      <code class="literal">Add to Schedule</code> link. This will show all the
      advisors available for your subscription level.
    </p><p>
      Rules are grouped by functionality and displayed in alphabetic
      order. To expand a group click the <span class="guibutton">+</span> button
      to the left of the advisor name.
    </p><p>
      You may activate all the rules in a group by selecting the
      checkbox beside the group name. Once selected you may apply rules
      against a specific server or a group of servers. A message showing
      the group of servers or the specific server you have selected will
      display immediately below the <span class="guibutton">schedule</span>
      button. For example, if the <code class="literal">All Servers</code> group
      is selected in the server tree, then the message will read,
      “<span class="quote">Schedule Advisors Against <span class="bold"><strong>All
      Servers</strong></span></span>”.
    </p><p>
      To select a specific rule, expand the group tree by clicking the
      <span class="guibutton">+</span> button. Select the checkbox to the left
      of the rule you wish to schedule. Click
      <span class="guibutton">schedule</span> to display the following dialog
      box:
    </p><div class="figure"><a name="fig-mem-usage-advisor-configuration"></a><p class="title"><b>Figure 15.42. MySQL Enterprise Dashboard: Scheduling Dialog</b></p><div class="mediaobject"><img src="images/usage-advisor-configuration.png" width="404" height="238" alt="MySQL Enterprise Dashboard: Scheduling Dialog"></div></div><p>
      The Schedule dialog box allows you to configure the following
      fields:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">Frequency</code> – Dictates how often the
          rule will run. The default value for different rules varies
          but a rule can be set to run at any interval desired.
        </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
            Setting the frequency of a rule involves tradeoffs. Rule
            evaluation consumes system resources — CPU, memory,
            and disk space. While the amount consumed is small, if you
            run all the rules against dozens of servers on a very
            frequent basis, you may put a significant load on the
            Service Manager. So select an appropriate frequency. For
            example, unless you are stopping and restarting your servers
            frequently, rules that check server configuration variables
            probably don't need to run very often.
          </p><p>
            Another consideration is that certain status variables
            increase monotonically until a server is restarted. Examples
            of these are <code class="literal">Key_reads</code>,
            <code class="literal">Qcache_hits</code>,
            <code class="literal">Questions</code>,
            <code class="literal">Table_locks_waited</code>, and similar
            variables. The value returned by <code class="literal">SHOW
            STATUS</code> for these variables is the value since the
            server was started (or since the last <code class="literal">FLUSH
            STATUS</code> command), which is not very useful for
            performance tuning, especially if the server has been
            running for an extended period of time. For performance
            tuning it is much better to know the change in state (i.e.
            delta) of these values over the last 10 minutes, 1 hour, or
            whatever time frame is appropriate for your application. The
            frequency at which you schedule a rule is the time frame
            used to calculate the delta values of these variables, and
            it is the delta that is used in expression evaluation, not
            the absolute value. Consequently, select a frequency that is
            appropriate for the metrics being used in the expression.
          </p></div></li><li><p>
          <code class="literal">Notifications</code> – A listbox of users
          and/or notification groups who will be emailed when an advisor
          reaches an alert level. Single or multiple selections are
          allowed. For instructions on setting up notification groups
          see, <a href="mem-introduction.html#mem-notification-groups" title="15.6.5. Manage Notification Groups">Section 15.6.5, “Manage Notification Groups”</a>.
        </p></li></ul></div><p>
      Set the frequency, identify whomever you wish to notify, and click
      <span class="guibutton">schedule</span> to schedule the advisor. Upon
      completion, you should see the message, <code class="literal">Successfully
      scheduled</code>.
    </p><p>
      If you haven't set up global SNMP traps and would like your
      Network Management System (NMS) to handle events related to a
      specific rule then check the <code class="literal">Use SNMP Traps</code>
      checkbox. For more information about Simple Network Management
      Protocol (SNMP) see <a href="mem-introduction.html#mem-snmp-traps">Simple Network
      Management Protocol (SNMP) Traps</a>.
    </p><p>
      Scheduling rules using the checkbox and the
      <span class="guibutton">schedule</span> button is an effective way to
      schedule multiple rules. To schedule a single rule you may also
      use the <code class="literal">schedule</code> link.
    </p><p>
      When scheduling more than one rule, you have the option of
      selecting a checkbox to use the default frequency of each rule or
      you may choose a frequency that will apply to all selected rules.
      When customizing the frequency, take care that you choose a value
      that is appropriate to all the rules selected.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        If the agent does not have the <code class="literal">SUPER</code>
        privilege and InnoDB-related rules are scheduled, a warning will
        appear in the <code class="literal">DataCollection</code> log. This also
        occurs if <code class="literal">mysqld</code> is started with the
        <code class="option">skip-innodb</code> option. For more information about
        agent rights see <a href="mem-introduction.html#mem-agent-rights" title="15.3.3.1. Creating a MySQL User Account for the Monitor Agent">Section 15.3.3.1, “Creating a MySQL User Account for the Monitor Agent”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-heat-chart-notifications"></a>15.7.2.1. Heat Chart Notifications</h4></div></div></div><p>
        It is particularly important that
        <code class="literal">Notifications</code> be set for the <code class="literal">Heat
        Chart</code> group of rules. This is easily done from the
        <code class="literal">Current Schedule</code> page by clicking the
        <span class="guibutton">+</span> button beside a rule and then clicking
        a server.
      </p><p>
        Doing this opens a window with three
        tabs—<code class="literal">Overview</code>,
        <code class="literal">Settings</code>, and <code class="literal">Advanced</code>.
      </p><p>
        The <code class="literal">Overview</code> tab shows which advisor group a
        rule belongs to, a description of its purpose, and a link to the
        history of this alert.
      </p><p>
        In the <code class="literal">Settings</code> tab you can adjust the
        frequency of this rule and also specify a notification group. To
        select more than one contiguous group press the
        <code class="literal">Shift</code> key and click the desired groups. (Some
        web browsers may require that you drag your selection.)
        Non-contiguous selections are made by holding down the
        <code class="literal">Control</code> key and clicking the desired groups.
      </p><p>
        If you haven't set up global SNMP traps and would like your
        Network Management System (NMS) to handle events related to a
        specific rule then check the <code class="literal">Use SNMP Traps</code>
        checkbox. For more information about Simple Network Management
        Protocol (SNMP) see <a href="mem-introduction.html#mem-snmp-traps">???</a>.
      </p><p>
        The <code class="literal">Advanced</code> tab gives detailed information
        about how this rule is implemented.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-editing-built-in-rules"></a>15.7.3. Editing Built-in Rules</h3></div></div></div><p>
      The frequency and thresholds defined for a rule are default
      recommendations. To edit these properties choose the
      <code class="literal">Create/Edit Rule</code> link.
    </p><p>
      The following image shows the screen used to edit rules:
    </p><div class="figure"><a name="fig-mem-edit-advisor"></a><p class="title"><b>Figure 15.43. MySQL Enterprise Dashboard: Editing Rules</b></p><div class="mediaobject"><img src="images/advisors-edit.png" width="661" height="552" alt="MySQL Enterprise Dashboard: Edit Rules"></div></div><p>
      Beside the rule name is the <code class="literal">Advisor</code> drop-down
      list box, used for setting the advisor group. This list box shows
      existing groupings and any you may have added. The
      <code class="literal">Expression</code> textarea shows the advisor rule,
      <code class="literal">Variable Assignment</code> the data item associated
      with variable(s) used in the rule and
      <code class="literal">Thresholds</code> determines when to trigger each
      alert type.
    </p><p>
      The three levels of <code class="literal">Thresholds</code> are
      <code class="literal">Info Alert</code>, <code class="literal">Warning Alert</code>,
      and <code class="literal">Critical Alert</code> indicating increasing levels
      of severity. Levels can be triggered by the expression result
      being equal to a certain value, greater than a certain value, or
      less than a certain value.
    </p><p>
      The data items that variables are associated with are operating
      system (OS) properties such as available RAM or MySQL
      characteristics such as the InnoDB buffer pool. To see all
      available data items drop down the <code class="literal">Data Item</code>
      list box. For a listing of these data items see
      <a href="http://dev.mysql.com/doc/monitor/2.0/en/mem-data-items.html" target="_top">The Data Collection Items Used to Create Rules</a>.
    </p><p>
      In <a href="mem-introduction.html#fig-mem-edit-advisor" title="Figure 15.43. MySQL Enterprise Dashboard: Editing Rules">Figure 15.43, “MySQL Enterprise Dashboard: Editing Rules”</a> the drop-down
      <code class="literal">Data Item</code> list box within the <code class="literal">Variable
      Assignment</code> frame shows the various MySQL server status
      or operating system specific variables that may be used in
      expressions. The text boxes below <code class="literal">Thresholds</code>
      define the levels at which informational, warning, or critical
      alerts are issued.
    </p><p>
      To lower the threshold for an informational alert, simply increase
      the number given in the <code class="literal">Info Alert</code> text box.
    </p><p>
      When a data item can apply to multiple objects, you need to
      specify which instance to use for that item, hence the
      <code class="literal">Instance</code> text box. In almost all cases this
      should be set to <code class="literal">local</code>. The exceptions are as
      follows:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            For CPU-related items set <span class="guilabel">Instance</span> to
            <code class="literal">cpu0</code>. Additional CPUs on a system are
            referred to as <code class="literal">cpu1, cpu2</code> and so on.
          </p></li><li><p>
            There can be multiple disks mounted on a system. To refer to
            a specific drive set <span class="guilabel">Instance</span> to the
            name of of the mounted drive. On Windows this would be
            <code class="literal">C:, D:</code>, and so on. On Unix systems, use
            whatever is valid for the <span><strong class="command">df</strong></span> command.
          </p></li><li><p>
            For RAM-related items set <span class="guilabel">Instance</span> to
            <code class="literal">mem</code>.
          </p></li><li><p>
            Where there are table-specific variables, the database name
            and table name must be specified in the
            <span class="guilabel">Instance</span> text box. This topic is
            discussed in detail in what follows.
          </p></li></ul></div><p>
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        It is not possible to have a data item that is unrelated to an
        instance. This raises the error, <code class="literal">You must map
        "&lt;variable&gt;" to an instance</code>, and you will be
        unable to save the rule.
      </p></div><p>
      An agent can only collect data from one MySQL server, so the
      <code class="literal">instance</code> entry for a variable in a rule does
      not need to specify which MySQL server to use; no matter how many
      servers are being monitored there is always a one-to-one
      relationship between an agent and its monitored server.
    </p><p>
      However, on one server there may be multiple occurrences of a
      variable. For example, there are multiple possible occurrences of
      table-specific variables such as <code class="literal">Avg_row_length</code>
      because there can be multiple databases and tables defined in a
      MySQL server. In this case, the “<span class="quote">instance</span>” refers to
      the database and table that a data item should be associated with,
      specified in the form
      <em class="replaceable"><code>databasename</code></em>.<em class="replaceable"><code>tablename</code></em>.
      So, for example, if you want to reference the
      <code class="literal">Avg_row_length</code> of the <code class="literal">mysql</code>
      database <code class="literal">user</code> table in an expression, select
      the <code class="literal">mysql:tablestatus:Avg_row_length</code> from the
      <span class="guilabel">Data Item</span> list box and specify
      <code class="literal">mysql.user</code> in the <span class="guilabel">Instance</span>
      text box.
    </p><p>
      On the other hand, in the case of a global server variable, there
      is only one possible target. For example, there can only be one
      instance of <code class="literal">delay_key_write</code> because this
      variable is global and applies to the server as a whole. In this
      case specify <code class="literal">local</code> in the
      <span class="guilabel">Instance</span> text box.
    </p><p>
      To save your changes click the <span class="guibutton">save</span> button
      at the bottom of the page.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        You can change only the thresholds and the frequency of built-in
        rules. So that rules function properly when updated, other
        changes are prohibited.
      </p><p>
        Should you wish to make other changes to a built-in rule, copy
        it and modify it as desired.
      </p></div><p>
      You can edit a rule even if it is currently scheduled. Your
      changes will not be overwritten when new rules are imported using
      the <code class="literal">Check for Updates</code> link.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-creating-advisors-and-rules"></a>15.7.4. Creating Advisors and Rules</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-creating-advisors">15.7.4.1. Creating Advisors</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-creating-rules-overview">15.7.4.2. Overview of Rule Creation</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-advisors-variables">15.7.4.3. Variables</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-advisors-thresholds">15.7.4.4. Thresholds</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-advisors-using-strings">15.7.4.5. Using Strings</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-advisors-wiki-format">15.7.4.6. Wiki Format</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-example-creating-rule">15.7.4.7. Creating a New Rule: An Example</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-custom-data-collection-item">15.7.4.8. Creating a Custom Data Collection Item</a></span></dt></dl></div><p>
      In addition to using and editing the advisors and rules provided
      by MySQL Enterprise, users can create their own advisors and
      rules to meet their own unique needs. To do this go to the
      <code class="literal">Advisors</code> page and choose the
      <code class="literal">Create/Edit Rule</code> link.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-creating-advisors"></a>15.7.4.1. Creating Advisors</h4></div></div></div><p>
        Similar existing rules are grouped together in advisor groups.
      </p><p>
        The built-in advisors are:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Administration
            </p></li><li><p>
              Heat Chart
            </p></li><li><p>
              Performance
            </p></li><li><p>
              Replication
            </p></li><li><p>
              Schema
            </p></li><li><p>
              Security
            </p></li></ul></div><p>
        The ability to create your own advisor group allows you to
        create groupings suitable to your circumstances.
      </p><p>
        You can create your own grouping by simply clicking the
        <span class="guibutton">create advisor</span> button. Enter an
        appropriate name and click the <span class="guibutton">add</span>
        button. The newly created group will appear in the
        <code class="literal">Advisor</code> column.
      </p><p>
        The newly created advisor is added to the list box of advisors
        shown in <a href="mem-introduction.html#fig-mem-edit-advisor" title="Figure 15.43. MySQL Enterprise Dashboard: Editing Rules">Figure 15.43, “MySQL Enterprise Dashboard: Editing Rules”</a>. You can now use
        this category of advisors when you create a new rule.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-creating-rules-overview"></a>15.7.4.2. Overview of Rule Creation</h4></div></div></div><p>
        Rules are created using the same screen seen in
        <a href="mem-introduction.html#fig-mem-edit-advisor" title="Figure 15.43. MySQL Enterprise Dashboard: Editing Rules">Figure 15.43, “MySQL Enterprise Dashboard: Editing Rules”</a>. To begin creating a rule
        from scratch, click the <span class="guibutton">create rule</span>
        button. However, the simplest way to create a new rule is to
        copy an existing one. Unlike editing an existing rule, when you
        copy a rule, every element of that rule is editable.
      </p><p>
        You can change the rule name, the advisor group that a rule
        belongs to and you can set your own version number. In
        <a href="mem-introduction.html#fig-mem-edit-advisor" title="Figure 15.43. MySQL Enterprise Dashboard: Editing Rules">Figure 15.43, “MySQL Enterprise Dashboard: Editing Rules”</a>, you have already seen
        how the threshold and frequency of a rule may be altered.
      </p><p>
        Most importantly you can alter a rule's expression. Expressions
        are the core of a MySQL Enterprise Advisor and are used to define the
        scenario being monitored. An expression can be as simple as a
        single server parameter or can be quite complex, combining
        multiple parameters with various mathematical operations.
      </p><p>
        An expression has two main characteristics:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              An expression defines a situation where a best practice is
              not being followed
            </p></li><li><p>
              The result of an expression must always be 1 or 0 (that
              is, true or false)
            </p></li></ul></div><p>
        If an expression evaluates to true for a specific server, an
        alarm is raised, indicating that a best practice is not being
        followed. If an expression evaluates to false no alarm is raised
        because the best practice is indeed being followed.
      </p><p>
        For example, if having binary logging enabled is considered a
        best practice for a production server (which we believe it is),
        then this best practice is being violated if
        <code class="literal">log_bin</code> is <code class="literal">OFF</code>.
        Consequently, the expression for the “<span class="quote">Binary Logging Not
        Enabled</span>” rule is “<span class="quote">%log_bin% == OFF</span>”. If this
        evaluates to 1, an alarm is raised because the best practice is
        not being followed.
      </p><p>
        An expression is made up of one or more variables and zero or
        more mathematical operators. The MySQL Enterprise Monitor uses the MySQL
        database server's expression parser and evaluator For a complete
        list of operators and functions see
        <a href="http://dev.mysql.com/doc/refman/5.0/en/functions.html" target="_top">http://dev.mysql.com/doc/refman/5.0/en/functions.html</a>. For a
        complete list of the built-in variables used when creating rules
        see
        <a href="http://dev.mysql.com/doc/refman/5.0/en/mysqld-option-tables.html" target="_top">http://dev.mysql.com/doc/refman/5.0/en/mysqld-option-tables.html</a>.
      </p><p>
        Creating an expression is dependent on variables defined in the
        <span class="guilabel">Variable Assignment</span> frame. This frame links
        variables used in the expression field with data gathered from
        the target MySQL server instance—server status variables,
        operating system status information, and table information.
        Variable names are associated with elements in the
        <span class="guilabel">Data Item</span> drop-down list. If you need to
        define more than one variable simply click the <span class="guibutton">add
        row</span> button. For a complete listing of the data
        collection items used in creating rules see
        <a href="http://dev.mysql.com/doc/monitor/2.0/en/mem-data-items.html" target="_top">The Data Collection Items Used to Create Rules</a>.
      </p><p>
        The remaining fields determine the information that displays in
        a notification email or the informational pop-up window
        associated with each advisor.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          When saving a new rule ensure that you do not duplicate the
          name of an existing rule.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-advisors-variables"></a>15.7.4.3. Variables</h4></div></div></div><p>
        When an expression is evaluated variables get replaced by
        values. For example, part of the expression for the
        “<span class="quote">MyISAM Key Cache Has Sub-Optimal Hit Rate</span>” rule
        calculates the hit rate as follows:
      </p><pre class="programlisting">100-((%Key_reads% / %Key_read_requests%)*100) 
</pre><p>
        If the current value of <code class="literal">%Key_reads%</code> is 4522
        and the current value of <code class="literal">%Key_read_requests%</code>
        is 125989, the hit ratio assesses to 96.4%:
      </p><pre class="programlisting">100 -((4522 / 125989) * 100)
</pre><p>
        By convention, the Advisors supplied by MySQL use
        ‘<code class="literal">%</code>’ as the delimiter, for
        example, <code class="literal">%Key_reads%</code>. This makes variables
        more readily identifiable.
      </p><p>
        In addition to being used in an expression, variables may also
        be used in the <code class="literal">Description</code>,
        <code class="literal">Advice</code>, <code class="literal">Action</code>, and
        <code class="literal">Links</code> attributes of a rule. This allows you
        to report the current value of an expression.
      </p><p>
        For instance, you can add the message, “<span class="quote">The current value
        of Key_reads is %Key_reads%.</span>” to the
        <code class="literal">Advice</code> text box. When this is displayed on
        the screen, the value of <code class="literal">%Key_reads%</code> is
        substituted into the text. Supposing
        <code class="literal">%Key_reads%</code> has a value of
        <code class="literal">4522</code>, the message becomes “<span class="quote">The current
        value of Key_reads is 4522.</span>”
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-advisors-thresholds"></a>15.7.4.4. Thresholds</h4></div></div></div><p>
        Each expression has a threshold value that triggers an alert.
        The <code class="literal">THRESHOLD</code> keyword is used to associate
        that value with an alert level—either an
        <code class="literal">Info</code>, <code class="literal">Warning</code>, or
        <code class="literal">Critical</code> alert.
      </p><p>
        For example, the expression for the performance advisor,
        “<span class="quote">Thread Cache Size May Not Be Optimal</span>”, is:
      </p><pre class="programlisting">100-((%Threads_created% / %Connections%) * 100) &lt; THRESHOLD 
</pre><p>
        The <code class="literal">THRESHOLD</code> is set at 95% for an Info level
        alert, 85% for a Warning alert, and 75% for a Critical alert;
        producing alerts of three different levels.
      </p><p>
        Expressions can be quite simple. The expression for
        “<span class="quote">Binary Logging Not Enabled</span>” (one of the
        Administration alerts) is:
      </p><pre class="programlisting">%log_bin% == THRESHOLD 
</pre><p>
        When the result is <code class="literal">OFF</code>, only one alert is
        triggered—a Warning level alert. In this situation you
        might think we could just use the expression <code class="literal">%log_bin%
        == "OFF"</code>. However, doing this would not test binary
        logging against a threshold so would not result in an alert.
      </p><p>
        When you create an expression, think carefully about the
        conditions under which it should be evaluated and the conditions
        under which it should not. For example, the expression for the
        “<span class="quote">MyISAM Key Cache Has Sub-Optimal Hit Rate</span>” rule
        is:
      </p><pre class="programlisting">(%Uptime% &gt; 10800) &amp;&amp; (%Key_read_requests% &gt; 10000) »
 &amp;&amp; (100-((%Key_reads% / %Key_read_requests%) * 100) &lt; THRESHOLD)
</pre><p>
        The essence of the rule is really: <code class="literal">(100-((%Key_reads% /
        %Key_read_requests% ) * 100) &lt; THRESHOLD)</code>. However,
        when a server is first starting up, it may take a while to reach
        a state that is representative of normal operations. For
        example, the key cache and the query cache may need some period
        of time before they have cached typical application data as
        opposed to start-up and initialization data. In this case, the
        first part of the expression, <code class="literal">(%Uptime% &gt;
        10800)</code>, holds off evaluating this expression until the
        system has been running for 10800 seconds (3 hours).
      </p><p>
        In addition, if some part of the system is not heavily used an
        alert may be triggered based on limited data. For example, if
        your application does not use the MyISAM storage engine, the
        “<span class="quote">MyISAM Key Cache Has Sub-Optimal Hit Rate</span>” rule
        may be triggered based on very limited use of other MyISAM
        tables such as the <code class="literal">mysql.user</code> table. For this
        reason, this advisor has a second part—
        <code class="literal">(%Key_read_requests% &gt;
        10000)</code>–meaning the rule won't be evaluated
        unless there is plenty of activity associated with the key
        cache.
      </p><p>
        In other circumstances, there may be periods of time during
        which you don't want a rule to be evaluated—a blackout
        period. For example, the expression for the “<span class="quote">Slave Too Far
        Behind Master</span>” rule is: <code class="literal">%Seconds_Behind_Master%
        &gt; THRESHOLD</code>. However, suppose you run a backup
        process between 6 and 7 pm on a replication slave, and it's
        normal for that slave to get behind the master by an amount more
        than the THRESHOLD during that time. In that case you don't want
        to receive an alert because the rule violation is expected. You
        can achieve this by adding the following to the expression:
        &amp;&amp; CURTIME() NOT BETWEEN '18:00:00' AND '19:00:00' In
        essence, this means “<span class="quote">don't trigger an alert between
        18:00:00 and 19:00:00 (6 pm and 7 pm)</span>”.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-advisors-using-strings"></a>15.7.4.5. Using Strings</h4></div></div></div><p>
        String values may appear in the <code class="literal">Expression</code> or
        the <code class="literal">Thresholds</code> text boxes. In both cases,
        they must be enclosed within quotation marks. For example, the
        expression for the “<span class="quote">Slave I/O Thread Not Running</span>”
        rule is:
      </p><pre class="programlisting">(%Slave_running% == "ON") &amp;&amp; (%Slave_IO_Running% != THRESHOLD)
</pre><p>
        In similar fashion the <code class="literal">Critical Alerts</code>
        threshold text box is set to a value of
        <code class="literal">"Yes"</code>.
      </p><p>
        When the expression is evaluated, either
        <code class="literal">"OFF"</code> or <code class="literal">"ON"</code> will be
        substituted for <code class="literal">%Slave_running%</code>, and
        <code class="literal">"Yes"</code> or <code class="literal">"No"</code> for
        <code class="literal">%Slave_IO_Running%</code>, depending on the state of
        your system. If the slave is running but the I/O thread is not,
        the expression then becomes:
      </p><pre class="programlisting">("ON" == "ON") &amp;&amp; ("No" != "Yes")
</pre><p>
        Without quotation marks this expression would not evaluate to
        <code class="literal">TRUE</code> as it should.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          So that it is interpreted properly, the <code class="literal">==</code>
          operator is converted to <code class="literal">=</code> before being
          passed to the MySQL expression parser.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-advisors-wiki-format"></a>15.7.4.6. Wiki Format</h4></div></div></div><p>
        When editing or defining a rule, the text entered in the
        <code class="literal">Problem Description</code>,
        <code class="literal">Advice</code>, <code class="literal">Recommended
        Action</code>, and <code class="literal">Links and Further
        Reading</code> text boxes may be formatted in Wiki format.
        This allows you to format text and add hyperlinks when creating
        or editing your own rules.
      </p><p>
        Find a brief introduction to using Wiki formatting in the
        following table.
      </p><div class="table"><a name="id3526682"></a><p class="title"><b>Table 15.1. MySQL Enterprise Monitor: Wiki formatting</b></p><table summary="MySQL Enterprise Monitor: Wiki formatting" border="1"><colgroup><col><col></colgroup><thead><tr><th><span class="bold"><strong>Example</strong></span></th><th><span class="bold"><strong>Description</strong></span></th></tr></thead><tbody><tr><td>__<em class="replaceable"><code>bold</code></em>__</td><td>boldface text</td></tr><tr><td>~~<em class="replaceable"><code>italic</code></em>~~</td><td>italicize text</td></tr><tr><td>\\</td><td>create a line break</td></tr><tr><td>\\ \\</td><td>create a double line break</td></tr><tr><td>\\\\<em class="replaceable"><code>G</code></em></td><td>create a backslash</td></tr><tr><td>*<em class="replaceable"><code>item 1</code></em></td><td>create a bulleted list item</td></tr><tr><td>#<em class="replaceable"><code>item 1</code></em></td><td>create a numbered list item</td></tr><tr><td>\<em class="replaceable"><code>_</code></em></td><td>use the ‘<code class="literal">\</code>’ to escape special characters</td></tr><tr><td>{moreInfo:name|url}</td><td>create a hyperlink</td></tr></tbody></table></div><p>
        So the following Wiki text:
      </p><pre class="programlisting">Replication is a __very nice feature__ of MySQL.  Replication can be very
useful for solving problems in the following areas:
* Data Distribution
* Load Balancing
* Backup and Recovery
You can check replication status and start a slave using the following
commands: SHOW SLAVE STATUS \\\\G\\START SLAVE;
{moreInfo:MySQL Manual: Replication
      FAQ|http://dev.mysql.com/doc/refman/5.0/en/replication-faq.html}
</pre><p>
        Would be translated into the following HTML markup:
      </p><pre class="programlisting">Replication is a &lt;b&gt;very nice feature&lt;/b&gt; of MySQL.  Replication can be very
useful for solving problems in the following areas:
&lt;ul&gt;
  &lt;li&gt;Data distribution&lt;/li&gt;
  &lt;li&gt;Load Balancing&lt;/li&gt;
  &lt;li&gt;Backup and recovery&lt;/li&gt;
&lt;/ul&gt;You can check replication status and start a slave with the following
commands: SHOW SLAVE STATUS \G;&lt;br/&gt;START SLAVE;
&lt;a href="../mysql-monitor-2.0/http://dev.mysql.com/doc/refman/5.0/en/replication-faq.html"
  target="_blank" &gt;MySQL Manual: Replication FAQ&lt;/a&gt;
</pre><p>
        To find out more about this format go to the
        <a href="http://wikipedia.org" target="_top">wikipedia.org</a> web
        site.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-example-creating-rule"></a>15.7.4.7. Creating a New Rule: An Example</h4></div></div></div><p>
        This section documents the steps required to create a rule.
        Before attempting to create a rule, please review the preceding
        sections of this chapter.
      </p><p>
        This example creates a rule that checks the number of rows in a
        table. Having 50,000 rows in this table is deemed to warrant a
        critical alert. Lesser numbers are assigned to informational and
        warning level alerts.
      </p><p>
        Begin by navigating to the <code class="literal">Advisors</code> tab and
        clicking the <code class="literal">manage rules</code> link. Then choose
        the <span class="guibutton">create rule</span> button.
      </p><p>
        Create your custom rule by following these steps:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Using the <code class="literal">Rule Name </code> text box, give the
              rule an appropriate name. Something such as "Excessive
              number of records in <em class="replaceable"><code>table_name</code></em>
              table", may be appropriate.
            </p></li><li><p>
              From the <code class="literal">Advisor</code> drop down list box
              choose an advisor group for your rule. The
              <code class="literal">Administration</code> group of rules might be
              suitable but if you wish, create your own group of
              advisors. For instructions on doing this see
              <a href="mem-introduction.html#mem-creating-advisors" title="15.7.4.1. Creating Advisors">Section 15.7.4.1, “Creating Advisors”</a>.
            </p></li><li><p>
              Enter the following expression in the
              <span class="guilabel">Expression</span> text area:
              '%<em class="replaceable"><code>table_name</code></em>_num_rows% &gt;
              THRESHOLD'. Replace <em class="replaceable"><code>table_name</code></em>
              with the name of the table you wish to monitor. Note that
              the variable
              <code class="literal">%<em class="replaceable"><code>table_name</code></em>_num_rows%
              </code> has not yet been defined.
            </p></li><li><p>
              Set the Thresholds.
            </p><div class="orderedlist"><ol type="a"><li><p>
                  Set the <code class="literal">Critical Alert</code> level to
                  <code class="literal">50000</code>.
                </p></li><li><p>
                  Set the <code class="literal">Warning Alert</code> level to
                  <code class="literal">10000</code>.
                </p></li><li><p>
                  Set the <code class="literal">Info Alert</code> level to
                  <code class="literal">5000</code>.
                </p></li></ol></div></li><li><p>
              Define your variable in the <code class="literal">Variable
              Assignment</code> frame.
            </p><div class="orderedlist"><ol type="a"><li><p>
                  In the <code class="literal">Variable</code> text box enter
                  <code class="literal">'%<em class="replaceable"><code>table_name</code></em>_num_rows%</code>,
                  the variable used in the <code class="literal">Expression</code>
                  text box
                </p></li><li><p>
                  In the <code class="literal">Data Item</code> drop down list box
                  find and select the
                  <code class="literal">mysql:table:numrows</code> entry. (For a
                  description of all the data items available see
                  <a href="http://dev.mysql.com/doc/monitor/2.0/en/mem-data-items.html" target="_top">The Data Collection Items Used to Create Rules</a>.)
                </p></li><li><p>
                  In the <code class="literal">Instance</code> text box enter
                  <em class="replaceable"><code>database_name.table_name</code></em>.
                </p></li></ol></div></li><li><p>
              Add appropriate entries for the <code class="literal">Problem
              Description</code>, the <code class="literal">Advice</code>, and
              the <code class="literal">Links</code> text areas. If you wish, use
              Wiki markup for these text areas. See
              <a href="mem-introduction.html#mem-advisors-wiki-format" title="15.7.4.6. Wiki Format">Section 15.7.4.6, “Wiki Format”</a> for more
              information. Note that you can also reference the
              <code class="literal">'%<em class="replaceable"><code>table_name</code></em>_num_rows%</code>
              variable in these text areas. For example, you can display
              the current number of rows with a message such as
              '<em class="replaceable"><code>table_name</code></em> currently has
              %<em class="replaceable"><code>table_name</code></em>_num_rows% rows.'
            </p></li><li><p>
              Save the rule.
            </p></li></ol></div><p>
      </p><p>
        Once the rule is created it needs to be scheduled against the
        server that contains the database table you wish to monitor. For
        instructions on scheduling rules see
        <a href="mem-introduction.html#mem-scheduling-rules" title="15.7.2. Scheduling Rules">Section 15.7.2, “Scheduling Rules”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-custom-data-collection-item"></a>15.7.4.8. Creating a Custom Data Collection Item</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-custom-data-item-xml-file">15.7.4.8.1. Creating and Using a Custom Data Item XML File</a></span></dt></dl></div><p>
        <a href="mem-introduction.html#mem-example-creating-rule" title="15.7.4.7. Creating a New Rule: An Example">Section 15.7.4.7, “Creating a New Rule: An Example”</a> shows how to create
        a custom rule and <a href="http://dev.mysql.com/doc/monitor/2.0/en/mem-data-items.html" target="_top">The Data Collection Items Used to Create Rules</a> shows the
        data items that can be used in rule creation. However, in some
        circumstances you may want to create a rule that uses a custom
        data collection item.
      </p><p>
        This section describes how to create a custom data collection
        item. The steps are as follows:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Create an XML file to define how the data is collected.
            </p></li><li><p>
              Point the agent configuration file to this XML file.
            </p></li><li><p>
              Restart the agent.
            </p></li></ol></div><p>
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mem-custom-data-item-xml-file"></a>15.7.4.8.1. Creating and Using a Custom Data Item XML File</h5></div></div></div><p>
          As an example, this section shows how to create a data item
          for monitoring the amount of free InnoDB tablespace. The
          format and content of the XML file that defines the data to be
          collected is as follows:
        </p><pre class="programlisting">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;classes&gt;
  &lt;class&gt;
    &lt;classname&gt;innodb_min_free&lt;/classname&gt;
    &lt;namespace&gt;mysql&lt;/namespace&gt;
    &lt;query&gt;&lt;![CDATA[SELECT MIN(substring_index(substring_index(table_comment," ",3)," ",-1)/1024/1024) 
      as Free FROM INFORMATION_SCHEMA.TABLES WHERE engine = 'InnoDB']]&gt;&lt;/query&gt;
  &lt;/class&gt;
&lt;/classes&gt;
</pre><p>
          Save this file as:
          </p><div class="itemizedlist"><ul type="disc"><li><p>
                Windows – <code class="filename">C:\Program
                Files\MySQL\Enterprise\Agent\share\mysql-proxy\items\innodb_min_free.xml</code>
              </p></li><li><p>
                Unix –
                <code class="filename">/opt/mysql/enterprise/agent/share/mysql-proxy/items/innodb_min_free.xml</code>
              </p></li><li><p>
                Mac OS X –
                <code class="filename">/Applications/mysql/enterprise/agent/share/mysql-proxy/items/innodb_min_free.xml</code>
              </p></li></ul></div><p>
          After saving this file, you must point your
          <code class="filename">mysql-monitor-agent.ini</code> file to it. ( For
          the location of this file on your operating system see
          <a href="mem-introduction.html#mem-cfg-mysql-monitor-agent-ini" title="15.3.3.6.1. MySQL Enterprise Monitor Agent (mysql-monitor-agent.ini)
        Configuration">Section 15.3.3.6.1, “MySQL Enterprise Monitor Agent (<code class="filename">mysql-monitor-agent.ini</code>)
        Configuration”</a>.) Find the
          <code class="literal">[mysql-proxy]</code> section and add the file name
          <code class="filename">innodb_min_free.xml</code> to the
          <code class="literal">item-files</code> parameter using a semi-colon as
          a separator. For example:
        </p><pre class="programlisting">[mysql-proxy]
 ...
item-files = items-mysql-monitor.xml,innodb_min_free.xml
 ...
</pre><p>
          For this change to take effect you must restart the agent. To
          do this see:
          </p><div class="itemizedlist"><ul type="disc"><li><p>
                Windows –
                <a href="mem-introduction.html#mem-starting-agent-windows" title="15.3.3.5.1. Starting/Stopping the Agent on Windows">Section 15.3.3.5.1, “Starting/Stopping the Agent on Windows”</a>
              </p></li><li><p>
                Unix – <a href="mem-introduction.html#mem-starting-agent-unix" title="15.3.3.5.3. Starting/Stopping the Agent on Unix">Section 15.3.3.5.3, “Starting/Stopping the Agent on Unix”</a>
              </p></li><li><p>
                Mac OS X –
                <a href="mem-introduction.html#mem-starting-agent-osx" title="15.3.3.5.2. Starting/Stopping the Agent on Mac OS X">Section 15.3.3.5.2, “Starting/Stopping the Agent on Mac OS X”</a>
              </p></li></ul></div><p>
          Once the agent has restarted, you will find the new data item
          in the <code class="literal">Data Item</code> drop down list box on the
          <code class="literal">Rule Definition</code> page. Its fully qualified
          name is <code class="literal">mysql:table:innodb_min_free</code>.
        </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-unscheduling-advisors"></a>15.7.5. Disabling and Unscheduling Rules</h3></div></div></div><p>
      In some circumstances you may no longer wish to apply a rule
      against a specific server or group of servers and in other
      circumstances you may want to suspend a rule for a short length of
      time. With this in mind, it is possible to disable or unschedule a
      rule.
    </p><p>
      To disable or unschedule an advisor choose the <code class="literal">Current
      Schedule </code> screen of the <code class="literal">Advisors</code> tab.
    </p><p>
      Rules may be disabled or unscheduled using the buttons on the
      upper or lower left of the screen. You may also change a rule by
      clicking the <code class="literal">enabled</code> or
      <code class="literal">unschedule</code> hyperlink to the right of a rule.
      The buttons are particularly useful when you are altering more
      than one rule.
    </p><p>
      To no longer run a rule against a specific server, expand the
      advisor group and the specific rule by clicking the
      <span class="guibutton">+</span> button. You may then click the
      <span class="guibutton">unschedule</span> button. When the dialog window
      opens, choose the <span class="guibutton">unschedule</span> button and
      that rule will no longer be applied. If you wish to back out of
      the operation choose <span class="guibutton">cancel</span>. If, at a later
      date, you wish to institute this rule again, you may do so from
      the <code class="literal">Add to Schedule</code> page.
    </p><p>
      If you want to suspend a rule temporarily, use the
      <span class="guibutton">disable</span> button and follow the same process
      you would for unscheduling. Once a rule is disabled the link under
      the status column changes to red and reads
      <code class="literal">disabled</code>. When a rule is disabled, data is no
      longer collected for that rule. A disabled rule is easily
      re-enabled by clicking the <code class="literal">disabled</code> link or by
      using the <span class="guibutton">enable</span> button.
    </p><p>
      Multiple rules may be altered for one or more servers by selecting
      the appropriate checkbox and then clicking the
      <span class="guibutton">unschedule</span>, <span class="guibutton">enable</span>,
      or <span class="guibutton">disable</span> button.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Rules associated with the heat chart cannot be disabled or
        unscheduled as they are required by MySQL Enterprise Monitor.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-advisor-blackouts"></a>15.7.6. Advisor Blackout Periods</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-advisor-scripting-blackouts">15.7.6.1. Scripting Blackouts</a></span></dt></dl></div><p>
      Database servers require regular maintenance and during these
      periods you may wish to stop Monitor Agents from reporting their
      findings. During a blackout period rules are not evaluated and
      notifications are put on hold but Monitor Agents continue to
      collect data . In this respect blacked-out rules differ from
      disabled rules; data continues to be collected and stored in the
      repository.
    </p><p>
      Blackout periods are enabled by entering the following URL into
      the address bar of your browser, substituting the appropriate host
      name, port and server name:
    </p><pre class="programlisting">http://<em class="replaceable"><code>localhost:18080</code></em>/rest?command=blackout »
 &amp;server_name=<em class="replaceable"><code>SuSE:3306</code></em>&amp;blackout_state=true
</pre><p>
      If you are unsure of the host name and port to use, check the
      <code class="filename">configuration_report.txt</code> file. Be sure to
      specify the correct port for the Tomcat server. Specify the server
      you wish to blackout using the name that appears in the Server
      Tree, being sure to include a colon and port number as shown in
      the preceding example.
    </p><p>
      An HTTP authentication dialog box requesting your Dashboard user
      name and password will open. Specify the administrator's
      credentials. The default user name is <code class="literal">admin</code>;
      use the password you specified when you initially logged in to the
      Dashboard.
    </p><p>
      You can also blackout a server group by entering the following URL
      into the address bar of your browser, substituting the appropriate
      host name, and server group name:
    </p><pre class="programlisting">http://<em class="replaceable"><code>localhost:18080</code></em>/rest?command=blackout »
 &amp;group_name=<em class="replaceable"><code>Finance</code></em>&amp;blackout_state=true
    </pre><p>
      When the HTTP authentication dialog box opens, enter the
      administrator's credentials.
    </p><p>
      You can confirm that a server is blacked out by looking at the
      server name in the Dashboard; the name of a blacked out server is
      greyed.
    </p><p>
      To reactivate the blacked-out server or server group, use the
      appropriate URL and query string, changing the
      <code class="literal">blackout_state=true</code> name/value pair to
      <code class="literal">blackout_state=false</code>. Again, this must be done
      by a user with administrative privileges.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Restarting MySQL Enterprise Monitor will <span class="bold"><strong>not</strong></span>
        reactivate a blacked out server.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-advisor-scripting-blackouts"></a>15.7.6.1. Scripting Blackouts</h4></div></div></div><p>
        Rather than opening your web browser and blacking out a server
        by typing entries into the address bar, you can write a script
        to achieve the same effect. This section documents a sample
        blackout script that can be run from the command line.
      </p><p>
        Create the following file and save it as
        <code class="filename">blackout.pl</code>.
      </p><pre class="programlisting">  #!/usr/bin/perl
  
  use LWP 5.64;
  
  # USAGE: blackout.pl servicemanager:18080 admin password servername:3306 true
  
  # $ARGV[0] = management server hostname:port
  # $ARGV[1] = management server username 
  # $ARGV[2] = management server password
  # $ARGV[3] = mysqld managed instance server name and port
  # $ARGV[4] = blackout state (true/false)
  
  
  my $browser = LWP::UserAgent-&gt;new;
  $browser-&gt;credentials(
    $ARGV[0],
    '',
    $ARGV[1],
    $ARGV[2]
  );
  
  my $url = URI-&gt;new('http://'.$ARGV[0].'/rest');
  
  $url-&gt;query_form( # And here the form data pairs:
    'command' =&gt; 'blackout',
    'server_name' =&gt; $ARGV[3],
    'blackout_state' =&gt; $ARGV[4]
  );
  
  my $response = $browser-&gt;post( $url );  
  
  if (!$response-&gt;is_success) {
    die $response-&gt;status_line . "\n";
  }
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Windows users can omit the shebang line.
        </p></div><p>
        On Unix systems use the <span><strong class="command">chmod +x blackout.pl</strong></span>
        command to make the file executable.
      </p><p>
        At the command line enter <strong class="userinput"><code>blackout.pl
        <em class="replaceable"><code>servicemanager:18080</code></em> admin
        <em class="replaceable"><code>password servername:3306</code></em>
        true</code></strong>.
      </p><p>
        If you are unsure of the host name and port to use, check the
        <code class="filename">configuration_report.txt</code> file. Be sure to
        specify the correct port for the Tomcat server. Specify the
        server you wish to blackout using the name that appears in the
        Server Tree, being sure to include a colon and port number as
        shown in the preceding example. Make sure that the user you
        specify is a "manager". Specifying a user with "dba" rights only
        will not black out a server and no error will be displayed.
      </p><p>
        You can confirm that a server is blacked out by looking at the
        server name in the Dashboard; the name of a blacked out server
        is greyed. To end the blackout, run the same script, changing
        the final argument to <code class="literal">false</code>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Restarting MySQL Enterprise Monitor will <span class="bold"><strong>not</strong></span>
          reactivate a blacked out server.
        </p></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mem-events"></a>15.8. The Events Page</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-closing-events">15.8.1. Closing an Event</a></span></dt></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      MySQL Enterprise subscription, MySQL Enterprise Monitor, MySQL
      Replication Monitor, and MySQL Query Analyzer are only available
      to commercial customers. To learn more, see:
      <a href="http://www.mysql.com/products/enterprise/features.html" target="_top">http://www.mysql.com/products/enterprise/features.html</a>.
    </p></div><p>
    Once an advisor has been scheduled, it will run at set intervals. If
    it finds nothing of interest no alerts or emails will be created.
  </p><p>
    When alerts are triggered, they appear on the
    <code class="literal">Events</code> screen. Alerts also appear on the
    <code class="literal">Monitor</code> screen in order of severity. The
    notification group or groups associated with a specific rule receive
    email notification when an alert is triggered. For more information
    about creating notification groups see
    <a href="mem-introduction.html#mem-notification-groups" title="15.6.5. Manage Notification Groups">Section 15.6.5, “Manage Notification Groups”</a>.
  </p><p>
    To view open events, click on the <code class="literal">Events</code> tab. The
    tree-view on the left determines which server or server group these
    events belong to. Open events are shown in tabular format.
  </p><div class="figure"><a name="mem-events-screen"></a><p class="title"><b>Figure 15.44. MySQL Enterprise Dashboard: Events screen</b></p><div class="mediaobject"><img src="images/events-screen.png" width="700" height="259" alt="MySQL Enterprise Dashboard: Events screen"></div></div><p>
    The event table has the following columns:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        <span class="guilabel">Severity</span> – An icon indicating the
        severity of the alert
      </p></li><li><p>
        <span class="guilabel">Server</span> – The name of the server the
        alert applies to
      </p></li><li><p>
        <span class="guilabel">Advisor</span> – The category of the advisor
      </p></li><li><p>
        <span class="guilabel">Rule</span> – A short description of the
        rule that has been violated
      </p></li><li><p>
        <span class="guilabel">Time</span> – The approximate time the event
        occurred
      </p></li><li><p>
        <span class="guilabel">Status</span> – The status of the event
      </p></li><li><p>
        <span class="guilabel">Unnamed Column</span> – Provides a link to
        the <code class="literal">Close</code> dialog box
      </p></li></ul></div><p>
    By default, all events are shown but the list of events can be
    filtered using the form displayed above the event list. The options
    include filtering by:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        Severity
      </p></li><li><p>
        Date
      </p></li><li><p>
        Advisor group
      </p></li><li><p>
        Specific rule
      </p></li><li><p>
        Status
      </p></li></ul></div><p>
    Choose the options you are interested in and click the
    <span class="guibutton">filter</span> button to refresh the display. You may
    limit the number of items that appear on a page by choosing a
    different value from the <span class="guilabel">Limit</span> drop down
    listbox.
  </p><p>
    The drop down list box showing severity has the options:
    <code class="literal">All</code>, <code class="literal">Alerts</code>,
    <code class="literal">Critical</code>, <code class="literal">Warning</code>,
    <code class="literal">Info</code>, <code class="literal">Success</code>, and
    <code class="literal">Unknown</code>. Selecting the option
    <code class="literal">All</code> shows all alerts and also those rules that
    have run successfully. A successful rule is one that has not been
    violated and is indicated by a star icon. <code class="literal">Alerts</code>
    shows only those rules that have been violated.
  </p><p>
    Columns are sorted by clicking on the individual column headings.
    The alerts shown in <a href="mem-introduction.html#mem-events-screen" title="Figure 15.44. MySQL Enterprise Dashboard: Events screen">Figure 15.44, “MySQL Enterprise Dashboard: Events screen”</a>, are sorted
    by decreasing severity. An octagonal red icon indicates a critical
    alert, a triangular yellow icon a warning, and a conversation bubble
    an informational alert. A star beside an event indicates that the
    rule has run successfully and no alert created. A question mark icon
    indicates that the status of the rule is unknown.
  </p><p>
    The server shown in <a href="mem-introduction.html#mem-events-screen" title="Figure 15.44. MySQL Enterprise Dashboard: Events screen">Figure 15.44, “MySQL Enterprise Dashboard: Events screen”</a>, is filtered
    for <code class="literal">All</code>. Typically, when filtering by severity
    you would choose <code class="literal">Alerts</code> and, if you see a
    <code class="literal">Critical</code>, <code class="literal">Warning</code>, or
    <code class="literal">Info</code> alert, use the <code class="literal">All</code> filter
    to see when the rule last ran successfully. This may assist in
    determining the cause of the alert.
  </p><p>
    Besides filtering for severity, you can also choose to filter for a
    specific time period using the <code class="literal">From</code> and
    <code class="literal">To</code> text boxes. You also have the choice of
    filtering by specific rules or categories of rules. The
    <code class="literal">Status</code> drop-down list box let's you choose
    <code class="literal">All</code>, <code class="literal">Open</code>, or
    <code class="literal">Closed</code> events. To avoid excessive scrolling, you
    can also limit the number of events that show on a specific page.
  </p><p>
    For more information about an alert, click on the rule name. A
    pop-up window will appear showing a description of the alert and the
    exact time of occurrence. This pop-up windows provides links to
    useful resources and advice for resolution. You can also view the
    exact expression that generated the event.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-closing-events"></a>15.8.1. Closing an Event</h3></div></div></div><p>
      After determining what action to take, events should be closed.
    </p><p>
      To resolve an individual alert click the <code class="literal">close</code>
      link in the <span class="guilabel">Operations/Notes</span> column. Document
      the resolution using the <code class="literal">Notes</code> text area and
      choose the <span class="guibutton">close event(s)</span> button.
    </p><p>
      To close a number of alerts simultaneously, select the checkbox
      beside the alerts you wish to close and then click the
      <span class="guibutton">close</span> button to the lower or upper left
      side of the screen.
    </p><p>
      Once an event has been closed it appears on the
      <code class="literal">Events</code> screen showing a <code class="literal">resolution
      notes</code> link. Click this link to review the notes. Events
      that have been closed are saved in the Repository. If you wish to
      view closed events filter the display by choosing
      <code class="literal">Closed</code> from the <span class="guilabel">Status</span>
      drop-down box.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mem-graphs"></a>15.9. The Graphs Page</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-available-graphs">15.9.1. Displaying Graphs</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-setting-graph-interval">15.9.2. Setting an Interval</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-setting-graph-time-span">15.9.3. Setting a Time Span</a></span></dt></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      MySQL Enterprise subscription, MySQL Enterprise Monitor, MySQL
      Replication Monitor, and MySQL Query Analyzer are only available
      to commercial customers. To learn more, see:
      <a href="http://www.mysql.com/products/enterprise/features.html" target="_top">http://www.mysql.com/products/enterprise/features.html</a>.
    </p></div><p>
    Navigate to the <code class="literal">Graphs</code> page by choosing the
    <span class="guilabel">Graphs</span> tab.
  </p><p>
    By default four graphs are displayed on the <code class="literal">Monitor
    page</code>. These graphs present information about the currently
    selected server or server group, showing the hit ratios, CPU
    utilization, connections, and database activity. Color coding helps
    distinguish different aspects of each graph.
  </p><p>
    From the <code class="literal">Monitor</code> page you can make permanent or
    temporary changes to the way a graph is displayed. For example, you
    can choose to display the last hour's activity or you can choose to
    view a specific period of time.
  </p><p>
    Persistent changes to the way the graphs display are only made from
    the <code class="literal">Monitor</code> page. You can set the size of the
    thumbnails and the full-sized graphs and you can also set their
    refresh interval. For more information, see
    <a href="mem-introduction.html#mem-monitor-page-graphs" title="15.5.2. The Server Graphs and Critical Events">Section 15.5.2, “The Server Graphs and Critical Events”</a>. As with the
    <code class="literal">Monitor</code> page, the data shown in the graphs is
    determined by the server or group of servers selected in the server
    tree.
  </p><p>
    The <code class="literal">Graphs</code> page shows all the available graphs
    and provides the capability of adjusting the scale of the graphs,
    allowing a more or less detailed view as the situation requires. To
    ensure that you have the latest versions of the various graphs click
    on the <span class="guilabel">Check For Updates</span> link on the top left
    of this page.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-available-graphs"></a>15.9.1. Displaying Graphs</h3></div></div></div><p>
      The total number of graphs varies depending upon your subscription
      level. The four graphs that appear by default on the
      <code class="literal">Monitor</code> page are:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Hit Ratios
          </p></li><li><p>
            Database Activity
          </p></li><li><p>
            Connections
          </p></li><li><p>
            CPU Utilization
          </p></li></ul></div><p>
    </p><p>
      When the <code class="literal">Graphs</code> page is first opened, no graphs
      are visible. To view a graph click the <span class="guibutton">+</span>
      button on the left or, to view all graphs, use the
      <span class="guibutton">expand all</span> button.
    </p><p>
      The larger size of graphs is the primary reason for viewing graphs
      on the <code class="literal">Graphs</code> page rather than on the
      <code class="literal">Monitor</code> page. Additionally, you can only show a
      maximum of six graphs on the <code class="literal">Monitor</code> page; the
      remaining graphs can only be viewed from the
      <code class="literal">Graphs</code> page.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-setting-graph-interval"></a>15.9.2. Setting an Interval</h3></div></div></div><p>
      Change the interval for a graph by choosing values from the
      <span class="guilabel">Hours</span> and <span class="guilabel">Minutes</span>
      drop-down list boxes. If necessary adjust the width and height of
      the graph and then click the <span class="guibutton">update</span> button.
      The changes to the time span apply to all the graphs on the
      <code class="literal">Graphs</code> page but have <span class="emphasis"><em>no</em></span>
      effect on the graphs on the <code class="literal">Monitor</code> page.
    </p><p>
      To change the graphs both here and on the
      <code class="literal">Monitor</code> page use the <code class="literal">configure
      graphs</code> link on the top right. This opens a dialog box
      for setting the default interval for the x-axis. Save any changes
      that you have made and the values chosen will be the defaults
      whenever you log in. You can also change the defaults from the
      <code class="literal">Monitor</code> page as described in
      <a href="mem-introduction.html#mem-monitor-page-graphs" title="15.5.2. The Server Graphs and Critical Events">Section 15.5.2, “The Server Graphs and Critical Events”</a>; defaults for other
      users will be unchanged.
    </p><p>
      Use the <span class="guibutton">reset</span> button to restore the default
      value for the interval. Doing this will also reset the default
      size of the graphs.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-setting-graph-time-span"></a>15.9.3. Setting a Time Span</h3></div></div></div><p>
      Setting a graph to display a time span gives you a historical
      perspective on server activity. You may want to know what was
      happening at a specific point in time or you may wish to look at
      an extended period in order to determine patterns or trends.
      Changing the time span gives you the flexibility to do this.
    </p><p>
      In the <span class="guilabel">Time Display</span> drop-down list box select
      the <code class="literal">From/To</code> option. Choosing this option
      updates the display to include <span class="guilabel">To</span> and
      <span class="guilabel">From</span> text boxes.
    </p><p>
      Set the date you wish to start viewing from by manually entering
      the date in year, month, and day format (2007-03-14). However, it
      is much easier to click the calendar icon and choose a date from
      the drop-down calendar. Enter a terminating date in the same way.
      If you wish, you may also choose the specific time of day by
      selecting the hour and minute.
    </p><p>
      If necessary adjust the width and height of the graph and then
      click the <span class="guibutton">update</span> button. The changes to the
      time span apply to all the graphs on the <code class="literal">Graphs</code>
      page but have <span class="emphasis"><em>no</em></span> effect on the graphs on the
      <code class="literal">Monitor</code> page. You cannot change the time span
      of the graphs that appear on the <code class="literal">Monitor</code> page.
      Changes apply only to the current user; defaults for other users
      will be unchanged.
    </p><p>
      Use the <span class="guibutton">reset</span> button to cancel your
      changes.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mem-query-analysis"></a>15.10. The Query Analyzer Page</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-query-analysis-enabling">15.10.1. Enabling Query Analyzer</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-query-analysis-queries">15.10.2. Getting Detailed Query Information</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-query-analysis-filtering">15.10.3. Filtering Query Analyzer Data</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-query-analysis-using">15.10.4. Using Query Analyzer Data</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-query-analysis-troubleshooting">15.10.5. Troubleshooting Query Analyzer</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-query-analysis-settings">15.10.6. Query Analyzer Settings</a></span></dt></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      MySQL Enterprise subscription, MySQL Enterprise Monitor, MySQL
      Replication Monitor, and MySQL Query Analyzer are only available
      to commercial customers. To learn more, see:
      <a href="http://www.mysql.com/products/enterprise/features.html" target="_top">http://www.mysql.com/products/enterprise/features.html</a>.
    </p></div><p>
    Query Analyzer enables you to monitor the statements being executed
    on a monitored server and retrieve information about the query,
    number of executions and the execution times of each query. Queries
    are normalized, so that the unique data defined within each query
    has been removed. By removing the data specific elements of the
    queries, the generic queries can be counted and identified more
    easily.
  </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
      After this release is pronounced Generally Available, the MySQL
      Agent will be ready for use in your production systems; however,
      we strongly recommend reading these guidelines before
      using/deploying MySQL Query Analyzer.
    </p><p>
      MySQL Query Analyzer is designed to gather query performance
      information from a variety of sources. In this initial release,
      Query Analyzer uses a new agent plug-in to proxy your queries and
      collect performance data that is then transmitted to the
      Enterprise Monitor. This is a new role for the Agent: it is no
      longer just monitoring, it is now *optionally* between your
      application and the mysql server.
    </p><p>
      Depending upon your system load, it is possible to overload the
      proxy or have the proxy/agent consume system resources needed by
      mysql itself. In particular, the memory needed by the MySQL Agent
      for basic monitoring is fairly small and consistent and depends on
      the number of rules you have enabled. However, when the Query
      Analyzer is enabled, the Agent can use significantly more memory
      to monitor and analyze whatever queries you direct through it. In
      this case, the amount of memory used depends on the number of
      unique normalized queries, example queries and example
      <code class="literal">EXPLAIN</code>s being processed plus the network
      bandwidth required to send this query performance data to the
      Service Manager. In general, the amount of memory used for the
      Query Analyzer is well-bounded, but under heavy load or, in some
      cases under older versions of linux, RAM usage by Query Analyzer
      may be too high for your environment and load.
    </p><p>
      Therefore we advise you to use this initial release of Query
      Analyzer extensively in development, test and stage environments
      under load for an extended period of time before considering usage
      in a production environment. For all deployments:
    </p><div class="orderedlist"><ol type="1"><li><p>
          We recommend carefully monitoring the Agent's resource
          consumption using the new graph <span class="guilabel">Memory Usage -
          Agent</span> graphs available on the
          <span class="guilabel">Graph</span> tab. You can also add an SMTP or
          SNMP notification to the new Heat Chart rule <span class="guilabel">MySQL
          Agent Memory Usage Excessive</span>.
        </p></li><li><p>
          If the amount of memory consumed is too high, consider
          sampling queries during non-peak hours or monitoring only a
          subset of queries on this system.
        </p></li></ol></div><p>
      If you experience any problems with Query Analyzer, we're
      interested in working with you closely and quickly to resolve
      them. Please open a Support issue right away. We're already
      working hard on optimizing Agent/proxy RAM usage and are planning
      a series of rapid releases to quickly distribute these and other
      improvements to you.
    </p></div><p>
    Query Analyzer works by intercepting the SQL statements that your
    client application sends to the MySQL server. Instead of connecting
    direct to the MySQL Server, queries are routed through the
    MySQL Enterprise Monitor Agent, the agent/proxy forwards the queries on to the
    server and sends the replies back to the client application as
    normal. In addition to forwarding the queries, the agent/proxy will
    also normalize the queries and then supply the execution information
    about each query to the monitor. The forwarding functionality is
    provided by the same module that supports the MySQL Proxy
    application. For information on MySQL Proxy, see
    <a href="ha-overview.html#mysql-proxy" title="14.6. MySQL Proxy">Section 14.6, “MySQL Proxy”</a>.
  </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
      The MySQL Proxy component, and Query Analyzer, require that
      clients connecting through MySQL Enterprise Monitor Agent are using MySQL 5.0 or
      later. Clients that use the library provided with MySQL 4.1 or
      earlier will not work with MySQL Enterprise Monitor Agent.
    </p></div><p>
    Once your application has been configured to communicate via the
    MySQL Enterprise Monitor Agent, queries will be monitored and the simplified
    queries, without the query specific data, will be sent to the
    MySQL Enterprise Monitor Agent.
  </p><p>
    There are a number of different ways that you can enable Query
    Analysis. For more information on the different options, see
    <a href="mem-introduction.html#mem-query-analysis-enabling" title="15.10.1. Enabling Query Analyzer">Section 15.10.1, “Enabling Query Analyzer”</a>.
  </p><p>
    To analyse the queries captured by the agent/proxy, change to the
    <code class="literal">Query Analyzer</code> page. You can see an example of
    the table on that page in the figure below.
  </p><div class="figure"><a name="fig-mem-quan-main"></a><p class="title"><b>Figure 15.45. MySQL Enterprise Dashboard: Query Analyzer</b></p><div class="mediaobject"><img src="images/mem-quan-main.png" width="1080" height="546" alt="MySQL Enterprise Dashboard: Query Analyzer"></div></div><p>
    The main Query Analyzer table provides the summary information for
    all of the queries executed via the agent/proxy. The table will
    track all the queries submitted to the server via the agent/proxy.
    The table will show a maximum of 20 rows, and you can page through
    the list of queries by using the page numbers, or the
    <span class="guilabel">next</span>, <span class="guilabel">previous</span>,
    <span class="guilabel">first</span>, and <span class="guilabel">last</span> buttons.
    To filter the list of queries that are displayed, or to change the
    number of queries, see
    <a href="mem-introduction.html#mem-query-analysis-filtering" title="15.10.3. Filtering Query Analyzer Data">Section 15.10.3, “Filtering Query Analyzer Data”</a>.
  </p><p>
    Each row within the table provides the statistical information for
    one normalized query statement. If you have configured multiple
    agent/proxies to accept and forward queries to different servers,
    then you can expand the server view. The summary information
    displayed is different depending on whether you have selected a
    server group or an individual server.
  </p><p>
    If you have selected a server group, then the information displayed
    is aggregated from across the entire group. The same query executed
    on multiple servers will show average, total and minimum/maximum
    information for that query across all the servers. If you select an
    individual server, then only queries executed on that server are
    included within the table.
  </p><p>
    For each row, the following columns are populated according to the
    selected filtering options. For example, if the filter have been
    configured to show queries within the last 30 minutes
    (<span class="guilabel">Interval</span>), then only queries executed during
    that time will be displayed, and the corresponding statistics, such
    as execution times, rows returned and bytes returned will be
    according to that 30 minute timespan.
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        <span class="guilabel">Query</span> — the normalized version of the
        query. Normalization removes the query-specific data so that
        different queries with different data parameters are identified
        as the same basic query.
      </p><p>
        The information is shown as one query per row. Each query row is
        expandable, and can be expanded to show the execution times for
        individual servers for that query.
      </p></li><li><p>
        <span class="guilabel">Database</span> — the name of the database
        used in the query. The column may be blank if the database name
        has not been explicitly stated within the query.
      </p></li><li><p>
        <span class="guilabel">Exec Count</span> — the number of times that
        the query has been executed.
      </p></li><li><p>
        <span class="guilabel">Exec Time</span> — the execution time for
        all the matching queries. This is the time, for every invocation
        of the corresponding query, as calculated by comparing the time
        when the query was submitted and when the results were returned
        by the server. Times are expressed in HH:MM::SS.MS (hours,
        minutes, seconds, and milliseconds).
      </p><p>
        The <span class="guilabel">Execution</span> column is further subdivided
        into the following columns:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <span class="guilabel">Count</span> — the total number of
            executions.
          </p></li><li><p>
            <span class="guilabel">Total</span> — the cumulative execution
            time for all the executions of this query.
          </p></li><li><p>
            <span class="guilabel">Max</span> — the maximum execution time
            for an execution of this query.
          </p></li><li><p>
            <span class="guilabel">Avg</span> — the average execution time
            for the execution of this query.
          </p></li></ul></div><p>
        When looking at the information provided in this query, you
        should consider comparing the average and maximum execution
        times to see if there was a problem on a specific server or
        during a specific time period when the query took place, as this
        may indicate an issue that needs to be investigated. For more
        information, see <a href="mem-introduction.html#mem-query-analysis-using" title="15.10.4. Using Query Analyzer Data">Section 15.10.4, “Using Query Analyzer Data”</a>.
      </p></li><li><p>
        <span class="guilabel">Rows</span> — the rows returned by the
        query. The column is sub-divided into the following columns:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <span class="guilabel">Total</span> — the sum total number of
            rows returned by all executions of the query.
          </p></li><li><p>
            <span class="guilabel">Max</span> — the maximum number of rows
            returned by a single execution of the query.
          </p></li><li><p>
            <span class="guilabel">Avg</span> — the average number of rows
            returned by all executions of the query.
          </p></li></ul></div></li><li><p>
        <span class="guilabel">Bytes</span> — the number of bytes returned
        by each query. The column is sub-divided into the following
        columns:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <span class="guilabel">Total</span> — the sum total bytes
            returned by all executions of the query.
          </p></li><li><p>
            <span class="guilabel">Max</span> — the maximum number of bytes
            returned by a single execution of the query.
          </p></li><li><p>
            <span class="guilabel">Avg</span> — the average number of bytes
            returned by all executions of the query.
          </p></li></ul></div></li><li><p>
        <span class="guilabel">First Seen</span> — the first time the query
        was seen within the given filter conditions.
      </p></li></ul></div><p>
    You can sort the list of queries by clicking on the column name. The
    direction of the sort (highest to lowest, or lowest to highest) is
    indicated by a triangle next to the currently selected column. The
    default is to sort the list of queries by the Total Execution time.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-query-analysis-enabling"></a>15.10.1. Enabling Query Analyzer</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-query-analysis-enabling-app">15.10.1.1. Enabling Query Analyzer by Changing the Application</a></span></dt><dt><span class="section"><a href="mem-introduction.html#mem-query-analysis-enabling-mysql">15.10.1.2. Enabling Query Analyzer by Changing MySQL Server</a></span></dt></dl></div><p>
      There are three different ways of enabling query analyzer:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Change your application to talk to the Proxy port you
          configured during installation. This requires changing your
          application code, and may require that you stop and restart
          you application, but does not require any changes to your
          MySQL server. For more information, see
          <a href="mem-introduction.html#mem-query-analysis-enabling-app" title="15.10.1.1. Enabling Query Analyzer by Changing the Application">Section 15.10.1.1, “Enabling Query Analyzer by Changing the Application”</a>.
        </p></li><li><p>
          Change your MySQL server to listen on a different port, and
          configure the Agent/proxy to listen on the original MySQL
          server port. This does not require any changes to your
          application, but will require shutting down and restarting
          your MySQL server, which may affect your cache and
          performance. For more information, see
          <a href="mem-introduction.html#mem-query-analysis-enabling-mysql" title="15.10.1.2. Enabling Query Analyzer by Changing MySQL Server">Section 15.10.1.2, “Enabling Query Analyzer by Changing MySQL Server”</a>.
        </p></li><li><p>
          Use IP tables to redirect the network packets to the
          agent/proxy.
        </p></li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
        After this release is pronounced Generally Available, the MySQL
        Agent/proxy will be ready for use in your production systems;
        however, we strongly recommend reading these guidelines before
        using/deploying MySQL Query Analyzer.
      </p><p>
        MySQL Query Analyzer is designed to gather query performance
        information from a variety of sources. In this initial release,
        Query Analyzer uses a new agent plug-in to proxy your queries
        and collect performance data that is then transmitted to the
        Enterprise Monitor. This is a new role for the Agent: it is no
        longer just monitoring, it is now *optionally* between your
        application and the mysql server.
      </p><p>
        Depending upon your system load, it is possible to overload the
        proxy or have the proxy/agent consume system resources needed by
        mysql itself. In particular, the memory needed by the MySQL
        Agent for basic monitoring is fairly small and consistent and
        depends on the number of rules you have enabled. However, when
        the Query Analyzer is enabled, the Agent can use significantly
        more memory to monitor and analyze whatever queries you direct
        through it. In this case, the amount of memory used depends on
        the number of unique normalized queries, example queries and
        example <code class="literal">EXPLAIN</code>s being processed plus the
        network bandwidth required to send this query performance data
        to the Service Manager. In general, the amount of memory used
        for the Query Analyzer is well-bounded, but under heavy load or,
        in some cases under older versions of linux, RAM usage by Query
        Analyzer may be too high for your environment and load.
      </p><p>
        Therefore we advise you to use this initial release of Query
        Analyzer extensively in development, test and stage environments
        under load for an extended period of time before considering
        usage in a production environment. For all deployments:
      </p><div class="orderedlist"><ol type="1"><li><p>
            We recommend carefully monitoring the Agent's resource
            consumption using the new graph <span class="guilabel">Memory Usage -
            Agent</span> graphs available on the
            <span class="guilabel">Graph</span> tab. You can also add an SMTP or
            SNMP notification to the new Heat Chart rule <span class="guilabel">MySQL
            Agent Memory Usage Excessive</span>.
          </p></li><li><p>
            If the amount of memory consumed is too high, consider
            sampling queries during non-peak hours or monitoring only a
            subset of queries on this system.
          </p></li></ol></div><p>
        If you experience any problems with Query Analyzer, we're
        interested in working with you closely and quickly to resolve
        them. Please open a Support issue right away. We're already
        working hard on optimizing Agent/proxy RAM usage and are
        planning a series of rapid releases to quickly distribute these
        and other improvements to you.
      </p></div><p>
      Note that you must have enabled Query Analyzer within the
      agent/proxy during installation. If you did not enable Query
      Analyzer during the installation of the agent/proxy, check the
      following elements within the main
      <code class="filename">mysql-monitor-agent.ini</code> configuration file:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Add the <code class="literal">proxy</code> plugin to the
          <code class="literal">plugins</code> parameter:
        </p><pre class="programlisting">plugins=proxy,agent</pre></li><li><p>
          Ensure that the <code class="literal">quan.lua</code> items file is
          enabled in the <code class="literal">agent-item-files</code>
          configuration property:
        </p><pre class="programlisting">agent-item-files = share/mysql-proxy/items/quan.lua,share/mysql-proxy/items/items-mysql-monitor.xml
</pre></li><li><p>
          Check and set the <code class="literal">proxy-address</code>,
          <code class="literal">proxy-backend-addresses</code>, and
          <code class="literal">proxy-lua-script</code> settings are configured:
        </p><pre class="programlisting">proxy-address=:4040
proxy-backend-addresses = 127.0.0.1:3306
proxy-lua-script        = share/mysql-proxy/quan.lua
</pre></li></ul></div><p>
      For more information on these configuration options, see
      <a href="mem-introduction.html#mem-cfg-mysql-monitor-agent-ini" title="15.3.3.6.1. MySQL Enterprise Monitor Agent (mysql-monitor-agent.ini)
        Configuration">Section 15.3.3.6.1, “MySQL Enterprise Monitor Agent (<code class="filename">mysql-monitor-agent.ini</code>)
        Configuration”</a>.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        The Query Analyzer functionality may show as being enabled on a
        server, even though the modules within MySQL Enterprise Monitor Agent may not
        have been enabled.
      </p></div><p>
      You may also need to make some additional changes to the security
      configuration on your server to ensure that queries are correctly
      reported to MySQL Enterprise Service Manager:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          You must ensure that each user configured within your
          application that connects through the agent/proxy and is
          required to report query analyzer information is allowed to
          connect to the server from the host on which the agent/proxy
          is running. When the user connects to the agent/proxy, and the
          agent/proxy connects to the server the host of the agent/proxy
          will be used as the identifying client host name during the
          connection.
        </p><p>
          To update your user credentials, you need to use the
          <code class="literal">GRANT</code> statement. For example:
        </p><pre class="programlisting">mysql&gt; GRANT SELECT,UPDATE,INSERT on database.* to 'user'@'localhost' IDENTIFIED BY 'password';</pre></li><li><p>
          The application user must have <code class="literal">SELECT</code>
          privileges on the <code class="literal">mysql.inventory</code> table.
          This table contains the server UUID and is required to report
          the query analyzer data to the MySQL Enterprise Service Manager. To enable
          this, use the <code class="literal">GRANT</code> option:
        </p><pre class="programlisting">mysql&gt; GRANT SELECT on mysql.inventory to 'user'@'localhost' IDENTIFIED BY 'password';</pre></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-query-analysis-enabling-app"></a>15.10.1.1. Enabling Query Analyzer by Changing the Application</h4></div></div></div><p>
        Generally, changing your application is the easiest and
        recommended method. For example, given a typical structure like
        the one shown in the figure below, the client application would
        need to be modified so that it no longer communicated directly
        with the MySQL server, but to the agent/proxy.
      </p><div class="figure"><a name="fig-mem-quan-layout1"></a><p class="title"><b>Figure 15.46. MySQL Enterprise Dashboard: Standard agent/monitor topology</b></p><div class="mediaobject"><img src="images/quan-layout1.png" width="534" height="160" alt="MySQL Enterprise Dashboard: Standard agent/monitor topology"></div></div><p>
        You can see an example of the structure when communicating via
        the agent/proxy below.
      </p><div class="figure"><a name="fig-mem-quan-layout2"></a><p class="title"><b>Figure 15.47. MySQL Enterprise Dashboard: Query Analyzer agent/monitor topology</b></p><div class="mediaobject"><img src="images/quan-layout2.png" width="474" height="160" alt="MySQL Enterprise Dashboard: Query Analyzer agent/monitor
            topology"></div></div><p>
        To enable query analyzer within your application:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Make sure that the MySQL Enterprise Service Manager and your MySQL Enterprise Monitor Agent
            are configured and running.
          </p></li><li><p>
            Confirm the configuration of your agent by examining the
            contents of the
            <code class="filename">etc/mysql-monitor-agent.ini</code> file within
            your installed Agent directory.
          </p><p>
            Queries will be sent to the host specified in the
            <code class="literal">proxy-backend-addresses</code> parameter, and
            the agent will listen for connections to be redirected to
            the server on the host name and port configured in the
            <code class="literal">proxy-address</code> parameter.
          </p></li><li><p>
            Now modify your client application to communicate with the
            address specified in the <code class="literal">proxy-address</code>
            parameter.
          </p><p>
            Alternatively, if you do not want to modify your application
            directly, you can use iptables or firewall rules to redirect
            queries from the original host/port combination to the
            agent's port.
          </p><p>
            Because connections to the MySQL server will be coming from
            the agent/proxy, not the original host, the user credentials
            used must be have a suitable <code class="literal">GRANT</code>
            statement for connections from <code class="literal">localhost</code>,
            or the host on which the agent/proxy is executing. The user
            name and password information will be passed on directly
            through the agent/proxy from the client to the server.
          </p></li><li><p>
            Confirm that your application still operates normally. There
            should be no difference between communicating directly with
            the MySQL server and communicating via the agent/proxy.
          </p></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If you are using the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> client to
          connect to the agent/proxy and your backend servers, make sure
          that you are communicating with the proxy over the right port.
          By default, if you specify <code class="literal">localhost</code> as the
          host name, then <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> will connect using
          the local Unix domain socket, rather than the TCP/IP socket.
        </p><p>
          You can enforce <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> to use the right port
          either by explicitly requesting the protocol type, or by using
          the IP address rather than <code class="literal">localhost</code>. For
          example, both of these command lines will start the client
          using the right protocol:
        </p><pre class="programlisting">shell&gt; mysql --port=4040 --protocol=tcp
shell&gt; mysql --port=4040 --host=127.0.0.1</pre></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          It is recommended that you use one agent/proxy per MySQL
          server instance. The agent/proxy is not able to forward
          queries to multiple MySQL server backends.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mem-query-analysis-enabling-mysql"></a>15.10.1.2. Enabling Query Analyzer by Changing MySQL Server</h4></div></div></div><p>
        When enabling Query Analyzer by changing the MySQL Server, you
        need to shutdown your server, edit the MySQL configuration file,
        and then restart MySQL. You will also need to change your
        Agent/proxy configuration so that the Agent/proxy is listening
        on the original MySQL TCP/IP port. To use this method:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Edit the <code class="filename">/etc/my.cnf</code> or other MySQL
            configuration file and change or add the
            <code class="literal">port</code> setting from it's current value
            (default 3306), to another value. For example:
          </p><pre class="programlisting">port                                            = 3307
</pre></li><li><p>
            Shutdown your MySQL Server.
          </p></li><li><p>
            Startup your MySQL Server and confirm that is running.
          </p></li><li><p>
            Edit your MySQL Enterprise Monitor Agent configuration so that the
            agent/proxy is listening for connections on the original
            MySQL port:
          </p><pre class="programlisting">proxy-address=:3306
proxy-backend-addresses = 127.0.0.1:3307</pre></li><li><p>
            Stop and restart MySQL Enterprise Monitor Agent.
          </p></li></ol></div><p>
        You should now be able to connect to your MySQL server through
        the MySQL Enterprise Monitor Agent by connecting on the original port:
      </p><pre class="programlisting">shell&gt; mysql --host=127.0.0.1</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-query-analysis-queries"></a>15.10.2. Getting Detailed Query Information</h3></div></div></div><p>
      If you click on an individual query, a pop-up window will provide
      more detailed information about the individual query. You can see
      an example of this in the figure below. The available tabs within
      this window will depend on whether you have configured the more
      detailed query information. By default, you will always be
      provided the Summary Details page. If enabled, you may also view
      Example Details, which provide more detailed data about a specific
      query, including the data and parameters submitted. In addition,
      you may also enable Example Explain, which provides you with the
      ability to remotely execute an <code class="literal">EXPLAIN</code>
      statement with the specified query and view the resulting
      information.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          The <span class="bold"><strong>Canonical Query</strong></span> tab:
        </p><div class="figure"><a name="fig-mem-quan-item-summary"></a><p class="title"><b>Figure 15.48. MySQL Enterprise Dashboard: Canonical Query Tab for a Query</b></p><div class="mediaobject"><img src="images/mem-quan-item-summary.png" width="400" height="562" alt="MySQL Enterprise Dashboard: Canonical Query Tab for a Query"></div></div><p>
          In addition to the summary information given in the table, you
          will get detailed execution statistics, including the minimum
          time, maximum time, average time, total time and the standard
          deviation. The standard deviation will enable you to determine
          whether a particular invocation of a query is outside the
          normal distribution of times for the given query.
        </p><p>
          Row statistics provide more detailed contents on the maximum,
          minimum, average, total, and standard deviation for the number
          of rows returned by the query, and the total size and maximum
          size of the data returned. The time period for the total and
          average figures is shown under the Summary Time Span.
        </p><p>
          The detailed view for a query also provides three different
          views of the query. The <code class="literal">truncated</code> version
          is a shortened version of the query. The
          <code class="literal">full</code> version of the query is the entire
          query statement. Normalization removes the constants from the
          individual queries so that queries following the same logical
          structure are identified as the same basic query.
        </p><p>
          To close the query detail window, click the
          <span class="guibutton">Hide</span> button.
        </p><p>
          To simplify the identification of a given query, you can
          create a query alias. The alias will be used in place of the
          normalized query text within the Query Analyzer table. To
          create an alias for a query, click the <span class="guibutton">create
          alias</span> link against the query. The maximum length
          for a query alias is 255 characters.
        </p></li><li><p>
          The <span class="bold"><strong>Example Query</strong></span> tab:
        </p><div class="figure"><a name="fig-mem-quan-item-example"></a><p class="title"><b>Figure 15.49. MySQL Enterprise Dashboard: Example Query Tab for a Query</b></p><div class="mediaobject"><img src="images/mem-quan-item-example.png" width="416" height="564" alt="MySQL Enterprise Dashboard: Example Query Tab for a Query"></div></div><p>
          The Example Details tab provides detailed information about
          the most expensive query executed, as determined by the
          execution time.
        </p><p>
          In addition to the full query, with data, that was executed,
          the tab shows the execution time, data, user, thread ID,
          client host and execution host for the given query.
        </p></li><li><p>
          The <span class="bold"><strong>Explain Query</strong></span> tab:
        </p><div class="figure"><a name="fig-mem-quan-item-explain"></a><p class="title"><b>Figure 15.50. MySQL Enterprise Dashboard: Explain Query Tab for a Query</b></p><div class="mediaobject"><img src="images/mem-quan-item-explain.png" width="778" height="166" alt="MySQL Enterprise Dashboard: Explain Query Tab for a Query"></div></div><p>
          The Example Explain tab enables you to view the output from
          running the query with the <code class="literal">EXPLAIN</code> prefix.
          For more information, see <a href="sql-syntax.html#explain" title="12.3.2. EXPLAIN Syntax">Section 12.3.2, “<code class="literal">EXPLAIN</code> Syntax”</a>.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-query-analysis-filtering"></a>15.10.3. Filtering Query Analyzer Data</h3></div></div></div><p>
      You can filter the queries shown within the Query Analyzer table
      by using the form at the top of the table. The different fields of
      the form are used to specify the parameters for the filter
      process. Once you have specified a filter, all the queries and
      related statistics shown within the Query Analyzer table are
      displayed in relation to the filter settings. For example, by
      default, the filter settings show the queries for the last 30
      minutes. All the statistics shown are relative to the last 30
      minutes, including average, maximum and execution counts.
    </p><p>
      The filter fields are:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <span class="guilabel">Search Type</span> and <span class="guilabel">Query
          Search</span> support text searching of the normalized
          query. For the search type you can specify either a basic text
          match, or a regular expression match. In addition to the basic
          text match, you can also search for a query that does not
          contain a particular string. For regular expression searches,
          you can specify whether the regular expression should match,
          or not match (negative regexp) the queries. Regular
          expressions are parsed using the standard MySQL
          <code class="literal">REGEXP()</code> function. For more information,
          see <a href="functions.html#regexp" title="11.4.2. Regular Expressions">Section 11.4.2, “Regular Expressions”</a>.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            The search is performed against the canonical version of the
            query. You cannot search against specific text or values
            within the parameters of the query itself.
          </p></div></li><li><p>
          <span class="guilabel">Database</span> — limit the queries to
          those executed within a specific database. The database match
          is performed using the <code class="literal">LIKE</code> match from the
          MySQL database, hence you can use the <code class="literal">%</code> and
          <code class="literal">_</code> characters to multiple and single
          character matches. For more information, see
          <a href="tutorial.html#pattern-matching" title="3.3.4.7. Pattern Matching">Section 3.3.4.7, “Pattern Matching”</a>.
        </p></li><li><p>
          The <span class="guilabel">Time Display</span> menu selects whether the
          time selection for filtering should be based on the time
          <span class="guilabel">interval</span> (only queries recorded within
          the displayed time period are shown, using the
          <span class="guilabel">Hours</span> and <span class="guilabel">Minutes</span>
          popup), or whether the selection should be based on a time
          period (<span class="guilabel">From/To</span>), where you can select
          the time range to be displayed.
        </p><p>
          Using the <span class="guilabel">Interval</span> mode shows queries
          within the given time period from the point the graph was
          updated. For example, if you select 30 minutes, then the
          queries shown were captured within the last 30 minutes. If you
          updated the display at 14:00, then the queries displayed would
          have been captured between 13:30 and 14:00. Using interval
          mode limits the timespan for the filter selection to a maximum
          of 23 hours and 59 minutes.
        </p><p>
          Using the <span class="guilabel">From/To</span> mode enables you to
          show queries between specific dates and times. Using this mode
          you can show only the queries received during a specific time
          span, and you can display the query history for a much longer
          time period, for as long as you have been recording query
          analysis information.
        </p></li><li><p>
          The <span class="guilabel">View</span> selection determines whether the
          information should be returned on a group basis, where an
          aggregate of the same query executed on all monitored servers
          is shown, or on a <span class="guilabel">Server</span> basis, where
          queries are summarized by individual server. If the latter
          option has been selected, the table includes an additional
          column showing the server.
        </p></li><li><p>
          <span class="guilabel">Query Type</span> lets you select the type of
          query on which to filter queries. Selecting
          <span class="guilabel">All</span> will show all queries. Additional
          query types you can select include <code class="literal">SELECT</code>,
          <code class="literal">INSERT</code>, <code class="literal">UPDATE</code> and other
          main SQL query types.
        </p></li><li><p>
          <span class="guilabel">Limit</span> specifies the number of queries to
          be displayed within each page.
        </p></li></ul></div><p>
      When you have set your filter parameters, you can update the Query
      Analysis display by clicking the <span class="guibutton">filter</span>
      button. To reset the fields to the default settings click the
      <span class="guibutton">reset</span> button.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-query-analysis-using"></a>15.10.4. Using Query Analyzer Data</h3></div></div></div><p>
      The information provided by Query Analyzer can be complex to
      understand and resolve into simple targets and resolutions for
      your application. The information can be used in different ways to
      find problems in your queries or your servers, or both. Provided
      below are some tips on how to get the best out of the Query
      Analysis interface, and how to identify different queries and
      problems based on the information shown by the Query Analyzer
      system.
    </p><p>
      First, consider the information provided by individual columns by
      your queries. In particular, the following columns can highlight
      specific problems with your queries or database server:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <span class="bold"><strong>Execution Count</strong></span> — High
          execution counts, especially for a query that you expect to be
          executed very rarely, may indicate that your application is
          either running a simple query to frequently, or may be running
          a query multiple times that could otherwise be cached. You
          should pay particular attention to queries where the execution
          count increases significantly in a short period of time
          compared to the normal execution rate.
        </p><p>
          <span class="bold"><strong>How to find:</strong></span> Use the sort
          feature to sort the queries by execution count.
        </p></li><li><p>
          <span class="bold"><strong>New queries</strong></span> — new
          queries appearing in the Query Analyzer tab, especially if
          they appear after other queries have been in the display for a
          number of hours or days may indicate a number of issues:
        </p></li><li><p>
          <span class="bold"><strong>Execution times</strong></span> — long
          execution times, and a long max execution time compared to the
          average execution time may indicate a problem with a specific
          query and specific parameters.
        </p><p>
          <span class="bold"><strong>How to find:</strong></span> Use the sort
          feature to sort the queries by execution count.
        </p></li></ul></div><p>
      You can also use the filtering and sort options to get specific
      information about potential problem queries.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-query-analysis-troubleshooting"></a>15.10.5. Troubleshooting Query Analyzer</h3></div></div></div><p>
      If you are having trouble with Query Analyzer, either because the
      information is not being shown or the full range of queries that
      you expect are not appearing in the Query Analyzer page then there
      are a number of systems you can check.
    </p><p>
      To confirm that your system is correctly configured for Query
      Analysis, check the following:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Confirm that the agent is running by checking the Agent log
          and the status of the server within MySQL Enterprise Service Manager
        </p></li><li><p>
          Check the configuration of the agent. You must confirm the
          following:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              The <code class="literal">plugins</code> parameter within the main
              configuration file,
              <code class="filename">mysql-monitor-agent.ini</code>, must contain
              the <code class="literal">proxy</code> plugin:
            </p><pre class="programlisting">plugins=proxy,agent</pre></li><li><p>
              The <code class="literal">agent-item-files</code> parameter within
              the main configurationfile,
              <code class="filename">mysql-monitor-agent.ini</code>, must specify
              the <code class="filename">share/mysql-proxy/items/quan.lua</code>
              script:
            </p><pre class="programlisting">agent-item-files = share/mysql-proxy/items/quan.lua, »
     share/mysql-proxy/items/items-mysql-monitor.xml
</pre></li><li><p>
              The proxy configuration parameters must point to the MySQL
              server where you want your queries to be sent. For
              example, if you are running your agent on the same host as
              your MySQL server then you might have the following lines
              in your <code class="filename">mysql-monitor-agent.ini</code> file:
            </p><pre class="programlisting">proxy-address=:4040
proxy-backend-addresses = 127.0.0.1:3306
proxy-lua-script        = share/mysql-proxy/quan.lua
</pre><p>
              The above configuration can means:
            </p><div class="itemizedlist"><ul type="square"><li><p>
                  The agent/proxy will listen on the current machine,
                  using port 4040 (<code class="literal">proxy-address</code>).
                </p></li><li><p>
                  The agent/proxy will send all queries received on to
                  the host <code class="literal">127.0.0.1</code> on port
                  <code class="literal">3306</code> (the standard MySQL port), as
                  per the <code class="literal">proxy-backend-addresses</code>
                  parameter.
                </p></li></ul></div></li></ul></div><p>
          You can see a sample complete configuration file
          (<code class="filename">mysql-monitor-agent.ini</code>), using the
          <code class="literal">127.0.0.1</code> as the MySQL backend server, and
          reporting to a MySQL Enterprise Service Manager called
          <code class="literal">monitor</code>:
        </p><pre class="programlisting">[mysql-proxy]
plugins=proxy,agent
agent-mgmt-hostname = http://agent:password@monitor:18080/heartbeat
mysqld-instance-dir= etc/instances
agent-item-files = share/mysql-proxy/items/quan.lua,share/mysql-proxy/items/items-mysql-monitor.xml
proxy-address=:4040
proxy-backend-addresses = 127.0.0.1:3306
proxy-lua-script        = share/mysql-proxy/quan.lua
agent-uuid = a3113263-4993-4890-8235-cadef9617c4b
log-file = mysql-monitor-agent.log
pid-file=/opt/mysql/enterprise/agent/mysql-monitor-agent.pid</pre></li><li><p>
          Confirm that you can connect through the agent proxy to your
          backend MySQL server. You can do this by checking with the
          MySQL client. You must specify the same options as you would
          if you were connecting to the original server, including
          specifying the same user and password information:
        </p><pre class="programlisting">shell&gt; mysql -h 127.0.0.1 --port 4040 --user=root -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 299239
Server version: 5.0.60-log Gentoo Linux mysql-5.0.60-r1
Type 'help;' or '\h' for help. Type '\c' to clear the buffer.
mysql&gt; 
</pre></li><li><p>
          Check that your application is configured to use the
          configured proxy port, instead of the real MySQL port when
          sending queries.
        </p></li><li><p>
          Confirm that Query Analyzer enabled for your host. For more
          information, see
          <a href="mem-introduction.html#mem-query-analysis-settings" title="15.10.6. Query Analyzer Settings">Section 15.10.6, “Query Analyzer Settings”</a>.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-query-analysis-settings"></a>15.10.6. Query Analyzer Settings</h3></div></div></div><p>
      There are a number of settings related to the Query Analyzer data.
      You can configure the query analyzer operation by using the
      <span class="guilabel">configure query analyzer</span> link within the
      <span class="guilabel">Query Analyzer</span> tab, or through the
      <span class="guibutton">configure query analyzer</span> button within the
      <span class="guilabel">Manage Servers</span> tab within the
      <span class="guilabel">Settings</span> tab. Both methods provide you with
      the same dialog:
    </p><div class="figure"><a name="fig-mem-quan-config"></a><p class="title"><b>Figure 15.51. MySQL Enterprise Dashboard: Query Analyzer Configuration</b></p><div class="mediaobject"><img src="images/mem-quan-config.png" width="407" height="269" alt="MySQL Enterprise Dashboard: Query Analyzer Configuration"></div></div><p>
      Through either solution, the configuration options that you select
      are applied to the individual server or server group selected
      within the <span class="guilabel">Servers</span>navigation panel.
    </p><p>
      There are three configuration options available through either
      method:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <span class="guilabel">Enable Query Analyzer</span> configures whether
          query analyzer should be enabled for this server or server
          group. If selected, query analyzer will be enabled. To
          disable, delect the check box.
        </p><p>
          If Query Analyzer has been enabled, then you can additional
          configure the Example Query function by selecting the
          <span class="guilabel">Enable Example Query</span> checkbox. Enabling
          this option provides an additional tab when you open the
          <span class="guilabel">Canonical Query</span> window when clicking on a
          query.
        </p></li><li><p>
          <span class="guilabel">Enable Example Query</span> allows the Query
          Analyzer to display more information about individual queries.
          When enabled, queries and their data items (rather than the
          canonical form shown by default) will be provided. Enabling
          this option may expose the full query statements and therefore
          may present a security issue.
        </p><p>
          With the <span class="guilabel">Example Query</span> option enabled, an
          additional tab within the query summary details is made
          available. For more information, see
          <a href="mem-introduction.html#mem-query-analysis-queries" title="15.10.2. Getting Detailed Query Information">Section 15.10.2, “Getting Detailed Query Information”</a>.
        </p><p>
          If you have enabled <span class="guilabel">Example Query</span>, then
          you can additional enable <span class="guilabel">Example
          Explain</span>, To enable this tab, select the
          <span class="guilabel">Enable Example Explain</span> checkbox.
        </p></li><li><p>
          <span class="guilabel">Enable Example Explain</span> provides another
          tab when viewing a query where you can view the output from
          <code class="literal">EXPLAIN</code> output from MySQL for the selected
          query. This will show the full query and how the query was
          executed within the servers.
        </p><p>
          Enabling this option may add additional overhead to the
          execution of your server, as the server will run an
          <code class="literal">EXPLAIN</code> statement each time it identifies a
          long running query. For more information,
          <a href="mem-introduction.html#mem-faq" title="15.12. MySQL Enterprise Monitor Frequently Asked Questions">Section 15.12, “MySQL Enterprise Monitor Frequently Asked Questions”</a>.
        </p></li></ul></div><p>
      To enable or disable query analyzer for an individual server, go
      to the <span class="guilabel">Settings</span> page and click on the
      <span class="guibutton">Manage Servers</span> link. To configure all the
      properties, click the <span class="guilabel">configure query
      analyzer</span> link next to server you want modify.
    </p><p>
      Alternatively, for each server, the <span class="guilabel">Query
      Analyzer</span> column shows the current setting, On or Off,
      and whether the <span class="guilabel">Example</span> and
      <span class="guilabel">Explain</span> functionality is enabled. To change
      any setting, click on the current status to toggle between the
      On/Off position.
    </p><p>
      To disable or enable Query Analyzer for the selected servers, use
      the <span class="guibutton">disable query analyzer</span> or
      <code class="literal">enable query analyzer</code> buttons within the
      <span class="guilabel">Settings</span> page. You must have selected one or
      more servers from the list of available servers before selecting
      these buttons.
    </p><p>
      You can use the options that you have just selected as the default
      for all new servers that register with MySQL Enterprise Service Manager by using
      select the <span class="guilabel">Make this the default for all new
      servers</span> checkbox. By default, when a new server
      registers with MySQL Monitor, the server is automatically
      configured to supply Query Analysis data. This can have impact on
      the performance of your monitor and agent as it increases the
      amount of information supplied to the MySQL Monitor.
    </p><p>
      Configuration of Query Analyzer occurs through the
      <span class="guibutton">configure defaults</span> button from within the
      <span class="guilabel">Query Analyzer</span> page.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mem-replication"></a>15.11. The Replication Page</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mem-introduction.html#mem-replication-details">15.11.1. Replication Page Details</a></span></dt></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      MySQL Enterprise subscription, MySQL Enterprise Monitor, MySQL
      Replication Monitor, and MySQL Query Analyzer are only available
      to commercial customers. To learn more, see:
      <a href="http://www.mysql.com/products/enterprise/features.html" target="_top">http://www.mysql.com/products/enterprise/features.html</a>.
    </p></div><p>
    Navigate to the <code class="literal">Replication</code> page by choosing the
    <span class="guilabel">Replication</span> tab. This page provides a quick
    summary view of the state of your replication servers or, if you
    wish, you can drill down and determine specifics about any master or
    slave.
  </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      Servers, whether masters or slaves, must be monitored in order for
      them to appear on this page.
    </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      There will be no <code class="literal">Replication</code> page if your
      subscription level does not support this feature.
    </p></div><p>
    The <code class="literal">Replication</code> page groups all master servers
    with their slaves. Masters and their slaves are autodiscovered and a
    grouping is created. This grouping shows up on the replication page
    and also in the <code class="literal">Heat Chart</code> on the
    <code class="literal">Monitor</code> page. Scans run on a five minute
    interval, so depending upon the order of discovery, it can take as
    long as 2 polling intervals to create a complete group.
  </p><div class="figure"><a name="fig-mem-replication"></a><p class="title"><b>Figure 15.52. MySQL Enterprise Dashboard: Replication groups</b></p><div class="mediaobject"><img src="images/replication.png" width="595" height="307" alt="MySQL Enterprise Dashboard: Replication groups"></div></div><p>
    Discovery events are logged to the <code class="literal">Replication</code>
    log. To view this log navigate to the <code class="literal">Settings</code>
    page and choose the <span class="guilabel">Logs</span> link. View all
    replication-related events by clicking the
    <span class="guilabel">Replication</span> link. This log can be a useful tool
    should you need to debug the replication topology discovery process.
  </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
      The agent must be installed on the same machine as the server you
      are monitoring in order for discovery to work properly. Do
      <span class="bold"><strong>not</strong></span> use remote monitoring.
    </p></div><p>
    Replication groups can be managed from the <code class="literal">Manage
    Servers</code> page in the same way as other groups. However, any
    slaves removed from a server group will automatically be restored to
    that group. It is also possible to add non-slaves to a replication
    grouping. For more information about server groupings see
    <a href="mem-introduction.html#mem-server-grouping" title="15.6.3.2. Grouping Servers">Section 15.6.3.2, “Grouping Servers”</a>.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mem-replication-details"></a>15.11.1. Replication Page Details</h3></div></div></div><p>
      Choose a value from the <span class="guilabel">refresh</span> drop-down
      list box to set the rate at which information is updated. This
      refresh rate applies only to the information presented on this
      page: It is independent of the rate set for the
      <code class="literal">Monitor</code> page.
    </p><p>
      The following columns describe replication servers and their
      slaves:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Servers – Displays the group name and any master
            servers and slaves
          </p></li><li><p>
            Type – Indicates the topology of a server group or in
            the case of individual servers, whether a server is a
            master, a master/slave, or a slave
          </p></li><li><p>
            Slave IO – Reports the status of the slave IO thread
          </p></li><li><p>
            Slave SQL – Reports the status of the slave SQL thread
          </p></li><li><p>
            Seconds Behind – The number of seconds the slave is
            behind the master. This column is blank if a server is a
            master.
          </p></li><li><p>
            Binlog – The binlog file name
          </p></li><li><p>
            Binlog Pos – The current position in the binlog file
          </p></li><li><p>
            Master Binlog – The master binlog file name
          </p></li><li><p>
            Master Binlog Pos – The current position in the master
            binlog file
          </p></li><li><p>
            Last Error – The most recent error
          </p></li><li><p>
            Unlabeled Column – Use the <span class="guilabel">rename
            group</span> link on the server group line to edit the
            server group name
          </p></li></ul></div><p>
    </p><p>
      Levels of indentation in the <code class="literal">Servers</code> column
      show the relationship between master servers and their slaves.
      Most column headings are active links that allow you to change the
      order of display by clicking on the header. Sorting works
      differently for different column groupings. Click the
      <code class="literal">Seconds Behind</code> header to order servers by the
      number of seconds they are behind their master. However, in all
      cases, the server topology is respected. For example, in a
      <code class="literal">TREE</code> topology, ordering occurs within branches
      only.
    </p><p>
      If the agent is down, servers show in bold red in the
      <code class="literal">Servers</code> column. The <code class="literal">Slave IO</code>
      and the <code class="literal">Slave SQL</code> columns display
      <code class="literal">stopped</code> in red text if these threads are not
      running. If an agent is down, italics is used to display the last
      know status of the IO or SQL threads.
    </p><p>
      Clicking on a master server opens a dialog box that displays
      information about the server. The information shown includes:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            The number of slave servers
          </p></li><li><p>
            The binlog file name
          </p></li><li><p>
            The binlog position
          </p></li><li><p>
            Which databases are replicated and which not
          </p></li></ul></div><p>
      The dialog box also includes a link that allows the user to hide
      or show the slave servers.
    </p><p>
      Clicking on a slave server opens a dialog window showing
      extensive information about the slave.
    </p><p>
      
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mem-faq"></a>15.12. MySQL Enterprise Monitor Frequently Asked Questions</h2></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      MySQL Enterprise subscription, MySQL Enterprise Monitor, MySQL
      Replication Monitor, and MySQL Query Analyzer are only available
      to commercial customers. To learn more, see:
      <a href="http://www.mysql.com/products/enterprise/features.html" target="_top">http://www.mysql.com/products/enterprise/features.html</a>.
    </p></div><p>
    FAQ Categories
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        <a href="mem-introduction.html#mem-faq-general"><span class="bold"><strong>General
        Usage</strong></span></a>
      </p></li><li><p>
        <a href="mem-introduction.html#mem-faq-enterprise"><span class="bold"><strong>MySQL
        Enterprise</strong></span></a>
      </p></li><li><p>
        <a href="mem-introduction.html#mem-faq-monitor"><span class="bold"><strong>MySQL
        Monitor</strong></span></a>
      </p></li><li><p>
        <a href="mem-introduction.html#mem-faq-queryanalyzer"><span class="bold"><strong>MySQL
        Query Analyzer</strong></span></a>
      </p></li></ul></div><p><a name="mem-faq-general"></a>
    <span class="bold"><strong>General Usage</strong></span>
  </p><p><span class="bold"><strong>Questions</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><a href="mem-introduction.html#qandaitem-15-12-1-1">15.12.1: </a>
        While monitoring my network traffic I have noticed that the
        agents communicate information at irregular intervals to the
        MySQL Enterprise Service Manager. I cannot see anything in my configuration that
        would explain this behaviour. What is going on?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-1-2">15.12.2: </a>
        How frequently is the data purge process executed?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-1-3">15.12.3: </a>
        Does Query Analyzer work with all versions of MySQL and the
        MySQL Client Libraries?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-1-4">15.12.4: </a>
        My MySQL Enterprise Service Manager is behind a firewall but it cannot
        communicate with the MySQL Enterprise website to register and
        download my license key and advisor bundle. I normally use a
        proxy service to access external websites. How do I configure
        the proxy settings for MySQL Enterprise Dashboard?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-1-5">15.12.5: </a>
        What is the relationship between the advisor JAR file and the
        key?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-1-6">15.12.6: </a>
        I have set the graphs to update every 5 minutes, and the page
        refresh to occur every minute. The page is refreshing correctly,
        but the graphs do not seem to update.
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-1-7">15.12.7: </a>
        Can the Trial-level key work with the Gold-level advisors JAR
        file?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-1-8">15.12.8: </a>
        During query analysis, I am unable to obtain an
        <code class="literal">EXAMPLE</code> or <code class="literal">EXPLAIN</code>
        information when examining the detail of the analyzed query
        within the <span class="guilabel">Query Analyzer</span> panel.
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-1-9">15.12.9: </a>
        Does the Gold-level key support Silver-level advisors?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-1-10">15.12.10: </a>
        I have enabled <code class="literal">EXPLAIN</code> queries for Query
        Analyzer, but no queries with the <code class="literal">EXPLAIN</code>
        data are showing up in the display.
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-1-11">15.12.11: </a>
        Can I run MySQL Enterprise Service Manager on machine with other applications
        running?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-1-12">15.12.12: </a>
        Why do some rules appear to have a <span class="guilabel">Severity</span>
        of <span class="guilabel">Unknown</span>?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-1-13">15.12.13: </a>
        How do I change the name of a server?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-1-14">15.12.14: </a>
        I have started a Data Migration of my old data for a server to
        MySQL Enterprise Service Manager 2.0, but I have noticed that the performance of
        the monitor server has degraded significantly. Can I stop the
        migration?
      </p></li></ul></div><p><span class="bold"><strong>Questions and Answers</strong></span></p><p><a name="qandaitem-15-12-1-1"></a><span class="bold"><strong>15.12.1: </strong></span><span class="bold"><strong>
        While monitoring my network traffic I have noticed that the
        agents communicate information at irregular intervals to the
        MySQL Enterprise Service Manager. I cannot see anything in my configuration that
        would explain this behaviour. What is going on?
      </strong></span></p><p>
        Each MySQL Enterprise Monitor Agent periodically sends information to the server
        about a range of different information, including the core rule
        and statistical data, Query Analyzer information and other data
        used to monitor the status of your MySQL server.
      </p><p>
        One element of this is called the MySQL Enterprise Monitor Agent Heartbeat,
        which is core information exchange that indicates that the
        monitored server is still up and running. The heartbeat
        information is vital because it tells the MySQL Enterprise Service Manager that
        the agent and server are still communicating. This information
        is sent regularly to the MySQL Enterprise Service Manager, but to prevent
        multiple agents from sending the information at the same time,
        and creating a large network load (or storm), the interval is
        randomized with each heartbeat. The randomization ensures that
        the information is still uploaded periodically, but without the
        potential to overload the network with this data.
      </p><p><a name="qandaitem-15-12-1-2"></a><span class="bold"><strong>15.12.2: </strong></span><span class="bold"><strong>
        How frequently is the data purge process executed?
      </strong></span></p><p>
        A data purge process is started approximately once a minute. If
        you have changed the purge period then the data will start to be
        purged within the next minute.
      </p><p><a name="qandaitem-15-12-1-3"></a><span class="bold"><strong>15.12.3: </strong></span><span class="bold"><strong>
        Does Query Analyzer work with all versions of MySQL and the
        MySQL Client Libraries?
      </strong></span></p><p>
        The MySQL Proxy component, and Query Analyzer, require that
        clients connecting through MySQL Enterprise Monitor Agent are using MySQL 5.0 or
        later. Clients that use the library provided with MySQL 4.1 or
        earlier will not work with MySQL Enterprise Monitor Agent.
      </p><p><a name="qandaitem-15-12-1-4"></a><span class="bold"><strong>15.12.4: </strong></span><span class="bold"><strong>
        My MySQL Enterprise Service Manager is behind a firewall but it cannot
        communicate with the MySQL Enterprise website to register and
        download my license key and advisor bundle. I normally use a
        proxy service to access external websites. How do I configure
        the proxy settings for MySQL Enterprise Dashboard?
      </strong></span></p><p>
        To configure a proxy service, you need to edit the
        <code class="filename">apache-tomcat/conf/catalina.properties</code> file
        within the MySQL Enterprise Service Manager installation directory. To make the
        changes, the proxy configuration information to the end of the
        file by setting the <code class="literal">http.proxyHost</code> and
        <code class="literal">http.proxyPort</code> properties:
      </p><pre class="programlisting">http.proxyHost=proxy.example.com
http.proxyPort=8080</pre><p>
        You will need to restart the MySQL Enterprise Service Manager for the change to
        take effect:
      </p><pre class="programlisting">shell&gt; mysqlmonitorctl.sh restart</pre><p><a name="qandaitem-15-12-1-5"></a><span class="bold"><strong>15.12.5: </strong></span><span class="bold"><strong>
        What is the relationship between the advisor JAR file and the
        key?
      </strong></span></p><p>
        The JAR file contains graph and advisor definitions. The key
        file contains typical customer validation data such as contract
        information, number of servers covered, subscription level and
        dates.
      </p><p><a name="qandaitem-15-12-1-6"></a><span class="bold"><strong>15.12.6: </strong></span><span class="bold"><strong>
        I have set the graphs to update every 5 minutes, and the page
        refresh to occur every minute. The page is refreshing correctly,
        but the graphs do not seem to update.
      </strong></span></p><p>
        The graph refresh and page refresh are two different parameters.
        The graphs will update according to their refresh period,
        regardless of the refresh period set for the main display page.
      </p><p><a name="qandaitem-15-12-1-7"></a><span class="bold"><strong>15.12.7: </strong></span><span class="bold"><strong>
        Can the Trial-level key work with the Gold-level advisors JAR
        file?
      </strong></span></p><p>
        The Trial-level key can only be used with the Trial-level
        advisors JAR file.
      </p><p><a name="qandaitem-15-12-1-8"></a><span class="bold"><strong>15.12.8: </strong></span><span class="bold"><strong>
        During query analysis, I am unable to obtain an
        <code class="literal">EXAMPLE</code> or <code class="literal">EXPLAIN</code>
        information when examining the detail of the analyzed query
        within the <span class="guilabel">Query Analyzer</span> panel.
      </strong></span></p><p>
        You must explicitly enable the <code class="literal">EXAMPLE</code> and
        <code class="literal">EXPLAIN</code> query functionality. Make sure that
        you have enabled both panels. See
        <a href="mem-introduction.html#mem-query-analysis-settings" title="15.10.6. Query Analyzer Settings">Section 15.10.6, “Query Analyzer Settings”</a>.
      </p><p><a name="qandaitem-15-12-1-9"></a><span class="bold"><strong>15.12.9: </strong></span><span class="bold"><strong>
        Does the Gold-level key support Silver-level advisors?
      </strong></span></p><p>
        The Gold-level advisor JAR file will contain Silver-level
        advisors plus Gold-level advisors. However, you cannot use the
        Gold-level key with the Silver-level advisors JAR file. The
        Gold-level key can only be used with the Gold-level advisors JAR
        file.
      </p><p><a name="qandaitem-15-12-1-10"></a><span class="bold"><strong>15.12.10: </strong></span><span class="bold"><strong>
        I have enabled <code class="literal">EXPLAIN</code> queries for Query
        Analyzer, but no queries with the <code class="literal">EXPLAIN</code>
        data are showing up in the display.
      </strong></span></p><p>
        Query Analyzer only obtains <code class="literal">EXPLAIN</code>
        information when the MySQL Enterprise Monitor Agent identifies a long running
        query. If none of your queries exceed the defined threshold,
        then the <code class="literal">EXPLAIN</code> information is not obtain
        and provided to the Query Analyze for display.
      </p><p>
        To change the query duration at which an
        <code class="literal">EXPLAIN</code> is triggered, you must edit the
        <code class="filename">share/mysql-proxy/quan.lua</code> file within the
        MySQL Enterprise Monitor Agent directory on each server. You need to change the
        value configured in the
        <code class="literal">auto_explain_min_exec_time_us</code>. The default is
        500ms:
      </p><pre class="programlisting">---
-- configuration
--
-- SET GLOBAL analyze_query.auto_filter = 0
if not proxy.global.config.quan then
        proxy.global.config.quan = {
                analyze_queries  = true,   -- track all queries
                query_cutoff     = 160,    -- only show the first 160 chars of the query
                num_worst_queries = 5,
                auto_explain     = true,
                auto_explain_min_exec_time_us = 500 * 1000
        }
end
</pre><p>
        The value is expressed in microseconds, which is why the value
        must be multiplied by 1000. To reduce this value to 100ms you
        would modify the line:
      </p><pre class="programlisting">auto_explain_min_exec_time_us = 100 * 1000</pre><p>
        You do not need to restart MySQL Enterprise Monitor Agent for the changes to
        take effect.
      </p><p><a name="qandaitem-15-12-1-11"></a><span class="bold"><strong>15.12.11: </strong></span><span class="bold"><strong>
        Can I run MySQL Enterprise Service Manager on machine with other applications
        running?
      </strong></span></p><p>
        You can, but ideally you should be running your MySQL Enterprise Service Manager
        on a dedicated machine, especially if you are monitoring a
        number of different agents. For more information, see
        <a href="mem-introduction.html#mem-deployment-config" title="15.4.4. Choosing Suitable MySQL Enterprise Service Manager Hardware Configurations">Section 15.4.4, “Choosing Suitable MySQL Enterprise Service Manager Hardware Configurations”</a>.
      </p><p><a name="qandaitem-15-12-1-12"></a><span class="bold"><strong>15.12.12: </strong></span><span class="bold"><strong>
        Why do some rules appear to have a <span class="guilabel">Severity</span>
        of <span class="guilabel">Unknown</span>?
      </strong></span></p><p>
        Due to timing issues, certain rules such as “<span class="quote">32-Bit Binary
        Running on 64-Bit AMD Or Intel System</span>” and “<span class="quote">Key
        Buffer Size Greater Than 4 GB</span>” do not evaluate correctly
        due to timing issues. This is a known issue and will be resolved
        in future versions of MySQL Enterprise Monitor.
      </p><p><a name="qandaitem-15-12-1-13"></a><span class="bold"><strong>15.12.13: </strong></span><span class="bold"><strong>
        How do I change the name of a server?
      </strong></span></p><p>
        Go to the <span class="guilabel">Manage Servers</span> panel within
        <span class="guilabel">Settings</span> and click <span class="guibutton">Rename
        server</span>.
      </p><p><a name="qandaitem-15-12-1-14"></a><span class="bold"><strong>15.12.14: </strong></span><span class="bold"><strong>
        I have started a Data Migration of my old data for a server to
        MySQL Enterprise Service Manager 2.0, but I have noticed that the performance of
        the monitor server has degraded significantly. Can I stop the
        migration?
      </strong></span></p><p>
        You can stop the migration of your historical data at any time.
        Go to the <span class="guilabel">Manage Servers</span> display of the
        <span class="guilabel">Settings</span> panel and click
        <span class="guibutton">Stop</span> next to each server that is being
        migrated. You can restart the migration at any point.
      </p><p><a name="mem-faq-enterprise"></a>
    <span class="bold"><strong>MySQL Enterprise</strong></span>
  </p><p><span class="bold"><strong>Questions</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><a href="mem-introduction.html#qandaitem-15-12-2-1">15.12.1: </a>
        How should I decide between MySQL Enterprise Basic, Silver, Gold
        and Platinum?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-2-2">15.12.2: </a>
        What is MySQL Enterprise Server?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-2-3">15.12.3: </a>
        How do I get a 30-day trial on MySQL Enterprise?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-2-4">15.12.4: </a>
        Does MySQL Enterprise include Maintenance, Updates, and
        Upgrades?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-2-5">15.12.5: </a>
        What is a Technical Account Manager?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-2-6">15.12.6: </a>
        Are there any Webinars available?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-2-7">15.12.7: </a>
        What is the pricing of MySQL Enterprise?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-2-8">15.12.8: </a>
        Does MySQL Enterprise include Emergency Hot Fix Builds?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-2-9">15.12.9: </a>
        Are there any MySQL Enterprise White Papers available?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-2-10">15.12.10: </a>
        How do I buy MySQL Enterprise?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-2-11">15.12.11: </a>
        What is MySQL Enterprise?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-2-12">15.12.12: </a>
        Does MySQL provide IP (Intellectual Property) Indemnification?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-2-13">15.12.13: </a>
        Can I buy MySQL Enterprise subscriptions for multiple years?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-2-14">15.12.14: </a>
        What is MySQL Enterprise Unlimited?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-2-15">15.12.15: </a>
        What is MySQL Production Support?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-2-16">15.12.16: </a>
        Can I buy MySQL Enterprise subscriptions for only some of my
        production MySQL database servers?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-2-17">15.12.17: </a>
        Are there any Demo/Tutorials available for MySQL Enterprise?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-2-18">15.12.18: </a>
        Does MySQL Enterprise include 24x7 Technical Support?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-2-19">15.12.19: </a>
        What if I plan to add more MySQL servers to my MySQL Enterprise
        subscription?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-2-20">15.12.20: </a>
        What is the list of Supported Platforms?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-2-21">15.12.21: </a>
        Do all my MySQL Enterprise subscriptions need to be at the same
        tier?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-2-22">15.12.22: </a>
        What is MySQL Consultative Support?
      </p></li></ul></div><p><span class="bold"><strong>Questions and Answers</strong></span></p><p><a name="qandaitem-15-12-2-1"></a><span class="bold"><strong>15.12.1: </strong></span><span class="bold"><strong>
        How should I decide between MySQL Enterprise Basic, Silver, Gold
        and Platinum?
      </strong></span></p><p>
        MySQL Enterprise subscriptions are available in 4 tiers,
        providing you the flexibility of choosing the capabilities and
        SLA that best meet your requirements.
        <a href="/products/enterprise/features.html" target="_top">Learn
        More</a> If you have questions and what to discuss your
        specific requirements, please
        <a href="/about/contact/sales.html?s=corporate" target="_top">Contact MySQL
        Sales</a>
      </p><p><a name="qandaitem-15-12-2-2"></a><span class="bold"><strong>15.12.2: </strong></span><span class="bold"><strong>
        What is MySQL Enterprise Server?
      </strong></span></p><p>
        MySQL Enterprise Server software is the most reliable, secure
        and up-to-date version of MySQL for cost-effectively delivering
        E-commerce, Online Transaction Processing (OLTP), and
        multi-terabyte Data Warehousing applications. It is a fully
        integrated transaction-safe, ACID compliant database with full
        commit, rollback, crash recovery and row level locking
        capabilities. MySQL delivers the ease of use, scalability, and
        performance that has made it MySQL the world’s most popular
        open source database.
        <a href="/products/enterprise/server.html" target="_top">Learn More</a>
      </p><p><a name="qandaitem-15-12-2-3"></a><span class="bold"><strong>15.12.3: </strong></span><span class="bold"><strong>
        How do I get a 30-day trial on MySQL Enterprise?
      </strong></span></p><p>
        You can experience the MySQL Enterprise Monitor for 30 days by
        registering to receive an email with login instructions.
        <a href="/trials/enterprise" target="_top">Learn More</a>
      </p><p><a name="qandaitem-15-12-2-4"></a><span class="bold"><strong>15.12.4: </strong></span><span class="bold"><strong>
        Does MySQL Enterprise include Maintenance, Updates, and
        Upgrades?
      </strong></span></p><p>
        Yes. As long as you have a valid contract for MySQL Enterprise,
        you will receive all new MySQL Enterprise Server software
        releases including Software Maintenance, Updates, and Upgrades.
        The Software Update Service will automatically notify you of the
        new releases.
      </p><p><a name="qandaitem-15-12-2-5"></a><span class="bold"><strong>15.12.5: </strong></span><span class="bold"><strong>
        What is a Technical Account Manager?
      </strong></span></p><p>
        MySQL Enterprise, at the Platinum tier, provides the option for
        a Technical Account Manager (TAM). The TAM is your advocate
        within MySQL, who proactively works to maximize your benefits
        from MySQL Support Services.
        <a href="/products/enterprise/tam.html" target="_top">Learn More</a>
      </p><p><a name="qandaitem-15-12-2-6"></a><span class="bold"><strong>15.12.6: </strong></span><span class="bold"><strong>
        Are there any Webinars available?
      </strong></span></p><p>
        Yes. MySQL provides regularly scheduled Live Webinars.
        <a href="/news-and-events/web-seminars/index.html" target="_top">Learn
        More</a> MySQL also provides On-Demand Webinars to fit your
        schedule. These are recordings of previously held Live Webinars
        that you can replay at any time.
        <a href="/news-and-events/web-seminars/index.html" target="_top">Learn
        More</a>
      </p><p><a name="qandaitem-15-12-2-7"></a><span class="bold"><strong>15.12.7: </strong></span><span class="bold"><strong>
        What is the pricing of MySQL Enterprise?
      </strong></span></p><p>
        The pricing model for MySQL Enterprise is based on two key
        components: per server and per year. MySQL Enterprise does not
        have artificial restrictions based on CPUs, Memory, Machine
        Size, or Named Users. MySQL Enterprise is available in 4 tiers
        (Basic, Silver, Gold and Platinum). Choose the tier that best
        meets your requirements and budget.
        <a href="/products/enterprise/features.html" target="_top">Learn
        More</a>
      </p><p><a name="qandaitem-15-12-2-8"></a><span class="bold"><strong>15.12.8: </strong></span><span class="bold"><strong>
        Does MySQL Enterprise include Emergency Hot Fix Builds?
      </strong></span></p><p>
        MySQL Enterprise, at the Gold and Platinum tiers, gives you the
        ability to request an Emergency Hot Fix Build to fix issues not
        already fixed in a MySQL Rapid Update or MySQL Quarterly Service
        Pack.
      </p><p><a name="qandaitem-15-12-2-9"></a><span class="bold"><strong>15.12.9: </strong></span><span class="bold"><strong>
        Are there any MySQL Enterprise White Papers available?
      </strong></span></p><p>
        Yes. Detailed architecture, technology, and business white
        papers are available.
        <a href="/products/enterprise/whitepapers.html" target="_top">Learn
        More</a>
      </p><p><a name="qandaitem-15-12-2-10"></a><span class="bold"><strong>15.12.10: </strong></span><span class="bold"><strong>
        How do I buy MySQL Enterprise?
      </strong></span></p><p>
        For pricing and to buy MySQL Enterprise, visit the
        <a href="https://shop.mysql.com/enterprise/" target="_top">Online
        Shop</a> For volume discounts or for more information,
        please
        <a href="/about/contact/sales.html?s=corporate" target="_top">Contact MySQL
        Sales</a>
      </p><p><a name="qandaitem-15-12-2-11"></a><span class="bold"><strong>15.12.11: </strong></span><span class="bold"><strong>
        What is MySQL Enterprise?
      </strong></span></p><p>
        The MySQL Enterprise subscription is the most comprehensive
        offering of MySQL database software, services and production
        support to ensure your business achieves the highest levels of
        reliability, security and uptime.
      </p><p>
        MySQL Enterprise includes:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            MySQL Enterprise Server software, the most reliable, secure
            and up-to date version of the world’s most popular open
            source database
          </p></li><li><p>
            MySQL Enterprise Monitor that continuously monitors your
            database and proactively advises you on how to implement
            MySQL best practices
          </p></li><li><p>
            MySQL 24x7 Production Support with fast response times to
            assist you in the development, deployment and management of
            MySQL applications
          </p></li></ul></div><p>
        MySQL Enterprise is available in 4 tiers (Basic, Silver, Gold,
        Platinum). <a href="/products/enterprise/features.html" target="_top">Learn
        More</a>
      </p><p><a name="qandaitem-15-12-2-12"></a><span class="bold"><strong>15.12.12: </strong></span><span class="bold"><strong>
        Does MySQL provide IP (Intellectual Property) Indemnification?
      </strong></span></p><p>
        MySQL Enterprise, at the Gold and Platinum tiers, has the option
        of IP Indemnification, for qualifying customers at no extra
        cost. This provides you with legal protection that you expect
        from enterprise software providers.
        <a href="/products/enterprise/indemnification.html" target="_top">Learn
        More</a>
      </p><p><a name="qandaitem-15-12-2-13"></a><span class="bold"><strong>15.12.13: </strong></span><span class="bold"><strong>
        Can I buy MySQL Enterprise subscriptions for multiple years?
      </strong></span></p><p>
        MySQL Enterprise subscriptions have duration of at least 1 year.
        Customers have the flexibility of choosing terms with multi-year
        durations. To purchase multi-year contracts, please
        <a href="/about/contact/sales.html?s=corporate" target="_top">Contact MySQL
        Sales</a>
      </p><p><a name="qandaitem-15-12-2-14"></a><span class="bold"><strong>15.12.14: </strong></span><span class="bold"><strong>
        What is MySQL Enterprise Unlimited?
      </strong></span></p><p>
        MySQL Enterprise Unlimited is a unique offering that allows you
        to deploy an unlimited number of MySQL Enterprise Servers for
        the price of a single CPU of Oracle Enterprise Edition.
        <a href="/products/enterprise/unlimited.html" target="_top">Learn
        More</a>
      </p><p><a name="qandaitem-15-12-2-15"></a><span class="bold"><strong>15.12.15: </strong></span><span class="bold"><strong>
        What is MySQL Production Support?
      </strong></span></p><p>
        Production Support consists of 4 components:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Problem Resolution Support
            </p></li><li><p>
              Consultative Support
            </p></li><li><p>
              Knowledge Base
            </p></li><li><p>
              Technical Account Manager (option)
            </p></li></ul></div><p>
        MySQL Production Support gives you priority access with
        guaranteed response times to assist you with the development,
        deployment and management of your MySQL applications.
        <a href="/products/enterprise/support.html" target="_top">Learn
        More</a>
      </p><p><a name="qandaitem-15-12-2-16"></a><span class="bold"><strong>15.12.16: </strong></span><span class="bold"><strong>
        Can I buy MySQL Enterprise subscriptions for only some of my
        production MySQL database servers?
      </strong></span></p><p>
        When you choose MySQL Enterprise subscriptions, they must cover
        all database servers that power that specific application. To
        negotiate volume discounts, please
        <a href="/about/contact/sales.html?s=corporate" target="_top">Contact MySQL
        Sales</a>
      </p><p><a name="qandaitem-15-12-2-17"></a><span class="bold"><strong>15.12.17: </strong></span><span class="bold"><strong>
        Are there any Demo/Tutorials available for MySQL Enterprise?
      </strong></span></p><p>
        Yes. Multiple self-running demos are available.
        <a href="/products/enterprise/demo.html" target="_top">Learn More</a>
      </p><p><a name="qandaitem-15-12-2-18"></a><span class="bold"><strong>15.12.18: </strong></span><span class="bold"><strong>
        Does MySQL Enterprise include 24x7 Technical Support?
      </strong></span></p><p>
        MySQL Enterprise, at the Gold and Platinum tiers, includes 24x7
        phone and email access to the MySQL Support Team.
        <a href="/products/enterprise/problemresolution.html" target="_top">Learn
        More</a>
      </p><p><a name="qandaitem-15-12-2-19"></a><span class="bold"><strong>15.12.19: </strong></span><span class="bold"><strong>
        What if I plan to add more MySQL servers to my MySQL Enterprise
        subscription?
      </strong></span></p><p>
        A great option is the MySQL Enterprise Unlimited offering that
        allows you cover an unlimited number of MySQL servers for a
        fixed, low price.
        <a href="/products/enterprise/unlimited.html" target="_top">Learn
        More</a>
      </p><p><a name="qandaitem-15-12-2-20"></a><span class="bold"><strong>15.12.20: </strong></span><span class="bold"><strong>
        What is the list of Supported Platforms?
      </strong></span></p><p>
        MySQL Enterprise provides broad coverage in its list of
        Supported Platforms.
        <a href="/support/supportedplatforms/" target="_top">Learn More</a>
      </p><p><a name="qandaitem-15-12-2-21"></a><span class="bold"><strong>15.12.21: </strong></span><span class="bold"><strong>
        Do all my MySQL Enterprise subscriptions need to be at the same
        tier?
      </strong></span></p><p>
        MySQL Enterprise subscriptions must be at the same tier (Basic,
        Silver, Gold, Platinum) for all database servers that power that
        specific application.
      </p><p><a name="qandaitem-15-12-2-22"></a><span class="bold"><strong>15.12.22: </strong></span><span class="bold"><strong>
        What is MySQL Consultative Support?
      </strong></span></p><p>
        MySQL Enterprise, at the Gold and Platinum tiers, includes
        Consultative Support. This is a proactive approach to support
        that is designed to help you avoid critical outages. MySQL
        Support Engineers advise you on how to properly design and tune
        your MySQL servers, schema, queries, and replication set-up to
        maximize performance and availability. Also, by taking the
        initiative to properly design and tune your MySQL database
        applications you can avoid having to purchase expensive hardware
        for your IT infrastructure.
        <a href="/products/enterprise/consultativesupport.html" target="_top">Learn
        More</a>
      </p><p><a name="mem-faq-monitor"></a>
    <span class="bold"><strong>MySQL Monitor</strong></span>
  </p><p><span class="bold"><strong>Questions</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><a href="mem-introduction.html#qandaitem-15-12-3-1">15.12.1: </a>
        What is MySQL Enterprise Monitor?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-3-2">15.12.2: </a>
        What versions of MySQL are supported by the MySQL Enterprise
        Monitor?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-3-3">15.12.3: </a>
        What MySQL Enterprise subscription levels include the MySQL
        Enterprise Monitor?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-3-4">15.12.4: </a>
        What are the features and related benefits of the MySQL
        Enterprise Monitor?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-3-5">15.12.5: </a>
        What are the MySQL Enterprise Advisors and Advisor Rules?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-3-6">15.12.6: </a>
        How is the Enterprise Monitor web application architected?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-3-7">15.12.7: </a>
        What operating system platforms are supported by the MySQL
        Enterprise Monitor?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-3-8">15.12.8: </a>
        How do I get the MySQL Enterprise Monitor?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-3-9">15.12.9: </a>
        What makes MySQL Enterprise unique?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-3-10">15.12.10: </a>
        What are the long-term benefits of the MySQL Enterprise Monitor?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-3-11">15.12.11: </a>
        Which set of Enterprise Advisors, Advisor Rules and features are
        best for my use of MySQL?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-3-12">15.12.12: </a>
        How is the MySQL Enterprise Monitor installed and deployed?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-3-13">15.12.13: </a>
        What are the immediate benefits of implementing the MySQL
        Enterprise Monitor?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-3-14">15.12.14: </a>
        How are subscribers notified about the availability of new or
        updated MySQL Enterprise Monitor, MySQL Enterprise Advisors and
        Advisor Rules?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-3-15">15.12.15: </a>
        Which Advisors and features are included under different MySQL
        Enterprise subscription levels?
      </p></li></ul></div><p><span class="bold"><strong>Questions and Answers</strong></span></p><p><a name="qandaitem-15-12-3-1"></a><span class="bold"><strong>15.12.1: </strong></span><span class="bold"><strong>
        What is MySQL Enterprise Monitor?
      </strong></span></p><p>
        Included as part of a MySQL Enterprise subscription, the MySQL
        Enterprise Monitor is a distributed, web-based application that
        helps customers reduce downtime, tighten security and increase
        throughput of their MySQL servers by telling them about problems
        in their database applications before they occur. It is
        downloadable from the Enterprise Customer web site and is
        deployed within the safety of the customer
        datacenter.<a href="/products/enterprise/monitor.html" target="_top">Learn
        More</a>
      </p><p><a name="qandaitem-15-12-3-2"></a><span class="bold"><strong>15.12.2: </strong></span><span class="bold"><strong>
        What versions of MySQL are supported by the MySQL Enterprise
        Monitor?
      </strong></span></p><p>
        The MySQL Enterprise Monitor can be used to monitor MySQL
        versions 4.0 – 5.x.
      </p><p><a name="qandaitem-15-12-3-3"></a><span class="bold"><strong>15.12.3: </strong></span><span class="bold"><strong>
        What MySQL Enterprise subscription levels include the MySQL
        Enterprise Monitor?
      </strong></span></p><p>
        The Enterprise Monitor is available under MySQL Enterprise
        subscription levels Silver, Gold and Platinum.
        <a href="/products/enterprise/features.html" target="_top">Learn
        More</a>
      </p><p><a name="qandaitem-15-12-3-4"></a><span class="bold"><strong>15.12.4: </strong></span><span class="bold"><strong>
        What are the features and related benefits of the MySQL
        Enterprise Monitor?
      </strong></span></p><p>
        The MySQL Enterprise Monitor is like having a "Virtual DBA
        Assistant" at your side to recommend best practices to eliminate
        security vulnerabilities, improve replication, and optimize
        performance. For the complete features and benefits, visit the
        <a href="/products/enterprise/monitor-features.html" target="_top">MySQL
        Enterprise Monitor Features and Benefits page</a>.
      </p><p><a name="qandaitem-15-12-3-5"></a><span class="bold"><strong>15.12.5: </strong></span><span class="bold"><strong>
        What are the MySQL Enterprise Advisors and Advisor Rules?
      </strong></span></p><p>
        The MySQL Enterprise Advisors are a set of best practice
        guidelines for the optimal use of MySQL. Advisors are spread
        across database specific disciplines and are comprised of a set
        of MySQL Advisor Rules that proactively monitor all MySQL
        servers and report on database application problems before they
        occur. Each Advisor Rule provides a detailed overview of the
        problem it is designed to identify, advices on how to correct
        the problem, specifies commands to implement the recommended fix
        and links to additional resources for additional research into
        the issue at hand.
        <a href="/products/enterprise/advisors.html" target="_top">Learn
        More</a>
      </p><p><a name="qandaitem-15-12-3-6"></a><span class="bold"><strong>15.12.6: </strong></span><span class="bold"><strong>
        How is the Enterprise Monitor web application architected?
      </strong></span></p><p>
        The Enterprise Monitor web application is comprised of 3
        components:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Service Agent: A lightweight C program that is installed
              on each of the monitored MySQL servers. Its purpose is to
              collect MySQL SQL and operating system metrics that allow
              the DBA to monitor the overall health, availability and
              performance of the MySQL server. The Service Agent is the
              only component within the application that touches or
              connects to the MySQL Server. It reports the data it
              collects via XML over HTTP to the centralized Service
              Manager.
            </p></li><li><p>
              Service Manager: The main server of the application. The
              Service Manager manages and stores the data collections
              that come in from each service agent. It analyzes these
              collections using MySQL provided best practice Advisor
              rules to determine the health, security, availability and
              performance of each of the monitored MySQL Servers. The
              Service Manager also provides the content for the
              Enterprise Dashboard which serves as the client user
              interface for the distributed web application.
            </p></li><li><p>
              Repository: A MySQL database that is used to stored data
              collections and application-level configuration data.
            </p></li></ul></div><p>
      </p><p><a name="qandaitem-15-12-3-7"></a><span class="bold"><strong>15.12.7: </strong></span><span class="bold"><strong>
        What operating system platforms are supported by the MySQL
        Enterprise Monitor?
      </strong></span></p><p>
        The Enterprise Monitor Service Manager is fully supported on
        most current versions of Linux, Windows XP and Server Editions,
        Solaris and Mac OSX. The Service Agent supports any platform
        supported by the MySQL Enterprise server. For the complete list
        of MySQL Enterprise supported operating systems and CPUs, visit
        the
        <a href="/support/supportedplatforms/enterprise.html" target="_top">Supported
        Platforms page</a>.
      </p><p><a name="qandaitem-15-12-3-8"></a><span class="bold"><strong>15.12.8: </strong></span><span class="bold"><strong>
        How do I get the MySQL Enterprise Monitor?
      </strong></span></p><p>
        The MySQL Enterprise Monitor is available for download to MySQL
        Enterprise customers at the Silver, Gold and Platinum
        subscription levels.
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              To experience the MySQL Enterprise Monitor for 30 days,
              visit the <a href="/trials/enterprise" target="_top">Trial
              Subscription page</a>
            </p></li><li><p>
              To buy MySQL Enterprise, visit the
              <a href="https://shop.mysql.com/enterprise/" target="_top">Online
              Shop</a>
            </p></li></ul></div><p>
      </p><p><a name="qandaitem-15-12-3-9"></a><span class="bold"><strong>15.12.9: </strong></span><span class="bold"><strong>
        What makes MySQL Enterprise unique?
      </strong></span></p><p>
        Of the products on the market that monitor MySQL, SQL code and
        OS specific metrics, the MySQL Enterprise Monitor is the only
        solution that is built and supported by the engineers at MySQL.
        Unlike other solutions that report on raw MySQL and OS level
        metrics, the MySQL Enterprise Monitor is designed to optimize
        the use of MySQL by proactively monitoring MySQL instances and
        providing notifications and “MySQL DBA expertise in a box”
        advice on corrective measures DBAs can take before problems
        occur.
      </p><p><a name="qandaitem-15-12-3-10"></a><span class="bold"><strong>15.12.10: </strong></span><span class="bold"><strong>
        What are the long-term benefits of the MySQL Enterprise Monitor?
      </strong></span></p><p>
        Over time, the task of managing even medium-scale MySQL server
        farms becomes exponentially more complicated, especially as the
        load of users, connections, application queries, and objects on
        each MySQL server increases. The Enterprise Monitor continually
        monitors the dynamic security, performance, replication and
        schema relevant metrics of all MySQL servers, so as the number
        of MySQL continues to grow, DBAs are kept up to date on
        potential problems and proactive measures that can be
        implemented to ensure each server continues to operate at the
        highest levels of security, performance and reliability.
      </p><p><a name="qandaitem-15-12-3-11"></a><span class="bold"><strong>15.12.11: </strong></span><span class="bold"><strong>
        Which set of Enterprise Advisors, Advisor Rules and features are
        best for my use of MySQL?
      </strong></span></p><p>
        The Enterprise Monitor Advisors and Advisor Rules are available
        at 3 MySQL Enterprise subscription tiers: Choose MySQL
        Enterprise Silver if you need:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Assurance you are running the most current, bug-free version
            of MySQL across all of your servers.
          </p></li><li><p>
            Recoverability of your MySQL servers.
          </p></li><li><p>
            The highest level of security for your MySQL servers.
          </p></li><li><p>
            Monitoring of maximum or disallowed MySQL connections.
          </p></li><li><p>
            Optimized startup configuration settings.
          </p></li></ul></div><p>
        Choose MySQL Enterprise Gold, when you need everything in
        Silver, PLUS:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Easy collection and detection of problematic SQL code
            running on your production or development systems.
          </p></li><li><p>
            Insight and corrective advice on MySQL replication status,
            sync, and performance related issues.
          </p></li><li><p>
            Auto detection and documenting of your Replication
            topologies.
          </p></li><li><p>
            Advanced monitoring of your Replication and Scale-out
            environment.
          </p></li></ul></div><p>
        Choose MySQL Enterprise Platinum, when you need everything in
        Gold, PLUS:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Identification and advice on unplanned database and object
            level schema changes (Create, Alter, and Drop) across your
            MySQL servers.
          </p></li><li><p>
            Proactive monitoring and advice on tuning the performance of
            your MySQL servers.
          </p></li></ul></div><p><a name="qandaitem-15-12-3-12"></a><span class="bold"><strong>15.12.12: </strong></span><span class="bold"><strong>
        How is the MySQL Enterprise Monitor installed and deployed?
      </strong></span></p><p>
        The Enterprise Monitor is powered by a distributed web
        application that is installed and deployed within the confines
        of the corporate firewall.
      </p><p><a name="qandaitem-15-12-3-13"></a><span class="bold"><strong>15.12.13: </strong></span><span class="bold"><strong>
        What are the immediate benefits of implementing the MySQL
        Enterprise Monitor?
      </strong></span></p><p>
        Often MySQL installations are implemented with default settings
        that may not be best suited for specific applications or usage
        patterns. The MySQL Advisors go to work immediately in these
        environments to identify potential problems and proactively
        notify and advise DBAs on key MySQL settings that can be tuned
        to improve availability, tighten security, and increase the
        throughput of their existing MySQL servers
      </p><p><a name="qandaitem-15-12-3-14"></a><span class="bold"><strong>15.12.14: </strong></span><span class="bold"><strong>
        How are subscribers notified about the availability of new or
        updated MySQL Enterprise Monitor, MySQL Enterprise Advisors and
        Advisor Rules?
      </strong></span></p><p>
        Customers will receive notifications of new and updated MySQL
        Enterprise Monitor and Advisors as they become available via the
        MySQL Enterprise Software Update Service. Notifications will be
        generated and sent based on the customer profile and the MySQL
        Enterprise subscription level.
      </p><p><a name="qandaitem-15-12-3-15"></a><span class="bold"><strong>15.12.15: </strong></span><span class="bold"><strong>
        Which Advisors and features are included under different MySQL
        Enterprise subscription levels?
      </strong></span></p><p>
        For the complete list of the MySQL Enterprise Advisors that are
        available under each MySQL Enterprise subscription level, visit
        the <a href="/products/enterprise/features.html" target="_top">Features
        page</a>.
      </p><p><a name="mem-faq-queryanalyzer"></a>
    <span class="bold"><strong>MySQL Query Analyzer</strong></span>
  </p><p><span class="bold"><strong>Questions</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><a href="mem-introduction.html#qandaitem-15-12-4-1">15.12.1: </a>
        Can I leave the MySQL Query Analyzer enabled at all times?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-4-2">15.12.2: </a>
        What are the typical use cases of the MySQL Query Analyzer?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-4-3">15.12.3: </a>
        What is the MySQL Query Analyzer?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-4-4">15.12.4: </a>
        What are the main features and benefits of the MySQL Query
        Analyzer?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-4-5">15.12.5: </a>
        What makes the MySQL Query Analyzer unique?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-4-6">15.12.6: </a>
        How are subscribers notified about updates to the MySQL Query
        Analyzer application components?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-4-7">15.12.7: </a>
        How can I get the MySQL Query Analyzer?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-4-8">15.12.8: </a>
        How is the MySQL Query Analyzer installed and enabled?
      </p></li><li><p><a href="mem-introduction.html#qandaitem-15-12-4-9">15.12.9: </a>
        What overhead can I expect when the MySQL Query Analyzer is
        installed and enabled?
      </p></li></ul></div><p><span class="bold"><strong>Questions and Answers</strong></span></p><p><a name="qandaitem-15-12-4-1"></a><span class="bold"><strong>15.12.1: </strong></span><span class="bold"><strong>
        Can I leave the MySQL Query Analyzer enabled at all times?
      </strong></span></p><p>
        We have customers who have the Query Analyzer enabled and
        collecting queries on their development and QA servers so they
        can tune their code and monitor the fixes as part of the
        development process. For production systems, Query collection
        and analysis can easily be toggled on when a slowdown occurs. To
        avoid collection mode overhead many users are using simple
        scripts to enable the Query Analyzer to sample queries during
        non-peak hours, typically during 30 minute windows. They can
        then view the collected queries using the date/time or interval
        filter options.
      </p><p><a name="qandaitem-15-12-4-2"></a><span class="bold"><strong>15.12.2: </strong></span><span class="bold"><strong>
        What are the typical use cases of the MySQL Query Analyzer?
      </strong></span></p><p>
        The typical use cases for developers, DBAs and system
        administrators are:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Developers – Monitor and tune application queries during
              development before they are promoted to production.
            </p></li><li><p>
              DBAs and System Administrators – Identify problem SQL
              code as it runs in production and advise development teams
              on how to tune. This use case benefits the most from
              regular sampling of queries as they are running, most
              often during non-peak hours.
            </p></li></ul></div><p>
      </p><p><a name="qandaitem-15-12-4-3"></a><span class="bold"><strong>15.12.3: </strong></span><span class="bold"><strong>
        What is the MySQL Query Analyzer?
      </strong></span></p><p>
        The MySQL Query Analyzer allows DBAs, developers and system
        administrators to improve application performance by collecting,
        monitoring, and analyzing queries as they run on their MySQL
        servers. <a href="/products/enterprise/query.html" target="_top">Learn
        More</a>
      </p><p><a name="qandaitem-15-12-4-4"></a><span class="bold"><strong>15.12.4: </strong></span><span class="bold"><strong>
        What are the main features and benefits of the MySQL Query
        Analyzer?
      </strong></span></p><p>
        For the complete features and benefits, visit the
        <a href="/products/enterprise/monitor-features.html" target="_top">MySQL
        Enterprise Monitor Features and Benefits page.</a>
      </p><p><a name="qandaitem-15-12-4-5"></a><span class="bold"><strong>15.12.5: </strong></span><span class="bold"><strong>
        What makes the MySQL Query Analyzer unique?
      </strong></span></p><p>
        Other products (free, open source and commercial) that provide
        MySQL query monitoring are dependent on the MySQL Slow Query Log
        being enabled and available for sampling. While this provides
        some time savings over the DBA collecting and parsing the Log,
        the Slow Query Log comes with overhead and does not capture sub
        millisecond executions. The log data also grows very large very
        quickly.
      </p><p>
        The MySQL Query Analyzer collects queries and execution
        statistics with no dependence on the SQL Query Log, it captures
        all SQL statements sent to the MySQL server and provides an
        aggregated view into the most expensive queries in number of
        executions and total execution time. It is also fully supported
        as part of the MySQL Enterprise subscription.
      </p><p><a name="qandaitem-15-12-4-6"></a><span class="bold"><strong>15.12.6: </strong></span><span class="bold"><strong>
        How are subscribers notified about updates to the MySQL Query
        Analyzer application components?
      </strong></span></p><p>
        Customers will receive notifications of the MySQL Query Analyzer
        updates as they become available via the MySQL Enterprise
        Software Update and Alert Service. Notifications will be
        generated and sent based on the customer profile and the MySQL
        Enterprise subscription level.
      </p><p><a name="qandaitem-15-12-4-7"></a><span class="bold"><strong>15.12.7: </strong></span><span class="bold"><strong>
        How can I get the MySQL Query Analyzer?
      </strong></span></p><p>
        The MySQL Query Analyzer is available for download to MySQL
        Enterprise customers at the Gold and Platinum subscription
        levels.
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              To experience the MySQL Enterprise Monitor for 30 days,
              visit the <a href="/trials/enterprise" target="_top">Trial
              Subscription page</a>
            </p></li><li><p>
              To buy MySQL Enterprise, visit the
              <a href="https://shop.mysql.com/enterprise/" target="_top">Online
              Shop</a>
            </p></li></ul></div><p>
      </p><p><a name="qandaitem-15-12-4-8"></a><span class="bold"><strong>15.12.8: </strong></span><span class="bold"><strong>
        How is the MySQL Query Analyzer installed and enabled?
      </strong></span></p><p>
        The Query Analyzer feature is installed with the Service Agent.
        It is enabled during agent installation and can be toggled
        between collection and pass-thru modes from the Query Analysis
        page of the Enterprise Monitor.
      </p><p><a name="qandaitem-15-12-4-9"></a><span class="bold"><strong>15.12.9: </strong></span><span class="bold"><strong>
        What overhead can I expect when the MySQL Query Analyzer is
        installed and enabled?
      </strong></span></p><p>
        The average overhead when in active collection mode is in the
        15-20% range. In pass-thru mode the overhead is minimal,
        weighing in at 1-5% on most MySQL systems of average load.
      </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ha-overview.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="replication.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 14. High Availability and Scalability </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 16. Replication</td></tr></table></div></body></html>
